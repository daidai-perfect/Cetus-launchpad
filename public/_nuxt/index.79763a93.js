var Sd=Object.defineProperty;var Td=(e,t,n)=>t in e?Sd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var U=(e,t,n)=>(Td(e,typeof t!="symbol"?t+"":t,n),n);import{a8 as xd,aa as Id,ah as Od,ab as Pd}from"./entry.72cf903d.js";import{D as V}from"./decimal.765d8738.js";const jd={},Md=Object.freeze(Object.defineProperty({__proto__:null,default:jd},Symbol.toStringTag,{value:"Module"})),Ed=xd(Md);var m={},Bd={get exports(){return m},set exports(e){m=e}};(function(e){(function(t,n){function i(A,u){if(!A)throw new Error(u||"Assertion failed")}function o(A,u){A.super_=u;var p=function(){};p.prototype=u.prototype,A.prototype=new p,A.prototype.constructor=A}function s(A,u,p){if(s.isBN(A))return A;this.negative=0,this.words=null,this.length=0,this.red=null,A!==null&&((u==="le"||u==="be")&&(p=u,u=10),this._init(A||0,u||10,p||"be"))}typeof t=="object"?t.exports=s:n.BN=s,s.BN=s,s.wordSize=26;var r;try{typeof window<"u"&&typeof window.Buffer<"u"?r=window.Buffer:r=Ed.Buffer}catch{}s.isBN=function(u){return u instanceof s?!0:u!==null&&typeof u=="object"&&u.constructor.wordSize===s.wordSize&&Array.isArray(u.words)},s.max=function(u,p){return u.cmp(p)>0?u:p},s.min=function(u,p){return u.cmp(p)<0?u:p},s.prototype._init=function(u,p,b){if(typeof u=="number")return this._initNumber(u,p,b);if(typeof u=="object")return this._initArray(u,p,b);p==="hex"&&(p=16),i(p===(p|0)&&p>=2&&p<=36),u=u.toString().replace(/\s+/g,"");var v=0;u[0]==="-"&&(v++,this.negative=1),v<u.length&&(p===16?this._parseHex(u,v,b):(this._parseBase(u,p,v),b==="le"&&this._initArray(this.toArray(),p,b)))},s.prototype._initNumber=function(u,p,b){u<0&&(this.negative=1,u=-u),u<67108864?(this.words=[u&67108863],this.length=1):u<4503599627370496?(this.words=[u&67108863,u/67108864&67108863],this.length=2):(i(u<9007199254740992),this.words=[u&67108863,u/67108864&67108863,1],this.length=3),b==="le"&&this._initArray(this.toArray(),p,b)},s.prototype._initArray=function(u,p,b){if(i(typeof u.length=="number"),u.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(u.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var S,P,E=0;if(b==="be")for(v=u.length-1,S=0;v>=0;v-=3)P=u[v]|u[v-1]<<8|u[v-2]<<16,this.words[S]|=P<<E&67108863,this.words[S+1]=P>>>26-E&67108863,E+=24,E>=26&&(E-=26,S++);else if(b==="le")for(v=0,S=0;v<u.length;v+=3)P=u[v]|u[v+1]<<8|u[v+2]<<16,this.words[S]|=P<<E&67108863,this.words[S+1]=P>>>26-E&67108863,E+=24,E>=26&&(E-=26,S++);return this._strip()};function a(A,u){var p=A.charCodeAt(u);if(p>=48&&p<=57)return p-48;if(p>=65&&p<=70)return p-55;if(p>=97&&p<=102)return p-87;i(!1,"Invalid character in "+A)}function c(A,u,p){var b=a(A,p);return p-1>=u&&(b|=a(A,p-1)<<4),b}s.prototype._parseHex=function(u,p,b){this.length=Math.ceil((u.length-p)/6),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var S=0,P=0,E;if(b==="be")for(v=u.length-1;v>=p;v-=2)E=c(u,p,v)<<S,this.words[P]|=E&67108863,S>=18?(S-=18,P+=1,this.words[P]|=E>>>26):S+=8;else{var w=u.length-p;for(v=w%2===0?p+1:p;v<u.length;v+=2)E=c(u,p,v)<<S,this.words[P]|=E&67108863,S>=18?(S-=18,P+=1,this.words[P]|=E>>>26):S+=8}this._strip()};function d(A,u,p,b){for(var v=0,S=0,P=Math.min(A.length,p),E=u;E<P;E++){var w=A.charCodeAt(E)-48;v*=b,w>=49?S=w-49+10:w>=17?S=w-17+10:S=w,i(w>=0&&S<b,"Invalid character"),v+=S}return v}s.prototype._parseBase=function(u,p,b){this.words=[0],this.length=1;for(var v=0,S=1;S<=67108863;S*=p)v++;v--,S=S/p|0;for(var P=u.length-b,E=P%v,w=Math.min(P,P-E)+b,f=0,k=b;k<w;k+=v)f=d(u,k,k+v,p),this.imuln(S),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(E!==0){var oe=1;for(f=d(u,k,u.length,p),k=0;k<E;k++)oe*=p;this.imuln(oe),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}this._strip()},s.prototype.copy=function(u){u.words=new Array(this.length);for(var p=0;p<this.length;p++)u.words[p]=this.words[p];u.length=this.length,u.negative=this.negative,u.red=this.red};function l(A,u){A.words=u.words,A.length=u.length,A.negative=u.negative,A.red=u.red}if(s.prototype._move=function(u){l(u,this)},s.prototype.clone=function(){var u=new s(null);return this.copy(u),u},s.prototype._expand=function(u){for(;this.length<u;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch{s.prototype.inspect=h}else s.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var _=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],C=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(u,p){u=u||10,p=p|0||1;var b;if(u===16||u==="hex"){b="";for(var v=0,S=0,P=0;P<this.length;P++){var E=this.words[P],w=((E<<v|S)&16777215).toString(16);S=E>>>24-v&16777215,v+=2,v>=26&&(v-=26,P--),S!==0||P!==this.length-1?b=_[6-w.length]+w+b:b=w+b}for(S!==0&&(b=S.toString(16)+b);b.length%p!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}if(u===(u|0)&&u>=2&&u<=36){var f=g[u],k=C[u];b="";var oe=this.clone();for(oe.negative=0;!oe.isZero();){var ne=oe.modrn(k).toString(u);oe=oe.idivn(k),oe.isZero()?b=ne+b:b=_[f-ne.length]+ne+b}for(this.isZero()&&(b="0"+b);b.length%p!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}i(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var u=this.words[0];return this.length===2?u+=this.words[1]*67108864:this.length===3&&this.words[2]===1?u+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-u:u},s.prototype.toJSON=function(){return this.toString(16,2)},r&&(s.prototype.toBuffer=function(u,p){return this.toArrayLike(r,u,p)}),s.prototype.toArray=function(u,p){return this.toArrayLike(Array,u,p)};var I=function(u,p){return u.allocUnsafe?u.allocUnsafe(p):new u(p)};s.prototype.toArrayLike=function(u,p,b){this._strip();var v=this.byteLength(),S=b||Math.max(1,v);i(v<=S,"byte array longer than desired length"),i(S>0,"Requested array length <= 0");var P=I(u,S),E=p==="le"?"LE":"BE";return this["_toArrayLike"+E](P,v),P},s.prototype._toArrayLikeLE=function(u,p){for(var b=0,v=0,S=0,P=0;S<this.length;S++){var E=this.words[S]<<P|v;u[b++]=E&255,b<u.length&&(u[b++]=E>>8&255),b<u.length&&(u[b++]=E>>16&255),P===6?(b<u.length&&(u[b++]=E>>24&255),v=0,P=0):(v=E>>>24,P+=2)}if(b<u.length)for(u[b++]=v;b<u.length;)u[b++]=0},s.prototype._toArrayLikeBE=function(u,p){for(var b=u.length-1,v=0,S=0,P=0;S<this.length;S++){var E=this.words[S]<<P|v;u[b--]=E&255,b>=0&&(u[b--]=E>>8&255),b>=0&&(u[b--]=E>>16&255),P===6?(b>=0&&(u[b--]=E>>24&255),v=0,P=0):(v=E>>>24,P+=2)}if(b>=0)for(u[b--]=v;b>=0;)u[b--]=0},Math.clz32?s.prototype._countBits=function(u){return 32-Math.clz32(u)}:s.prototype._countBits=function(u){var p=u,b=0;return p>=4096&&(b+=13,p>>>=13),p>=64&&(b+=7,p>>>=7),p>=8&&(b+=4,p>>>=4),p>=2&&(b+=2,p>>>=2),b+p},s.prototype._zeroBits=function(u){if(u===0)return 26;var p=u,b=0;return p&8191||(b+=13,p>>>=13),p&127||(b+=7,p>>>=7),p&15||(b+=4,p>>>=4),p&3||(b+=2,p>>>=2),p&1||b++,b},s.prototype.bitLength=function(){var u=this.words[this.length-1],p=this._countBits(u);return(this.length-1)*26+p};function O(A){for(var u=new Array(A.bitLength()),p=0;p<u.length;p++){var b=p/26|0,v=p%26;u[p]=A.words[b]>>>v&1}return u}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,p=0;p<this.length;p++){var b=this._zeroBits(this.words[p]);if(u+=b,b!==26)break}return u},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(u){return this.negative!==0?this.abs().inotn(u).iaddn(1):this.clone()},s.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var p=0;p<u.length;p++)this.words[p]=this.words[p]|u.words[p];return this._strip()},s.prototype.ior=function(u){return i((this.negative|u.negative)===0),this.iuor(u)},s.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)},s.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)},s.prototype.iuand=function(u){var p;this.length>u.length?p=u:p=this;for(var b=0;b<p.length;b++)this.words[b]=this.words[b]&u.words[b];return this.length=p.length,this._strip()},s.prototype.iand=function(u){return i((this.negative|u.negative)===0),this.iuand(u)},s.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)},s.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)},s.prototype.iuxor=function(u){var p,b;this.length>u.length?(p=this,b=u):(p=u,b=this);for(var v=0;v<b.length;v++)this.words[v]=p.words[v]^b.words[v];if(this!==p)for(;v<p.length;v++)this.words[v]=p.words[v];return this.length=p.length,this._strip()},s.prototype.ixor=function(u){return i((this.negative|u.negative)===0),this.iuxor(u)},s.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)},s.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)},s.prototype.inotn=function(u){i(typeof u=="number"&&u>=0);var p=Math.ceil(u/26)|0,b=u%26;this._expand(p),b>0&&p--;for(var v=0;v<p;v++)this.words[v]=~this.words[v]&67108863;return b>0&&(this.words[v]=~this.words[v]&67108863>>26-b),this._strip()},s.prototype.notn=function(u){return this.clone().inotn(u)},s.prototype.setn=function(u,p){i(typeof u=="number"&&u>=0);var b=u/26|0,v=u%26;return this._expand(b+1),p?this.words[b]=this.words[b]|1<<v:this.words[b]=this.words[b]&~(1<<v),this._strip()},s.prototype.iadd=function(u){var p;if(this.negative!==0&&u.negative===0)return this.negative=0,p=this.isub(u),this.negative^=1,this._normSign();if(this.negative===0&&u.negative!==0)return u.negative=0,p=this.isub(u),u.negative=1,p._normSign();var b,v;this.length>u.length?(b=this,v=u):(b=u,v=this);for(var S=0,P=0;P<v.length;P++)p=(b.words[P]|0)+(v.words[P]|0)+S,this.words[P]=p&67108863,S=p>>>26;for(;S!==0&&P<b.length;P++)p=(b.words[P]|0)+S,this.words[P]=p&67108863,S=p>>>26;if(this.length=b.length,S!==0)this.words[this.length]=S,this.length++;else if(b!==this)for(;P<b.length;P++)this.words[P]=b.words[P];return this},s.prototype.add=function(u){var p;return u.negative!==0&&this.negative===0?(u.negative=0,p=this.sub(u),u.negative^=1,p):u.negative===0&&this.negative!==0?(this.negative=0,p=u.sub(this),this.negative=1,p):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)},s.prototype.isub=function(u){if(u.negative!==0){u.negative=0;var p=this.iadd(u);return u.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();var b=this.cmp(u);if(b===0)return this.negative=0,this.length=1,this.words[0]=0,this;var v,S;b>0?(v=this,S=u):(v=u,S=this);for(var P=0,E=0;E<S.length;E++)p=(v.words[E]|0)-(S.words[E]|0)+P,P=p>>26,this.words[E]=p&67108863;for(;P!==0&&E<v.length;E++)p=(v.words[E]|0)+P,P=p>>26,this.words[E]=p&67108863;if(P===0&&E<v.length&&v!==this)for(;E<v.length;E++)this.words[E]=v.words[E];return this.length=Math.max(this.length,E),v!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(u){return this.clone().isub(u)};function M(A,u,p){p.negative=u.negative^A.negative;var b=A.length+u.length|0;p.length=b,b=b-1|0;var v=A.words[0]|0,S=u.words[0]|0,P=v*S,E=P&67108863,w=P/67108864|0;p.words[0]=E;for(var f=1;f<b;f++){for(var k=w>>>26,oe=w&67108863,ne=Math.min(f,u.length-1),re=Math.max(0,f-A.length+1);re<=ne;re++){var St=f-re|0;v=A.words[St]|0,S=u.words[re]|0,P=v*S+oe,k+=P/67108864|0,oe=P&67108863}p.words[f]=oe|0,w=k|0}return w!==0?p.words[f]=w|0:p.length--,p._strip()}var j=function(u,p,b){var v=u.words,S=p.words,P=b.words,E=0,w,f,k,oe=v[0]|0,ne=oe&8191,re=oe>>>13,St=v[1]|0,ke=St&8191,Ae=St>>>13,vr=v[2]|0,Me=vr&8191,Ee=vr>>>13,kr=v[3]|0,Be=kr&8191,Re=kr>>>13,Cr=v[4]|0,De=Cr&8191,Ne=Cr>>>13,Ar=v[5]|0,qe=Ar&8191,$e=Ar>>>13,Sr=v[6]|0,Fe=Sr&8191,Le=Sr>>>13,Tr=v[7]|0,Ue=Tr&8191,Ke=Tr>>>13,xr=v[8]|0,Ve=xr&8191,ze=xr>>>13,Ir=v[9]|0,Ge=Ir&8191,We=Ir>>>13,Or=S[0]|0,Xe=Or&8191,He=Or>>>13,Pr=S[1]|0,Je=Pr&8191,Ze=Pr>>>13,jr=S[2]|0,Qe=jr&8191,Ye=jr>>>13,Mr=S[3]|0,et=Mr&8191,tt=Mr>>>13,Er=S[4]|0,nt=Er&8191,it=Er>>>13,Br=S[5]|0,ot=Br&8191,st=Br>>>13,Rr=S[6]|0,rt=Rr&8191,at=Rr>>>13,Dr=S[7]|0,ct=Dr&8191,dt=Dr>>>13,Nr=S[8]|0,lt=Nr&8191,ut=Nr>>>13,qr=S[9]|0,ft=qr&8191,ht=qr>>>13;b.negative=u.negative^p.negative,b.length=19,w=Math.imul(ne,Xe),f=Math.imul(ne,He),f=f+Math.imul(re,Xe)|0,k=Math.imul(re,He);var Do=(E+w|0)+((f&8191)<<13)|0;E=(k+(f>>>13)|0)+(Do>>>26)|0,Do&=67108863,w=Math.imul(ke,Xe),f=Math.imul(ke,He),f=f+Math.imul(Ae,Xe)|0,k=Math.imul(Ae,He),w=w+Math.imul(ne,Je)|0,f=f+Math.imul(ne,Ze)|0,f=f+Math.imul(re,Je)|0,k=k+Math.imul(re,Ze)|0;var No=(E+w|0)+((f&8191)<<13)|0;E=(k+(f>>>13)|0)+(No>>>26)|0,No&=67108863,w=Math.imul(Me,Xe),f=Math.imul(Me,He),f=f+Math.imul(Ee,Xe)|0,k=Math.imul(Ee,He),w=w+Math.imul(ke,Je)|0,f=f+Math.imul(ke,Ze)|0,f=f+Math.imul(Ae,Je)|0,k=k+Math.imul(Ae,Ze)|0,w=w+Math.imul(ne,Qe)|0,f=f+Math.imul(ne,Ye)|0,f=f+Math.imul(re,Qe)|0,k=k+Math.imul(re,Ye)|0;var qo=(E+w|0)+((f&8191)<<13)|0;E=(k+(f>>>13)|0)+(qo>>>26)|0,qo&=67108863,w=Math.imul(Be,Xe),f=Math.imul(Be,He),f=f+Math.imul(Re,Xe)|0,k=Math.imul(Re,He),w=w+Math.imul(Me,Je)|0,f=f+Math.imul(Me,Ze)|0,f=f+Math.imul(Ee,Je)|0,k=k+Math.imul(Ee,Ze)|0,w=w+Math.imul(ke,Qe)|0,f=f+Math.imul(ke,Ye)|0,f=f+Math.imul(Ae,Qe)|0,k=k+Math.imul(Ae,Ye)|0,w=w+Math.imul(ne,et)|0,f=f+Math.imul(ne,tt)|0,f=f+Math.imul(re,et)|0,k=k+Math.imul(re,tt)|0;var $o=(E+w|0)+((f&8191)<<13)|0;E=(k+(f>>>13)|0)+($o>>>26)|0,$o&=67108863,w=Math.imul(De,Xe),f=Math.imul(De,He),f=f+Math.imul(Ne,Xe)|0,k=Math.imul(Ne,He),w=w+Math.imul(Be,Je)|0,f=f+Math.imul(Be,Ze)|0,f=f+Math.imul(Re,Je)|0,k=k+Math.imul(Re,Ze)|0,w=w+Math.imul(Me,Qe)|0,f=f+Math.imul(Me,Ye)|0,f=f+Math.imul(Ee,Qe)|0,k=k+Math.imul(Ee,Ye)|0,w=w+Math.imul(ke,et)|0,f=f+Math.imul(ke,tt)|0,f=f+Math.imul(Ae,et)|0,k=k+Math.imul(Ae,tt)|0,w=w+Math.imul(ne,nt)|0,f=f+Math.imul(ne,it)|0,f=f+Math.imul(re,nt)|0,k=k+Math.imul(re,it)|0;var Fo=(E+w|0)+((f&8191)<<13)|0;E=(k+(f>>>13)|0)+(Fo>>>26)|0,Fo&=67108863,w=Math.imul(qe,Xe),f=Math.imul(qe,He),f=f+Math.imul($e,Xe)|0,k=Math.imul($e,He),w=w+Math.imul(De,Je)|0,f=f+Math.imul(De,Ze)|0,f=f+Math.imul(Ne,Je)|0,k=k+Math.imul(Ne,Ze)|0,w=w+Math.imul(Be,Qe)|0,f=f+Math.imul(Be,Ye)|0,f=f+Math.imul(Re,Qe)|0,k=k+Math.imul(Re,Ye)|0,w=w+Math.imul(Me,et)|0,f=f+Math.imul(Me,tt)|0,f=f+Math.imul(Ee,et)|0,k=k+Math.imul(Ee,tt)|0,w=w+Math.imul(ke,nt)|0,f=f+Math.imul(ke,it)|0,f=f+Math.imul(Ae,nt)|0,k=k+Math.imul(Ae,it)|0,w=w+Math.imul(ne,ot)|0,f=f+Math.imul(ne,st)|0,f=f+Math.imul(re,ot)|0,k=k+Math.imul(re,st)|0;var Lo=(E+w|0)+((f&8191)<<13)|0;E=(k+(f>>>13)|0)+(Lo>>>26)|0,Lo&=67108863,w=Math.imul(Fe,Xe),f=Math.imul(Fe,He),f=f+Math.imul(Le,Xe)|0,k=Math.imul(Le,He),w=w+Math.imul(qe,Je)|0,f=f+Math.imul(qe,Ze)|0,f=f+Math.imul($e,Je)|0,k=k+Math.imul($e,Ze)|0,w=w+Math.imul(De,Qe)|0,f=f+Math.imul(De,Ye)|0,f=f+Math.imul(Ne,Qe)|0,k=k+Math.imul(Ne,Ye)|0,w=w+Math.imul(Be,et)|0,f=f+Math.imul(Be,tt)|0,f=f+Math.imul(Re,et)|0,k=k+Math.imul(Re,tt)|0,w=w+Math.imul(Me,nt)|0,f=f+Math.imul(Me,it)|0,f=f+Math.imul(Ee,nt)|0,k=k+Math.imul(Ee,it)|0,w=w+Math.imul(ke,ot)|0,f=f+Math.imul(ke,st)|0,f=f+Math.imul(Ae,ot)|0,k=k+Math.imul(Ae,st)|0,w=w+Math.imul(ne,rt)|0,f=f+Math.imul(ne,at)|0,f=f+Math.imul(re,rt)|0,k=k+Math.imul(re,at)|0;var Uo=(E+w|0)+((f&8191)<<13)|0;E=(k+(f>>>13)|0)+(Uo>>>26)|0,Uo&=67108863,w=Math.imul(Ue,Xe),f=Math.imul(Ue,He),f=f+Math.imul(Ke,Xe)|0,k=Math.imul(Ke,He),w=w+Math.imul(Fe,Je)|0,f=f+Math.imul(Fe,Ze)|0,f=f+Math.imul(Le,Je)|0,k=k+Math.imul(Le,Ze)|0,w=w+Math.imul(qe,Qe)|0,f=f+Math.imul(qe,Ye)|0,f=f+Math.imul($e,Qe)|0,k=k+Math.imul($e,Ye)|0,w=w+Math.imul(De,et)|0,f=f+Math.imul(De,tt)|0,f=f+Math.imul(Ne,et)|0,k=k+Math.imul(Ne,tt)|0,w=w+Math.imul(Be,nt)|0,f=f+Math.imul(Be,it)|0,f=f+Math.imul(Re,nt)|0,k=k+Math.imul(Re,it)|0,w=w+Math.imul(Me,ot)|0,f=f+Math.imul(Me,st)|0,f=f+Math.imul(Ee,ot)|0,k=k+Math.imul(Ee,st)|0,w=w+Math.imul(ke,rt)|0,f=f+Math.imul(ke,at)|0,f=f+Math.imul(Ae,rt)|0,k=k+Math.imul(Ae,at)|0,w=w+Math.imul(ne,ct)|0,f=f+Math.imul(ne,dt)|0,f=f+Math.imul(re,ct)|0,k=k+Math.imul(re,dt)|0;var Ko=(E+w|0)+((f&8191)<<13)|0;E=(k+(f>>>13)|0)+(Ko>>>26)|0,Ko&=67108863,w=Math.imul(Ve,Xe),f=Math.imul(Ve,He),f=f+Math.imul(ze,Xe)|0,k=Math.imul(ze,He),w=w+Math.imul(Ue,Je)|0,f=f+Math.imul(Ue,Ze)|0,f=f+Math.imul(Ke,Je)|0,k=k+Math.imul(Ke,Ze)|0,w=w+Math.imul(Fe,Qe)|0,f=f+Math.imul(Fe,Ye)|0,f=f+Math.imul(Le,Qe)|0,k=k+Math.imul(Le,Ye)|0,w=w+Math.imul(qe,et)|0,f=f+Math.imul(qe,tt)|0,f=f+Math.imul($e,et)|0,k=k+Math.imul($e,tt)|0,w=w+Math.imul(De,nt)|0,f=f+Math.imul(De,it)|0,f=f+Math.imul(Ne,nt)|0,k=k+Math.imul(Ne,it)|0,w=w+Math.imul(Be,ot)|0,f=f+Math.imul(Be,st)|0,f=f+Math.imul(Re,ot)|0,k=k+Math.imul(Re,st)|0,w=w+Math.imul(Me,rt)|0,f=f+Math.imul(Me,at)|0,f=f+Math.imul(Ee,rt)|0,k=k+Math.imul(Ee,at)|0,w=w+Math.imul(ke,ct)|0,f=f+Math.imul(ke,dt)|0,f=f+Math.imul(Ae,ct)|0,k=k+Math.imul(Ae,dt)|0,w=w+Math.imul(ne,lt)|0,f=f+Math.imul(ne,ut)|0,f=f+Math.imul(re,lt)|0,k=k+Math.imul(re,ut)|0;var Vo=(E+w|0)+((f&8191)<<13)|0;E=(k+(f>>>13)|0)+(Vo>>>26)|0,Vo&=67108863,w=Math.imul(Ge,Xe),f=Math.imul(Ge,He),f=f+Math.imul(We,Xe)|0,k=Math.imul(We,He),w=w+Math.imul(Ve,Je)|0,f=f+Math.imul(Ve,Ze)|0,f=f+Math.imul(ze,Je)|0,k=k+Math.imul(ze,Ze)|0,w=w+Math.imul(Ue,Qe)|0,f=f+Math.imul(Ue,Ye)|0,f=f+Math.imul(Ke,Qe)|0,k=k+Math.imul(Ke,Ye)|0,w=w+Math.imul(Fe,et)|0,f=f+Math.imul(Fe,tt)|0,f=f+Math.imul(Le,et)|0,k=k+Math.imul(Le,tt)|0,w=w+Math.imul(qe,nt)|0,f=f+Math.imul(qe,it)|0,f=f+Math.imul($e,nt)|0,k=k+Math.imul($e,it)|0,w=w+Math.imul(De,ot)|0,f=f+Math.imul(De,st)|0,f=f+Math.imul(Ne,ot)|0,k=k+Math.imul(Ne,st)|0,w=w+Math.imul(Be,rt)|0,f=f+Math.imul(Be,at)|0,f=f+Math.imul(Re,rt)|0,k=k+Math.imul(Re,at)|0,w=w+Math.imul(Me,ct)|0,f=f+Math.imul(Me,dt)|0,f=f+Math.imul(Ee,ct)|0,k=k+Math.imul(Ee,dt)|0,w=w+Math.imul(ke,lt)|0,f=f+Math.imul(ke,ut)|0,f=f+Math.imul(Ae,lt)|0,k=k+Math.imul(Ae,ut)|0,w=w+Math.imul(ne,ft)|0,f=f+Math.imul(ne,ht)|0,f=f+Math.imul(re,ft)|0,k=k+Math.imul(re,ht)|0;var zo=(E+w|0)+((f&8191)<<13)|0;E=(k+(f>>>13)|0)+(zo>>>26)|0,zo&=67108863,w=Math.imul(Ge,Je),f=Math.imul(Ge,Ze),f=f+Math.imul(We,Je)|0,k=Math.imul(We,Ze),w=w+Math.imul(Ve,Qe)|0,f=f+Math.imul(Ve,Ye)|0,f=f+Math.imul(ze,Qe)|0,k=k+Math.imul(ze,Ye)|0,w=w+Math.imul(Ue,et)|0,f=f+Math.imul(Ue,tt)|0,f=f+Math.imul(Ke,et)|0,k=k+Math.imul(Ke,tt)|0,w=w+Math.imul(Fe,nt)|0,f=f+Math.imul(Fe,it)|0,f=f+Math.imul(Le,nt)|0,k=k+Math.imul(Le,it)|0,w=w+Math.imul(qe,ot)|0,f=f+Math.imul(qe,st)|0,f=f+Math.imul($e,ot)|0,k=k+Math.imul($e,st)|0,w=w+Math.imul(De,rt)|0,f=f+Math.imul(De,at)|0,f=f+Math.imul(Ne,rt)|0,k=k+Math.imul(Ne,at)|0,w=w+Math.imul(Be,ct)|0,f=f+Math.imul(Be,dt)|0,f=f+Math.imul(Re,ct)|0,k=k+Math.imul(Re,dt)|0,w=w+Math.imul(Me,lt)|0,f=f+Math.imul(Me,ut)|0,f=f+Math.imul(Ee,lt)|0,k=k+Math.imul(Ee,ut)|0,w=w+Math.imul(ke,ft)|0,f=f+Math.imul(ke,ht)|0,f=f+Math.imul(Ae,ft)|0,k=k+Math.imul(Ae,ht)|0;var Go=(E+w|0)+((f&8191)<<13)|0;E=(k+(f>>>13)|0)+(Go>>>26)|0,Go&=67108863,w=Math.imul(Ge,Qe),f=Math.imul(Ge,Ye),f=f+Math.imul(We,Qe)|0,k=Math.imul(We,Ye),w=w+Math.imul(Ve,et)|0,f=f+Math.imul(Ve,tt)|0,f=f+Math.imul(ze,et)|0,k=k+Math.imul(ze,tt)|0,w=w+Math.imul(Ue,nt)|0,f=f+Math.imul(Ue,it)|0,f=f+Math.imul(Ke,nt)|0,k=k+Math.imul(Ke,it)|0,w=w+Math.imul(Fe,ot)|0,f=f+Math.imul(Fe,st)|0,f=f+Math.imul(Le,ot)|0,k=k+Math.imul(Le,st)|0,w=w+Math.imul(qe,rt)|0,f=f+Math.imul(qe,at)|0,f=f+Math.imul($e,rt)|0,k=k+Math.imul($e,at)|0,w=w+Math.imul(De,ct)|0,f=f+Math.imul(De,dt)|0,f=f+Math.imul(Ne,ct)|0,k=k+Math.imul(Ne,dt)|0,w=w+Math.imul(Be,lt)|0,f=f+Math.imul(Be,ut)|0,f=f+Math.imul(Re,lt)|0,k=k+Math.imul(Re,ut)|0,w=w+Math.imul(Me,ft)|0,f=f+Math.imul(Me,ht)|0,f=f+Math.imul(Ee,ft)|0,k=k+Math.imul(Ee,ht)|0;var Wo=(E+w|0)+((f&8191)<<13)|0;E=(k+(f>>>13)|0)+(Wo>>>26)|0,Wo&=67108863,w=Math.imul(Ge,et),f=Math.imul(Ge,tt),f=f+Math.imul(We,et)|0,k=Math.imul(We,tt),w=w+Math.imul(Ve,nt)|0,f=f+Math.imul(Ve,it)|0,f=f+Math.imul(ze,nt)|0,k=k+Math.imul(ze,it)|0,w=w+Math.imul(Ue,ot)|0,f=f+Math.imul(Ue,st)|0,f=f+Math.imul(Ke,ot)|0,k=k+Math.imul(Ke,st)|0,w=w+Math.imul(Fe,rt)|0,f=f+Math.imul(Fe,at)|0,f=f+Math.imul(Le,rt)|0,k=k+Math.imul(Le,at)|0,w=w+Math.imul(qe,ct)|0,f=f+Math.imul(qe,dt)|0,f=f+Math.imul($e,ct)|0,k=k+Math.imul($e,dt)|0,w=w+Math.imul(De,lt)|0,f=f+Math.imul(De,ut)|0,f=f+Math.imul(Ne,lt)|0,k=k+Math.imul(Ne,ut)|0,w=w+Math.imul(Be,ft)|0,f=f+Math.imul(Be,ht)|0,f=f+Math.imul(Re,ft)|0,k=k+Math.imul(Re,ht)|0;var Xo=(E+w|0)+((f&8191)<<13)|0;E=(k+(f>>>13)|0)+(Xo>>>26)|0,Xo&=67108863,w=Math.imul(Ge,nt),f=Math.imul(Ge,it),f=f+Math.imul(We,nt)|0,k=Math.imul(We,it),w=w+Math.imul(Ve,ot)|0,f=f+Math.imul(Ve,st)|0,f=f+Math.imul(ze,ot)|0,k=k+Math.imul(ze,st)|0,w=w+Math.imul(Ue,rt)|0,f=f+Math.imul(Ue,at)|0,f=f+Math.imul(Ke,rt)|0,k=k+Math.imul(Ke,at)|0,w=w+Math.imul(Fe,ct)|0,f=f+Math.imul(Fe,dt)|0,f=f+Math.imul(Le,ct)|0,k=k+Math.imul(Le,dt)|0,w=w+Math.imul(qe,lt)|0,f=f+Math.imul(qe,ut)|0,f=f+Math.imul($e,lt)|0,k=k+Math.imul($e,ut)|0,w=w+Math.imul(De,ft)|0,f=f+Math.imul(De,ht)|0,f=f+Math.imul(Ne,ft)|0,k=k+Math.imul(Ne,ht)|0;var Ho=(E+w|0)+((f&8191)<<13)|0;E=(k+(f>>>13)|0)+(Ho>>>26)|0,Ho&=67108863,w=Math.imul(Ge,ot),f=Math.imul(Ge,st),f=f+Math.imul(We,ot)|0,k=Math.imul(We,st),w=w+Math.imul(Ve,rt)|0,f=f+Math.imul(Ve,at)|0,f=f+Math.imul(ze,rt)|0,k=k+Math.imul(ze,at)|0,w=w+Math.imul(Ue,ct)|0,f=f+Math.imul(Ue,dt)|0,f=f+Math.imul(Ke,ct)|0,k=k+Math.imul(Ke,dt)|0,w=w+Math.imul(Fe,lt)|0,f=f+Math.imul(Fe,ut)|0,f=f+Math.imul(Le,lt)|0,k=k+Math.imul(Le,ut)|0,w=w+Math.imul(qe,ft)|0,f=f+Math.imul(qe,ht)|0,f=f+Math.imul($e,ft)|0,k=k+Math.imul($e,ht)|0;var Jo=(E+w|0)+((f&8191)<<13)|0;E=(k+(f>>>13)|0)+(Jo>>>26)|0,Jo&=67108863,w=Math.imul(Ge,rt),f=Math.imul(Ge,at),f=f+Math.imul(We,rt)|0,k=Math.imul(We,at),w=w+Math.imul(Ve,ct)|0,f=f+Math.imul(Ve,dt)|0,f=f+Math.imul(ze,ct)|0,k=k+Math.imul(ze,dt)|0,w=w+Math.imul(Ue,lt)|0,f=f+Math.imul(Ue,ut)|0,f=f+Math.imul(Ke,lt)|0,k=k+Math.imul(Ke,ut)|0,w=w+Math.imul(Fe,ft)|0,f=f+Math.imul(Fe,ht)|0,f=f+Math.imul(Le,ft)|0,k=k+Math.imul(Le,ht)|0;var Zo=(E+w|0)+((f&8191)<<13)|0;E=(k+(f>>>13)|0)+(Zo>>>26)|0,Zo&=67108863,w=Math.imul(Ge,ct),f=Math.imul(Ge,dt),f=f+Math.imul(We,ct)|0,k=Math.imul(We,dt),w=w+Math.imul(Ve,lt)|0,f=f+Math.imul(Ve,ut)|0,f=f+Math.imul(ze,lt)|0,k=k+Math.imul(ze,ut)|0,w=w+Math.imul(Ue,ft)|0,f=f+Math.imul(Ue,ht)|0,f=f+Math.imul(Ke,ft)|0,k=k+Math.imul(Ke,ht)|0;var Qo=(E+w|0)+((f&8191)<<13)|0;E=(k+(f>>>13)|0)+(Qo>>>26)|0,Qo&=67108863,w=Math.imul(Ge,lt),f=Math.imul(Ge,ut),f=f+Math.imul(We,lt)|0,k=Math.imul(We,ut),w=w+Math.imul(Ve,ft)|0,f=f+Math.imul(Ve,ht)|0,f=f+Math.imul(ze,ft)|0,k=k+Math.imul(ze,ht)|0;var Yo=(E+w|0)+((f&8191)<<13)|0;E=(k+(f>>>13)|0)+(Yo>>>26)|0,Yo&=67108863,w=Math.imul(Ge,ft),f=Math.imul(Ge,ht),f=f+Math.imul(We,ft)|0,k=Math.imul(We,ht);var es=(E+w|0)+((f&8191)<<13)|0;return E=(k+(f>>>13)|0)+(es>>>26)|0,es&=67108863,P[0]=Do,P[1]=No,P[2]=qo,P[3]=$o,P[4]=Fo,P[5]=Lo,P[6]=Uo,P[7]=Ko,P[8]=Vo,P[9]=zo,P[10]=Go,P[11]=Wo,P[12]=Xo,P[13]=Ho,P[14]=Jo,P[15]=Zo,P[16]=Qo,P[17]=Yo,P[18]=es,E!==0&&(P[19]=E,b.length++),b};Math.imul||(j=M);function B(A,u,p){p.negative=u.negative^A.negative,p.length=A.length+u.length;for(var b=0,v=0,S=0;S<p.length-1;S++){var P=v;v=0;for(var E=b&67108863,w=Math.min(S,u.length-1),f=Math.max(0,S-A.length+1);f<=w;f++){var k=S-f,oe=A.words[k]|0,ne=u.words[f]|0,re=oe*ne,St=re&67108863;P=P+(re/67108864|0)|0,St=St+E|0,E=St&67108863,P=P+(St>>>26)|0,v+=P>>>26,P&=67108863}p.words[S]=E,b=P,P=v}return b!==0?p.words[S]=b:p.length--,p._strip()}function q(A,u,p){return B(A,u,p)}s.prototype.mulTo=function(u,p){var b,v=this.length+u.length;return this.length===10&&u.length===10?b=j(this,u,p):v<63?b=M(this,u,p):v<1024?b=B(this,u,p):b=q(this,u,p),b},s.prototype.mul=function(u){var p=new s(null);return p.words=new Array(this.length+u.length),this.mulTo(u,p)},s.prototype.mulf=function(u){var p=new s(null);return p.words=new Array(this.length+u.length),q(this,u,p)},s.prototype.imul=function(u){return this.clone().mulTo(u,this)},s.prototype.imuln=function(u){var p=u<0;p&&(u=-u),i(typeof u=="number"),i(u<67108864);for(var b=0,v=0;v<this.length;v++){var S=(this.words[v]|0)*u,P=(S&67108863)+(b&67108863);b>>=26,b+=S/67108864|0,b+=P>>>26,this.words[v]=P&67108863}return b!==0&&(this.words[v]=b,this.length++),p?this.ineg():this},s.prototype.muln=function(u){return this.clone().imuln(u)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(u){var p=O(u);if(p.length===0)return new s(1);for(var b=this,v=0;v<p.length&&p[v]===0;v++,b=b.sqr());if(++v<p.length)for(var S=b.sqr();v<p.length;v++,S=S.sqr())p[v]!==0&&(b=b.mul(S));return b},s.prototype.iushln=function(u){i(typeof u=="number"&&u>=0);var p=u%26,b=(u-p)/26,v=67108863>>>26-p<<26-p,S;if(p!==0){var P=0;for(S=0;S<this.length;S++){var E=this.words[S]&v,w=(this.words[S]|0)-E<<p;this.words[S]=w|P,P=E>>>26-p}P&&(this.words[S]=P,this.length++)}if(b!==0){for(S=this.length-1;S>=0;S--)this.words[S+b]=this.words[S];for(S=0;S<b;S++)this.words[S]=0;this.length+=b}return this._strip()},s.prototype.ishln=function(u){return i(this.negative===0),this.iushln(u)},s.prototype.iushrn=function(u,p,b){i(typeof u=="number"&&u>=0);var v;p?v=(p-p%26)/26:v=0;var S=u%26,P=Math.min((u-S)/26,this.length),E=67108863^67108863>>>S<<S,w=b;if(v-=P,v=Math.max(0,v),w){for(var f=0;f<P;f++)w.words[f]=this.words[f];w.length=P}if(P!==0)if(this.length>P)for(this.length-=P,f=0;f<this.length;f++)this.words[f]=this.words[f+P];else this.words[0]=0,this.length=1;var k=0;for(f=this.length-1;f>=0&&(k!==0||f>=v);f--){var oe=this.words[f]|0;this.words[f]=k<<26-S|oe>>>S,k=oe&E}return w&&k!==0&&(w.words[w.length++]=k),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(u,p,b){return i(this.negative===0),this.iushrn(u,p,b)},s.prototype.shln=function(u){return this.clone().ishln(u)},s.prototype.ushln=function(u){return this.clone().iushln(u)},s.prototype.shrn=function(u){return this.clone().ishrn(u)},s.prototype.ushrn=function(u){return this.clone().iushrn(u)},s.prototype.testn=function(u){i(typeof u=="number"&&u>=0);var p=u%26,b=(u-p)/26,v=1<<p;if(this.length<=b)return!1;var S=this.words[b];return!!(S&v)},s.prototype.imaskn=function(u){i(typeof u=="number"&&u>=0);var p=u%26,b=(u-p)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=b)return this;if(p!==0&&b++,this.length=Math.min(b,this.length),p!==0){var v=67108863^67108863>>>p<<p;this.words[this.length-1]&=v}return this._strip()},s.prototype.maskn=function(u){return this.clone().imaskn(u)},s.prototype.iaddn=function(u){return i(typeof u=="number"),i(u<67108864),u<0?this.isubn(-u):this.negative!==0?this.length===1&&(this.words[0]|0)<=u?(this.words[0]=u-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(u),this.negative=1,this):this._iaddn(u)},s.prototype._iaddn=function(u){this.words[0]+=u;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},s.prototype.isubn=function(u){if(i(typeof u=="number"),i(u<67108864),u<0)return this.iaddn(-u);if(this.negative!==0)return this.negative=0,this.iaddn(u),this.negative=1,this;if(this.words[0]-=u,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this._strip()},s.prototype.addn=function(u){return this.clone().iaddn(u)},s.prototype.subn=function(u){return this.clone().isubn(u)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(u,p,b){var v=u.length+b,S;this._expand(v);var P,E=0;for(S=0;S<u.length;S++){P=(this.words[S+b]|0)+E;var w=(u.words[S]|0)*p;P-=w&67108863,E=(P>>26)-(w/67108864|0),this.words[S+b]=P&67108863}for(;S<this.length-b;S++)P=(this.words[S+b]|0)+E,E=P>>26,this.words[S+b]=P&67108863;if(E===0)return this._strip();for(i(E===-1),E=0,S=0;S<this.length;S++)P=-(this.words[S]|0)+E,E=P>>26,this.words[S]=P&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(u,p){var b=this.length-u.length,v=this.clone(),S=u,P=S.words[S.length-1]|0,E=this._countBits(P);b=26-E,b!==0&&(S=S.ushln(b),v.iushln(b),P=S.words[S.length-1]|0);var w=v.length-S.length,f;if(p!=="mod"){f=new s(null),f.length=w+1,f.words=new Array(f.length);for(var k=0;k<f.length;k++)f.words[k]=0}var oe=v.clone()._ishlnsubmul(S,1,w);oe.negative===0&&(v=oe,f&&(f.words[w]=1));for(var ne=w-1;ne>=0;ne--){var re=(v.words[S.length+ne]|0)*67108864+(v.words[S.length+ne-1]|0);for(re=Math.min(re/P|0,67108863),v._ishlnsubmul(S,re,ne);v.negative!==0;)re--,v.negative=0,v._ishlnsubmul(S,1,ne),v.isZero()||(v.negative^=1);f&&(f.words[ne]=re)}return f&&f._strip(),v._strip(),p!=="div"&&b!==0&&v.iushrn(b),{div:f||null,mod:v}},s.prototype.divmod=function(u,p,b){if(i(!u.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var v,S,P;return this.negative!==0&&u.negative===0?(P=this.neg().divmod(u,p),p!=="mod"&&(v=P.div.neg()),p!=="div"&&(S=P.mod.neg(),b&&S.negative!==0&&S.iadd(u)),{div:v,mod:S}):this.negative===0&&u.negative!==0?(P=this.divmod(u.neg(),p),p!=="mod"&&(v=P.div.neg()),{div:v,mod:P.mod}):this.negative&u.negative?(P=this.neg().divmod(u.neg(),p),p!=="div"&&(S=P.mod.neg(),b&&S.negative!==0&&S.isub(u)),{div:P.div,mod:S}):u.length>this.length||this.cmp(u)<0?{div:new s(0),mod:this}:u.length===1?p==="div"?{div:this.divn(u.words[0]),mod:null}:p==="mod"?{div:null,mod:new s(this.modrn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new s(this.modrn(u.words[0]))}:this._wordDiv(u,p)},s.prototype.div=function(u){return this.divmod(u,"div",!1).div},s.prototype.mod=function(u){return this.divmod(u,"mod",!1).mod},s.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod},s.prototype.divRound=function(u){var p=this.divmod(u);if(p.mod.isZero())return p.div;var b=p.div.negative!==0?p.mod.isub(u):p.mod,v=u.ushrn(1),S=u.andln(1),P=b.cmp(v);return P<0||S===1&&P===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},s.prototype.modrn=function(u){var p=u<0;p&&(u=-u),i(u<=67108863);for(var b=(1<<26)%u,v=0,S=this.length-1;S>=0;S--)v=(b*v+(this.words[S]|0))%u;return p?-v:v},s.prototype.modn=function(u){return this.modrn(u)},s.prototype.idivn=function(u){var p=u<0;p&&(u=-u),i(u<=67108863);for(var b=0,v=this.length-1;v>=0;v--){var S=(this.words[v]|0)+b*67108864;this.words[v]=S/u|0,b=S%u}return this._strip(),p?this.ineg():this},s.prototype.divn=function(u){return this.clone().idivn(u)},s.prototype.egcd=function(u){i(u.negative===0),i(!u.isZero());var p=this,b=u.clone();p.negative!==0?p=p.umod(u):p=p.clone();for(var v=new s(1),S=new s(0),P=new s(0),E=new s(1),w=0;p.isEven()&&b.isEven();)p.iushrn(1),b.iushrn(1),++w;for(var f=b.clone(),k=p.clone();!p.isZero();){for(var oe=0,ne=1;!(p.words[0]&ne)&&oe<26;++oe,ne<<=1);if(oe>0)for(p.iushrn(oe);oe-- >0;)(v.isOdd()||S.isOdd())&&(v.iadd(f),S.isub(k)),v.iushrn(1),S.iushrn(1);for(var re=0,St=1;!(b.words[0]&St)&&re<26;++re,St<<=1);if(re>0)for(b.iushrn(re);re-- >0;)(P.isOdd()||E.isOdd())&&(P.iadd(f),E.isub(k)),P.iushrn(1),E.iushrn(1);p.cmp(b)>=0?(p.isub(b),v.isub(P),S.isub(E)):(b.isub(p),P.isub(v),E.isub(S))}return{a:P,b:E,gcd:b.iushln(w)}},s.prototype._invmp=function(u){i(u.negative===0),i(!u.isZero());var p=this,b=u.clone();p.negative!==0?p=p.umod(u):p=p.clone();for(var v=new s(1),S=new s(0),P=b.clone();p.cmpn(1)>0&&b.cmpn(1)>0;){for(var E=0,w=1;!(p.words[0]&w)&&E<26;++E,w<<=1);if(E>0)for(p.iushrn(E);E-- >0;)v.isOdd()&&v.iadd(P),v.iushrn(1);for(var f=0,k=1;!(b.words[0]&k)&&f<26;++f,k<<=1);if(f>0)for(b.iushrn(f);f-- >0;)S.isOdd()&&S.iadd(P),S.iushrn(1);p.cmp(b)>=0?(p.isub(b),v.isub(S)):(b.isub(p),S.isub(v))}var oe;return p.cmpn(1)===0?oe=v:oe=S,oe.cmpn(0)<0&&oe.iadd(u),oe},s.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();var p=this.clone(),b=u.clone();p.negative=0,b.negative=0;for(var v=0;p.isEven()&&b.isEven();v++)p.iushrn(1),b.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;b.isEven();)b.iushrn(1);var S=p.cmp(b);if(S<0){var P=p;p=b,b=P}else if(S===0||b.cmpn(1)===0)break;p.isub(b)}while(!0);return b.iushln(v)},s.prototype.invm=function(u){return this.egcd(u).a.umod(u)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(u){return this.words[0]&u},s.prototype.bincn=function(u){i(typeof u=="number");var p=u%26,b=(u-p)/26,v=1<<p;if(this.length<=b)return this._expand(b+1),this.words[b]|=v,this;for(var S=v,P=b;S!==0&&P<this.length;P++){var E=this.words[P]|0;E+=S,S=E>>>26,E&=67108863,this.words[P]=E}return S!==0&&(this.words[P]=S,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(u){var p=u<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this._strip();var b;if(this.length>1)b=1;else{p&&(u=-u),i(u<=67108863,"Number is too big");var v=this.words[0]|0;b=v===u?0:v<u?-1:1}return this.negative!==0?-b|0:b},s.prototype.cmp=function(u){if(this.negative!==0&&u.negative===0)return-1;if(this.negative===0&&u.negative!==0)return 1;var p=this.ucmp(u);return this.negative!==0?-p|0:p},s.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var p=0,b=this.length-1;b>=0;b--){var v=this.words[b]|0,S=u.words[b]|0;if(v!==S){v<S?p=-1:v>S&&(p=1);break}}return p},s.prototype.gtn=function(u){return this.cmpn(u)===1},s.prototype.gt=function(u){return this.cmp(u)===1},s.prototype.gten=function(u){return this.cmpn(u)>=0},s.prototype.gte=function(u){return this.cmp(u)>=0},s.prototype.ltn=function(u){return this.cmpn(u)===-1},s.prototype.lt=function(u){return this.cmp(u)===-1},s.prototype.lten=function(u){return this.cmpn(u)<=0},s.prototype.lte=function(u){return this.cmp(u)<=0},s.prototype.eqn=function(u){return this.cmpn(u)===0},s.prototype.eq=function(u){return this.cmp(u)===0},s.red=function(u){return new W(u)},s.prototype.toRed=function(u){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),u.convertTo(this)._forceRed(u)},s.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(u){return this.red=u,this},s.prototype.forceRed=function(u){return i(!this.red,"Already a number in reduction context"),this._forceRed(u)},s.prototype.redAdd=function(u){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,u)},s.prototype.redIAdd=function(u){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,u)},s.prototype.redSub=function(u){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,u)},s.prototype.redISub=function(u){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,u)},s.prototype.redShl=function(u){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,u)},s.prototype.redMul=function(u){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.mul(this,u)},s.prototype.redIMul=function(u){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.imul(this,u)},s.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(u){return i(this.red&&!u.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,u)};var Z={k256:null,p224:null,p192:null,p25519:null};function H(A,u){this.name=A,this.p=new s(u,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}H.prototype._tmp=function(){var u=new s(null);return u.words=new Array(Math.ceil(this.n/13)),u},H.prototype.ireduce=function(u){var p=u,b;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),b=p.bitLength();while(b>this.n);var v=b<this.n?-1:p.ucmp(this.p);return v===0?(p.words[0]=0,p.length=1):v>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},H.prototype.split=function(u,p){u.iushrn(this.n,0,p)},H.prototype.imulK=function(u){return u.imul(this.k)};function ce(){H.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(ce,H),ce.prototype.split=function(u,p){for(var b=4194303,v=Math.min(u.length,9),S=0;S<v;S++)p.words[S]=u.words[S];if(p.length=v,u.length<=9){u.words[0]=0,u.length=1;return}var P=u.words[9];for(p.words[p.length++]=P&b,S=10;S<u.length;S++){var E=u.words[S]|0;u.words[S-10]=(E&b)<<4|P>>>22,P=E}P>>>=22,u.words[S-10]=P,P===0&&u.length>10?u.length-=10:u.length-=9},ce.prototype.imulK=function(u){u.words[u.length]=0,u.words[u.length+1]=0,u.length+=2;for(var p=0,b=0;b<u.length;b++){var v=u.words[b]|0;p+=v*977,u.words[b]=p&67108863,p=v*64+(p/67108864|0)}return u.words[u.length-1]===0&&(u.length--,u.words[u.length-1]===0&&u.length--),u};function we(){H.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(we,H);function Pe(){H.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(Pe,H);function Q(){H.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(Q,H),Q.prototype.imulK=function(u){for(var p=0,b=0;b<u.length;b++){var v=(u.words[b]|0)*19+p,S=v&67108863;v>>>=26,u.words[b]=S,p=v}return p!==0&&(u.words[u.length++]=p),u},s._prime=function(u){if(Z[u])return Z[u];var p;if(u==="k256")p=new ce;else if(u==="p224")p=new we;else if(u==="p192")p=new Pe;else if(u==="p25519")p=new Q;else throw new Error("Unknown prime "+u);return Z[u]=p,p};function W(A){if(typeof A=="string"){var u=s._prime(A);this.m=u.p,this.prime=u}else i(A.gtn(1),"modulus must be greater than 1"),this.m=A,this.prime=null}W.prototype._verify1=function(u){i(u.negative===0,"red works only with positives"),i(u.red,"red works only with red numbers")},W.prototype._verify2=function(u,p){i((u.negative|p.negative)===0,"red works only with positives"),i(u.red&&u.red===p.red,"red works only with red numbers")},W.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):(l(u,u.umod(this.m)._forceRed(this)),u)},W.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)},W.prototype.add=function(u,p){this._verify2(u,p);var b=u.add(p);return b.cmp(this.m)>=0&&b.isub(this.m),b._forceRed(this)},W.prototype.iadd=function(u,p){this._verify2(u,p);var b=u.iadd(p);return b.cmp(this.m)>=0&&b.isub(this.m),b},W.prototype.sub=function(u,p){this._verify2(u,p);var b=u.sub(p);return b.cmpn(0)<0&&b.iadd(this.m),b._forceRed(this)},W.prototype.isub=function(u,p){this._verify2(u,p);var b=u.isub(p);return b.cmpn(0)<0&&b.iadd(this.m),b},W.prototype.shl=function(u,p){return this._verify1(u),this.imod(u.ushln(p))},W.prototype.imul=function(u,p){return this._verify2(u,p),this.imod(u.imul(p))},W.prototype.mul=function(u,p){return this._verify2(u,p),this.imod(u.mul(p))},W.prototype.isqr=function(u){return this.imul(u,u.clone())},W.prototype.sqr=function(u){return this.mul(u,u)},W.prototype.sqrt=function(u){if(u.isZero())return u.clone();var p=this.m.andln(3);if(i(p%2===1),p===3){var b=this.m.add(new s(1)).iushrn(2);return this.pow(u,b)}for(var v=this.m.subn(1),S=0;!v.isZero()&&v.andln(1)===0;)S++,v.iushrn(1);i(!v.isZero());var P=new s(1).toRed(this),E=P.redNeg(),w=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new s(2*f*f).toRed(this);this.pow(f,w).cmp(E)!==0;)f.redIAdd(E);for(var k=this.pow(f,v),oe=this.pow(u,v.addn(1).iushrn(1)),ne=this.pow(u,v),re=S;ne.cmp(P)!==0;){for(var St=ne,ke=0;St.cmp(P)!==0;ke++)St=St.redSqr();i(ke<re);var Ae=this.pow(k,new s(1).iushln(re-ke-1));oe=oe.redMul(Ae),k=Ae.redSqr(),ne=ne.redMul(k),re=ke}return oe},W.prototype.invm=function(u){var p=u._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},W.prototype.pow=function(u,p){if(p.isZero())return new s(1).toRed(this);if(p.cmpn(1)===0)return u.clone();var b=4,v=new Array(1<<b);v[0]=new s(1).toRed(this),v[1]=u;for(var S=2;S<v.length;S++)v[S]=this.mul(v[S-1],u);var P=v[0],E=0,w=0,f=p.bitLength()%26;for(f===0&&(f=26),S=p.length-1;S>=0;S--){for(var k=p.words[S],oe=f-1;oe>=0;oe--){var ne=k>>oe&1;if(P!==v[0]&&(P=this.sqr(P)),ne===0&&E===0){w=0;continue}E<<=1,E|=ne,w++,!(w!==b&&(S!==0||oe!==0))&&(P=this.mul(P,v[E]),w=0,E=0)}f=26}return P},W.prototype.convertTo=function(u){var p=u.umod(this.m);return p===u?p.clone():p},W.prototype.convertFrom=function(u){var p=u.clone();return p.red=null,p},s.mont=function(u){return new _e(u)};function _e(A){W.call(this,A),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(_e,W),_e.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))},_e.prototype.convertFrom=function(u){var p=this.imod(u.mul(this.rinv));return p.red=null,p},_e.prototype.imul=function(u,p){if(u.isZero()||p.isZero())return u.words[0]=0,u.length=1,u;var b=u.imul(p),v=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=b.isub(v).iushrn(this.shift),P=S;return S.cmp(this.m)>=0?P=S.isub(this.m):S.cmpn(0)<0&&(P=S.iadd(this.m)),P._forceRed(this)},_e.prototype.mul=function(u,p){if(u.isZero()||p.isZero())return new s(0)._forceRed(this);var b=u.mul(p),v=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=b.isub(v).iushrn(this.shift),P=S;return S.cmp(this.m)>=0?P=S.isub(this.m):S.cmpn(0)<0&&(P=S.iadd(this.m)),P._forceRed(this)},_e.prototype.invm=function(u){var p=this.imod(u._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(e,Id)})(Bd);const Pa="3.7.7",Rd=Pa,si=typeof Buffer=="function",$r=typeof TextDecoder=="function"?new TextDecoder:void 0,Fr=typeof TextEncoder=="function"?new TextEncoder:void 0,Dd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",pi=Array.prototype.slice.call(Dd),Fi=(e=>{let t={};return e.forEach((n,i)=>t[n]=i),t})(pi),Nd=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,kt=String.fromCharCode.bind(String),Lr=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),ja=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),Ma=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),Ea=e=>{let t,n,i,o,s="";const r=e.length%3;for(let a=0;a<e.length;){if((n=e.charCodeAt(a++))>255||(i=e.charCodeAt(a++))>255||(o=e.charCodeAt(a++))>255)throw new TypeError("invalid character found");t=n<<16|i<<8|o,s+=pi[t>>18&63]+pi[t>>12&63]+pi[t>>6&63]+pi[t&63]}return r?s.slice(0,r-3)+"===".substring(r):s},Js=typeof btoa=="function"?e=>btoa(e):si?e=>Buffer.from(e,"binary").toString("base64"):Ea,Ss=si?e=>Buffer.from(e).toString("base64"):e=>{let n=[];for(let i=0,o=e.length;i<o;i+=4096)n.push(kt.apply(null,e.subarray(i,i+4096)));return Js(n.join(""))},Zi=(e,t=!1)=>t?ja(Ss(e)):Ss(e),qd=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?kt(192|t>>>6)+kt(128|t&63):kt(224|t>>>12&15)+kt(128|t>>>6&63)+kt(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return kt(240|t>>>18&7)+kt(128|t>>>12&63)+kt(128|t>>>6&63)+kt(128|t&63)}},$d=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Ba=e=>e.replace($d,qd),Ur=si?e=>Buffer.from(e,"utf8").toString("base64"):Fr?e=>Ss(Fr.encode(e)):e=>Js(Ba(e)),Qn=(e,t=!1)=>t?ja(Ur(e)):Ur(e),Kr=e=>Qn(e,!0),Fd=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Ld=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return kt((n>>>10)+55296)+kt((n&1023)+56320);case 3:return kt((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return kt((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},Ra=e=>e.replace(Fd,Ld),Da=e=>{if(e=e.replace(/\s+/g,""),!Nd.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,n="",i,o;for(let s=0;s<e.length;)t=Fi[e.charAt(s++)]<<18|Fi[e.charAt(s++)]<<12|(i=Fi[e.charAt(s++)])<<6|(o=Fi[e.charAt(s++)]),n+=i===64?kt(t>>16&255):o===64?kt(t>>16&255,t>>8&255):kt(t>>16&255,t>>8&255,t&255);return n},Zs=typeof atob=="function"?e=>atob(Ma(e)):si?e=>Buffer.from(e,"base64").toString("binary"):Da,Na=si?e=>Lr(Buffer.from(e,"base64")):e=>Lr(Zs(e).split("").map(t=>t.charCodeAt(0))),qa=e=>Na($a(e)),Ud=si?e=>Buffer.from(e,"base64").toString("utf8"):$r?e=>$r.decode(Na(e)):e=>Ra(Zs(e)),$a=e=>Ma(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),Ts=e=>Ud($a(e)),Kd=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},Fa=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),La=function(){const e=(t,n)=>Object.defineProperty(String.prototype,t,Fa(n));e("fromBase64",function(){return Ts(this)}),e("toBase64",function(t){return Qn(this,t)}),e("toBase64URI",function(){return Qn(this,!0)}),e("toBase64URL",function(){return Qn(this,!0)}),e("toUint8Array",function(){return qa(this)})},Ua=function(){const e=(t,n)=>Object.defineProperty(Uint8Array.prototype,t,Fa(n));e("toBase64",function(t){return Zi(this,t)}),e("toBase64URI",function(){return Zi(this,!0)}),e("toBase64URL",function(){return Zi(this,!0)})},Vd=()=>{La(),Ua()},Qi={version:Pa,VERSION:Rd,atob:Zs,atobPolyfill:Da,btoa:Js,btoaPolyfill:Ea,fromBase64:Ts,toBase64:Qn,encode:Qn,encodeURI:Kr,encodeURL:Kr,utob:Ba,btou:Ra,decode:Ts,isValid:Kd,fromUint8Array:Zi,toUint8Array:qa,extendString:La,extendUint8Array:Ua,extendBuiltins:Vd};function ts(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,o,s,r=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return r.next=a(0),r.throw=a(1),r.return=a(2),typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function a(d){return function(l){return c([d,l])}}function c(d){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,d[0]&&(n=0)),n;)try{if(i=1,o&&(s=d[0]&2?o.return:d[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,d[1])).done)return s;switch(o=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,o=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){n.label=d[1];break}if(d[0]===6&&n.label<s[1]){n.label=s[1],s=d;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(d);break}s[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(l){d=[6,l],o=0}finally{i=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var Sn;(function(e){e[e.EQUAL=0]="EQUAL",e[e.GREATER=1]="GREATER",e[e.LESS=-1]="LESS"})(Sn||(Sn={}));var zd=function(){function e(t){this.compare=t||e.defaultCompareFunction}return e.defaultCompareFunction=function(t,n){return t===n?Sn.EQUAL:t<n?Sn.LESS:Sn.GREATER},e.prototype.equal=function(t,n){return this.compare(t,n)===Sn.EQUAL},e.prototype.lessThan=function(t,n){return this.compare(t,n)===Sn.LESS},e.prototype.greaterThan=function(t,n){return this.compare(t,n)===Sn.GREATER},e.prototype.lessThanOrEqual=function(t,n){return this.lessThan(t,n)||this.equal(t,n)},e.prototype.greaterThanOrEqual=function(t,n){return this.greaterThan(t,n)||this.equal(t,n)},e.prototype.reverse=function(){var t=this.compare;this.compare=function(n,i){return t(i,n)}},e}(),Vr=function(){function e(t){this.value=t,this.next=null}return e}(),zr=function(){function e(t){this.value=t,this.next=null,this.prev=null}return e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var xs=function(e,t){return xs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},xs(e,t)};function ri(e,t){xs(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function Ti(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,o,s,r;return r={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function a(d){return function(l){return c([d,l])}}function c(d){if(i)throw new TypeError("Generator is already executing.");for(;n;)try{if(i=1,o&&(s=d[0]&2?o.return:d[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,d[1])).done)return s;switch(o=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,o=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){n.label=d[1];break}if(d[0]===6&&n.label<s[1]){n.label=s[1],s=d;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(d);break}s[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(l){d=[6,l],o=0}finally{i=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Gd(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var i=n.call(e),o,s=[],r;try{for(;(t===void 0||t-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s}function Qt(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Gd(arguments[t]));return e}var Wd="obfuse error occur";function ro(e,t){if(!e)throw new Error("[linked-list] "+(t||Wd))}var Xd=-1,Ka=function(){function e(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];this._head=null,this._tail=null,this._length=0,this.compare=new zd,n.length>0&&n.forEach(function(o){t.append(o)})}return Object.defineProperty(e.prototype,"head",{get:function(){return this._head?this._head.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tail",{get:function(){return this._tail?this._tail.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopLength",{get:function(){var t=!1,n=1;if(!this._head)return 0;for(var i=this._head,o=this._head;o.next&&o.next.next;)if(o=o.next.next,i=i.next,i===o){t=!0;break}if(t){for(o=o.next;i!==o;)n++,o=o.next;return n}else return 0},enumerable:!0,configurable:!0}),e.prototype.getNode=function(t){var n=this._length;ro(n>0&&t>=0&&t<n,"[linked-list] index "+t+" out of scope of list, which length is "+n);for(var i=this._head,o=0;o<t;)i=i.next,o++;return i},e.prototype.get=function(t){var n=this.getNode(t);return n?n.value:null},e.prototype.find=function(t){var n=t.value,i=t.callback;if(!this._head)return null;for(var o=this._head;o;){if(i&&i(o.value)||n!==void 0&&this.compare.equal(o.value,n))return o;o=o.next}return null},e.prototype.indexOf=function(t){if(!this._head)return Xd;for(var n=this._head,i=-1;n.next;){if(i++,this.compare.equal(n.value,t))return i;n=n.next}return n===this._tail&&this.compare.equal(n.value,t)&&(i+=1),i},e.prototype.first=function(t){ro(t>=0,"[linked-list] param 'num' ("+t+") should not less than 0");for(var n=this.iterator(),i=[],o=Math.min(t,this.length),s=0;s<o;s++){var r=n.next();i.push(r.value)}return i},e.prototype.toArray=function(){return Qt(this)},e.prototype.isEmpty=function(){return this._head===null},e.prototype.iterator=function(){var t;return Ti(this,function(n){switch(n.label){case 0:t=this._head,n.label=1;case 1:return t?[4,t.value]:[3,3];case 2:return n.sent(),t=t.next,[3,1];case 3:return[2]}})},e.prototype[Symbol.iterator]=function(){return this.iterator()},e}(),xi=function(e){ri(t,e);function t(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return e.apply(this,Qt(n))||this}return t.prototype.append=function(n){var i=new Vr(n);return this._tail?(this._tail.next=i,this._tail=i):this._head=this._tail=i,this._length++,!0},t.prototype.prepend=function(n){var i=new Vr(n);return this._head?(i.next=this._head,this._head=i):this._head=this._tail=i,this._length++,!0},t.prototype.remove=function(n){var i=this._head;if(i){if(this.compare.equal(i.value,n))return i.next?(this._head=i.next,i.next=null):this._head=this._tail=null,this._length--,n;for(var o=i;;){if(this.compare.equal(i.value,n))return i.next?o.next=i.next:(this._tail=o,this._tail.next=null),i.next=null,this._length--,n;if(i.next)o=i,i=i.next;else return}}},t.prototype.removeHead=function(){var n=this._head;if(n)return this._head.next?(this._head=n.next,n.next=null):(this._head=null,this._tail=null),this._length--,n.value},t.prototype.removeTail=function(){var n=this._tail;if(n){if(!this._head.next)this._head=null,this._tail=null;else{for(var i=this._head;i.next!==n;)i=i.next;i.next=null,this._tail=i}return this._length--,n.value}},t.prototype.reverse=function(){if(this._head){var n=this._head,i=null,o;for(this._tail=this._head;n!==null;)o=n.next,n.next=i,i=n,n=o;this._head=i}},t.prototype.clone=function(){var n=this.toArray();return new(t.bind.apply(t,Qt([void 0],n)))},t}(Ka),Hd=function(e){ri(t,e);function t(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=e.apply(this,Qt(n))||this;return o.cyclization(),o}return t.prototype.iterator=function(){var n;return Ti(this,function(i){switch(i.label){case 0:n=this._head,i.label=1;case 1:return n?[4,n.value]:[3,3];case 2:return i.sent(),n=n.next,n===this._head&&(n=null),[3,1];case 3:return[2]}})},t.prototype.circleIterator=function(){var n;return Ti(this,function(i){switch(i.label){case 0:n=this._head,i.label=1;case 1:return n?[4,n.value]:[3,3];case 2:return i.sent(),n=n.next,[3,1];case 3:return[2]}})},t.prototype[Symbol.iterator]=function(){return this.iterator()},t.prototype.mapToNormalListFn=function(n){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];this.breakCircle();var s=e.prototype[n].apply(this,i);return this.cyclization(),s},t.prototype.getNode=function(n){return this.mapToNormalListFn("getNode",n)},t.prototype.append=function(n){return this.mapToNormalListFn("append",n)},t.prototype.prepend=function(n){return this.mapToNormalListFn("prepend",n)},t.prototype.find=function(n){return this.mapToNormalListFn("find",n)},t.prototype.indexOf=function(n){return this.mapToNormalListFn("indexOf",n)},t.prototype.remove=function(n){return this.mapToNormalListFn("remove",n)},t.prototype.removeHead=function(){return this.mapToNormalListFn("removeHead")},t.prototype.removeTail=function(){return this.mapToNormalListFn("removeTail")},t.prototype.first=function(n){ro(n>=0,"[linked-list] param 'num' ("+n+") should not less than 0");for(var i=this.circleIterator(),o=[],s=0;s<n;s++){var r=i.next();o.push(r.value)}return o},t.prototype.toArray=function(){return this.mapToNormalListFn("toArray")},t.prototype.reverse=function(){return this.mapToNormalListFn("reverse")},t}(xi);(function(e){ri(t,e);function t(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=e.apply(this,Qt(n))||this;return o.cyclization(),o}return t.prototype.breakCircle=function(){this._tail&&this._tail.next===this._head&&(this._tail.next=null)},t.prototype.cyclization=function(){this._tail&&this._tail.next===null&&(this._tail.next=this._head)},t.prototype.clone=function(){var n=this.toArray();return new(t.bind.apply(t,Qt([void 0],n)))},t})(Hd);var Jd=function(e){ri(t,e);function t(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return e.apply(this,Qt(n))||this}return t.prototype.append=function(n){var i=new zr(n);return this._tail?(this._tail.next=i,i.prev=this._tail,this._tail=i):this._head=this._tail=i,this._length++,!0},t.prototype.prepend=function(n){var i=new zr(n);return this._head?(i.next=this._head,this._head.prev=i,this._head=i):this._head=this._tail=i,this._length++,!0},t.prototype.remove=function(n){var i=this._head;if(i){if(this.compare.equal(i.value,n))return i.next?(this._head=i.next,this._head.prev=null,i.next=i.prev=null):this._head=this._tail=null,this._length--,n;for(;;){if(this.compare.equal(i.value,n))return i.next?(i.prev.next=i.next,i.next.prev=i.prev,i.next=i.prev=null):(i.prev.next=null,this._tail=i.prev,i.next=i.prev=null),this._length--,i.value;if(i.next)i=i.next;else return}}},t.prototype.removeHead=function(){var n=this._head;if(n)return this._head.next?(n.next.prev=null,this._head=n.next,n.next=null):(this._head=null,this._tail=null),this._length--,n.value},t.prototype.removeTail=function(){var n=this._tail;if(n)return this._head.next?(n.prev.next=null,this._tail=n.prev,n.next=n.prev=null):(this._head=null,this._tail=null),this._length--,n.value},t.prototype.reverse=function(){if(this._head){var n=this._head,i=null,o;for(this._tail=this._head;n!==null;)o=n.next,n.next=i,n.prev=o,i=n,n=o;this._head=i}},t.prototype.clone=function(){var n=this.toArray();return new(t.bind.apply(t,Qt([void 0],n)))},t}(Ka),Zd=function(e){ri(t,e);function t(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=e.apply(this,Qt(n))||this;return o.cyclization(),o}return t.prototype.iterator=function(){var n;return Ti(this,function(i){switch(i.label){case 0:n=this._head,i.label=1;case 1:return n?[4,n.value]:[3,3];case 2:return i.sent(),n=n.next,n===this._head&&(n=null),[3,1];case 3:return[2]}})},t.prototype.circleIterator=function(){var n;return Ti(this,function(i){switch(i.label){case 0:n=this._head,i.label=1;case 1:return n?[4,n.value]:[3,3];case 2:return i.sent(),n=n.next,[3,1];case 3:return[2]}})},t.prototype[Symbol.iterator]=function(){return this.iterator()},t.prototype.mapToNormalListFn=function(n){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];this.breakCircle();var s=e.prototype[n].apply(this,i);return this.cyclization(),s},t.prototype.getNode=function(n){return this.mapToNormalListFn("getNode",n)},t.prototype.append=function(n){return this.mapToNormalListFn("append",n)},t.prototype.prepend=function(n){return this.mapToNormalListFn("prepend",n)},t.prototype.find=function(n){return this.mapToNormalListFn("find",n)},t.prototype.indexOf=function(n){return this.mapToNormalListFn("indexOf",n)},t.prototype.remove=function(n){return this.mapToNormalListFn("remove",n)},t.prototype.removeHead=function(){return this.mapToNormalListFn("removeHead")},t.prototype.removeTail=function(){return this.mapToNormalListFn("removeTail")},t.prototype.first=function(n){ro(n>=0,"[linked-list] param 'num' ("+n+") should not less than 0");for(var i=this.circleIterator(),o=[],s=0;s<n;s++){var r=i.next();o.push(r.value)}return o},t.prototype.toArray=function(){return this.mapToNormalListFn("toArray")},t.prototype.reverse=function(){return this.mapToNormalListFn("reverse")},t}(Jd);(function(e){ri(t,e);function t(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=e.apply(this,Qt(n))||this;return o.cyclization(),o}return t.prototype.breakCircle=function(){this._tail&&this._head&&this._tail.next===this._head&&(this._tail.next=null,this._head.prev=null)},t.prototype.cyclization=function(){this._head&&this._tail&&this._tail.next===null&&(this._tail.next=this._head,this._head.prev=this._tail)},t.prototype.clone=function(){var n=this.toArray();return new(t.bind.apply(t,Qt([void 0],n)))},t})(Zd);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Qd(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var i=n.call(e),o,s=[],r;try{for(;(t===void 0||t-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s}function Yd(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Qd(arguments[t]));return e}var el=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.queue=new(xi.bind.apply(xi,Yd([void 0],t)))}return Object.defineProperty(e.prototype,"length",{get:function(){return this.queue.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"peek",{get:function(){return this.queue.head},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return this.queue.isEmpty()},e.prototype.enqueue=function(t){return this.queue.append(t)},e.prototype.dequeue=function(){var t=this.queue.removeHead();return typeof t<"u"?t:void 0},e.prototype.toArray=function(){return this.queue.toArray()},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function tl(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var i=n.call(e),o,s=[],r;try{for(;(t===void 0||t-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s}function nl(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(tl(arguments[t]));return e}var ns=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.stack=new(xi.bind.apply(xi,nl([void 0],t)))}return Object.defineProperty(e.prototype,"length",{get:function(){return this.stack.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"peek",{get:function(){return this.stack.tail},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return this.stack.isEmpty()},e.prototype.push=function(t){return this.stack.append(t)},e.prototype.pop=function(){var t=this.stack.removeTail();return typeof t<"u"?t:void 0},e.prototype.popBottom=function(){var t=this.stack.removeHead();return typeof t<"u"?t:void 0},e.prototype.toArray=function(){return this.stack.toArray()},e}(),il=function(){function e(t,n,i){i===void 0&&(i=0),this.startVertex=t,this.endVertex=n,this.weight=i}return e.prototype.getKey=function(){var t=this.startVertex.getKey(),n=this.endVertex.getKey();return t+"_"+n},e.prototype.reverse=function(){var t=this.startVertex;return this.startVertex=this.endVertex,this.endVertex=t,this},e.prototype.clone=function(){return new e(this.startVertex,this.endVertex,this.weight)},e.prototype.toString=function(){return this.getKey()},e}();function Is(e,t,n){if(n===void 0&&(n="cc-graph"),!e)throw new Error((n?"["+n+"]":"")+" Invariant failed: "+t)}function ol(e,t){t===void 0&&(t=!0);var n=typeof e<"u"&&e!==null;return t?n&&e!=="undefined"&&e!=="null":n}var Gr=function(){function e(t){Is(ol(t),"Graph vertex must have a value"),this.value=t,this.edges=new Map}return e.prototype.addEdge=function(t){return this.edges.set(t.getKey(),t),this},e.prototype.deleteEdge=function(t){this.edges.delete(t.getKey())},e.prototype.getNeighbors=function(){var t=this,n=this.getEdges(),i=function(o){return o.startVertex===t?o.endVertex:o.startVertex};return n.map(i)},e.prototype.getEdges=function(){return Array.from(this.edges.values())},e.prototype.getDegree=function(){return this.getEdges().length},e.prototype.hasEdge=function(t){var n=this.getEdges().find(function(i){return i===t});return!!n},e.prototype.hasNeighbor=function(t){var n=this.getEdges().find(function(i){return i.startVertex===t||i.endVertex===t});return!!n},e.prototype.findEdge=function(t){var n=function(o){return o.startVertex===t||o.endVertex===t},i=this.getEdges().find(n);return i||null},e.prototype.getKey=function(){return this.value},e.prototype.deleteAllEdges=function(){var t=this;return this.getEdges().forEach(function(n){return t.deleteEdge(n)}),this},e.prototype.toString=function(t){return t?t(this.value):""+this.value},e}();function Wr(e,t,n,i){if(e){t.push(e),i.set(e.getKey(),!0);var o=e.getNeighbors().filter(function(s){return!i.get(s.getKey())});n.push(o)}}function Xr(e,t,n){var i=e.pop();i&&n.set(i.getKey(),!1),t.pop()}var sl=function(){function e(t){t===void 0&&(t=!1),this.vertices={},this.edges={},this.isDirected=t}return e.prototype.addVertex=function(t){return this.vertices[t.getKey()]=t,this},e.prototype.getVertexByKey=function(t){return this.vertices[t]},e.prototype.getNeighbors=function(t){return t.getNeighbors()},e.prototype.getAllVertices=function(){return Object.values(this.vertices)},e.prototype.getAllEdges=function(){return Object.values(this.edges)},e.prototype.addEdge=function(t,n){if(n===void 0&&(n=!1),this.edges[t.getKey()]){if(n)return this;Is(!1,"Edge has already been added before")}var i=this.getVertexByKey(t.startVertex.getKey()),o=this.getVertexByKey(t.endVertex.getKey());if(i||(this.addVertex(t.startVertex),i=this.getVertexByKey(t.startVertex.getKey())),o||(this.addVertex(t.endVertex),o=this.getVertexByKey(t.endVertex.getKey())),this.edges[t.getKey()]=t,this.isDirected)i.addEdge(t);else{i.addEdge(t);var s=t.clone();o.addEdge(s.reverse())}return this},e.prototype.deleteEdge=function(t,n){if(n===void 0&&(n=!1),!this.edges[t.getKey()]){if(n)return this;Is(!1,"Edge not found in graph")}delete this.edges[t.getKey()];var i=this.getVertexByKey(t.startVertex.getKey()),o=this.getVertexByKey(t.endVertex.getKey());return i.deleteEdge(t),o.deleteEdge(t),this},e.prototype.findEdge=function(t,n){var i=this.getVertexByKey(t.getKey());return i?i.findEdge(n):null},e.prototype.getWeight=function(){return this.getAllEdges().reduce(function(t,n){return t+n.weight},0)},e.prototype.reverse=function(){var t=this;return this.getAllEdges().forEach(function(n){t.deleteEdge(n),n.reverse(),t.addEdge(n)}),this},e.prototype.getVerticesIndices=function(){var t={};return this.getAllVertices().forEach(function(n,i){t[n.getKey()]=i}),t},e.prototype.getAdjacencyMatrix=function(){var t=this,n=this.getAllVertices(),i=this.getVerticesIndices(),o=Array(n.length).fill(null).map(function(){return Array(n.length).fill(1/0)});return n.forEach(function(s,r){s.getNeighbors().forEach(function(a){var c=i[a.getKey()],d=t.findEdge(s,a);d&&(o[r][c]=d.weight)})}),o},e.prototype.toString=function(){return Object.keys(this.vertices).toString()},e.prototype.bfs=function(t){var n,i,o;return ts(this,function(s){switch(s.label){case 0:n=new Map,i=new el,i.enqueue(t),s.label=1;case 1:return i.isEmpty()?[3,4]:(o=i.dequeue(),o&&!n.has(o.getKey())?[4,o]:[3,3]);case 2:s.sent(),n.set(o.getKey(),o),o.getNeighbors().forEach(function(r){return i.enqueue(r)}),s.label=3;case 3:return[3,1];case 4:return[2]}})},e.prototype.dfs=function(t){var n,i,o;return ts(this,function(s){switch(s.label){case 0:n=new Map,i=new ns,i.push(t),s.label=1;case 1:return i.isEmpty()?[3,4]:(o=i.pop(),o&&!n.has(o.getKey())?[4,o]:[3,3]);case 2:s.sent(),n.set(o.getKey(),o),o.getNeighbors().forEach(function(r){return i.push(r)}),s.label=3;case 3:return[3,1];case 4:return[2]}})},e.prototype.findAllPath=function(t,n){var i,o,s,r,a,c,d;return ts(this,function(l){switch(l.label){case 0:return i=[],t!==n?[3,2]:(i.push(t),[4,i]);case 1:return l.sent(),[2];case 2:o=new Map,s=new ns,r=new ns,Wr(t,s,r,o),l.label=3;case 3:if(s.isEmpty())return[3,6];if(a=r.pop(),a&&a.length)c=a.shift(),r.push(a),c&&Wr(c,s,r,o);else return r.push(a),Xr(s,r,o),[3,3];return d=s.peek,d!==n?[3,5]:[4,s.toArray()];case 4:l.sent(),Xr(s,r,o),l.label=5;case 5:return[3,3];case 6:return[2]}})},e}();const rl=Od(),Va=rl.public.appEnv;console.log("config env: ",Va);const al={pro:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0x4fb259302630bf727f1b489e0597131fe4d8ccba12074bb7fedba3886c008945",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.mainnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"mainnet",networkTip:"Mainnet",api:"https://api.cetus.zone",accountAddress:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",accountPublicKey:"0x854923b882d2451730a11690f7da896e3b497e2a47b3383e86b62173bbc1414c",ammSite:"https://alpha.cetus.zone",newPositionAddress:"0x5b0b1c0d7a22fd7c59dedc00f906e9cb68033d13589a739b0d18cf25e317bdd4",fraphQLUrl:"https://indexer.mainnet.aptoslabs.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.notifi.network/gql",notifiEnv:"Production",hasCreatePool:!1,hasNotifi:!1,swapDefaultPair:{fromCoin:"0x5e156f1207d0ebfa19a9eeff00d62a282278fb8719f4fab3a586a0a2c0fffbea::coin::T",toCoin:"0x1::aptos_coin::AptosCoin"}},Sui:{officialRpcUrl:"https://fullnode.mainnet.sui.io",fullRpcUrl:"https://fullnode.mainnet.sui.io",rpcName:"Sui Official",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"mainnet",networkTip:"Mainnet",api:"https://api-sui.cetus.zone",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",swapCountUrl:"https://api-sui.cetus.zone/v2/sui/swap/count",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x326ce9894f08dcaa337fa232641cc34db957aec9ff6614c1186bc9a7508df0bb"},cetus_config:{package_id:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",published_at:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",config:{coin_list_id:"0x8cbc11d9e10140db3d230f50b4d30e9b721201c0083615441707ffec1ef77b23",launchpad_pools_id:"0x1098fac992eab3a0ab7acf15bb654fc1cf29b5a6142c4ef1058e6c408dd15115",clmm_pools_id:"0x15b6a27dd9ae03eb455aba03b39e29aad74abd3757b8e18c0755651b2ae5b71e",admin_cap_id:"0x39d78781750e193ce35c45ff32c6c0c3f2941fa3ddaf8595c90c555589ddb113",global_config_id:"0x0408fa4e4a4c03cc0de8f23d0c2bbfe8913d178713c9a271ed4080973fe42d8f",coin_list_handle:"0x49136005e90e28c4695419ed4194cc240603f1ea8eb84e62275eaff088a71063",launchpad_pools_handle:"0x5e194a8efcf653830daf85a85b52e3ae8f65dc39481d54b2382acda25068375c",clmm_pools_handle:"0x37f60eb2d9d227949b95da8fea810db3c32d1e1fa8ed87434fc51664f87d83cb"}},clmm_pool:{package_id:"0x1eabed72c53feb3805120a081dc15963c204dc8d091542592abaf7a35689b2fb",published_at:"0x70968826ad1b4ba895753f634b0aea68d0672908ca1075a2abdf0fc9e0b2fc6a",config:{pools_id:"0xf699e7f2276f5c9a75944b37a0c5b5d9ddfd2471bf6242483b03ab2887d198d0",global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b"}},integrate:{package_id:"0x996c4d9480708fb8b92aa7acf819fb0497b5ec8e65ba06601cae2fb6db3312c3",published_at:"0x8faab90228e4c4df91c41626bbaefa19fc25c514405ac64de54578dec9e6f5ee"},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0x92aee86c01c79146d23938a00c7fff725ee0688c389be36d1bcbe03761b466c6",published_at:"0x92aee86c01c79146d23938a00c7fff725ee0688c389be36d1bcbe03761b466c6"},aggregatorUrl:"https://api-sui.cetus.zone/router",aggregatorv2Url:"https://api-sui.cetus.zone/router_v2/find_routes",aggregatorV2:{package_id:"0xeffc8ae61f439bb34c9b905ff8f29ec56873dcedf81c7123ff2f1f67c45ec302",published_at:"0xeffc8ae61f439bb34c9b905ff8f29ec56873dcedf81c7123ff2f1f67c45ec302"},launchpad:{package_id:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",published_at:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",config:{pools_id:"0xfd8d37f7a1276878972d240302c8efe32f577220c1bbc6c8984d8b60dddfcab3",admin_cap_id:"0x66c70d58c69353714cc6fe2d3a62492d605a96a9821e2bd8274de17219c69980",config_cap_id:"0x02b8d23f033687579966e182c776fe0287cacdbb18bff56c29f141e29a18a4d1"}},ido:{package_id:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",published_at:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",config:{pools_id:"0xefc209b47acf1f23b29d166440904600229e520ad36228aaf2329b7c16be9762",admin_cap_id:"0x281859d366951830aeeda90779aa170d8ee6845875545470d33ecb890e78c8ce",package_version_id:"0xc93dc996106770af5f4e979b6808518f8cee080f22f35b936f071f59d834bb22"}},xcetusTokenAddress:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",xcetus:{package_id:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",published_at:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",config:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49"}},xcetus_dividends:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0x5aa58e1623885bd93de2331d05c29bf4930e54e56beeabcab8fe5385de2d31dc",config:{dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5",dividend_admin_id:"0x682ba823134f156eac2bcfb27d85a284954a0e61998dc628c40b9bcb4a46ff30",dividend_settle_id:"0xade40abe9f6dd10b83b11085be18f07b63b681cf1c169b041fa16854403388c5",venft_dividends_id:"0x9dcdb97b4307684bedaeaf803d381b12321a31ecbb9dad7df2cd5f64384f9456",venft_dividends_id_v2:"0xaa21fbc1707786d56302952f8327362f4eb9a431a5bc574834e6d46125390de3"}},cetus_faucet:{package_id:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",published_at:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b"},vaults:{package_id:"0xd3453d9be7e35efe222f78a810bb3af1859fd1600926afced8b4936d825c9a05",published_at:"0xabbd278f738affe762e9df4765b3409bb1e86a355a4f611ad82b278c18108918",config:{admin_cap_id:"0x78a42978709c4032fab7b33b782b5bcef64c1c6603250bf23644650b72144375",vaults_manager_id:"0x25b82dd2f5ee486ed1c8af144b89a8931cd9c29dee3a86a1bfe194fdea9d04a6",vaults_pool_handle:"0x9036bcc5aa7fd2cceec1659a6a1082871f45bc400c743f50063363457d1738bd",haedal:{package_id:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d",published_at:"0x1d56b8ec33c3fae897eb7bb1acb79914e8152faed614868928e684c25c8b198d",version:1,config:{staking_id:"0x47b224762220393057ebf4f70501b6e657c3e56684737568439a04f80849b2ca",coin_type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI"}},volo:{package_id:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",published_at:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",version:1,config:{native_pool:"0x7fa2faa111b8c65bea48a23049bfd81ca8f971a262d981dcd9a17c3825cb5baf",vsui_metadata:"0x680cd26af32b2bde8d3361e804c53ec1d1cfe24c7f039eb7f549e8dfde389a60",coin_type:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT"}},aftermath:{package_id:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",published_at:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",version:1,config:{staked_sui_vault:"0x2f8f6d5da7f13ea37daa397724280483ed062769813b6f31e9788e59cc88994d",referral_vault:"0x4ce9a19b594599536c53edb25d22532f82f18038dc8ef618afd00fbbfb9845ef",safe:"0xeb685899830dd5837b47007809c76d91a098d52aabbf61e8ac467c59e5cc4610",validator_address:"0xd30018ec3f5ff1a3c75656abf927a87d7f0529e6dc89c7ddd1bd27ecb05e3db2",coin_type:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI"}}}},xtoken:{package_id:"",published_at:"",config:{xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""}},xtoken_dividends:{package_id:"",published_at:"",config:{dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""}},token_faucet:{package_id:"",published_at:""},booster:{package_id:"",published_at:"",config:{booster_config_id:"",booster_pool_handle:""}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},hasCreatePool:!0,hasNotifi:!0,hasRouter:!0,hasVault:!0,vaultFilter:!0,hasLimitOrder:!0,swapDefaultPair:{fromCoin:"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN",toCoin:"0x2::sui::SUI"},frams:{package_id:"0x11ea791d82b5742cc8cab0bf7946035c97d9001d7c3803a93f119753da66f526",published_at:"0xd817d90368dafcbf3b051e96546dea6209bffad23289d66025beef80354dcd6b",config:{global_config_id:"0x21215f2f6de04b57dd87d9be7bb4e15499aec935e36078e2488f36436d64996e",rewarder_manager_id:"0xe0e155a88c77025056da08db5b1701a91b79edb6167462f768e387c3ed6614d5",rewarder_manager_handle:"0xb32e312cbb3367d6f3d2b4e57c9225e903d29b7b9f612dae2ddf75bdeb26a5aa",admin_cap_id:"0xf10fbf1fea5b7aeaa524b87769461a28c5c977613046360093673991f26d886c"}},limit_order:{package_id:"0x533fab9a116080e2cb1c87f1832c1bf4231ab4c32318ced041e75cc28604bba9",published_at:"0x533fab9a116080e2cb1c87f1832c1bf4231ab4c32318ced041e75cc28604bba9",config:{rate_orders_indexer_id:"0xe7fa62b6fc095ed5659b85c735f4322059e1f4616dcf3343adece6e7eb52bf47",rate_orders_indexer_handle:"0x81a95c812cab1c9cc7a1c10446d93d2d9517097211c72b544f7efed33b540bcc",global_config_id:"0xd3403f23a053b52e5c4ef0c2a8be316120c435ec338f2596647b6befd569fd9c",token_list_handle:"0x644a7f05eff2a1b4c266d7ce849c8494fb068a4e29037c7c523e5eb822389d8d",user_orders_indexer_id:"0x7f851ac19e438f97e78a5335eed4f12766a3a0ae94340bab7956a402f0e6212e",user_orders_indexer_handle:"0x84703679acd2eeaee8de4945be79d029ab94966bc22e0f6cfd696032fd31bbc7"}},cetus_integrate2:{package_id:"0x0ee90618ca31b06a80124118a6c2f51825efd6a32e36d5bfebb7a18b8f4b6c7f",published_at:"0x878ffd6f1a0b1fe8a5b93822d1c1de1ed9399e784ac2b9252bbb5c61b674debc"}}},pre:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xb8a7f7731b03d9b4b6acc21b88dbae2a96ed7e3c3e87c722bd74315b520633d6",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.mainnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"mainnet",networkTip:"Mainnet",api:"https://api-beta.cetus.zone",accountAddress:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",accountPublicKey:"0x854923b882d2451730a11690f7da896e3b497e2a47b3383e86b62173bbc1414c",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"0x5b0b1c0d7a22fd7c59dedc00f906e9cb68033d13589a739b0d18cf25e317bdd4",fraphQLUrl:"https://indexer.mainnet.aptoslabs.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.notifi.network/gql",notifiEnv:"Production",hasCreatePool:!1,hasNotifi:!1,swapDefaultPair:{fromCoin:"0x5e156f1207d0ebfa19a9eeff00d62a282278fb8719f4fab3a586a0a2c0fffbea::coin::T",toCoin:"0x1::aptos_coin::AptosCoin"}},Sui:{officialRpcUrl:"https://fullnode.mainnet.sui.io",fullRpcUrl:"https://fullnode.mainnet.sui.io",rpcName:"Sui Official",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"mainnet",networkTip:"Mainnet",api:"https://api-sui-cloudfront.cetus.zone",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",swapCountUrl:"https://api-sui.cetus.zone/v2/sui/swap/count",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x326ce9894f08dcaa337fa232641cc34db957aec9ff6614c1186bc9a7508df0bb"},cetus_config:{package_id:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",published_at:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",config:{coin_list_id:"0x8cbc11d9e10140db3d230f50b4d30e9b721201c0083615441707ffec1ef77b23",launchpad_pools_id:"0x1098fac992eab3a0ab7acf15bb654fc1cf29b5a6142c4ef1058e6c408dd15115",clmm_pools_id:"0x15b6a27dd9ae03eb455aba03b39e29aad74abd3757b8e18c0755651b2ae5b71e",admin_cap_id:"0x39d78781750e193ce35c45ff32c6c0c3f2941fa3ddaf8595c90c555589ddb113",global_config_id:"0x0408fa4e4a4c03cc0de8f23d0c2bbfe8913d178713c9a271ed4080973fe42d8f",coin_list_handle:"0x49136005e90e28c4695419ed4194cc240603f1ea8eb84e62275eaff088a71063",launchpad_pools_handle:"0x5e194a8efcf653830daf85a85b52e3ae8f65dc39481d54b2382acda25068375c",clmm_pools_handle:"0x37f60eb2d9d227949b95da8fea810db3c32d1e1fa8ed87434fc51664f87d83cb"}},clmm_pool:{package_id:"0x1eabed72c53feb3805120a081dc15963c204dc8d091542592abaf7a35689b2fb",published_at:"0x70968826ad1b4ba895753f634b0aea68d0672908ca1075a2abdf0fc9e0b2fc6a",config:{pools_id:"0xf699e7f2276f5c9a75944b37a0c5b5d9ddfd2471bf6242483b03ab2887d198d0",global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b"}},integrate:{package_id:"0x996c4d9480708fb8b92aa7acf819fb0497b5ec8e65ba06601cae2fb6db3312c3",published_at:"0x8faab90228e4c4df91c41626bbaefa19fc25c514405ac64de54578dec9e6f5ee"},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0x92aee86c01c79146d23938a00c7fff725ee0688c389be36d1bcbe03761b466c6",published_at:"0x92aee86c01c79146d23938a00c7fff725ee0688c389be36d1bcbe03761b466c6"},aggregatorUrl:"https://api-sui.cetus.zone/router",aggregatorv2Url:"https://api-sui-cloudfront.cetus.zone/router_v2/find_routes",aggregatorV2:{package_id:"0xeffc8ae61f439bb34c9b905ff8f29ec56873dcedf81c7123ff2f1f67c45ec302",published_at:"0xeffc8ae61f439bb34c9b905ff8f29ec56873dcedf81c7123ff2f1f67c45ec302"},launchpad:{package_id:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",published_at:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",config:{pools_id:"0xfd8d37f7a1276878972d240302c8efe32f577220c1bbc6c8984d8b60dddfcab3",admin_cap_id:"0x66c70d58c69353714cc6fe2d3a62492d605a96a9821e2bd8274de17219c69980",config_cap_id:"0x02b8d23f033687579966e182c776fe0287cacdbb18bff56c29f141e29a18a4d1"}},ido:{package_id:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",published_at:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",config:{pools_id:"0xefc209b47acf1f23b29d166440904600229e520ad36228aaf2329b7c16be9762",admin_cap_id:"0x281859d366951830aeeda90779aa170d8ee6845875545470d33ecb890e78c8ce",package_version_id:"0xc93dc996106770af5f4e979b6808518f8cee080f22f35b936f071f59d834bb22"}},xcetusTokenAddress:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",xcetus:{package_id:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",published_at:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",config:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49"}},xcetus_dividends:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0x5aa58e1623885bd93de2331d05c29bf4930e54e56beeabcab8fe5385de2d31dc",config:{dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5",dividend_admin_id:"0x682ba823134f156eac2bcfb27d85a284954a0e61998dc628c40b9bcb4a46ff30",dividend_settle_id:"0xade40abe9f6dd10b83b11085be18f07b63b681cf1c169b041fa16854403388c5",venft_dividends_id:"0x9dcdb97b4307684bedaeaf803d381b12321a31ecbb9dad7df2cd5f64384f9456",venft_dividends_id_v2:"0xaa21fbc1707786d56302952f8327362f4eb9a431a5bc574834e6d46125390de3"}},cetus_faucet:{package_id:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",published_at:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b"},vaults:{package_id:"0xd3453d9be7e35efe222f78a810bb3af1859fd1600926afced8b4936d825c9a05",published_at:"0xabbd278f738affe762e9df4765b3409bb1e86a355a4f611ad82b278c18108918",config:{admin_cap_id:"0x78a42978709c4032fab7b33b782b5bcef64c1c6603250bf23644650b72144375",vaults_manager_id:"0x25b82dd2f5ee486ed1c8af144b89a8931cd9c29dee3a86a1bfe194fdea9d04a6",vaults_pool_handle:"0x9036bcc5aa7fd2cceec1659a6a1082871f45bc400c743f50063363457d1738bd",haedal:{package_id:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d",published_at:"0x1d56b8ec33c3fae897eb7bb1acb79914e8152faed614868928e684c25c8b198d",version:1,config:{staking_id:"0x47b224762220393057ebf4f70501b6e657c3e56684737568439a04f80849b2ca",coin_type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI"}},volo:{package_id:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",published_at:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",version:1,config:{native_pool:"0x7fa2faa111b8c65bea48a23049bfd81ca8f971a262d981dcd9a17c3825cb5baf",vsui_metadata:"0x680cd26af32b2bde8d3361e804c53ec1d1cfe24c7f039eb7f549e8dfde389a60",coin_type:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT"}},aftermath:{package_id:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",published_at:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",version:1,config:{staked_sui_vault:"0x2f8f6d5da7f13ea37daa397724280483ed062769813b6f31e9788e59cc88994d",referral_vault:"0x4ce9a19b594599536c53edb25d22532f82f18038dc8ef618afd00fbbfb9845ef",safe:"0xeb685899830dd5837b47007809c76d91a098d52aabbf61e8ac467c59e5cc4610",validator_address:"0xd30018ec3f5ff1a3c75656abf927a87d7f0529e6dc89c7ddd1bd27ecb05e3db2",coin_type:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI"}}}},xtoken:{package_id:"",published_at:"",config:{xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""}},xtoken_dividends:{package_id:"",published_at:"",config:{dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""}},token_faucet:{package_id:"",published_at:""},booster:{package_id:"",published_at:"",config:{booster_config_id:"",booster_pool_handle:""}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},hasCreatePool:!0,hasNotifi:!0,hasRouter:!0,hasVault:!0,vaultFilter:!1,hasLimitOrder:!0,swapDefaultPair:{fromCoin:"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN",toCoin:"0x2::sui::SUI"},frams:{package_id:"0x11ea791d82b5742cc8cab0bf7946035c97d9001d7c3803a93f119753da66f526",published_at:"0xd817d90368dafcbf3b051e96546dea6209bffad23289d66025beef80354dcd6b",config:{global_config_id:"0x21215f2f6de04b57dd87d9be7bb4e15499aec935e36078e2488f36436d64996e",rewarder_manager_id:"0xe0e155a88c77025056da08db5b1701a91b79edb6167462f768e387c3ed6614d5",rewarder_manager_handle:"0xb32e312cbb3367d6f3d2b4e57c9225e903d29b7b9f612dae2ddf75bdeb26a5aa",admin_cap_id:"0xf10fbf1fea5b7aeaa524b87769461a28c5c977613046360093673991f26d886c"}},limit_order:{package_id:"0x533fab9a116080e2cb1c87f1832c1bf4231ab4c32318ced041e75cc28604bba9",published_at:"0x533fab9a116080e2cb1c87f1832c1bf4231ab4c32318ced041e75cc28604bba9",config:{rate_orders_indexer_id:"0xe7fa62b6fc095ed5659b85c735f4322059e1f4616dcf3343adece6e7eb52bf47",rate_orders_indexer_handle:"0x81a95c812cab1c9cc7a1c10446d93d2d9517097211c72b544f7efed33b540bcc",global_config_id:"0xd3403f23a053b52e5c4ef0c2a8be316120c435ec338f2596647b6befd569fd9c",token_list_handle:"0x644a7f05eff2a1b4c266d7ce849c8494fb068a4e29037c7c523e5eb822389d8d",user_orders_indexer_id:"0x7f851ac19e438f97e78a5335eed4f12766a3a0ae94340bab7956a402f0e6212e",user_orders_indexer_handle:"0x84703679acd2eeaee8de4945be79d029ab94966bc22e0f6cfd696032fd31bbc7"}},cetus_integrate2:{package_id:"0x0ee90618ca31b06a80124118a6c2f51825efd6a32e36d5bfebb7a18b8f4b6c7f",published_at:"0x878ffd6f1a0b1fe8a5b93822d1c1de1ed9399e784ac2b9252bbb5c61b674debc"}}},preRoute:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xb8a7f7731b03d9b4b6acc21b88dbae2a96ed7e3c3e87c722bd74315b520633d6",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.mainnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"mainnet",networkTip:"Mainnet",api:"https://api-beta.cetus.zone",accountAddress:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",accountPublicKey:"0x854923b882d2451730a11690f7da896e3b497e2a47b3383e86b62173bbc1414c",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"0x5b0b1c0d7a22fd7c59dedc00f906e9cb68033d13589a739b0d18cf25e317bdd4",fraphQLUrl:"https://indexer.mainnet.aptoslabs.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.notifi.network/gql",notifiEnv:"Production",hasCreatePool:!1,hasNotifi:!0,swapDefaultPair:{fromCoin:"0x5e156f1207d0ebfa19a9eeff00d62a282278fb8719f4fab3a586a0a2c0fffbea::coin::T",toCoin:"0x1::aptos_coin::AptosCoin"}},Sui:{fullRpcUrl:"https://fullnode.mainnet.sui.io",rpcName:"Sui Official",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"mainnet",networkTip:"Mainnet",api:"https://api-sui.cetus.zone",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x326ce9894f08dcaa337fa232641cc34db957aec9ff6614c1186bc9a7508df0bb"},cetus_config:{package_id:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",published_at:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",config:{coin_list_id:"0x8cbc11d9e10140db3d230f50b4d30e9b721201c0083615441707ffec1ef77b23",launchpad_pools_id:"0x1098fac992eab3a0ab7acf15bb654fc1cf29b5a6142c4ef1058e6c408dd15115",clmm_pools_id:"0x15b6a27dd9ae03eb455aba03b39e29aad74abd3757b8e18c0755651b2ae5b71e",admin_cap_id:"0x39d78781750e193ce35c45ff32c6c0c3f2941fa3ddaf8595c90c555589ddb113",global_config_id:"0x0408fa4e4a4c03cc0de8f23d0c2bbfe8913d178713c9a271ed4080973fe42d8f",coin_list_handle:"0x49136005e90e28c4695419ed4194cc240603f1ea8eb84e62275eaff088a71063",launchpad_pools_handle:"0x5e194a8efcf653830daf85a85b52e3ae8f65dc39481d54b2382acda25068375c",clmm_pools_handle:"0x37f60eb2d9d227949b95da8fea810db3c32d1e1fa8ed87434fc51664f87d83cb"}},clmm_pool:{package_id:"0x1eabed72c53feb3805120a081dc15963c204dc8d091542592abaf7a35689b2fb",published_at:"0xfa36bcb799278bddaf295991b2d3ce039013b1dd60dfd7183dee135fdadbc4be",config:{pools_id:"0xf699e7f2276f5c9a75944b37a0c5b5d9ddfd2471bf6242483b03ab2887d198d0",global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b"}},integrate:{package_id:"0x996c4d9480708fb8b92aa7acf819fb0497b5ec8e65ba06601cae2fb6db3312c3",published_at:"0x996c4d9480708fb8b92aa7acf819fb0497b5ec8e65ba06601cae2fb6db3312c3"},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0xac95e8a5e873cfa2544916c16fe1461b6a45542d9e65504c1794ae390b3345a7",published_at:"0xac95e8a5e873cfa2544916c16fe1461b6a45542d9e65504c1794ae390b3345a7"},aggregatorUrl:"https://api-sui.cetus.zone/router1",launchpad:{package_id:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",published_at:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",config:{pools_id:"0xccc10403ab3da4ae943847908e0e674fe1fdab81c6383e4c6dcd0eea0edade3d",admin_cap_id:"0x8a72713049dbcfc40902ff209dc5e6066fe455d152baa235957c84d7a3b875ed",config_cap_id:"0x16492b4252b01debb60f8a825334020d7fdb9d895b52f8139c98618de30817fc",config_pools_id:"0x3b8a3b1fb77e7b21d1f6b6b3afbe083a35621fd8a0fcf40e87cee5c0ef0c51e0"}},ido:{package_id:"0x7cc8461d20ad82d3851123a64bed22883199b465763ee53b1b529fba1f4e15cc",published_at:"0x9f63e8926719bcb45df55fb60b4444f4d50309bff2e85cccc1fdb91c3e4653a2",config:{pools_id:"0x68b4b6bd15aa086df8f8d94f62fb5b38817a02cc288802d1637e1febae46f545",admin_cap_id:"0x5a304d63a5421a3fbc190b3d124f7ea3cdf56b1cb8fd3e0bf4855d129075caef",package_version_id:"0xceab2289e0968f0e7172ce702af8f28a678570afa6b139e97bc344f0290672d6"}},xcetus:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0xbd63384b94d047a62e82c42f0566a04e52dd58f80266f84d8ab1164e970e0282",config:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49"}},xcetus_dividends:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0xbd63384b94d047a62e82c42f0566a04e52dd58f80266f84d8ab1164e970e0282",config:{dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5",dividend_admin_id:"",dividend_settle_id:""}},cetus_faucet:{package_id:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",published_at:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b"},xtoken:{package_id:"",published_at:"",config:{xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""}},xtoken_dividends:{package_id:"",published_at:"",config:{dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""}},token_faucet:{package_id:"",published_at:""},booster:{package_id:"",published_at:"",config:{booster_config_id:"",booster_pool_handle:""}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},hasCreatePool:!1,hasNotifi:!1,swapDefaultPair:{fromCoin:"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN",toCoin:"0x2::sui::SUI"}}},test:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xce854db9e3d7ae088359dbc54e2d425370c86a010b7656a272019abd9abf5b5a",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.testnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"testnet",networkTip:"Testnet",api:"https://api.devcetus.com",accountAddress:"0x251dda55e5071be8c761c8a99d7af559ccb6ccc52ad3f945712d3ae8b87c35e0",accountPublicKey:"0x40b00ab4323dddef193e9fef41830a96456a8b875c4e5cb5a4e666d9a75fed51",ammSite:"https://test-cetus.netlify.app",newPositionAddress:"0x3904fc6d0dcb6e1937a6aced4597ec383afc752676d89f1d59b3d30b959fe161",fraphQLUrl:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.dev.notifi.network/gql",notifiEnv:"Development",hasCreatePool:!1,hasNotifi:!1,swapDefaultPair:{fromCoin:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75::coin::CetusUSDC",toCoin:"0x1::aptos_coin::AptosCoin"}},Sui:{officialRpcUrl:"https://fullnode.testnet.sui.io",fullRpcUrl:"https://fullnode.testnet.sui.io",faucetURL:"",explorerUrl:"https://explorer.sui.io/",explorerUrl1:"https://testnet.suivision.xyz",network:"testnet",networkTip:"Testnet",api:"https://api-sui.devcetus.com",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",swapCountUrl:"https://api-sui.devcetus.com/v2/sui/swap/count/v3",faucet:{faucet_display:"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc",faucet_router:"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc"},simulationAccount:{address:"0xcd0247d0b67e53dde69b285e7a748e3dc390e8a5244eb9dd9c5c53d95e4cf0aa"},cetus_config:{package_id:"0xf5ff7d5ba73b581bca6b4b9fa0049cd320360abd154b809f8700a8fd3cfaf7ca",published_at:"0xf5ff7d5ba73b581bca6b4b9fa0049cd320360abd154b809f8700a8fd3cfaf7ca",config:{coin_list_id:"0x257eb2ba592a5480bba0a97d05338fab17cc3283f8df6998a0e12e4ab9b84478",launchpad_pools_id:"0xdc3a7bd66a6dcff73c77c866e87d73826e446e9171f34e1c1b656377314f94da",clmm_pools_id:"0x26c85500f5dd2983bf35123918a144de24e18936d0b234ef2b49fbb2d3d6307d",admin_cap_id:"0x1a496f6c67668eb2c27c99e07e1d61754715c1acf86dac45020c886ac601edb8",global_config_id:"0xe1f3db327e75f7ec30585fa52241edf66f7e359ef550b533f89aa1528dd1be52",coin_list_handle:"0x3204350fc603609c91675e07b8f9ac0999b9607d83845086321fca7f469de235",launchpad_pools_handle:"0xae67ff87c34aceea4d28107f9c6c62e297a111e9f8e70b9abbc2f4c9f5ec20fd",clmm_pools_handle:"0xd28736923703342b4752f5ed8c2f2a5c0cb2336c30e1fed42b387234ce8408ec"}},clmm_pool:{package_id:"0x0868b71c0cba55bf0faf6c40df8c179c67a4d0ba0e79965b68b3d72d7dfbf666",published_at:"0x084dbc14f8f6b50e4e1d6828ebf1f93fd1b1d2502b121bc787937893793417b0",config:{pools_id:"0xc090b101978bd6370def2666b7a31d7d07704f84e833e108a969eda86150e8cf",global_config_id:"0x6f4149091a5aea0e818e7243a13adcfb403842d670b9a2089de058512620687a",global_vault_id:"0xf3114a74d54cbe56b3e68f9306661c043ede8c6615f0351b0c3a93ce895e1699"}},integrate:{package_id:"0x8627c5cdcd8b63bc3daa09a6ab7ed81a829a90cafce6003ae13372d611fbb1a9",published_at:"0xe26cb89a7c3bb9a00b396e278f4f1f90aae02d0da37cd4b0c4b4977ca95568ef"},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0xa34ffca2c6540e1ca9e53963ab43e7b1eed7b82e37696c743bb7c6179c15dfa6",published_at:"0xa34ffca2c6540e1ca9e53963ab43e7b1eed7b82e37696c743bb7c6179c15dfa6"},aggregatorUrl:"https://api-sui.devcetus.com/router",aggregatorv2Url:"https://api-sui.devcetus.com/router_v2",aggregatorV2:{package_id:"0xf17e31b16c325622501981c106bb761d3fd9a60aab746300c59d47ef90f92fc0",published_at:"0xf17e31b16c325622501981c106bb761d3fd9a60aab746300c59d47ef90f92fc0"},launchpad:{package_id:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",published_at:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",config:{pools_id:"0xccc10403ab3da4ae943847908e0e674fe1fdab81c6383e4c6dcd0eea0edade3d",admin_cap_id:"0x8a72713049dbcfc40902ff209dc5e6066fe455d152baa235957c84d7a3b875ed",config_cap_id:"0x16492b4252b01debb60f8a825334020d7fdb9d895b52f8139c98618de30817fc",config_pools_id:"0x3b8a3b1fb77e7b21d1f6b6b3afbe083a35621fd8a0fcf40e87cee5c0ef0c51e0"}},ido:{package_id:"0x1352bf18ef20458f7cc773852d4a90b240015a6a54479dda3a1debfc500bf044",published_at:"0xbd09a0889ea9970b821512428bab3e2fd01e16809a90a325cd3b3d3573eab6a4",config:{pools_id:"0x346bee25ab4d15bcfa9484ef5ebd4d7c94eb665ebaa745ff4094936a7f59a8b1",admin_cap_id:"0xc1bb19a24d3bb65dfd4f3835637b63347c223c67cde4b0888f1a857974f33cbb",package_version_id:"0x3ccf1b38e3259e638b980d4e6b49eac8c5aa94d3cb2ace5e75f0a551c8e67e5e"}},xcetusTokenAddress:"0x04792c459e2c20d1d48c85ab2eed98ef115d5b3e36ccf6ce8d0d3c79ca548c91::xtoken::XTOKEN",xcetus:{package_id:"0xdebaab6b851fd3414c0a62dbdf8eb752d6b0d31f5cfce5e38541bc6c6daa8966",published_at:"0xdebaab6b851fd3414c0a62dbdf8eb752d6b0d31f5cfce5e38541bc6c6daa8966",config:{xcetus_manager_id:"0x3be34cbad122c8b100ed7157d762b9610e68b3c65734e08bc3c3baf857da807d",lock_manager_id:"0x7c67e805182e3fecd098bd68a6b06c317f28f8c6249bd771e07904a10b424e60",lock_handle_id:"0xc5f3bbfefe9a45c13da7a34bc72cac122ee45d633690476a8ac56bd2c4e78c86"}},xcetus_dividends:{package_id:"0x4061e279415a3c45cfd31554d38c5b3bb0e06c65833811a98a66f469e04c69c3",published_at:"0xfeda040996e722ba532ab2203d13333484024456ca38bf4adeb526ce1457332d",config:{dividend_manager_id:"0x9d1be1a6b1146b30448a266bc87127466c0bae1585750c42adffce3e25e1ab6d",dividend_admin_id:"0x36d63c1a588bd93775aff8f47538a0063960564f0a171d100a9f49526a872b92",dividend_settle_id:"0x9eb78595419560b1dcaa9fb0ca307921ab1664a5f63c877c6887ab696344b400",venft_dividends_id:"0xc31a85fa5a77fc1def0dc5b2aadc5317a9d744ffda24b472e56a646711770676",venft_dividends_id_v2:"0x53b24031120730f6e4a733526147917650b1ecd3c56b43164b69eaa74f9b9ff7"}},cetus_faucet:{package_id:"0x1a69aee6be709054750949959a67aedbb4200583b39586d5e3eabe57f40012c7",published_at:"0x1a69aee6be709054750949959a67aedbb4200583b39586d5e3eabe57f40012c7"},xtoken:{package_id:"0xb58a7b66d3d007d9977940598187104084951bd8fdabb74f03f68151a3e27710",published_at:"0x72eefdfad9c79ef4c69748f9fcaf47874779704475d9ce35a29cc0ff1b9ce29f",config:{xtoken_manager_id:"0x51c6f72ecbc819aeee851b5e2d79cf6100e8e2b44e7ca55b06bd81bd163f677f",lock_manager_id:"0x92cb9f128ae2f823401c2104136a96cde6c201d6a133a1c7b5c67f4400711a10",lock_handle_id:"0x5cc82e84cf911a2d904997c7ef3e2e98eb3fea0bc43308f7b8c52bf0aff478b9"}},xtoken_dividends:{package_id:"0xdc899c0b05327036990f08cd70b99ef92c4288b784cbb82088c099d109a30226",published_at:"0x4677c8990eab6036d7059be96ad82173efd88775be36e277f4543155da4cbb9e",config:{dividend_manager_id:"0xaf17350657fb26a972d088bfb9db4491d11bf5533b7a5272ab6aa4a1badee749",dividend_admin_id:"0x8c0993c6ea9574cf6a3743698a0d6a46c7bbc4bab668d28b51aa947ad34edfc2",dividend_settle_id:"0xd938930b4ad7ef0cd85d8ae640d6ed7fd5cfcb64101994b69b88aa240dba1cb0"}},token_faucet:{package_id:"0xc0a53bf7b0471fdff173e84c065641bcdba791681840f4dacd767725924bfcd5",published_at:"0xc0a53bf7b0471fdff173e84c065641bcdba791681840f4dacd767725924bfcd5"},booster:{package_id:"0xffa4c477b7d991a05ebd4e8cb635d05d8bec129799ddd6407068cfefa8913870",published_at:"0xffa4c477b7d991a05ebd4e8cb635d05d8bec129799ddd6407068cfefa8913870",config:{booster_config_id:"0xeba41bf99086b0140713d7dd102e1374281a608bf524cc38f62c1d2bd792715c",booster_pool_handle:"0x01f9ba86234f661157366b8393eaeba82c8b78bf40fd9728604c3cc142811629"}},liquidity_stratefy:{package_id:"0x9b894cff0422a6acc41dadab3c8e2f52da7b5f0b366821a80d62eaf650565c3f",published_at:"0xc76c30d0a7b3e0a4372b6e7f24d73ef4d7740eaf920789e658795502c2fd252a",config:{master_manger_id:"0x562f2c9a90ffc3cdbe492b8cedb2e911954c81e8d20b47c4d2b0b2782bd7cad2",master_liquidity_handle:"0x323179fcd8fc2c01f146a902aaec56221e791fb0f1965907c97b25cba5eac515"}},vaults:{package_id:"0x25cff94bdb454bae6a5565d09047bfe2b230025ef3bd2199622ec48d854b86b9",published_at:"0xe1fb9fc8542a9e7768b0a701bf0c11b595201fb2492791a03eb9c0bb319297f3",config:{admin_cap_id:"0x9b2d6f5be2650d16d27cd630c4539a76d7793970343ed3cbb023e13f1637c07c",vaults_manager_id:"0xc0a1a937df08880e395d85014ff40c74f13abe7a53abdbffea36f51adaaaf79e",vaults_pool_handle:"0x3ab02203de753de9c8198cc0ce7594dc960878f2c34c5c5a4b7742082241860a",haedal:{package_id:"0xac2afb455cbcdc2ff1a2e9bbb8aa4ccb4506a544b08c740886892a5cdf92f472",published_at:"0x9dac9c5770e5f930d2223ff68782958701acfaee9337e8d8363978ce7670dffb",version:1,config:{staking_id:"0x6e384d2da5b040b27f973155e25bbe4beb0ad5ca8ee0a36e20dff356094c9fc0",coin_type:"0xac2afb455cbcdc2ff1a2e9bbb8aa4ccb4506a544b08c740886892a5cdf92f472::hasui::HASUI"}},volo:{package_id:"",published_at:"",version:1,config:{native_pool:"",vsui_metadata:"",coin_type:"::cert::CERT"}},aftermath:{package_id:"0x5e8c0fc2b3d8aa1b06eec36c08d9d835c73c0626a1efaebc0fb03aa52f1a3ff4",published_at:"0x5e8c0fc2b3d8aa1b06eec36c08d9d835c73c0626a1efaebc0fb03aa52f1a3ff4",version:1,config:{staked_sui_vault:"0xe498a8c07ec62200c519a0092eda233abdab879e8f332c11bdc1819eb7b12fbb",referral_vault:"0x8d357115058f22976cd01c5415116d9aca806d1ded37eecd75d87978f404e927",safe:"0x38710a6e0bd885c158e52ec7a42c8a9a1826c6696b626b4a5e2d1dcb15cfd9b7",validator_address:"0x9336c4c9d891e263cfac99adc397853a7392e5cf84cbd5df92207a57c7fbdadc",coin_type:"0x5e8c0fc2b3d8aa1b06eec36c08d9d835c73c0626a1efaebc0fb03aa52f1a3ff4::afsui::AFSUI"}}}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},hasCreatePool:!0,hasNotifi:!0,hasRouter:!0,hasVault:!0,vaultFilter:!0,hasLimitOrder:!0,swapDefaultPair:{fromCoin:"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc::usdc::USDC",toCoin:"0x2::sui::SUI"},frams:{package_id:"0xfa0d98e99c1dbdbea1b0fe089fa93ebab40a7719ae4160c42cc78ebfe029fda0",published_at:"0xc4c250fa155fb27668650fd96aeaade6a3e7c669395f147b05747a5d9eb35795",config:{global_config_id:"0x5082c7a5ee9a758025d7b0a5e8aa08b56625c7cd535b8909d2b7993991e229cc",rewarder_manager_id:"0xe789e092dbd9dceadbe89350c4761a6f2e11647aab97f09746a01b151926cc0e",rewarder_manager_handle:"0x7e7dd42392b5d82564dc9ad5093a111c5f0598cc9f806cff257d7dacb71f7837",admin_cap_id:"0x4ec248bca2d1fc05f39fd7491ab490464a46d128624caa4d3c2a66d957ef40b0"}},limit_order:{package_id:"0xc65bc51d2bc2fdbce8c701f8d812da80fb37dba9cdf97ce38f60ab18c5202b17",published_at:"0xc65bc51d2bc2fdbce8c701f8d812da80fb37dba9cdf97ce38f60ab18c5202b17",config:{rate_orders_indexer_id:"0xeaa7dc3a4b70c14b434aed2cef0bdd272a781c630ea3c54c25fa53c72fb3cf96",rate_orders_indexer_handle:"0x62eea7ce7be125e6b43fac6158d0ac8a6b0f263446d4631ad5a3629d82fef2ed",global_config_id:"0xd4d98f126233057b3a01f17adfb5bc77d7bdb0332fe982ab44c6c7a2f66443dc",token_list_handle:"0x81233cdf2165f013a57c3ab180b079e0f411483ba7f80dd6fbcb74426d2045f9",user_orders_indexer_id:"0x18ff28ae25ea50c703a0dfcc49653cc7dd7035207e26c8f86fa9e4aea49037d0",user_orders_indexer_handle:"0xbe3301b85fb0fc99deacb68c31d971837ae23a65c38680cf79a6b8562518b4c7"}},cetus_integrate2:{package_id:"0xa71067b18948d08cee0af255fa5302a8c9d0dd3c3a4cbaf3d9a4e2370cc1581c",published_at:"0xa71067b18948d08cee0af255fa5302a8c9d0dd3c3a4cbaf3d9a4e2370cc1581c"}}},pre_test:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xb8a7f7731b03d9b4b6acc21b88dbae2a96ed7e3c3e87c722bd74315b520633d6",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.mainnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"mainnet",networkTip:"Mainnet",api:"https://api-beta.cetus.zone",accountAddress:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",accountPublicKey:"0x854923b882d2451730a11690f7da896e3b497e2a47b3383e86b62173bbc1414c",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"0x5b0b1c0d7a22fd7c59dedc00f906e9cb68033d13589a739b0d18cf25e317bdd4",fraphQLUrl:"https://indexer.mainnet.aptoslabs.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.notifi.network/gql",notifiEnv:"Production",hasCreatePool:!1,hasNotifi:!0},Sui:{fullRpcUrl:"https://rpc-mainnet.suiscan.xyz:443",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"mainnet",networkTip:"Mainnet",api:"https://api-sui.cetus.zone",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x326ce9894f08dcaa337fa232641cc34db957aec9ff6614c1186bc9a7508df0bb"},token:{token_display:"0x481fb627bf18bc93c02c41ada3cc8b574744ef23c9d5e3136637ae3076e71562",config:{coin_registry_id:"0xe0b8cb7e56d465965cac5c5fe26cba558de35d88b9ec712c40f131f72c600151",pool_registry_id:"0xab40481f926e686455edf819b4c6485fbbf147a42cf3b95f72ed88c94577e67a",coin_list_owner:"0x1f6510ee7d8e2b39261bad012f0be0adbecfd75199450b7cbf28efab42dad083",pool_list_owner:"0x6de133b609ea815e1f6a4d50785b798b134f567ec1f4ee113ae73f6900b4012d"}},clmm:{clmm_display:"0x1eabed72c53feb3805120a081dc15963c204dc8d091542592abaf7a35689b2fb",clmm_router:"0x780e590a9354f5bcb429af4578c742aaa0ee20ab942bb2bbd161fbde4b64b08c",config:{pools_id:"0xf699e7f2276f5c9a75944b37a0c5b5d9ddfd2471bf6242483b03ab2887d198d0",global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b"}},launchpad:{ido_display:"0x68aac2d6a88bc1e868c48ee99918b71373877308f7e63cb22ac1971cad9d6e67",ido_router:"0x68aac2d6a88bc1e868c48ee99918b71373877308f7e63cb22ac1971cad9d6e67",config_display:"0xc9b958492e4be73e0af4daa48101bc7ab2a7ab7c67585938ea3535929fc193fa",config:{pools_id:"0x7b96aea4d695996635265e2cc41d5c5f5c4cd70f36763e41b2abf2fa1eff866f",admin_cap_id:"0x342f4b272ff5abcaacc770a5972728b154a5e74835fa36b2340ad94895184acb",config_cap_id:"0xef2a813b8c1bbaf9470fff7df0fd0febebdc6e2bbd3d7bf9a917734af7893428",config_pools_id:"0x04b6e8de80f325bdf5963dc54f324c3319b471f2f93163ebc982bee0d9b38336"}},xcetus:{xcetus_display:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",xcetus_router:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",dividends_display:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",dividends_router:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",cetus_faucet:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",config:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49",dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5"}},hasCreatePool:!1,hasNotifi:!1}},testnet_external:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xce854db9e3d7ae088359dbc54e2d425370c86a010b7656a272019abd9abf5b5a",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.testnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"testnet",networkTip:"Testnet",api:"https://api.devcetus.com",accountAddress:"0x251dda55e5071be8c761c8a99d7af559ccb6ccc52ad3f945712d3ae8b87c35e0",accountPublicKey:"0x40b00ab4323dddef193e9fef41830a96456a8b875c4e5cb5a4e666d9a75fed51",ammSite:"https://test-cetus.netlify.app",newPositionAddress:"0x3904fc6d0dcb6e1937a6aced4597ec383afc752676d89f1d59b3d30b959fe161",fraphQLUrl:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.dev.notifi.network/gql",notifiEnv:"Development",hasCreatePool:!0,hasNotifi:!0},Sui:{fullRpcUrl:"https://rpc-testnet.suiscan.xyz:443",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",api:"https://api-sui-testnet-ex.devcetus.com",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x5f9d2fb717ba2433f7723cf90bdbf90667001104915001d0af0cccb52b67c1e8"},token:{token_display:"0xc7c40602f81eee198f472e14c87cb9c7186496064adba06cef1768c8b1785512",config:{coin_registry_id:"0xde9a5123749136ca9fe05b88777e322f2161fe4aa71e9c575d5e27a31b815d40",pool_registry_id:"0x7b7b399344838363ec96611f133c77b98042404559e326fd289885b88848a3c5",coin_list_owner:"0xc93e168a9361b5443fef27dbbb95a023337c6bfd082fdd920d658f4f9147d801",pool_list_owner:"0x36d796de9529007373fd2e34311511a8ca4eaef2bf7ea65f65ab68a1bc1de092"}},clmm:{clmm_display:"0x837dddad95c6741474cde3e414a2eebccbeae81d0b378f193d00381bdaf0da62",clmm_router:"0x32ba8c0298964e26161b3b44375ac39eeab6b29207e00c5f44368426096eb902",config:{pools_id:"0xc8407fc5dfec8d7b7014ee4d244dbe4eb456bfa6a7878e88c9d4bc947b2c2d87",global_config_id:"0x43e2925f7c5bed04b612cc66c53a850e280a46704ce12cd2f25420b537e23f9d",global_vault_id:"0x435c9725c4026206002a5a4004762316a53891f21a10c695311074482e52757e"}},launchpad:{ido_display:"",ido_router:"",lock_display:"",lock_router:"",config:{pools_id:"",admin_cap_id:"",config_cap_id:"",lock_manager_id:""}},xcetus:{xcetus_display:"",xcetus_router:"",dividends_display:"",dividends_router:"",cetus_faucet:"",config:{xcetus_manager_id:"",lock_manager_id:"",dividend_manager_id:""}},hasCreatePool:!0,hasNotifi:!1}},local:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xce854db9e3d7ae088359dbc54e2d425370c86a010b7656a272019abd9abf5b5a",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.testnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"testnet",networkTip:"Testnet",api:"https://api.devcetus.com",accountAddress:"0x251dda55e5071be8c761c8a99d7af559ccb6ccc52ad3f945712d3ae8b87c35e0",accountPublicKey:"0x40b00ab4323dddef193e9fef41830a96456a8b875c4e5cb5a4e666d9a75fed51",ammSite:"https://test-cetus.netlify.app",newPositionAddress:"0x3904fc6d0dcb6e1937a6aced4597ec383afc752676d89f1d59b3d30b959fe161",fraphQLUrl:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",hasCreatePool:!0,hasNotifi:!0},Sui:{fullRpcUrl:"http://192.168.1.41:9000",faucetURL:"http://192.168.1.41:9123/gas",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",api:"https://api-sui-testnet.devcetus.com",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",faucet_router:"0x61353a797a3d7f9c5522641bf824d730272260bcf66c7fcaf36a50243418caca",simulationAccount:{address:"0x5f9d2fb717ba2433f7723cf90bdbf90667001104915001d0af0cccb52b67c1e8"},token:{token_display:"",config:{coin_registry_id:"",pool_registry_id:"",coin_list_owner:"",pool_list_owner:""}},clmm:{clmm_display:"0x33e0056fdbd9444c20302ce4141eaf5ec66fe864b62d8c0e3ee3bb1d138ee445",clmm_router:"0x306efa18b1a70af5007aaccd3b228e4f97f5596bf20c3a2d7b6321dfe8e30765",config:{pools_id:"0xae24565ffac1eb9f2fcb03b1dc21c21d1ce2a992d13a1a58e51d28293249d21c",global_config_id:"0xb8bd0870a43a75c55690a8ffbc13682ae7e0a8254348524963657474342c20b4",global_vault_id:"0x639c2d2d068df99602a9ef014b000df26b0312c07cb06065992cac911e1c376d"}},launchpad:{ido_display:"0x035fb17bbae20f35d476ea93f4a3d0b8e8da4c63d4a8598b647dfa4931f35774",ido_router:"0x035fb17bbae20f35d476ea93f4a3d0b8e8da4c63d4a8598b647dfa4931f35774",lock_display:"0x10df8c3eee9ea7a459a1f8417ced9c2e0f3eb9ff62862e0f42eced2763b94f42",lock_router:"0x10df8c3eee9ea7a459a1f8417ced9c2e0f3eb9ff62862e0f42eced2763b94f42",config:{pools_id:"0x1b3a62d143ac08dee37670eea58e714ab7cd501a396060bd2caf7a77fee88dfa",admin_cap_id:"0x0cb7daf2484c38e4a183813b8ad51b6ed664d135b7897e72be095768c90df911",config_cap_id:"0x40f0cee72c6e86d5a7b0e013a18cad8bf567bb70075b4a0f1c63eab8953a3dfd",lock_manager_id:"0x23954bf7d5c7880b50a369ee439a11ab771b7e0079a042645c4920d5e618b898"}},xwhale:{xwhale_display:"0x590775726e4c07f24a8a6cd14e2a05cb719b2c09690bbce2d9b251b2ff6fa941",xwhale_router:"0x590775726e4c07f24a8a6cd14e2a05cb719b2c09690bbce2d9b251b2ff6fa941",dividends_display:"0x6dc245017f96ebba55486f0c4fcf8f58c48f30980f48a3f27e1c98672cb253b9",dividends_router:"0x6dc245017f96ebba55486f0c4fcf8f58c48f30980f48a3f27e1c98672cb253b9",booster_display:"",booster_router:"",whale_faucet:"0xb0845bcf2f985e6ea5b401218598212e11f915a0c4d7afd1ed6e04b83e7d6310",config:{xwhale_manager_id:"0x46b2a60ee784180534ea2a6568ca510b488ea190f822cab8a9d38fb01b8e6421",lock_manager_id:"0x253e34da0542134e39b3c5dade1f5437d1b6ef6e90adfaa014186b456b6d7ffd",dividend_manager_id:"0xced885ada26d894f30efc236303caa500c994a25db5b18ee01e7664729cb983c"}},hasCreatePool:!0,hasNotifi:!1},Sui2:{cetusClmm:"0x296e6ae7204fc10eaf8f08e4b4faf4ddd4ad001c",cetusIntegrate:"0x9cce89ed875c398dde64a5ccdfbebb6140b13b0f",integerMate:"0x3a1a096b4d2598eb3958c91fc8787c3e62f40770",swapPartner:"0xa420bad83346a8cd05c98fff988d90ef8d149b4c",TokenDeployer:"0x7bfe88372b99abb54609b58fee652b97a162cbcf",faucetObjectId:"0x6740d70296035d0345bed636a820af129f6ed422",initEventConfig:{initFactoryEvent:{pools_id:"0x526554aec8e229cc79f2a3e375813f6be92aabf8"},initPartnerEvent:{partners_id:"0x9bd1abed942c804d11a3ebb224fef4c8abda4dbb"},initConfigEvent:{admin_cap_id:"0x1b585be50405d80698ee1cffbde0e884944b64ce",global_config_id:"0x7b357faee524eda340b9924a828814eab7c107f7",protocol_fee_claim_cap_id:"0xfec3fa3d8176952d584213d9e286bbbb1717af02"}},tokenConfig:{coin_registry_id:"0x3f9f6609fc99440e41c7e178ff1250274170c889",pool_registry_id:"0x699cff0b7e44e565908b4acfa482022cfbfc16c1",coin_list_owner:"0x7634802da06a3a4c8e4aa8c425cfd83406670e34",pool_list_owner:"0xa4e177fe96f33a7ec7f2aa14ad5387cac7c7cc21"},rpcUrl:"https://fullnode.testnet.sui.io",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",api:"https://api.devcetus.com",simulationAccount:"0x3f6cfdcf7bc19e86693d3d0f261f56b6e8caff0d",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"0xbd1a8bd64216a4b102dc45a926bde4eb212108ae",currentChainTokenAddress:"0x2::sui::SUI"}},dev:{Aptos:{liquidswapDeployer:"0x80d6b00867cafcd40f9db3aa570ad1196f11ec5f57506799aec2a2940651fd37",faucetObjectId:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29",fetcher:"0x3ac260dc3ba7d7173e5ad8ce9a5d0ee62184e95425343cfd287f6e53dc52a4bd",clmmIntegrate:"0x3ac260dc3ba7d7173e5ad8ce9a5d0ee62184e95425343cfd287f6e53dc52a4bd",TokenDeployer:"0xc50b243a7180dfad9afd7dff8451c7b16cf27a92b6816f521b1f3c6d0c5397e3",IntegerMate:"0x45ba3bca9e81591a852df423105ecf2978dc03a5c0223033669bb889656a94a8",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.devnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"devnet",networkTip:"Devnet",api:"https://api.devcetus.com",accountAddress:"0x251dda55e5071be8c761c8a99d7af559ccb6ccc52ad3f945712d3ae8b87c35e0",accountPublicKey:"0x40b00ab4323dddef193e9fef41830a96456a8b875c4e5cb5a4e666d9a75fed51",ammSite:"https://test-cetus.netlify.app",newPositionAddress:"0x3904fc6d0dcb6e1937a6aced4597ec383afc752676d89f1d59b3d30b959fe161",fraphQLUrl:"https://indexer-devnet.staging.gcp.aptosdev.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",hasCreatePool:!0,hasNotifi:!0},Sui:{liquidswapDeployer:"0x2b8f54bf724fa62789299569210d6c94758dd636",globalPauseStatusObjectId:"0x877cd08c02a2faa110a020f4f203304b114d76d2",faucetObjectId:"0x61df0e8caaf7b241d137fdc97906e3ca6bd68cca",rpcUrl:"https://fullnode.testnet.sui.io",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",ammSite:"https://cetus-pre.netlify.app",api:"https://api.devcetus.zone",currentChainTokenAddress:"0x2::sui::SUI",hasCreatePool:!0,hasNotifi:!1}}},Z_={...al[Va]},Hr=5,Q_=Pd("wallet",{state:()=>({loading:!1,autoRefreshTime:Hr,countdown:0,connected:!1,aptosConnected:!1,suiConnected:!1,address:"",aptosAddress:"",suiAddress:"",platform:"",isShowWalletModal:!1,walletName:"",aptosWalletName:"",suiWalletName:"",currentWallet:null,aptosCurrentWallet:null,suiCurrentWallet:null,walletIcon:"",aptosWalletIcon:"",suiWalletIcon:"",switchWallet:!1,assets:{},walletIconName:"",aptosWalletIconName:"",suiWalletIconName:"",walletNetwork:"",isShowWalletCard:"",accountObj:null,firstGetAssetLoading:!1}),actions:{setLoading(e){e&&(this.countdown=Hr),this.loading=e,e||(this.countdown=0)},setCountdown(e){this.countdown=e},setWalletStatus(){this.connected=!0},setSwitchWallet(e){this.switchWallet=e},setIsShowWalletModal(e){this.isShowWalletModal=e},setWalletInfo(e,t){this.connected=e,this.platform=t},setCurrentWallet(e){e.wallet?(this.currentWallet=e.wallet,this.connected=e.isConnected,this.address=e.account,this.walletIcon=e.icon,this.walletName=e.wallet.name,e.platform==="Sui"?(this.suiCurrentWallet=e.wallet,this.suiConnected=e.isConnected,this.suiAddress=e.account,this.suiWalletIcon=e.icon,this.suiWalletName=e.wallet.name,this.walletName=e.walletName,this.accountObj=e.accountObj):(this.aptosCurrentWallet=e.wallet,this.aptosConnected=e.isConnected,this.aptosAddress=e.account,this.aptosWalletIcon=e.icon,this.aptosWalletName=e.wallet.name)):(this.currentWallet=null,this.connected=!1,this.address="",this.walletIcon="",this.walletName="",e.platform==="Sui"?(this.suiCurrentWallet=null,this.suiConnected=!1,this.suiAddress="",this.suiWalletIcon="",this.suiWalletName="",this.accountObj=null):(this.aptosCurrentWallet=null,this.aptosConnected=!1,this.aptosAddress="",this.aptosWalletIcon="",this.aptosWalletName=""))},setAssets(e){this.assets=e},setWalletIconName(e){this.walletIconName=e,localStorage.setItem("walletIconName",e)},setNetwork(e){this.walletNetwork=e,console.log(this.walletNetwork,"====>this.walletNetwork")},setIsShowWalletCard(e){this.isShowWalletCard=e},setFirstGetAssetLoading(e){this.firstGetAssetLoading=e}}});function gi(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function cl(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function ko(e,...t){if(!cl(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function Y_(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");gi(e.outputLen),gi(e.blockLen)}function Jr(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function dl(e,t){ko(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const is=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ao=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),e0=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),t0=(e,t)=>e<<32-t|e>>>t,Pn=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,za=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255,fn=Pn?e=>e:e=>za(e);function Kn(e){for(let t=0;t<e.length;t++)e[t]=za(e[t])}const ll=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function n0(e){ko(e);let t="";for(let n=0;n<e.length;n++)t+=ll[e[n]];return t}const cn={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Zr(e){if(e>=cn._0&&e<=cn._9)return e-cn._0;if(e>=cn._A&&e<=cn._F)return e-(cn._A-10);if(e>=cn._a&&e<=cn._f)return e-(cn._a-10)}function i0(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const i=new Uint8Array(n);for(let o=0,s=0;o<n;o++,s+=2){const r=Zr(e.charCodeAt(s)),a=Zr(e.charCodeAt(s+1));if(r===void 0||a===void 0){const c=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}i[o]=r*16+a}return i}function ul(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Yn(e){return typeof e=="string"&&(e=ul(e)),ko(e),e}function o0(...e){let t=0;for(let i=0;i<e.length;i++){const o=e[i];ko(o),t+=o.length}const n=new Uint8Array(t);for(let i=0,o=0;i<e.length;i++){const s=e[i];n.set(s,o),o+=s.length}return n}class fl{clone(){return this._cloneInto()}}const hl={}.toString;function s0(e,t){if(t!==void 0&&hl.call(t)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(e,t)}function r0(e){const t=i=>e().update(Yn(i)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function pl(e){const t=(i,o)=>e(o).update(Yn(i)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=i=>e(i),t}function a0(e=32){if(is&&typeof is.getRandomValues=="function")return is.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}const _l=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]);class bl extends fl{constructor(t,n,i={},o,s,r){if(super(),this.blockLen=t,this.outputLen=n,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,gi(t),gi(n),gi(o),n<0||n>o)throw new Error("outputLen bigger than keyLen");if(i.key!==void 0&&(i.key.length<1||i.key.length>o))throw new Error(`key must be up 1..${o} byte long or undefined`);if(i.salt!==void 0&&i.salt.length!==s)throw new Error(`salt must be ${s} byte long or undefined`);if(i.personalization!==void 0&&i.personalization.length!==r)throw new Error(`personalization must be ${r} byte long or undefined`);this.buffer32=ao(this.buffer=new Uint8Array(t))}update(t){Jr(this);const{blockLen:n,buffer:i,buffer32:o}=this;t=Yn(t);const s=t.length,r=t.byteOffset,a=t.buffer;for(let c=0;c<s;){this.pos===n&&(Pn||Kn(o),this.compress(o,0,!1),Pn||Kn(o),this.pos=0);const d=Math.min(n-this.pos,s-c),l=r+c;if(d===n&&!(l%4)&&c+d<s){const h=new Uint32Array(a,l,Math.floor((s-c)/4));Pn||Kn(h);for(let _=0;c+n<s;_+=o.length,c+=n)this.length+=n,this.compress(h,_,!1);Pn||Kn(h);continue}i.set(t.subarray(c,c+d),this.pos),this.pos+=d,this.length+=d,c+=d}return this}digestInto(t){Jr(this),dl(t,this);const{pos:n,buffer32:i}=this;this.finished=!0,this.buffer.subarray(n).fill(0),Pn||Kn(i),this.compress(i,0,!0),Pn||Kn(i);const o=ao(t);this.get().forEach((s,r)=>o[r]=fn(s))}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const i=t.slice(0,n);return this.destroy(),i}_cloneInto(t){const{buffer:n,length:i,finished:o,destroyed:s,outputLen:r,pos:a}=this;return t||(t=new this.constructor({dkLen:r})),t.set(...this.get()),t.length=i,t.finished=o,t.destroyed=s,t.outputLen=r,t.buffer.set(n),t.pos=a,t}}const Li=BigInt(2**32-1),Os=BigInt(32);function Ga(e,t=!1){return t?{h:Number(e&Li),l:Number(e>>Os&Li)}:{h:Number(e>>Os&Li)|0,l:Number(e&Li)|0}}function ml(e,t=!1){let n=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let o=0;o<e.length;o++){const{h:s,l:r}=Ga(e[o],t);[n[o],i[o]]=[s,r]}return[n,i]}const gl=(e,t)=>BigInt(e>>>0)<<Os|BigInt(t>>>0),yl=(e,t,n)=>e>>>n,wl=(e,t,n)=>e<<32-n|t>>>n,vl=(e,t,n)=>e>>>n|t<<32-n,kl=(e,t,n)=>e<<32-n|t>>>n,Cl=(e,t,n)=>e<<64-n|t>>>n-32,Al=(e,t,n)=>e>>>n-32|t<<64-n,Sl=(e,t)=>t,Tl=(e,t)=>e,xl=(e,t,n)=>e<<n|t>>>32-n,Il=(e,t,n)=>t<<n|e>>>32-n,Ol=(e,t,n)=>t<<n-32|e>>>64-n,Pl=(e,t,n)=>e<<n-32|t>>>64-n;function jl(e,t,n,i){const o=(t>>>0)+(i>>>0);return{h:e+n+(o/2**32|0)|0,l:o|0}}const Ml=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),El=(e,t,n,i)=>t+n+i+(e/2**32|0)|0,Bl=(e,t,n,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0),Rl=(e,t,n,i,o)=>t+n+i+o+(e/2**32|0)|0,Dl=(e,t,n,i,o)=>(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0)+(o>>>0),Nl=(e,t,n,i,o,s)=>t+n+i+o+s+(e/2**32|0)|0,ql={fromBig:Ga,split:ml,toBig:gl,shrSH:yl,shrSL:wl,rotrSH:vl,rotrSL:kl,rotrBH:Cl,rotrBL:Al,rotr32H:Sl,rotr32L:Tl,rotlSH:xl,rotlSL:Il,rotlBH:Ol,rotlBL:Pl,add:jl,add3L:Ml,add3H:El,add4L:Bl,add4H:Rl,add5H:Nl,add5L:Dl},Pt=ql,bt=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),K=new Uint32Array(32);function yn(e,t,n,i,o,s){const r=o[s],a=o[s+1];let c=K[2*e],d=K[2*e+1],l=K[2*t],h=K[2*t+1],_=K[2*n],g=K[2*n+1],C=K[2*i],I=K[2*i+1],O=Pt.add3L(c,l,r);d=Pt.add3H(O,d,h,a),c=O|0,{Dh:I,Dl:C}={Dh:I^d,Dl:C^c},{Dh:I,Dl:C}={Dh:Pt.rotr32H(I,C),Dl:Pt.rotr32L(I,C)},{h:g,l:_}=Pt.add(g,_,I,C),{Bh:h,Bl:l}={Bh:h^g,Bl:l^_},{Bh:h,Bl:l}={Bh:Pt.rotrSH(h,l,24),Bl:Pt.rotrSL(h,l,24)},K[2*e]=c,K[2*e+1]=d,K[2*t]=l,K[2*t+1]=h,K[2*n]=_,K[2*n+1]=g,K[2*i]=C,K[2*i+1]=I}function wn(e,t,n,i,o,s){const r=o[s],a=o[s+1];let c=K[2*e],d=K[2*e+1],l=K[2*t],h=K[2*t+1],_=K[2*n],g=K[2*n+1],C=K[2*i],I=K[2*i+1],O=Pt.add3L(c,l,r);d=Pt.add3H(O,d,h,a),c=O|0,{Dh:I,Dl:C}={Dh:I^d,Dl:C^c},{Dh:I,Dl:C}={Dh:Pt.rotrSH(I,C,16),Dl:Pt.rotrSL(I,C,16)},{h:g,l:_}=Pt.add(g,_,I,C),{Bh:h,Bl:l}={Bh:h^g,Bl:l^_},{Bh:h,Bl:l}={Bh:Pt.rotrBH(h,l,63),Bl:Pt.rotrBL(h,l,63)},K[2*e]=c,K[2*e+1]=d,K[2*t]=l,K[2*t+1]=h,K[2*n]=_,K[2*n+1]=g,K[2*i]=C,K[2*i+1]=I}class $l extends bl{constructor(t={}){super(128,t.dkLen===void 0?64:t.dkLen,t,64,16,16),this.v0l=bt[0]|0,this.v0h=bt[1]|0,this.v1l=bt[2]|0,this.v1h=bt[3]|0,this.v2l=bt[4]|0,this.v2h=bt[5]|0,this.v3l=bt[6]|0,this.v3h=bt[7]|0,this.v4l=bt[8]|0,this.v4h=bt[9]|0,this.v5l=bt[10]|0,this.v5h=bt[11]|0,this.v6l=bt[12]|0,this.v6h=bt[13]|0,this.v7l=bt[14]|0,this.v7h=bt[15]|0;const n=t.key?t.key.length:0;if(this.v0l^=this.outputLen|n<<8|65536|1<<24,t.salt){const i=ao(Yn(t.salt));this.v4l^=fn(i[0]),this.v4h^=fn(i[1]),this.v5l^=fn(i[2]),this.v5h^=fn(i[3])}if(t.personalization){const i=ao(Yn(t.personalization));this.v6l^=fn(i[0]),this.v6h^=fn(i[1]),this.v7l^=fn(i[2]),this.v7h^=fn(i[3])}if(t.key){const i=new Uint8Array(this.blockLen);i.set(Yn(t.key)),this.update(i)}}get(){let{v0l:t,v0h:n,v1l:i,v1h:o,v2l:s,v2h:r,v3l:a,v3h:c,v4l:d,v4h:l,v5l:h,v5h:_,v6l:g,v6h:C,v7l:I,v7h:O}=this;return[t,n,i,o,s,r,a,c,d,l,h,_,g,C,I,O]}set(t,n,i,o,s,r,a,c,d,l,h,_,g,C,I,O){this.v0l=t|0,this.v0h=n|0,this.v1l=i|0,this.v1h=o|0,this.v2l=s|0,this.v2h=r|0,this.v3l=a|0,this.v3h=c|0,this.v4l=d|0,this.v4h=l|0,this.v5l=h|0,this.v5h=_|0,this.v6l=g|0,this.v6h=C|0,this.v7l=I|0,this.v7h=O|0}compress(t,n,i){this.get().forEach((c,d)=>K[d]=c),K.set(bt,16);let{h:o,l:s}=Pt.fromBig(BigInt(this.length));K[24]=bt[8]^s,K[25]=bt[9]^o,i&&(K[28]=~K[28],K[29]=~K[29]);let r=0;const a=_l;for(let c=0;c<12;c++)yn(0,4,8,12,t,n+2*a[r++]),wn(0,4,8,12,t,n+2*a[r++]),yn(1,5,9,13,t,n+2*a[r++]),wn(1,5,9,13,t,n+2*a[r++]),yn(2,6,10,14,t,n+2*a[r++]),wn(2,6,10,14,t,n+2*a[r++]),yn(3,7,11,15,t,n+2*a[r++]),wn(3,7,11,15,t,n+2*a[r++]),yn(0,5,10,15,t,n+2*a[r++]),wn(0,5,10,15,t,n+2*a[r++]),yn(1,6,11,12,t,n+2*a[r++]),wn(1,6,11,12,t,n+2*a[r++]),yn(2,7,8,13,t,n+2*a[r++]),wn(2,7,8,13,t,n+2*a[r++]),yn(3,4,9,14,t,n+2*a[r++]),wn(3,4,9,14,t,n+2*a[r++]);this.v0l^=K[0]^K[16],this.v0h^=K[1]^K[17],this.v1l^=K[2]^K[18],this.v1h^=K[3]^K[19],this.v2l^=K[4]^K[20],this.v2h^=K[5]^K[21],this.v3l^=K[6]^K[22],this.v3h^=K[7]^K[23],this.v4l^=K[8]^K[24],this.v4h^=K[9]^K[25],this.v5l^=K[10]^K[26],this.v5h^=K[11]^K[27],this.v6l^=K[12]^K[28],this.v6h^=K[13]^K[29],this.v7l^=K[14]^K[30],this.v7h^=K[15]^K[31],K.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Fl=pl(e=>new $l(e));function Ll(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let d=0;d<t.length;d++)t[d]=255;for(let d=0;d<e.length;d++){const l=e.charAt(d),h=l.charCodeAt(0);if(t[h]!==255)throw new TypeError(l+" is ambiguous");t[h]=d}const n=e.length,i=e.charAt(0),o=Math.log(n)/Math.log(256),s=Math.log(256)/Math.log(n);function r(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";let l=0,h=0,_=0;const g=d.length;for(;_!==g&&d[_]===0;)_++,l++;const C=(g-_)*s+1>>>0,I=new Uint8Array(C);for(;_!==g;){let j=d[_],B=0;for(let q=C-1;(j!==0||B<h)&&q!==-1;q--,B++)j+=256*I[q]>>>0,I[q]=j%n>>>0,j=j/n>>>0;if(j!==0)throw new Error("Non-zero carry");h=B,_++}let O=C-h;for(;O!==C&&I[O]===0;)O++;let M=i.repeat(l);for(;O<C;++O)M+=e.charAt(I[O]);return M}function a(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;let l=0,h=0,_=0;for(;d[l]===i;)h++,l++;const g=(d.length-l)*o+1>>>0,C=new Uint8Array(g);for(;d[l];){let j=t[d.charCodeAt(l)];if(j===255)return;let B=0;for(let q=g-1;(j!==0||B<_)&&q!==-1;q--,B++)j+=n*C[q]>>>0,C[q]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");_=B,l++}let I=g-_;for(;I!==g&&C[I]===0;)I++;const O=new Uint8Array(h+(g-I));let M=h;for(;I!==g;)O[M++]=C[I++];return O}function c(d){const l=a(d);if(l)return l;throw new Error("Non-base"+n+" character")}return{encode:r,decodeUnsafe:a,decode:c}}var Ul="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Wa=Ll(Ul),Co=e=>Wa.encode(e),Ii=e=>Wa.decode(e);function rn(e){return Uint8Array.from(atob(e),t=>t.charCodeAt(0))}const os=8192;function xt(e){if(e.length<os)return btoa(String.fromCharCode(...e));let t="";for(var n=0;n<e.length;n+=os){const i=e.slice(n,n+os);t+=String.fromCharCode(...i)}return btoa(t)}function Xa(e){var o;const t=e.startsWith("0x")?e.slice(2):e,i=((o=(t.length%2===0?t:`0${t}}`).match(/.{2}/g))==null?void 0:o.map(s=>parseInt(s,16)))??[];return Uint8Array.from(i)}function Oi(e){return e.reduce((t,n)=>t+n.toString(16).padStart(2,"0"),"")}function Qs(e){let t=[],n=0;if(e===0)return[0];for(;e>0;)t[n]=e&127,(e>>=7)&&(t[n]|=128),n+=1;return t}function Kl(e){let t=0,n=0,i=0;for(;;){let o=e[i];if(i+=1,t|=(o&127)<<n,!(o&128))break;n+=7}return{value:t,length:i}}class Vl{constructor(t){this.bytePosition=0,this.dataView=new DataView(t.buffer)}shift(t){return this.bytePosition+=t,this}read8(){let t=this.dataView.getUint8(this.bytePosition);return this.shift(1),t}read16(){let t=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),t}read32(){let t=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),t}read64(){let t=this.read32(),i=this.read32().toString(16)+t.toString(16).padStart(8,"0");return BigInt("0x"+i).toString(10)}read128(){let t=BigInt(this.read64()),i=BigInt(this.read64()).toString(16)+t.toString(16).padStart(16,"0");return BigInt("0x"+i).toString(10)}read256(){let t=BigInt(this.read128()),i=BigInt(this.read128()).toString(16)+t.toString(16).padStart(32,"0");return BigInt("0x"+i).toString(10)}readBytes(t){let n=this.bytePosition+this.dataView.byteOffset,i=new Uint8Array(this.dataView.buffer,n,t);return this.shift(t),i}readULEB(){let t=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,t),{value:i,length:o}=Kl(n);return this.shift(o),i}readVec(t){let n=this.readULEB(),i=[];for(let o=0;o<n;o++)i.push(t(this,o,n));return i}}function zl(e,t){switch(t){case"base58":return Co(e);case"base64":return xt(e);case"hex":return Oi(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function Ha(e,t=["<",">"]){const[n,i]=t,o=[];let s="",r=0;for(let a=0;a<e.length;a++){const c=e[a];if(c===n&&r++,c===i&&r--,r===0&&c===","){o.push(s.trim()),s="";continue}s+=c}return o.push(s.trim()),o}class Gl{constructor({initialSize:t=1024,maxSize:n=1/0,allocateSize:i=1024}={}){this.bytePosition=0,this.size=t,this.maxSize=n,this.allocateSize=i,this.dataView=new DataView(new ArrayBuffer(t))}ensureSizeOrGrow(t){const n=this.bytePosition+t;if(n>this.size){const i=Math.min(this.maxSize,this.size+this.allocateSize);if(n>i)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${n}`);this.size=i;const o=new ArrayBuffer(this.size);new Uint8Array(o).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(o)}}shift(t){return this.bytePosition+=t,this}write8(t){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(t)),this.shift(1)}write16(t){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(t),!0),this.shift(2)}write32(t){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(t),!0),this.shift(4)}write64(t){return ss(BigInt(t),8).forEach(n=>this.write8(n)),this}write128(t){return ss(BigInt(t),16).forEach(n=>this.write8(n)),this}write256(t){return ss(BigInt(t),32).forEach(n=>this.write8(n)),this}writeULEB(t){return Qs(t).forEach(n=>this.write8(n)),this}writeVec(t,n){return this.writeULEB(t.length),Array.from(t).forEach((i,o)=>n(this,i,o,t.length)),this}*[Symbol.iterator](){for(let t=0;t<this.bytePosition;t++)yield this.dataView.getUint8(t);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(t){return zl(this.toBytes(),t)}}function ss(e,t){let n=new Uint8Array(t),i=0;for(;e>0;)n[i]=Number(e%BigInt(256)),e=e/BigInt(256),i+=1;return n}var Ja=e=>{throw TypeError(e)},Za=(e,t,n)=>t.has(e)||Ja("Cannot "+n),Gt=(e,t,n)=>(Za(e,t,"read from private field"),n?n.call(e):t.get(e)),co=(e,t,n)=>t.has(e)?Ja("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),lo=(e,t,n,i)=>(Za(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),Wn,_i,Yi,An;const Wl=class Qa{constructor(t){co(this,Wn),co(this,_i),this.name=t.name,this.read=t.read,this.serializedSize=t.serializedSize??(()=>null),lo(this,Wn,t.write),lo(this,_i,t.serialize??((n,i)=>{const o=new Gl({initialSize:this.serializedSize(n)??void 0,...i});return Gt(this,Wn).call(this,n,o),o.toBytes()})),this.validate=t.validate??(()=>{})}write(t,n){this.validate(t),Gt(this,Wn).call(this,t,n)}serialize(t,n){return this.validate(t),new Xl(this,Gt(this,_i).call(this,t,n))}parse(t){const n=new Vl(t);return this.read(n)}fromHex(t){return this.parse(Xa(t))}fromBase58(t){return this.parse(Ii(t))}fromBase64(t){return this.parse(rn(t))}transform({name:t,input:n,output:i,validate:o}){return new Qa({name:t??this.name,read:s=>i(this.read(s)),write:(s,r)=>Gt(this,Wn).call(this,n(s),r),serializedSize:s=>this.serializedSize(n(s)),serialize:(s,r)=>Gt(this,_i).call(this,n(s),r),validate:s=>{o==null||o(s),this.validate(n(s))}})}};Wn=new WeakMap;_i=new WeakMap;let bn=Wl;const Ya=Symbol.for("@mysten/serialized-bcs");function Ys(e){return!!e&&typeof e=="object"&&e[Ya]===!0}class Xl{constructor(t,n){co(this,Yi),co(this,An),lo(this,Yi,t),lo(this,An,n)}get[Ya](){return!0}toBytes(){return Gt(this,An)}toHex(){return Oi(Gt(this,An))}toBase64(){return xt(Gt(this,An))}toBase58(){return Co(Gt(this,An))}parse(){return Gt(this,Yi).parse(Gt(this,An))}}Yi=new WeakMap;An=new WeakMap;function uo({size:e,...t}){return new bn({...t,serializedSize:()=>e})}function rs({readMethod:e,writeMethod:t,...n}){return uo({...n,read:i=>i[e](),write:(i,o)=>o[t](i),validate:i=>{var o;if(i<0||i>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${i}. Expected value in range 0-${n.maxValue}`);(o=n.validate)==null||o.call(n,i)}})}function as({readMethod:e,writeMethod:t,...n}){return uo({...n,read:i=>i[e](),write:(i,o)=>o[t](BigInt(i)),validate:i=>{var s;const o=BigInt(i);if(o<0||o>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${o}. Expected value in range 0-${n.maxValue}`);(s=n.validate)==null||s.call(n,o)}})}function Hl({serialize:e,...t}){const n=new bn({...t,serialize:e,write:(i,o)=>{for(const s of n.serialize(i).toBytes())o.write8(s)}});return n}function Jl({toBytes:e,fromBytes:t,...n}){return new bn({...n,read:i=>{const o=i.readULEB(),s=i.readBytes(o);return t(s)},write:(i,o)=>{const s=e(i);o.writeULEB(s.length);for(let r=0;r<s.length;r++)o.write8(s[r])},serialize:i=>{const o=e(i),s=Qs(o.length),r=new Uint8Array(s.length+o.length);return r.set(s,0),r.set(o,s.length),r},validate:i=>{var o;if(typeof i!="string")throw new TypeError(`Invalid ${n.name} value: ${i}. Expected string`);(o=n.validate)==null||o.call(n,i)}})}function Zl(e){let t=null;function n(){return t||(t=e()),t}return new bn({name:"lazy",read:i=>n().read(i),serializedSize:i=>n().serializedSize(i),write:(i,o)=>n().write(i,o),serialize:(i,o)=>n().serialize(i,o).toBytes()})}const T={u8(e){return rs({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...e})},u16(e){return rs({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...e})},u32(e){return rs({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...e})},u64(e){return as({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...e})},u128(e){return as({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...e})},u256(e){return as({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...e})},bool(e){return uo({name:"bool",size:1,read:t=>t.read8()===1,write:(t,n)=>n.write8(t?1:0),...e,validate:t=>{var n;if((n=e==null?void 0:e.validate)==null||n.call(e,t),typeof t!="boolean")throw new TypeError(`Expected boolean, found ${typeof t}`)}})},uleb128(e){return Hl({name:"uleb128",read:t=>t.readULEB(),serialize:t=>Uint8Array.from(Qs(t)),...e})},bytes(e,t){return uo({name:`bytes[${e}]`,size:e,read:n=>n.readBytes(e),write:(n,i)=>{for(let o=0;o<e;o++)i.write8(n[o]??0)},...t,validate:n=>{var i;if((i=t==null?void 0:t.validate)==null||i.call(t,n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==e)throw new TypeError(`Expected array of length ${e}, found ${n.length}`)}})},string(e){return Jl({name:"string",toBytes:t=>new TextEncoder().encode(t),fromBytes:t=>new TextDecoder().decode(t),...e})},fixedArray(e,t,n){return new bn({name:`${t.name}[${e}]`,read:i=>{const o=new Array(e);for(let s=0;s<e;s++)o[s]=t.read(i);return o},write:(i,o)=>{for(const s of i)t.write(s,o)},...n,validate:i=>{var o;if((o=n==null?void 0:n.validate)==null||o.call(n,i),!i||typeof i!="object"||!("length"in i))throw new TypeError(`Expected array, found ${typeof i}`);if(i.length!==e)throw new TypeError(`Expected array of length ${e}, found ${i.length}`)}})},option(e){return T.enum(`Option<${e.name}>`,{None:null,Some:e}).transform({input:t=>t==null?{None:!0}:{Some:t},output:t=>t.$kind==="Some"?t.Some:null})},vector(e,t){return new bn({name:`vector<${e.name}>`,read:n=>{const i=n.readULEB(),o=new Array(i);for(let s=0;s<i;s++)o[s]=e.read(n);return o},write:(n,i)=>{i.writeULEB(n.length);for(const o of n)e.write(o,i)},...t,validate:n=>{var i;if((i=t==null?void 0:t.validate)==null||i.call(t,n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`)}})},tuple(e,t){return new bn({name:`(${e.map(n=>n.name).join(", ")})`,serializedSize:n=>{let i=0;for(let o=0;o<e.length;o++){const s=e[o].serializedSize(n[o]);if(s==null)return null;i+=s}return i},read:n=>{const i=[];for(const o of e)i.push(o.read(n));return i},write:(n,i)=>{for(let o=0;o<e.length;o++)e[o].write(n[o],i)},...t,validate:n=>{var i;if((i=t==null?void 0:t.validate)==null||i.call(t,n),!Array.isArray(n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==e.length)throw new TypeError(`Expected array of length ${e.length}, found ${n.length}`)}})},struct(e,t,n){const i=Object.entries(t);return new bn({name:e,serializedSize:o=>{let s=0;for(const[r,a]of i){const c=a.serializedSize(o[r]);if(c==null)return null;s+=c}return s},read:o=>{const s={};for(const[r,a]of i)s[r]=a.read(o);return s},write:(o,s)=>{for(const[r,a]of i)a.write(o[r],s)},...n,validate:o=>{var s;if((s=n==null?void 0:n.validate)==null||s.call(n,o),typeof o!="object"||o==null)throw new TypeError(`Expected object, found ${typeof o}`)}})},enum(e,t,n){const i=Object.entries(t);return new bn({name:e,read:o=>{const s=o.readULEB(),r=i[s];if(!r)throw new TypeError(`Unknown value ${s} for enum ${e}`);const[a,c]=r;return{[a]:(c==null?void 0:c.read(o))??!0,$kind:a}},write:(o,s)=>{const[r,a]=Object.entries(o).filter(([c])=>Object.hasOwn(t,c))[0];for(let c=0;c<i.length;c++){const[d,l]=i[c];if(d===r){s.writeULEB(c),l==null||l.write(a,s);return}}},...n,validate:o=>{var a;if((a=n==null?void 0:n.validate)==null||a.call(n,o),typeof o!="object"||o==null)throw new TypeError(`Expected object, found ${typeof o}`);const s=Object.keys(o).filter(c=>o[c]!==void 0&&Object.hasOwn(t,c));if(s.length!==1)throw new TypeError(`Expected object with one key, but found ${s.length} for type ${e}}`);const[r]=s;if(!Object.hasOwn(t,r))throw new TypeError(`Invalid enum variant ${r}`)}})},map(e,t){return T.vector(T.tuple([e,t])).transform({name:`Map<${e.name}, ${t.name}>`,input:n=>[...n.entries()],output:n=>{const i=new Map;for(const[o,s]of n)i.set(o,s);return i}})},lazy(e){return Zl(e)}},Ql=32;function Qr(e){try{return Ii(e).length===Ql}catch{return!1}}const er=32;function nn(e){return tu(e)&&nu(e)===er}function bi(e){return nn(e)}function Yl(e){return e.includes("::")?ec(e):e}function ec(e){const[t,n]=e.split("::"),i=e.slice(t.length+n.length+4),o=i.includes("<")?i.slice(0,i.indexOf("<")):i,s=i.includes("<")?Ha(i.slice(i.indexOf("<")+1,i.lastIndexOf(">"))).map(r=>Yl(r.trim())):[];return{address:ae(t),module:n,name:o,typeParams:s}}function eu(e){const{address:t,module:n,name:i,typeParams:o}=typeof e=="string"?ec(e):e,s=(o==null?void 0:o.length)>0?`<${o.map(r=>typeof r=="string"?r:eu(r)).join(",")}>`:"";return`${t}::${n}::${i}${s}`}function ae(e,t=!1){let n=e.toLowerCase();return!t&&n.startsWith("0x")&&(n=n.slice(2)),`0x${n.padStart(er*2,"0")}`}function me(e,t=!1){return ae(e,t)}function tu(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2===0}function nu(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}const tc=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,nc=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i,iu=235;function c0(e){return e.length>iu?!1:e.includes("@")?tc.test(e):nc.test(e)}function ou(e,t="at"){const n=e.toLowerCase();let i;if(n.includes("@")){if(!tc.test(n))throw new Error(`Invalid SuiNS name ${e}`);const[o,s]=n.split("@");i=[...o?o.split("."):[],s]}else{if(!nc.test(n))throw new Error(`Invalid SuiNS name ${e}`);i=n.split(".").slice(0,-1)}return t==="dot"?`${i.join(".")}.sui`:`${i.slice(0,-1).join(".")}@${i[i.length-1]}`}const d0=9,l0=BigInt(1e9),su="0x1",ic="0x2",u0="0x3",f0=me("0x6"),h0="sui_system",ru=`${ic}::sui::SUI`,p0=me("0x5"),au=/^vector<(.+)>$/,cu=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class sn{static parseFromStr(t,n=!1){if(t==="address")return{address:null};if(t==="bool")return{bool:null};if(t==="u8")return{u8:null};if(t==="u16")return{u16:null};if(t==="u32")return{u32:null};if(t==="u64")return{u64:null};if(t==="u128")return{u128:null};if(t==="u256")return{u256:null};if(t==="signer")return{signer:null};const i=t.match(au);if(i)return{vector:sn.parseFromStr(i[1],n)};const o=t.match(cu);if(o)return{struct:{address:n?ae(o[1]):o[1],module:o[2],name:o[3],typeParams:o[5]===void 0?[]:sn.parseStructTypeArgs(o[5],n)}};throw new Error(`Encountered unexpected token when parsing type args for ${t}`)}static parseStructTypeArgs(t,n=!1){return Ha(t).map(i=>sn.parseFromStr(i,n))}static tagToString(t){if("bool"in t)return"bool";if("u8"in t)return"u8";if("u16"in t)return"u16";if("u32"in t)return"u32";if("u64"in t)return"u64";if("u128"in t)return"u128";if("u256"in t)return"u256";if("address"in t)return"address";if("signer"in t)return"signer";if("vector"in t)return`vector<${sn.tagToString(t.vector)}>`;if("struct"in t){const n=t.struct,i=n.typeParams.map(sn.tagToString).join(", ");return`${n.address}::${n.module}::${n.name}${i?`<${i}>`:""}`}throw new Error("Invalid TypeTag")}}function du(e){return T.u64({name:"unsafe_u64",...e}).transform({input:t=>t,output:t=>Number(t)})}function lu(e){return T.enum("Option",{None:null,Some:e})}const je=T.bytes(er).transform({validate:e=>{const t=typeof e=="string"?e:Oi(e);if(!t||!nn(ae(t)))throw new Error(`Invalid Sui address ${t}`)},input:e=>typeof e=="string"?Xa(ae(e)):e,output:e=>ae(Oi(e))}),Ht=T.vector(T.u8()).transform({name:"ObjectDigest",input:e=>Ii(e),output:e=>Co(new Uint8Array(e)),validate:e=>{if(Ii(e).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),Ft=T.struct("SuiObjectRef",{objectId:je,version:T.u64(),digest:Ht}),oc=T.struct("SharedObjectRef",{objectId:je,initialSharedVersion:T.u64(),mutable:T.bool()}),sc=T.enum("ObjectArg",{ImmOrOwnedObject:Ft,SharedObject:oc,Receiving:Ft}),rc=T.enum("CallArg",{Pure:T.struct("Pure",{bytes:T.vector(T.u8()).transform({input:e=>typeof e=="string"?rn(e):e,output:e=>xt(new Uint8Array(e))})}),Object:sc}),tr=T.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:T.lazy(()=>tr),struct:T.lazy(()=>fc),u16:null,u32:null,u256:null}),nr=tr.transform({input:e=>typeof e=="string"?sn.parseFromStr(e,!0):e,output:e=>sn.tagToString(e)}),tn=T.enum("Argument",{GasCoin:null,Input:T.u16(),Result:T.u16(),NestedResult:T.tuple([T.u16(),T.u16()])}),ac=T.struct("ProgrammableMoveCall",{package:je,module:T.string(),function:T.string(),typeArguments:T.vector(nr),arguments:T.vector(tn)}),cc=T.enum("Command",{MoveCall:ac,TransferObjects:T.struct("TransferObjects",{objects:T.vector(tn),address:tn}),SplitCoins:T.struct("SplitCoins",{coin:tn,amounts:T.vector(tn)}),MergeCoins:T.struct("MergeCoins",{destination:tn,sources:T.vector(tn)}),Publish:T.struct("Publish",{modules:T.vector(T.vector(T.u8()).transform({input:e=>typeof e=="string"?rn(e):e,output:e=>xt(new Uint8Array(e))})),dependencies:T.vector(je)}),MakeMoveVec:T.struct("MakeMoveVec",{type:lu(nr).transform({input:e=>e===null?{None:!0}:{Some:e},output:e=>e.Some??null}),elements:T.vector(tn)}),Upgrade:T.struct("Upgrade",{modules:T.vector(T.vector(T.u8()).transform({input:e=>typeof e=="string"?rn(e):e,output:e=>xt(new Uint8Array(e))})),dependencies:T.vector(je),package:je,ticket:tn})}),dc=T.struct("ProgrammableTransaction",{inputs:T.vector(rc),commands:T.vector(cc)}),lc=T.enum("TransactionKind",{ProgrammableTransaction:dc,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),uc=T.enum("TransactionExpiration",{None:null,Epoch:du()}),fc=T.struct("StructTag",{address:je,module:T.string(),name:T.string(),typeParams:T.vector(tr)}),hc=T.struct("GasData",{payment:T.vector(Ft),owner:je,price:T.u64(),budget:T.u64()}),pc=T.struct("TransactionDataV1",{kind:lc,sender:je,gasData:hc,expiration:uc}),_c=T.enum("TransactionData",{V1:pc}),bc=T.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),mc=T.enum("IntentVersion",{V0:null}),gc=T.enum("AppId",{Sui:null}),yc=T.struct("Intent",{scope:bc,version:mc,appId:gc});function wc(e){return T.struct(`IntentMessage<${e.name}>`,{intent:yc,value:e})}const vc=T.enum("CompressedSignature",{ED25519:T.fixedArray(64,T.u8()),Secp256k1:T.fixedArray(64,T.u8()),Secp256r1:T.fixedArray(64,T.u8()),ZkLogin:T.vector(T.u8())}),kc=T.enum("PublicKey",{ED25519:T.fixedArray(32,T.u8()),Secp256k1:T.fixedArray(33,T.u8()),Secp256r1:T.fixedArray(33,T.u8()),ZkLogin:T.vector(T.u8())}),Cc=T.struct("MultiSigPkMap",{pubKey:kc,weight:T.u8()}),Ac=T.struct("MultiSigPublicKey",{pk_map:T.vector(Cc),threshold:T.u16()}),uu=T.struct("MultiSig",{sigs:T.vector(vc),bitmap:T.u16(),multisig_pk:Ac}),fu=T.vector(T.u8()).transform({input:e=>typeof e=="string"?rn(e):e,output:e=>xt(new Uint8Array(e))}),Sc=T.struct("SenderSignedTransaction",{intentMessage:wc(_c),txSignatures:T.vector(fu)}),hu=T.vector(Sc,{name:"SenderSignedData"}),pu=T.enum("PackageUpgradeError",{UnableToFetchPackage:T.struct("UnableToFetchPackage",{packageId:je}),NotAPackage:T.struct("NotAPackage",{objectId:je}),IncompatibleUpgrade:null,DigestDoesNotMatch:T.struct("DigestDoesNotMatch",{digest:T.vector(T.u8())}),UnknownUpgradePolicy:T.struct("UnknownUpgradePolicy",{policy:T.u8()}),PackageIDDoesNotMatch:T.struct("PackageIDDoesNotMatch",{packageId:je,ticketId:je})}),_u=T.struct("ModuleId",{address:je,name:T.string()}),Yr=T.struct("MoveLocation",{module:_u,function:T.u16(),instruction:T.u16(),functionName:T.option(T.string())}),bu=T.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:T.struct("IndexOutOfBounds",{idx:T.u16()}),SecondaryIndexOutOfBounds:T.struct("SecondaryIndexOutOfBounds",{resultIdx:T.u16(),secondaryIdx:T.u16()}),InvalidResultArity:T.struct("InvalidResultArity",{resultIdx:T.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),mu=T.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),gu=T.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:T.struct("MoveObjectTooBig",{objectSize:T.u64(),maxObjectSize:T.u64()}),MovePackageTooBig:T.struct("MovePackageTooBig",{objectSize:T.u64(),maxObjectSize:T.u64()}),CircularObjectOwnership:T.struct("CircularObjectOwnership",{object:je}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:T.option(Yr),MoveAbort:T.tuple([Yr,T.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:T.struct("CommandArgumentError",{argIdx:T.u16(),kind:bu}),TypeArgumentError:T.struct("TypeArgumentError",{argumentIdx:T.u16(),kind:mu}),UnusedValueWithoutDrop:T.struct("UnusedValueWithoutDrop",{resultIdx:T.u16(),secondaryIdx:T.u16()}),InvalidPublicFunctionReturnType:T.struct("InvalidPublicFunctionReturnType",{idx:T.u16()}),InvalidTransferObject:null,EffectsTooLarge:T.struct("EffectsTooLarge",{currentSize:T.u64(),maxSize:T.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:T.struct("PackageUpgradeError",{upgradeError:pu}),WrittenObjectsTooLarge:T.struct("WrittenObjectsTooLarge",{currentSize:T.u64(),maxSize:T.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null}),Tc=T.enum("ExecutionStatus",{Success:null,Failed:T.struct("ExecutionFailed",{error:gu,command:T.option(T.u64())})}),xc=T.struct("GasCostSummary",{computationCost:T.u64(),storageCost:T.u64(),storageRebate:T.u64(),nonRefundableStorageFee:T.u64()}),Hn=T.enum("Owner",{AddressOwner:je,ObjectOwner:je,Shared:T.struct("Shared",{initialSharedVersion:T.u64()}),Immutable:null}),yu=T.struct("TransactionEffectsV1",{status:Tc,executedEpoch:T.u64(),gasUsed:xc,modifiedAtVersions:T.vector(T.tuple([je,T.u64()])),sharedObjects:T.vector(Ft),transactionDigest:Ht,created:T.vector(T.tuple([Ft,Hn])),mutated:T.vector(T.tuple([Ft,Hn])),unwrapped:T.vector(T.tuple([Ft,Hn])),deleted:T.vector(Ft),unwrappedThenDeleted:T.vector(Ft),wrapped:T.vector(Ft),gasObject:T.tuple([Ft,Hn]),eventsDigest:T.option(Ht),dependencies:T.vector(Ht)}),ir=T.tuple([T.u64(),Ht]),wu=T.enum("ObjectIn",{NotExist:null,Exist:T.tuple([ir,Hn])}),vu=T.enum("ObjectOut",{NotExist:null,ObjectWrite:T.tuple([Ht,Hn]),PackageWrite:ir}),ku=T.enum("IDOperation",{None:null,Created:null,Deleted:null}),Cu=T.struct("EffectsObjectChange",{inputState:wu,outputState:vu,idOperation:ku}),Au=T.enum("UnchangedSharedKind",{ReadOnlyRoot:ir,MutateDeleted:T.u64(),ReadDeleted:T.u64(),Cancelled:T.u64(),PerEpochConfig:null}),Su=T.struct("TransactionEffectsV2",{status:Tc,executedEpoch:T.u64(),gasUsed:xc,transactionDigest:Ht,gasObjectIndex:T.option(T.u32()),eventsDigest:T.option(Ht),dependencies:T.vector(Ht),lamportVersion:T.u64(),changedObjects:T.vector(T.tuple([je,Cu])),unchangedSharedObjects:T.vector(T.tuple([je,Au])),auxDataDigest:T.option(Ht)}),Tu=T.enum("TransactionEffects",{V1:yu,V2:Su}),ie={...T,U8:T.u8(),U16:T.u16(),U32:T.u32(),U64:T.u64(),U128:T.u128(),U256:T.u256(),ULEB128:T.uleb128(),Bool:T.bool(),String:T.string(),Address:je,AppId:gc,Argument:tn,CallArg:rc,CompressedSignature:vc,GasData:hc,Intent:yc,IntentMessage:wc,IntentScope:bc,IntentVersion:mc,MultiSig:uu,MultiSigPkMap:Cc,MultiSigPublicKey:Ac,ObjectArg:sc,ObjectDigest:Ht,ProgrammableMoveCall:ac,ProgrammableTransaction:dc,PublicKey:kc,SenderSignedData:hu,SenderSignedTransaction:Sc,SharedObjectRef:oc,StructTag:fc,SuiObjectRef:Ft,Command:cc,TransactionData:_c,TransactionDataV1:pc,TransactionExpiration:uc,TransactionKind:lc,TypeTag:nr,TransactionEffects:Tu},xu="object",Iu="ID",Ou="ascii",Pu="String",ju="string",Mu="String",Eu="option",Bu="Option";function Ru(e){const t=typeof e.body=="object"&&"datatype"in e.body?e.body.datatype:null;return!!t&&ae(t.package)===ae("0x2")&&t.module==="tx_context"&&t.type==="TxContext"}function Ps(e){if(typeof e=="string")switch(e){case"address":return ie.Address;case"bool":return ie.Bool;case"u8":return ie.U8;case"u16":return ie.U16;case"u32":return ie.U32;case"u64":return ie.U64;case"u128":return ie.U128;case"u256":return ie.U256;default:throw new Error(`Unknown type signature ${e}`)}if("vector"in e){if(e.vector==="u8")return ie.vector(ie.U8).transform({input:n=>typeof n=="string"?new TextEncoder().encode(n):n,output:n=>n});const t=Ps(e.vector);return t?ie.vector(t):null}if("datatype"in e){const t=ae(e.datatype.package);if(t===ae(su)){if(e.datatype.module===Ou&&e.datatype.type===Pu||e.datatype.module===ju&&e.datatype.type===Mu)return ie.String;if(e.datatype.module===Eu&&e.datatype.type===Bu){const n=Ps(e.datatype.typeParameters[0]);return n?ie.vector(n):null}}if(t===ae(ic)&&e.datatype.module===xu&&e.datatype.type===Iu)return ie.Address}return null}function Du(e){return typeof e=="object"&&"Reference"in e?{ref:"&",body:yi(e.Reference)}:typeof e=="object"&&"MutableReference"in e?{ref:"&mut",body:yi(e.MutableReference)}:{ref:null,body:yi(e)}}function yi(e){if(typeof e=="string")switch(e){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${e}`)}if("Vector"in e)return{vector:yi(e.Vector)};if("Struct"in e)return{datatype:{package:e.Struct.address,module:e.Struct.module,type:e.Struct.name,typeParameters:e.Struct.typeArguments.map(yi)}};if("TypeParameter"in e)return{typeParameter:e.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(e)}`)}function Nu(e){return{$kind:"Pure",Pure:{bytes:e instanceof Uint8Array?xt(e):e.toBase64()}}}const mn={Pure:Nu,ObjectRef({objectId:e,digest:t,version:n}){return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:t,version:n,objectId:ae(e)}}}},SharedObjectRef({objectId:e,mutable:t,initialSharedVersion:n}){return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:t,initialSharedVersion:n,objectId:ae(e)}}}},ReceivingRef({objectId:e,digest:t,version:n}){return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:t,version:n,objectId:ae(e)}}}}};var dn;function qu(e){return{lang:(e==null?void 0:e.lang)??(dn==null?void 0:dn.lang),message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??(dn==null?void 0:dn.abortEarly),abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??(dn==null?void 0:dn.abortPipeEarly)}}var cs;function $u(e){return cs==null?void 0:cs.get(e)}var ds;function Fu(e){return ds==null?void 0:ds.get(e)}var ls;function Lu(e,t){var n;return(n=ls==null?void 0:ls.get(e))==null?void 0:n.get(t)}function Ic(e){var n,i;const t=typeof e;return t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t==="object"||t==="function"?(e&&((i=(n=Object.getPrototypeOf(e))==null?void 0:n.constructor)==null?void 0:i.name))??"null":t}function Nt(e,t,n,i,o){const s=o&&"input"in o?o.input:n.value,r=(o==null?void 0:o.expected)??e.expects??null,a=(o==null?void 0:o.received)??Ic(s),c={kind:e.kind,type:e.type,input:s,expected:r,received:a,message:`Invalid ${t}: ${r?`Expected ${r} but r`:"R"}eceived ${a}`,requirement:e.requirement,path:o==null?void 0:o.path,issues:o==null?void 0:o.issues,lang:i.lang,abortEarly:i.abortEarly,abortPipeEarly:i.abortPipeEarly},d=e.kind==="schema",l=(o==null?void 0:o.message)??e.message??Lu(e.reference,c.lang)??(d?Fu(c.lang):null)??i.message??$u(c.lang);l&&(c.message=typeof l=="function"?l(c):l),d&&(n.typed=!1),n.issues?n.issues.push(c):n.issues=[c]}function Uu(e,t){return Object.hasOwn(e,t)&&t!=="__proto__"&&t!=="prototype"&&t!=="constructor"}var Ku=class extends Error{constructor(t){super(t[0].message);U(this,"issues");this.name="ValiError",this.issues=t}};function Bi(e,t){return{kind:"validation",type:"check",reference:Bi,async:!1,expects:null,requirement:e,message:t,_run(n,i){return n.typed&&!this.requirement(n.value)&&Nt(this,"input",n,i),n}}}function Oe(e){return{kind:"validation",type:"integer",reference:Oe,async:!1,expects:null,requirement:Number.isInteger,message:e,_run(t,n){return t.typed&&!this.requirement(t.value)&&Nt(this,"integer",t,n),t}}}function Ao(e){return{kind:"transformation",type:"transform",reference:Ao,async:!1,operation:e,_run(t){return t.value=this.operation(t.value),t}}}function or(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function js(e,t){return!e._run({typed:!1,value:t},{abortEarly:!0}).issues}function te(e,t){return{kind:"schema",type:"array",reference:te,expects:"Array",async:!1,item:e,message:t,_run(n,i){var s;const o=n.value;if(Array.isArray(o)){n.typed=!0,n.value=[];for(let r=0;r<o.length;r++){const a=o[r],c=this.item._run({typed:!1,value:a},i);if(c.issues){const d={type:"array",origin:"value",input:o,key:r,value:a};for(const l of c.issues)l.path?l.path.unshift(d):l.path=[d],(s=n.issues)==null||s.push(l);if(n.issues||(n.issues=c.issues),i.abortEarly){n.typed=!1;break}}c.typed||(n.typed=!1),n.value.push(c.value)}}else Nt(this,"type",n,i);return n}}}function sr(e){return{kind:"schema",type:"bigint",reference:sr,expects:"bigint",async:!1,message:e,_run(t,n){return typeof t.value=="bigint"?t.typed=!0:Nt(this,"type",t,n),t}}}function So(e){return{kind:"schema",type:"boolean",reference:So,expects:"boolean",async:!1,message:e,_run(t,n){return typeof t.value=="boolean"?t.typed=!0:Nt(this,"type",t,n),t}}}function Pi(e){return{kind:"schema",type:"lazy",reference:Pi,expects:"unknown",async:!1,getter:e,_run(t,n){return this.getter(t.value)._run(t,n)}}}function se(e,t){return{kind:"schema",type:"literal",reference:se,expects:Ic(e),async:!1,literal:e,message:t,_run(n,i){return n.value===this.literal?n.typed=!0:Nt(this,"type",n,i),n}}}function ye(e,...t){const n={kind:"schema",type:"nullable",reference:ye,expects:`${e.expects} | null`,async:!1,wrapped:e,_run(i,o){return i.value===null&&("default"in this&&(i.value=or(this,i,o)),i.value===null)?(i.typed=!0,i):this.wrapped._run(i,o)}};return 0 in t&&(n.default=t[0]),n}function ii(e,...t){const n={kind:"schema",type:"nullish",reference:ii,expects:`${e.expects} | null | undefined`,async:!1,wrapped:e,_run(i,o){return(i.value===null||i.value===void 0)&&("default"in this&&(i.value=or(this,i,o)),i.value===null||i.value===void 0)?(i.typed=!0,i):this.wrapped._run(i,o)}};return 0 in t&&(n.default=t[0]),n}function Te(e){return{kind:"schema",type:"number",reference:Te,expects:"number",async:!1,message:e,_run(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:Nt(this,"type",t,n),t}}}function L(e,t){return{kind:"schema",type:"object",reference:L,expects:"Object",async:!1,entries:e,message:t,_run(n,i){var s;const o=n.value;if(o&&typeof o=="object"){n.typed=!0,n.value={};for(const r in this.entries){const a=o[r],c=this.entries[r]._run({typed:!1,value:a},i);if(c.issues){const d={type:"object",origin:"value",input:o,key:r,value:a};for(const l of c.issues)l.path?l.path.unshift(d):l.path=[d],(s=n.issues)==null||s.push(l);if(n.issues||(n.issues=c.issues),i.abortEarly){n.typed=!1;break}}c.typed||(n.typed=!1),(c.value!==void 0||r in o)&&(n.value[r]=c.value)}}else Nt(this,"type",n,i);return n}}}function It(e,...t){const n={kind:"schema",type:"optional",reference:It,expects:`${e.expects} | undefined`,async:!1,wrapped:e,_run(i,o){return i.value===void 0&&("default"in this&&(i.value=or(this,i,o)),i.value===void 0)?(i.typed=!0,i):this.wrapped._run(i,o)}};return 0 in t&&(n.default=t[0]),n}function ji(e,t,n){return{kind:"schema",type:"record",reference:ji,expects:"Object",async:!1,key:e,value:t,message:n,_run(i,o){var r,a;const s=i.value;if(s&&typeof s=="object"){i.typed=!0,i.value={};for(const c in s)if(Uu(s,c)){const d=s[c],l=this.key._run({typed:!1,value:c},o);if(l.issues){const _={type:"object",origin:"key",input:s,key:c,value:d};for(const g of l.issues)g.path=[_],(r=i.issues)==null||r.push(g);if(i.issues||(i.issues=l.issues),o.abortEarly){i.typed=!1;break}}const h=this.value._run({typed:!1,value:d},o);if(h.issues){const _={type:"object",origin:"value",input:s,key:c,value:d};for(const g of h.issues)g.path?g.path.unshift(_):g.path=[_],(a=i.issues)==null||a.push(g);if(i.issues||(i.issues=h.issues),o.abortEarly){i.typed=!1;break}}(!l.typed||!h.typed)&&(i.typed=!1),l.typed&&(i.value[l.value]=h.value)}}else Nt(this,"type",i,o);return i}}}function fe(e){return{kind:"schema",type:"string",reference:fe,expects:"string",async:!1,message:e,_run(t,n){return typeof t.value=="string"?t.typed=!0:Nt(this,"type",t,n),t}}}function rr(e,t){return{kind:"schema",type:"tuple",reference:rr,expects:"Array",async:!1,items:e,message:t,_run(n,i){var s;const o=n.value;if(Array.isArray(o)){n.typed=!0,n.value=[];for(let r=0;r<this.items.length;r++){const a=o[r],c=this.items[r]._run({typed:!1,value:a},i);if(c.issues){const d={type:"array",origin:"value",input:o,key:r,value:a};for(const l of c.issues)l.path?l.path.unshift(d):l.path=[d],(s=n.issues)==null||s.push(l);if(n.issues||(n.issues=c.issues),i.abortEarly){n.typed=!1;break}}c.typed||(n.typed=!1),n.value.push(c.value)}}else Nt(this,"type",n,i);return n}}}function ea(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function At(e,t){return{kind:"schema",type:"union",reference:At,expects:[...new Set(e.map(n=>n.expects))].join(" | ")||"never",async:!1,options:e,message:t,_run(n,i){let o,s,r;for(const a of this.options){const c=a._run({typed:!1,value:n.value},i);if(c.typed)if(c.issues)s?s.push(c):s=[c];else{o=c;break}else r?r.push(c):r=[c]}if(o)return o;if(s){if(s.length===1)return s[0];Nt(this,"type",n,i,{issues:ea(s)}),n.typed=!0}else{if((r==null?void 0:r.length)===1)return r[0];Nt(this,"type",n,i,{issues:ea(r)})}return n}}}function qn(){return{kind:"schema",type:"unknown",reference:qn,expects:"unknown",async:!1,_run(e){return e.typed=!0,e}}}function Ie(e,t,n){const i=e._run({typed:!1,value:t},qu(n));if(i.issues)throw new Ku(i.issues);return i.value}function ve(...e){return{...e[0],pipe:e,_run(t,n){for(let i=0;i<e.length;i++){if(t.issues&&(e[i].kind==="schema"||e[i].kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=e[i]._run(t,n))}return t}}}function Un(e){const t=Object.entries(e).map(([n,i])=>L({[n]:i}));return ve(At(t),Ao(n=>({...n,$kind:Object.keys(n)[0]})))}const ai=ve(fe(),Ao(e=>ae(e)),Bi(nn)),Bt=ai,$n=fe(),Mt=ve(At([fe(),ve(Te(),Oe())]),Bi(e=>{try{return BigInt(e),BigInt(e)>=0&&BigInt(e)<=18446744073709551615n}catch{return!1}},"Invalid u64")),xn=L({objectId:ai,version:Mt,digest:fe()}),Ce=ve(At([L({GasCoin:se(!0)}),L({Input:ve(Te(),Oe()),type:It(se("pure"))}),L({Input:ve(Te(),Oe()),type:It(se("object"))}),L({Result:ve(Te(),Oe())}),L({NestedResult:rr([ve(Te(),Oe()),ve(Te(),Oe())])})]),Ao(e=>({...e,$kind:Object.keys(e)[0]}))),Vu=L({budget:ye(Mt),price:ye(Mt),owner:ye(ai),payment:ye(te(xn))}),Ms=At([se("address"),se("bool"),se("u8"),se("u16"),se("u32"),se("u64"),se("u128"),se("u256"),L({vector:Pi(()=>Ms)}),L({datatype:L({package:fe(),module:fe(),type:fe(),typeParameters:te(Pi(()=>Ms))})}),L({typeParameter:ve(Te(),Oe())})]),zu=L({ref:ye(At([se("&"),se("&mut")])),body:Ms}),Gu=L({package:Bt,module:fe(),function:fe(),typeArguments:te(fe()),arguments:te(Ce),_argumentTypes:It(ye(te(zu)))}),Wu=L({name:fe(),inputs:ji(fe(),At([Ce,te(Ce)])),data:ji(fe(),qn())}),Xu=Un({MoveCall:Gu,TransferObjects:L({objects:te(Ce),address:Ce}),SplitCoins:L({coin:Ce,amounts:te(Ce)}),MergeCoins:L({destination:Ce,sources:te(Ce)}),Publish:L({modules:te($n),dependencies:te(Bt)}),MakeMoveVec:L({type:ye(fe()),elements:te(Ce)}),Upgrade:L({modules:te($n),dependencies:te(Bt),package:Bt,ticket:Ce}),$Intent:Wu}),Oc=Un({ImmOrOwnedObject:xn,SharedObject:L({objectId:Bt,initialSharedVersion:Mt,mutable:So()}),Receiving:xn}),Hu=Un({Object:Oc,Pure:L({bytes:$n}),UnresolvedPure:L({value:qn()}),UnresolvedObject:L({objectId:Bt,version:It(ye(Mt)),digest:It(ye(fe())),initialSharedVersion:It(ye(Mt))})}),ta=Un({Object:Oc,Pure:L({bytes:$n})}),Pc=Un({None:se(!0),Epoch:Mt}),eo=L({version:se(2),sender:ii(ai),expiration:ii(Pc),gasData:Vu,inputs:te(Hu),commands:te(Xu)});var Ju=(e=>(e[e.COMPATIBLE=0]="COMPATIBLE",e[e.ADDITIVE=128]="ADDITIVE",e[e.DEP_ONLY=192]="DEP_ONLY",e))(Ju||{});const In={MoveCall(e){const[t,n="",i=""]="target"in e?e.target.split("::"):[e.package,e.module,e.function];return{$kind:"MoveCall",MoveCall:{package:t,module:n,function:i,typeArguments:e.typeArguments??[],arguments:e.arguments??[]}}},TransferObjects(e,t){return{$kind:"TransferObjects",TransferObjects:{objects:e.map(n=>Ie(Ce,n)),address:Ie(Ce,t)}}},SplitCoins(e,t){return{$kind:"SplitCoins",SplitCoins:{coin:Ie(Ce,e),amounts:t.map(n=>Ie(Ce,n))}}},MergeCoins(e,t){return{$kind:"MergeCoins",MergeCoins:{destination:Ie(Ce,e),sources:t.map(n=>Ie(Ce,n))}}},Publish({modules:e,dependencies:t}){return{$kind:"Publish",Publish:{modules:e.map(n=>typeof n=="string"?n:xt(new Uint8Array(n))),dependencies:t.map(n=>me(n))}}},Upgrade({modules:e,dependencies:t,package:n,ticket:i}){return{$kind:"Upgrade",Upgrade:{modules:e.map(o=>typeof o=="string"?o:xt(new Uint8Array(o))),dependencies:t.map(o=>me(o)),package:n,ticket:Ie(Ce,i)}}},MakeMoveVec({type:e,elements:t}){return{$kind:"MakeMoveVec",MakeMoveVec:{type:e??null,elements:t.map(n=>Ie(Ce,n))}}},Intent({name:e,inputs:t={},data:n={}}){return{$kind:"$Intent",$Intent:{name:e,inputs:Object.fromEntries(Object.entries(t).map(([i,o])=>[i,Array.isArray(o)?o.map(s=>Ie(Ce,s)):Ie(Ce,o)])),data:n}}}},Es=L({digest:fe(),objectId:fe(),version:At([ve(Te(),Oe()),fe(),sr()])}),Zu=Un({ImmOrOwned:Es,Shared:L({objectId:Bt,initialSharedVersion:Mt,mutable:So()}),Receiving:Es}),na=Un({Object:Zu,Pure:te(ve(Te(),Oe()))}),jc=At([L({kind:se("Input"),index:ve(Te(),Oe()),value:qn(),type:It(se("object"))}),L({kind:se("Input"),index:ve(Te(),Oe()),value:qn(),type:se("pure")})]),Qu=At([L({Epoch:ve(Te(),Oe())}),L({None:ye(se(!0))})]),ia=ve(At([Te(),fe(),sr()]),Bi(e=>{if(!["string","number","bigint"].includes(typeof e))return!1;try{return BigInt(e),!0}catch{return!1}})),ar=At([L({bool:ye(se(!0))}),L({u8:ye(se(!0))}),L({u64:ye(se(!0))}),L({u128:ye(se(!0))}),L({address:ye(se(!0))}),L({signer:ye(se(!0))}),L({vector:Pi(()=>ar)}),L({struct:Pi(()=>Yu)}),L({u16:ye(se(!0))}),L({u32:ye(se(!0))}),L({u256:ye(se(!0))})]),Yu=L({address:fe(),module:fe(),name:fe(),typeParams:te(ar)}),ef=L({budget:It(ia),price:It(ia),payment:It(te(Es)),owner:It(fe())}),tf=[jc,L({kind:se("GasCoin")}),L({kind:se("Result"),index:ve(Te(),Oe())}),L({kind:se("NestedResult"),index:ve(Te(),Oe()),resultIndex:ve(Te(),Oe())})],gn=At([...tf]),nf=L({kind:se("MoveCall"),target:ve(fe(),Bi(e=>e.split("::").length===3)),typeArguments:te(fe()),arguments:te(gn)}),of=L({kind:se("TransferObjects"),objects:te(gn),address:gn}),sf=L({kind:se("SplitCoins"),coin:gn,amounts:te(gn)}),rf=L({kind:se("MergeCoins"),destination:gn,sources:te(gn)}),af=L({kind:se("MakeMoveVec"),type:At([L({Some:ar}),L({None:ye(se(!0))})]),objects:te(gn)}),cf=L({kind:se("Publish"),modules:te(te(ve(Te(),Oe()))),dependencies:te(fe())}),df=L({kind:se("Upgrade"),modules:te(te(ve(Te(),Oe()))),dependencies:te(fe()),packageId:fe(),ticket:gn}),lf=[nf,of,sf,rf,cf,df,af],uf=At([...lf]);L({version:se(1),sender:It(fe()),expiration:ii(Qu),gasConfig:ef,inputs:te(jc),transactions:te(uf)});function oa(e){var n;const t=e.inputs.map((i,o)=>{if(i.Object)return{kind:"Input",index:o,value:{Object:i.Object.ImmOrOwnedObject?{ImmOrOwned:i.Object.ImmOrOwnedObject}:i.Object.Receiving?{Receiving:{digest:i.Object.Receiving.digest,version:i.Object.Receiving.version,objectId:i.Object.Receiving.objectId}}:{Shared:{mutable:i.Object.SharedObject.mutable,initialSharedVersion:i.Object.SharedObject.initialSharedVersion,objectId:i.Object.SharedObject.objectId}}},type:"object"};if(i.Pure)return{kind:"Input",index:o,value:{Pure:Array.from(rn(i.Pure.bytes))},type:"pure"};if(i.UnresolvedPure)return{kind:"Input",type:"pure",index:o,value:i.UnresolvedPure.value};if(i.UnresolvedObject)return{kind:"Input",type:"object",index:o,value:i.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:e.sender??void 0,expiration:((n=e.expiration)==null?void 0:n.$kind)==="Epoch"?{Epoch:Number(e.expiration.Epoch)}:e.expiration?{None:!0}:null,gasConfig:{owner:e.gasData.owner??void 0,budget:e.gasData.budget??void 0,price:e.gasData.price??void 0,payment:e.gasData.payment??void 0},inputs:t,transactions:e.commands.map(i=>{if(i.MakeMoveVec)return{kind:"MakeMoveVec",type:i.MakeMoveVec.type===null?{None:!0}:{Some:sn.parseFromStr(i.MakeMoveVec.type)},objects:i.MakeMoveVec.elements.map(o=>ln(o,t))};if(i.MergeCoins)return{kind:"MergeCoins",destination:ln(i.MergeCoins.destination,t),sources:i.MergeCoins.sources.map(o=>ln(o,t))};if(i.MoveCall)return{kind:"MoveCall",target:`${i.MoveCall.package}::${i.MoveCall.module}::${i.MoveCall.function}`,typeArguments:i.MoveCall.typeArguments,arguments:i.MoveCall.arguments.map(o=>ln(o,t))};if(i.Publish)return{kind:"Publish",modules:i.Publish.modules.map(o=>Array.from(rn(o))),dependencies:i.Publish.dependencies};if(i.SplitCoins)return{kind:"SplitCoins",coin:ln(i.SplitCoins.coin,t),amounts:i.SplitCoins.amounts.map(o=>ln(o,t))};if(i.TransferObjects)return{kind:"TransferObjects",objects:i.TransferObjects.objects.map(o=>ln(o,t)),address:ln(i.TransferObjects.address,t)};if(i.Upgrade)return{kind:"Upgrade",modules:i.Upgrade.modules.map(o=>Array.from(rn(o))),dependencies:i.Upgrade.dependencies,packageId:i.Upgrade.package,ticket:ln(i.Upgrade.ticket,t)};throw new Error(`Unknown transaction ${Object.keys(i)}`)})}}function ln(e,t){if(e.$kind==="GasCoin")return{kind:"GasCoin"};if(e.$kind==="Result")return{kind:"Result",index:e.Result};if(e.$kind==="NestedResult")return{kind:"NestedResult",index:e.NestedResult[0],resultIndex:e.NestedResult[1]};if(e.$kind==="Input")return t[e.Input];throw new Error(`Invalid argument ${Object.keys(e)}`)}function ff(e){var t,n,i;return Ie(eo,{version:2,sender:e.sender??null,expiration:e.expiration?"Epoch"in e.expiration?{Epoch:e.expiration.Epoch}:{None:!0}:null,gasData:{owner:e.gasConfig.owner??null,budget:((t=e.gasConfig.budget)==null?void 0:t.toString())??null,price:((n=e.gasConfig.price)==null?void 0:n.toString())??null,payment:((i=e.gasConfig.payment)==null?void 0:i.map(o=>({digest:o.digest,objectId:o.objectId,version:o.version.toString()})))??null},inputs:e.inputs.map(o=>{if(o.kind==="Input"){if(js(na,o.value)){const s=Ie(na,o.value);if(s.Object){if(s.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:s.Object.ImmOrOwned.objectId,version:String(s.Object.ImmOrOwned.version),digest:s.Object.ImmOrOwned.digest}}};if(s.Object.Shared)return{Object:{SharedObject:{mutable:s.Object.Shared.mutable??null,initialSharedVersion:s.Object.Shared.initialSharedVersion,objectId:s.Object.Shared.objectId}}};if(s.Object.Receiving)return{Object:{Receiving:{digest:s.Object.Receiving.digest,version:String(s.Object.Receiving.version),objectId:s.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:xt(new Uint8Array(s.Pure))}}}return o.type==="object"?{UnresolvedObject:{objectId:o.value}}:{UnresolvedPure:{value:o.value}}}throw new Error("Invalid input")}),commands:e.transactions.map(o=>{switch(o.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in o.type?sn.tagToString(o.type.Some):null,elements:o.objects.map(s=>un(s))}};case"MergeCoins":return{MergeCoins:{destination:un(o.destination),sources:o.sources.map(s=>un(s))}};case"MoveCall":{const[s,r,a]=o.target.split("::");return{MoveCall:{package:s,module:r,function:a,typeArguments:o.typeArguments,arguments:o.arguments.map(c=>un(c))}}}case"Publish":return{Publish:{modules:o.modules.map(s=>xt(Uint8Array.from(s))),dependencies:o.dependencies}};case"SplitCoins":return{SplitCoins:{coin:un(o.coin),amounts:o.amounts.map(s=>un(s))}};case"TransferObjects":return{TransferObjects:{objects:o.objects.map(s=>un(s)),address:un(o.address)}};case"Upgrade":return{Upgrade:{modules:o.modules.map(s=>xt(Uint8Array.from(s))),dependencies:o.dependencies,package:o.packageId,ticket:un(o.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(o)}`)})})}function un(e){switch(e.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:e.index};case"NestedResult":return{NestedResult:[e.index,e.resultIndex]};case"Input":return{Input:e.index}}}function Ri(e){return At(Object.entries(e).map(([t,n])=>L({[t]:n})))}const Vt=Ri({GasCoin:se(!0),Input:ve(Te(),Oe()),Result:ve(Te(),Oe()),NestedResult:rr([ve(Te(),Oe()),ve(Te(),Oe())])}),hf=L({budget:ye(Mt),price:ye(Mt),owner:ye(ai),payment:ye(te(xn))}),pf=L({package:Bt,module:fe(),function:fe(),typeArguments:te(fe()),arguments:te(Vt)}),_f=L({name:fe(),inputs:ji(fe(),At([Vt,te(Vt)])),data:ji(fe(),qn())}),bf=Ri({MoveCall:pf,TransferObjects:L({objects:te(Vt),address:Vt}),SplitCoins:L({coin:Vt,amounts:te(Vt)}),MergeCoins:L({destination:Vt,sources:te(Vt)}),Publish:L({modules:te($n),dependencies:te(Bt)}),MakeMoveVec:L({type:ye(fe()),elements:te(Vt)}),Upgrade:L({modules:te($n),dependencies:te(Bt),package:Bt,ticket:Vt}),$Intent:_f}),mf=Ri({ImmOrOwnedObject:xn,SharedObject:L({objectId:Bt,initialSharedVersion:Mt,mutable:So()}),Receiving:xn}),gf=Ri({Object:mf,Pure:L({bytes:$n}),UnresolvedPure:L({value:qn()}),UnresolvedObject:L({objectId:Bt,version:It(ye(Mt)),digest:It(ye(fe())),initialSharedVersion:It(ye(Mt))})}),yf=Ri({None:se(!0),Epoch:Mt}),wf=L({version:se(2),sender:ii(ai),expiration:ii(yf),gasData:hf,inputs:te(gf),commands:te(bf)}),vf=50,kf=1000n,Cf=5e10;async function Af(e,t,n){return await Of(e,t),await If(e,t),t.onlyTransactionKind||(await Sf(e,t),await Tf(e,t),await xf(e,t)),await Pf(e),await n()}async function Sf(e,t){e.gasConfig.price||(e.gasConfig.price=String(await Di(t).getReferenceGasPrice()))}async function Tf(e,t){if(e.gasConfig.budget)return;const n=await Di(t).dryRunTransactionBlock({transactionBlock:e.build({overrides:{gasData:{budget:String(Cf),payment:[]}}})});if(n.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${n.effects.status.error}`,{cause:n});const i=kf*BigInt(e.gasConfig.price||1n),o=BigInt(n.effects.gasUsed.computationCost)+i,s=o+BigInt(n.effects.gasUsed.storageCost)-BigInt(n.effects.gasUsed.storageRebate);e.gasConfig.budget=String(s>o?s:o)}async function xf(e,t){if(!e.gasConfig.payment){const i=(await Di(t).getCoins({owner:e.gasConfig.owner||e.sender,coinType:ru})).data.filter(o=>!e.inputs.find(r=>{var a;return(a=r.Object)!=null&&a.ImmOrOwnedObject?o.coinObjectId===r.Object.ImmOrOwnedObject.objectId:!1})).map(o=>({objectId:o.coinObjectId,digest:o.digest,version:o.version}));if(!i.length)throw new Error("No valid gas coins found for the transaction.");e.gasConfig.payment=i.map(o=>Ie(xn,o))}}async function If(e,t){const n=e.inputs.filter(l=>{var h;return l.UnresolvedObject&&!(l.UnresolvedObject.version||(h=l.UnresolvedObject)!=null&&h.initialSharedVersion)}),i=[...new Set(n.map(l=>me(l.UnresolvedObject.objectId)))],o=i.length?Bf(i,vf):[],s=(await Promise.all(o.map(l=>Di(t).multiGetObjects({ids:l,options:{showOwner:!0}})))).flat(),r=new Map(i.map((l,h)=>[l,s[h]])),a=Array.from(r).filter(([l,h])=>h.error).map(([l,h])=>JSON.stringify(h.error));if(a.length)throw new Error(`The following input objects are invalid: ${a.join(", ")}`);const c=s.map(l=>{if(l.error||!l.data)throw new Error(`Failed to fetch object: ${l.error}`);const h=l.data.owner,_=h&&typeof h=="object"&&"Shared"in h?h.Shared.initial_shared_version:null;return{objectId:l.data.objectId,digest:l.data.digest,version:l.data.version,initialSharedVersion:_}}),d=new Map(i.map((l,h)=>[l,c[h]]));for(const[l,h]of e.inputs.entries()){if(!h.UnresolvedObject)continue;let _;const g=ae(h.UnresolvedObject.objectId),C=d.get(g);h.UnresolvedObject.initialSharedVersion??(C==null?void 0:C.initialSharedVersion)?_=mn.SharedObjectRef({objectId:g,initialSharedVersion:h.UnresolvedObject.initialSharedVersion||(C==null?void 0:C.initialSharedVersion),mutable:jf(e,l)}):Mf(e,l)&&(_=mn.ReceivingRef({objectId:g,digest:h.UnresolvedObject.digest??(C==null?void 0:C.digest),version:h.UnresolvedObject.version??(C==null?void 0:C.version)})),e.inputs[e.inputs.indexOf(h)]=_??mn.ObjectRef({objectId:g,digest:h.UnresolvedObject.digest??(C==null?void 0:C.digest),version:h.UnresolvedObject.version??(C==null?void 0:C.version)})}}async function Of(e,t){const{inputs:n,commands:i}=e,o=[],s=new Set;i.forEach(a=>{if(a.MoveCall){if(a.MoveCall._argumentTypes)return;if(a.MoveCall.arguments.map(l=>l.$kind==="Input"?e.inputs[l.Input]:null).some(l=>(l==null?void 0:l.UnresolvedPure)||(l==null?void 0:l.UnresolvedObject))){const l=`${a.MoveCall.package}::${a.MoveCall.module}::${a.MoveCall.function}`;s.add(l),o.push(a.MoveCall)}}switch(a.$kind){case"SplitCoins":a.SplitCoins.amounts.forEach(c=>{sa(c,ie.U64,e)});break;case"TransferObjects":sa(a.TransferObjects.address,ie.Address,e);break}});const r=new Map;if(s.size>0){const a=Di(t);await Promise.all([...s].map(async c=>{const[d,l,h]=c.split("::"),_=await a.getNormalizedMoveFunction({package:d,module:l,function:h});r.set(c,_.parameters.map(g=>Du(g)))}))}o.length&&await Promise.all(o.map(async a=>{const c=r.get(`${a.package}::${a.module}::${a.function}`);if(!c)return;const l=c.length>0&&Ru(c.at(-1))?c.slice(0,c.length-1):c;a._argumentTypes=l})),i.forEach(a=>{if(!a.MoveCall)return;const c=a.MoveCall,d=`${c.package}::${c.module}::${c.function}`,l=c._argumentTypes;if(l){if(l.length!==a.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${d}`);l.forEach((h,_)=>{var j,B;const g=c.arguments[_];if(g.$kind!=="Input")return;const C=n[g.Input];if(!C.UnresolvedPure&&!C.UnresolvedObject)return;const I=((j=C.UnresolvedPure)==null?void 0:j.value)??((B=C.UnresolvedObject)==null?void 0:B.objectId),O=Ps(h.body);if(O){g.type="pure",n[n.indexOf(C)]=mn.Pure(O.serialize(I));return}if(typeof I!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(I,null,2)}`);g.type="object";const M=C.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:I}}:C;n[g.Input]=M})}})}function Pf(e){e.inputs.forEach((t,n)=>{if(t.$kind!=="Object"&&t.$kind!=="Pure")throw new Error(`Input at index ${n} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(t)}`)})}function sa(e,t,n){if(e.$kind!=="Input")return;const i=n.inputs[e.Input];i.$kind==="UnresolvedPure"&&(n.inputs[e.Input]=mn.Pure(t.serialize(i.UnresolvedPure.value)))}function jf(e,t){let n=!1;return e.getInputUses(t,(i,o)=>{if(o.MoveCall&&o.MoveCall._argumentTypes){const s=o.MoveCall.arguments.indexOf(i);n=o.MoveCall._argumentTypes[s].ref!=="&"||n}(o.$kind==="MakeMoveVec"||o.$kind==="MergeCoins"||o.$kind==="SplitCoins")&&(n=!0)}),n}function Mf(e,t){let n=!1;return e.getInputUses(t,(i,o)=>{if(o.MoveCall&&o.MoveCall._argumentTypes){const s=o.MoveCall.arguments.indexOf(i);n=Ef(o.MoveCall._argumentTypes[s])||n}}),n}function Ef(e){return typeof e.body!="object"||!("datatype"in e.body)?!1:e.body.datatype.package==="0x2"&&e.body.datatype.module==="transfer"&&e.body.datatype.type==="Receiving"}function Di(e){if(!e.client)throw new Error("No provider passed to Transaction#build, but transaction data was not sufficient to build offline.");return e.client}function Bf(e,t){return Array.from({length:Math.ceil(e.length/t)},(n,i)=>e.slice(i*t,i*t+t))}function Rf(e){function t(n,i){if(typeof n=="string")return e(wi(n).serialize(i));if(n instanceof Uint8Array||Ys(n))return e(n);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return t.u8=n=>e(ie.U8.serialize(n)),t.u16=n=>e(ie.U16.serialize(n)),t.u32=n=>e(ie.U32.serialize(n)),t.u64=n=>e(ie.U64.serialize(n)),t.u128=n=>e(ie.U128.serialize(n)),t.u256=n=>e(ie.U256.serialize(n)),t.bool=n=>e(ie.Bool.serialize(n)),t.string=n=>e(ie.String.serialize(n)),t.address=n=>e(ie.Address.serialize(n)),t.id=t.address,t.vector=(n,i)=>e(ie.vector(wi(n)).serialize(i)),t.option=(n,i)=>e(ie.option(wi(n)).serialize(i)),t}function wi(e){switch(e){case"u8":return ie.u8();case"u16":return ie.u16();case"u32":return ie.u32();case"u64":return ie.u64();case"u128":return ie.u128();case"u256":return ie.u256();case"bool":return ie.bool();case"string":return ie.string();case"id":case"address":return ie.Address}const t=e.match(/^(vector|option)<(.+)>$/);if(t){const[n,i]=t.slice(1);return n==="vector"?ie.vector(wi(i)):ie.option(wi(i))}throw new Error(`Invalid Pure type name: ${e}`)}function Df(e,t){const n=Array.from(`${e}::`).map(o=>o.charCodeAt(0)),i=new Uint8Array(n.length+t.length);return i.set(n),i.set(t,n.length),Fl(i,{dkLen:32})}function ra(e){return ae(e).replace("0x","")}class Xt{constructor(t){this.version=2,this.sender=(t==null?void 0:t.sender)??null,this.expiration=(t==null?void 0:t.expiration)??null,this.inputs=(t==null?void 0:t.inputs)??[],this.commands=(t==null?void 0:t.commands)??[],this.gasData=(t==null?void 0:t.gasData)??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(t){const i=ie.TransactionKind.parse(t).ProgrammableTransaction;if(!i)throw new Error("Unable to deserialize from bytes.");return Xt.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:i.inputs,commands:i.commands})}static fromBytes(t){const n=ie.TransactionData.parse(t),i=n==null?void 0:n.V1,o=i.kind.ProgrammableTransaction;if(!i||!o)throw new Error("Unable to deserialize from bytes.");return Xt.restore({version:2,sender:i.sender,expiration:i.expiration,gasData:i.gasData,inputs:o.inputs,commands:o.commands})}static restore(t){return t.version===2?new Xt(Ie(eo,t)):new Xt(Ie(eo,ff(t)))}static getDigestFromBytes(t){const n=Df("TransactionData",t);return Co(n)}get gasConfig(){return this.gasData}set gasConfig(t){this.gasData=t}build({maxSizeBytes:t=1/0,overrides:n,onlyTransactionKind:i}={}){const o=this.inputs,s=this.commands,r={ProgrammableTransaction:{inputs:o,commands:s}};if(i)return ie.TransactionKind.serialize(r,{maxSize:t}).toBytes();const a=(n==null?void 0:n.expiration)??this.expiration,c=(n==null?void 0:n.sender)??this.sender,d={...this.gasData,...n==null?void 0:n.gasConfig,...n==null?void 0:n.gasData};if(!c)throw new Error("Missing transaction sender");if(!d.budget)throw new Error("Missing gas budget");if(!d.payment)throw new Error("Missing gas payment");if(!d.price)throw new Error("Missing gas price");const l={sender:ra(c),expiration:a||{None:!0},gasData:{payment:d.payment,owner:ra(this.gasData.owner??c),price:BigInt(d.price),budget:BigInt(d.budget)},kind:{ProgrammableTransaction:{inputs:o,commands:s}}};return ie.TransactionData.serialize({V1:l},{maxSize:t}).toBytes()}addInput(t,n){const i=this.inputs.length;return this.inputs.push(n),{Input:i,type:t,$kind:"Input"}}getInputUses(t,n){this.mapArguments((i,o)=>(i.$kind==="Input"&&i.Input===t&&n(i,o),i))}mapArguments(t){for(const n of this.commands)switch(n.$kind){case"MoveCall":n.MoveCall.arguments=n.MoveCall.arguments.map(o=>t(o,n));break;case"TransferObjects":n.TransferObjects.objects=n.TransferObjects.objects.map(o=>t(o,n)),n.TransferObjects.address=t(n.TransferObjects.address,n);break;case"SplitCoins":n.SplitCoins.coin=t(n.SplitCoins.coin,n),n.SplitCoins.amounts=n.SplitCoins.amounts.map(o=>t(o,n));break;case"MergeCoins":n.MergeCoins.destination=t(n.MergeCoins.destination,n),n.MergeCoins.sources=n.MergeCoins.sources.map(o=>t(o,n));break;case"MakeMoveVec":n.MakeMoveVec.elements=n.MakeMoveVec.elements.map(o=>t(o,n));break;case"Upgrade":n.Upgrade.ticket=t(n.Upgrade.ticket,n);break;case"$Intent":const i=n.$Intent.inputs;n.$Intent.inputs={};for(const[o,s]of Object.entries(i))n.$Intent.inputs[o]=Array.isArray(s)?s.map(r=>t(r,n)):t(s,n);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${n.$kind}`)}}replaceCommand(t,n){if(!Array.isArray(n)){this.commands[t]=n;return}const i=n.length-1;this.commands.splice(t,1,...n),i!==0&&this.mapArguments(o=>{switch(o.$kind){case"Result":o.Result>t&&(o.Result+=i);break;case"NestedResult":o.NestedResult[0]>t&&(o.NestedResult[0]+=i);break}return o})}getDigest(){const t=this.build({onlyTransactionKind:!1});return Xt.getDigestFromBytes(t)}snapshot(){return Ie(eo,this)}}function aa(e){if(typeof e=="string")return ae(e);if(e.Object)return e.Object.ImmOrOwnedObject?ae(e.Object.ImmOrOwnedObject.objectId):e.Object.Receiving?ae(e.Object.Receiving.objectId):ae(e.Object.SharedObject.objectId);if(e.UnresolvedObject)return ae(e.UnresolvedObject.objectId)}var Mc=e=>{throw TypeError(e)},cr=(e,t,n)=>t.has(e)||Mc("Cannot "+n),pe=(e,t,n)=>(cr(e,t,"read from private field"),n?n.call(e):t.get(e)),li=(e,t,n)=>t.has(e)?Mc("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ui=(e,t,n,i)=>(cr(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),hn=(e,t,n)=>(cr(e,t,"access private method"),n),to,fo,jn,be,zt,no,dr,Bs,lr;function Nf(e){const t={$kind:"Result",Result:e},n=[],i=o=>n[o]??(n[o]={$kind:"NestedResult",NestedResult:[e,o]});return new Proxy(t,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(o,s){if(s in o)return Reflect.get(o,s);if(s===Symbol.iterator)return function*(){let a=0;for(;;)yield i(a),a++};if(typeof s=="symbol")return;const r=parseInt(s,10);if(!(Number.isNaN(r)||r<0))return i(r)}})}const Ec=Symbol.for("@mysten/transaction");function Bc(e){return!!e&&typeof e=="object"&&e[Ec]===!0}const qf=class Rs{constructor(){li(this,zt),li(this,to,[]),li(this,fo,[]),li(this,jn,new Map),li(this,be),ui(this,be,new Xt)}static fromKind(t){const n=new Rs;return ui(n,be,Xt.fromKindBytes(typeof t=="string"?rn(t):t)),n}static from(t){const n=new Rs;return Bc(t)?ui(n,be,new Xt(t.getData())):typeof t!="string"||!t.startsWith("{")?ui(n,be,Xt.fromBytes(typeof t=="string"?rn(t):t)):ui(n,be,Xt.restore(JSON.parse(t))),n}addSerializationPlugin(t){pe(this,to).push(t)}addBuildPlugin(t){pe(this,fo).push(t)}addIntentResolver(t,n){if(pe(this,jn).has(t)&&pe(this,jn).get(t)!==n)throw new Error(`Intent resolver for ${t} already exists`);pe(this,jn).set(t,n)}setSender(t){pe(this,be).sender=t}setSenderIfNotSet(t){pe(this,be).sender||(pe(this,be).sender=t)}setExpiration(t){pe(this,be).expiration=t?Ie(Pc,t):null}setGasPrice(t){pe(this,be).gasConfig.price=String(t)}setGasBudget(t){pe(this,be).gasConfig.budget=String(t)}setGasBudgetIfNotSet(t){pe(this,be).gasData.budget==null&&(pe(this,be).gasConfig.budget=String(t))}setGasOwner(t){pe(this,be).gasConfig.owner=t}setGasPayment(t){pe(this,be).gasConfig.payment=t.map(n=>Ie(xn,n))}get blockData(){return oa(pe(this,be).snapshot())}getData(){return pe(this,be).snapshot()}get[Ec](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:Rf(t=>Ys(t)?pe(this,be).addInput("pure",{$kind:"Pure",Pure:{bytes:t.toBase64()}}):pe(this,be).addInput("pure",js(ta,t)?Ie(ta,t):t instanceof Uint8Array?mn.Pure(t):{$kind:"UnresolvedPure",UnresolvedPure:{value:t}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}object(t){var o,s;if(typeof t=="function")return this.object(t(this));if(typeof t=="object"&&js(Ce,t))return t;const n=aa(t),i=pe(this,be).inputs.find(r=>n===aa(r));return(o=i==null?void 0:i.Object)!=null&&o.SharedObject&&typeof t=="object"&&((s=t.Object)!=null&&s.SharedObject)&&(i.Object.SharedObject.mutable=i.Object.SharedObject.mutable||t.Object.SharedObject.mutable),i?{$kind:"Input",Input:pe(this,be).inputs.indexOf(i),type:"object"}:pe(this,be).addInput("object",typeof t=="string"?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:ae(t)}}:t)}objectRef(...t){return this.object(mn.ObjectRef(...t))}receivingRef(...t){return this.object(mn.ReceivingRef(...t))}sharedObjectRef(...t){return this.object(mn.SharedObjectRef(...t))}add(t){if(typeof t=="function")return t(this);const n=pe(this,be).commands.push(t);return Nf(n-1)}splitCoins(t,n){return this.add(In.SplitCoins(typeof t=="string"?this.object(t):hn(this,zt,dr).call(this,t),n.map(i=>typeof i=="number"||typeof i=="bigint"||typeof i=="string"?this.pure.u64(i):hn(this,zt,no).call(this,i))))}mergeCoins(t,n){return this.add(In.MergeCoins(this.object(t),n.map(i=>this.object(i))))}publish({modules:t,dependencies:n}){return this.add(In.Publish({modules:t,dependencies:n}))}upgrade({modules:t,dependencies:n,package:i,ticket:o}){return this.add(In.Upgrade({modules:t,dependencies:n,package:i,ticket:this.object(o)}))}moveCall({arguments:t,...n}){return this.add(In.MoveCall({...n,arguments:t==null?void 0:t.map(i=>hn(this,zt,no).call(this,i))}))}transferObjects(t,n){return this.add(In.TransferObjects(t.map(i=>this.object(i)),typeof n=="string"?this.pure.address(n):hn(this,zt,no).call(this,n)))}makeMoveVec({type:t,elements:n}){return this.add(In.MakeMoveVec({type:t,elements:n.map(i=>this.object(i))}))}serialize(){return JSON.stringify(oa(pe(this,be).snapshot()))}async toJSON(t={}){return await this.prepareForSerialization(t),JSON.stringify(Ie(wf,pe(this,be).snapshot()),(n,i)=>typeof i=="bigint"?i.toString():i,2)}async sign(t){const{signer:n,...i}=t,o=await this.build(i);return n.signTransaction(o)}async build(t={}){return await this.prepareForSerialization(t),await hn(this,zt,Bs).call(this,t),pe(this,be).build({onlyTransactionKind:t.onlyTransactionKind})}async getDigest(t={}){return await hn(this,zt,Bs).call(this,t),pe(this,be).getDigest()}async prepareForSerialization(t){var o;const n=new Set;for(const s of pe(this,be).commands)s.$Intent&&n.add(s.$Intent.name);const i=[...pe(this,to)];for(const s of n)if(!((o=t.supportedIntents)!=null&&o.includes(s))){if(!pe(this,jn).has(s))throw new Error(`Missing intent resolver for ${s}`);i.push(pe(this,jn).get(s))}await hn(this,zt,lr).call(this,i,t)}};to=new WeakMap;fo=new WeakMap;jn=new WeakMap;be=new WeakMap;zt=new WeakSet;no=function(e){return Ys(e)?this.pure(e):hn(this,zt,dr).call(this,e)};dr=function(e){return typeof e=="function"?Ie(Ce,e(this)):Ie(Ce,e)};Bs=async function(e){if(!e.onlyTransactionKind&&!pe(this,be).sender)throw new Error("Missing transaction sender");await hn(this,zt,lr).call(this,[...pe(this,fo),Af],e)};lr=async function(e,t){const n=i=>{if(i>=e.length)return()=>{};const o=e[i];return async()=>{const s=n(i+1);let r=!1,a=!1;if(await o(pe(this,be),t,async()=>{if(r)throw new Error(`next() was call multiple times in TransactionPlugin ${i}`);r=!0,await s(),a=!0}),!r)throw new Error(`next() was not called in TransactionPlugin ${i}`);if(!a)throw new Error(`next() was not awaited in TransactionPlugin ${i}`)}};await n(0)()};let N=qf,Ui;const $f=new Uint8Array(16);function Ff(){if(!Ui&&(Ui=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ui))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ui($f)}const wt=[];for(let e=0;e<256;++e)wt.push((e+256).toString(16).slice(1));function Lf(e,t=0){return wt[e[t+0]]+wt[e[t+1]]+wt[e[t+2]]+wt[e[t+3]]+"-"+wt[e[t+4]]+wt[e[t+5]]+"-"+wt[e[t+6]]+wt[e[t+7]]+"-"+wt[e[t+8]]+wt[e[t+9]]+"-"+wt[e[t+10]]+wt[e[t+11]]+wt[e[t+12]]+wt[e[t+13]]+wt[e[t+14]]+wt[e[t+15]]}const Uf=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ca={randomUUID:Uf};function Ki(e,t,n){if(ca.randomUUID&&!t&&!e)return ca.randomUUID();e=e||{};const i=e.random||(e.rng||Ff)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){n=n||0;for(let o=0;o<16;++o)t[n+o]=i[o];return t}return Lf(i)}function Rc(e,t){return function(){return e.apply(t,arguments)}}const{toString:Kf}=Object.prototype,{getPrototypeOf:ur}=Object,To=(e=>t=>{const n=Kf.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),en=e=>(e=e.toLowerCase(),t=>To(t)===e),xo=e=>t=>typeof t===e,{isArray:ci}=Array,Mi=xo("undefined");function Vf(e){return e!==null&&!Mi(e)&&e.constructor!==null&&!Mi(e.constructor)&&Rt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Dc=en("ArrayBuffer");function zf(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Dc(e.buffer),t}const Gf=xo("string"),Rt=xo("function"),Nc=xo("number"),Io=e=>e!==null&&typeof e=="object",Wf=e=>e===!0||e===!1,io=e=>{if(To(e)!=="object")return!1;const t=ur(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Xf=en("Date"),Hf=en("File"),Jf=en("Blob"),Zf=en("FileList"),Qf=e=>Io(e)&&Rt(e.pipe),Yf=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Rt(e.append)&&((t=To(e))==="formdata"||t==="object"&&Rt(e.toString)&&e.toString()==="[object FormData]"))},eh=en("URLSearchParams"),[th,nh,ih,oh]=["ReadableStream","Request","Response","Headers"].map(en),sh=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ni(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let i,o;if(typeof e!="object"&&(e=[e]),ci(e))for(i=0,o=e.length;i<o;i++)t.call(null,e[i],i,e);else{const s=n?Object.getOwnPropertyNames(e):Object.keys(e),r=s.length;let a;for(i=0;i<r;i++)a=s[i],t.call(null,e[a],a,e)}}function qc(e,t){t=t.toLowerCase();const n=Object.keys(e);let i=n.length,o;for(;i-- >0;)if(o=n[i],t===o.toLowerCase())return o;return null}const Rn=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),$c=e=>!Mi(e)&&e!==Rn;function Ds(){const{caseless:e}=$c(this)&&this||{},t={},n=(i,o)=>{const s=e&&qc(t,o)||o;io(t[s])&&io(i)?t[s]=Ds(t[s],i):io(i)?t[s]=Ds({},i):ci(i)?t[s]=i.slice():t[s]=i};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Ni(arguments[i],n);return t}const rh=(e,t,n,{allOwnKeys:i}={})=>(Ni(t,(o,s)=>{n&&Rt(o)?e[s]=Rc(o,n):e[s]=o},{allOwnKeys:i}),e),ah=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),ch=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},dh=(e,t,n,i)=>{let o,s,r;const a={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),s=o.length;s-- >0;)r=o[s],(!i||i(r,e,t))&&!a[r]&&(t[r]=e[r],a[r]=!0);e=n!==!1&&ur(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},lh=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return i!==-1&&i===n},uh=e=>{if(!e)return null;if(ci(e))return e;let t=e.length;if(!Nc(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},fh=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&ur(Uint8Array)),hh=(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=i.next())&&!o.done;){const s=o.value;t.call(e,s[0],s[1])}},ph=(e,t)=>{let n;const i=[];for(;(n=e.exec(t))!==null;)i.push(n);return i},_h=en("HTMLFormElement"),bh=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,o){return i.toUpperCase()+o}),da=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),mh=en("RegExp"),Fc=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};Ni(n,(o,s)=>{let r;(r=t(o,s,e))!==!1&&(i[s]=r||o)}),Object.defineProperties(e,i)},gh=e=>{Fc(e,(t,n)=>{if(Rt(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=e[n];if(Rt(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},yh=(e,t)=>{const n={},i=o=>{o.forEach(s=>{n[s]=!0})};return ci(e)?i(e):i(String(e).split(t)),n},wh=()=>{},vh=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,us="abcdefghijklmnopqrstuvwxyz",la="0123456789",Lc={DIGIT:la,ALPHA:us,ALPHA_DIGIT:us+us.toUpperCase()+la},kh=(e=16,t=Lc.ALPHA_DIGIT)=>{let n="";const{length:i}=t;for(;e--;)n+=t[Math.random()*i|0];return n};function Ch(e){return!!(e&&Rt(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Ah=e=>{const t=new Array(10),n=(i,o)=>{if(Io(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[o]=i;const s=ci(i)?[]:{};return Ni(i,(r,a)=>{const c=n(r,o+1);!Mi(c)&&(s[a]=c)}),t[o]=void 0,s}}return i};return n(e,0)},Sh=en("AsyncFunction"),Th=e=>e&&(Io(e)||Rt(e))&&Rt(e.then)&&Rt(e.catch),Uc=((e,t)=>e?setImmediate:t?((n,i)=>(Rn.addEventListener("message",({source:o,data:s})=>{o===Rn&&s===n&&i.length&&i.shift()()},!1),o=>{i.push(o),Rn.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Rt(Rn.postMessage)),xh=typeof queueMicrotask<"u"?queueMicrotask.bind(Rn):typeof process<"u"&&process.nextTick||Uc,R={isArray:ci,isArrayBuffer:Dc,isBuffer:Vf,isFormData:Yf,isArrayBufferView:zf,isString:Gf,isNumber:Nc,isBoolean:Wf,isObject:Io,isPlainObject:io,isReadableStream:th,isRequest:nh,isResponse:ih,isHeaders:oh,isUndefined:Mi,isDate:Xf,isFile:Hf,isBlob:Jf,isRegExp:mh,isFunction:Rt,isStream:Qf,isURLSearchParams:eh,isTypedArray:fh,isFileList:Zf,forEach:Ni,merge:Ds,extend:rh,trim:sh,stripBOM:ah,inherits:ch,toFlatObject:dh,kindOf:To,kindOfTest:en,endsWith:lh,toArray:uh,forEachEntry:hh,matchAll:ph,isHTMLForm:_h,hasOwnProperty:da,hasOwnProp:da,reduceDescriptors:Fc,freezeMethods:gh,toObjectSet:yh,toCamelCase:bh,noop:wh,toFiniteNumber:vh,findKey:qc,global:Rn,isContextDefined:$c,ALPHABET:Lc,generateString:kh,isSpecCompliantForm:Ch,toJSONObject:Ah,isAsyncFn:Sh,isThenable:Th,setImmediate:Uc,asap:xh};function de(e,t,n,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),o&&(this.response=o,this.status=o.status?o.status:null)}R.inherits(de,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:R.toJSONObject(this.config),code:this.code,status:this.status}}});const Kc=de.prototype,Vc={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Vc[e]={value:e}});Object.defineProperties(de,Vc);Object.defineProperty(Kc,"isAxiosError",{value:!0});de.from=(e,t,n,i,o,s)=>{const r=Object.create(Kc);return R.toFlatObject(e,r,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),de.call(r,e.message,t,n,i,o),r.cause=e,r.name=e.name,s&&Object.assign(r,s),r};const Ih=null;function Ns(e){return R.isPlainObject(e)||R.isArray(e)}function zc(e){return R.endsWith(e,"[]")?e.slice(0,-2):e}function ua(e,t,n){return e?e.concat(t).map(function(o,s){return o=zc(o),!n&&s?"["+o+"]":o}).join(n?".":""):t}function Oh(e){return R.isArray(e)&&!e.some(Ns)}const Ph=R.toFlatObject(R,{},null,function(t){return/^is[A-Z]/.test(t)});function Oo(e,t,n){if(!R.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=R.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(I,O){return!R.isUndefined(O[I])});const i=n.metaTokens,o=n.visitor||l,s=n.dots,r=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&R.isSpecCompliantForm(t);if(!R.isFunction(o))throw new TypeError("visitor must be a function");function d(C){if(C===null)return"";if(R.isDate(C))return C.toISOString();if(!c&&R.isBlob(C))throw new de("Blob is not supported. Use a Buffer instead.");return R.isArrayBuffer(C)||R.isTypedArray(C)?c&&typeof Blob=="function"?new Blob([C]):Buffer.from(C):C}function l(C,I,O){let M=C;if(C&&!O&&typeof C=="object"){if(R.endsWith(I,"{}"))I=i?I:I.slice(0,-2),C=JSON.stringify(C);else if(R.isArray(C)&&Oh(C)||(R.isFileList(C)||R.endsWith(I,"[]"))&&(M=R.toArray(C)))return I=zc(I),M.forEach(function(B,q){!(R.isUndefined(B)||B===null)&&t.append(r===!0?ua([I],q,s):r===null?I:I+"[]",d(B))}),!1}return Ns(C)?!0:(t.append(ua(O,I,s),d(C)),!1)}const h=[],_=Object.assign(Ph,{defaultVisitor:l,convertValue:d,isVisitable:Ns});function g(C,I){if(!R.isUndefined(C)){if(h.indexOf(C)!==-1)throw Error("Circular reference detected in "+I.join("."));h.push(C),R.forEach(C,function(M,j){(!(R.isUndefined(M)||M===null)&&o.call(t,M,R.isString(j)?j.trim():j,I,_))===!0&&g(M,I?I.concat(j):[j])}),h.pop()}}if(!R.isObject(e))throw new TypeError("data must be an object");return g(e),t}function fa(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function fr(e,t){this._pairs=[],e&&Oo(e,this,t)}const Gc=fr.prototype;Gc.append=function(t,n){this._pairs.push([t,n])};Gc.toString=function(t){const n=t?function(i){return t.call(this,i,fa)}:fa;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function jh(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Wc(e,t,n){if(!t)return e;const i=n&&n.encode||jh,o=n&&n.serialize;let s;if(o?s=o(t,n):s=R.isURLSearchParams(t)?t.toString():new fr(t,n).toString(i),s){const r=e.indexOf("#");r!==-1&&(e=e.slice(0,r)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class Mh{constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){R.forEach(this.handlers,function(i){i!==null&&t(i)})}}const ha=Mh,Xc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Eh=typeof URLSearchParams<"u"?URLSearchParams:fr,Bh=typeof FormData<"u"?FormData:null,Rh=typeof Blob<"u"?Blob:null,Dh={isBrowser:!0,classes:{URLSearchParams:Eh,FormData:Bh,Blob:Rh},protocols:["http","https","file","blob","url","data"]},hr=typeof window<"u"&&typeof document<"u",qs=typeof navigator=="object"&&navigator||void 0,Nh=hr&&(!qs||["ReactNative","NativeScript","NS"].indexOf(qs.product)<0),qh=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),$h=hr&&window.location.href||"http://localhost",Fh=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:hr,hasStandardBrowserEnv:Nh,hasStandardBrowserWebWorkerEnv:qh,navigator:qs,origin:$h},Symbol.toStringTag,{value:"Module"})),Dt={...Fh,...Dh};function Lh(e,t){return Oo(e,new Dt.classes.URLSearchParams,Object.assign({visitor:function(n,i,o,s){return Dt.isNode&&R.isBuffer(n)?(this.append(i,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function Uh(e){return R.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Kh(e){const t={},n=Object.keys(e);let i;const o=n.length;let s;for(i=0;i<o;i++)s=n[i],t[s]=e[s];return t}function Hc(e){function t(n,i,o,s){let r=n[s++];if(r==="__proto__")return!0;const a=Number.isFinite(+r),c=s>=n.length;return r=!r&&R.isArray(o)?o.length:r,c?(R.hasOwnProp(o,r)?o[r]=[o[r],i]:o[r]=i,!a):((!o[r]||!R.isObject(o[r]))&&(o[r]=[]),t(n,i,o[r],s)&&R.isArray(o[r])&&(o[r]=Kh(o[r])),!a)}if(R.isFormData(e)&&R.isFunction(e.entries)){const n={};return R.forEachEntry(e,(i,o)=>{t(Uh(i),o,n,0)}),n}return null}function Vh(e,t,n){if(R.isString(e))try{return(t||JSON.parse)(e),R.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}const pr={transitional:Xc,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const i=n.getContentType()||"",o=i.indexOf("application/json")>-1,s=R.isObject(t);if(s&&R.isHTMLForm(t)&&(t=new FormData(t)),R.isFormData(t))return o?JSON.stringify(Hc(t)):t;if(R.isArrayBuffer(t)||R.isBuffer(t)||R.isStream(t)||R.isFile(t)||R.isBlob(t)||R.isReadableStream(t))return t;if(R.isArrayBufferView(t))return t.buffer;if(R.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Lh(t,this.formSerializer).toString();if((a=R.isFileList(t))||i.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Oo(a?{"files[]":t}:t,c&&new c,this.formSerializer)}}return s||o?(n.setContentType("application/json",!1),Vh(t)):t}],transformResponse:[function(t){const n=this.transitional||pr.transitional,i=n&&n.forcedJSONParsing,o=this.responseType==="json";if(R.isResponse(t)||R.isReadableStream(t))return t;if(t&&R.isString(t)&&(i&&!this.responseType||o)){const r=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(a){if(r)throw a.name==="SyntaxError"?de.from(a,de.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Dt.classes.FormData,Blob:Dt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};R.forEach(["delete","get","head","post","put","patch"],e=>{pr.headers[e]={}});const _r=pr,zh=R.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Gh=e=>{const t={};let n,i,o;return e&&e.split(`
`).forEach(function(r){o=r.indexOf(":"),n=r.substring(0,o).trim().toLowerCase(),i=r.substring(o+1).trim(),!(!n||t[n]&&zh[n])&&(n==="set-cookie"?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t},pa=Symbol("internals");function fi(e){return e&&String(e).trim().toLowerCase()}function oo(e){return e===!1||e==null?e:R.isArray(e)?e.map(oo):String(e)}function Wh(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}const Xh=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function fs(e,t,n,i,o){if(R.isFunction(i))return i.call(this,t,n);if(o&&(t=n),!!R.isString(t)){if(R.isString(i))return t.indexOf(i)!==-1;if(R.isRegExp(i))return i.test(t)}}function Hh(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,i)=>n.toUpperCase()+i)}function Jh(e,t){const n=R.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(o,s,r){return this[i].call(this,t,o,s,r)},configurable:!0})})}class Po{constructor(t){t&&this.set(t)}set(t,n,i){const o=this;function s(a,c,d){const l=fi(c);if(!l)throw new Error("header name must be a non-empty string");const h=R.findKey(o,l);(!h||o[h]===void 0||d===!0||d===void 0&&o[h]!==!1)&&(o[h||c]=oo(a))}const r=(a,c)=>R.forEach(a,(d,l)=>s(d,l,c));if(R.isPlainObject(t)||t instanceof this.constructor)r(t,n);else if(R.isString(t)&&(t=t.trim())&&!Xh(t))r(Gh(t),n);else if(R.isHeaders(t))for(const[a,c]of t.entries())s(c,a,i);else t!=null&&s(n,t,i);return this}get(t,n){if(t=fi(t),t){const i=R.findKey(this,t);if(i){const o=this[i];if(!n)return o;if(n===!0)return Wh(o);if(R.isFunction(n))return n.call(this,o,i);if(R.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=fi(t),t){const i=R.findKey(this,t);return!!(i&&this[i]!==void 0&&(!n||fs(this,this[i],i,n)))}return!1}delete(t,n){const i=this;let o=!1;function s(r){if(r=fi(r),r){const a=R.findKey(i,r);a&&(!n||fs(i,i[a],a,n))&&(delete i[a],o=!0)}}return R.isArray(t)?t.forEach(s):s(t),o}clear(t){const n=Object.keys(this);let i=n.length,o=!1;for(;i--;){const s=n[i];(!t||fs(this,this[s],s,t,!0))&&(delete this[s],o=!0)}return o}normalize(t){const n=this,i={};return R.forEach(this,(o,s)=>{const r=R.findKey(i,s);if(r){n[r]=oo(o),delete n[s];return}const a=t?Hh(s):String(s).trim();a!==s&&delete n[s],n[a]=oo(o),i[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return R.forEach(this,(i,o)=>{i!=null&&i!==!1&&(n[o]=t&&R.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const i=new this(t);return n.forEach(o=>i.set(o)),i}static accessor(t){const i=(this[pa]=this[pa]={accessors:{}}).accessors,o=this.prototype;function s(r){const a=fi(r);i[a]||(Jh(o,r),i[a]=!0)}return R.isArray(t)?t.forEach(s):s(t),this}}Po.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);R.reduceDescriptors(Po.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[n]=i}}});R.freezeMethods(Po);const Jt=Po;function hs(e,t){const n=this||_r,i=t||n,o=Jt.from(i.headers);let s=i.data;return R.forEach(e,function(a){s=a.call(n,s,o.normalize(),t?t.status:void 0)}),o.normalize(),s}function Jc(e){return!!(e&&e.__CANCEL__)}function di(e,t,n){de.call(this,e??"canceled",de.ERR_CANCELED,t,n),this.name="CanceledError"}R.inherits(di,de,{__CANCEL__:!0});function Zc(e,t,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new de("Request failed with status code "+n.status,[de.ERR_BAD_REQUEST,de.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Zh(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Qh(e,t){e=e||10;const n=new Array(e),i=new Array(e);let o=0,s=0,r;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),l=i[s];r||(r=d),n[o]=c,i[o]=d;let h=s,_=0;for(;h!==o;)_+=n[h++],h=h%e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),d-r<t)return;const g=l&&d-l;return g?Math.round(_*1e3/g):void 0}}function Yh(e,t){let n=0,i=1e3/t,o,s;const r=(d,l=Date.now())=>{n=l,o=null,s&&(clearTimeout(s),s=null),e.apply(null,d)};return[(...d)=>{const l=Date.now(),h=l-n;h>=i?r(d,l):(o=d,s||(s=setTimeout(()=>{s=null,r(o)},i-h)))},()=>o&&r(o)]}const ho=(e,t,n=3)=>{let i=0;const o=Qh(50,250);return Yh(s=>{const r=s.loaded,a=s.lengthComputable?s.total:void 0,c=r-i,d=o(c),l=r<=a;i=r;const h={loaded:r,total:a,progress:a?r/a:void 0,bytes:c,rate:d||void 0,estimated:d&&a&&l?(a-r)/d:void 0,event:s,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(h)},n)},_a=(e,t)=>{const n=e!=null;return[i=>t[0]({lengthComputable:n,total:e,loaded:i}),t[1]]},ba=e=>(...t)=>R.asap(()=>e(...t)),ep=Dt.hasStandardBrowserEnv?function(){const t=Dt.navigator&&/(msie|trident)/i.test(Dt.navigator.userAgent),n=document.createElement("a");let i;function o(s){let r=s;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=o(window.location.href),function(r){const a=R.isString(r)?o(r):r;return a.protocol===i.protocol&&a.host===i.host}}():function(){return function(){return!0}}(),tp=Dt.hasStandardBrowserEnv?{write(e,t,n,i,o,s){const r=[e+"="+encodeURIComponent(t)];R.isNumber(n)&&r.push("expires="+new Date(n).toGMTString()),R.isString(i)&&r.push("path="+i),R.isString(o)&&r.push("domain="+o),s===!0&&r.push("secure"),document.cookie=r.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function np(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function ip(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Qc(e,t){return e&&!np(t)?ip(e,t):t}const ma=e=>e instanceof Jt?{...e}:e;function Fn(e,t){t=t||{};const n={};function i(d,l,h){return R.isPlainObject(d)&&R.isPlainObject(l)?R.merge.call({caseless:h},d,l):R.isPlainObject(l)?R.merge({},l):R.isArray(l)?l.slice():l}function o(d,l,h){if(R.isUndefined(l)){if(!R.isUndefined(d))return i(void 0,d,h)}else return i(d,l,h)}function s(d,l){if(!R.isUndefined(l))return i(void 0,l)}function r(d,l){if(R.isUndefined(l)){if(!R.isUndefined(d))return i(void 0,d)}else return i(void 0,l)}function a(d,l,h){if(h in t)return i(d,l);if(h in e)return i(void 0,d)}const c={url:s,method:s,data:s,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,withXSRFToken:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:a,headers:(d,l)=>o(ma(d),ma(l),!0)};return R.forEach(Object.keys(Object.assign({},e,t)),function(l){const h=c[l]||o,_=h(e[l],t[l],l);R.isUndefined(_)&&h!==a||(n[l]=_)}),n}const Yc=e=>{const t=Fn({},e);let{data:n,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:s,headers:r,auth:a}=t;t.headers=r=Jt.from(r),t.url=Wc(Qc(t.baseURL,t.url),e.params,e.paramsSerializer),a&&r.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let c;if(R.isFormData(n)){if(Dt.hasStandardBrowserEnv||Dt.hasStandardBrowserWebWorkerEnv)r.setContentType(void 0);else if((c=r.getContentType())!==!1){const[d,...l]=c?c.split(";").map(h=>h.trim()).filter(Boolean):[];r.setContentType([d||"multipart/form-data",...l].join("; "))}}if(Dt.hasStandardBrowserEnv&&(i&&R.isFunction(i)&&(i=i(t)),i||i!==!1&&ep(t.url))){const d=o&&s&&tp.read(s);d&&r.set(o,d)}return t},op=typeof XMLHttpRequest<"u",sp=op&&function(e){return new Promise(function(n,i){const o=Yc(e);let s=o.data;const r=Jt.from(o.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:d}=o,l,h,_,g,C;function I(){g&&g(),C&&C(),o.cancelToken&&o.cancelToken.unsubscribe(l),o.signal&&o.signal.removeEventListener("abort",l)}let O=new XMLHttpRequest;O.open(o.method.toUpperCase(),o.url,!0),O.timeout=o.timeout;function M(){if(!O)return;const B=Jt.from("getAllResponseHeaders"in O&&O.getAllResponseHeaders()),Z={data:!a||a==="text"||a==="json"?O.responseText:O.response,status:O.status,statusText:O.statusText,headers:B,config:e,request:O};Zc(function(ce){n(ce),I()},function(ce){i(ce),I()},Z),O=null}"onloadend"in O?O.onloadend=M:O.onreadystatechange=function(){!O||O.readyState!==4||O.status===0&&!(O.responseURL&&O.responseURL.indexOf("file:")===0)||setTimeout(M)},O.onabort=function(){O&&(i(new de("Request aborted",de.ECONNABORTED,e,O)),O=null)},O.onerror=function(){i(new de("Network Error",de.ERR_NETWORK,e,O)),O=null},O.ontimeout=function(){let q=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const Z=o.transitional||Xc;o.timeoutErrorMessage&&(q=o.timeoutErrorMessage),i(new de(q,Z.clarifyTimeoutError?de.ETIMEDOUT:de.ECONNABORTED,e,O)),O=null},s===void 0&&r.setContentType(null),"setRequestHeader"in O&&R.forEach(r.toJSON(),function(q,Z){O.setRequestHeader(Z,q)}),R.isUndefined(o.withCredentials)||(O.withCredentials=!!o.withCredentials),a&&a!=="json"&&(O.responseType=o.responseType),d&&([_,C]=ho(d,!0),O.addEventListener("progress",_)),c&&O.upload&&([h,g]=ho(c),O.upload.addEventListener("progress",h),O.upload.addEventListener("loadend",g)),(o.cancelToken||o.signal)&&(l=B=>{O&&(i(!B||B.type?new di(null,e,O):B),O.abort(),O=null)},o.cancelToken&&o.cancelToken.subscribe(l),o.signal&&(o.signal.aborted?l():o.signal.addEventListener("abort",l)));const j=Zh(o.url);if(j&&Dt.protocols.indexOf(j)===-1){i(new de("Unsupported protocol "+j+":",de.ERR_BAD_REQUEST,e));return}O.send(s||null)})},rp=(e,t)=>{let n=new AbortController,i;const o=function(c){if(!i){i=!0,r();const d=c instanceof Error?c:this.reason;n.abort(d instanceof de?d:new di(d instanceof Error?d.message:d))}};let s=t&&setTimeout(()=>{o(new de(`timeout ${t} of ms exceeded`,de.ETIMEDOUT))},t);const r=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(c=>{c&&(c.removeEventListener?c.removeEventListener("abort",o):c.unsubscribe(o))}),e=null)};e.forEach(c=>c&&c.addEventListener&&c.addEventListener("abort",o));const{signal:a}=n;return a.unsubscribe=r,[a,()=>{s&&clearTimeout(s),s=null}]},ap=rp,cp=function*(e,t){let n=e.byteLength;if(!t||n<t){yield e;return}let i=0,o;for(;i<n;)o=i+t,yield e.slice(i,o),i=o},dp=async function*(e,t,n){for await(const i of e)yield*cp(ArrayBuffer.isView(i)?i:await n(String(i)),t)},ga=(e,t,n,i,o)=>{const s=dp(e,t,o);let r=0,a,c=d=>{a||(a=!0,i&&i(d))};return new ReadableStream({async pull(d){try{const{done:l,value:h}=await s.next();if(l){c(),d.close();return}let _=h.byteLength;if(n){let g=r+=_;n(g)}d.enqueue(new Uint8Array(h))}catch(l){throw c(l),l}},cancel(d){return c(d),s.return()}},{highWaterMark:2})},jo=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",ed=jo&&typeof ReadableStream=="function",$s=jo&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),td=(e,...t)=>{try{return!!e(...t)}catch{return!1}},lp=ed&&td(()=>{let e=!1;const t=new Request(Dt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),ya=64*1024,Fs=ed&&td(()=>R.isReadableStream(new Response("").body)),po={stream:Fs&&(e=>e.body)};jo&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!po[t]&&(po[t]=R.isFunction(e[t])?n=>n[t]():(n,i)=>{throw new de(`Response type '${t}' is not supported`,de.ERR_NOT_SUPPORT,i)})})})(new Response);const up=async e=>{if(e==null)return 0;if(R.isBlob(e))return e.size;if(R.isSpecCompliantForm(e))return(await new Request(e).arrayBuffer()).byteLength;if(R.isArrayBufferView(e)||R.isArrayBuffer(e))return e.byteLength;if(R.isURLSearchParams(e)&&(e=e+""),R.isString(e))return(await $s(e)).byteLength},fp=async(e,t)=>{const n=R.toFiniteNumber(e.getContentLength());return n??up(t)},hp=jo&&(async e=>{let{url:t,method:n,data:i,signal:o,cancelToken:s,timeout:r,onDownloadProgress:a,onUploadProgress:c,responseType:d,headers:l,withCredentials:h="same-origin",fetchOptions:_}=Yc(e);d=d?(d+"").toLowerCase():"text";let[g,C]=o||s||r?ap([o,s],r):[],I,O;const M=()=>{!I&&setTimeout(()=>{g&&g.unsubscribe()}),I=!0};let j;try{if(c&&lp&&n!=="get"&&n!=="head"&&(j=await fp(l,i))!==0){let ce=new Request(t,{method:"POST",body:i,duplex:"half"}),we;if(R.isFormData(i)&&(we=ce.headers.get("content-type"))&&l.setContentType(we),ce.body){const[Pe,Q]=_a(j,ho(ba(c)));i=ga(ce.body,ya,Pe,Q,$s)}}R.isString(h)||(h=h?"include":"omit");const B="credentials"in Request.prototype;O=new Request(t,{..._,signal:g,method:n.toUpperCase(),headers:l.normalize().toJSON(),body:i,duplex:"half",credentials:B?h:void 0});let q=await fetch(O);const Z=Fs&&(d==="stream"||d==="response");if(Fs&&(a||Z)){const ce={};["status","statusText","headers"].forEach(W=>{ce[W]=q[W]});const we=R.toFiniteNumber(q.headers.get("content-length")),[Pe,Q]=a&&_a(we,ho(ba(a),!0))||[];q=new Response(ga(q.body,ya,Pe,()=>{Q&&Q(),Z&&M()},$s),ce)}d=d||"text";let H=await po[R.findKey(po,d)||"text"](q,e);return!Z&&M(),C&&C(),await new Promise((ce,we)=>{Zc(ce,we,{data:H,headers:Jt.from(q.headers),status:q.status,statusText:q.statusText,config:e,request:O})})}catch(B){throw M(),B&&B.name==="TypeError"&&/fetch/i.test(B.message)?Object.assign(new de("Network Error",de.ERR_NETWORK,e,O),{cause:B.cause||B}):de.from(B,B&&B.code,e,O)}}),Ls={http:Ih,xhr:sp,fetch:hp};R.forEach(Ls,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const wa=e=>`- ${e}`,pp=e=>R.isFunction(e)||e===null||e===!1,nd={getAdapter:e=>{e=R.isArray(e)?e:[e];const{length:t}=e;let n,i;const o={};for(let s=0;s<t;s++){n=e[s];let r;if(i=n,!pp(n)&&(i=Ls[(r=String(n)).toLowerCase()],i===void 0))throw new de(`Unknown adapter '${r}'`);if(i)break;o[r||"#"+s]=i}if(!i){const s=Object.entries(o).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let r=t?s.length>1?`since :
`+s.map(wa).join(`
`):" "+wa(s[0]):"as no adapter specified";throw new de("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return i},adapters:Ls};function ps(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new di(null,e)}function va(e){return ps(e),e.headers=Jt.from(e.headers),e.data=hs.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),nd.getAdapter(e.adapter||_r.adapter)(e).then(function(i){return ps(e),i.data=hs.call(e,e.transformResponse,i),i.headers=Jt.from(i.headers),i},function(i){return Jc(i)||(ps(e),i&&i.response&&(i.response.data=hs.call(e,e.transformResponse,i.response),i.response.headers=Jt.from(i.response.headers))),Promise.reject(i)})}const id="1.7.5",br={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{br[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const ka={};br.transitional=function(t,n,i){function o(s,r){return"[Axios v"+id+"] Transitional option '"+s+"'"+r+(i?". "+i:"")}return(s,r,a)=>{if(t===!1)throw new de(o(r," has been removed"+(n?" in "+n:"")),de.ERR_DEPRECATED);return n&&!ka[r]&&(ka[r]=!0,console.warn(o(r," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,r,a):!0}};function _p(e,t,n){if(typeof e!="object")throw new de("options must be an object",de.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let o=i.length;for(;o-- >0;){const s=i[o],r=t[s];if(r){const a=e[s],c=a===void 0||r(a,s,e);if(c!==!0)throw new de("option "+s+" must be "+c,de.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new de("Unknown option "+s,de.ERR_BAD_OPTION)}}const Us={assertOptions:_p,validators:br},vn=Us.validators;class _o{constructor(t){this.defaults=t,this.interceptors={request:new ha,response:new ha}}async request(t,n){try{return await this._request(t,n)}catch(i){if(i instanceof Error){let o;Error.captureStackTrace?Error.captureStackTrace(o={}):o=new Error;const s=o.stack?o.stack.replace(/^.+\n/,""):"";try{i.stack?s&&!String(i.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+s):i.stack=s}catch{}}throw i}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Fn(this.defaults,n);const{transitional:i,paramsSerializer:o,headers:s}=n;i!==void 0&&Us.assertOptions(i,{silentJSONParsing:vn.transitional(vn.boolean),forcedJSONParsing:vn.transitional(vn.boolean),clarifyTimeoutError:vn.transitional(vn.boolean)},!1),o!=null&&(R.isFunction(o)?n.paramsSerializer={serialize:o}:Us.assertOptions(o,{encode:vn.function,serialize:vn.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let r=s&&R.merge(s.common,s[n.method]);s&&R.forEach(["delete","get","head","post","put","patch","common"],C=>{delete s[C]}),n.headers=Jt.concat(r,s);const a=[];let c=!0;this.interceptors.request.forEach(function(I){typeof I.runWhen=="function"&&I.runWhen(n)===!1||(c=c&&I.synchronous,a.unshift(I.fulfilled,I.rejected))});const d=[];this.interceptors.response.forEach(function(I){d.push(I.fulfilled,I.rejected)});let l,h=0,_;if(!c){const C=[va.bind(this),void 0];for(C.unshift.apply(C,a),C.push.apply(C,d),_=C.length,l=Promise.resolve(n);h<_;)l=l.then(C[h++],C[h++]);return l}_=a.length;let g=n;for(h=0;h<_;){const C=a[h++],I=a[h++];try{g=C(g)}catch(O){I.call(this,O);break}}try{l=va.call(this,g)}catch(C){return Promise.reject(C)}for(h=0,_=d.length;h<_;)l=l.then(d[h++],d[h++]);return l}getUri(t){t=Fn(this.defaults,t);const n=Qc(t.baseURL,t.url);return Wc(n,t.params,t.paramsSerializer)}}R.forEach(["delete","get","head","options"],function(t){_o.prototype[t]=function(n,i){return this.request(Fn(i||{},{method:t,url:n,data:(i||{}).data}))}});R.forEach(["post","put","patch"],function(t){function n(i){return function(s,r,a){return this.request(Fn(a||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:r}))}}_o.prototype[t]=n(),_o.prototype[t+"Form"]=n(!0)});const so=_o;class mr{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const i=this;this.promise.then(o=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](o);i._listeners=null}),this.promise.then=o=>{let s;const r=new Promise(a=>{i.subscribe(a),s=a}).then(o);return r.cancel=function(){i.unsubscribe(s)},r},t(function(s,r,a){i.reason||(i.reason=new di(s,r,a),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new mr(function(o){t=o}),cancel:t}}}const bp=mr;function mp(e){return function(n){return e.apply(null,n)}}function gp(e){return R.isObject(e)&&e.isAxiosError===!0}const Ks={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ks).forEach(([e,t])=>{Ks[t]=e});const yp=Ks;function od(e){const t=new so(e),n=Rc(so.prototype.request,t);return R.extend(n,so.prototype,t,{allOwnKeys:!0}),R.extend(n,t,null,{allOwnKeys:!0}),n.create=function(o){return od(Fn(e,o))},n}const _t=od(_r);_t.Axios=so;_t.CanceledError=di;_t.CancelToken=bp;_t.isCancel=Jc;_t.VERSION=id;_t.toFormData=Oo;_t.AxiosError=de;_t.Cancel=_t.CanceledError;_t.all=function(t){return Promise.all(t)};_t.spread=mp;_t.isAxiosError=gp;_t.mergeConfig=Fn;_t.AxiosHeaders=Jt;_t.formToJSON=e=>Hc(R.isHTMLForm(e)?new FormData(e):e);_t.getAdapter=nd.getAdapter;_t.HttpStatusCode=yp;_t.default=_t;const wp=_t,vp="1.6.0",kp="1.32.0",Cp={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"};class sd extends Error{}class rd extends sd{constructor(t,n){super(t),this.code=n,this.type=Cp[n]??"ServerError"}}class Ap extends sd{constructor(t,n,i){super(t),this.status=n,this.statusText=i}}var ad=e=>{throw TypeError(e)},gr=(e,t,n)=>t.has(e)||ad("Cannot "+n),xe=(e,t,n)=>(gr(e,t,"read from private field"),n?n.call(e):t.get(e)),On=(e,t,n)=>t.has(e)?ad("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ei=(e,t,n,i)=>(gr(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),cd=(e,t,n)=>(gr(e,t,"access private method"),n),Sp=(e,t,n,i)=>({set _(o){ei(e,t,o,n)},get _(){return xe(e,t,i)}}),Mn,vi,_n,Dn,Ei,ti,bo,dd,ld;function Tp(e){const t=new URL(e);return t.protocol=t.protocol.replace("http","ws"),t.toString()}const xp={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};class Ip{constructor(t,n={}){if(On(this,bo),On(this,Mn,0),On(this,vi,0),On(this,_n,null),On(this,Dn,null),On(this,Ei,new Set),On(this,ti,new Map),this.endpoint=t,this.options={...xp,...n},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=Tp(this.endpoint))}async makeRequest(t,n){const i=await cd(this,bo,dd).call(this);return new Promise((o,s)=>{ei(this,Mn,xe(this,Mn)+1),xe(this,ti).set(xe(this,Mn),{resolve:o,reject:s,timeout:setTimeout(()=>{xe(this,ti).delete(xe(this,Mn)),s(new Error(`Request timeout: ${t}`))},this.options.callTimeout)}),i.send(JSON.stringify({jsonrpc:"2.0",id:xe(this,Mn),method:t,params:n}))}).then(({error:o,result:s})=>{if(o)throw new rd(o.message,o.code);return s})}async subscribe(t){const n=new Op(t);return xe(this,Ei).add(n),await n.subscribe(this),()=>n.unsubscribe(this)}}Mn=new WeakMap;vi=new WeakMap;_n=new WeakMap;Dn=new WeakMap;Ei=new WeakMap;ti=new WeakMap;bo=new WeakSet;dd=function(){return xe(this,Dn)?xe(this,Dn):(ei(this,Dn,new Promise(e=>{var t;(t=xe(this,_n))==null||t.close(),ei(this,_n,new this.options.WebSocketConstructor(this.endpoint)),xe(this,_n).addEventListener("open",()=>{ei(this,vi,0),e(xe(this,_n))}),xe(this,_n).addEventListener("close",()=>{Sp(this,vi)._++,xe(this,vi)<=this.options.maxReconnects&&setTimeout(()=>{cd(this,bo,ld).call(this)},this.options.reconnectTimeout)}),xe(this,_n).addEventListener("message",({data:n})=>{let i;try{i=JSON.parse(n)}catch(o){console.error(new Error(`Failed to parse RPC message: ${n}`,{cause:o}));return}if("id"in i&&i.id!=null&&xe(this,ti).has(i.id)){const{resolve:o,timeout:s}=xe(this,ti).get(i.id);clearTimeout(s),o(i)}else if("params"in i){const{params:o}=i;xe(this,Ei).forEach(s=>{s.subscriptionId===o.subscription&&o.subscription===s.subscriptionId&&s.onMessage(o.result)})}})})),xe(this,Dn))};ld=async function(){var e;return(e=xe(this,_n))==null||e.close(),ei(this,Dn,null),Promise.allSettled([...xe(this,Ei)].map(t=>t.subscribe(this)))};class Op{constructor(t){this.subscriptionId=null,this.subscribed=!1,this.input=t}onMessage(t){this.subscribed&&this.input.onMessage(t)}async unsubscribe(t){const{subscriptionId:n}=this;return this.subscribed=!1,n==null?!1:(this.subscriptionId=null,t.makeRequest(this.input.unsubscribe,[n]))}async subscribe(t){this.subscriptionId=null,this.subscribed=!0;const n=await t.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=n)}}var ud=e=>{throw TypeError(e)},yr=(e,t,n)=>t.has(e)||ud("Cannot "+n),Lt=(e,t,n)=>(yr(e,t,"read from private field"),n?n.call(e):t.get(e)),Vi=(e,t,n)=>t.has(e)?ud("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Vs=(e,t,n,i)=>(yr(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),Pp=(e,t,n)=>(yr(e,t,"access private method"),n),mi,Wt,ki,zs,fd;class jp{constructor(t){Vi(this,zs),Vi(this,mi,0),Vi(this,Wt),Vi(this,ki),Vs(this,Wt,t)}fetch(t,n){const i=Lt(this,Wt).fetch??fetch;if(!i)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return i(t,n)}async request(t){var o,s;Vs(this,mi,Lt(this,mi)+1);const n=await this.fetch(((o=Lt(this,Wt).rpc)==null?void 0:o.url)??Lt(this,Wt).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":vp,"Client-Target-Api-Version":kp,...(s=Lt(this,Wt).rpc)==null?void 0:s.headers},body:JSON.stringify({jsonrpc:"2.0",id:Lt(this,mi),method:t.method,params:t.params})});if(!n.ok)throw new Ap(`Unexpected status code: ${n.status}`,n.status,n.statusText);const i=await n.json();if("error"in i&&i.error!=null)throw new rd(i.error.message,i.error.code);return i.result}async subscribe(t){const n=await Pp(this,zs,fd).call(this).subscribe(t);return async()=>!!await n()}}mi=new WeakMap;Wt=new WeakMap;ki=new WeakMap;zs=new WeakSet;fd=function(){var e;if(!Lt(this,ki)){const t=Lt(this,Wt).WebSocketConstructor??WebSocket;if(!t)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");Vs(this,ki,new Ip(((e=Lt(this,Wt).websocket)==null?void 0:e.url)??Lt(this,Wt).url,{WebSocketConstructor:t,...Lt(this,Wt).websocket}))}return Lt(this,ki)};const Mp=Symbol.for("@mysten/SuiClient");class Ep{get[Mp](){return!0}constructor(t){this.transport=t.transport??new jp({url:t.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(t){if(!t.owner||!nn(ae(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[t.owner,t.coinType,t.cursor,t.limit]})}async getAllCoins(t){if(!t.owner||!nn(ae(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[t.owner,t.cursor,t.limit]})}async getBalance(t){if(!t.owner||!nn(ae(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[t.owner,t.coinType]})}async getAllBalances(t){if(!t.owner||!nn(ae(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[t.owner]})}async getCoinMetadata(t){return await this.transport.request({method:"suix_getCoinMetadata",params:[t.coinType]})}async getTotalSupply(t){return await this.transport.request({method:"suix_getTotalSupply",params:[t.coinType]})}async call(t,n){return await this.transport.request({method:t,params:n})}async getMoveFunctionArgTypes(t){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[t.package,t.module,t.function]})}async getNormalizedMoveModulesByPackage(t){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[t.package]})}async getNormalizedMoveModule(t){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[t.package,t.module]})}async getNormalizedMoveFunction(t){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[t.package,t.module,t.function]})}async getNormalizedMoveStruct(t){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[t.package,t.module,t.struct]})}async getOwnedObjects(t){if(!t.owner||!nn(ae(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[t.owner,{filter:t.filter,options:t.options},t.cursor,t.limit]})}async getObject(t){if(!t.id||!bi(me(t.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[t.id,t.options]})}async tryGetPastObject(t){return await this.transport.request({method:"sui_tryGetPastObject",params:[t.id,t.version,t.options]})}async multiGetObjects(t){if(t.ids.forEach(i=>{if(!i||!bi(me(i)))throw new Error(`Invalid Sui Object id ${i}`)}),t.ids.length!==new Set(t.ids).size)throw new Error(`Duplicate object ids in batch call ${t.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[t.ids,t.options]})}async queryTransactionBlocks(t){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:t.filter,options:t.options},t.cursor,t.limit,(t.order||"descending")==="descending"]})}async getTransactionBlock(t){if(!Qr(t.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[t.digest,t.options]})}async multiGetTransactionBlocks(t){if(t.digests.forEach(i=>{if(!Qr(i))throw new Error(`Invalid Transaction digest ${i}`)}),t.digests.length!==new Set(t.digests).size)throw new Error(`Duplicate digests in batch call ${t.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[t.digests,t.options]})}async executeTransactionBlock({transactionBlock:t,signature:n,options:i,requestType:o}){const s=await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof t=="string"?t:xt(t),Array.isArray(n)?n:[n],i]});if(o==="WaitForLocalExecution")try{await this.waitForTransaction({digest:s.digest})}catch{}return s}async signAndExecuteTransaction({transaction:t,signer:n,...i}){let o;t instanceof Uint8Array?o=t:(t.setSenderIfNotSet(n.toSuiAddress()),o=await t.build({client:this}));const{signature:s,bytes:r}=await n.signTransaction(o);return this.executeTransactionBlock({transactionBlock:r,signature:s,...i})}async getTotalTransactionBlocks(){const t=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(t)}async getReferenceGasPrice(){const t=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(t)}async getStakes(t){if(!t.owner||!nn(ae(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[t.owner]})}async getStakesByIds(t){return t.stakedSuiIds.forEach(n=>{if(!n||!bi(me(n)))throw new Error(`Invalid Sui Stake id ${n}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[t.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(t){return await this.transport.request({method:"suix_queryEvents",params:[t.query,t.cursor,t.limit,(t.order||"descending")==="descending"]})}async subscribeEvent(t){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[t.filter],onMessage:t.onMessage})}async subscribeTransaction(t){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[t.filter],onMessage:t.onMessage})}async devInspectTransactionBlock(t){var i;let n;if(Bc(t.transactionBlock))t.transactionBlock.setSenderIfNotSet(t.sender),n=xt(await t.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof t.transactionBlock=="string")n=t.transactionBlock;else if(t.transactionBlock instanceof Uint8Array)n=xt(t.transactionBlock);else throw new Error("Unknown transaction block format.");return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[t.sender,n,(i=t.gasPrice)==null?void 0:i.toString(),t.epoch]})}async dryRunTransactionBlock(t){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof t.transactionBlock=="string"?t.transactionBlock:xt(t.transactionBlock)]})}async getDynamicFields(t){if(!t.parentId||!bi(me(t.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[t.parentId,t.cursor,t.limit]})}async getDynamicFieldObject(t){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[t.parentId,t.name]})}async getLatestCheckpointSequenceNumber(){const t=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(t)}async getCheckpoint(t){return await this.transport.request({method:"sui_getCheckpoint",params:[t.id]})}async getCheckpoints(t){return await this.transport.request({method:"sui_getCheckpoints",params:[t.cursor,t==null?void 0:t.limit,t.descendingOrder]})}async getCommitteeInfo(t){return await this.transport.request({method:"suix_getCommitteeInfo",params:[t==null?void 0:t.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(t){return await this.transport.request({method:"suix_getEpochMetrics",params:[t==null?void 0:t.cursor,t==null?void 0:t.limit,t==null?void 0:t.descendingOrder]})}async getAllEpochAddressMetrics(t){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[t==null?void 0:t.descendingOrder]})}async getEpochs(t){return await this.transport.request({method:"suix_getEpochs",params:[t==null?void 0:t.cursor,t==null?void 0:t.limit,t==null?void 0:t.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){const t=await this.getCheckpoint({id:"0"}),n=Ii(t.digest);return Oi(n.slice(0,4))}async resolveNameServiceAddress(t){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[t.name]})}async resolveNameServiceNames({format:t="dot",...n}){const{nextCursor:i,hasNextPage:o,data:s}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[n.address,n.cursor,n.limit]});return{hasNextPage:o,nextCursor:i,data:s.map(r=>ou(r,t))}}async getProtocolConfig(t){return await this.transport.request({method:"sui_getProtocolConfig",params:[t==null?void 0:t.version]})}async waitForTransaction({signal:t,timeout:n=60*1e3,pollInterval:i=2*1e3,...o}){const s=AbortSignal.timeout(n),r=new Promise((a,c)=>{s.addEventListener("abort",()=>c(s.reason))});for(r.catch(()=>{});!s.aborted;){t==null||t.throwIfAborted();try{return await this.getTransactionBlock(o)}catch{await Promise.race([new Promise(c=>setTimeout(c,i)),r])}}throw s.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}}var Bp=Object.defineProperty,Rp=(e,t,n)=>t in e?Bp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Dp=(e,t,n)=>(Rp(e,typeof t!="symbol"?t+"":t,n),n),qt=5*60*1e3,z=24*60*60*1e3;function ge(e){return Date.parse(new Date().toString())+e}var Ot=class{constructor(e,t=0){U(this,"overdueTime");U(this,"value");this.overdueTime=t,this.value=e}isValid(){return this.value===null?!1:this.overdueTime===0?!0:!(Date.parse(new Date().toString())>this.overdueTime)}};V.config({precision:64,rounding:V.ROUND_DOWN,toExpNeg:-64,toExpPos:64});var vt=V,F=class extends Error{constructor(t,n){super(t);U(this,"message");U(this,"errorCode");this.message=t,this.errorCode=n}static isClmmpoolsErrorCode(t,n){return t instanceof F&&t.errorCode===n}},J=new m(0),an=new m(1),Mo=new m(2);Mo.pow(new m(128));var oi=Mo.pow(new m(64)).sub(an),Np=Mo.pow(new m(128)).sub(an),le=class{static toX64_BN(e){return e.mul(new m(2).pow(new m(64)))}static toX64_Decimal(e){return e.mul(vt.pow(2,64))}static toX64(e){return new m(e.mul(vt.pow(2,64)).floor().toFixed())}static fromX64(e){return new vt(e.toString()).mul(vt.pow(2,-64))}static fromX64_Decimal(e){return e.mul(vt.pow(2,-64))}static fromX64_BN(e){return e.div(new m(2).pow(new m(64)))}static shiftRightRoundUp(e){let t=e.shrn(64);return e.mod(oi).gt(J)&&(t=t.add(an)),t}static divRoundUp(e,t){return e.mod(t).eq(J)?e.div(t):e.div(t).add(new m(1))}static subUnderflowU128(e,t){return e.lt(t)?e.sub(t).add(Np):e.sub(t)}static checkUnsignedSub(e,t){const n=e.sub(t);if(n.isNeg())throw new F("Unsigned integer sub overflow","UnsignedIntegerOverflow");return n}static checkMul(e,t,n){const i=e.mul(t);if(this.isOverflow(i,n))throw new F("Multiplication overflow","MultiplicationOverflow");return i}static checkMulDivFloor(e,t,n,i){if(n.eq(J))throw new F("Devide by zero","DivideByZero");const o=e.mul(t).div(n);if(this.isOverflow(o,i))throw new F("Multiplication div overflow","MulDivOverflow");return o}static checkMulDivCeil(e,t,n,i){if(n.eq(J))throw new F("Devide by zero","DivideByZero");const o=e.mul(t).add(n.sub(an)).div(n);if(this.isOverflow(o,i))throw new F("Multiplication div overflow","MulDivOverflow");return o}static checkMulDivRound(e,t,n,i){if(n.eq(J))throw new F("Devide by zero","DivideByZero");const o=e.mul(t.add(n.shrn(1))).div(n);if(this.isOverflow(o,i))throw new F("Multiplication div overflow","MulDivOverflow");return o}static checkMulShiftRight(e,t,n,i){const o=e.mul(t).div(new m(2).pow(new m(n)));if(this.isOverflow(o,i))throw new F("Multiplication shift right overflow","MulShiftRightOverflow");return o}static checkMulShiftRight64RoundUpIf(e,t,n,i){const o=e.mul(t),r=i&&o.and(oi).gt(J)?o.shrn(64).add(an):o.shrn(64);if(this.isOverflow(r,n))throw new F("Multiplication shift right overflow","MulShiftRightOverflow");return r}static checkMulShiftLeft(e,t,n,i){const o=e.mul(t).shln(n);if(this.isOverflow(o,i))throw new F("Multiplication shift left overflow","MulShiftLeftOverflow");return o}static checkDivRoundUpIf(e,t,n){if(t.eq(J))throw new F("Devide by zero","DivideByZero");return n?this.divRoundUp(e,t):e.div(t)}static isOverflow(e,t){return e.gte(Mo.pow(new m(t)))}static sign(e){return e.testn(127)?1:0}static is_neg(e){return this.sign(e)===1}static abs_u128(e){return e.gt(J)?e:this.u128_neg(e.subn(1))}static u128_neg(e){return e.uxor(new m("ffffffffffffffffffffffffffffffff",16))}static neg(e){return this.is_neg(e)?e.abs():this.neg_from(e)}static abs(e){return this.sign(e)===0?e:this.u128_neg(e.sub(new m(1)))}static neg_from(e){return e.eq(J)?e:this.u128_neg(e).add(new m(1)).or(new m(1).shln(127))}};function qp(e){return{coinA:e.coinTypeA,coinB:e.coinTypeB,currentSqrtPrice:new m(e.current_sqrt_price),currentTickIndex:e.current_tick_index,feeGrowthGlobalA:new m(e.fee_growth_global_a),feeGrowthGlobalB:new m(e.fee_growth_global_b),feeProtocolCoinA:new m(e.fee_protocol_coin_a),feeProtocolCoinB:new m(e.fee_protocol_coin_b),feeRate:new m(e.fee_rate),liquidity:new m(e.liquidity),tickIndexes:[],tickSpacing:Number(e.tickSpacing),ticks:[],collection_name:""}}var Gs=443636,Ws=-443636,Eo="79226673515401279992447579055",Bo="4295048016",Jn=new m(1e6),$="0x0000000000000000000000000000000000000000000000000000000000000006",$p="partner",Ci="pool_script",Tn="pool_script_v2",hd="pool_script_v3",Nn="router",_s="router_with_partner",Kt="fetcher_script",Fp="expect_swap",Ca="utils",bs="custodian_v2",Lp="clob_v2",Up="endpoints_v2",pd=(e=>(e.Deleted="Deleted",e.Exists="Exists",e.NotExists="NotExists",e))(pd||{});function x(e){if(e.config===void 0)throw new F(`package: ${e.package_id}  not config in sdk SdkOptions`,"InvalidConfig");return e.config}var Kp=14,Vp="59543866431248",zp="184467440737095516",Gp="15793534762490258745",Wp=443636;function Xp(e,t,n){const i=e.toTwos(n).shln(t);return i.imaskn(n+1),i.fromTwos(n)}function ue(e,t,n){const i=e.toTwos(n).shrn(t);return i.imaskn(n-t+1),i.fromTwos(n-t)}function Hp(e){let t;return e&1?t=new m("79232123823359799118286999567"):t=new m("79228162514264337593543950336"),e&2&&(t=ue(t.mul(new m("79236085330515764027303304731")),96,256)),e&4&&(t=ue(t.mul(new m("79244008939048815603706035061")),96,256)),e&8&&(t=ue(t.mul(new m("79259858533276714757314932305")),96,256)),e&16&&(t=ue(t.mul(new m("79291567232598584799939703904")),96,256)),e&32&&(t=ue(t.mul(new m("79355022692464371645785046466")),96,256)),e&64&&(t=ue(t.mul(new m("79482085999252804386437311141")),96,256)),e&128&&(t=ue(t.mul(new m("79736823300114093921829183326")),96,256)),e&256&&(t=ue(t.mul(new m("80248749790819932309965073892")),96,256)),e&512&&(t=ue(t.mul(new m("81282483887344747381513967011")),96,256)),e&1024&&(t=ue(t.mul(new m("83390072131320151908154831281")),96,256)),e&2048&&(t=ue(t.mul(new m("87770609709833776024991924138")),96,256)),e&4096&&(t=ue(t.mul(new m("97234110755111693312479820773")),96,256)),e&8192&&(t=ue(t.mul(new m("119332217159966728226237229890")),96,256)),e&16384&&(t=ue(t.mul(new m("179736315981702064433883588727")),96,256)),e&32768&&(t=ue(t.mul(new m("407748233172238350107850275304")),96,256)),e&65536&&(t=ue(t.mul(new m("2098478828474011932436660412517")),96,256)),e&131072&&(t=ue(t.mul(new m("55581415166113811149459800483533")),96,256)),e&262144&&(t=ue(t.mul(new m("38992368544603139932233054999993551")),96,256)),ue(t,32,256)}function Jp(e){const t=Math.abs(e);let n;return t&1?n=new m("18445821805675392311"):n=new m("18446744073709551616"),t&2&&(n=ue(n.mul(new m("18444899583751176498")),64,256)),t&4&&(n=ue(n.mul(new m("18443055278223354162")),64,256)),t&8&&(n=ue(n.mul(new m("18439367220385604838")),64,256)),t&16&&(n=ue(n.mul(new m("18431993317065449817")),64,256)),t&32&&(n=ue(n.mul(new m("18417254355718160513")),64,256)),t&64&&(n=ue(n.mul(new m("18387811781193591352")),64,256)),t&128&&(n=ue(n.mul(new m("18329067761203520168")),64,256)),t&256&&(n=ue(n.mul(new m("18212142134806087854")),64,256)),t&512&&(n=ue(n.mul(new m("17980523815641551639")),64,256)),t&1024&&(n=ue(n.mul(new m("17526086738831147013")),64,256)),t&2048&&(n=ue(n.mul(new m("16651378430235024244")),64,256)),t&4096&&(n=ue(n.mul(new m("15030750278693429944")),64,256)),t&8192&&(n=ue(n.mul(new m("12247334978882834399")),64,256)),t&16384&&(n=ue(n.mul(new m("8131365268884726200")),64,256)),t&32768&&(n=ue(n.mul(new m("3584323654723342297")),64,256)),t&65536&&(n=ue(n.mul(new m("696457651847595233")),64,256)),t&131072&&(n=ue(n.mul(new m("26294789957452057")),64,256)),t&262144&&(n=ue(n.mul(new m("37481735321082")),64,256)),n}var G=class{static priceToSqrtPriceX64(e,t,n){return le.toX64(e.mul(vt.pow(10,n-t)).sqrt())}static sqrtPriceX64ToPrice(e,t,n){return le.fromX64(e).pow(2).mul(vt.pow(10,t-n))}static tickIndexToSqrtPriceX64(e){return e>0?new m(Hp(e)):new m(Jp(e))}static sqrtPriceX64ToTickIndex(e){if(e.gt(new m(Eo))||e.lt(new m(Bo)))throw new F("Provided sqrtPrice is not within the supported sqrtPrice range.","InvalidSqrtPrice");const t=e.bitLength()-1,n=new m(t-64),i=Xp(n,32,128);let o=new m("8000000000000000","hex"),s=0,r=new m(0),a=t>=64?e.shrn(t-63):e.shln(63-t);for(;o.gt(new m(0))&&s<Kp;){a=a.mul(a);const C=a.shrn(127);a=a.shrn(63+C.toNumber()),r=r.add(o.mul(C)),o=o.shrn(1),s+=1}const c=r.shrn(32),l=i.add(c).mul(new m(Vp)),h=ue(l.sub(new m(zp)),64,128).toNumber(),_=ue(l.add(new m(Gp)),64,128).toNumber();return h===_?h:G.tickIndexToSqrtPriceX64(_).lte(e)?_:h}static tickIndexToPrice(e,t,n){return G.sqrtPriceX64ToPrice(G.tickIndexToSqrtPriceX64(e),t,n)}static priceToTickIndex(e,t,n){return G.sqrtPriceX64ToTickIndex(G.priceToSqrtPriceX64(e,t,n))}static priceToInitializableTickIndex(e,t,n,i){return G.getInitializableTickIndex(G.priceToTickIndex(e,t,n),i)}static getInitializableTickIndex(e,t){return e-e%t}static getNextInitializableTickIndex(e,t){return G.getInitializableTickIndex(e,t)+t}static getPrevInitializableTickIndex(e,t){return G.getInitializableTickIndex(e,t)-t}};function _0(e){const t=[];for(const n of e){const i={objectId:n.objectId,index:Number(pt(BigInt(n.index)).toString()),sqrtPrice:n.sqrtPrice,liquidityNet:new m(BigInt.asIntN(128,BigInt(BigInt(n.liquidityNet.toString()))).toString()),liquidityGross:n.liquidityGross,feeGrowthOutsideA:n.feeGrowthOutsideA,feeGrowthOutsideB:n.feeGrowthOutsideB,rewardersGrowthOutside:[new m(n.rewardersGrowthOutside[0]),new m(n.rewardersGrowthOutside[1]),new m(n.rewardersGrowthOutside[2])]};t.push(i)}return t}function Zp(e){return y(e).add(y(Wp))}new m(365);new m(24);new m(3600);new m(.5);function b0(e,t,n,i){const o=Math.max(e,n),r=Math.min(t,i)-o,a=t-e,c=i-n,d=new V(a.toString()),l=new V(c.toString()),h=new V(r.toString());let _=new V("0");return r<0?_=new V("0"):a===r?_=l.div(h):c===r?_=h.div(d):_=h.mul(h).div(l).div(d),_}var on=class{static getDefaultSqrtPriceLimit(e){return new m(e?Bo:Eo)}static getDefaultOtherAmountThreshold(e){return e?J:oi}};function _d(e,t,n,i){if(n.eq(J))return e;const o=le.checkMulShiftLeft(e,t,64,256),s=t.shln(64),r=le.checkMul(e,n,256);if(!i&&s.lte(r))throw new F("getNextSqrtPriceAUp - Unable to divide liquidityShl64 by product","DivideByZero");const a=i?le.checkDivRoundUpIf(o,s.add(r),!0):le.checkDivRoundUpIf(o,s.sub(r),!0);if(a.lt(new m(Bo)))throw new F("getNextSqrtPriceAUp - Next sqrt price less than min sqrt price","CoinAmountMinSubceeded ");if(a.gt(new m(Eo)))throw new F("getNextSqrtPriceAUp - Next sqrt price greater than max sqrt price","CoinAmountMaxExceeded");return a}function bd(e,t,n,i){const o=le.checkDivRoundUpIf(n.shln(64),t,!i),s=i?e.add(o):e.sub(o);if(s.lt(new m(Bo))||s.gt(new m(Eo)))throw new F("getNextSqrtPriceAUp - Next sqrt price out of bounds","SqrtPriceOutOfBounds");return s}function Qp(e,t,n,i){return i?_d(e,t,n,!0):bd(e,t,n,!0)}function Yp(e,t,n,i){return i?bd(e,t,n,!1):_d(e,t,n,!1)}function Aa(e,t,n,i){const o=e.gt(t)?e.sub(t):t.sub(e);if(n.lte(J)||o.eq(J))return J;let s;if(i){const r=new m(n).mul(new m(o)).shln(64),a=t.mul(e),c=r.div(a);s=r.mod(a).eq(J)?c:c.add(an)}else{const r=new m(n).mul(new m(o));s=r.and(oi).gt(J)?r.shrn(64).add(an):r.shrn(64)}return s}function Sa(e,t,n,i){const o=e.gt(t)?e.sub(t):t.sub(e);if(n.lte(J)||o.eq(J))return J;let s;if(i)s=n.mul(o).shrn(64);else{const r=n.mul(o).shln(64),a=t.mul(e);s=r.div(a)}return s}function e_(e,t,n,i,o,s){if(n===J)return{amountIn:J,amountOut:J,nextSqrtPrice:t,feeAmount:J};const r=e.gte(t);let a,c,d,l;if(s){const h=le.checkMulDivFloor(i,le.checkUnsignedSub(Jn,o),Jn,64),_=Aa(e,t,n,r);_.gt(h)?(a=h,l=le.checkUnsignedSub(i,h),d=Qp(e,n,h,r)):(a=_,l=le.checkMulDivCeil(a,o,Jn.sub(o),64),d=t),c=Sa(e,d,n,r)}else{const h=Sa(e,t,n,r);h.gt(i)?(c=i,d=Yp(e,n,i,r)):(c=h,d=t),a=Aa(e,d,n,r),l=le.checkMulDivCeil(a,o,Jn.sub(o),64)}return{amountIn:a,amountOut:c,nextSqrtPrice:d,feeAmount:l}}function t_(e,t,n,i,o){let s=n,r=i.liquidity,{currentSqrtPrice:a}=i;const c={amountIn:J,amountOut:J,feeAmount:J,refAmount:J,nextSqrtPrice:J,crossTickNum:0};let d,l;const h=on.getDefaultSqrtPriceLimit(e);for(const _ of o){if(e&&i.currentTickIndex<_.index||!e&&i.currentTickIndex>=_.index||_===null)continue;e&&h.gt(_.sqrtPrice)||!e&&h.lt(_.sqrtPrice)?d=h:d=_.sqrtPrice;const g=e_(a,d,r,s,i.feeRate,t);if(g.amountIn.eq(J)||(s=t?s.sub(g.amountIn.add(g.feeAmount)):s.sub(g.amountOut)),c.amountIn=c.amountIn.add(g.amountIn),c.amountOut=c.amountOut.add(g.amountOut),c.feeAmount=c.feeAmount.add(g.feeAmount),g.nextSqrtPrice.eq(_.sqrtPrice)?(l=_.liquidityNet.mul(new m(-1)),e?le.is_neg(l)?r=r.add(new m(Ct(BigInt(l.toString()),128))):r=r.add(l):le.is_neg(l)?r=r.sub(new m(Ct(BigInt(l.toString()),128))):r=r.sub(l),a=_.sqrtPrice):a=g.nextSqrtPrice,c.crossTickNum+=1,s.eq(J))break}return c.amountIn=c.amountIn.add(c.feeAmount),c.nextSqrtPrice=a,c}function zi(e,t,n){const i=m.min(e,t),o=m.max(e,t),s=le.fromX64_BN(n.mul(o).mul(i)),r=o.sub(i);return s.div(r)}function Gi(e,t,n){const i=m.min(e,t),s=m.max(e,t).sub(i);return n.shln(64).div(s)}var yt=class{static updateFeeRate(e,t,n,i,o){const s=le.checkMulDivCeil(t,new m(i),Jn,64),r=n===0?J:le.checkMulDivFloor(t,new m(n),Jn,64),a=t.mul(s).mul(r);if(o?e.feeProtocolCoinA=e.feeProtocolCoinA.add(s):e.feeProtocolCoinB=e.feeProtocolCoinB.add(s),a.eq(J)||e.liquidity.eq(J))return{refFee:r,clmm:e};const c=a.shln(64).div(e.liquidity);return o?e.feeGrowthGlobalA=e.feeGrowthGlobalA.add(c):e.feeGrowthGlobalB=e.feeGrowthGlobalB.add(c),{refFee:r,clmm:e}}static getCoinAmountFromLiquidity(e,t,n,i,o){const s=new vt(e.toString()),r=new vt(t.toString()),a=new vt(n.toString()),c=new vt(i.toString());let d,l;return t.lt(n)?(d=le.toX64_Decimal(s).mul(c.sub(a)).div(a.mul(c)),l=new vt(0)):t.lt(i)?(d=le.toX64_Decimal(s).mul(c.sub(r)).div(r.mul(c)),l=le.fromX64_Decimal(s.mul(r.sub(a)))):(d=new vt(0),l=le.fromX64_Decimal(s.mul(c.sub(a)))),o?{coinA:new m(d.ceil().toString()),coinB:new m(l.ceil().toString())}:{coinA:new m(d.floor().toString()),coinB:new m(l.floor().toString())}}static estLiquidityAndcoinAmountFromOneAmounts(e,t,n,i,o,s,r){const a=G.sqrtPriceX64ToTickIndex(r),c=G.tickIndexToSqrtPriceX64(e),d=G.tickIndexToSqrtPriceX64(t);let l;if(a<e){if(!i)throw new F("lower tick cannot calculate liquidity by coinB","NotSupportedThisCoin");l=zi(c,d,n)}else if(a>t){if(i)throw new F("upper tick cannot calculate liquidity by coinA","NotSupportedThisCoin");l=Gi(d,c,n)}else i?l=zi(r,d,n):l=Gi(r,c,n);const h=yt.getCoinAmountFromLiquidity(l,r,c,d,o),_=o?y(h.coinA.toString()).mul(1+s).toString():y(h.coinA.toString()).mul(1-s).toString(),g=o?y(h.coinB.toString()).mul(1+s).toString():y(h.coinB.toString()).mul(1-s).toString();return{coinAmountA:h.coinA,coinAmountB:h.coinB,tokenMaxA:o?new m(vt.ceil(_).toString()):new m(vt.floor(_).toString()),tokenMaxB:o?new m(vt.ceil(g).toString()):new m(vt.floor(g).toString()),liquidityAmount:l,fix_amount_a:i}}static estimateLiquidityFromcoinAmounts(e,t,n,i){if(t>n)throw new F("lower tick cannot be greater than lower tick","InvalidTwoTickIndex");const o=G.sqrtPriceX64ToTickIndex(e),s=G.tickIndexToSqrtPriceX64(t),r=G.tickIndexToSqrtPriceX64(n);if(o<t)return zi(s,r,i.coinA);if(o>=n)return Gi(r,s,i.coinB);const a=zi(e,r,i.coinA),c=Gi(e,s,i.coinB);return m.min(a,c)}static estCoinAmountsFromTotalAmount(e,t,n,i,o,s){const{ratioA:r,ratioB:a}=yt.calculateDepositRatioFixTokenA(e,t,n),c=y(i).mul(r).div(o),d=y(i).mul(a).div(s);return{amountA:c,amountB:d}}static calculateDepositRatioFixTokenA(e,t,n){const i=new m(1e8),{coinAmountB:o}=yt.estLiquidityAndcoinAmountFromOneAmounts(e,t,i,!0,!0,0,n),s=G.sqrtPriceX64ToPrice(n,0,0),r=y(i.toString()).mul(s),a=r.add(o.toString()),c=r.div(a),d=y(o.toString()).div(a);return{ratioA:c,ratioB:d}}};function md(e){return e.startsWith("0x")?`${e.slice(2)}`:e}var n_=0,gd=1,i_=2;function Ta(e,t){return e===t?n_:e<t?gd:i_}function o_(e,t){let n=0;const i=e.length<=t.length?e.length:t.length,o=Ta(e.length,t.length);for(;n<i;){const s=Ta(e.charCodeAt(n),t.charCodeAt(n));if(n+=1,s!==0)return s}return o}function Xs(e,t){return o_(e,t)===gd}function mo(e,...t){const n=Array.isArray(t[t.length-1])?t.pop():[];let o=[e,...t].filter(Boolean).join("::");return n&&n.length&&(o+=`<${n.join(", ")}>`),o}function D(e){var t;try{let n=e.replace(/\s/g,"");const i=n.match(/(<.+>)$/),o=(t=i==null?void 0:i[0])==null?void 0:t.match(/(\w+::\w+::\w+)(?:<.*?>(?!>))?/g);if(o){n=n.slice(0,n.indexOf("<"));const d={...D(n),type_arguments:o.map(l=>D(l).source_address)};return d.type_arguments=d.type_arguments.map(l=>he.isSuiCoin(l)?l:D(l).source_address),d.source_address=mo(d.full_address,d.type_arguments),d}const s=n.split("::"),a={full_address:n,address:n===go||n===d_?"0x2":me(s[0]),module:s[1],name:s[2],type_arguments:[],source_address:""};return a.full_address=`${a.address}::${a.module}::${a.name}`,a.source_address=mo(a.full_address,a.type_arguments),a}catch{return{full_address:e,address:"",module:"",name:"",type_arguments:[],source_address:e}}}function Se(e){return D(e).source_address}function s_(e){return e.toLowerCase().startsWith("0x")?me(e):e}var r_=(e,t=!0)=>{const n=e.split("::"),i=n.shift();let o=me(i);return t&&(o=md(o)),`${o}::${n.join("::")}`};function wr(e){for(const t in e){const n=typeof e[t];if(n==="object")wr(e[t]);else if(n==="string"){const i=e[t];i&&!i.includes("::")&&(e[t]=s_(i))}}}var a_="0x2::coin::Coin",c_=/^0x2::coin::Coin<(.+)>$/,go="0x2::sui::SUI",d_="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",he=class{static getCoinTypeArg(e){const t=e.type.match(c_);return t?t[1]:null}static isSUI(e){const t=he.getCoinTypeArg(e);return t?he.getCoinSymbol(t)==="SUI":!1}static getCoinSymbol(e){return e.substring(e.lastIndexOf(":")+1)}static getBalance(e){return BigInt(e.fields.balance)}static totalBalance(e,t){let n=BigInt(0);return e.forEach(i=>{t===i.coinAddress&&(n+=BigInt(i.balance))}),n}static getID(e){return e.fields.id.id}static getCoinTypeFromArg(e){return`${a_}<${e}>`}static getFaucetCoins(e){const{events:t}=e,n=[];return t==null||t.forEach(i=>{const{type:o}=i;if(D(o).name==="InitEvent"){const s=i.parsedJson;n.push({transactionModule:i.transactionModule,suplyID:s.suplyID,decimals:s.decimals})}}),n}static getCoinAssets(e,t){const n=[];return t.forEach(i=>{Se(i.coinAddress)===Se(e)&&n.push(i)}),n}static isSuiCoin(e){return D(e).full_address===go}static selectCoinObjectIdGreaterThanOrEqual(e,t,n=[]){const i=he.selectCoinAssetGreaterThanOrEqual(e,t,n),o=i.selectedCoins.map(a=>a.coinObjectId),s=i.remainingCoins,r=i.selectedCoins.map(a=>a.balance.toString());return{objectArray:o,remainCoins:s,amountArray:r}}static selectCoinAssetGreaterThanOrEqual(e,t,n=[]){const i=he.sortByBalance(e.filter(c=>!n.includes(c.coinObjectId))),o=he.calculateTotalBalance(i);if(o<t)return{selectedCoins:[],remainingCoins:i};if(o===t)return{selectedCoins:i,remainingCoins:[]};let s=BigInt(0);const r=[],a=[...i];for(;s<o;){const c=t-s,d=a.findIndex(h=>h.balance>=c);if(d!==-1){r.push(a[d]),a.splice(d,1);break}const l=a.pop();l.balance>0&&(r.push(l),s+=l.balance)}return{selectedCoins:he.sortByBalance(r),remainingCoins:he.sortByBalance(a)}}static sortByBalance(e){return e.sort((t,n)=>t.balance<n.balance?-1:t.balance>n.balance?1:0)}static sortByBalanceDes(e){return e.sort((t,n)=>t.balance>n.balance?-1:t.balance<n.balance?0:1)}static calculateTotalBalance(e){return e.reduce((t,n)=>t+n.balance,BigInt(0))}};function l_(e,t,n){let i=new m(0),o=new m(0);e.current_tick_index<t.index?(i=le.subUnderflowU128(new m(e.fee_growth_global_a),new m(t.feeGrowthOutsideA)),o=le.subUnderflowU128(new m(e.fee_growth_global_b),new m(t.feeGrowthOutsideB))):(i=new m(t.feeGrowthOutsideA),o=new m(t.feeGrowthOutsideB));let s=new m(0),r=new m(0);e.current_tick_index<n.index?(s=new m(n.feeGrowthOutsideA),r=new m(n.feeGrowthOutsideB)):(s=le.subUnderflowU128(new m(e.fee_growth_global_a),new m(n.feeGrowthOutsideA)),r=le.subUnderflowU128(new m(e.fee_growth_global_b),new m(n.feeGrowthOutsideB)));const a=le.subUnderflowU128(le.subUnderflowU128(new m(e.fee_growth_global_a),i),s),c=le.subUnderflowU128(le.subUnderflowU128(new m(e.fee_growth_global_b),o),r);return{fee_growth_inside_a:a,fee_growth_inside_b:c}}function u_(e,t,n){const i=le.subUnderflowU128(t,new m(e.fee_growth_inside_a)),o=new m(e.liquidity).mul(i).shrn(64),s=le.subUnderflowU128(n,new m(e.fee_growth_inside_b)),r=new m(e.liquidity).mul(s).shrn(64),a=new m(e.fee_owed_a).add(o),c=new m(e.fee_owed_b).add(r);return{position_id:e.pos_object_id,feeOwedA:a,feeOwedB:c}}function m0(e){const{fee_growth_inside_a:t,fee_growth_inside_b:n}=l_(e.clmmpool,e.tickLower,e.tickUpper);return u_(e.position,t,n)}var Ai=class{constructor(e,t){U(this,"numerator");U(this,"denominator");this.toString=()=>`${this.numerator.toString()}/${this.denominator.toString()}`,this.numerator=e,this.denominator=t}static fromDecimal(e){return Ai.fromFraction(e.toDecimalPlaces(1).mul(10).toNumber(),1e3)}static fromFraction(e,t){const n=typeof e=="number"?new m(e.toString()):e,i=typeof t=="number"?new m(t.toString()):t;return new Ai(n,i)}};function Hs(e,{numerator:t,denominator:n},i){return i?e.mul(n.add(t)).div(n):e.mul(n).div(n.add(t))}function ms(e,t,n){return{tokenMaxA:Hs(e.coinA,t,n),tokenMaxB:Hs(e.coinB,t,n)}}function y(e){return V.isDecimal(e)?e:new V(e===void 0?0:e)}function f_(e){return y(10).pow(y(e).abs())}function qi(e){return e.data}function yd(e){if(e.error&&"object_id"in e.error&&"version"in e.error&&"digest"in e.error){const{error:t}=e;return{objectId:t.object_id,version:t.version,digest:t.digest}}}function wd(e){if(e.error&&"object_id"in e.error&&!("version"in e.error)&&!("digest"in e.error))return e.error.object_id}function h_(e){if("reference"in e)return e.reference;const t=qi(e);return t?{objectId:t.objectId,version:t.version,digest:t.digest}:yd(e)}function Zt(e){var t;return"objectId"in e?e.objectId:((t=h_(e))==null?void 0:t.objectId)??wd(e)}function p_(e){return e.data!==void 0}function __(e){return e.content!==void 0}function vd(e){const t="data"in e?qi(e):e;if(!(!t||!__(t)||t.content.dataType!=="moveObject"))return t.content}function Yt(e){var t;return(t=vd(e))==null?void 0:t.type}function Ln(e){var n;const t=p_(e)?e.data:e;return!(t!=null&&t.type)&&"data"in e?((n=t==null?void 0:t.content)==null?void 0:n.dataType)==="package"?"package":Yt(e):t==null?void 0:t.type}function $i(e){var t;return(t=qi(e))==null?void 0:t.previousTransaction}function yo(e){var t;return(t=qi(e))==null?void 0:t.owner}function b_(e){var n;const t=(n=qi(e))==null?void 0:n.display;return t||{data:null,error:null}}function ee(e){var n;const t=(n=vd(e))==null?void 0:n.fields;if(t)return"fields"in t?t.fields:t}function m_(e,t){const n=f_(y(t));return Number(y(e).mul(n))}function Ct(e,t=32){return BigInt.asUintN(t,BigInt(e)).toString()}function pt(e,t=32){return Number(BigInt.asIntN(t,BigInt(e)))}function g_(e,t,n){const i=D(e).name,o=D(t).name;return`${i}-${o}[${n}]`}function gs(e){const t=Yt(e),n=D(t),i=ee(e);if(i==null)throw new F(`Pool id ${Zt(e)} not exists.`,"InvalidPoolObject");const o=[];i.rewarder_manager.fields.rewarders.forEach(r=>{const{emissions_per_second:a}=r.fields,c=le.fromX64(new m(a)),d=Math.floor(c.toNumber()*60*60*24);o.push({emissions_per_second:a,coinAddress:D(r.fields.reward_coin.fields.name).source_address,growth_global:r.fields.growth_global,emissionsEveryDay:d})});const s={poolAddress:Zt(e),poolType:t,coinTypeA:n.type_arguments[0],coinTypeB:n.type_arguments[1],coinAmountA:i.coin_a,coinAmountB:i.coin_b,current_sqrt_price:i.current_sqrt_price,current_tick_index:pt(BigInt(i.current_tick_index.fields.bits)),fee_growth_global_a:i.fee_growth_global_a,fee_growth_global_b:i.fee_growth_global_b,fee_protocol_coin_a:i.fee_protocol_coin_a,fee_protocol_coin_b:i.fee_protocol_coin_b,fee_rate:i.fee_rate,is_pause:i.is_pause,liquidity:i.liquidity,position_manager:{positions_handle:i.position_manager.fields.positions.fields.id.id,size:i.position_manager.fields.positions.fields.size},rewarder_infos:o,rewarder_last_updated_time:i.rewarder_manager.fields.last_updated_time,tickSpacing:i.tick_spacing,ticks_handle:i.tick_manager.fields.ticks.fields.id.id,uri:i.url,index:Number(i.index),name:""};return s.name=g_(s.coinTypeA,s.coinTypeB,s.tickSpacing),s}function Ro(e){const t=b_(e).data,n={creator:"",description:"",image_url:"",link:"",name:"",project_url:""};return t&&(n.creator=t.creator,n.description=t.description,n.image_url=t.image_url,n.link=t.link,n.name=t.name,n.project_url=t.project_url),n}function ni(e){var r,a;if(e.error!=null||((a=(r=e.data)==null?void 0:r.content)==null?void 0:a.dataType)!=="moveObject")throw new F(`Position not exists. Get Position error:${e.error}`,"InvalidPositionObject");let t={creator:"",description:"",image_url:"",link:"",name:"",project_url:""},n={...t,pos_object_id:"",owner:"",type:"",coin_type_a:"",coin_type_b:"",liquidity:"",tick_lower_index:0,tick_upper_index:0,index:0,pool:"",reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0",fee_growth_inside_a:"0",fee_owed_a:"0",fee_growth_inside_b:"0",fee_owed_b:"0",position_status:"Exists"},i=ee(e);if(i){const c=Yt(e),d=yo(e);"nft"in i?(i=i.nft.fields,t.description=i.description,t.name=i.name,t.link=i.url):t=Ro(e),n={...t,pos_object_id:i.id.id,owner:d.AddressOwner,type:c,liquidity:i.liquidity,coin_type_a:i.coin_type_a.fields.name,coin_type_b:i.coin_type_b.fields.name,tick_lower_index:pt(BigInt(i.tick_lower_index.fields.bits)),tick_upper_index:pt(BigInt(i.tick_upper_index.fields.bits)),index:i.index,pool:i.pool,reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0",fee_growth_inside_a:"0",fee_owed_a:"0",fee_growth_inside_b:"0",fee_owed_b:"0",position_status:"Exists"}}const o=yd(e);o&&(n.pos_object_id=o.objectId,n.position_status="Deleted");const s=wd(e);return s&&(n.pos_object_id=s,n.position_status="NotExists"),n}function kd(e){const t={reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0"};e="fields"in e?e.fields:e,e.rewards.forEach((s,r)=>{const{amount_owned:a,growth_inside:c}="fields"in s?s.fields:s;r===0?(t.reward_amount_owed_0=a,t.reward_growth_inside_0=c):r===1?(t.reward_amount_owed_1=a,t.reward_growth_inside_1=c):r===2&&(t.reward_amount_owed_2=a,t.reward_growth_inside_2=c)});const n="fields"in e.tick_lower_index?e.tick_lower_index.fields.bits:e.tick_lower_index.bits,i="fields"in e.tick_upper_index?e.tick_upper_index.fields.bits:e.tick_upper_index.bits;return{liquidity:e.liquidity,tick_lower_index:pt(BigInt(n)),tick_upper_index:pt(BigInt(i)),...t,fee_growth_inside_a:e.fee_growth_inside_a,fee_owed_a:e.fee_owned_a,fee_growth_inside_b:e.fee_growth_inside_b,fee_owed_b:e.fee_owned_b,pos_object_id:e.position_id}}function ys(e){var o,s;if(e.error!=null||((s=(o=e.data)==null?void 0:o.content)==null?void 0:s.dataType)!=="moveObject")throw new F(`Tick not exists. Get tick data error:${e.error}`,"InvalidTickObject");const n=ee(e).value.fields.value.fields;return{objectId:Zt(e),index:pt(BigInt(n.index.fields.bits)),sqrtPrice:new m(n.sqrt_price),liquidityNet:new m(n.liquidity_net.fields.bits),liquidityGross:new m(n.liquidity_gross),feeGrowthOutsideA:new m(n.fee_growth_outside_a),feeGrowthOutsideB:new m(n.fee_growth_outside_b),rewardersGrowthOutside:n.rewards_growth_outside}}function y_(e){if(!e||!e.index||!e.sqrt_price||!e.liquidity_net||!e.liquidity_gross||!e.fee_growth_outside_a||!e.fee_growth_outside_b)throw new F("Invalid tick fields.","InvalidTickFields");const t=pt(BigInt(e.index.bits)),n=new m(e.sqrt_price),i=new m(e.liquidity_net.bits),o=new m(e.liquidity_gross),s=new m(e.fee_growth_outside_a),r=new m(e.fee_growth_outside_b),a=e.rewards_growth_outside||[];return{objectId:"",index:t,sqrtPrice:n,liquidityNet:i,liquidityGross:o,feeGrowthOutsideA:s,feeGrowthOutsideB:r,rewardersGrowthOutside:a}}var g0=class{static getMinIndex(e){return Ws+Math.abs(Ws)%e}static getMaxIndex(e){return Gs-Gs%e}};function y0(e,t){const n=Math.abs(e)%t;return e>0?n>t/2?e+t-n:e-n:n>t/2?e-t+n:e+n}function w_(e,t,n,i,o,s){const r=e.rewarder_infos,a=[];for(let c=0;c<r.length;c+=1){let d=s[c];t!==null&&(e.current_tick_index<i?d=s[c].sub(new m(t.rewardersGrowthOutside[c])):d=t.rewardersGrowthOutside[c]);let l=new m(0);n!==null&&(e.current_tick_index>=o?l=s[c].sub(new m(n.rewardersGrowthOutside[c])):l=n.rewardersGrowthOutside[c]);const h=le.subUnderflowU128(le.subUnderflowU128(new m(s[c]),new m(d)),new m(l));a.push(h)}return a}function wo(e){const t=he.isSuiCoin(e.coinTypeA),n=he.isSuiCoin(e.coinTypeB);return{isAdjustCoinA:t,isAdjustCoinB:n}}function v_(e,t){return V.ceil(y(e).div(1+t)).toString()}var Y=class{static createCollectRewarderAndFeeParams(e,t,n,i,o,s){o===void 0&&(o=[...i]),s===void 0&&(s=[...i]);const r=Se(n.coinTypeA),a=Se(n.coinTypeB);if(n.collect_fee){const d=Y.buildCoinForAmount(t,o,BigInt(0),r,!1);o=d.remainCoins;const l=Y.buildCoinForAmount(t,s,BigInt(0),a,!1);s=l.remainCoins,t=e.Position.createCollectFeePaylod({pool_id:n.pool_id,pos_id:n.pos_id,coinTypeA:n.coinTypeA,coinTypeB:n.coinTypeB},t,d.targetCoin,l.targetCoin)}const c=[];return n.rewarder_coin_types.forEach(d=>{switch(Se(d)){case r:c.push(Y.buildCoinForAmount(t,o,BigInt(0),d,!1).targetCoin);break;case a:c.push(Y.buildCoinForAmount(t,s,BigInt(0),d,!1).targetCoin);break;default:c.push(Y.buildCoinForAmount(t,i,BigInt(0),d,!1).targetCoin);break}}),t=e.Rewarder.createCollectRewarderPaylod(n,t,c),t}static async adjustTransactionForGas(e,t,n,i){i.setSender(e.senderAddress);const o=he.selectCoinAssetGreaterThanOrEqual(t,n).selectedCoins;if(o.length===0)throw new F("Insufficient balance","InsufficientBalance");const s=he.calculateTotalBalance(t);if(s-n>1e9)return{fixAmount:n};const r=await e.fullClient.calculationTxGas(i);if(he.selectCoinAssetGreaterThanOrEqual(t,BigInt(r),o.map(c=>c.coinObjectId)).selectedCoins.length===0){const c=BigInt(r)+BigInt(500);if(s-n<c){if(n-=c,n<0)throw new F("gas Insufficient balance","InsufficientBalance");const d=new N;return{fixAmount:n,newTx:d}}}return{fixAmount:n}}static async buildAddLiquidityFixTokenForGas(e,t,n,i,o,s,r){o=await Y.buildAddLiquidityFixToken(e,t,n,o,s,r);const{isAdjustCoinA:a}=wo(n),c=a?n.amount_a:n.amount_b,d=await Y.adjustTransactionForGas(e,he.getCoinAssets(a?n.coinTypeA:n.coinTypeB,t),BigInt(c),o),{fixAmount:l}=d,{newTx:h}=d;if(h!=null){let _,g;if(a)n.amount_a=Number(l),_=Y.buildAddLiquidityFixTokenCoinInput(h,!n.fix_amount_a,l.toString(),n.slippage,n.coinTypeA,t,!1),g=Y.buildAddLiquidityFixTokenCoinInput(h,n.fix_amount_a,n.amount_b,n.slippage,n.coinTypeB,t,!1);else return n.amount_b=Number(l),_=Y.buildAddLiquidityFixTokenCoinInput(h,!n.fix_amount_a,n.amount_a,n.slippage,n.coinTypeA,t,!1),g=Y.buildAddLiquidityFixTokenCoinInput(h,n.fix_amount_a,l.toString(),n.slippage,n.coinTypeB,t,!1),n=Y.fixAddLiquidityFixTokenParams(n,i.slippage,i.curSqrtPrice),o=await Y.buildAddLiquidityFixTokenArgs(h,e,t,n,_,g),o}return o}static async buildAddLiquidityFixToken(e,t,n,i,o,s){if(e.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");i=i||new N;let r,a;return o==null||s==null?(r=Y.buildAddLiquidityFixTokenCoinInput(i,!n.fix_amount_a,n.amount_a,n.slippage,n.coinTypeA,t,!1),a=Y.buildAddLiquidityFixTokenCoinInput(i,n.fix_amount_a,n.amount_b,n.slippage,n.coinTypeB,t,!1)):(r={targetCoin:o,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},a={targetCoin:s,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"}),i=Y.buildAddLiquidityFixTokenArgs(i,e,t,n,r,a),i}static buildAddLiquidityFixTokenCoinInput(e,t,n,i,o,s,r=!0){return t?Y.buildCoinForAmountInterval(e,s,{amountSecond:BigInt(v_(n,i)),amountFirst:BigInt(n)},o,r):Y.buildCoinForAmount(e,s,BigInt(n),o,r)}static fixAddLiquidityFixTokenParams(e,t,n){const i=e.fix_amount_a?e.amount_a:e.amount_b,o=yt.estLiquidityAndcoinAmountFromOneAmounts(Number(e.tick_lower),Number(e.tick_upper),new m(i),e.fix_amount_a,!0,t,n);return e.amount_a=e.fix_amount_a?e.amount_a:o.tokenMaxA.toNumber(),e.amount_b=e.fix_amount_a?o.tokenMaxB.toNumber():e.amount_b,e}static buildAddLiquidityFixTokenArgs(e,t,n,i,o,s){const r=[i.coinTypeA,i.coinTypeB],a=i.is_open?"open_position_with_liquidity_by_fix_coin":"add_liquidity_by_fix_coin",{clmm_pool:c,integrate:d}=t.sdkOptions;i.is_open||(e=Y.createCollectRewarderAndFeeParams(t,e,i,n,o.remainCoins,s.remainCoins));const l=x(c),h=i.is_open?[e.object(l.global_config_id),e.object(i.pool_id),e.pure.u32(Number(Ct(BigInt(i.tick_lower)).toString())),e.pure.u32(Number(Ct(BigInt(i.tick_upper)).toString())),o.targetCoin,s.targetCoin,e.pure.u64(i.amount_a),e.pure.u64(i.amount_b),e.pure.bool(i.fix_amount_a),e.object($)]:[e.object(l.global_config_id),e.object(i.pool_id),e.object(i.pos_id),o.targetCoin,s.targetCoin,e.pure.u64(i.amount_a),e.pure.u64(i.amount_b),e.pure.bool(i.fix_amount_a),e.object($)];return e.moveCall({target:`${d.published_at}::${Tn}::${a}`,typeArguments:r,arguments:h}),e}static async buildSwapTransactionForGas(e,t,n,i){let o=Y.buildSwapTransaction(e,t,n);o.setSender(e.senderAddress);const s=await Y.adjustTransactionForGas(e,he.getCoinAssets(t.a2b?t.coinTypeA:t.coinTypeB,n),BigInt(t.by_amount_in?t.amount:t.amount_limit),o),{fixAmount:r,newTx:a}=s;if(a!==void 0){a.setSender(e.senderAddress),t.by_amount_in?t.amount=r.toString():t.amount_limit=r.toString(),t=await Y.fixSwapParams(e,t,i);const c=Y.buildCoinForAmount(o,n,t.a2b?BigInt(t.by_amount_in?t.amount:t.amount_limit):BigInt(0),t.coinTypeA),d=Y.buildCoinForAmount(o,n,t.a2b?BigInt(0):BigInt(t.by_amount_in?t.amount:t.amount_limit),t.coinTypeB);o=Y.buildSwapTransactionArgs(a,t,e.sdkOptions,c,d)}return o}static buildSwapTransaction(e,t,n){let i=new N;i.setSender(e.senderAddress);const o=Y.buildCoinForAmount(i,n,t.a2b?BigInt(t.by_amount_in?t.amount:t.amount_limit):BigInt(0),t.coinTypeA,!1),s=Y.buildCoinForAmount(i,n,t.a2b?BigInt(0):BigInt(t.by_amount_in?t.amount:t.amount_limit),t.coinTypeB,!1);return i=Y.buildSwapTransactionArgs(i,t,e.sdkOptions,o,s),i}static buildSwapTransactionArgs(e,t,n,i,o){const{clmm_pool:s,integrate:r}=n,a=on.getDefaultSqrtPriceLimit(t.a2b),c=[t.coinTypeA,t.coinTypeB],{global_config_id:d}=x(s);if(d===void 0)throw Error("clmm.config.global_config_id is undefined");const l=t.swap_partner!==void 0,h=l?t.a2b?"swap_a2b_with_partner":"swap_b2a_with_partner":t.a2b?"swap_a2b":"swap_b2a",_=l?[e.object(d),e.object(t.pool_id),e.object(t.swap_partner),i.targetCoin,o.targetCoin,e.pure.bool(t.by_amount_in),e.pure.u64(t.amount),e.pure.u64(t.amount_limit),e.pure.u128(a.toString()),e.object($)]:[e.object(d),e.object(t.pool_id),i.targetCoin,o.targetCoin,e.pure.bool(t.by_amount_in),e.pure.u64(t.amount),e.pure.u64(t.amount_limit),e.pure.u128(a.toString()),e.object($)];return e.moveCall({target:`${r.published_at}::${Tn}::${h}`,typeArguments:c,arguments:_}),e}static async buildSwapTransactionWithoutTransferCoinsForGas(e,t,n,i){let{tx:o,coinABs:s}=Y.buildSwapTransactionWithoutTransferCoins(e,t,n);o.setSender(e.senderAddress);const r=await Y.adjustTransactionForGas(e,he.getCoinAssets(t.a2b?t.coinTypeA:t.coinTypeB,n),BigInt(t.by_amount_in?t.amount:t.amount_limit),o),{fixAmount:a,newTx:c}=r;if(c!==void 0){c.setSender(e.senderAddress),t.by_amount_in?t.amount=a.toString():t.amount_limit=a.toString(),t=await Y.fixSwapParams(e,t,i);const d=Y.buildCoinForAmount(o,n,t.a2b?BigInt(t.by_amount_in?t.amount:t.amount_limit):BigInt(0),t.coinTypeA,!1,!0),l=Y.buildCoinForAmount(o,n,t.a2b?BigInt(0):BigInt(t.by_amount_in?t.amount:t.amount_limit),t.coinTypeB,!1,!0),h=Y.buildSwapTransactionWithoutTransferCoinArgs(e,c,t,e.sdkOptions,d,l);o=h.tx,s=h.txRes}return{tx:o,coinABs:s}}static buildSwapTransactionWithoutTransferCoins(e,t,n){const i=new N;i.setSender(e.senderAddress);const o=Y.buildCoinForAmount(i,n,t.a2b?BigInt(t.by_amount_in?t.amount:t.amount_limit):BigInt(0),t.coinTypeA,!1,!0),s=Y.buildCoinForAmount(i,n,t.a2b?BigInt(0):BigInt(t.by_amount_in?t.amount:t.amount_limit),t.coinTypeB,!1,!0),r=Y.buildSwapTransactionWithoutTransferCoinArgs(e,i,t,e.sdkOptions,o,s);return{tx:r.tx,coinABs:r.txRes}}static buildSwapTransactionWithoutTransferCoinArgs(e,t,n,i,o,s){const{clmm_pool:r,integrate:a}=i,c=on.getDefaultSqrtPriceLimit(n.a2b),{global_config_id:d}=x(r);if(d===void 0)throw Error("clmm.config.global_config_id is undefined");const l=n.swap_partner!==void 0,h=l?"swap_with_partner":"swap",_=l?_s:Nn,g=l?[t.object(d),t.object(n.pool_id),t.object(n.swap_partner),o.targetCoin,s.targetCoin,t.pure.bool(n.a2b),t.pure.bool(n.by_amount_in),t.pure.u64(n.amount),t.pure.u128(c.toString()),t.pure.bool(!1),t.object($)]:[t.object(d),t.object(n.pool_id),o.targetCoin,s.targetCoin,t.pure.bool(n.a2b),t.pure.bool(n.by_amount_in),t.pure.u64(n.amount),t.pure.u128(c.toString()),t.pure.bool(!1),t.object($)],C=[n.coinTypeA,n.coinTypeB],I=t.moveCall({target:`${a.published_at}::${_}::${h}`,typeArguments:C,arguments:g});if(n.by_amount_in){const O=n.a2b?n.coinTypeB:n.coinTypeA,M=n.a2b?I[1]:I[0],j=Number(n.amount_limit);this.checkCoinThreshold(e,n.by_amount_in,t,M,j,O)}return{tx:t,txRes:I}}static async fixSwapParams(e,t,n){const{currentPool:i}=n;try{const o=await e.Swap.preswap({decimalsA:n.decimalsA,decimalsB:n.decimalsB,a2b:t.a2b,byAmountIn:t.by_amount_in,amount:t.amount,pool:i,currentSqrtPrice:i.current_sqrt_price,coinTypeA:i.coinTypeA,coinTypeB:i.coinTypeB}),s=n.byAmountIn?o.estimatedAmountOut:o.estimatedAmountIn,r=Hs(s,n.slippage,!n.byAmountIn);t.amount_limit=r.toString()}catch(o){console.log("fixSwapParams",o)}return t}static async syncBuildCoinInputForAmount(e,t,n,i,o=!0){if(e.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const s=await e.getOwnerCoinAssets(e.senderAddress,i);return Y.buildCoinForAmount(t,s,n,i,o).targetCoin}static buildCoinForAmount(e,t,n,i,o=!0,s=!1){const r=he.getCoinAssets(i,t);if(n===BigInt(0)&&r.length===0)return Y.buildZeroValueCoin(t,e,i,o);const a=he.calculateTotalBalance(r);if(a<n)throw new F(`The amount(${a}) is Insufficient balance for ${i} , expect ${n} `,"InsufficientBalance");return Y.buildCoin(e,t,r,n,i,o,s)}static buildCoin(e,t,n,i,o,s=!0,r=!1){if(he.isSuiCoin(o)){if(s){const j=e.splitCoins(e.gas,[e.pure.u64(i)]);return{targetCoin:e.makeMoveVec({elements:[j]}),remainCoins:t,tragetCoinAmount:i.toString(),isMintZeroCoin:!1,originalSplitedCoin:e.gas}}if(i===0n&&n.length>1){const j=he.selectCoinObjectIdGreaterThanOrEqual(n,i);return{targetCoin:e.object(j.objectArray[0]),remainCoins:j.remainCoins,tragetCoinAmount:j.amountArray[0],isMintZeroCoin:!1}}const O=he.selectCoinObjectIdGreaterThanOrEqual(n,i);return{targetCoin:e.splitCoins(e.gas,[e.pure.u64(i)]),remainCoins:O.remainCoins,tragetCoinAmount:i.toString(),isMintZeroCoin:!1,originalSplitedCoin:e.gas}}const a=he.selectCoinObjectIdGreaterThanOrEqual(n,i),c=a.amountArray.reduce((O,M)=>Number(O)+Number(M),0).toString(),d=a.objectArray;if(s)return{targetCoin:e.makeMoveVec({elements:d.map(O=>e.object(O))}),remainCoins:a.remainCoins,tragetCoinAmount:a.amountArray.reduce((O,M)=>Number(O)+Number(M),0).toString(),isMintZeroCoin:!1};const[l,...h]=d,_=e.object(l);let g=_,C=a.amountArray.reduce((O,M)=>Number(O)+Number(M),0).toString(),I;return h.length>0&&e.mergeCoins(_,h.map(O=>e.object(O))),r&&Number(c)>Number(i)&&(g=e.splitCoins(_,[e.pure.u64(i)]),C=i.toString(),I=_),{targetCoin:g,remainCoins:a.remainCoins,originalSplitedCoin:I,tragetCoinAmount:C,isMintZeroCoin:!1}}static buildZeroValueCoin(e,t,n,i=!0){const o=Y.callMintZeroValueCoin(t,n);let s;return i?s=t.makeMoveVec({elements:[o]}):s=o,{targetCoin:s,remainCoins:e,isMintZeroCoin:!0,tragetCoinAmount:"0"}}static buildCoinForAmountInterval(e,t,n,i,o=!0){const s=he.getCoinAssets(i,t);if(n.amountFirst===BigInt(0))return s.length>0?Y.buildCoin(e,[...t],[...s],n.amountFirst,i,o):Y.buildZeroValueCoin(t,e,i,o);const r=he.calculateTotalBalance(s);if(r>=n.amountFirst)return Y.buildCoin(e,[...t],[...s],n.amountFirst,i,o);if(r<n.amountSecond)throw new F(`The amount(${r}) is Insufficient balance for ${i} , expect ${n.amountSecond} `,"InsufficientBalance");return Y.buildCoin(e,[...t],[...s],n.amountSecond,i,o)}static async buildRouterSwapTransaction(e,t,n,i,o){let s=new N;return t.paths.length>1&&(t.partner=""),s=await this.buildRouterBasePathTx(e,t,n,i,s,o),s}static async buildRouterBasePathTx(e,t,n,i,o,s){const r=t.paths.filter(B=>B&&B.poolAddress),a=Number(r.reduce((B,q)=>B.add(q.amountIn),J).toString()),c=Number(r.reduce((B,q)=>B.add(q.amountOut),J).toString()),d=Math.round(n?Number(c.toString())*(1-t.priceSlippagePoint):Number(a.toString())*(1+t.priceSlippagePoint)),l=t.paths[0].coinType[0],h=t.paths[0].coinType[t.paths[0].coinType.length-1],_=Y.buildCoinForAmount(o,i,BigInt(n?a:d),l,!1,!0),g=_.originalSplitedCoin!==void 0,C=Y.buildCoinForAmount(o,i,0n,h,!1),I=await this.buildRouterBasePathReturnCoins(e,t,n,_,C,o),O=[],{toCoin:M,fromCoin:j}=I;if(o=I.tx,C.isMintZeroCoin?O.push({coinType:h,coin:M}):C.originalSplitedCoin!==void 0?o.mergeCoins(C.originalSplitedCoin,[M]):o.mergeCoins(C.targetCoin,[M]),g){const B=_==null?void 0:_.originalSplitedCoin;o.mergeCoins(B,[j])}else O.push({coinType:l,coin:j});for(let B=0;B<O.length;B++)this.buildTransferCoin(e,o,O[B].coin,O[B].coinType,s);return o}static async buildRouterBasePathReturnCoins(e,t,n,i,o,s){const{clmm_pool:r,integrate:a}=e.sdkOptions,c=x(r).global_config_id,d=t.paths.filter(B=>B&&B.poolAddress),l=Number(d.reduce((B,q)=>B.add(q.amountIn),J).toString()),h=Number(d.reduce((B,q)=>B.add(q.amountOut),J).toString()),_=Math.round(n?Number(h.toString())*(1-t.priceSlippagePoint):Number(l.toString())*(1+t.priceSlippagePoint)),g=t.paths[0].coinType[0],C=t.paths[0].coinType[t.paths[0].coinType.length-1];let I=i.targetCoin,O;o.isMintZeroCoin||o.originalSplitedCoin!==void 0?O=o.targetCoin:O=Y.callMintZeroValueCoin(s,C);const M=t.partner==="",j=M?Nn:_s;for(const B of d)if(B.poolAddress.length===1){const q=B.a2b[0],Z={amount:Number(B.amountIn.toString()),amountLimit:_,poolCoinA:B.a2b[0]?g:C,poolCoinB:B.a2b[0]?C:g},H=M?"swap":"swap_with_partner",ce=q?I:O,we=q?O:I,Pe=n?B.amountIn.toString():B.amountOut.toString(),Q=on.getDefaultSqrtPriceLimit(q).toString(),W=M?[s.object(c),s.object(B.poolAddress[0]),ce,we,s.pure.bool(q),s.pure.bool(n),s.pure.u64(Pe),s.pure.u128(Q),s.pure.bool(!1),s.object($)]:[s.object(c),s.object(B.poolAddress[0]),s.object(t.partner),ce,we,s.pure.bool(q),s.pure.bool(n),s.pure.u64(Pe),s.pure.u128(Q),s.pure.bool(!1),s.object($)],_e=[Z.poolCoinA,Z.poolCoinB],A=s.moveCall({target:`${e.sdkOptions.integrate.published_at}::${j}::${H}`,typeArguments:_e,arguments:W});I=q?A[0]:A[1],O=q?A[1]:A[0]}else{const q=n?B.amountIn:B.rawAmountLimit[0],Z=n?0:B.amountOut;let H="";B.a2b[0]?B.a2b[1]?H="swap_ab_bc":H="swap_ab_cb":B.a2b[1]?H="swap_ba_bc":H="swap_ba_cb",M||(H=`${H}_with_partner`);const ce=on.getDefaultSqrtPriceLimit(B.a2b[0]),we=on.getDefaultSqrtPriceLimit(B.a2b[1]),Pe=M?[s.object(c),s.object(B.poolAddress[0]),s.object(B.poolAddress[1]),I,O,s.pure.bool(n),s.pure.u64(q.toString()),s.pure.u64(Z.toString()),s.pure.u128(ce.toString()),s.pure.u128(we.toString()),s.object($)]:[s.object(c),s.object(B.poolAddress[0]),s.object(B.poolAddress[1]),s.object(t.partner),I,O,s.pure.bool(n),s.pure.u64(q.toString()),s.pure.u64(Z.toString()),s.pure.u128(ce.toString()),s.pure.u128(we.toString()),s.object($)],Q=[B.coinType[0],B.coinType[1],B.coinType[2]],W=s.moveCall({target:`${a.published_at}::${j}::${H}`,typeArguments:Q,arguments:Pe});I=W[0],O=W[1]}return this.checkCoinThreshold(e,n,s,O,_,C),{fromCoin:I,toCoin:O,tx:s}}static async buildAggregatorSwapReturnCoins(e,t,n,i,o,s,r,a){if(a==null){if(e.senderAddress.length===0)throw Error("recipient and this config sdk senderAddress all not set");a=e.senderAddress}t.splitPaths.length>1&&(o="");let c,d;const l=t.splitPaths.some(h=>h.basePaths.some(_=>_.label==="Deepbook"));if((!t.byAmountIn||t.splitPaths.length===1)&&!l){const h=[];for(const C of t.splitPaths){const I=[],O=[],M=[],j=[];for(let q=0;q<C.basePaths.length;q+=1){const Z=C.basePaths[q];I.push(Z.direction),O.push(Z.poolAddress),M.push(new m(Z.inputAmount.toString())),q===0?j.push(Z.fromCoin,Z.toCoin):j.push(Z.toCoin)}const B={amountIn:new m(C.inputAmount.toString()),amountOut:new m(C.outputAmount.toString()),poolAddress:O,a2b:I,rawAmountLimit:M,isExceed:!1,coinType:j};h.push(B)}const _={paths:h,partner:o,priceSlippagePoint:s},g=await this.buildRouterBasePathReturnCoins(e,_,t.byAmountIn,n,i,r);c=g.fromCoin,d=g.toCoin,r=g.tx}else{const h=Math.round(t.outputAmount*(1-s));c=n.targetCoin,i.isMintZeroCoin||i.originalSplitedCoin!==void 0?d=i.targetCoin:d=Y.callMintZeroValueCoin(r,t.toCoin);let _=!1,g;if(l){const[C,I]=xa.createAccountCap(a,e.sdkOptions,r);r=I,g=C,_=!0}for(let C=0;C<t.splitPaths.length;C+=1){const I=t.splitPaths[C];let O;for(let M=0;M<I.basePaths.length;M+=1){const j=I.basePaths[M];if(j.label==="Deepbook")if(M===0)if(I.basePaths.length===1){const B=this.buildDeepbookBasePathTx(e,j,r,g,c,d,!1);c=B.from,d=B.to}else{O=Y.callMintZeroValueCoin(r,j.toCoin);const B=this.buildDeepbookBasePathTx(e,j,r,g,c,O,!1);c=B.from,O=B.to}else{const B=this.buildDeepbookBasePathTx(e,j,r,g,O,d,!0);O=B.from,d=B.to}if(j.label==="Cetus")if(M===0)if(I.basePaths.length===1){const B=this.buildClmmBasePathTx(e,j,r,t.byAmountIn,c,d,!1,o);c=B.from,d=B.to}else{O=Y.callMintZeroValueCoin(r,j.toCoin);const B=this.buildClmmBasePathTx(e,j,r,t.byAmountIn,c,O,!1,o);c=B.from,O=B.to}else{const B=this.buildClmmBasePathTx(e,j,r,t.byAmountIn,O,d,!0,o);O=B.from,d=B.to,r.moveCall({target:`${e.sdkOptions.integrate.published_at}::${Ca}::send_coin`,typeArguments:[j.fromCoin],arguments:[O,r.pure.address(a)]})}}}this.checkCoinThreshold(e,t.byAmountIn,r,d,h,t.toCoin),_&&(r=xa.deleteAccountCapByObject(g,e.sdkOptions,r))}return{fromCoin:c,toCoin:d,tx:r}}static async buildAggregatorSwapTransaction(e,t,n,i,o,s){let r=new N;const a=t.byAmountIn?Math.round(t.outputAmount*(1-o)):Math.round(t.inputAmount*(1+o)),c=Y.buildCoinForAmount(r,n,t.byAmountIn?BigInt(t.inputAmount):BigInt(a),t.fromCoin,!1,!0),d=c.originalSplitedCoin!=null,l=Y.buildCoinForAmount(r,n,0n,t.toCoin,!1),h=await this.buildAggregatorSwapReturnCoins(e,t,c,l,i,o,r,s),{fromCoin:_,toCoin:g}=h;r=h.tx;const C=[];if(l.isMintZeroCoin?C.push({coinType:t.toCoin,coin:g}):l.originalSplitedCoin!=null?r.mergeCoins(l.originalSplitedCoin,[g]):r.mergeCoins(l.targetCoin,[g]),d){const I=c.originalSplitedCoin;r.mergeCoins(I,[_])}else C.push({coinType:t.fromCoin,coin:_});for(let I=0;I<C.length;I++)this.buildTransferCoin(e,r,C[I].coin,C[I].coinType,s);return r}static checkCoinThreshold(e,t,n,i,o,s){t&&n.moveCall({target:`${e.sdkOptions.integrate.published_at}::${Nn}::check_coin_threshold`,typeArguments:[s],arguments:[i,n.pure.u64(o)]})}static buildDeepbookBasePathTx(e,t,n,i,o,s,r){const a=t.direction?o:s,c=t.direction?s:o,d=[n.object(t.poolAddress),i,n.pure.u64(t.inputAmount),n.pure.u64(0),n.pure.bool(t.direction),a,c,n.pure.bool(r),n.object($)],l=t.direction?[t.fromCoin,t.toCoin]:[t.toCoin,t.fromCoin],h=n.moveCall({target:`${e.sdkOptions.deepbook_endpoint_v2.published_at}::endpoints_v2::swap`,typeArguments:l,arguments:d});return o=t.direction?h[0]:h[1],s=t.direction?h[1]:h[0],{from:o,to:s,tx:n}}static buildClmmBasePathTx(e,t,n,i,o,s,r,a){const{clmm_pool:c,integrate:d}=e.sdkOptions,l=x(c).global_config_id;let h=t.direction?o:s,_=t.direction?s:o;const g=a==="",C=g?Nn:_s,I=g?"swap":"swap_with_partner",O=i?t.inputAmount.toString():t.outputAmount.toString(),M=on.getDefaultSqrtPriceLimit(t.direction),j=g?[n.object(l),n.object(t.poolAddress),h,_,n.pure.bool(t.direction),n.pure.bool(i),n.pure.u64(O),n.pure.u128(M.toString()),n.pure.bool(r),n.object($)]:[n.object(l),n.object(t.poolAddress),n.object(a),h,_,n.pure.bool(t.direction),n.pure.bool(i),n.pure.u64(O),n.pure.u128(M.toString()),n.pure.bool(r),n.object($)],B=t.direction?[t.fromCoin,t.toCoin]:[t.toCoin,t.fromCoin],q=n.moveCall({target:`${d.published_at}::${C}::${I}`,typeArguments:B,arguments:j});return h=q[0],_=q[1],o=t.direction?h:_,s=t.direction?_:h,{from:o,to:s,tx:n}}static buildCoinTypePair(e,t){const n=[];if(e.length===2){const i=[];i.push(e[0],e[1]),n.push(i)}else{const i=[];i.push(e[0],e[e.length-1]),n.push(i);for(let o=1;o<e.length-1;o+=1){if(t[o-1]===0)continue;const s=[];s.push(e[0],e[o],e[e.length-1]),n.push(s)}}return n}static buildTransferCoinToSender(e,t,n,i){t.moveCall({target:`${e.sdkOptions.integrate.published_at}::${Ca}::transfer_coin_to_sender`,typeArguments:[i],arguments:[n]})}static buildTransferCoin(e,t,n,i,o){o!=null?t.transferObjects([n],t.pure.address(o)):Y.buildTransferCoinToSender(e,t,n,i)}},X=Y;Dp(X,"callMintZeroValueCoin",(e,t)=>e.moveCall({target:"0x2::coin::zero",typeArguments:[t]}));function gt(e){return!(!e.startsWith("0x")||e.length!==66)}var Vn=new m(1e9),xa=class{static createAccountCap(e,t,n,i=!1){if(e.length===0)throw Error("this config sdk senderAddress is empty");const{deepbook:o}=t,[s]=n.moveCall({target:`${o.published_at}::${Lp}::create_account`,typeArguments:[],arguments:[]});return i&&n.transferObjects([s],n.pure.address(e)),[s,n]}static deleteAccountCap(e,t,n){const{deepbook:i}=t,o=[n.object(e)];return n.moveCall({target:`${i.published_at}::${bs}::delete_account_cap`,typeArguments:[],arguments:o}),n}static deleteAccountCapByObject(e,t,n){const{deepbook:i}=t,o=[e];return n.moveCall({target:`${i.published_at}::${bs}::delete_account_cap`,typeArguments:[],arguments:o}),n}static async getAccountCap(e,t=!0){const n=await e.fullClient.getOwnedObjectsByPage(e.senderAddress,{options:{showType:!0,showContent:!0,showDisplay:t,showOwner:!0},filter:{MoveModule:{package:e.sdkOptions.deepbook.package_id,module:bs}}});return n.data.length===0?"":n.data[0].data.objectId}static async getPools(e){const t=e.sdkOptions.deepbook.package_id,n=[];try{(await e.fullClient.queryEventsByPage({MoveEventType:`${t}::clob_v2::PoolCreated`})).data.forEach(o=>{const s=o.parsedJson;s&&n.push({poolID:s.pool_id,tickSize:Number(s.tick_size),lotSize:Number(s.lot_size),takerFeeRate:Number(s.taker_fee_rate),makerRebateRate:Number(s.maker_rebate_rate),baseAsset:s.base_asset.name,quoteAsset:s.quote_asset.name})})}catch(i){console.log("getPoolImmutables",i)}return n}static async getPoolAsks(e,t,n,i){var _;const{simulationAccount:o}=e.sdkOptions,{deepbook_endpoint_v2:s}=e.sdkOptions,r=new N,a=[],c=[n,i],d=[r.object(t),r.pure.u64("0"),r.pure.u64("999999999999"),r.object($)];r.moveCall({target:`${s.published_at}::endpoints_v2::get_level2_book_status_ask_side`,arguments:d,typeArguments:c});const h=(_=(await e.fullClient.devInspectTransactionBlock({transactionBlock:r,sender:o.address})).events)==null?void 0:_.filter(g=>D(g.type).name==="BookStatus");if(h.length===0)return a;for(let g=0;g<h[0].parsedJson.depths.length;g++){const C=h[0].parsedJson.price[g],I=h[0].parsedJson.depths[g],O={price:parseInt(C,10),quantity:parseInt(I,10)};a.push(O)}return a}static async getPoolBids(e,t,n,i){var _;const{simulationAccount:o}=e.sdkOptions,{deepbook_endpoint_v2:s}=e.sdkOptions,r=new N,a=[],c=[n,i],d=[r.object(t),r.pure.u64("0"),r.pure.u64("999999999999"),r.object($)];r.moveCall({target:`${s.published_at}::endpoints_v2::get_level2_book_status_bid_side`,arguments:d,typeArguments:c});const h=(_=(await e.fullClient.devInspectTransactionBlock({transactionBlock:r,sender:o.address})).events)==null?void 0:_.filter(g=>D(g.type).name==="BookStatus");if(h.length===0)return a;for(let g=0;g<h[0].parsedJson.depths.length;g++){const C=h[0].parsedJson.price[g],I=h[0].parsedJson.depths[g],O={price:parseInt(C,10),quantity:parseInt(I,10)};a.push(O)}return a}static async preSwap(e,t,n,i){let o=!1,s=J,r=new m(i),a=J;const c=new m(i);if(n){let d=await this.getPoolBids(e,t.poolID,t.baseAsset,t.quoteAsset);d===null&&(o=!0),d=d.sort((l,h)=>h.price-l.price);for(let l=0;l<d.length;l+=1){const h=new m(d[l].quantity),_=new m(d[l].price),g=h.mul(new m(_)).mul(new m(t.takerFeeRate)).div(Vn).div(Vn);if(r.gt(h))r=r.sub(h),s=s.add(h.mul(_).div(Vn).sub(g)),a=a.add(g);else{const C=r.mul(new m(d[l].price)).div(Vn),I=C.mul(new m(t.takerFeeRate)).div(Vn);s=s.add(C.sub(I)),r=r.sub(r),a=a.add(I)}if(r.eq(J))break}}else{const d=await this.getPoolAsks(e,t.poolID,t.baseAsset,t.quoteAsset);d===null&&(o=!0);for(let l=0;l<d.length;l+=1){const h=new m(d[l].price).mul(new m(d[l].quantity)).div(new m(1e9)),_=h.mul(new m(t.takerFeeRate)).div(Vn),g=h.add(_);if(r.gt(h))s=s.add(new m(d[l].quantity)),r=r.sub(g),a=a.add(_);else{const C=new m(d[l].quantity).div(new m(t.lotSize)),I=g.div(C),O=r.div(I);s=s.add(O.muln(t.lotSize)),r=r.sub(O.mul(I)),a=a.add(O.div(C).mul(_))}if(r.eq(J))break}}return{poolAddress:t.poolID,estimatedAmountIn:c.sub(r).toNumber(),estimatedAmountOut:s.toNumber(),estimatedFeeAmount:a,isExceed:o,amount:Number(i),aToB:n,byAmountIn:!0}}static async simulateSwap(e,t,n,i,o,s){var Z;const{deepbook_endpoint_v2:r}=e.sdkOptions;let a=new N;const c=await this.getAccountCap(e);let d;if(c===""){const H=this.createAccountCap(e.senderAddress,e.sdkOptions,a),ce=H[0];a=H[1],d=ce}else d=a.object(c);const l=await e.getOwnerCoinAssets(e.senderAddress),h=X.buildCoinForAmount(a,l,BigInt(s),n,!1),_=h==null?void 0:h.targetCoin,g=X.buildCoinForAmount(a,l,BigInt(s),i,!1),C=g==null?void 0:g.targetCoin,I=[n,i],O=[a.object(t),d,a.pure.u64(s),a.pure.u64(0),a.pure.bool(o),_,C,a.object($)];a.moveCall({target:`${r.published_at}::${Up}::swap`,arguments:O,typeArguments:I});const{simulationAccount:M}=e.sdkOptions,B=(Z=(await e.fullClient.devInspectTransactionBlock({transactionBlock:a,sender:M.address})).events)==null?void 0:Z.filter(H=>D(H.type).name==="DeepbookSwapEvent");if(B.length===0)return null;const q=B[0].parsedJson;return{poolAddress:q.pool,estimatedAmountIn:q.amount_in,estimatedAmountOut:q.amount_out,aToB:q.atob}}},k_=class{constructor(e){U(this,"_sdk");U(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPositionList(e,t="all"){const n={data:[],hasNextPage:!0},i=await this._sdk.fullClient.getDynamicFieldsByPage(e,t);n.hasNextPage=i.hasNextPage,n.nextCursor=i.nextCursor;const o=i.data.map(r=>{if(r.error!=null)throw new F(`when getPositionList get position objects error: ${r.error}, please check the rpc, contracts address config and position id.`,"InvalidConfig");return r.name.value}),s=await this._sdk.Position.getSipmlePositionList(o);return n.data=s,n}async getPoolImmutables(e=[],t=0,n=100,i=!1){const{package_id:o}=this._sdk.sdkOptions.clmm_pool,s=`${o}_getInitPoolEvent`,r=this.getCache(s,i),a=[],c=[];if(r!==void 0&&a.push(...r),a.length===0)try{(await this._sdk.fullClient.queryEventsByPage({MoveEventType:`${o}::factory::CreatePoolEvent`})).data.forEach(h=>{const _=h.parsedJson;_&&a.push({poolAddress:_.pool_id,tickSpacing:_.tick_spacing,coinTypeA:D(_.coin_type_a).full_address,coinTypeB:D(_.coin_type_b).full_address})}),this.updateCache(s,a,z)}catch(l){console.log("getPoolImmutables",l)}const d=e.length>0;for(let l=0;l<a.length;l+=1){const h=a[l];d&&!e.includes(h.poolAddress)||!d&&(l<t||l>=t+n)||c.push(h)}return c}async getPools(e=[],t=0,n=100){var r,a,c;const i=[];let o=[];e.length>0?o=[...e]:(await this.getPoolImmutables([],t,n,!1)).forEach(l=>o.push(l.poolAddress));const s=await this._sdk.fullClient.batchGetObjects(o,{showContent:!0,showType:!0});for(const d of s){if(d.error!=null||((a=(r=d.data)==null?void 0:r.content)==null?void 0:a.dataType)!=="moveObject")throw new F(`getPools error code: ${((c=d.error)==null?void 0:c.code)??"unknown error"}, please check config and object ids`,"InvalidPoolObject");const l=gs(d);i.push(l);const h=`${l.poolAddress}_getPoolObject`;this.updateCache(h,l,z)}return i}async getPoolImmutablesWithPage(e="all",t=!1){const{package_id:n}=this._sdk.sdkOptions.clmm_pool,i=[],o={data:[],hasNextPage:!1},s=e==="all",r=`${n}_getPoolImmutables`;if(s){const a=this.getCache(r,t);a&&i.push(...a)}if(i.length===0)try{const a=`${n}::factory::CreatePoolEvent`,c=await this._sdk.fullClient.queryEventsByPage({MoveEventType:a},e);o.hasNextPage=c.hasNextPage,o.nextCursor=c.nextCursor,c.data.forEach(d=>{const l=d.parsedJson;if(l){const h={poolAddress:l.pool_id,tickSpacing:l.tick_spacing,coinTypeA:D(l.coin_type_a).full_address,coinTypeB:D(l.coin_type_b).full_address};i.push(h)}})}catch(a){console.log("getPoolImmutables",a)}return o.data=i,s&&this.updateCache(`${n}_getPoolImmutables`,i,z),o}async getPoolsWithPage(e=[],t="all",n=!1){var r,a,c;const i=[];let o=[];e.length>0?o=[...e]:(await this.getPoolImmutablesWithPage(t,n)).data.forEach(l=>o.push(l.poolAddress));const s=await this._sdk.fullClient.batchGetObjects(o,{showContent:!0,showType:!0});for(const d of s){if(d.error!=null||((a=(r=d.data)==null?void 0:r.content)==null?void 0:a.dataType)!=="moveObject")throw new F(`getPoolWithPages error code: ${((c=d.error)==null?void 0:c.code)??"unknown error"}, please check config and object ids`,"InvalidPoolObject");const l=gs(d);i.push(l);const h=`${l.poolAddress}_getPoolObject`;this.updateCache(h,l,z)}return i}async getPool(e,t=!0){var r,a,c;const n=`${e}_getPoolObject`,i=this.getCache(n,t);if(i!==void 0)return i;const o=await this._sdk.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});if(o.error!=null||((a=(r=o.data)==null?void 0:r.content)==null?void 0:a.dataType)!=="moveObject")throw new F(`getPool error code: ${((c=o.error)==null?void 0:c.code)??"unknown error"}, please check config and object id`,"InvalidPoolObject");const s=gs(o);return this.updateCache(n,s),s}async getPoolByCoins(e,t){if(e.length===0)return[];const n=this._sdk.sdkOptions.swapCountUrl,i=await fetch(n);let o;try{o=await i.json()}catch{throw new F(`Failed tp [arse response from ${n}].`,"InvalidSwapCountUrl")}const s=o.data.lp_list;if(!s||s.length===0)throw new F(`Failed tp [arse response from ${n}].`,"PoolsNotFound");const r=[];for(const a of s)e.includes(a.coin_a_address)&&e.includes(a.coin_b_address)&&(t!=null?a.object.feeRate===t&&r.push(a.address):r.push(a.address));return r.length>0?await this.getPools(r):[]}async creatPoolsTransactionPayload(e){for(const n of e)if(Xs(ae(n.coinTypeA),ae(n.coinTypeB))){const i=n.coinTypeB;n.coinTypeB=n.coinTypeA,n.coinTypeA=i}return await this.creatPool(e)}async creatPoolTransactionPayload(e){if(Xs(ae(e.coinTypeA),ae(e.coinTypeB))){const t=e.coinTypeB;e.coinTypeB=e.coinTypeA,e.coinTypeA=t}return"fix_amount_a"in e?await this.creatPoolAndAddLiquidity(e):await this.creatPool([e])}async getClmmConfigs(e=!1){const{package_id:t}=this._sdk.sdkOptions.clmm_pool,n=`${t}_getInitEvent`,i=this.getCache(n,e);if(i!==void 0)return i;const o=await this._sdk.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),s=$i(o),r=(await this._sdk.fullClient.queryEventsByPage({Transaction:s})).data,a={pools_id:"",global_config_id:"",global_vault_id:"",admin_cap_id:""};return r.length>0&&(r.forEach(c=>{const d=c.parsedJson;if(c.type)switch(D(c.type).full_address){case`${t}::config::InitConfigEvent`:a.global_config_id=d.global_config_id,a.admin_cap_id=d.admin_cap_id;break;case`${t}::factory::InitFactoryEvent`:a.pools_id=d.pools_id;break;case`${t}::rewarder::RewarderInitEvent`:a.global_vault_id=d.global_vault_id;break;case`${t}::partner::InitPartnerEvent`:a.partners_id=d.partners_id;break}}),this.updateCache(n,a,z)),a}async getSuiTransactionResponse(e,t=!1){const n=`${e}_getSuiTransactionResponse`,i=this.getCache(n,t);if(i!==void 0)return i;let o;try{o=await this._sdk.fullClient.getTransactionBlock({digest:e,options:{showEvents:!0,showEffects:!0,showBalanceChanges:!0,showInput:!0,showObjectChanges:!0}})}catch{o=await this._sdk.fullClient.getTransactionBlock({digest:e,options:{showEvents:!0,showEffects:!0}})}return this.updateCache(n,o,z),o}async creatPool(e){const t=new N,{integrate:n,clmm_pool:i}=this.sdk.sdkOptions,o=x(i),s=o.global_config_id,r=o.pools_id;return e.forEach(a=>{const c=[t.object(s),t.object(r),t.pure.u32(a.tick_spacing),t.pure.u128(a.initialize_sqrt_price),t.pure.string(a.uri),t.object($)];t.moveCall({target:`${n.published_at}::${Ci}::create_pool`,typeArguments:[a.coinTypeA,a.coinTypeB],arguments:c})}),t}async creatPoolAndAddLiquidity(e){if(!gt(this._sdk.senderAddress))throw new F("this config sdk senderAddress is not set right","InvalidSendAddress");const t=new N,{integrate:n,clmm_pool:i}=this.sdk.sdkOptions,o=x(i),s=o.global_config_id,r=o.pools_id,a=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress),c=X.buildAddLiquidityFixTokenCoinInput(t,!e.fix_amount_a,e.amount_a,e.slippage,e.coinTypeA,a,!1),d=X.buildAddLiquidityFixTokenCoinInput(t,e.fix_amount_a,e.amount_b,e.slippage,e.coinTypeB,a,!1),l=[t.object(s),t.object(r),t.pure.u32(e.tick_spacing),t.pure.u128(e.initialize_sqrt_price),t.pure.string(e.uri),c.targetCoin,d.targetCoin,t.pure.u32(Number(Ct(BigInt(e.tick_lower)).toString())),t.pure.u32(Number(Ct(BigInt(e.tick_upper)).toString())),t.pure.u64(e.amount_a),t.pure.u64(e.amount_b),t.pure.bool(e.fix_amount_a),t.object($)];return t.moveCall({target:`${n.published_at}::${Tn}::create_pool_with_liquidity`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:l}),t}async fetchTicks(e){let t=[],n=[];for(;;){const o=await this.getTicks({pool_id:e.pool_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,start:n,limit:512});if(t=[...t,...o],o.length<512)break;n=[o[o.length-1].index]}return t}async getTicks(e){var d;const{integrate:t,simulationAccount:n}=this.sdk.sdkOptions,i=[],o=[e.coinTypeA,e.coinTypeB],s=new N,r=s.makeMoveVec({elements:e.start.map(l=>s.pure.u32(l)),type:"u32"}),a=[s.object(e.pool_id),r,s.pure.u64(e.limit.toString())];if(s.moveCall({target:`${t.published_at}::${Kt}::fetch_ticks`,arguments:a,typeArguments:o}),!gt(n.address))throw new F("this config simulationAccount is not set right","InvalidSimulateAccount");const c=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:s,sender:n.address});if(c.error!=null)throw new F(`getTicks error code: ${c.error??"unknown error"}, please check config and tick object ids`,"InvalidTickObjectId");return(d=c.events)==null||d.forEach(l=>{D(l.type).name==="FetchTicksResultEvent"&&l.parsedJson.ticks.forEach(h=>{i.push(y_(h))})}),i}async fetchPositionRewardList(e){var r;const{integrate:t,simulationAccount:n}=this.sdk.sdkOptions,i=[];let o=[];const s=512;for(;;){const a=[e.coinTypeA,e.coinTypeB],c=new N,d=c.makeMoveVec({elements:o.map(g=>c.pure.address(g)),type:void 0}),l=[c.object(e.pool_id),d,c.pure.u64(s)];if(c.moveCall({target:`${t.published_at}::${Kt}::fetch_positions`,arguments:l,typeArguments:a}),!gt(n.address))throw new F("this config simulationAccount is not set right","InvalidSimulateAccount");const h=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:c,sender:n.address});if(h.error!=null)throw new F(`fetch position reward error code: ${h.error??"unknown error"}, please check config and tick object ids`,"InvalidPositionRewardObject");const _=[];if((r=h==null?void 0:h.events)==null||r.forEach(g=>{D(g.type).name==="FetchPositionsEvent"&&g.parsedJson.positions.forEach(C=>{const I=kd(C);_.push(I)})}),i.push(..._),_.length<s)break;o=[_[_.length-1].pos_object_id]}return i}async fetchTicksByRpc(e){let t=[],n=null;const i=512;for(;;){const o=[],s=await this.sdk.fullClient.getDynamicFields({parentId:e,cursor:n,limit:i});if(n=s.nextCursor,s.data.forEach(r=>{D(r.objectType).module==="skip_list"&&o.push(r.objectId)}),t=[...t,...await this.getTicksByRpc(o)],n===null||s.data.length<i)break}return t}async getTicksByRpc(e){var i,o,s;const t=[],n=await this.sdk.fullClient.batchGetObjects(e,{showContent:!0,showType:!0});for(const r of n){if(r.error!=null||((o=(i=r.data)==null?void 0:i.content)==null?void 0:o.dataType)!=="moveObject")throw new F(`getTicksByRpc error code: ${((s=r.error)==null?void 0:s.code)??"unknown error"}, please check config and tick object ids`,"InvalidTickObjectId");const a=ys(r);a!=null&&t.push(a)}return t}async getTickDataByIndex(e,t){var o,s;const n={type:"u64",value:Ct(BigInt(Zp(t).toString())).toString()},i=await this.sdk.fullClient.getDynamicFieldObject({parentId:e,name:n});if(i.error!=null||((s=(o=i.data)==null?void 0:o.content)==null?void 0:s.dataType)!=="moveObject")throw new F(`get tick by index: ${t} error: ${i.error}`,"InvalidTickIndex");return ys(i)}async getTickDataByObjectId(e){var n,i,o;const t=await this.sdk.fullClient.getObject({id:e,options:{showContent:!0}});if(t.error!=null||((i=(n=t.data)==null?void 0:n.content)==null?void 0:i.dataType)!=="moveObject")throw new F(`getTicksByRpc error code: ${((o=t.error)==null?void 0:o.code)??"unknown error"}, please check config and tick object ids`,"InvalidTickObjectId");return ys(t)}async getPartnerRefFeeAmount(e,t=!0){var c,d;const n=await this._sdk.fullClient.batchGetObjects([e],{showOwner:!0,showContent:!0,showDisplay:t,showType:!0});if(n[0].error!=null||((d=(c=n[0].data)==null?void 0:c.content)==null?void 0:d.dataType)!=="moveObject")throw new F(`get partner by object id: ${e} error: ${n[0].error}`,"NotFoundPartnerObject");const i=n[0].data.content.fields.balances,o=await this._sdk.fullClient.getDynamicFieldsByPage(i.fields.id.id),s=[];o.data.forEach(l=>{var h,_;if(l.error!=null||((_=(h=l.data)==null?void 0:h.content)==null?void 0:_.dataType)!=="moveObject")throw new F(`when getPartnerRefFeeAmount get partner object error: ${l.error}, please check the rpc, contracts address config and position id.`,"InvalidConfig");s.push(l.objectId)});const r=[];return(await this._sdk.fullClient.batchGetObjects(s,{showOwner:!0,showContent:!0,showDisplay:t,showType:!0})).forEach(l=>{var _,g;if(l.error!=null||((g=(_=l.data)==null?void 0:_.content)==null?void 0:g.dataType)!=="moveObject")throw new F(`get coin by object id: ${l.data.objectId} error: ${l.error}`,"InvalidParnterRefFeeFields");const h={coinAddress:l.data.content.fields.name,coinObjectId:l.data.objectId,balance:BigInt(l.data.content.fields.value)};r.push(h)}),r}async claimPartnerRefFeePayload(e,t,n){const i=new N,{clmm_pool:o}=this.sdk.sdkOptions,{global_config_id:s}=x(o),r=[n],a=[i.object(s),i.object(e),i.object(t)];return i.moveCall({target:`${o.published_at}::${$p}::claim_ref_fee`,arguments:a,typeArguments:r}),i}updateCache(e,t,n=qt){let i=this._cache[e];i?(i.overdueTime=ge(n),i.value=t):i=new Ot(t,ge(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e],i=n==null?void 0:n.isValid();if(!t&&i)return n.value;i||delete this._cache[e]}},C_=class{constructor(e){U(this,"_sdk");U(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}buildPositionType(){return`${this._sdk.sdkOptions.clmm_pool.package_id}::position::Position`}async getPositionList(e,t=[],n=!0){const i=[],o=await this._sdk.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:n,showOwner:!0},filter:{Package:this._sdk.sdkOptions.clmm_pool.package_id}}),s=t.length>0;for(const r of o.data)if(D(r.data.type).full_address===this.buildPositionType()){const c=ni(r),d=`${c.pos_object_id}_getPositionList`;this.updateCache(d,c,z),s?t.includes(c.pool)&&i.push(c):i.push(c)}return i}async getPosition(e,t,n=!0,i=!0){let o=await this.getSimplePosition(t,i);return n&&(o=await this.updatePositionRewarders(e,o)),o}async getPositionById(e,t=!0,n=!0){const i=await this.getSimplePosition(e,n);if(t){const o=await this._sdk.Pool.getPool(i.pool,!1);return await this.updatePositionRewarders(o.position_manager.positions_handle,i)}return i}async getSimplePosition(e,t=!0){const n=`${e}_getPositionList`;let i=this.getSimplePositionByCache(e);if(i===void 0){const o=await this.sdk.fullClient.getObject({id:e,options:{showContent:!0,showType:!0,showDisplay:t,showOwner:!0}});i=ni(o),this.updateCache(n,i,z)}return i}getSimplePositionByCache(e){const t=`${e}_getPositionList`;return this.getCache(t)}async getSipmlePositionList(e,t=!0){const n=[],i=[];return e.forEach(o=>{const s=this.getSimplePositionByCache(o);s?n.push(s):i.push(o)}),i.length>0&&(await this._sdk.fullClient.batchGetObjects(i,{showOwner:!0,showContent:!0,showDisplay:t,showType:!0})).forEach(s=>{if(s.error==null){const r=ni(s);n.push(r);const a=`${r.pos_object_id}_getPositionList`;this.updateCache(a,r,z)}}),n}async updatePositionRewarders(e,t){const n=await this.getPositionRewarders(e,t.pos_object_id);return{...t,...n}}async getPositionRewarders(e,t){try{const n=await this._sdk.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),o=ee(n.data).value.fields.value;return kd(o)}catch(n){console.log(n);return}}async fetchPosFeeAmount(e){var c;const{clmm_pool:t,integrate:n,simulationAccount:i}=this.sdk.sdkOptions,o=new N;for(const d of e){const l=[d.coinTypeA,d.coinTypeB],h=[o.object(x(t).global_config_id),o.object(d.poolAddress),o.pure.address(d.positionId)];o.moveCall({target:`${n.published_at}::${Kt}::fetch_position_fees`,arguments:h,typeArguments:l})}if(!gt(i.address))throw new F("this config simulationAccount is not set right","InvalidSimulateAccount");const s=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:o,sender:i.address});if(s.error!=null)throw new F(`fetch position fee error code: ${s.error??"unknown error"}, please check config and postion and pool object ids`,"InvalidPoolObject");const r=(c=s.events)==null?void 0:c.filter(d=>D(d.type).name==="FetchPositionFeesEvent");if(r.length===0)return[];const a=[];for(let d=0;d<r.length;d+=1){const{parsedJson:l}=r[d],h={feeOwedA:new m(l.fee_owned_a),feeOwedB:new m(l.fee_owned_b),position_id:l.position_id};a.push(h)}return a}async batchFetchPositionFees(e){const t=[];for(const i of e){const o=await this._sdk.Position.getPositionById(i,!1),s=await this._sdk.Pool.getPool(o.pool,!1);t.push({poolAddress:s.poolAddress,positionId:o.pos_object_id,coinTypeA:s.coinTypeA,coinTypeB:s.coinTypeB})}const n={};if(t.length>0){const i=await this.fetchPosFeeAmount(t);for(const o of i)n[o.position_id]=o;return n}return n}async createAddLiquidityFixTokenPayload(e,t,n,i,o){if(!gt(this._sdk.senderAddress))throw new F("this config sdk senderAddress is not set right","InvalidSendAddress");const s=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);if(t){const{isAdjustCoinA:r,isAdjustCoinB:a}=wo(e);if(e=e,e.fix_amount_a&&r||!e.fix_amount_a&&a)return n=await X.buildAddLiquidityFixTokenForGas(this._sdk,s,e,t,n,i,o),n}return X.buildAddLiquidityFixToken(this._sdk,s,e,n,i,o)}async createAddLiquidityPayload(e,t,n,i){const{integrate:o,clmm_pool:s}=this._sdk.sdkOptions;if(!gt(this._sdk.senderAddress))throw new F("this config sdk senderAddress is not set right","InvalidSendAddress");const r=Ct(BigInt(e.tick_lower)).toString(),a=Ct(BigInt(e.tick_upper)).toString(),c=[e.coinTypeA,e.coinTypeB];t=t||new N;const d=!bi(e.pos_id),l=BigInt(e.max_amount_a),h=BigInt(e.max_amount_b);let _,g;if(n==null||i==null){const C=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);_=X.buildCoinForAmount(t,C,l,e.coinTypeA,!1),g=X.buildCoinForAmount(t,C,h,e.coinTypeB,!1)}else _={targetCoin:n,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},g={targetCoin:i,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"};if(d)t.moveCall({target:`${o.published_at}::${Tn}::open_position_with_liquidity`,typeArguments:c,arguments:[t.object(x(s).global_config_id),t.object(e.pool_id),t.pure.u32(Number(r)),t.pure.u32(Number(a)),_.targetCoin,g.targetCoin,t.pure.u64(e.max_amount_a),t.pure.u64(e.max_amount_b),t.pure.u128(e.delta_liquidity),t.object($)]});else{const C=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);t=X.createCollectRewarderAndFeeParams(this._sdk,t,e,C,_.remainCoins,g.remainCoins),t.moveCall({target:`${o.published_at}::${Tn}::add_liquidity`,typeArguments:c,arguments:[t.object(x(s).global_config_id),t.object(e.pool_id),t.object(e.pos_id),_.targetCoin,g.targetCoin,t.pure.u64(e.max_amount_a),t.pure.u64(e.max_amount_b),t.pure.u128(e.delta_liquidity),t.object($)]})}return t}async removeLiquidityTransactionPayload(e,t){if(!gt(this._sdk.senderAddress))throw new F("this config sdk senderAddress is not set right","InvalidSendAddress");const{clmm_pool:n,integrate:i}=this.sdk.sdkOptions,o="remove_liquidity";t=t||new N;const s=[e.coinTypeA,e.coinTypeB],r=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);t=X.createCollectRewarderAndFeeParams(this._sdk,t,e,r);const a=[t.object(x(n).global_config_id),t.object(e.pool_id),t.object(e.pos_id),t.pure.u128(e.delta_liquidity),t.pure.u64(e.min_amount_a),t.pure.u64(e.min_amount_b),t.object($)];return t.moveCall({target:`${i.published_at}::${Ci}::${o}`,typeArguments:s,arguments:a}),t}async closePositionTransactionPayload(e,t){if(!gt(this._sdk.senderAddress))throw new F("this config sdk senderAddress is not set right","InvalidSendAddress");const{clmm_pool:n,integrate:i}=this.sdk.sdkOptions;t=t||new N;const o=[e.coinTypeA,e.coinTypeB],s=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);return t=X.createCollectRewarderAndFeeParams(this._sdk,t,e,s),t.moveCall({target:`${i.published_at}::${Ci}::close_position`,typeArguments:o,arguments:[t.object(x(n).global_config_id),t.object(e.pool_id),t.object(e.pos_id),t.pure.u64(e.min_amount_a),t.pure.u64(e.min_amount_b),t.object($)]}),t}openPositionTransactionPayload(e,t){const{clmm_pool:n,integrate:i}=this.sdk.sdkOptions;t=t||new N;const o=[e.coinTypeA,e.coinTypeB],s=Ct(BigInt(e.tick_lower)).toString(),r=Ct(BigInt(e.tick_upper)).toString(),a=[t.object(x(n).global_config_id),t.object(e.pool_id),t.pure.u32(Number(s)),t.pure.u32(Number(r))];return t.moveCall({target:`${i.published_at}::${Ci}::open_position`,typeArguments:o,arguments:a}),t}async collectFeeTransactionPayload(e,t,n,i){if(!gt(this._sdk.senderAddress))throw new F("this config sdk senderAddress is not set right","InvalidSendAddress");const o=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress,null,!0);t=t||new N;const s=X.buildCoinForAmount(t,o,BigInt(0),e.coinTypeA,!1),r=X.buildCoinForAmount(t,o,BigInt(0),e.coinTypeB,!1),a=n??s.targetCoin,c=i??r.targetCoin;return this.createCollectFeePaylod(e,t,a,c),t}createCollectFeePaylod(e,t,n,i){const{clmm_pool:o,integrate:s}=this.sdk.sdkOptions,r=[e.coinTypeA,e.coinTypeB],a=[t.object(x(o).global_config_id),t.object(e.pool_id),t.object(e.pos_id),n,i];return t.moveCall({target:`${s.published_at}::${Tn}::collect_fee`,typeArguments:r,arguments:a}),t}createCollectFeeNoSendPaylod(e,t,n,i){const{clmm_pool:o,integrate:s}=this.sdk.sdkOptions,r=[e.coinTypeA,e.coinTypeB],a=[t.object(x(o).global_config_id),t.object(e.pool_id),t.object(e.pos_id),n,i];return t.moveCall({target:`${s.published_at}::${hd}::collect_fee`,typeArguments:r,arguments:a}),t}async calculateFee(e){const t=await this.collectFeeTransactionPayload(e);if(!gt(this._sdk.senderAddress))throw new F("this config sdk senderAddress is not set right","InvalidSendAddress");const n=await this._sdk.fullClient.devInspectTransactionBlock({transactionBlock:t,sender:this._sdk.senderAddress});for(const i of n.events)if(D(i.type).name==="CollectFeeEvent"){const o=i.parsedJson;return{feeOwedA:o.amount_a,feeOwedB:o.amount_b}}return{feeOwedA:"0",feeOwedB:"0"}}updateCache(e,t,n=qt){let i=this._cache[e];i?(i.overdueTime=ge(n),i.value=t):i=new Ot(t,ge(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e],i=n==null?void 0:n.isValid();if(!t&&i)return n.value;i||delete this._cache[e]}},A_=class{constructor(e){U(this,"_sdk");U(this,"growthGlobal");this._sdk=e,this.growthGlobal=[J,J,J]}get sdk(){return this._sdk}async emissionsEveryDay(e){const n=(await this.sdk.Pool.getPool(e)).rewarder_infos;if(!n)return null;const i=[];for(const o of n){const s=le.fromX64(new m(o.emissions_per_second));i.push({emissions:Math.floor(s.toNumber()*60*60*24),coin_address:o.coinAddress})}return i}async updatePoolRewarder(e,t){const n=await this.sdk.Pool.getPool(e),i=n.rewarder_last_updated_time;if(n.rewarder_last_updated_time=t.toString(),Number(n.liquidity)===0||t.eq(new m(i)))return n;const o=t.div(new m(1e3)).sub(new m(i)).add(new m(15)),s=n.rewarder_infos;for(let r=0;r<s.length;r+=1){const a=s[r],c=le.checkMulDivFloor(o,new m(a.emissions_per_second),new m(n.liquidity),128);this.growthGlobal[r]=new m(a.growth_global).add(new m(c))}return n}async posRewardersAmount(e,t,n){const i=Date.parse(new Date().toString()),o=await this.updatePoolRewarder(e,new m(i)),s=await this.sdk.Position.getPositionRewarders(t,n);if(s===void 0)return[];const r=o.ticks_handle,a=await this.sdk.Pool.getTickDataByIndex(r,s.tick_lower_index),c=await this.sdk.Pool.getTickDataByIndex(r,s.tick_upper_index);return this.posRewardersAmountInternal(o,s,a,c)}async poolRewardersAmount(e,t){const n=Date.parse(new Date().toString()),i=await this.updatePoolRewarder(t,new m(n)),o=await this.sdk.Position.getPositionList(e,[t]),s=await this.getPoolLowerAndUpperTicks(i.ticks_handle,o),r=[J,J,J];for(let a=0;a<o.length;a+=1){const c=await this.posRewardersAmountInternal(i,o[a],s[0][a],s[1][a]);for(let d=0;d<3;d+=1)r[d]=r[d].add(c[d].amount_owed)}return r}posRewardersAmountInternal(e,t,n,i){const o=t.tick_lower_index,s=t.tick_upper_index,r=w_(e,n,i,o,s,this.growthGlobal),a=[],c=[];if(r.length>0){let d=le.subUnderflowU128(r[0],new m(t.reward_growth_inside_0));d.gt(new m("3402823669209384634633745948738404"))&&(d=an);const l=le.checkMulShiftRight(new m(t.liquidity),d,64,128);a.push(r[0]),c.push({amount_owed:new m(t.reward_amount_owed_0).add(l),coin_address:e.rewarder_infos[0].coinAddress})}if(r.length>1){let d=le.subUnderflowU128(r[1],new m(t.reward_growth_inside_1));d.gt(new m("3402823669209384634633745948738404"))&&(d=an);const l=le.checkMulShiftRight(new m(t.liquidity),d,64,128);a.push(r[1]),c.push({amount_owed:new m(t.reward_amount_owed_1).add(l),coin_address:e.rewarder_infos[1].coinAddress})}if(r.length>2){let d=le.subUnderflowU128(r[2],new m(t.reward_growth_inside_2));d.gt(new m("3402823669209384634633745948738404"))&&(d=an);const l=le.checkMulShiftRight(new m(t.liquidity),d,64,128);a.push(r[2]),c.push({amount_owed:new m(t.reward_amount_owed_2).add(l),coin_address:e.rewarder_infos[2].coinAddress})}return c}async batchFetchPositionRewarders(e){const t=[];for(const i of e){const o=await this._sdk.Position.getPositionById(i,!1),s=await this._sdk.Pool.getPool(o.pool,!1);t.push({poolAddress:s.poolAddress,positionId:o.pos_object_id,coinTypeA:s.coinTypeA,coinTypeB:s.coinTypeB,rewarderInfo:s.rewarder_infos})}const n={};if(t.length>0){const i=await this.fetchPosRewardersAmount(t);for(const o of i)n[o.positionId]=o.rewarderAmountOwed;return n}return n}async fetchPositionRewarders(e,t){const n={poolAddress:e.poolAddress,positionId:t,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,rewarderInfo:e.rewarder_infos};return(await this.fetchPosRewardersAmount([n]))[0].rewarderAmountOwed}async batchFetchPositionFees(e){const t=[];for(const i of e){const o=await this._sdk.Position.getPositionById(i,!1),s=await this._sdk.Pool.getPool(o.pool,!1);t.push({poolAddress:s.poolAddress,positionId:o.pos_object_id,coinTypeA:s.coinTypeA,coinTypeB:s.coinTypeB})}const n={};if(t.length>0){const i=await this.fetchPosFeeAmount(t);for(const o of i)n[o.position_id]=o;return n}return n}async fetchPosFeeAmount(e){var c;const{clmm_pool:t,integrate:n,simulationAccount:i}=this.sdk.sdkOptions,o=new N;for(const d of e){const l=[d.coinTypeA,d.coinTypeB],h=[o.object(x(t).global_config_id),o.object(d.poolAddress),o.pure.address(d.positionId)];o.moveCall({target:`${n.published_at}::${Kt}::fetch_position_fees`,arguments:h,typeArguments:l})}const r=(c=(await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:o,sender:i.address})).events)==null?void 0:c.filter(d=>D(d.type).name==="FetchPositionFeesEvent");if(r.length===0)return[];const a=[];for(let d=0;d<r.length;d+=1){const{parsedJson:l}=r[d],h={feeOwedA:new m(l.fee_owned_a),feeOwedB:new m(l.fee_owned_b),position_id:l.position_id};a.push(h)}return a}async fetchPosRewardersAmount(e){var c;const{clmm_pool:t,integrate:n,simulationAccount:i}=this.sdk.sdkOptions,o=new N;for(const d of e){const l=[d.coinTypeA,d.coinTypeB],h=[o.object(x(t).global_config_id),o.object(d.poolAddress),o.pure.address(d.positionId),o.object($)];o.moveCall({target:`${n.published_at}::${Kt}::fetch_position_rewards`,arguments:h,typeArguments:l})}if(!gt(i.address))throw new F(`this config simulationAccount: ${i.address} is not set right`,"InvalidSimulateAccount");const s=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:o,sender:i.address});if(s.error!=null)throw new F(`fetch position rewards error code: ${s.error??"unknown error"}, please check config and params`,"InvalidConfig");const r=(c=s.events)==null?void 0:c.filter(d=>D(d.type).name==="FetchPositionRewardsEvent");if(r.length===0)return[];if(r.length!==e.length)throw new F("valueData.length !== params.pools.length");const a=[];for(let d=0;d<r.length;d+=1){const l={poolAddress:e[d].poolAddress,positionId:e[d].positionId,rewarderAmountOwed:[]};for(let h=0;h<e[d].rewarderInfo.length;h+=1)l.rewarderAmountOwed.push({amount_owed:new m(r[d].parsedJson.data[h]),coin_address:e[d].rewarderInfo[h].coinAddress});a.push(l)}return a}async fetchPoolRewardersAmount(e,t){const n=await this.sdk.Pool.getPool(t),i=await this.sdk.Position.getPositionList(e,[t]),o=[];for(const a of i)o.push({poolAddress:n.poolAddress,positionId:a.pos_object_id,rewarderInfo:n.rewarder_infos,coinTypeA:n.coinTypeA,coinTypeB:n.coinTypeB});const s=await this.fetchPosRewardersAmount(o),r=[J,J,J];if(s!=null)for(const a of s)for(let c=0;c<a.rewarderAmountOwed.length;c+=1)r[c]=r[c].add(a.rewarderAmountOwed[c].amount_owed);return r}async getPoolLowerAndUpperTicks(e,t){const n=[],i=[];for(const o of t){const s=await this.sdk.Pool.getTickDataByIndex(e,o.tick_lower_index),r=await this.sdk.Pool.getTickDataByIndex(e,o.tick_upper_index);n.push(s),i.push(r)}return[n,i]}async collectRewarderTransactionPayload(e){if(!gt(this._sdk.senderAddress))throw new F("this config sdk senderAddress is not set right","InvalidSendAddress");const t=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress,null);let n=new N;return n=X.createCollectRewarderAndFeeParams(this._sdk,n,e,t),n}async batchCollectRewardePayload(e,t,n,i){if(!gt(this._sdk.senderAddress))throw new F("this config sdk senderAddress is not set right","InvalidSendAddress");const o=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress,null);t=t||new N;const s={};return e.forEach(r=>{const a=Se(r.coinTypeA),c=Se(r.coinTypeB);if(r.collect_fee){let l=s[a];l==null&&(n==null?l=X.buildCoinForAmount(t,o,BigInt(0),a,!1):l={targetCoin:n,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},s[a]=l);let h=s[c];h==null&&(i==null?h=X.buildCoinForAmount(t,o,BigInt(0),c,!1):h={targetCoin:i,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},s[c]=h),t=this._sdk.Position.createCollectFeeNoSendPaylod({pool_id:r.pool_id,pos_id:r.pos_id,coinTypeA:r.coinTypeA,coinTypeB:r.coinTypeB},t,l.targetCoin,h.targetCoin)}const d=[];r.rewarder_coin_types.forEach(l=>{const h=Se(l);let _=s[l];_===void 0&&(_=X.buildCoinForAmount(t,o,BigInt(0),h,!1),s[h]=_),d.push(_.targetCoin)}),t=this.createCollectRewarderNoSendPaylod(r,t,d)}),Object.keys(s).forEach(r=>{const a=s[r];a.isMintZeroCoin&&X.buildTransferCoin(this._sdk,t,a.targetCoin,r,this._sdk.senderAddress)}),t}createCollectRewarderPaylod(e,t,n){const{clmm_pool:i,integrate:o}=this.sdk.sdkOptions,s=x(i),r=[e.coinTypeA,e.coinTypeB];return e.rewarder_coin_types.forEach((a,c)=>{t&&t.moveCall({target:`${o.published_at}::${Tn}::collect_reward`,typeArguments:[...r,a],arguments:[t.object(s.global_config_id),t.object(e.pool_id),t.object(e.pos_id),t.object(s.global_vault_id),n[c],t.object($)]})}),t}createCollectRewarderNoSendPaylod(e,t,n){const{clmm_pool:i,integrate:o}=this.sdk.sdkOptions,s=x(i),r=[e.coinTypeA,e.coinTypeB];return e.rewarder_coin_types.forEach((a,c)=>{t&&t.moveCall({target:`${o.published_at}::${hd}::collect_reward`,typeArguments:[...r,a],arguments:[t.object(s.global_config_id),t.object(e.pool_id),t.object(e.pos_id),t.object(s.global_vault_id),n[c],t.object($)]})}),t}};function Wi(e,t){return{pair:`${e}-${t}`,reversePair:`${t}-${e}`}}var S_=class{constructor(e){U(this,"graph");U(this,"pathProviders");U(this,"coinProviders");U(this,"_coinAddressMap");U(this,"poolAddressMap");U(this,"_sdk");this.pathProviders=[],this.coinProviders={coins:[]},this.graph=new sl(!1),this._coinAddressMap=new Map,this.poolAddressMap=new Map,this._sdk=e,this.getPoolAddressMapAndDirection=this.getPoolAddressMapAndDirection.bind(this),this.setCoinList=this.setCoinList.bind(this),this.loadGraph=this.loadGraph.bind(this),this.addCoinProvider=this.addCoinProvider.bind(this),this.addPathProvider=this.addPathProvider.bind(this),this.preRouterSwapA2B2C=this.preRouterSwapA2B2C.bind(this),this.price=this.price.bind(this),this.getPoolWithTVL=this.getPoolWithTVL.bind(this)}get sdk(){return this._sdk}getPoolAddressMapAndDirection(e,t){const{pair:n,reversePair:i}=Wi(e,t);let o=this.poolAddressMap.get(n);if(o!=null)return{addressMap:o,direction:!0};if(o=this.poolAddressMap.get(i),o!=null)return{addressMap:o,direction:!1}}setCoinList(){this.coinProviders.coins.forEach(e=>{this._coinAddressMap.set(e.address,e)})}loadGraph(e,t){this.addCoinProvider(e),this.addPathProvider(t),this.setCoinList(),this.pathProviders.forEach(n=>{const{paths:i}=n;i.forEach(o=>{const s=this.graph.getVertexByKey(o.base)??new Gr(o.base),r=this.graph.getVertexByKey(o.quote)??new Gr(o.quote);this.graph.addEdge(new il(s,r));const a=this._coinAddressMap.get(o.base),c=this._coinAddressMap.get(o.quote);if(a!=null&&c!=null){const d=Wi(o.base,o.quote).pair;this.poolAddressMap.set(d,o.addressMap)}})})}addPathProvider(e){for(let t=0;t<e.paths.length;t+=1){const{base:n,quote:i}=e.paths[t];n.localeCompare(i)<0&&(e.paths[t].base=i,e.paths[t].quote=n),n==="0x2::sui::SUI"&&(e.paths[t].base=i,e.paths[t].quote=n),i==="0x2::sui::SUI"&&(e.paths[t].base=n,e.paths[t].quote=i)}return this.pathProviders.push(e),this}addCoinProvider(e){return this.coinProviders=e,this}tokenInfo(e){return this._coinAddressMap.get(e)}getFeeRate(e,t,n){const i=Wi(e,t).pair,o=this.poolAddressMap.get(i);if(o!=null){for(const[a,c]of o.entries())if(c===n)return a*100}const s=Wi(e,t).reversePair,r=this.poolAddressMap.get(s);if(r!=null){for(const[a,c]of r.entries())if(c===n)return a*100}return 0}async price(e,t,n,i,o,s,r){const a=this.tokenInfo(e),c=this.tokenInfo(t);if(a===void 0||c===void 0)throw new F("From/To coin is undefined","InvalidCoin");const d=this.graph.getVertexByKey(a.address),l=this.graph.getVertexByKey(c.address),h=this.graph.findAllPath(d,l),_=Array.from(h);if(_.length===0)throw new F("No find valid path in coin graph","NotFoundPath");let g=[];for(let Q=0;Q<_.length;Q+=1){const W=_[Q];if(W.length>3)continue;const _e=[],A=[],u=[],p=[];for(let b=0;b<W.length-1;b+=1){const v=W[b].value.toString(),S=W[b+1].value.toString(),P=this.getPoolAddressMapAndDirection(v,S),E=P==null?void 0:P.addressMap,w=P==null?void 0:P.direction;E!=null&&w!=null&&(A.push(w),_e.push(v),_e.push(S),E.forEach(f=>{b===0?u.push(f):p.push(f)}))}for(const b of u)if(p.length>0)for(const v of p){const S={stepNums:2,poolAB:b,poolBC:v,a2b:A[0],b2c:A[1],amount:n,byAmountIn:i,coinTypeA:_e[0],coinTypeB:_e[1],coinTypeC:_e[3]};g.push(S)}else{const v={stepNums:1,poolAB:b,poolBC:void 0,a2b:A[0],b2c:void 0,amount:n,byAmountIn:i,coinTypeA:_e[0],coinTypeB:_e[1],coinTypeC:void 0};g.push(v)}}const C=g.filter(Q=>Q.stepNums===1),I=g.filter(Q=>Q.stepNums!==1);let O=[];try{O=await this.getPoolWithTVL()}catch{O=[]}if(O.length>0){const Q=new Map(O.map(W=>[W.poolAddress,W]));I.sort((W,_e)=>{let A=0,u=0;if(Q.has(W.poolAB)&&Q.has(W.poolBC)){const p=Q.get(W.poolAB),b=Q.get(W.poolBC);A=Math.min(p.tvl,b.tvl)}if(Q.has(_e.poolAB)&&Q.has(_e.poolBC)){const p=Q.get(_e.poolAB),b=Q.get(_e.poolBC);u=Math.min(p.tvl,b.tvl)}return u-A})}if(g=[...C,...I],g.length===0){if(r!=null){const Q=await this.sdk.Swap.preSwapWithMultiPool(r),W={amountIn:new m(Q.estimatedAmountIn),amountOut:new m(Q.estimatedAmountOut),poolAddress:[Q.poolAddress],a2b:[Q.aToB],rawAmountLimit:i?[Q.estimatedAmountOut]:[Q.estimatedAmountIn],isExceed:Q.isExceed,coinType:[e,t]},_e={paths:[W],partner:s,priceSlippagePoint:o};return{amountIn:new m(Q.estimatedAmountIn),amountOut:new m(Q.estimatedAmountOut),paths:[W],a2b:Q.aToB,b2c:void 0,byAmountIn:i,isExceed:Q.isExceed,targetSqrtPrice:[Q.estimatedEndSqrtPrice],currentSqrtPrice:[Q.estimatedStartSqrtPrice],coinTypeA:e,coinTypeB:t,coinTypeC:void 0,createTxParams:_e}}throw new F("No parameters available for service downgrade","NoDowngradeNeedParams")}const M=await this.preRouterSwapA2B2C(g.slice(0,16));if(M==null){if(r!=null){const W=await this.sdk.Swap.preSwapWithMultiPool(r),_e={amountIn:new m(W.estimatedAmountIn),amountOut:new m(W.estimatedAmountOut),poolAddress:[W.poolAddress],a2b:[W.aToB],rawAmountLimit:i?[W.estimatedAmountOut]:[W.estimatedAmountIn],isExceed:W.isExceed,coinType:[e,t]},A={paths:[_e],partner:s,priceSlippagePoint:o};return{amountIn:new m(W.estimatedAmountIn),amountOut:new m(W.estimatedAmountOut),paths:[_e],a2b:W.aToB,b2c:void 0,byAmountIn:i,isExceed:W.isExceed,targetSqrtPrice:[W.estimatedEndSqrtPrice],currentSqrtPrice:[W.estimatedStartSqrtPrice],coinTypeA:e,coinTypeB:t,coinTypeC:void 0,createTxParams:A}}return{amountIn:J,amountOut:J,paths:[],a2b:!1,b2c:!1,byAmountIn:i,isExceed:!0,targetSqrtPrice:[],currentSqrtPrice:[],coinTypeA:"",coinTypeB:"",coinTypeC:void 0,createTxParams:void 0}}const j=M.index,B=g[j].poolBC!=null?[g[j].poolAB,g[j].poolBC]:[g[j].poolAB],q=i?[M.amountMedium,M.amountOut]:[M.amountIn,M.amountMedium],Z=[];Z.push(g[j].a2b),M.stepNum>1&&Z.push(g[j].b2c);const H=[];H.push(g[j].coinTypeA),H.push(g[j].coinTypeB),M.stepNum>1&&H.push(g[j].coinTypeC);const ce={amountIn:M.amountIn,amountOut:M.amountOut,poolAddress:B,a2b:Z,rawAmountLimit:q,isExceed:M.isExceed,coinType:H},we={paths:[ce],partner:s,priceSlippagePoint:o};return{amountIn:M.amountIn,amountOut:M.amountOut,paths:[ce],a2b:g[j].a2b,b2c:M.stepNum>1?g[j].b2c:void 0,byAmountIn:i,isExceed:M.isExceed,targetSqrtPrice:M.targetSqrtPrice,currentSqrtPrice:M.currentSqrtPrice,coinTypeA:g[j].coinTypeA,coinTypeB:g[j].coinTypeB,coinTypeC:M.stepNum>1?g[j].coinTypeC:void 0,createTxParams:we}}async priceUseV1(e,t,n,i,o,s,r){if(r!=null){const a=await this.sdk.Swap.preSwapWithMultiPool(r),c={amountIn:new m(a.estimatedAmountIn),amountOut:new m(a.estimatedAmountOut),poolAddress:[a.poolAddress],a2b:[a.aToB],rawAmountLimit:i?[a.estimatedAmountOut]:[a.estimatedAmountIn],isExceed:a.isExceed,coinType:[e,t]},d={paths:[c],partner:s,priceSlippagePoint:o};return{amountIn:new m(a.estimatedAmountIn),amountOut:new m(a.estimatedAmountOut),paths:[c],a2b:a.aToB,b2c:void 0,byAmountIn:i,isExceed:a.isExceed,targetSqrtPrice:[a.estimatedEndSqrtPrice],currentSqrtPrice:[a.estimatedStartSqrtPrice],coinTypeA:e,coinTypeB:t,coinTypeC:void 0,createTxParams:d}}throw new F("No parameters available for service downgrade","NoDowngradeNeedParams")}async preRouterSwapA2B2C(e){var h;if(e.length===0)return null;const{integrate:t,simulationAccount:n}=this.sdk.sdkOptions,i=new N;for(const _ of e)if(_.stepNums>1){const g=[i.object(_.poolAB),i.object(_.poolBC),i.pure.bool(_.a2b),i.pure.bool(_.b2c),i.pure.bool(_.byAmountIn),i.pure.u64(_.amount.toString())],C=[];_.a2b?C.push(_.coinTypeA,_.coinTypeB):C.push(_.coinTypeB,_.coinTypeA),_.b2c?C.push(_.coinTypeB,_.coinTypeC):C.push(_.coinTypeC,_.coinTypeB),i.moveCall({target:`${t.published_at}::${Nn}::calculate_router_swap_result`,typeArguments:C,arguments:g})}else{const g=[i.object(_.poolAB),i.pure.bool(_.a2b),i.pure.bool(_.byAmountIn),i.pure.u64(_.amount.toString())],C=_.a2b?[_.coinTypeA,_.coinTypeB]:[_.coinTypeB,_.coinTypeA];i.moveCall({target:`${t.published_at}::${Fp}::get_expect_swap_result`,arguments:g,typeArguments:C})}if(!gt(n.address))throw new F("this config simulationAccount is not set right","InvalidSimulateAccount");const s=(h=(await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:i,sender:n.address})).events)==null?void 0:h.filter(_=>D(_.type).name==="CalculatedRouterSwapResultEvent"||D(_.type).name==="ExpectSwapResultEvent");if(s.length===0)return null;let r=e[0].byAmountIn?J:oi,a=0;for(let _=0;_<s.length;_+=1)if(!s[_].parsedJson.data.is_exceed)if(e[0].byAmountIn){const g=new m(s[_].parsedJson.data.amount_out);g.gt(r)&&(a=_,r=g)}else{const g=e[_].stepNums>1?new m(s[_].parsedJson.data.amount_in):new m(s[_].parsedJson.data.amount_in).add(new m(s[_].parsedJson.data.fee_amount));g.lt(r)&&(a=_,r=g)}const c=[],d=[];return e[a].stepNums>1?(d.push(s[a].parsedJson.data.target_sqrt_price_ab,s[a].parsedJson.data.target_sqrt_price_cd),c.push(s[a].parsedJson.data.current_sqrt_price_ab,s[a].parsedJson.data.current_sqrt_price_cd)):(d.push(s[a].parsedJson.data.after_sqrt_price),c.push(s[a].parsedJson.current_sqrt_price)),{index:a,amountIn:e[0].byAmountIn?e[a].amount:r,amountMedium:s[a].parsedJson.data.amount_medium,amountOut:e[0].byAmountIn?r:e[a].amount,targetSqrtPrice:d,currentSqrtPrice:c,isExceed:s[a].parsedJson.data.is_exceed,stepNum:e[a].stepNums}}async getPoolWithTVL(){const e=[],{swapCountUrl:t}=this._sdk.sdkOptions;if(!t)return e;let n;try{n=await fetch(t)}catch{throw new F(`Failed to get pool list with liquidity from ${t}.`,"InvalidSwapCountUrl")}let i;try{i=await n.json()}catch{throw new F(`Failed tp [arse response from ${t}].`,"InvalidSwapCountUrl")}if(i.code!==200)throw new F(`Failed to get pool list from ${t}. Statu code is ${i.code}.`,"InvalidSwapCountUrl");const{pools:o}=i.data;for(const s of o)e.push({poolAddress:s.swap_account,tvl:Number(s.tvl_in_usd)});return e}},T_=class{constructor(e){U(this,"_sdk");U(this,"calculateSingleImpact",(e,t)=>t.minus(e).div(t).mul(100));this._sdk=e}get sdk(){return this._sdk}calculateSwapFee(e){let t=y(0);return e.forEach(n=>{const i=n.basePaths.length;if(i>0){const o=n.basePaths[0],s=o.label==="Cetus"?new V(o.feeRate).div(10**6):new V(o.feeRate).div(10**9),r=y(o.inputAmount).div(10**o.fromDecimal).mul(s);if(t=t.add(r),i>1){const a=n.basePaths[1],c=o.direction?o.currentPrice:new V(1).div(o.currentPrice),d=a.direction?a.currentPrice:new V(1).div(a.currentPrice),l=a.label==="Cetus"?new V(a.feeRate).div(10**6):new V(a.feeRate).div(10**9),_=y(a.outputAmount).div(10**a.toDecimal).mul(l).div(c.mul(d));t=t.add(_)}}}),t.toString()}calculateSwapPriceImpact(e){let t=y(0);return e.forEach(n=>{const i=n.basePaths.length;if(i===1){const o=n.basePaths[0],s=y(o.outputAmount).div(10**o.toDecimal),r=y(o.inputAmount).div(10**o.fromDecimal),a=s.div(r),c=o.direction?new V(o.currentPrice):new V(1).div(o.currentPrice);t=t.add(this.calculateSingleImpact(a,c))}if(i===2){const o=n.basePaths[0],s=n.basePaths[1],r=o.direction?new V(o.currentPrice):new V(1).div(o.currentPrice),a=s.direction?new V(s.currentPrice):new V(1).div(s.currentPrice),c=r.mul(a),d=new V(s.outputAmount).div(10**s.toDecimal),l=new V(o.inputAmount).div(10**o.fromDecimal),h=d.div(l);t=t.add(this.calculateSingleImpact(h,c))}}),t.toString()}async preSwapWithMultiPool(e){var d;const{integrate:t,simulationAccount:n}=this.sdk.sdkOptions,i=new N,o=[e.coinTypeA,e.coinTypeB];for(let l=0;l<e.poolAddresses.length;l+=1){const h=[i.object(e.poolAddresses[l]),i.pure.bool(e.a2b),i.pure.bool(e.byAmountIn),i.pure.u64(e.amount)];i.moveCall({target:`${t.published_at}::${Kt}::calculate_swap_result`,arguments:h,typeArguments:o})}if(!gt(n.address))throw new F("this config simulationAccount is not set right","InvalidSimulateAccount");const s=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:i,sender:n.address});if(s.error!=null)throw new F(`pre swap with multi pools error code: ${s.error??"unknown error"}, please check config and params`,"InvalidConfig");const r=(d=s.events)==null?void 0:d.filter(l=>D(l.type).name==="CalculatedSwapResultEvent");if(r.length===0)return null;if(r.length!==e.poolAddresses.length)throw new F("valueData.length !== params.pools.length","ParamsLengthNotEqual");let a=e.byAmountIn?J:oi,c=0;for(let l=0;l<r.length;l+=1)if(!r[l].parsedJson.data.is_exceed)if(e.byAmountIn){const h=new m(r[l].parsedJson.data.amount_out);h.gt(a)&&(c=l,a=h)}else{const h=new m(r[l].parsedJson.data.amount_out);h.lt(a)&&(c=l,a=h)}return this.transformSwapWithMultiPoolData({poolAddress:e.poolAddresses[c],a2b:e.a2b,byAmountIn:e.byAmountIn,amount:e.amount,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB},r[c].parsedJson)}async preswap(e){var c;const{integrate:t,simulationAccount:n}=this.sdk.sdkOptions,i=new N,o=[e.coinTypeA,e.coinTypeB],s=[i.object(e.pool.poolAddress),i.pure.bool(e.a2b),i.pure.bool(e.byAmountIn),i.pure.u64(e.amount)];if(i.moveCall({target:`${t.published_at}::${Kt}::calculate_swap_result`,arguments:s,typeArguments:o}),!gt(n.address))throw new F("this config simulationAccount is not set right","InvalidSimulateAccount");const r=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:i,sender:n.address});if(r.error!=null)throw new F(`preswap error code: ${r.error??"unknown error"}, please check config and params`,"InvalidConfig");const a=(c=r.events)==null?void 0:c.filter(d=>D(d.type).name==="CalculatedSwapResultEvent");return a.length===0?null:this.transformSwapData(e,a[0].parsedJson.data)}transformSwapData(e,t){const n=t.amount_in&&t.fee_amount?new m(t.amount_in).add(new m(t.fee_amount)).toString():"";return{poolAddress:e.pool.poolAddress,currentSqrtPrice:e.currentSqrtPrice,estimatedAmountIn:n,estimatedAmountOut:t.amount_out,estimatedEndSqrtPrice:t.after_sqrt_price,estimatedFeeAmount:t.fee_amount,isExceed:t.is_exceed,amount:e.amount,aToB:e.a2b,byAmountIn:e.byAmountIn}}transformSwapWithMultiPoolData(e,t){const{data:n}=t;console.log("json data. ",n);const i=n.amount_in&&n.fee_amount?new m(n.amount_in).add(new m(n.fee_amount)).toString():"";return{poolAddress:e.poolAddress,estimatedAmountIn:i,estimatedAmountOut:n.amount_out,estimatedEndSqrtPrice:n.after_sqrt_price,estimatedStartSqrtPrice:n.step_results[0].current_sqrt_price,estimatedFeeAmount:n.fee_amount,isExceed:n.is_exceed,amount:e.amount,aToB:e.a2b,byAmountIn:e.byAmountIn}}calculateRates(e){const{currentPool:t}=e,n=qp(t);let i;e.a2b?i=e.swapTicks.sort((h,_)=>_.index-h.index):i=e.swapTicks.sort((h,_)=>h.index-_.index);const o=t_(e.a2b,e.byAmountIn,e.amount,n,i);let s=!1;e.byAmountIn?s=o.amountIn.lt(e.amount):s=o.amountOut.lt(e.amount);const r=on.getDefaultSqrtPriceLimit(e.a2b);e.a2b&&o.nextSqrtPrice.lt(r)&&(s=!0),!e.a2b&&o.nextSqrtPrice.gt(r)&&(s=!0);let a=0;o.crossTickNum>6&&o.crossTickNum<40&&(a=22e3*(o.crossTickNum-6)),o.crossTickNum>40&&(s=!0);const c=G.sqrtPriceX64ToPrice(n.currentSqrtPrice,e.decimalsA,e.decimalsB).toNumber(),d=G.sqrtPriceX64ToPrice(o.nextSqrtPrice,e.decimalsA,e.decimalsB).toNumber(),l=Math.abs(c-d)/c*100;return{estimatedAmountIn:o.amountIn,estimatedAmountOut:o.amountOut,estimatedEndSqrtPrice:o.nextSqrtPrice,estimatedFeeAmount:o.feeAmount,isExceed:s,extraComputeLimit:a,amount:e.amount,aToB:e.a2b,byAmountIn:e.byAmountIn,priceImpactPct:l}}async createSwapTransactionPayload(e,t){if(this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const n=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);if(t){const{isAdjustCoinA:i,isAdjustCoinB:o}=wo(e);if(e.a2b&&i||!e.a2b&&o)return await X.buildSwapTransactionForGas(this._sdk,e,n,t)}return X.buildSwapTransaction(this.sdk,e,n)}async createSwapTransactionWithoutTransferCoinsPayload(e,t){if(this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const n=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);if(t){const{isAdjustCoinA:i,isAdjustCoinB:o}=wo(e);if(e.a2b&&i||!e.a2b&&o)return await X.buildSwapTransactionWithoutTransferCoinsForGas(this._sdk,e,n,t)}return X.buildSwapTransactionWithoutTransferCoins(this.sdk,e,n)}},x_=class{constructor(e){U(this,"_sdk");U(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getAllRegisteredTokenList(e=!1){return await this.factchTokenList("",e)}async getOwnerTokenList(e="",t=!1){return await this.factchTokenList(e,t)}async getAllRegisteredPoolList(e=!1){return await this.factchPoolList("",e)}async getOwnerPoolList(e="",t=!1){return await this.factchPoolList(e,t)}async getWarpPoolList(e=!1){return await this.factchWarpPoolList("","",e)}async getOwnerWarpPoolList(e="",t="",n=!1){return await this.factchWarpPoolList(e,t,n)}async getTokenListByCoinTypes(e){const t={},n="getAllRegisteredTokenList",i=this.getCache(n);if(i!==void 0){const s=i;for(const r of e)for(const a of s)if(Se(r)===Se(a.address)){t[r]=a;continue}}const o=e.filter(s=>t[s]===void 0);for(const s of o){const r=`${s}_metadata`,a=this.getCache(r);if(a!==void 0)t[s]=a;else{const c=await this._sdk.fullClient.getCoinMetadata({coinType:s});if(c){const d={id:c.id,name:c.name,symbol:c.symbol,official_symbol:c.symbol,coingecko_id:"",decimals:c.decimals,project_url:"",logo_url:c.iconUrl,address:s};t[s]=d,this.updateCache(r,d,z)}}}return t}async factchTokenList(e="",t=!1){var h;const{simulationAccount:n,token:i}=this.sdk.sdkOptions,o="getAllRegisteredTokenList",s=this.getCache(o,t);if(s!==void 0)return s;const r=e.length>0,a=512;let c=0,d=[];if(i===void 0)throw Error("please config token ofsdkOptions");const l=x(i);for(;;){const _=new N;_.moveCall({target:`${i.published_at}::coin_list::${r?"fetch_full_list_with_limit":"fetch_all_registered_coin_info_with_limit"}`,arguments:r?[_.pure.address(l.coin_registry_id),_.pure.address(e),_.pure.u64(c),_.pure.u64(a)]:[_.pure.address(l.coin_registry_id),_.pure.u64(c),_.pure.u64(a)]});const g=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:_,sender:n.address}),C=[];if((h=g.events)==null||h.forEach(I=>{D(I.type).full_address===`${i.published_at}::coin_list::FetchCoinListEvent`&&I.parsedJson.full_list.value_list.forEach(M=>{C.push(this.transformData(M,!1))})}),d=[...d,...C],C.length<a)break;c=d.length}return d}async factchPoolList(e="",t=!1){var h;const{simulationAccount:n,token:i}=this.sdk.sdkOptions,o="getAllRegisteredPoolList",s=this.getCache(o,t);if(s!==void 0)return s;let r=[];const a=512;let c=0;const d=e.length>0;if(i===void 0)throw Error("please config token ofsdkOptions");const l=x(i);for(;;){const _=new N;if(_.moveCall({target:`${i.published_at}::lp_list::${d?"fetch_full_list_with_limit":"fetch_all_registered_coin_info_with_limit"}`,arguments:d?[_.pure.address(l.pool_registry_id),_.pure.address(e),_.pure.u64(c),_.pure.u64(a)]:[_.pure.address(l.pool_registry_id),_.pure.u64(c),_.pure.u64(a)]}),!gt(n.address))throw new F("this config simulationAccount is not set right","InvalidSimulateAccount");const g=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:_,sender:n.address}),C=[];if((h=g.events)==null||h.forEach(I=>{D(I.type).full_address===`${i.published_at}::lp_list::FetchPoolListEvent`&&I.parsedJson.full_list.value_list.forEach(M=>{C.push(this.transformData(M,!0))})}),r=[...r,...C],C.length<a)break;c=r.length}return r}async factchWarpPoolList(e="",t="",n=!1){const i=await this.factchPoolList(e,n);if(i.length===0)return[];const o=await this.factchTokenList(t,n),s=[];for(const r of i){for(const a of o)a.address===r.coin_a_address&&(r.coinA=a),a.address===r.coin_b_address&&(r.coinB=a);s.push(r)}return s}async getTokenConfigEvent(e=!1){const t=this._sdk.sdkOptions.token.package_id,n=`${t}_getTokenConfigEvent`,i=this.getCache(n,e);if(i!==void 0)return i;const o=await this._sdk.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),s=$i(o),r=await this._sdk.fullClient.queryEventsByPage({Transaction:s}),a={coin_registry_id:"",pool_registry_id:"",coin_list_owner:"",pool_list_owner:""};return r.data.length>0&&r.data.forEach(c=>{const d=D(c.type);if(c.transactionModule==="coin_list")switch(d.name){case"InitListEvent":a.coin_list_owner=c.parsedJson.list_id;break;case"InitRegistryEvent":a.coin_registry_id=c.parsedJson.registry_id;break}else if(c.transactionModule==="lp_list")switch(d.name){case"InitListEvent<address>":a.pool_list_owner=c.parsedJson.list_id;break;case"InitRegistryEvent<address>":a.pool_registry_id=c.parsedJson.registry_id;break}}),a.coin_registry_id.length>0&&this.updateCache(n,a,z),a}transformData(e,t){const n={...e};if(t)try{n.coin_a_address=D(n.coin_a_address).full_address,n.coin_b_address=D(n.coin_b_address).full_address}catch{}else n.address=D(n.address).full_address;if(e.extensions){const i=e.extensions.contents;for(const o of i){const{key:s}=o;let{value:r}=o;if(s==="labels")try{r=JSON.parse(decodeURIComponent(Qi.decode(r)))}catch{}s==="pyth_id"&&(r=me(r)),n[s]=r}delete n.extensions}return n}updateCache(e,t,n=qt){let i=this._cache[e];i?(i.overdueTime=ge(n),i.value=t):i=new Ot(t,ge(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e],i=n==null?void 0:n.isValid();if(!t&&i)return n.value;i||delete this._cache[e]}},I_=class{constructor(e){U(this,"_sdk");this._sdk=e}get sdk(){return this._sdk}calculatePrice(e,t,n,i,o){const s=i?t:n,r=i?n:t;return o==="Cetus"?G.sqrtPriceX64ToPrice(e,s,r):new V(e.toString()).div(new V(10).pow(new V(r+9-s)))}parseJsonResult(e){return{isExceed:e.is_exceed,isTimeout:e.is_timeout,inputAmount:e.input_amount,outputAmount:e.output_amount,fromCoin:e.from_coin,toCoin:e.to_coin,byAmountIn:e.by_amount_in,splitPaths:e.split_paths.map(n=>({pathIndex:n.path_index,lastQuoteOutput:n.last_quote_output,percent:n.percent,basePaths:n.best_path.map(o=>({direction:o.direction,label:o.label,poolAddress:o.provider,fromCoin:o.from_coin,toCoin:o.to_coin,outputAmount:o.output_amount,inputAmount:o.input_amount,feeRate:o.fee_rate,currentSqrtPrice:new m(o.current_sqrt_price.toString()),afterSqrtPrice:o.label==="Cetus"?new m(o.after_sqrt_price.toString()):J,fromDecimal:o.from_decimal,toDecimal:o.to_decimal,currentPrice:this.calculatePrice(new m(o.current_sqrt_price.toString()),o.from_decimal,o.to_decimal,o.direction,o.label)})),inputAmount:n.input_amount,outputAmount:n.output_amount}))}}async fetchDataWithAxios(e,t,n){try{const i={...t,timeout:n},o=await wp(e,i);return o.status===200?this.parseJsonResult(o.data):null}catch(i){return console.error(i),null}}async getBestRouter(e,t,n,i,o,s,r,a,c=!1,d=!1,l=[]){let h=null,_="v2",g={},C=this.sdk.sdkOptions.aggregatorUrl;if(l.length>0){const I=new URL(C);C=`${I.protocol}//${I.hostname}/router_with_lp_changes`,g={method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify({from:e,to:t,amount:n,by_amount_in:i,order_split:c,external_router:d,sender_address:"None",request_id:encodeURIComponent(Ki()),lp_changes:l})}}else C=`
      ${C}?from=${encodeURIComponent(e)}&to=${encodeURIComponent(t)}&amount=${encodeURIComponent(n)}&by_amount_in=${encodeURIComponent(i)}&order_split=${encodeURIComponent(c)}&external_router=${encodeURIComponent(d)}&sender_address=''&request_id=${encodeURIComponent(Ki())}
      `;if(h=await this.fetchDataWithAxios(C,g,6e3),h==null){const I=await this.sdk.Router.priceUseV1(e,t,new m(n),i,o,s,a),O=[];for(const j of I.paths){const B=[];if(j.poolAddress.length>1){const Z=this.sdk.Router.tokenInfo(j.coinType[0]).decimals,H=this.sdk.Router.tokenInfo(j.coinType[1]).decimals,ce=j.a2b[0]?G.sqrtPriceX64ToPrice(new m(I.currentSqrtPrice[0]),Z,H):G.sqrtPriceX64ToPrice(new m(I.currentSqrtPrice[0]),H,Z),we={direction:j.a2b[0],label:"Cetus",poolAddress:j.poolAddress[0],fromCoin:j.coinType[0],toCoin:j.coinType[1],feeRate:this.sdk.Router.getFeeRate(j.coinType[0],j.coinType[1],j.poolAddress[0]),outputAmount:I.byAmountIn?j.rawAmountLimit[0].toString():j.rawAmountLimit[1].toString(),inputAmount:j.amountIn.toString(),currentSqrtPrice:I.currentSqrtPrice[0],currentPrice:ce,fromDecimal:Z,toDecimal:H},Pe=this.sdk.Router.tokenInfo(j.coinType[1]).decimals,Q=this.sdk.Router.tokenInfo(j.coinType[2]).decimals,W=j.a2b[1]?G.sqrtPriceX64ToPrice(new m(I.currentSqrtPrice[1]),Pe,Q):G.sqrtPriceX64ToPrice(new m(I.currentSqrtPrice[1]),Q,Pe),_e={direction:j.a2b[1],label:"Cetus",poolAddress:j.poolAddress[1],fromCoin:j.coinType[1],toCoin:j.coinType[2],feeRate:this.sdk.Router.getFeeRate(j.coinType[1],j.coinType[2],j.poolAddress[1]),outputAmount:j.amountOut.toString(),inputAmount:I.byAmountIn?j.rawAmountLimit[0].toString():j.rawAmountLimit[1].toString(),currentSqrtPrice:I.currentSqrtPrice[1],currentPrice:W,fromDecimal:Pe,toDecimal:Q};B.push(we,_e)}else{const Z=this.sdk.Router.tokenInfo(j.coinType[0]).decimals,H=this.sdk.Router.tokenInfo(j.coinType[1]).decimals,ce=j.a2b[0]?G.sqrtPriceX64ToPrice(new m(I.currentSqrtPrice[0]),Z,H):G.sqrtPriceX64ToPrice(new m(I.currentSqrtPrice[0]),H,Z),we={direction:j.a2b[0],label:"Cetus",poolAddress:j.poolAddress[0],fromCoin:j.coinType[0],toCoin:j.coinType[1],feeRate:this.sdk.Router.getFeeRate(j.coinType[0],j.coinType[1],j.poolAddress[0]),outputAmount:j.amountOut.toString(),inputAmount:j.amountIn.toString(),currentSqrtPrice:I.currentSqrtPrice[0],currentPrice:ce,fromDecimal:Z,toDecimal:H};B.push(we)}const q={percent:Number(j.amountIn)/Number(I.amountIn)*100,inputAmount:Number(j.amountIn.toString()),outputAmount:Number(j.amountOut.toString()),pathIndex:0,lastQuoteOutput:0,basePaths:B};O.push(q)}const M={isExceed:I.isExceed,isTimeout:!0,inputAmount:Number(I.amountIn.toString()),outputAmount:Number(I.amountOut.toString()),fromCoin:I.coinTypeA,toCoin:I.coinTypeC!=null?I.coinTypeC:I.coinTypeB,byAmountIn:I.byAmountIn,splitPaths:O};_="v1",h=M}return{result:h,version:_}}async getBestRouterByServer(e,t,n,i,o,s=!1,r=!1,a=[]){let c=null,d={},l=this.sdk.sdkOptions.aggregatorUrl;if(a.length>0){const h=new URL(l);l=`${h.protocol}//${h.hostname}/router_with_lp_changes`,d={method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify({from:e,to:t,amount:n,by_amount_in:i,order_split:s,external_router:r,sender_address:"None",request_id:encodeURIComponent(Ki()),lp_changes:a})}}else l=`
      ${l}?from=${encodeURIComponent(e)}&to=${encodeURIComponent(t)}&amount=${encodeURIComponent(n)}&by_amount_in=${encodeURIComponent(i)}&order_split=${encodeURIComponent(s)}&external_router=${encodeURIComponent(r)}&sender_address=''&request_id=${encodeURIComponent(Ki())}
      `;if(c=await this.fetchDataWithAxios(l,d,6e3),c==null)throw new F("Invalid server response","InvalidServerResponse");return c}async getBestRouterByRpc(e,t,n,i,o,s,r){const a=await this.sdk.Router.priceUseV1(e,t,new m(n),i,o,s,r),c=[];for(const l of a.paths){const h=[];if(l.poolAddress.length>1){const g=this.sdk.Router.tokenInfo(l.coinType[0]).decimals,C=this.sdk.Router.tokenInfo(l.coinType[1]).decimals,I=l.a2b[0]?G.sqrtPriceX64ToPrice(new m(a.currentSqrtPrice[0]),g,C):G.sqrtPriceX64ToPrice(new m(a.currentSqrtPrice[0]),C,g),O={direction:l.a2b[0],label:"Cetus",poolAddress:l.poolAddress[0],fromCoin:l.coinType[0],toCoin:l.coinType[1],feeRate:this.sdk.Router.getFeeRate(l.coinType[0],l.coinType[1],l.poolAddress[0]),outputAmount:a.byAmountIn?l.rawAmountLimit[0].toString():l.rawAmountLimit[1].toString(),inputAmount:l.amountIn.toString(),currentSqrtPrice:a.currentSqrtPrice[0],currentPrice:I,fromDecimal:g,toDecimal:C},M=this.sdk.Router.tokenInfo(l.coinType[1]).decimals,j=this.sdk.Router.tokenInfo(l.coinType[2]).decimals,B=l.a2b[1]?G.sqrtPriceX64ToPrice(new m(a.currentSqrtPrice[1]),M,j):G.sqrtPriceX64ToPrice(new m(a.currentSqrtPrice[1]),j,M),q={direction:l.a2b[1],label:"Cetus",poolAddress:l.poolAddress[1],fromCoin:l.coinType[1],toCoin:l.coinType[2],feeRate:this.sdk.Router.getFeeRate(l.coinType[1],l.coinType[2],l.poolAddress[1]),outputAmount:l.amountOut.toString(),inputAmount:a.byAmountIn?l.rawAmountLimit[0].toString():l.rawAmountLimit[1].toString(),currentSqrtPrice:a.currentSqrtPrice[1],currentPrice:B,fromDecimal:M,toDecimal:j};h.push(O,q)}else{const g=this.sdk.Router.tokenInfo(l.coinType[0]).decimals,C=this.sdk.Router.tokenInfo(l.coinType[1]).decimals,I=l.a2b[0]?G.sqrtPriceX64ToPrice(new m(a.currentSqrtPrice[0]),g,C):G.sqrtPriceX64ToPrice(new m(a.currentSqrtPrice[0]),C,g),O={direction:l.a2b[0],label:"Cetus",poolAddress:l.poolAddress[0],fromCoin:l.coinType[0],toCoin:l.coinType[1],feeRate:this.sdk.Router.getFeeRate(l.coinType[0],l.coinType[1],l.poolAddress[0]),outputAmount:l.amountOut.toString(),inputAmount:l.amountIn.toString(),currentSqrtPrice:a.currentSqrtPrice[0],currentPrice:I,fromDecimal:g,toDecimal:C};h.push(O)}const _={percent:Number(l.amountIn)/Number(a.amountIn)*100,inputAmount:Number(l.amountIn.toString()),outputAmount:Number(l.amountOut.toString()),pathIndex:0,lastQuoteOutput:0,basePaths:h};c.push(_)}return{isExceed:a.isExceed,isTimeout:!0,inputAmount:Number(a.amountIn.toString()),outputAmount:Number(a.amountOut.toString()),fromCoin:a.coinTypeA,toCoin:a.coinTypeC!=null?a.coinTypeC:a.coinTypeB,byAmountIn:a.byAmountIn,splitPaths:c}}},O_=class{constructor(e){U(this,"_sdk");U(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}setTokenListCache(e){const{coin_list_handle:t}=x(this.sdk.sdkOptions.cetus_config),n=`${t}_getCoinConfigs`,i=this.getCache(n),o=i?[...i,...e]:e;this.updateCache(n,o,z)}async getTokenListByCoinTypes(e){const t={},{coin_list_handle:n}=x(this.sdk.sdkOptions.cetus_config),i=`${n}_getCoinConfigs`,o=this.getCache(i);if(o!==void 0){const r=o;for(const a of e)for(const c of r)if(Se(a)===Se(c.address)){t[a]=c;continue}}const s=e.filter(r=>t[r]===void 0);for(const r of s){const a=`${r}_metadata`,c=this.getCache(a);if(c!==void 0)t[r]=c;else{const d=await this._sdk.fullClient.getCoinMetadata({coinType:r});if(d){const l={id:d.id,pyth_id:"",name:d.name,symbol:d.symbol,official_symbol:d.symbol,coingecko_id:"",decimals:d.decimals,project_url:"",logo_url:d.iconUrl,address:r};t[r]=l,this.updateCache(a,l,z)}else console.log(`not found ${r}`)}}return t}async getCoinConfigs(e=!1,t=!0){const{coin_list_handle:n}=x(this.sdk.sdkOptions.cetus_config),i=`${n}_getCoinConfigs`,o=this.getCache(i,e);if(o)return o;const r=(await this._sdk.fullClient.getDynamicFieldsByPage(n)).data.map(d=>d.objectId),a=await this._sdk.fullClient.batchGetObjects(r,{showContent:!0}),c=[];return a.forEach(d=>{var h,_;if(d.error!=null||((_=(h=d.data)==null?void 0:h.content)==null?void 0:_.dataType)!=="moveObject")throw new F(`when getCoinConfigs get objects error: ${d.error}, please check the rpc and contracts address config.`,"InvalidConfig");const l=this.buildCoinConfig(d,t);this.updateCache(`${n}_${l.address}_getCoinConfig`,l,z),c.push({...l})}),this.updateCache(i,c,z),c}async getCoinConfig(e,t=!1,n=!0){var c,d;const{coin_list_handle:i}=x(this.sdk.sdkOptions.cetus_config),o=`${i}_${e}_getCoinConfig`,s=this.getCache(o,t);if(s)return s;const r=await this._sdk.fullClient.getDynamicFieldObject({parentId:i,name:{type:"0x1::type_name::TypeName",value:{name:r_(e)}}});if(r.error!=null||((d=(c=r.data)==null?void 0:c.content)==null?void 0:d.dataType)!=="moveObject")throw new F(`when getCoinConfig get object error: ${r.error}, please check the rpc and contracts address config.`,"InvalidConfig");const a=this.buildCoinConfig(r,n);return this.updateCache(o,a,z),a}buildCoinConfig(e,t=!0){let n=ee(e);n=n.value.fields;const i={...n};return i.id=Zt(e),i.address=D(n.coin_type.fields.name).full_address,n.pyth_id&&(i.pyth_id=me(n.pyth_id)),this.transformExtensions(i,n.extension_fields.fields.contents,t),delete i.coin_type,i}async getClmmPoolConfigs(e=!1,t=!0){const{clmm_pools_handle:n}=x(this.sdk.sdkOptions.cetus_config),i=`${n}_getClmmPoolConfigs`,o=this.getCache(i,e);if(o)return o;const r=(await this._sdk.fullClient.getDynamicFieldsByPage(n)).data.map(d=>d.objectId),a=await this._sdk.fullClient.batchGetObjects(r,{showContent:!0}),c=[];return a.forEach(d=>{var h,_;if(d.error!=null||((_=(h=d.data)==null?void 0:h.content)==null?void 0:_.dataType)!=="moveObject")throw new F(`when getClmmPoolsConfigs get objects error: ${d.error}, please check the rpc and contracts address config.`,"InvalidConfig");const l=this.buildClmmPoolConfig(d,t);this.updateCache(`${l.pool_address}_getClmmPoolConfig`,l,z),c.push({...l})}),this.updateCache(i,c,z),c}async getClmmPoolConfig(e,t=!1,n=!0){const{clmm_pools_handle:i}=x(this.sdk.sdkOptions.cetus_config),o=`${e}_getClmmPoolConfig`,s=this.getCache(o,t);if(s)return s;const r=await this._sdk.fullClient.getDynamicFieldObject({parentId:i,name:{type:"address",value:e}}),a=this.buildClmmPoolConfig(r,n);return this.updateCache(o,a,z),a}buildClmmPoolConfig(e,t=!0){let n=ee(e);n=n.value.fields;const i={...n};return i.id=Zt(e),i.pool_address=me(n.pool_address),this.transformExtensions(i,n.extension_fields.fields.contents,t),i}async getLaunchpadPoolConfigs(e=!1,t=!0){const{launchpad_pools_handle:n}=x(this.sdk.sdkOptions.cetus_config),i=`${n}_getLaunchpadPoolConfigs`,o=this.getCache(i,e);if(o)return o;const r=(await this._sdk.fullClient.getDynamicFieldsByPage(n)).data.map(d=>d.objectId),a=await this._sdk.fullClient.batchGetObjects(r,{showContent:!0}),c=[];return a.forEach(d=>{var h,_;if(d.error!=null||((_=(h=d.data)==null?void 0:h.content)==null?void 0:_.dataType)!=="moveObject")throw new F(`when getCoinConfigs get objects error: ${d.error}, please check the rpc and contracts address config.`,"InvalidConfig");const l=this.buildLaunchpadPoolConfig(d,t);this.updateCache(`${l.pool_address}_getLaunchpadPoolConfig`,l,z),c.push({...l})}),this.updateCache(i,c,z),c}async getLaunchpadPoolConfig(e,t=!1,n=!0){const{launchpad_pools_handle:i}=x(this.sdk.sdkOptions.cetus_config),o=`${e}_getLaunchpadPoolConfig`,s=this.getCache(o,t);if(s)return s;const r=await this._sdk.fullClient.getDynamicFieldObject({parentId:i,name:{type:"address",value:e}}),a=this.buildLaunchpadPoolConfig(r,n);return this.updateCache(o,a,z),a}buildLaunchpadPoolConfig(e,t=!0){let n=ee(e);n=n.value.fields;const i={...n};i.id=Zt(e),i.pool_address=me(n.pool_address),this.transformExtensions(i,n.extension_fields.fields.contents,t);const o=[];n.social_media.fields.contents.forEach(s=>{o.push({name:s.fields.value.fields.name,link:s.fields.value.fields.link})}),i.social_media=o;try{i.regulation=decodeURIComponent(Qi.decode(i.regulation).replace(/%/g,"%25"))}catch{i.regulation=Qi.decode(i.regulation)}return i}transformExtensions(e,t,n=!0){const i=[];for(const o of t){const{key:s}=o.fields;let{value:r}=o.fields;if(s==="labels")try{const a=decodeURIComponent(Qi.decode(r));try{r=JSON.parse(a)}catch{r=a}}catch{}n&&(e[s]=r),i.push({key:s,value:r})}delete e.extension_fields,n||(e.extensions=i)}async getCetusConfig(e=!1){const t=this._sdk.sdkOptions.cetus_config.package_id,n=`${t}_getCetusConfig`,i=this.getCache(n,e);if(i!==void 0)return i;const o=await this._sdk.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),s=$i(o),r=await this._sdk.fullClient.queryEventsByPage({Transaction:s});let a={coin_list_id:"",launchpad_pools_id:"",clmm_pools_id:"",admin_cap_id:"",global_config_id:"",coin_list_handle:"",launchpad_pools_handle:"",clmm_pools_handle:""};if(r.data.length>0)for(const c of r.data)switch(D(c.type).name){case"InitCoinListEvent":a.coin_list_id=c.parsedJson.coin_list_id;break;case"InitLaunchpadPoolsEvent":a.launchpad_pools_id=c.parsedJson.launchpad_pools_id;break;case"InitClmmPoolsEvent":a.clmm_pools_id=c.parsedJson.pools_id;break;case"InitConfigEvent":a.global_config_id=c.parsedJson.global_config_id,a.admin_cap_id=c.parsedJson.admin_cap_id;break}return a=await this.getCetusConfigHandle(a),a.clmm_pools_id.length>0&&this.updateCache(n,a,z),a}async getCetusConfigHandle(e){const t=[e.clmm_pools_id,e.coin_list_id,e.launchpad_pools_id];return(await this._sdk.fullClient.multiGetObjects({ids:t,options:{showContent:!0}})).forEach(i=>{var r,a;if(i.error!=null||((a=(r=i.data)==null?void 0:r.content)==null?void 0:a.dataType)!=="moveObject")throw new F(`when getCetusConfigHandle get objects error: ${i.error}, please check the rpc and contracts address config.`,"InvalidConfigHandle");const o=ee(i),s=Ln(i);switch(D(s).name){case"ClmmPools":e.clmm_pools_handle=o.pools.fields.id.id;break;case"CoinList":e.coin_list_handle=o.coins.fields.id.id;break;case"LaunchpadPools":e.launchpad_pools_handle=o.pools.fields.id.id;break}}),e}updateCache(e,t,n=qt){let i=this._cache[e];i?(i.overdueTime=ge(n),i.value=t):i=new Ot(t,ge(n)),this._cache[e]=i}getCache(e,t=!1){try{const n=this._cache[e];if(!n)return;if(t||!n.isValid()){delete this._cache[e];return}return n.value}catch(n){console.error(`Error accessing cache for key ${e}:`,n);return}}},P_=class extends Ep{async queryEventsByPage(e,t="all"){let n=[],i=!0;const o=t==="all";let s=o?null:t.cursor;do{const r=await this.queryEvents({query:e,cursor:s,limit:o?null:t.limit});r.data?(n=[...n,...r.data],i=r.hasNextPage,s=r.nextCursor):i=!1}while(o&&i);return{data:n,nextCursor:s,hasNextPage:i}}async getOwnedObjectsByPage(e,t,n="all"){let i=[],o=!0;const s=n==="all";let r=s?null:n.cursor;do{const a=await this.getOwnedObjects({owner:e,...t,cursor:r,limit:s?null:n.limit});a.data?(i=[...i,...a.data],o=a.hasNextPage,r=a.nextCursor):o=!1}while(s&&o);return{data:i,nextCursor:r,hasNextPage:o}}async getDynamicFieldsByPage(e,t="all"){let n=[],i=!0;const o=t==="all";let s=o?null:t.cursor;do{const r=await this.getDynamicFields({parentId:e,cursor:s,limit:o?null:t.limit});r.data?(n=[...n,...r.data],i=r.hasNextPage,s=r.nextCursor):i=!1}while(o&&i);return{data:n,nextCursor:s,hasNextPage:i}}async batchGetObjects(e,t,n=50){let i=[];try{for(let o=0;o<Math.ceil(e.length/n);o++){const s=await this.multiGetObjects({ids:e.slice(o*n,n*(o+1)),options:t});i=[...i,...s]}}catch(o){console.log(o)}return i}async calculationTxGas(e){const{sender:t}=e.blockData;if(t===void 0)throw Error("sdk sender is empty");const n=await this.devInspectTransactionBlock({transactionBlock:e,sender:t}),{gasUsed:i}=n.effects;return Number(i.computationCost)+Number(i.storageCost)-Number(i.storageRebate)}async sendTransaction(e,t){try{return await this.signAndExecuteTransaction({transaction:t,signer:e,options:{showEffects:!0,showEvents:!0}})}catch(n){console.log("error: ",n)}}async sendSimulationTransaction(e,t,n=!0){try{if(n)return await this.devInspectTransactionBlock({transactionBlock:e,sender:t})}catch(i){console.log("devInspectTransactionBlock error",i)}}},j_=class{constructor(e){U(this,"_cache",{});U(this,"_rpcModule");U(this,"_pool");U(this,"_position");U(this,"_swap");U(this,"_rewarder");U(this,"_router");U(this,"_router_v2");U(this,"_token");U(this,"_config");U(this,"_sdkOptions");U(this,"_senderAddress","");this._sdkOptions=e,this._rpcModule=new P_({url:e.fullRpcUrl}),this._swap=new T_(this),this._pool=new k_(this),this._position=new C_(this),this._rewarder=new A_(this),this._router=new S_(this),this._router_v2=new I_(this),this._token=new x_(this),this._config=new O_(this),wr(this._sdkOptions)}get senderAddress(){return this._senderAddress}set senderAddress(e){this._senderAddress=e}get Swap(){return this._swap}get fullClient(){return this._rpcModule}get sdkOptions(){return this._sdkOptions}get Pool(){return this._pool}get Position(){return this._position}get Rewarder(){return this._rewarder}get Router(){return this._router}get RouterV2(){return this._router_v2}get CetusConfig(){return this._config}get Token(){return this._token}async getOwnerCoinAssets(e,t,n=!0){const i=[];let o=null;const s=`${this.sdkOptions.fullRpcUrl}_${e}_${t}_getOwnerCoinAssets`,r=this.getCache(s,n);if(r)return r;for(;;){const a=await(t?this.fullClient.getCoins({owner:e,coinType:t,cursor:o}):this.fullClient.getAllCoins({owner:e,cursor:o}));if(a.data.forEach(c=>{BigInt(c.balance)>0&&i.push({coinAddress:D(c.coinType).source_address,coinObjectId:c.coinObjectId,balance:BigInt(c.balance)})}),o=a.nextCursor,!a.hasNextPage)break}return this.updateCache(s,i,30*1e3),i}async getOwnerCoinBalances(e,t){let n=[];return t?n=[await this.fullClient.getBalance({owner:e,coinType:t})]:n=[...await this.fullClient.getAllBalances({owner:e})],n}updateCache(e,t,n=z){let i=this._cache[e];i?(i.overdueTime=ge(n),i.value=t):i=new Ot(t,ge(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e],i=n==null?void 0:n.isValid();if(!t&&i)return n.value;i||delete this._cache[e]}},w0=j_,ws="router",Zn=1e4,kn=class{static buildPoolImmutables(e){const{fields:t}=e.value.fields.value;return{clmm_pool_id:D(t.clmm_pool_id).address,booster_type:D(t.booster_type.fields.name).source_address,pool_id:D(t.pool_id).address,coinTypeA:D(t.coin_type_a.fields.name).source_address,coinTypeB:D(t.coin_type_b.fields.name).source_address}}static buildPoolState(e){const t=ee(e),n=[];return t.config.fields.contents.forEach(o=>{n.push({lock_day:Number(o.fields.key),multiplier:Number(y(o.fields.value).div(Zn))})}),{basic_percent:Number(y(t.basic_percent).div(Zn)),balances:{balances_handle:t.balances.fields.id.id,size:t.balances.fields.size},config:n,lock_positions:{lock_positions_handle:t.lock_positions.fields.id.id,size:t.lock_positions.fields.size},is_open:t.is_open,index:Number(t.index),pool_id:Zt(e)}}static buildLockNFT(e){const t=D(Zt(e)).address;return{lock_clmm_position:ni(e),locked_nft_id:t}}static buildLockPositionInfo(e){const t=ee(e),{value:n}=t.value.fields;return{type:n.type,position_id:n.fields.position_id,start_time:Number(n.fields.start_time),lock_period:Number(n.fields.lock_period),end_time:Number(n.fields.end_time),growth_rewarder:n.fields.growth_rewarder,rewarder_owned:n.fields.rewarder_owned,is_settled:n.fields.is_settled}}static isLocked(e){return e.end_time>Date.parse(new Date().toString())/1e3}},M_=class{constructor(e){U(this,"_sdk");U(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e=!1){var s;const{booster:t}=this._sdk.sdkOptions,n=`${t.package_id}_getPoolImmutables`,i=this.getCache(n,e),o=[];if(i!==void 0)o.push(...i);else{const r=[];(s=(await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(x(t).booster_pool_handle)).data)==null||s.forEach(d=>{r.push(d.objectId)});const c=await this._sdk.ClmmSDK.fullClient.batchGetObjects(r,{showContent:!0});for(const d of c){const l=ee(d);if(l){const h=kn.buildPoolImmutables(l);this.updateCache(`${h.pool_id}_getPoolImmutable`,h,z),o.push(h)}}}return this.updateCache(n,o,z),o}async getPoolImmutable(e){const{booster:t}=this._sdk.sdkOptions,n=`${e}_getPoolImmutable`,i=this.getCache(n);if(i!==void 0)return i;const o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:x(t).booster_pool_handle,name:{type:"0x2::object::ID",value:e}}),s=ee(o),r=kn.buildPoolImmutables(s);return this.updateCache(n,r,z),r}async getPools(){const e=[],n=(await this.getPoolImmutables()).map(o=>o.pool_id),i=await this._sdk.ClmmSDK.fullClient.batchGetObjects(n,{showType:!0,showContent:!0});for(const o of i){const s=kn.buildPoolState(o);if(s){const r={...await this.getPoolImmutable(s.pool_id),...s};e.push(r);const a=`${r.pool_id}_getPoolObject`;this.updateCache(a,r,z)}}return e}async getPool(e,t=!0){const n=`${e}_getPoolObject`,i=this.getCache(n,t),o=await this.getPoolImmutable(e);if(i!==void 0)return{...o,...i};const s=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),r=kn.buildPoolState(s),a={...o,...r};return this.updateCache(n,a,z),a}async getPoolHandleId(e){const t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),n=ee(t);return n?n.list.fields.id.id:""}async getBoosterInitConfigs(){var i;const{package_id:e}=this.sdk.sdkOptions.booster,t=(i=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitEvent`}))==null?void 0:i.data,n={booster_config_id:"",booster_pool_handle:""};return t.length>0&&t.forEach(o=>{const s=o.parsedJson;s&&(n.booster_config_id=s.config_id)}),n.booster_pool_handle=await this.getPoolHandleId(n.booster_config_id),n}async getOwnerBoosterPositions(e,t,n){const{booster:i}=this.sdk.sdkOptions,o=[],s=[],r=`${i.package_id}::lock_nft::LockNFT<${this._sdk.ClmmSDK.Position.buildPositionType()}>`,a=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showOwner:!0},filter:{StructType:r}});for(const d of a.data)if(D(Yt(d)).source_address===r&&d.data){const h=kn.buildLockNFT(d);this.updateCache(`${h.locked_nft_id}_getBoosterPositionById`,h,z),h&&(t===void 0||t===h.lock_clmm_position.pool)&&o.push(h)}const c=await this.getLockPositionInfos(n,o.map(d=>d.locked_nft_id));for(const d of o)for(const l of c)if(d.lock_clmm_position.pos_object_id===l.position_id){s.push({...d,...l});break}return s}async getBoosterPosition(e,t){const n=`${t}_getBoosterPositionById`,i=this.getCache(n);let o;if(i!==void 0)o=i;else{const r=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0,showOwner:!0}});o=kn.buildLockNFT(r),this.updateCache(n,o,z)}const s=await this.getLockPositionInfo(e,t);return{...o,...s}}async getLockPositionInfos(e,t=[]){var s;const n=await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(e),i=[],o=[];return(s=n.data)==null||s.forEach(r=>{t.length>0?t.includes(r.name.value)&&i.push(r.objectId):i.push(r.objectId)}),i.length>0&&(await this._sdk.ClmmSDK.fullClient.batchGetObjects(i,{showContent:!0})).forEach(a=>{const c=kn.buildLockPositionInfo(a);c&&o.push(c)}),o}async getLockPositionInfo(e,t){const n=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}});return kn.buildLockPositionInfo(n)}calculateXCetusRewarder(e,t,n){let i=t.basic_percent,o="0";e.forEach(a=>{a.coin_address===t.booster_type&&(console.log("find ",t.booster_type),o=a.amount_owed.toString())}),n.is_settled||t.config.forEach(a=>{a.lock_day===n.lock_period&&(i=a.multiplier)});const s=y(o).sub(n.growth_rewarder).mul(i);return y(n.rewarder_owned).add(s).toString()}lockPositionPayload(e){const{booster:t}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions,i=new N;return i.moveCall({target:`${t.published_at}::${ws}::lock_position`,typeArguments:[e.booster_type,e.coinTypeA,e.coinTypeB],arguments:[i.object(x(t).booster_config_id),i.object(x(n).global_config_id),i.object(e.booster_pool_id),i.object(e.clmm_pool_id),i.object(e.clmm_position_id),i.pure.u16(e.lock_day),i.object($)]}),i}canceLockPositionPayload(e){const{booster:t}=this.sdk.sdkOptions,n=new N;return n.moveCall({target:`${t.published_at}::${ws}::cancel_lock`,typeArguments:[e.booster_type],arguments:[n.object(x(t).booster_config_id),n.object(e.booster_pool_id),n.object(e.lock_nft_id),n.object($)]}),n}redeemPayload(e){const{booster:t,xcetus:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions,o=new N,s=x(n);return o.moveCall({target:`${t.published_at}::${ws}::redeem`,typeArguments:[e.booster_type,e.coinTypeA,e.coinTypeB],arguments:[o.object(x(t).booster_config_id),o.object(x(i).global_config_id),o.object(e.booster_pool_id),o.object(e.lock_nft_id),o.object(e.clmm_pool_id),o.object(s.lock_manager_id),o.object(s.xcetus_manager_id),o.object(e.ve_nft_id),o.object($)]}),o}updateCache(e,t,n=qt){let i=this._cache[e];i?(i.overdueTime=ge(n),i.value=t):i=new Ot(t,ge(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e];if(!t&&(n!=null&&n.isValid()))return n.value;delete this._cache[e]}},jt="router",Cd=1e9,Tt=class{static priceRealToFix(e,t,n){const i=y(t-n).toNumber();return Number(y(e).div(y(10).pow(y(i))).toString())}static priceFixToReal(e,t,n){const i=y(t-n).toNumber();return Number(y(e).mul(y(10).pow(y(i))).toString())}static raiseTotalAmount(e,t,n){const i=y(t-n).abs().toNumber();return t>n?Number(y(e.total_supply).mul(e.current_price).div(y(10).pow(y(i))).toString()):Number(y(e.total_supply).mul(e.current_price).mul(y(10).pow(y(i))).toString())}static buildLaunchPadPool(e){const t=Yt(e),n=D(t),i=ee(e),o={coin_type_sale:n.type_arguments[0],coin_type_raise:n.type_arguments[1],pool_address:me(Zt(e)),is_settle:i.is_settle,current_price:y(i.initialize_price).div(y(Cd)).toString(),price:i.initialize_price,min_price:"0",max_price:"0",sale_coin_amount:i.sale_coin,raise_coin_amount:i.raise_coin,total_purchase_amount:i.reality_raise_total,total_supply:i.sale_total,min_purchase:i.min_purchase,max_purchase:i.max_purchase,complete_raise_limit:i.least_raise_amount,softcap:i.softcap,max_raise_amount:i.hardcap,sale_decimals:0,raise_decimals:0,liquidity_injection_ratio:Number(i.liquidity_rate)/1e4,is_cancel:i.is_cancel,duration_summary:{start_time:Number(i.duration_manager.fields.start_time),end_time:0,settle_end_time:0,purchase_duration:Number(i.duration_manager.fields.activity_duration),settle_duration:Number(i.duration_manager.fields.settle_duration),lock_up_duration:Number(i.duration_manager.fields.locked_duration)},white_summary:{white_handle:i.white_list.fields.users.fields.id.id,protection_hard_cap:i.white_list.fields.hard_cap_total,protection_limit_used:i.white_list.fields.purchase_total,size:Number(i.white_list.fields.users.fields.size)},unused_sale:i.unused_sale,harvest_raise:i.harvest_raise,tick_spacing:Number(i.tick_spacing),owner:i.recipient,purchase_summary:{purchase_handle:i.purchase_list.fields.id.id,size:Number(i.purchase_list.fields.size)},pool_status:"Failed"};return Tt.updatePoolStatus(o),o}static updatePoolStatus(e){const t=Number(y(Date.now()/1e3).toFixed(0)),{duration_summary:n}=e,i=n.start_time+n.purchase_duration,o=i+n.settle_duration;if(n.end_time=i,n.settle_end_time=o,e.is_settle)e.pool_status="Ended";else if(e.is_cancel)e.pool_status="Canceled";else if(t<n.start_time)e.pool_status="Upcoming";else if(t>n.start_time&&t<i)e.pool_status="Live";else if(t>i&&t<o){const s=e.raise_coin_amount;Number(s)<Number(e.complete_raise_limit)?e.pool_status="Failed":e.pool_status="Settle"}return e}static async calculatePoolPrice(e,t){const n=await e.ClmmSDK.CetusConfig.getTokenListByCoinTypes([t.coin_type_sale,t.coin_type_raise]),i=n[t.coin_type_sale].decimals,o=n[t.coin_type_raise].decimals;t.min_price=this.priceFixToReal(Number(y(t.softcap).div(y(t.total_supply))),i,o).toString(),t.max_price=this.priceFixToReal(Number(y(t.max_raise_amount).div(y(t.total_supply))),i,o).toString(),t.current_price=this.priceFixToReal(Number(t.current_price),i,o).toString(),t.sale_decimals=i,t.raise_decimals=o}static async getWithdrawRaise(e){return e.pool_status==="Ended"?e.harvest_raise:"0"}static async getWithdrawSale(e){return e.pool_status==="Ended"?e.unused_sale:e.sale_coin_amount}static async getHistoryWithdrawRaise(e,t){if(t.pool_status==="Ended"){if(y(t.harvest_raise).equals(y(0))){const i=await e.Launchpad.getSettleEvent(t.pool_address);i&&(t.harvest_raise=i.unused_raise)}const n=m.min(new m(t.total_purchase_amount),new m(t.max_raise_amount));return y(n.toString()).mul(1-t.liquidity_injection_ratio).toString()}return"0"}static async getHistoryWithdrawSale(e,t){if(t.pool_status==="Ended"){const n=await e.Launchpad.getSettleEvent(t.pool_address);return n&&(t.unused_sale=n.unused_sale),t.unused_sale}return"0"}static async getOverrecruitReverseAmount(e,t){const n=await e.Launchpad.getPurchaseMarks(e.ClmmSDK.senderAddress,[t.pool_address],!1);if(n.length>0){const i=n[0].purchased_raise_amount,o=(await e.Launchpad.getPurchaseAmount(t.white_summary.white_handle,e.ClmmSDK.senderAddress)).safe_purchased_amount,{protection_limit_used:s}=t.white_summary;return y(i).sub(o).div(y(t.total_purchase_amount).sub(s)).mul(y(t.total_purchase_amount).sub(t.max_raise_amount)).toString()}return"0"}static async getCanPurchaseAmount(e,t){const n=await Tt.getOverrecruitReverseAmount(e,t),i=await e.Launchpad.getPurchaseMarks(e.ClmmSDK.senderAddress,[t.pool_address],!1);if(i){const o=i[0].purchased_raise_amount;y(o).sub(n).div(t.current_price)}return"0"}},E_=class{constructor(e){U(this,"_sdk");U(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e=[],t=0,n=100,i=!1){var l;const{package_id:o}=this._sdk.sdkOptions.launchpad;if(o===void 0)throw Error("sdk.sdkOptions.launchpad is undefined");const s=`${o}_getPoolImmutables`,r=this.getCache(s,i),a=[],c=[];if(r!==void 0&&a.push(...r),a.length===0)try{((l=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${o}::factory::CreatePoolEvent`}))==null?void 0:l.data).forEach(_=>{const g=_.parsedJson;g&&a.push({pool_address:g.pool_id,coin_type_sale:D(g.sale_coin.name).full_address,coin_type_raise:D(g.raise_coin.name).full_address})}),this.updateCache(s,a,z)}catch(h){console.log("getPoolImmutables",h)}const d=e.length>0;for(let h=0;h<a.length;h+=1){const _=a[h];if(!(d&&!e.includes(_.pool_address))){if(!d){const g=h;if(g<t||g>=t+n)continue}c.push(_)}}return c}async getPoolImmutablesWithPage(e="all",t=!1){const{package_id:n}=this._sdk.sdkOptions.launchpad,i=`${n}_getPoolImmutables`,o=[],s={data:[],hasNextPage:!1},r=e==="all";if(r){const a=this.getCache(i,t);a&&o.push(...a)}if(o.length===0)try{const a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${n}::factory::CreatePoolEvent`},e);s.hasNextPage=a.hasNextPage,s.nextCursor=a.nextCursor,a.data.forEach(c=>{const d=c.parsedJson;d&&o.push({pool_address:d.pool_id,coin_type_sale:D(d.sale_coin.name).full_address,coin_type_raise:D(d.raise_coin.name).full_address})})}catch(a){console.log("getPoolImmutables",a)}return s.data=o,r&&this.updateCache(i,o,z),s}async getPools(e=[],t=0,n=100){const i=[];let o=[];e.length>0?o=[...e]:(await this.getPoolImmutables([],t,n,!1)).forEach(a=>{o.push(a.pool_address)});const s=await this._sdk.ClmmSDK.fullClient.batchGetObjects(o,{showType:!0,showContent:!0});for(const r of s){const a=Tt.buildLaunchPadPool(r);await Tt.calculatePoolPrice(this._sdk,a),i.push(a);const c=`${a.pool_address}_getPoolObject`;this.updateCache(c,a,z)}return i}async getPool(e,t=!0){const n=`${e}_getPoolObject`,i=this.getCache(n,t);if(i!==void 0){const r=i;return Tt.updatePoolStatus(r),r}const o=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),s=Tt.buildLaunchPadPool(o);return await Tt.calculatePoolPrice(this._sdk,s),this.updateCache(n,s),s}async getInitConfig(e=!1){var c;const t=this._sdk.sdkOptions.launchpad.package_id,n=`${t}_getInitEvent`,i=this.getCache(n,e);if(i!==void 0)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),s=$i(o),r=(c=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({Transaction:s}))==null?void 0:c.data,a={pools_id:"",admin_cap_id:"",config_cap_id:""};return r.length>0&&(r.forEach(d=>{const l=d.parsedJson;if(l)switch(D(d.type).full_address){case`${t}::config::InitConfigEvent`:a.admin_cap_id=l.admin_cap_id,a.config_cap_id=l.config_cap_id;break;case`${t}::factory::InitFactoryEvent`:a.pools_id=l.pools_id;break}}),this.updateCache(n,a,z)),a}async getLockNFT(e,t=!1){const n=`${e}_getLockNFT`,i=this.getCache(n,t);if(i!==void 0)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}});if(!o.error)return ni(o)}async getLockNFTList(e){var o;const{package_id:t}=this._sdk.ClmmSDK.sdkOptions.clmm_pool,{sdkOptions:n}=this._sdk,i=[];try{const s=(o=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${n.launchpad.package_id}::lock::LockNFTEvent`}))==null?void 0:o.data;for(const r of s){const a=r.parsedJson;if(a){const c={locked_time:Number(a.locked_time),end_lock_time:Number(a.end_lock_time),nft_type:a.nft_type_name.name,lock_nft_id:a.lock_nft_id,recipient:a.recipient};if(e===c.recipient&&`${t}`===D(c.nft_type).address){const d=await this.getLockNFT(c.lock_nft_id);if(d){const l=D(d.coin_type_a).full_address,h=D(d.coin_type_b).full_address;i.push({...d,coin_type_a:l,coin_type_b:h,...c})}}}}return i}catch(s){return console.log("getLockNFTList:",s),[]}}async creatPoolTransactionPayload(e){const{launchpad:t}=this.sdk.sdkOptions,n=x(t);if(this.assertLuanchpadConfig(),this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const i=Tt.priceRealToFix(Number(e.initialize_price),e.sale_decimals,e.raise_decimals),o=new N,s=y(e.total_supply).add(y(e.total_supply).mul(y(e.liquidity_rate))).toNumber(),r=await X.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,o,BigInt(s),e.coin_type_sale),a=[o.object(n.admin_cap_id),o.object(n.config_cap_id),o.object(n.pools_id),o.object(ae(e.recipient)),o.pure.u128((i*Cd).toString()),r,o.pure.u64(e.total_supply.toString()),o.pure.u64(e.min_purchase.toString()),o.pure.u64(e.max_purchase.toString()),o.pure.u64(e.least_raise_amount.toString()),o.pure.u64(e.hardcap.toString()),o.pure.u64((e.liquidity_rate*1e3).toString()),o.pure.u64(e.start_time.toString()),o.pure.u64(e.activity_duration.toString()),o.pure.u64(e.settle_duration.toString()),o.pure.u64(e.locked_duration.toString()),o.pure.u32(e.tick_spacing),o.object($)],c=[e.coin_type_sale,e.coin_type_raise];return o.moveCall({target:`${t.published_at}::${jt}::create_launch_pool`,typeArguments:c,arguments:a}),o}async creatPurchasePayload(e){const{launchpad:t}=this.sdk.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const n=new N,i=await X.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,n,BigInt(e.purchase_amount),e.coin_type_raise),o=(await this.getPurchaseMarks(this._sdk.ClmmSDK.senderAddress,[e.pool_address],!1))[0],s=[e.coin_type_sale,e.coin_type_raise];let r;return o?r=[n.object(e.pool_address),n.object(x(t).config_cap_id),n.object(o.id),i,n.pure.u64(e.purchase_amount.toString()),n.object($)]:r=[n.object(e.pool_address),n.object(x(t).config_cap_id),i,n.pure.u64(e.purchase_amount.toString()),n.object($)],n.moveCall({target:`${t.published_at}::${jt}::${o===void 0?"create_and_purchase":"purchase"}`,typeArguments:s,arguments:r}),n}async creatClaimPayload(e){const{launchpad:t}=this.sdk.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const n=(await this.getPurchaseMarks(this._sdk.ClmmSDK.senderAddress,[e.pool_address],!1))[0],i=new N,o=[e.coin_type_sale,e.coin_type_raise],s=[i.object(e.pool_address),i.object(x(t).config_cap_id),i.object(n==null?void 0:n.id),i.object($)];return i.moveCall({target:`${t.published_at}::${jt}::claim`,typeArguments:o,arguments:s}),i}async creatSettlePayload(e){const{launchpad:t}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");this.assertLuanchpadConfig();const i=x(n),{clmm_args:o}=e,s=new N;s.setSender(this.sdk.ClmmSDK.senderAddress);const r=[e.coin_type_sale,e.coin_type_raise];if(o){const a=o.opposite?G.priceToSqrtPriceX64(y(1).div(o.current_price),o.raise_decimals,o.sale_decimals).toString():G.priceToSqrtPriceX64(y(o.current_price),o.sale_decimals,o.raise_decimals).toString(),c=BigInt(a)<BigInt(o.clmm_sqrt_price),d=o.opposite?c?e.coin_type_raise:e.coin_type_sale:c?e.coin_type_sale:e.coin_type_raise,l=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,d);let h=he.calculateTotalBalance(l);he.isSuiCoin(d)&&(h-=BigInt(2e8));const g=X.buildCoinForAmount(s,l,h,d).targetCoin,C=o.opposite?c?"settle_with_reverse_clmm_only_with_a":"settle_with_reverse_clmm_only_with_b":c?"settle_only_with_a":"settle_only_with_b",I=[s.object(e.pool_address),s.object(x(t).config_cap_id),s.object(o.clmm_pool_address),s.object(i.global_config_id),s.pure.u128(a),g,s.object($)];s.moveCall({target:`${t.published_at}::${jt}::${C}`,typeArguments:r,arguments:I})}else s.moveCall({target:`${t.published_at}::${jt}::settle`,typeArguments:r,arguments:[s.object(e.pool_address),s.object(x(t).config_cap_id),s.object($)]});return s}creatWithdrawPayload(e){const{launchpad:t}=this.sdk.sdkOptions,n=new N,i=[e.coin_type_sale,e.coin_type_raise],o=[n.object(e.pool_address),n.object(x(t).config_cap_id),n.object($)];return e.sale_amount>BigInt(0)&&n.moveCall({target:`${t.published_at}::${jt}::withdraw_sale`,typeArguments:i,arguments:o}),e.raise_amount>BigInt(0)&&n.moveCall({target:`${t.published_at}::${jt}::withdraw_raise`,typeArguments:i,arguments:o}),n}addUserToWhitelisPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new N,i=[e.coin_type_sale,e.coin_type_raise];return e.user_addrs.forEach(o=>{const s=[n.object(x(t).admin_cap_id),n.object(x(t).config_cap_id),n.object(e.pool_address),n.object(o),n.pure.u64(e.safe_limit_amount),n.object($)];n.moveCall({target:`${t.published_at}::${jt}::add_user_to_whitelist`,typeArguments:i,arguments:s})}),n}updateWhitelistCapPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new N,i=[e.coin_type_sale,e.coin_type_raise];return e.safe_limit_amount>0&&n.moveCall({target:`${t.published_at}::${jt}::update_whitelist_member_safe_limit_amount`,typeArguments:i,arguments:[n.object(x(t).admin_cap_id),n.object(x(t).config_cap_id),n.object(e.pool_address),n.pure.address(e.white_list_member),n.pure.u64(e.safe_limit_amount),n.object($)]}),e.hard_cap_total>0&&n.moveCall({target:`${t.published_at}::${jt}::update_whitelist_hard_cap_total`,typeArguments:i,arguments:[n.object(x(t).admin_cap_id),n.object(x(t).config_cap_id),n.object(e.pool_address),n.pure.u64(e.hard_cap_total),n.object($)]}),n}creatRemoveWhitelistPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new N,i=[e.coin_type_sale,e.coin_type_raise];return e.user_addrs.forEach(o=>{const s=[n.object(x(t).admin_cap_id),n.object(x(t).config_cap_id),n.object(e.pool_address),n.object(o),n.object($)];n.moveCall({target:`${t.published_at}::${jt}::remove_user_from_whitelist`,typeArguments:i,arguments:s})}),n}creatCancelPoolPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new N,i=[e.coin_type_sale,e.coin_type_raise],o=[n.object(x(t).admin_cap_id),n.object(x(t).config_cap_id),n.object(e.pool_address),n.object($)];return n.moveCall({target:`${t.published_at}::${jt}::cancel`,typeArguments:i,arguments:o}),n}updateRecipientPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new N,i=[e.coin_type_sale,e.coin_type_raise],o=[n.object(x(t).admin_cap_id),n.object(x(t).config_cap_id),n.object(e.pool_address),n.object(e.new_recipient),n.object($)];return n.moveCall({target:`${t.published_at}::${jt}::update_recipient_address`,typeArguments:i,arguments:o}),n}updatePoolDuractionPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new N,i=[e.coin_type_sale,e.coin_type_raise],o=[n.object(x(t).admin_cap_id),n.object(x(t).config_cap_id),n.object(e.pool_address),n.pure.u64(e.activity_duration),n.pure.u64(e.settle_duration),n.pure.u64(e.lock_duration),n.object($)];return n.moveCall({target:`${t.published_at}::${jt}::update_pool_duration`,typeArguments:i,arguments:o}),n}creatUnlockNftPayload(e){const{launchpad:t}=this.sdk.sdkOptions;if(x(t)===void 0)throw Error("getPackagerConfigs(launchpad)  is null");const n=new N,i=[e.nft_type],o=[n.object(e.lock_nft),n.object($)];return n.moveCall({target:`${t.published_at}::lock::unlock_nft`,typeArguments:i,arguments:o}),n}async isAdminCap(e){const{launchpad:t}=this._sdk.sdkOptions;if(x(t)===void 0)throw Error("launchpad config is empty");const n=`${e}_isAdminCap`,i=this.getCache(n);if(i)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:x(t).admin_cap_id,options:{showType:!0,showOwner:!0}});console.log(o);const s=Ln(o),r=yo(o);let a=!1;return r&&s&&D(s).source_address===`${t.package_id}::config::AdminCap`&&(a=ae(r.AddressOwner)===ae(e)),this.updateCache(n,a,z),a}async isWhiteListUser(e,t){const n={type:"address",value:t};try{const i=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:n});return!!(i&&i.data)}catch{return!1}}async getPurchaseAmount(e,t){var i;const n={type:"address",value:t};try{const o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:n}),s=ee(o);if(console.log(s),s)return(i=s==null?void 0:s.value)==null?void 0:i.fields}catch{}return{safe_limit_amount:"0",safe_purchased_amount:"0"}}async getPurchaseMarks(e,t=[],n=!0){const{launchpad:i}=this._sdk.sdkOptions,o=`${t}_getPurchaseMark`,s=this.getCache(o,n);if(!n&&s!==void 0)return s;let r=null;const a=[];for(;;){const c=await this._sdk.ClmmSDK.fullClient.getOwnedObjects({owner:e,options:{showType:!0,showContent:!0,showDisplay:!0},cursor:r});for(const d of c.data){const{fields:l}=d.data.content;if(D(Yt(d)).source_address===`${i.package_id}::pool::PurchaseMark`){console.log("fields: ",l);const _={id:l.id.id,pool_id:D(l.pool_id).address,purchased_raise_amount:l.purchase_total,obtain_sale_amount:l.obtain_sale_amount,used_raise_amount:l.used_raise_amount};t.length>0?t.includes(_.pool_id)&&a.push(_):a.push(_)}}if(c.hasNextPage)r=c.nextCursor;else break}return this.updateCache(o,a,z),a}async getSettleEvent(e){const{launchpad:t}=this._sdk.sdkOptions,n=`${e}_getPurchaseMark`,i=this.getCache(n);if(i!==void 0)return i;const o=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t.package_id}::pool::SettleEvent`});for(const s of o.data){const r=s.parsedJson;if(e===me(r.pool_id)){const a={pool_id:r.pool_id,settle_price:r.settle_price,unused_sale:r.unused_sale,unused_raise:r.unused_raise,white_purchase_total:r.white_purchase_total};return this.updateCache(n,a,z),a}}}buildLaunchpadCoinType(e,t){return mo(this._sdk.sdkOptions.launchpad.package_id,"pool","PoolLiquidityCoin",[e,t])}assertLuanchpadConfig(){const{launchpad:e}=this.sdk.sdkOptions;if(x(e)===void 0)throw Error("sdk getPackagerConfigs(launchpad) is null")}updateCache(e,t,n=qt){let i=this._cache[e];i?(i.overdueTime=ge(n),i.value=t):i=new Ot(t,ge(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e];if(!t&&(n!=null&&n.isValid()))return n.value;delete this._cache[e]}},Cn=class{static buildPoolImmutables(e){const{fields:t}=e.value.fields.value;return{clmm_pool_id:D(t.clmm_pool_id).address,bonus_type:D(t.bonus_type.fields.name).source_address,pool_id:D(t.pool_id).address,coinTypeA:D(t.coin_type_a.fields.name).source_address,coinTypeB:D(t.coin_type_b.fields.name).source_address}}static buildPoolState(e){const t=ee(e),n=[];return t.config.fields.contents.forEach(o=>{n.push({rate:Number(y(o.fields.key).div(Zn)),multiplier:Number(y(o.fields.value).div(Zn))})}),{balance:t.balance,config:n,is_open:t.is_open,index:Number(t.index),start_time:Number(t.start_time),interval_day:Number(t.interval_day),minimum_percent_to_reward:Number(y(t.minimum_percent_to_reward).div(Zn)),rewarders:{rewarder_handle:t.rewarders.fields.id.id,size:Number(t.rewarders.fields.size)},whale_nfts:{whale_nfts_handle:t.whale_nfts.fields.id.id,size:Number(t.whale_nfts.fields.size)},points:{point_handle:t.points.fields.id.id,size:Number(t.points.fields.size)}}}static buildMarkerPositions(e){const{contents:t}=e.value.fields.value.fields,n=[],i=e.id.id;return t.forEach(o=>{const{key:s,value:r}=o.fields,a={id:s,period_id:i,bonus_num:r.fields.bonus_num,point:r.fields.point,is_burn:r.fields.is_burn,point_after_multiplier:r.fields.point_after_multiplier,percent:Number(y(r.fields.percent).div(Zn)),fee_share_rate:0,is_redeemed:r.fields.is_redeemed};n.push(a)}),n}static buildPoolBonusInfo(e){const{fields:t,type:n}=e.value.fields.value;return{type:n,time:Number(t.time),settle_time:Number(t.settle_time),settled_num:t.settled_num,is_settled:t.is_settled,basis_bonus:t.basis_bonus,total_bonus:t.total_bonus,is_vacant:t.is_vacant,redeemed_num:t.redeemed_num}}static getBonusPercent(e,t){let n=0;for(const i of e)t>=i.rate&&i.rate>n&&(n=i.multiplier);return n}},Ia="router",B_=class{constructor(e){U(this,"_sdk");U(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e=!1){var s;const{maker_bonus:t}=this._sdk.sdkOptions,n=`${t.package_id}_getPoolImmutables`,i=this.getCache(n,e),o=[];if(i!==void 0)o.push(...i);else{const r=[];(s=(await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(x(t).maker_pool_handle)).data)==null||s.forEach(d=>{r.push(d.objectId)});const c=await this._sdk.ClmmSDK.fullClient.batchGetObjects(r,{showContent:!0});for(const d of c){const l=ee(d);l&&o.push(Cn.buildPoolImmutables(l))}}return o}async getPoolImmutable(e){const{maker_bonus:t}=this._sdk.sdkOptions,n=`${t.package_id}_getPoolImmutables`,i=this.getCache(n);if(i!==void 0){const r=i.filter(a=>e===a.pool_id);if(r.length>0)return r[0]}const o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:x(t).maker_pool_handle,name:{type:"0x2::object::ID",value:e}}),s=ee(o);return Cn.buildPoolImmutables(s)}async getPools(){const e=[],t=await this.getPoolImmutables(),n=t.map(s=>s.pool_id),i=await this._sdk.ClmmSDK.fullClient.batchGetObjects(n,{showType:!0,showContent:!0});let o=0;for(const s of i){const r=Cn.buildPoolState(s);if(r){const a={...t[o],...r};e.push(a);const c=`${a.pool_id}_getPoolObject`;this.updateCache(c,a,z)}o+=1}return e}async getPool(e,t=!0){const n=`${e}_getPoolObject`,i=this.getCache(n,t),o=await this.getPoolImmutable(e);if(i!==void 0)return i;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),r=Cn.buildPoolState(s),a={...o,...r};return this.updateCache(n,a,z),a}async getPoolHandleId(e){const t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),n=ee(t);return n?n.list.fields.id.id:""}async getMakerPoolPeriods(e,t=!1){const n=[],i=`${e.pool_id}_getMakerPoolPeriods`,o=this.getCache(i,t);return o!==void 0?o:((await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(e.whale_nfts.whale_nfts_handle)).data.forEach(r=>{const a={id:r.objectId,start_time:0,end_time:0,period:Number(r.name.value)};a.start_time=Number(y(e.start_time).add(y(e.interval_day).mul(24*3600).mul(a.period)).toFixed(0,V.ROUND_DOWN)),a.end_time=Number(y(a.start_time).add(y(e.interval_day).mul(24*3600)).toFixed(0,V.ROUND_DOWN)),n.push(a)}),this.updateCache(i,n,z),n)}async getMakerBonusInitConfigs(){var i;const{package_id:e}=this.sdk.sdkOptions.maker_bonus,t=(i=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitEvent`}))==null?void 0:i.data,n={maker_config_id:"",maker_pool_handle:""};return t.length>0&&t.forEach(o=>{const s=o.parsedJson;s&&(n.maker_config_id=s.config_id)}),n.maker_pool_handle=await this.getPoolHandleId(n.maker_config_id),n}async getPoolMarkerPositionList(e,t,n=!1){const i={},o=[];n||t.forEach(s=>{const r=`${e}_${s.period}_getPoolMarkerPositionList`,a=this.getCache(r);a!==void 0?i[s.period]=a:(i[s.period]=[],o.push(s))});try{o.length>0&&(await this._sdk.ClmmSDK.fullClient.batchGetObjects(o.map(a=>a.id),{showContent:!0})).forEach(a=>{const c=ee(a),d=Cn.buildMarkerPositions(c);if(d.length>0){const{period_id:l}=d[0],h=t.filter(_=>_.id===l)[0];i[h.period]=d}});const s=[];for(const r in i)i[r].forEach(c=>{s.push(c)});if(s.length>0){const r=await this._sdk.ClmmSDK.Position.getSipmlePositionList(s.map(a=>a.id));for(const a of s)for(const c of r)if(a.id===c.pos_object_id){a.clmm_position=c;break}}}catch(s){console.log(s)}for(const s in i){const r=`${e}_${s}_getPoolMarkerPositionList`;this.updateCache(r,i[s],z)}return i}async updateXCetusRewarderAndFee(e,t,n){const i=await this.calculateTotalPointsAfterMultiper(e,n);for(const o of t)await this.calculateXCetusRewarder(e,o,n.period,i);return t}async calculateXCetusRewarder(e,t,n,i){const o=await this.getPoolBonusInfo(e.rewarders.rewarder_handle,n),{fee_share_rate:s}=this.calculateFeeShareRate(e,t,i),r=y(s).mul(o.total_bonus);return t.is_redeemed?t.bonus_num="0":t.bonus_num=r.toString(),t.bonus_num}calculateFeeShareRate(e,t,n){const i=Cn.getBonusPercent(e.config,t.percent),o=y(t.point).mul(i),s=y(o).div(n);return t.point_after_multiplier=o.toString(),t.fee_share_rate=Number(s),{fee_share_rate:Number(s),points_after_multiper:o.toString()}}async calculateTotalPointsAfterMultiper(e,t){const n=await this.getPoolMarkerPositionList(e.whale_nfts.whale_nfts_handle,[t]);let i=y(0);const o=n[t.period];for(const s of o){const r=Cn.getBonusPercent(e.config,s.percent),a=y(s.point).mul(r);i=i.add(a)}return i.toString()}async calculateAllXCetusRewarder(e){const t=this._sdk.ClmmSDK.senderAddress;let n=y(0);const i=[];for(const o of e){const s=await this._sdk.MakerModule.getMakerPoolPeriods(o),r=await this._sdk.MakerModule.getPoolMarkerPositionList(o.whale_nfts.whale_nfts_handle,s),a=[];for(const c of s){const d=r[c.period].filter(l=>{var h;return t.length===0?!1:((h=l.clmm_position)==null?void 0:h.owner)===t});d.length>0&&(await this._sdk.MakerModule.updateXCetusRewarderAndFee(o,d,c),d.forEach(l=>{var h;((h=l.clmm_position)==null?void 0:h.position_status)===pd.Exists&&y(l.bonus_num).greaterThan(0)&&(n=n.add(l.bonus_num),a.includes(l.clmm_position.pos_object_id)||a.push(l.clmm_position.pos_object_id))}))}i.push({bonus_type:o.bonus_type,pool_id:o.pool_id,nft_ids:a})}return{claimtotal:n,claimRecord:i}}async getPoolBonusInfo(e,t,n=!1){const i=`${e}_${t}_getPoolBonusInfo`,o=this.getCache(i,n);if(o!==void 0)return o;const s=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"u64",value:t.toString()}}),r=ee(s),a=Cn.buildPoolBonusInfo(r);return this.updateCache(i,a,qt),a}claimPayload(e){const{maker_bonus:t,xcetus:n}=this.sdk.sdkOptions,i=new N;return i.moveCall({target:`${t.published_at}::${Ia}::claim`,typeArguments:[e.bonus_type],arguments:[i.object(x(t).maker_config_id),i.object(e.market_pool_id),i.object(e.position_nft_id),i.pure.u8(e.phase),i.object(x(n).lock_manager_id),i.object(x(n).xcetus_manager_id),i.object(e.ve_nft_id)]}),i}claimAllPayload(e){const{maker_bonus:t,xcetus:n}=this.sdk.sdkOptions,i=new N;return e.whale_nfts.forEach(o=>{o.nft_ids.forEach(s=>{i.moveCall({target:`${t.published_at}::${Ia}::claim_all`,typeArguments:[o.bonus_type],arguments:[i.object(x(t).maker_config_id),i.object(o.pool_id),i.object(s),i.object(x(n).lock_manager_id),i.object(x(n).xcetus_manager_id),i.object(e.ve_nft_id)]})})}),i}updateCache(e,t,n=qt){let i=this._cache[e];i?(i.overdueTime=ge(n),i.value=t):i=new Ot(t,ge(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e];if(!t&&(n!=null&&n.isValid()))return n.value;delete this._cache[e]}},zn="router",Xi="router",Si=24*3600,vo=1e3,Ut=1e11,En=class{static buildVeNFTDividendInfo(e){const t={id:e.id.id,ve_nft_id:e.name,rewards:[]};return e.value.fields.value.fields.dividends.fields.contents.forEach(n=>{const i=[];n.fields.value.fields.contents.forEach(o=>{i.push({coin_type:D(o.fields.key.fields.name).source_address,amount:o.fields.value})}),t.rewards.push({period:Number(n.fields.key),rewards:i,vesrion:"v1"})}),t}static buildDividendManager(e){const t={id:e.id.id,dividends:{id:e.dividends.fields.id.id,size:e.dividends.fields.size},venft_dividends:{id:e.venft_dividends.fields.id.id,size:e.venft_dividends.fields.size},bonus_types:[],start_time:Number(e.start_time),interval_day:Number(e.interval_day),balances:{id:e.balances.fields.id.id,size:e.balances.fields.size},is_open:e.is_open};return e.bonus_types.forEach(n=>{t.bonus_types.push(D(n.fields.name).source_address)}),t}static buildLockUpManager(e){return{id:e.id.id,balance:e.balance,treasury_manager:e.treasury_manager,extra_treasury:e.extra_treasury,lock_infos:{lock_handle_id:e.lock_infos.fields.id.id,size:Number(e.lock_infos.fields.size)},type_name:Se(e.type_name.fields.name),min_lock_day:Number(e.min_lock_day),max_lock_day:Number(e.max_lock_day),package_version:Number(e.package_version),max_percent_numerator:Number(e.max_percent_numerator),min_percent_numerator:Number(e.min_percent_numerator)}}static buildLockCetus(e){const t=e.fields,n={id:t.id.id,type:D(e.type).source_address,locked_start_time:Number(t.locked_start_time),locked_until_time:Number(t.locked_until_time),cetus_amount:t.balance,xcetus_amount:"0",lock_day:0};return n.lock_day=(n.locked_until_time-n.locked_start_time)/Si,n}static getAvailableXCetus(e,t){let n=y(0);return t.forEach(i=>{n=n.add(i.xcetus_amount)}),y(e.xcetus_balance).sub(n).toString()}static getWaitUnLockCetuss(e){return e.filter(t=>!En.isLocked(t))}static getLockingCetuss(e){return e.filter(t=>En.isLocked(t))}static isLocked(e){return e.locked_until_time>Date.parse(new Date().toString())/1e3}static buildDividendRewardTypeList(e,t){const n=new Set;return e==null||e.forEach(i=>{i.rewards.forEach(o=>{n.add(o.coin_type)})}),t==null||t.forEach(i=>{i.rewards.forEach(o=>{n.add(o.coin_type)})}),Array.from(n)}static buildDividendRewardTypeListV2(e){const t={};return e==null||e.forEach(n=>{n.vesrion==="v2"&&n.rewards.forEach(i=>{t[i.coin_type]||(t[i.coin_type]=[]),t[i.coin_type].push(n.period)})}),t}static getNextStartTime(e){const t=Date.now()/1e3,{start_time:n,interval_day:i}=e,o=Math.ceil((t-n)/(i*Si));return n+o*i*Si}},R_=class{constructor(e){U(this,"_sdk");U(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getOwnerVeNFT(e,t=!0){const{xcetus:n}=this.sdk.sdkOptions,i=`${e}_getLockUpManagerEvent`,o=this.getCache(i,t);if(o!==void 0)return o;let s;const r=`${n.package_id}::xcetus::VeNFT`;return(await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:!0},filter:{StructType:r}})).data.forEach(c=>{const d=D(Yt(c)).source_address;if(d===r&&c.data&&c.data.content){const{fields:l}=c.data.content;s={...Ro(c),id:l.id.id,index:l.index,type:d,xcetus_balance:l.xcetus_balance},this.updateCache(i,s,z)}}),s}async getOwnerLockCetuss(e){const{xcetus:t}=this.sdk.sdkOptions,n=[],i=`${t.package_id}::lock_coin::LockedCoin<${this.buileCetusCoinType()}>`,o=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0},filter:{StructType:i}});for(const s of o.data)if(D(Yt(s)).source_address===i&&s.data){const a=En.buildLockCetus(s.data.content);a.xcetus_amount=await this.getXCetusAmount(a.id),n.push(a)}return n}async getLockCetus(e){var n;const t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});if((n=t.data)!=null&&n.content){const i=En.buildLockCetus(t.data.content);return i.xcetus_amount=await this.getXCetusAmount(i.id),i}}async getOwnerCetusCoins(e){return await this._sdk.ClmmSDK.getOwnerCoinAssets(e,this.buileCetusCoinType())}mintVeNFTPayload(){const{xcetus:e}=this.sdk.sdkOptions,t=new N;return t.moveCall({target:`${e.published_at}::${zn}::mint_venft`,typeArguments:[],arguments:[t.object(x(e).xcetus_manager_id)]}),t}async convertPayload(e){const{xcetus:t}=this.sdk.sdkOptions,n=new N,i=this.buileCetusCoinType(),o=await X.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,n,BigInt(e.amount),i);return e.venft_id===void 0?n.moveCall({target:`${t.published_at}::${zn}::mint_and_convert`,typeArguments:[],arguments:[n.object(x(t).lock_manager_id),n.object(x(t).xcetus_manager_id),o,n.pure.u64(e.amount)]}):n.moveCall({target:`${t.published_at}::${zn}::convert`,typeArguments:[],arguments:[n.object(x(t).lock_manager_id),n.object(x(t).xcetus_manager_id),o,n.pure.u64(e.amount),n.object(e.venft_id)]}),n}redeemLockPayload(e){const{xcetus:t}=this.sdk.sdkOptions,n=new N;return n.moveCall({target:`${t.published_at}::${zn}::redeem_lock`,typeArguments:[],arguments:[n.object(x(t).lock_manager_id),n.object(x(t).xcetus_manager_id),n.object(e.venft_id),n.pure.u64(e.amount),n.pure.u64(e.lock_day),n.object($)]}),n}redeemPayload(e){const{xcetus:t}=this.sdk.sdkOptions,n=new N;return n.moveCall({target:`${t.published_at}::${zn}::redeem`,typeArguments:[],arguments:[n.object(x(t).lock_manager_id),n.object(x(t).xcetus_manager_id),n.object(e.venft_id),n.object(e.lock_id),n.object($)]}),n}redeemDividendPayload(e,t){const{xcetus:n,xcetus_dividends:i}=this.sdk.sdkOptions,o=new N;return t.forEach(s=>{o.moveCall({target:`${n.published_at}::${Xi}::redeem`,typeArguments:[s],arguments:[o.object(x(i).dividend_manager_id),o.object(e)]})}),o}redeemDividendV2Payload(e,t,n){const{xcetus_dividends:i}=this.sdk.sdkOptions;let o=new N;return t.filter(r=>n.includes(r)).length>0&&(o=this.redeemDividendXTokenPayload(e,o)),t.forEach(r=>{n.includes(r)||o.moveCall({target:`${i.published_at}::${Xi}::redeem_v2`,typeArguments:[r],arguments:[o.object(x(i).dividend_manager_id),o.object(e),o.object($)]})}),o}redeemDividendV3Payload(e,t,n,i,o){const{xcetus_dividends:s}=this.sdk.sdkOptions;let r=new N;return n.filter(c=>o.includes(c)).length>0&&(r=this.redeemDividendXTokenPayload(t,r)),n.forEach(c=>{r.moveCall({target:`${s.published_at}::${Xi}::redeem_v3`,typeArguments:[c],arguments:[r.object(x(s).dividend_manager_id),r.object(x(s).venft_dividends_id),r.makeMoveVec({elements:i[c].map(d=>r.pure.u64(d)),type:"u64"}),r.object(t),r.object($)]})}),r}redeemDividendXTokenPayload(e,t){const{xcetus_dividends:n,xcetus:i}=this.sdk.sdkOptions,{xcetus_manager_id:o,lock_manager_id:s}=x(i),{dividend_manager_id:r}=x(n);return t=t===void 0?new N:t,t.moveCall({target:`${n.published_at}::${Xi}::redeem_xtoken`,typeArguments:[],arguments:[t.object(s),t.object(o),t.object(r),t.object(e),t.object($)]}),t}buileCetusCoinType(){return`${this.sdk.sdkOptions.cetus_faucet.package_id}::cetus::CETUS`}buileXTokenCoinType(e=this._sdk.sdkOptions.xcetus.package_id,t="xcetus",n="XCETUS"){return`${e}::${t}::${n}`}cancelRedeemPayload(e){const{xcetus:t}=this.sdk.sdkOptions,n=new N;return n.moveCall({target:`${t.published_at}::${zn}::cancel_redeem_lock`,typeArguments:[],arguments:[n.object(x(t).lock_manager_id),n.object(x(t).xcetus_manager_id),n.object(e.venft_id),n.object(e.lock_id),n.object($)]}),n}async getInitConfigs(){var r,a;const{package_id:e}=this.sdk.sdkOptions.xcetus,t=`${e}_getInitFactoryEvent`,n=this.getCache(t);if(n!==void 0)return n;const i=(r=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::xcetus::InitEvent`}))==null?void 0:r.data,o={xcetus_manager_id:"",lock_manager_id:"",lock_handle_id:""};i.length>0&&i.forEach(c=>{const d=c.parsedJson;d&&(o.xcetus_manager_id=d.xcetus_manager)});const s=(a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::locking::InitializeEvent`}))==null?void 0:a.data;return s.length>0&&s.forEach(c=>{const d=c.parsedJson;d&&(o.lock_manager_id=d.lock_manager)}),o.lock_manager_id.length>0&&(o.lock_handle_id=(await this.getLockUpManager(o.lock_manager_id)).lock_infos.lock_handle_id),this.updateCache(t,o,z),o}async getLockUpManager(e=x(this.sdk.sdkOptions.xcetus).lock_manager_id,t=!1){const n=`${e}_getLockUpManager`,i=this.getCache(n,t);if(i!==void 0)return i;const o=await this.sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),s=En.buildLockUpManager(ee(o));return this.updateCache(n,s,z),s}async getDividendConfigs(){var d,l,h;const{package_id:e}=this.sdk.sdkOptions.xcetus_dividends,{dividend_manager_id:t,venft_dividends_id:n}=x(this._sdk.sdkOptions.xcetus_dividends),i=`${e}_getDividendManagerEvent`,o=this.getCache(i);if(o!==void 0)return o;const s=(d=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::dividend::InitEvent`}))==null?void 0:d.data,r=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x1::string::String",value:"VeNFTDividends"}}),a={dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:"",venft_dividends_id:"",venft_dividends_id_v2:""};s.length>0&&s.forEach(_=>{const g=_.parsedJson;g&&(a.dividend_manager_id=g.manager_id,a.dividend_admin_id=g.admin_id,a.dividend_settle_id=g.settle_id,this.updateCache(i,a,z))}),r&&r.data&&r.data.content&&(a.venft_dividends_id=(h=(l=r.data.content)==null?void 0:l.fields)==null?void 0:h.value,this.updateCache(i,a,z));const c=await this._sdk.ClmmSDK.fullClient.getObject({id:n,options:{showContent:!0}});return a.venft_dividends_id_v2=c.data.content.fields.venft_dividends.fields.id.id,a}async getDividendManager(e=!1){const{dividend_manager_id:t}=x(this._sdk.sdkOptions.xcetus_dividends),n=`${t}_getDividendManager`,i=this.getCache(n,e);if(i!==void 0)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),s=ee(o);console.log("🚀🚀🚀 ~ file: xcetusModule.ts:563 ~ XCetusModule ~ getDividendManager ~ fields:",s);const r=En.buildDividendManager(s);return this.updateCache(n,r,z),r}async getXcetusManager(e=!0){const{xcetus_manager_id:t}=x(this._sdk.sdkOptions.xcetus),n=`${t}_getXcetusManager`,i=this.getCache(n,e);if(i)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),s=ee(o),r={id:s.id.id,index:Number(s.index),has_venft:{handle:s.has_venft.fields.id.id,size:s.has_venft.fields.size},nfts:{handle:s.nfts.fields.id.id,size:s.nfts.fields.size},total_locked:s.total_locked,treasury:s.treasury.fields.total_supply.fields.value};return this.updateCache(n,r),r}async getVeNFTDividendInfo(e,t,n){let i,o={id:"",ve_nft_id:n,rewards:[]};try{i=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:n}}),console.log("🚀🚀🚀 ~ file: xcetusModule.ts:629 ~ XCetusModule ~ venft_dividends:",i);const r=ee(i);o=En.buildVeNFTDividendInfo(r)}catch{i=void 0}const s=[];try{const r=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x2::object::ID",value:n}}),a=ee(r).value.fields.value.fields.dividends.fields.id.id;let c=null;const d=50,l=[];for(;;){const h=await this._sdk.ClmmSDK.fullClient.getDynamicFields({parentId:a,cursor:c,limit:d});if(h.data.forEach(_=>{l.push(_.objectId)}),c=h.nextCursor,c===null||h.data.length<d)break}for(let h=0;h<l.length;h++){const _=await this._sdk.ClmmSDK.fullClient.getObject({id:l[h],options:{showType:!0,showContent:!0}});s.push({period:Number(_.data.content.fields.name),vesrion:"v2",rewards:_.data.content.fields.value.fields.contents.map(g=>({coin_type:D(g.fields.key.fields.name).source_address,amount:g.fields.value}))})}}catch(r){console.log("🚀🚀🚀 ~ file: xcetusModule.ts:637 ~ XCetusModule ~ error:",r)}return{...o,rewards:[...o.rewards,...s]}}async redeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};const n=await this.getLockUpManager(x(this._sdk.sdkOptions.xcetus).lock_manager_id),i=y(Ut).mul(y(n.max_lock_day).sub(y(t))).mul(y(n.max_percent_numerator).sub(y(n.min_percent_numerator))).div(y(n.max_lock_day).sub(y(n.min_lock_day))),o=y(Ut).mul(y(n.max_percent_numerator)).sub(i).div(y(vo)).div(Ut);return{amountOut:y(o).mul(y(e)).round().toString(),percent:o.toString()}}async reverseRedeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};const n=await this.getLockUpManager(x(this._sdk.sdkOptions.xcetus).lock_manager_id),i=y(Ut).mul(y(n.max_lock_day).sub(y(t))).mul(y(n.max_percent_numerator).sub(y(n.min_percent_numerator))).div(y(n.max_lock_day).sub(y(n.min_lock_day))),o=y(Ut).mul(y(n.max_percent_numerator)).sub(i).div(y(vo)).div(Ut);return{amountOut:y(e).div(o).toFixed(0,V.ROUND_UP),percent:o.toString()}}async getXCetusAmount(e){const{lock_handle_id:t}=x(this._sdk.sdkOptions.xcetus),n=`${e}_getXCetusAmount`,i=this.getCache(n);if(i!==void 0)return i;try{const o=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x2::object::ID",value:e}}),s=ee(o);if(s){const{xcetus_amount:r}=s.value.fields.value.fields;return this.updateCache(n,r,z),r}}catch{}return"0"}async getVeNftAmount(e,t){try{const n=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),i=ee(n);if(i){const{lock_amount:o,xcetus_amount:s}=i.value.fields.value.fields;return{lock_amount:o,xcetus_amount:s}}}catch{}return{lock_amount:"0",xcetus_amount:"0"}}async getPhaseDividendInfo(e,t=!1){const i=(await this.getDividendManager()).dividends.id,o=`${i}_${e}_getPhaseDividendInfo`,s=this._sdk.getCache(o,t);if(s)return s;try{const r=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:i,name:{type:"u64",value:e}}),a=ee(r),c=a.value.fields.value.fields,d=c.redeemed_num.fields.contents.map(g=>({name:g.fields.key.fields.name,value:g.fields.value})),l=c.bonus_types.map(g=>g.fields.name),h=c.bonus.fields.contents.map(g=>({name:g.fields.key.fields.name,value:g.fields.value})),_={id:Zt(r),phase:a.name,settled_num:c.settled_num,register_time:c.register_time,redeemed_num:d,is_settled:c.is_settled,bonus_types:l,bonus:h,phase_end_time:""};return this.updateCache(o,_),_}catch{}}updateCache(e,t,n=qt){let i=this._cache[e];i?(i.overdueTime=ge(n),i.value=t):i=new Ot(t,ge(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e];if(!t&&(n!=null&&n.isValid()))return n.value;delete this._cache[e]}},D_="factory",$t="oversubscribe_pool",Ad=1e6,Xn=1e18,Gn="router",vs="router",Hi="router",Oa={curve:{strategy:3,both_side:{div_width:10,ratios:[.333333,.266666,.2,.133333,.066666]},one_side:{div_width:5,ratios:[.333333,.266666,.2,.133333,.066666]}},bidAsk:{strategy:4,both_side:{div_width:10,ratios:[.172413793,.137931034,.103448276,.068965517,.034482759,.068965517,.103448276,.137931034,.172413793]},one_side:{div_width:5,ratios:[.066666667,.13333333,.2,.266666667,.333333333]}}};function N_(e){return"master_address"in e}var q_="router",$_="vaults",F_=1e4,mt=class{static buildIdoPoolImmutables(e){return{pool_address:me(e.pool_id),coin_type_sale:D(e.sale_coin_type.name).full_address,coin_type_raise:D(e.raise_coin_type.name).full_address,tick_spacing:Number(e.tick_spacing),total_supply:e.total_supply,min_purchase:e.min_purchase_amount,max_purchase:e.max_purchase_amount}}static buildIdoPool(e){const t=Yt(e),n=D(t),i=ee(e);console.log("fields:",i);const o={pool_address:me(i.id.id),coin_type_sale:n.type_arguments[0],coin_type_raise:n.type_arguments[1],tick_spacing:Number(i.tick_spacing),total_supply:i.total_supply,min_purchase:i.min_purchase_amount,max_purchase:i.max_purchase_amount},s={start_time:Number(i.duration_manager.fields.start_time),lock_up_duration:Number(i.duration_manager.fields.lock_up_duration),purchase_duration:Number(i.duration_manager.fields.purchase_duration),end_time:0};s.end_time=s.start_time+s.purchase_duration;const r={complete_raise_limit:i.complete_raise_limit,liquidity_injection_ratio:y(i.liquidity_injection_ratio).div(Ad).toNumber(),current_sqrt_price_min:i.current_sqrt_price_min,current_sqrt_price_max:i.current_sqrt_price_max,owner:i.owner,sale_coin_amount:i.sale_coin,raise_coin_amount:i.raise_coin,price:i.price,current_price:i.price,duration_summary:s,is_cancelled:i.is_cancelled,is_liquidity_injected:i.is_liquidity_injected,liquidity_used_raise_amount:i.liquidity_used_raise_amount,liquidity_used_sale_amount:i.liquidity_used_sale_amount,purchase_summary:{size:Number(i.purchase_manager.fields.purchases.fields.size),purchase_handle:i.purchase_manager.fields.purchases.fields.id.id},total_purchase_amount:i.total_purchase_amount,white_summary:{white_list_id:i.white_list.fields.id.id,protection_limit_used:i.white_list.fields.protection_limit_used,protection_hard_cap:i.white_list.fields.protection_hard_cap,white_handle:i.white_list.fields.addresses.fields.id.id,size:Number(i.white_list.fields.addresses.fields.size)},pool_status:"Upcoming",max_raise_amount:"",sale_decimals:0,raise_decimals:0,is_withdrawn:i.is_withdrawn};return mt.updatePoolStatus(r),{...o,...r}}static is_init_period(e){return Number(y(Date.now()/1e3).toFixed(0))<e.start_time}static is_purchase_period(e){const t=Number(y(Date.now()/1e3).toFixed(0));return t>=e.start_time&&t<=e.start_time+e.purchase_duration}static is_claim_period(e){const t=Number(y(Date.now()/1e3).toFixed(0)),n=e.start_time+e.purchase_duration;return t>n}static is_can_inject_liquidity(e){return!e.is_cancelled&&e.liquidity_injection_ratio!==0&&mt.is_claim_period(e.duration_summary)&&!e.is_liquidity_injected}static is_can_withdraw(e){return e.is_withdrawn?!1:mt.is_sale_failed(e)?!0:(e.liquidity_injection_ratio===0||e.is_liquidity_injected)&&mt.is_claim_period(e.duration_summary)}static is_sale_failed(e){return!!(e.is_cancelled||mt.is_claim_period(e.duration_summary)&&y(e.total_purchase_amount).lessThan(e.complete_raise_limit))}static buildPurchaseInfo(e){return{...e.value.fields.value.fields,owner:e.name}}static calculateRedeemAmount(e,t){let n,i;if(mt.is_sale_failed(e))n="0",i="0";else if(t.is_redeemed)n=t.obtained_sale_amount,i=t.used_raise_amount;else if(y(e.total_purchase_amount).lessThanOrEqualTo(e.max_raise_amount))n=y(t.purchased_raise_amount).mul(Xn).div(e.price).toString(),i=t.purchased_raise_amount;else{const s=mt.redeemForSaleOversubcribeV2(e,t);n=s.user_obtained_sale_amount,i=s.user_used_raise_amount_ceil}n=V.floor(n);const o=V.floor(y(t.purchased_raise_amount).sub(i).toString());return{obtained_sale_amount:n,refunded_raise_amount:o}}static calculateWithdrawAmount(e){let t,n;const i=y(e.total_supply).mul(e.liquidity_injection_ratio);if(mt.is_sale_failed(e))t="0",n=y(i).add(e.total_supply);else{const{max_raise_amount:o}=e;y(e.total_purchase_amount).greaterThanOrEqualTo(o)?(t=y(o).sub(e.liquidity_used_raise_amount).toString(),n="0"):(t=y(e.total_purchase_amount).sub(e.liquidity_used_raise_amount),n=y(e.total_supply).add(i).sub(e.liquidity_used_sale_amount).sub(mt.get_sold_amount(e)))}return{obtained_raise_amount:V.floor(t).toString(),refunded_sale_amount:V.ceil(n).toString()}}static get_sold_amount(e){return y(e.total_purchase_amount).greaterThanOrEqualTo(e.max_raise_amount)?e.total_supply:y(e.total_purchase_amount).mul(Xn).div(e.price)}static redeemForSaleOversubcribe(e,t){const n=t.protection_raise_amount,i=y(t.purchased_raise_amount).sub(n),o=e.max_raise_amount,{protection_limit_used:s}=e.white_summary,r=y(o).sub(s),a=y(e.total_purchase_amount).sub(s),c=V.ceil(i.mul(r).div(a).add(n)),d=V.floor(i.mul(r).div(a).add(n));return{user_obtained_sale_amount:V.floor(y(e.total_supply).mul(d).div(o)),user_used_raise_amount_ceil:c}}static redeemForSaleOversubcribeV2(e,t){const n=t.protection_raise_amount,i=y(t.purchased_raise_amount).sub(n),o=e.max_raise_amount,{protection_limit_used:s}=e.white_summary,r=y(o).sub(s),a=y(e.total_purchase_amount).sub(s),c=y(n).mul(a).add(y(i).mul(r)).mul(Xn).div(y(a).mul(e.price)),d=V.ceil(c.mul(e.price).div(Xn));return{user_obtained_sale_amount:c,user_used_raise_amount_ceil:d}}static raiseTotalAmount(e){const t=y(e.sale_decimals-e.raise_decimals).abs().toNumber();return e.sale_decimals>e.raise_decimals?y(e.total_supply).mul(e.current_price).div(y(10).pow(y(t))).toString():y(e.total_supply).mul(e.current_price).mul(y(10).pow(y(t))).toString()}static updatePoolStatus(e){const t=Number(y(Date.now()/1e3).toFixed(0)),n=e.duration_summary,i=n.start_time+n.purchase_duration;e.is_cancelled?e.pool_status="Canceled":t<n.start_time?e.pool_status="Upcoming":t>n.start_time&&t<i?e.pool_status="Live":y(e.total_purchase_amount).lessThan(e.complete_raise_limit)?e.pool_status="Failed":e.pool_status="Ended"}static async calculatePoolUiPrice(e,t){const n=await e.ClmmSDK.CetusConfig.getTokenListByCoinTypes([t.coin_type_sale,t.coin_type_raise]),i=n[t.coin_type_sale].decimals,o=n[t.coin_type_raise].decimals;t.current_price=Tt.priceFixToReal(Number(y(t.price).div(y(Xn)).toString()),i,o).toString(),t.sale_decimals=i,t.raise_decimals=o,t.max_raise_amount=this.raiseTotalAmount(t)}},v0=class{constructor(e){U(this,"_sdk");this._sdk=e}async getPools(e=[],t=!1){const n=[];if(e.length>0){if(e.filter(o=>{const s=`${o}_getPool`,r=this._sdk.getCache(s,t);return r?(n.push(r),!1):!0}).length>0){const o=await this._sdk.ClmmSDK.fullClient.batchGetObjects(e,{showType:!0,showContent:!0});for(const s of o){const r=await this.buildIdoWarpPool(s);r&&n.push(r)}}}else(await this._sdk.Ido.getPools()).forEach(o=>{n.push({...o,version:"2"})});return n.forEach(i=>{const o=`${i.pool_address}_getPool`;this._sdk.updateCache(o,i)}),n}async getPool(e,t=!0){const n=`${e}_getPool`,i=this._sdk.getCache(n,t);if(i)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),s=await this.buildIdoWarpPool(o);return this._sdk.updateCache(n,s),s}async getJoinPools(e,t){const n=[],i=t.filter(s=>s.version==="1"),o=t.filter(s=>s.version==="2");if(i.length>0){const s=await this._sdk.Launchpad.getPurchaseMarks(e,i.map(r=>r.pool_address),!1);i.forEach(r=>{for(const a of s)if(a.pool_id===r.pool_address){n.push(r);break}})}for(const s of o)await this._sdk.Ido.getPurchaseInfo(s.purchase_summary.purchase_handle,e,!1)&&n.push(s);return n}async getOwnerPools(e,t){return t.filter(n=>n.owner===ae(e))}async creatPurchasePayload(e,t){return e.version==="1"?await this._sdk.Launchpad.creatPurchasePayload({pool_address:e.pool_address,purchase_amount:t,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise}):await this._sdk.Ido.creatPurchasePayload({pool_address:e.pool_address,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise,purchase_handle:e.purchase_summary.purchase_handle,raise_amount:t.toString()})}async creatRedeemPayload(e){return e.version==="1"?await this._sdk.Launchpad.creatClaimPayload({pool_address:e.pool_address,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise}):await this._sdk.Ido.redeemPayload({pool_address:e.pool_address,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise,purchase_handle:e.purchase_summary.purchase_handle})}async creatWithdrawPayload(e){if(e.version==="1"){const n=await Tt.getWithdrawSale(e),i=await Tt.getWithdrawRaise(e);return this._sdk.Launchpad.creatWithdrawPayload({pool_address:e.pool_address,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise,sale_amount:BigInt(n),raise_amount:BigInt(i)})}return this._sdk.Ido.withdrawPayload({pool_address:e.pool_address,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise})}unlockNftPayload(e,t){return e.version==="1"?this._sdk.Launchpad.creatUnlockNftPayload(t):this._sdk.Ido.unlockNftPayload({lock_nft_id:t.lock_nft,nft_type:t.nft_type})}async getLockNFTList(e){let t=[];return e.version==="1"&&(t=await this._sdk.Launchpad.getLockNFTList(e.owner)),t=await this._sdk.Ido.getLockNFTList(e.owner),t.filter(i=>{const o=D(i.coin_type_a).full_address,s=D(i.coin_type_b).full_address,r=D(e.coin_type_sale).full_address,a=D(e.coin_type_raise).full_address;return o===r&&s===a||o===a&&s===r})}async isWhiteListUser(e,t){return t.version==="1"?await this._sdk.Launchpad.isWhiteListUser(t.white_summary.white_handle,e):!!await this._sdk.Ido.getWhiteProtectionLimit(t.white_summary.white_handle,e)}async getPurchaseInfo(e,t){if(t.version==="1"){const i=await this._sdk.Launchpad.getPurchaseMarks(e,[t.pool_address]);return i.length>0?i[0]:void 0}return await this._sdk.Ido.getPurchaseInfo(t.purchase_summary.purchase_handle,e)}async getwhiteProtectionInfo(e,t,n=!1){if(t.version==="1")return await this._sdk.Launchpad.getPurchaseAmount(t.white_summary.white_handle,e);const i=await this._sdk.Ido.getPurchaseInfo(t.purchase_summary.purchase_handle,e,n);if(i)return{safe_limit_amount:i.protection_raise_limit,safe_purchased_amount:i.protection_raise_amount};const o=await this._sdk.Ido.getWhiteProtectionLimit(t.white_summary.white_handle,e,!1);return o?{safe_limit_amount:o,safe_purchased_amount:"0"}:{safe_limit_amount:"0",safe_purchased_amount:"0"}}async calculateWithdrawAmount(e){if(e.version==="1"){const t=await Tt.getHistoryWithdrawRaise(this._sdk,e),n=await Tt.getHistoryWithdrawSale(this._sdk,e);return{obtained_raise_amount:t,refunded_sale_amount:n}}return mt.calculateWithdrawAmount(e)}async buildIdoWarpPool(e){const t=Ln(e);if(console.log(this._sdk.sdkOptions.ido.package_id,D(t).address,"buildIdoWarpPool"),D(t).address===this._sdk.sdkOptions.ido.package_id){const n=mt.buildIdoPool(e);return await mt.calculatePoolUiPrice(this._sdk,n),{...n,version:"2"}}if(D(t).address===this._sdk.sdkOptions.launchpad.package_id){const n=Tt.buildLaunchPadPool(e);return await Tt.calculatePoolPrice(this._sdk,n),{...n,version:"1"}}}},Bn=class{static buildVeNFTDividendInfo(e){const t={id:e.id.id,ve_nft_id:e.name,rewards:[]};return e.value.fields.value.fields.dividends.fields.contents.forEach(n=>{const i=[];n.fields.value.fields.contents.forEach(o=>{i.push({coin_type:D(o.fields.key.fields.name).source_address,amount:o.fields.value})}),t.rewards.push({period:Number(n.fields.key),rewards:i})}),t}static buildDividendManager(e){const t={id:e.id.id,dividends:{id:e.dividends.fields.id.id,size:e.dividends.fields.size},venft_dividends:{id:e.venft_dividends.fields.id.id,size:e.venft_dividends.fields.size},bonus_types:[],start_time:Number(e.start_time),interval_day:Number(e.interval_day),balances:{id:e.balances.fields.id.id,size:e.balances.fields.size},is_open:e.is_open};return e.bonus_types.forEach(n=>{t.bonus_types.push(D(n.fields.name).source_address)}),t}static buildLockUpManager(e){return{id:e.id.id,balance:e.balance,treasury_manager:e.treasury_manager,extra_treasury:e.extra_treasury,lock_infos:{lock_handle_id:e.lock_infos.fields.id.id,size:Number(e.lock_infos.fields.size)},type_name:Se(e.type_name.fields.name),min_lock_day:Number(e.min_lock_day),max_lock_day:Number(e.max_lock_day),package_version:Number(e.package_version),max_percent_numerator:Number(e.max_percent_numerator),min_percent_numerator:Number(e.min_percent_numerator)}}static buildLockToken(e){const t=e.fields,n={id:t.id.id,type:D(e.type).source_address,locked_start_time:Number(t.locked_start_time),locked_until_time:Number(t.locked_until_time),token_amount:t.balance,xtoken_amount:"0",lock_day:0};return n.lock_day=(n.locked_until_time-n.locked_start_time)/Si,n}static getAvailableXToken(e,t){let n=y(0);return t.forEach(i=>{n=n.add(i.xtoken_amount)}),y(e.xtoken_balance).sub(n).toString()}static getWaitUnLockTokens(e){return e.filter(t=>!Bn.isLocked(t))}static getLockingTokens(e){return e.filter(t=>Bn.isLocked(t))}static buildDividendRewardTypeList(e){const t=new Set;return e.forEach(n=>{n.rewards.forEach(i=>{t.add(i.coin_type)})}),Array.from(t)}static isLocked(e){return e.locked_until_time>Date.parse(new Date().toString())/1e3}static getNextStartTime(e,t=Si){const n=Date.now()/1e3,{start_time:i,interval_day:o}=e,s=Math.ceil((n-i)/(o*t));return i+s*o*t}},pn=class{static getDefaultStrategyConfig(e){let t;switch(e){case 4:t=Oa.bidAsk;break;default:t=Oa.curve;break}return t}static geTickIndexRange(e,t,n,i){let o,s;switch(e=G.getInitializableTickIndex(e,t),i){case"left":e>0?(s=y(e).sub(t).toNumber(),o=y(e).mul(y(1).add(n)).toDecimalPlaces(0).toNumber()):(s=y(e).sub(t).toNumber(),o=y(e).mul(y(1).sub(n)).toDecimalPlaces(0).toNumber());break;case"right":e>0?(s=y(e).mul(y(1).add(n)).toDecimalPlaces(0).toNumber(),o=y(e).add(t).toNumber()):(s=y(e).mul(y(1).sub(n)).toDecimalPlaces(0).toNumber(),o=y(e).add(t).toNumber());break;default:e>0?(o=y(e).mul(y(1).sub(n)).toDecimalPlaces(0).toNumber(),s=y(e).mul(y(1).add(n)).toDecimalPlaces(0).toNumber()):(o=y(e).mul(y(1).add(n)).toDecimalPlaces(0).toNumber(),s=y(e).mul(y(1).sub(n)).toDecimalPlaces(0).toNumber());break}if(o=G.getInitializableTickIndex(o,t),s=G.getInitializableTickIndex(s,t),o<Ws)throw Error("Tick lower value is below the minimum allowed value.");if(s>Gs)throw Error("Tick upper value is above the maximum allowed value.");return{tick_lower:o,tick_upper:s}}static getCreateLiquidityBins(e,t){let n=[];switch(t){case 4:n=pn.getCreateBidAskLiquidityBins(e);break;default:n=pn.getCreateCurveLiquidityBins(e);break}return n}static getCreateBidAskLiquidityBins(e){const t=y(Math.floor(y(e.tick_upper).sub(e.tick_lower).div(e.div_width).toNumber())).abs(),n=[],i=e.ratios;let o,s;for(let r=0;r<i.length;r++){let a,c;e.tick_upper<=e.curr_tick?(c=y(e.tick_upper).sub(t.mul(r)).toNumber(),a=y(c).sub(t).toNumber()):e.tick_lower>=e.curr_tick?(a=y(e.tick_lower).add(t.mul(r)).toNumber(),c=y(e.tick_lower).add(t.mul(r+1)).toNumber()):r===4?(a=y(e.tick_lower).add(t.mul(r)).toNumber(),c=y(a).add(t.mul(2)).toNumber()):r>4?(a=y(e.tick_lower).add(t.mul(r+1)).toNumber(),c=y(a).add(t).toNumber()):(a=y(e.tick_lower).add(t.mul(r)).toNumber(),c=y(a).add(t).toNumber()),o=G.getInitializableTickIndex(a,e.tick_spacing),s=G.getInitializableTickIndex(c,e.tick_spacing),n.push({tick_lower:o,tick_upper:s,ratio:i[r],liquidity:"0"})}return n}static getCreateCurveLiquidityBins(e){const t=y(Math.floor(y(e.tick_upper).sub(e.tick_lower).div(e.div_width).toNumber())).abs(),n=[],i=e.ratios;for(let o=0;o<i.length;o++){let s,r;e.tick_upper<=e.curr_tick?(r=e.tick_upper,s=y(e.tick_upper).sub(t.mul(o+1)).toNumber()):e.tick_lower>=e.curr_tick?(s=e.tick_lower,r=y(s).add(t.mul(o+1)).toNumber()):(s=y(e.curr_tick).sub(t.mul(o+1)).toNumber(),r=y(e.curr_tick).add(t.mul(o+1)).toNumber()),n.push({tick_lower:G.getInitializableTickIndex(s,e.tick_spacing),tick_upper:G.getInitializableTickIndex(r,e.tick_spacing),ratio:i[o],liquidity:"0"})}return n}static calculateAddLiquidityInputs(e){const t=new m(G.tickIndexToSqrtPriceX64(e.curr_tick)),n=pn.calculateCoinRatios(e.curr_tick,e.liquidity_bins),i=e.liquidity_bins.map((o,s)=>{const r=n[s],a=y(e.coin_amount).mul(e.fix_amount_a?r.coinRatioA:r.coinRatioB).toFixed(0).toString();try{return{...yt.estLiquidityAndcoinAmountFromOneAmounts(o.tick_lower,o.tick_upper,new m(a),e.fix_amount_a,!0,e.slippage,t),...o}}catch{return{coinAmountA:new m(0),coinAmountB:new m(0),tokenMaxA:new m(0),tokenMaxB:new m(0),liquidityAmount:new m(0),fix_amount_a:!e.fix_amount_a,...o}}});return pn.fixLiquidityInputs(t,e.slippage,i,!0)}static fixLiquidityInputs(e,t,n,i){const o=n.filter(r=>r.liquidityAmount.gt(J));if(o.length===0)return[];const s=o[0];return n.map(r=>{if(r.liquidityAmount.eq(J)){const a=y(s.liquidityAmount.toString()).mul(r.ratio).div(s.ratio).toFixed(0),c=G.tickIndexToSqrtPriceX64(r.tick_lower),d=G.tickIndexToSqrtPriceX64(r.tick_upper),l=yt.getCoinAmountFromLiquidity(new m(a.toString()),e,c,d,!1);return{coinAmountA:l.coinA,coinAmountB:l.coinB,liquidityAmount:new m(a.toString()),fix_amount_a:r.fix_amount_a,...ms(l,Ai.fromDecimal(y(t).mul(100)),i)}}return r})}static calculateCoinRatios(e,t){const n=new m(G.tickIndexToSqrtPriceX64(e)),i=[];let o=y(0),s=y(0);const r=t.map(d=>{const l=y(m_(100,6).toString()).mul(d.ratio).toFixed(0).toString(),h=G.tickIndexToSqrtPriceX64(d.tick_lower),_=G.tickIndexToSqrtPriceX64(d.tick_upper),g=yt.getCoinAmountFromLiquidity(new m(l),n,h,_,!0);return o=o.add(g.coinA.toString()),s=s.add(g.coinB.toString()),{...g,liquidity:l}}),a=[],c=[];return r.forEach((d,l)=>{const h={coinRatioA:o.eq(y(0))?0:y(d.coinA.toString()).div(o).toNumber(),coinRatioB:s.eq(y(0))?0:y(d.coinB.toString()).div(s).toNumber(),liquiditys:d.liquidity,tick_lower:t[l].tick_lower,tick_upper:t[l].tick_upper};i.push(h),a.push(o.eq(y(0))?0:y(d.coinA.toString()).div(o).toNumber()),c.push(s.eq(y(0))?0:y(d.coinB.toString()).div(s).toNumber())}),i}static calculateCloseMasterLiquidityInputs(e){const t=new m(G.tickIndexToSqrtPriceX64(e.curr_tick));return e.positions.map(i=>{const o=new m(i.liquidity),s=G.tickIndexToSqrtPriceX64(i.tick_lower_index),r=G.tickIndexToSqrtPriceX64(i.tick_upper_index),a=yt.getCoinAmountFromLiquidity(o,t,s,r,!1),c=Ai.fromDecimal(y(e.slippage).mul(100)),{tokenMaxA:d,tokenMaxB:l}=ms(a,c,!1);return{coinAmountA:a.coinA,coinAmountB:a.coinB,tokenMaxA:d,tokenMaxB:l,liquidityAmount:o,fix_amount_a:!1}})}static calculateRemoveMasterLiquidityInputs(e){const t=new m(G.tickIndexToSqrtPriceX64(e.curr_tick)),{fix_token:n}=e;if(n){const o=e.positions.map((a,c)=>({tick_lower:a.tick_lower_index,tick_upper:a.tick_upper_index,ratio:e.ratios[c]})),s=pn.calculateCoinRatios(e.curr_tick,o),r=e.positions.map((a,c)=>{const d=s[c],l=y(n.coin_amount).mul(n.fix_amount_a?d.coinRatioA:d.coinRatioB).toFixed(0).toString();try{const h=yt.estLiquidityAndcoinAmountFromOneAmounts(a.tick_lower_index,a.tick_upper_index,new m(l),n.fix_amount_a,!1,e.slippage,t);return{...h,tick_lower:a.tick_lower_index,tick_upper:a.tick_upper_index,liquidity:h.liquidityAmount.toString(),ratio:e.ratios[c]}}catch{return{coinAmountA:new m(0),coinAmountB:new m(0),tokenMaxA:new m(0),tokenMaxB:new m(0),liquidityAmount:new m(0),fix_amount_a:!n.fix_amount_a,tick_lower:a.tick_lower_index,tick_upper:a.tick_upper_index,liquidity:"0",ratio:e.ratios[c]}}});return pn.fixLiquidityInputs(t,e.slippage,r,!1)}return e.positions.map((o,s)=>{const r=e.ratios[s];let a=y(e.liquidity).mul(r).toFixed(0);y(a).greaterThan(o.liquidity)&&(a=o.liquidity);const c=G.tickIndexToSqrtPriceX64(o.tick_lower_index),d=G.tickIndexToSqrtPriceX64(o.tick_upper_index),l=yt.getCoinAmountFromLiquidity(new m(a),t,c,d,!1),h=Ai.fromDecimal(y(e.slippage).mul(100)),{tokenMaxA:_,tokenMaxB:g}=ms(l,h,!1);return{coinAmountA:l.coinA,coinAmountB:l.coinB,tokenMaxA:_,tokenMaxB:g,liquidityAmount:new m(a),fix_amount_a:!1}})}static buildMasterPosition(e){return{coin_type_a:D(e.coin_type_a.fields.name).full_address,coin_type_b:D(e.coin_type_b.fields.name).full_address,description:e.description,id:e.id.id,index:e.index,liquidity:e.liquidity,name:e.name,pool:e.pool,tick_lower_index:pt(BigInt(e.tick_lower_index.fields.bits)),tick_upper_index:pt(BigInt(e.tick_upper_index.fields.bits)),url:e.url}}static buildMasterNFT(e){const t=ee(e);if(t){const n={id:t.id.id,pool_id:t.pool_id,index:Number(t.index),strategy:Number(t.strategy),tick_lower_index:pt(BigInt(t.tick_lower_index)),tick_upper_index:pt(BigInt(t.tick_upper_index)),positions:[],...Ro(e)};return n.positions=t.positions.map(i=>pn.buildMasterPosition(i.fields)),n}}},Et=class{static generateNextTickRange(e,t,n){const i=e-t/2,o=e+t/2;return{new_tick_lower:Et.getValidTickIndex(i,n),new_tick_upper:Et.getValidTickIndex(o,n)}}static calculateDepositRatio(e,t,n){const i=G.sqrtPriceX64ToTickIndex(n);if(i<e)return{ratioA:new V(1),ratioB:new V(0)};if(i>t)return{ratioA:new V(0),ratioB:new V(1)};const o=new m(1e8),{coinAmountB:s}=yt.estLiquidityAndcoinAmountFromOneAmounts(e,t,o,!0,!0,0,n),r=G.sqrtPriceX64ToPrice(n,0,0),a=y(o.toString()).mul(r),c=a.add(s.toString()),d=a.div(c),l=y(s.toString()).div(c);return{ratioA:d,ratioB:l}}static getValidTickIndex(e,t){if(e%t===0)return e;let n;if(e>0?n=e-e%t+t:e<0?n=e+Math.abs(e)%t-t:n=e,n%t!==0)throw new Error("Assertion failed: res % tickSpacing == 0");if(Math.abs(n)<Math.abs(e))throw new Error("Assertion failed: res.abs() >= tickIndex");return n}static get_lp_amount_by_liquidity(e,t){return e.total_supply==="0"?"0":y(e.total_supply).mul(t).div(e.liquidity).toFixed(0,V.ROUND_DOWN).toString()}static get_share_liquidity_by_amount(e,t){return e.total_supply==="0"?"0":y(t).mul(e.liquidity).div(e.total_supply).toFixed(0,V.ROUND_DOWN).toString()}static get_protocol_fee_amount(e,t){return y(t).mul(e.protocol_fee_rate).div(F_).toFixed(0,V.ROUND_CEIL)}static buildFramsPositionNFT(e){const t=e.clmm_postion.fields;return{id:e.id.id,url:t.url,pool_id:e.pool_id,coinTypeA:D(t.coin_type_a.fields.name).full_address,coinTypeB:D(t.coin_type_b.fields.name).full_address,description:t.description,name:t.name,liquidity:t.liquidity,clmm_position_id:t.id.id,clmm_pool_id:t.pool,tick_lower_index:pt(BigInt(t.tick_lower_index.fields.bits)),tick_upper_index:pt(BigInt(t.tick_upper_index.fields.bits)),rewards:[]}}static buildPool(e){const t=ee(e),n=Ln(e),{positions:i}=t;if(t&&i.length>0){const o=Et.buildFramsPositionNFT(i[0].fields);return{id:t.id.id,pool_id:t.pool,protocol_fee_rate:t.protocol_fee_rate,is_pause:t.is_pause,harvest_assets:{harvest_assets_handle:t.harvest_assets.fields.id.id,size:Number(t.harvest_assets.fields.size)},lp_token_type:D(n).type_arguments[0],total_supply:t.lp_token_treasury.fields.total_supply.fields.value,liquidity:t.liquidity,max_quota:t.max_quota,status:t.status===1?"STATUS_RUNNING":"STATUS_REBALANCING",quota_based_type:t.quota_based_type.fields.name,position:o}}}static async getSuiCoin(e,t,n){const i=await e.ClmmSDK.getOwnerCoinAssets(e.getVerifySenderAddress(),go);n=n||new N;let o;if(t>95e10){const[s,...r]=i;r.length>0&&n.mergeCoins(n.object(s.coinObjectId),r.map(a=>n.object(a.coinObjectId))),o=n.splitCoins(n.object(s.coinObjectId),[t])}else o=X.buildCoinForAmount(n,i,BigInt(t),go,!1,!0).targetCoin;return o}},Ji=class{static calculatePositionShare(e,t,n,i,o,s,r){if(t<=o||e>=s)return"0";let a=0;e<o?a=o:a=e;let c=0;t<s?c=t:c=s;const d=G.tickIndexToSqrtPriceX64(a),l=G.tickIndexToSqrtPriceX64(c),{coinA:h,coinB:_}=yt.getCoinAmountFromLiquidity(new m(n),new m(r),d,l,!0);return y(h.toString()).mul(i).div(1e12).add(_.toString()).toString()}static buildFramsPool(e){const t=ee(e);if(t)try{const n=[];return t.rewarders.forEach(o=>{n.push({reward_coin:D(o.fields.name).full_address,last_reward_time:"",emission_per_second:"",total_allocate_point:"",allocate_point:""})}),{id:t.id.id,clmm_pool_id:t.clmm_pool_id,effective_tick_lower:pt(BigInt(t.effective_tick_lower.fields.bits)),effective_tick_upper:pt(BigInt(t.effective_tick_upper.fields.bits)),total_share:t.total_share,rewarders:n,positions:{positions_handle:t.positions.fields.id.id,size:t.positions.fields.size},sqrt_price:t.sqrt_price}}catch(n){console.log(n)}}static buildFramsPositionNFT(e){const t=ee(e);if(t){const n=t.clmm_postion.fields;return{id:t.id.id,url:n.url,pool_id:t.pool_id,coinTypeA:D(n.coin_type_a.fields.name).full_address,coinTypeB:D(n.coin_type_b.fields.name).full_address,description:n.description,name:n.name,liquidity:n.liquidity,clmm_position_id:n.id.id,clmm_pool_id:n.pool,tick_lower_index:pt(BigInt(n.tick_lower_index.fields.bits)),tick_upper_index:pt(BigInt(n.tick_upper_index.fields.bits)),rewards:[]}}}},hi=class{static buildOrderLimitEvent(e,t){const{events:n}=e,i=[];return n&&n.forEach(o=>{const s=D(o.type).name;if(t.includes(s)){const r={digest:e.digest,type:s,timestampMs:e.timestampMs,parsedJson:o.parsedJson};i.push(r)}}),i}static buildLimitOrderInfo(e){const t=ee(e),n=Ln(e);if(t&&n)try{const i=D(n),o={pay_coin_type:i.type_arguments[0],target_coin_type:i.type_arguments[1],canceled_ts:t.canceled_ts==="18446744073709551615"?0:Number(t.canceled_ts),id:t.id.id,obtained_amount:t.obtained_amount,owner:t.owner,rate:t.rate,rate_order_indexer_id:t.rate_order_indexer_id,expire_ts:Number(t.expire_ts),total_pay_amount:t.total_pay_amount,pay_balance:t.pay_balance,target_balance:t.target_balance,claimed_amount:t.claimed_amount,status:"Running",created_ts:Number(t.created_ts)};return o.canceled_ts===0?(o.status="Running",y(o.pay_balance).eq(0)?o.status="Completed":y(o.pay_balance).lessThan(o.total_pay_amount)&&(o.status="PartialCompleted")):o.status="Cancelled",o}catch(i){console.log(i)}}static rateToPrice(e,t,n){const i=18+t-n;return y(10**i).div(e).toString()}static priceToRate(e,t,n){const i=18+t-n;return y(10).pow(i).div(y(e)).toFixed(0).toString()}},ks=class{static async getExchangeRateForStake(e,t,n){const{vaults:i}=e.sdkOptions,{haedal:o}=x(i);if(o===void 0)throw Error("the haedal config is undefined");const{simulationAccount:s}=e.ClmmSDK.sdkOptions,{staking_id:r}=x(o);try{const a=new N;t?await this.requestStake(e,n||1e9,a):a.moveCall({target:`${o.published_at}::staking::get_exchange_rate`,typeArguments:[],arguments:[a.object(r)]});const c=await e.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:a,sender:t?e.ClmmSDK.senderAddress:s.address});if(console.log("getExchangeRateForStake res: ",c),t){const h=c.events.find(I=>I.type.includes("UserStaked")),{sui_amount:_,st_amount:g}=h.parsedJson,C=y(_).div(g).toString();return console.log({st_amount:g,sui_amount:_,rate:C}),C}const d=c.results[0].returnValues[0][0];return y(ie.u64().parse(Uint8Array.from(d))).div(1e6).toString()}catch(a){console.log("getExchangeRateForHaedal",a)}return"0"}static async requestStake(e,t,n){var s,r;const{vaults:i}=e.sdkOptions;n=n||new N;const o=await Et.getSuiCoin(e,t,n);return n.moveCall({target:`${(r=(s=i.config)==null?void 0:s.haedal)==null?void 0:r.published_at}::interface::request_stake`,typeArguments:[],arguments:[n.object(me("0x5")),n.object(i.config.haedal.config.staking_id),o,n.pure.address(me("0x0"))]}),n}static requestStakeCoin(e,t,n){const{haedal:i}=e.sdkOptions.vaults.config;return t.moveCall({target:`${i.published_at}::staking::request_stake_coin`,typeArguments:[],arguments:[t.object(me("0x5")),t.object(i.config.staking_id),n,t.pure.address(me("0x0"))]})}},Cs=class{static async getExchangeRateForStake(e,t,n){const{vaults:i}=e.sdkOptions,{volo:o}=x(i);if(o===void 0)throw Error("the volo config is undefined");const{simulationAccount:s}=e.ClmmSDK.sdkOptions,{native_pool:r,vsui_metadata:a}=x(o);try{const c=new N;t?await this.requestStake(e,n||1e9,c):c.moveCall({target:`${o.published_at}::native_pool::get_ratio`,typeArguments:[],arguments:[c.object(r),c.object(a)]});const d=await e.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:c,sender:t?e.ClmmSDK.senderAddress:s.address});if(t){const _=d.events.find(I=>I.type.includes("StakedEvent")),{cert_amount:g,sui_amount:C}=_.parsedJson;return y(C).div(g).toString()}const l=d.results[0].returnValues[0][0];console.log({returnValues:l});const h=y(ie.u256().parse(Uint8Array.from(l))).div(1e18).toNumber();return y(1).div(h).toString()}catch(c){console.log("getExchangeRateForHaedal",c)}return"0"}static async requestStake(e,t,n){const{vaults:i}=e.sdkOptions,{volo:o}=x(i);if(o===void 0)throw Error("the volo config is undefined");n=n||new N;const{native_pool:s,vsui_metadata:r}=x(o),a=await Et.getSuiCoin(e,t,n);return n.moveCall({target:`${o.published_at}::native_pool::stake`,typeArguments:[],arguments:[n.object(s),n.object(r),n.object(me("0x5")),a]}),n}static requestStakeCoin(e,t,n){const{vaults:i}=e.sdkOptions,{volo:o}=x(i);if(o===void 0)throw Error("the volo config is undefined");t=t||new N;const{native_pool:s,vsui_metadata:r}=x(o);return t.moveCall({target:`${o.published_at}::native_pool::stake_non_entry`,typeArguments:[],arguments:[t.object(s),t.object(r),t.object(me("0x5")),n]})}},As=class{static async getExchangeRateForStake(e,t,n){const{vaults:i}=e.sdkOptions,{aftermath:o}=x(i);if(o===void 0)throw Error("the aftermath config is undefined");const{simulationAccount:s}=e.ClmmSDK.sdkOptions,{staked_sui_vault:r,safe:a}=x(o);try{const c=new N;t?await this.requestStake(e,n||1e9,c):c.moveCall({target:`${o.published_at}::staked_sui_vault::afsui_to_sui_exchange_rate`,typeArguments:[],arguments:[c.object(r),c.object(a)]});const d=await e.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:c,sender:t?e.ClmmSDK.senderAddress:s.address});if(t){const _=d.events.find(I=>I.type.includes("StakedEvent")),{afsui_amount:g,sui_amount:C}=_.parsedJson;return y(C).div(g).toString()}const l=d.results[0].returnValues[0][0];return y(ie.u128().parse(Uint8Array.from(l))).div(1e18).toString()}catch(c){console.log("getExchangeRateForHaedal",c)}return"0"}static async requestStake(e,t,n){const{vaults:i}=e.sdkOptions,{aftermath:o}=x(i);if(o===void 0)throw Error("the aftermath config is undefined");n=n||new N;const{staked_sui_vault:s,referral_vault:r,safe:a,validator_address:c}=x(o),d=await Et.getSuiCoin(e,t,n);return n.moveCall({target:`${o.published_at}::staked_sui_vault::request_stake_and_keep`,typeArguments:[],arguments:[n.object(s),n.object(a),n.object(me("0x5")),n.object(r),d,n.pure.address(me(c))]}),n}static requestStakeCoin(e,t,n){const{vaults:i}=e.sdkOptions,{aftermath:o}=x(i);if(o===void 0)throw Error("the aftermath config is undefined");t=t||new N;const{staked_sui_vault:s,referral_vault:r,safe:a,validator_address:c}=x(o);return t.moveCall({target:`${o.published_at}::staked_sui_vault::request_stake`,typeArguments:[],arguments:[t.object(s),t.object(a),t.object(me("0x5")),t.object(r),n,t.pure.address(me(c))]})}},L_=class{constructor(e){U(this,"_sdk");U(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e="all",t=!1){const{package_id:n}=this._sdk.sdkOptions.ido,i=`${n}_getPoolImmutables`,o=this.getCache(i,t),s={data:[],hasNextPage:!1},r=[];if(o!==void 0&&r.push(...o),r.length===0)try{const a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${n}::oversubscribe_pool::CreatePoolEvent`},e);a.data.forEach(c=>{const d=c.parsedJson;if(d){const l=mt.buildIdoPoolImmutables(d);r.push(l)}}),s.hasNextPage=a.hasNextPage,s.nextCursor=a.nextCursor,this.updateCache(i,r,z)}catch(a){console.log("getPoolImmutables",a)}return s.data=r,s}async getPools(e=[],t=!1){const n=[];let i=[];e.length>0?i=[...e]:(await this.getPoolImmutables("all",t)).data.forEach(r=>{i.push(r.pool_address)});const o=await this._sdk.ClmmSDK.fullClient.batchGetObjects(i,{showType:!0,showContent:!0});for(const s of o){const r=mt.buildIdoPool(s);await mt.calculatePoolUiPrice(this._sdk,r),n.push(r);const a=`${r.pool_address}_getPoolObject`;this.updateCache(a,r,z)}return n}async getPool(e,t=!0){const n=`${e}_getPoolObject`,i=this.getCache(n,t);if(i!==void 0)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),s=mt.buildIdoPool(o);return await mt.calculatePoolUiPrice(this._sdk,s),this.updateCache(n,s),s}async getIdoConfigs(e=!1){var c;const{package_id:t}=this._sdk.sdkOptions.ido,n=`${t}_getInitEvent`,i=this.getCache(n,e);if(i!==void 0)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),s=$i(o),r=(c=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({Transaction:s}))==null?void 0:c.data,a={pools_id:"",admin_cap_id:"",package_version_id:""};return r.length>0&&(r.forEach(d=>{console.log("item: ",d);const l=d.parsedJson;if(l)switch(D(d.type).full_address){case`${t}::config::InitConfigEvent`:a.admin_cap_id=l.admin_cap_id,a.package_version_id=l.package_version_id;break;case`${t}::factory::InitFactoryEvent`:a.pools_id=l.pools_id;break}}),this.updateCache(n,a,z)),a}async getPurchaseInfo(e,t,n=!0){const i=`${e}_${t}_getPurchaseInfo`,o=this.getCache(i,n);if(o)return o;try{const s=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"address",value:t}}),r=mt.buildPurchaseInfo(ee(s));return this.updateCache(i,r,qt),r}catch{return}}async getLockNFT(e,t=!1){const n=`${e}_getLockNFT`,i=this.getCache(n,t);if(i!==void 0)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}});if(!o.error)return ni(o)}async getLockNFTList(e){var o;const{clmm_pool:t}=this._sdk.ClmmSDK.sdkOptions,{ido:n}=this._sdk.sdkOptions,i=[];try{const s=(o=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{filter:{StructType:`${n.package_id}::lock::LockedNFT<${t.package_id}::position::Position>`},options:{showContent:!0}}))==null?void 0:o.data;for(const r of s){const a=ee(r);if(a){const c=a.nft.fields,d={locked_at:Number(a.locked_at),lock_duration:Number(a.lock_duration),lock_nft_id:a.id.id,type:a.nft.type,...c};d.end_lock_time=d.locked_at+d.lock_duration,d.coin_type_a=D(c.coin_type_a.fields.name).full_address,d.coin_type_b=D(c.coin_type_b.fields.name).full_address,d.id=c.id.id,d.tick_lower_index=pt(BigInt(c.tick_lower_index.fields.bits)),d.tick_upper_index=pt(BigInt(c.tick_upper_index.fields.bits)),i.push(d)}}return i}catch(s){return console.log("getLockNFTList:",s),[]}}async creatPool(e){const{ido:t}=this.sdk.sdkOptions;Xs(ae(e.coin_type_sale),ae(e.coin_type_raise))&&(e.price_min=y(1).div(e.price_max).toNumber(),e.price_max=y(1).div(e.price_min).toNumber());const i=Tt.priceRealToFix(Number(e.price),e.sale_decimals,e.raise_decimals),o=G.priceToSqrtPriceX64(y(e.price_min),e.sale_decimals,e.raise_decimals).toString(),s=G.priceToSqrtPriceX64(y(e.price_max),e.sale_decimals,e.raise_decimals).toString(),r=new N,a=y(e.total_supply).add(y(e.total_supply).mul(y(e.liquidity_injection_ratio))).toNumber(),c=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,e.coin_type_sale),d=X.buildCoinForAmount(r,c,BigInt(a),e.coin_type_sale,!1),l=[r.object(x(t).admin_cap_id),r.object(x(t).package_version_id),r.object(x(t).pools_id),r.object(ae(e.owner)),r.pure.u128(y(i).mul(Xn).toString()),r.pure.u64(e.total_supply),r.pure.u64(e.complete_raise_limit),r.pure.u64(e.min_purchase_amount),r.pure.u64(e.max_purchase_amount),r.pure.u64(e.start_time),r.pure.u64(e.purchase_duration),r.pure.u64(e.lock_up_duration),r.pure.u64((e.liquidity_injection_ratio*Ad).toString()),r.pure.u128(o),r.pure.u128(s),r.pure.u32(e.tick_spacing),d.targetCoin,r.pure.u64(e.protection_hard_cap.toString()),r.object($)],h=[e.coin_type_sale,e.coin_type_raise];return r.moveCall({target:`${t.published_at}::${D_}::create_oversubscribe_pool`,typeArguments:h,arguments:l}),r}async creatPurchasePayload(e){const{ido:t}=this.sdk.sdkOptions,n=new N,i=await this.getPurchaseInfo(e.purchase_handle,this._sdk.ClmmSDK.senderAddress,!1),o=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,e.coin_type_raise),s=X.buildCoinForAmount(n,o,BigInt(e.raise_amount),e.coin_type_raise,!1),r=[e.coin_type_sale,e.coin_type_raise];let a,c;return i?(c="purchase",a=[n.object(x(t).package_version_id),n.object(e.pool_address),n.object(i.purchase_certificate_id),n.pure.u64(e.raise_amount.toString()),s.targetCoin,n.object($)]):(c="create_certificate_and_purchase",a=[n.object(x(t).package_version_id),n.object(e.pool_address),n.pure.u64(e.raise_amount.toString()),s.targetCoin,n.object($)]),n.moveCall({target:`${t.published_at}::${$t}::${c}`,typeArguments:r,arguments:a}),n}async redeemPayload(e){const{ido:t}=this.sdk.sdkOptions,n=await this.getPurchaseInfo(e.purchase_handle,this._sdk.ClmmSDK.senderAddress,!1);if(n===void 0)throw Error("get purchase certificate fail");const i=new N,o=[e.coin_type_sale,e.coin_type_raise],s=[i.object(x(t).package_version_id),i.object(e.pool_address),i.object(n.purchase_certificate_id),i.object($)];return i.moveCall({target:`${t.published_at}::${$t}::redeem`,typeArguments:o,arguments:s}),i}injectLiquidityPayload(e){const{ido:t}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions,i=new N,o=[e.coin_type_sale,e.coin_type_raise],s=e.is_reverse?"inject_liquidity_with_reverse_clmm_pool":"inject_liquidity_with_forward_clmm_pool",r=[i.object(x(t).package_version_id),i.object(e.pool_address),i.object(x(n).global_config_id),i.object(e.clmm_pool_address),i.object($)];return i.moveCall({target:`${t.published_at}::${$t}::${s}`,typeArguments:o,arguments:r}),i}unPauseInjectLiquidity(e){const{ido:t}=this.sdk.sdkOptions,{integrate:n,clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions,o=new N;o.moveCall({target:`${n.published_at}::${Ci}::unpause_pool`,typeArguments:[e.coin_type_a,e.coin_type_b],arguments:[o.object(x(i).global_config_id),o.object(e.clmm_pool_address)]});const s=[e.coin_type_sale,e.coin_type_raise],r=e.is_reverse?"inject_liquidity_with_reverse_clmm_pool":"inject_liquidity_with_forward_clmm_pool",a=[o.object(x(t).package_version_id),o.object(e.pool_address),o.object(x(i).global_config_id),o.object(e.clmm_pool_address),o.object($)];return o.moveCall({target:`${t.published_at}::${$t}::${r}`,typeArguments:s,arguments:a}),o}async findClmmPoolForLiquidity(e){let t=null,n=!1;const i=await this.sdk.ClmmSDK.Pool.getPoolImmutables();for(const o of i){if(o.coinTypeA===e.coin_type_sale&&o.coinTypeB===e.coin_type_raise&&Number(o.tickSpacing)===e.tick_spacing){t=await this._sdk.ClmmSDK.Pool.getPool(o.poolAddress);break}if(o.coinTypeA===e.coin_type_raise&&o.coinTypeB===e.coin_type_sale&&Number(o.tickSpacing)===e.tick_spacing){t=await this._sdk.ClmmSDK.Pool.getPool(o.poolAddress),n=!0;break}}return t&&(y(t.current_sqrt_price).lessThanOrEqualTo(e.current_sqrt_price_min)||y(t.current_sqrt_price).greaterThanOrEqualTo(e.current_sqrt_price_max))?(console.log("clmmPool: ",t.poolAddress),{is_reverse:n,clmmPool:null}):{is_reverse:n,clmmPool:t}}withdrawPayload(e){const{ido:t}=this.sdk.sdkOptions,n=new N,i=[e.coin_type_sale,e.coin_type_raise],o=[n.object(x(t).package_version_id),n.object(e.pool_address),n.object($)];return n.moveCall({target:`${t.published_at}::${$t}::withdraw`,typeArguments:i,arguments:o}),n}updateWhitelistCapPayload(e){const{ido:t}=this.sdk.sdkOptions,n=new N,i=[e.coin_type_sale,e.coin_type_raise];return e.add_whites&&e.add_whites.addresses.length>0&&n.moveCall({target:`${t.published_at}::${$t}::add_white_listed_addresses`,typeArguments:i,arguments:[n.object(x(t).admin_cap_id),n.object(x(t).package_version_id),n.object(e.pool_address),n.makeMoveVec({type:"address",elements:e.add_whites.addresses.map(o=>n.pure.address(me(o)))}),n.pure.u64(e.add_whites.protection_limit),n.object($)]}),e.remove_whites&&e.remove_whites.length>0&&n.moveCall({target:`${t.published_at}::${$t}::remove_white_listed_addresses`,typeArguments:i,arguments:[n.object(x(t).admin_cap_id),n.object(x(t).package_version_id),n.object(e.pool_address),n.makeMoveVec({type:"address",elements:e.remove_whites.map(o=>n.pure.address(me(o)))}),n.object($)]}),e.update_whites&&e.update_whites.forEach(o=>{n.moveCall({target:`${t.published_at}::${$t}::update_white_listed_address`,typeArguments:i,arguments:[n.object(x(t).admin_cap_id),n.object(x(t).package_version_id),n.object(e.pool_address),n.object(o.address),n.pure.u64(o.protection_limit),n.object($)]})}),n}creatCancelPoolPayload(e){const{ido:t}=this.sdk.sdkOptions,n=new N,i=[e.coin_type_sale,e.coin_type_raise],o=[n.object(x(t).admin_cap_id),n.object(x(t).package_version_id),n.object(e.pool_address),n.object($)];return n.moveCall({target:`${t.published_at}::${$t}::cancel`,typeArguments:i,arguments:o}),n}updatePoolOwnerPayload(e,t){const{ido:n}=this.sdk.sdkOptions;t=t===void 0?new N:t;const i=[e.coin_type_sale,e.coin_type_raise],o=[t.object(x(n).admin_cap_id),t.object(x(n).package_version_id),t.object(e.pool_address),t.object(e.new_owner),t.object($)];return t.moveCall({target:`${n.published_at}::${$t}::update_pool_owner`,typeArguments:i,arguments:o}),t}updatePoolDuractionPayload(e,t){const{ido:n}=this.sdk.sdkOptions;t=t===void 0?new N:t;const i=[e.coin_type_sale,e.coin_type_raise],o=[t.object(x(n).admin_cap_id),t.object(x(n).package_version_id),t.object(e.pool_address),t.pure.u64(e.start_time),t.pure.u64(e.purchase_duration),t.pure.u64(e.lock_duration),t.object($)];return t.moveCall({target:`${n.published_at}::${$t}::update_pool_duration`,typeArguments:i,arguments:o}),t}updateProtectionHardCapPayload(e,t){const{ido:n}=this.sdk.sdkOptions;t=t===void 0?new N:t;const i=[e.coin_type_sale,e.coin_type_raise],o=[t.object(x(n).admin_cap_id),t.object(x(n).package_version_id),t.object(e.pool_address),t.pure.u64(e.protection_hard_cap),t.object($)];return t.moveCall({target:`${n.published_at}::${$t}::update_protection_hard_cap`,typeArguments:i,arguments:o}),t}unlockNftPayload(e){const{ido:t}=this.sdk.sdkOptions,n=new N,i=[e.nft_type],o=[n.object(e.lock_nft_id),n.object($)];return n.moveCall({target:`${t.published_at}::lock::unlock_nft`,typeArguments:i,arguments:o}),n}async isAdminCap(e){const{ido:t}=this._sdk.sdkOptions,n=`${t.package_id}_${e}_isAdminCap`,i=this.getCache(n);if(i)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:x(t).admin_cap_id,options:{showType:!0,showOwner:!0}});console.log(o);const s=Ln(o),r=yo(o);let a=!1;return r&&s&&D(s).source_address===`${t.package_id}::config::AdminCap`&&(a=ae(r.AddressOwner)===ae(e)),this.updateCache(n,a,z),a}async getWhiteProtectionLimit(e,t,n=!0){const i=`${e}_${t}_getWhiteProtectionLimit`,o=this._sdk.getCache(i,n);if(o)return o;try{const s=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"address",value:t}});if(s&&s.data){const r=ee(s);return this._sdk.updateCache(i,r.value),r.value}return}catch{return}}async getWhiteList(e,t){var i;const n={type:"address",value:t};try{const o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:n}),s=ee(o);if(console.log(s),s)return(i=s==null?void 0:s.value)==null?void 0:i.fields}catch{}return{safe_limit_amount:"0",safe_purchased_amount:"0"}}async getAdminAddress(){const{ido:e}=this._sdk.sdkOptions,t=`${x(e).admin_cap_id}_getAdminAddress`,n=this.getCache(t);if(n)return n;const i=await this._sdk.ClmmSDK.fullClient.getObject({id:x(e).admin_cap_id,options:{showType:!0,showOwner:!0}});console.log(i);const o=Ln(i),s=yo(i);if(s&&o&&D(o).source_address===`${e.package_id}::config::AdminCap`){const a=ae(s.AddressOwner);return this.updateCache(t,a,z),a}return""}updateCache(e,t,n=z){let i=this._cache[e];i?(i.overdueTime=ge(n),i.value=t):i=new Ot(t,ge(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e];if(!t&&(n!=null&&n.isValid()))return n.value;delete this._cache[e]}},U_=class{constructor(e){U(this,"_sdk");U(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getOwnerVeNFT(e,t=!0){const{xtoken:n}=this.sdk.sdkOptions,i=`${e}_getLockUpManagerEvent`,o=this.getCache(i,t);if(o!==void 0)return o;let s;const r=`${n.package_id}::xtoken::VeNFT`;return(await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:!0},filter:{StructType:r}})).data.forEach(c=>{const d=D(Yt(c)).source_address;if(d===r&&c.data&&c.data.content){const{fields:l}=c.data.content;s={...Ro(c),id:l.id.id,index:l.index,type:d,xtoken_balance:l.xtoken_balance},this.updateCache(i,s,z)}}),s}async getOwnerLockTokens(e){const{xtoken:t}=this.sdk.sdkOptions,n=[],i=`${t.package_id}::lock_coin::LockedCoin<${this.buileTokenCoinType()}>`,o=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0},filter:{StructType:i}});for(const s of o.data)if(D(Yt(s)).source_address===i&&s.data){const a=Bn.buildLockToken(s.data.content),c=await this.getLockXToken(a.id);c&&(a.xtoken_amount=c.xtoken_amount),n.push(a)}return n}async getLockToken(e){var n;const t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});if((n=t.data)!=null&&n.content){const i=Bn.buildLockToken(t.data.content),o=await this.getLockXToken(i.id);return o&&(i.xtoken_amount=o.xtoken_amount),i}}async getOwnerTokenCoins(e){return await this._sdk.ClmmSDK.getOwnerCoinAssets(e,this.buileTokenCoinType())}mintVeNFTPayload(){const{xtoken:e}=this.sdk.sdkOptions,t=new N;return t.moveCall({target:`${e.published_at}::${Gn}::mint_venft`,typeArguments:[],arguments:[t.object(x(e).xtoken_manager_id)]}),t}async convertPayload(e){const{xtoken:t}=this.sdk.sdkOptions,n=new N,i=this.buileTokenCoinType(),o=await X.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,n,BigInt(e.amount),i);return e.venft_id===void 0?n.moveCall({target:`${t.published_at}::${Gn}::mint_and_convert`,typeArguments:[],arguments:[n.object(x(t).lock_manager_id),n.object(x(t).xtoken_manager_id),o,n.pure.u64(e.amount)]}):n.moveCall({target:`${t.published_at}::${Gn}::convert`,typeArguments:[],arguments:[n.object(x(t).lock_manager_id),n.object(x(t).xtoken_manager_id),o,n.pure.u64(e.amount),n.object(e.venft_id)]}),n}redeemLockPayload(e){const{xtoken:t}=this.sdk.sdkOptions,n=new N;return n.moveCall({target:`${t.published_at}::${Gn}::redeem_lock`,typeArguments:[],arguments:[n.object(x(t).lock_manager_id),n.object(x(t).xtoken_manager_id),n.object(e.venft_id),n.pure.u64(e.amount),n.pure.u64(e.lock_day),n.object($)]}),n}redeemPayload(e){const{xtoken:t}=this.sdk.sdkOptions,n=new N;return n.moveCall({target:`${t.published_at}::${Gn}::redeem`,typeArguments:[],arguments:[n.object(x(t).lock_manager_id),n.object(x(t).xtoken_manager_id),n.object(e.venft_id),n.object(e.lock_id),n.object($)]}),n}redeemDividendPayload(e,t){const{xtoken_dividends:n}=this.sdk.sdkOptions,i=new N;return t.forEach(o=>{i.moveCall({target:`${n.published_at}::${vs}::redeem`,typeArguments:[o],arguments:[i.object(x(n).dividend_manager_id),i.object(e)]})}),i}redeemDividendV2Payload(e,t,n){const{xtoken_dividends:i}=this.sdk.sdkOptions;let o=new N;return t.filter(r=>n.includes(r)).length>0&&(o=this.redeemDividendXTokenPayload(e,o)),t.forEach(r=>{n.includes(r)||o.moveCall({target:`${i.published_at}::${vs}::redeem_v2`,typeArguments:[r],arguments:[o.object(x(i).dividend_manager_id),o.object(e),o.object($)]})}),o}redeemDividendXTokenPayload(e,t){const{xtoken_dividends:n,xtoken:i}=this.sdk.sdkOptions,{xtoken_manager_id:o,lock_manager_id:s}=x(i),{dividend_manager_id:r}=x(n);return t=t===void 0?new N:t,t.moveCall({target:`${n.published_at}::${vs}::redeem_xtoken`,typeArguments:[],arguments:[t.object(s),t.object(o),t.object(r),t.object(e),t.object($)]}),t}buileTokenCoinType(){return`${this.sdk.sdkOptions.token_faucet.package_id}::token::TOKEN`}buileXTokenCoinType(e=this._sdk.sdkOptions.xtoken.package_id,t="xtoken",n="XTOKEN"){return`${e}::${t}::${n}`}cancelRedeemPayload(e){const{xtoken:t}=this.sdk.sdkOptions,n=new N;return n.moveCall({target:`${t.published_at}::${Gn}::cancel_redeem_lock`,typeArguments:[],arguments:[n.object(x(t).lock_manager_id),n.object(x(t).xtoken_manager_id),n.object(e.venft_id),n.object(e.lock_id),n.object($)]}),n}async getInitConfigs(){var r,a;const{package_id:e}=this.sdk.sdkOptions.xtoken,t=`${e}_getInitFactoryEvent`,n=this.getCache(t);if(n!==void 0)return n;const i=(r=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::xtoken::InitEvent`}))==null?void 0:r.data,o={xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""};i.length>0&&i.forEach(c=>{const d=c.parsedJson;d&&(o.xtoken_manager_id=d.xtoken_manager)});const s=(a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::locking::InitializeEvent`}))==null?void 0:a.data;return s.length>0&&s.forEach(c=>{const d=c.parsedJson;d&&(o.lock_manager_id=d.lock_manager)}),o.lock_handle_id=(await this.getLockUpManager(o.lock_manager_id)).lock_infos.lock_handle_id,this.updateCache(t,o,z),o}async getLockUpManager(e=x(this.sdk.sdkOptions.xtoken).lock_manager_id,t=!1){const n=`${e}_getLockUpManagerEvent`,i=this.getCache(n,t);if(i!==void 0)return i;const o=await this.sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),s=Bn.buildLockUpManager(ee(o));return this.updateCache(n,s,z),s}async getLockInfoHandle(e){const t=`${e}_getLockInfoHandle`,n=this.getCache(t);if(n!==void 0)return n;let i="";const o=await this.sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),s=ee(o);return s&&(i=s.lock_infos.fields.id.id,this.updateCache(t,i,z)),i}async getDividendConfigs(){var s;const{package_id:e}=this.sdk.sdkOptions.xtoken_dividends,t=`${e}_getDividendManagerEvent`,n=this.getCache(t);if(n!==void 0)return n;const i=(s=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::dividend::InitEvent`}))==null?void 0:s.data,o={dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""};return i.length>0&&i.forEach(r=>{const a=r.parsedJson;a&&(o.dividend_manager_id=a.manager_id,o.dividend_admin_id=a.admin_id,o.dividend_settle_id=a.settle_id,this.updateCache(t,o,z))}),o}async getDividendManager(e=!1){const{dividend_manager_id:t}=x(this.sdk.sdkOptions.xtoken_dividends),n=`${t}_getDividendManager`,i=this.getCache(n,e);if(i!==void 0)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),s=ee(o),r=Bn.buildDividendManager(s);return this.updateCache(n,r,z),r}async getXcetusManager(e=!0){const{xtoken_manager_id:t}=x(this.sdk.sdkOptions.xtoken),n=`${t}_getXcetusManager`,i=this.getCache(n,e);if(i)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),s=ee(o),r={id:s.id.id,index:Number(s.index),has_venft:{handle:s.has_venft.fields.id.id,size:s.has_venft.fields.size},nfts:{handle:s.nfts.fields.id.id,size:s.nfts.fields.size},total_locked:s.total_locked,treasury:s.treasury.fields.total_supply.fields.value};return this.updateCache(n,r),r}async getVeNFTDividendInfo(e,t){try{const n=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),i=ee(n);return Bn.buildVeNFTDividendInfo(i)}catch{return}}async redeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};const n=await this.getLockUpManager(),i=y(Ut).mul(y(n.max_lock_day).sub(y(t))).mul(y(n.max_percent_numerator).sub(y(n.min_percent_numerator))).div(y(n.max_lock_day).sub(y(n.min_lock_day))),o=y(Ut).mul(y(n.max_percent_numerator)).sub(i).div(y(vo)).div(Ut);return{amountOut:y(o).mul(y(e)).round().toString(),percent:o.toString()}}async reverseRedeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};const n=await this.getLockUpManager(),i=y(Ut).mul(y(n.max_lock_day).sub(y(t))).mul(y(n.max_percent_numerator).sub(y(n.min_percent_numerator))).div(y(n.max_lock_day).sub(y(n.min_lock_day))),o=y(Ut).mul(y(n.max_percent_numerator)).sub(i).div(y(vo)).div(Ut);return{amountOut:y(e).div(o).toFixed(0,V.ROUND_UP),percent:o.toString()}}async getLockXToken(e){const{lock_handle_id:t}=x(this._sdk.sdkOptions.xtoken),n=`${e}_getXTokenAmount`,i=this.getCache(n);if(i)return i;try{const o=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x2::object::ID",value:e}}),s=ee(o);if(s){const r=s.value.fields.value.fields;return this.updateCache(n,r,z),r}}catch{}}async getVeNftAmount(e,t){try{const n=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),i=ee(n);if(i){const{lock_amount:o,xtoken_amount:s}=i.value.fields.value.fields;return{lock_amount:o,xtoken_amount:s}}}catch{}return{lock_amount:"0",xtoken_amount:"0"}}async getPhaseDividendInfo(e,t=!1){const i=(await this.getDividendManager()).dividends.id,o=`${i}_${e}_getPhaseDividendInfo`,s=this._sdk.getCache(o,t);if(s)return s;try{const r=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:i,name:{type:"u64",value:e}}),a=ee(r),c=a.value.fields.value.fields,d=c.redeemed_num.fields.contents.map(g=>({name:g.fields.key.fields.name,value:g.fields.value})),l=c.bonus_types.map(g=>g.fields.name),h=c.bonus.fields.contents.map(g=>({name:g.fields.key.fields.name,value:g.fields.value})),_={id:Zt(r),phase:a.name,settled_num:c.settled_num,register_time:c.register_time,redeemed_num:d,is_settled:c.is_settled,bonus_types:l,bonus:h,phase_end_time:""};return this.updateCache(o,_),_}catch{}}updateCache(e,t,n=qt){let i=this._cache[e];i?(i.overdueTime=ge(n),i.value=t):i=new Ot(t,ge(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e];if(!t&&(n!=null&&n.isValid()))return n.value;delete this._cache[e]}},K_=class{constructor(e){U(this,"_sdk");U(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async addMasterLiquidity(e){var I,O;const{liquidity_stratefy:t}=this._sdk.sdkOptions,{clmm_pool:n}=this._sdk.ClmmSDK.sdkOptions,i=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);let o=y(0),s=y(0);const r=[],a=[],c=[],d=[],l=[];e.liquidity_bins.forEach((M,j)=>{const B=e.amounts_a[j],q=e.amounts_b[j],Z=e.bins_fix_amount_a[j];o=o.add(B),s=s.add(q),r.push(B),a.push(q),c.push(Ct(BigInt(M.tick_lower)).toString()),d.push(Ct(BigInt(M.tick_upper)).toString()),l.push(Z)});const h=[e.coinTypeA,e.coinTypeB],_=new N,g=(I=X.buildAddLiquidityFixTokenCoinInput(_,!e.fix_amount_a,o.toString(),e.slippage,e.coinTypeA,i,!1))==null?void 0:I.targetCoin,C=(O=X.buildAddLiquidityFixTokenCoinInput(_,e.fix_amount_a,s.toString(),e.slippage,e.coinTypeB,i,!1))==null?void 0:O.targetCoin;return N_(e)?_.moveCall({target:`${t.published_at}::router::increase_liquidity`,typeArguments:h,arguments:[_.object(x(t).master_manger_id),_.object(e.master_address),_.object(x(n).global_config_id),_.object(e.pool_address),g,C,_.makeMoveVec({elements:r.map(M=>_.pure.u64(M))}),_.makeMoveVec({elements:a.map(M=>_.pure.u64(M))}),_.makeMoveVec({elements:l.map(M=>_.pure.bool(M))}),_.object($)]}):_.moveCall({target:`${t.published_at}::router::create_master_liquidity`,typeArguments:h,arguments:[_.object(x(t).master_manger_id),_.object(x(n).global_config_id),_.object(e.pool_address),g,C,_.makeMoveVec({elements:c.map(M=>_.pure.u32(Number(M)))}),_.makeMoveVec({elements:d.map(M=>_.pure.u32(Number(M)))}),_.makeMoveVec({elements:r.map(M=>_.pure.u64(M))}),_.makeMoveVec({elements:a.map(M=>_.pure.u64(M))}),_.makeMoveVec({elements:l.map(M=>_.pure.bool(M))}),_.pure.u8(e.strategy),_.pure.u32(Number(Ct(BigInt(e.tick_lower)).toString())),_.pure.u32(Number(Ct(BigInt(e.tick_upper)).toString())),_.object($)]}),_}buildMasterNFTType(){return`${this._sdk.sdkOptions.liquidity_stratefy.package_id}::master_liquidity::MasterLiquidity`}async getMasterNFTList(e,t=[]){const n=[],i=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0},filter:{Package:this._sdk.sdkOptions.liquidity_stratefy.package_id}}),o=t.length>0;for(const s of i.data)if(D(s.data.type).full_address===this.buildMasterNFTType()){const a=pn.buildMasterNFT(s);if(a){const c=`${a.id}_masterNFT`;this.updateCache(c,a,z),o?t.includes(a.pool_id)&&n.push(a):n.push(a)}}return n}async getMasterNFT(e,t=!1){const n="$masterId}_masterNFT",i=this.getCache(n,t);if(i)return i;try{const o=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}});if(D(o.data.type).full_address===this.buildMasterNFTType()){const r=pn.buildMasterNFT(o);return r&&this.updateCache(n,r,z),r}}catch(o){console.log(o)}}async fetchMasterPositionInfos(e){var a;const t={},{clmm_pool:n,integrate:i,simulationAccount:o}=this.sdk.ClmmSDK.sdkOptions,s=new N;return e.forEach(c=>{c.position_ids.forEach(d=>{const l=[c.coinTypeA,c.coinTypeB],h=[s.object(x(n).global_config_id),s.object(c.pool_id),s.object(d)];s.moveCall({target:`${i.published_at}::${Kt}::fetch_position_fees`,arguments:h,typeArguments:l}),s.moveCall({target:`${i.published_at}::${Kt}::fetch_position_rewards`,arguments:[...h,s.object($)],typeArguments:l})})}),(a=(await this.sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:s,sender:o.address})).events)==null||a.forEach(c=>{const{parsedJson:d}=c,{position_id:l}=d;let h=t[l];switch(h===void 0&&(h={position_id:l,feeOwedA:"0",feeOwedB:"0",rewarders:[]},t[l]=h),D(c.type).name){case"FetchPositionFeesEvent":h.feeOwedA=d.fee_owned_a,h.feeOwedB=d.fee_owned_b;break;case"FetchPositionRewardsEvent":h.rewarders=d.data;break}}),t}async getLiquidityStrategyConfigs(e=!1){const{package_id:t}=this._sdk.sdkOptions.liquidity_stratefy,n=`${t}_getLiquidityStrategyConfigst`,i=this.getCache(n,e);if(i!==void 0)return i;const o=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::master_liquidity::MasterLiquidityManagerCreatedEvent`})).data,s={master_manger_id:"",master_liquidity_handle:""};if(o.length>0){for(const r of o){const a=r.parsedJson;s.master_manger_id=a.id;const c=await this._sdk.ClmmSDK.fullClient.getObject({id:a.id,options:{showContent:!0}}),d=ee(c);s.master_liquidity_handle=d.position_maps.fields.id.id;break}this.updateCache(n,s,z)}return s}removeMasterLiquidity(e){const{clmm_pool:t}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:n}=this.sdk.sdkOptions,i=new N,o=[e.coinTypeA,e.coinTypeB];this.collectReward({coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collect_fee:!1,rewarder_coin_types:e.rewarder_coin_types,master_address:e.master_address,pool_address:e.pool_address},i);const s=[i.object(x(n).master_manger_id),i.object(e.pool_address),i.object(e.master_address),i.object(x(t).global_config_id),i.makeMoveVec({elements:e.delta_liquidities.map(r=>i.pure.u128(r))}),i.makeMoveVec({elements:e.min_amounts_a.map(r=>i.pure.u64(r))}),i.makeMoveVec({elements:e.min_amounts_a.map(r=>i.pure.u64(r))}),i.object($)];return i.moveCall({target:`${n.published_at}::${Hi}::remove_liquidity`,typeArguments:o,arguments:s}),i}closeMasterLiquidity(e){const{clmm_pool:t}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:n}=this.sdk.sdkOptions,i=new N,o=[e.coinTypeA,e.coinTypeB];return this.collectReward({coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collect_fee:!1,rewarder_coin_types:e.rewarder_coin_types,master_address:e.master_address,pool_address:e.pool_address},i),i.moveCall({target:`${n.published_at}::${Hi}::close_master_liquidity`,typeArguments:o,arguments:[i.object(x(n).master_manger_id),i.object(e.master_address),i.object(x(t).global_config_id),i.object(e.pool_address),i.makeMoveVec({elements:e.min_amounts_a.map(s=>i.pure.u64(s))}),i.makeMoveVec({elements:e.min_amounts_a.map(s=>i.pure.u64(s))}),i.object($)]}),i}collectFee(e,t){const{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:i}=this.sdk.sdkOptions;t=t===void 0?new N:t;const o=[e.coinTypeA,e.coinTypeB],s=[t.object(x(i).master_manger_id),t.object(e.master_address),t.object(x(n).global_config_id),t.object(e.pool_address)];return t.moveCall({target:`${i.published_at}::${Hi}::collect_fee`,typeArguments:o,arguments:s}),t}collectReward(e,t){const{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:i}=this.sdk.sdkOptions;return t=t===void 0?new N:t,e.collect_fee&&this.collectFee({...e},t),e.rewarder_coin_types.forEach(o=>{const s=[e.coinTypeA,e.coinTypeB,o];if(t){const r=[t.object(x(i).master_manger_id),t.object(e.master_address),t.object(x(n).global_config_id),t.object(e.pool_address),t.object(x(n).global_vault_id),t.object($)];t.moveCall({target:`${i.published_at}::${Hi}::collect_reward`,typeArguments:s,arguments:r})}}),t}updateCache(e,t,n=qt){let i=this._cache[e];i?(i.overdueTime=ge(n),i.value=t):i=new Ot(t,ge(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e],i=n==null?void 0:n.isValid();if(!t&&i)return n.value;i||delete this._cache[e]}},V_=class{constructor(e){U(this,"_sdk");U(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}buildCoinInput(e,t,n,i,o){const{selectedCoins:s,remainingCoins:r}=he.selectCoinAssetGreaterThanOrEqual(t,BigInt(i)),a=he.calculateTotalBalance(s);if(a<BigInt(i))throw new Error(`The amount(${a}) is Insufficient balance for ${n} , expect ${i} `);const c=a-BigInt(i);let d;if(he.isSuiCoin(n))d=e.splitCoins(e.gas,[e.pure.u64(i)]);else{const[l,...h]=s.map(_=>_.coinObjectId);d=e.object(l),h.length>0?o?e.mergeCoins(d,[...h.map(_=>e.object(_)),o]):e.mergeCoins(d,[...h.map(_=>e.object(_))]):o&&e.mergeCoins(d,[o])}return{selectedUnusedAmount:c,coinInput:d,remainingCoins:r}}async deposit(e){var h,_;console.log("1110 deposit 参数: ",{params:e});const{vaults:t,frams:n}=this._sdk.sdkOptions,{clmm_pool:i}=this._sdk.ClmmSDK.sdkOptions,o=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.getVerifySenderAddress()),s=new N;let r,a;if(e.swapParams){const g=await this.handleDepositSwap(e,s,o);r=g.primaryCoinAInputs,a=g.primaryCoinBInputs}else r=(h=X.buildAddLiquidityFixTokenCoinInput(s,!e.fix_amount_a,e.amount_a,e.slippage,e.coinTypeA,o,!1))==null?void 0:h.targetCoin,a=(_=X.buildAddLiquidityFixTokenCoinInput(s,e.fix_amount_a,e.amount_b,e.slippage,e.coinTypeB,o,!1))==null?void 0:_.targetCoin;const c=x(t),d=x(n),l=x(i);return s.moveCall({target:`${t.published_at}::${q_}::deposit`,typeArguments:[e.coinTypeA,e.coinTypeB,e.lp_token_type],arguments:[s.object(c.vaults_manager_id),s.object(e.vault_id),s.object(d.rewarder_manager_id),s.object(d.global_config_id),s.object(e.farming_pool),s.object(l.global_config_id),s.object(e.clmm_pool),r,a,s.pure.u64(e.amount_a),s.pure.u64(e.amount_b),s.pure.bool(e.fix_amount_a),s.object($)]}),s}async handleDepositSwap(e,t,n){const{clmm_pool:i,integrate:o}=this._sdk.ClmmSDK.sdkOptions,{swap_amount:s,a2b:r,route_obj:a,stakeProtocol:c}=e.swapParams,d=r?e.coinTypeA:e.coinTypeB,l=X.buildCoinForAmount(t,n,BigInt(s),d,!1),h=BigInt(l.tragetCoinAmount)-BigInt(s);let _=[];if(c){const M=this.requestStakeCoin(c,t,l.targetCoin),j=X.buildCoinForAmount(t,l.remainCoins,BigInt(0),d,!1).targetCoin;_=r?[j,M]:[M,j]}else if(a){const M=X.buildCoinForAmount(t,n,0n,r?e.coinTypeB:e.coinTypeA,!1),j=await X.buildAggregatorSwapReturnCoins(this._sdk.ClmmSDK,a,l,M,"",e.slippage,t);_=r?[j.fromCoin,j.toCoin]:[j.toCoin,j.fromCoin],console.log("swapCoinInputTo.isMintZeroCoin: ",M),!M.isMintZeroCoin&&M.originalSplitedCoin===void 0&&t.transferObjects([M.targetCoin],t.pure.address(this._sdk.getVerifySenderAddress()))}else{const M=X.buildCoinForAmount(t,n,0n,r?e.coinTypeB:e.coinTypeA,!1),j=on.getDefaultSqrtPriceLimit(r).toString();_=t.moveCall({target:`${o.published_at}::${Nn}::swap`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(x(i).global_config_id),t.object(e.clmm_pool),r?l.targetCoin:M.targetCoin,r?M.targetCoin:l.targetCoin,t.pure.bool(r),t.pure.bool(!0),t.pure.u64(s),t.pure.u128(j),t.pure.bool(!1),t.object($)]})}let g,C;const I=_[0],O=_[1];if(r){const M=BigInt(e.amount_a)-h;he.isSuiCoin(d)?(t.transferObjects([I],t.pure.address(this._sdk.getVerifySenderAddress())),g=t.splitCoins(t.gas,[t.pure.u64(e.amount_a)])):M>0n?g=this.buildCoinInput(t,l.remainCoins,d,M,I).coinInput:g=I,C=O}else{g=I;const M=BigInt(e.amount_b)-h;he.isSuiCoin(d)?(t.transferObjects([O],t.pure.address(this._sdk.getVerifySenderAddress())),C=t.splitCoins(t.gas,[t.pure.u64(e.amount_b)])):M>0n?C=this.buildCoinInput(t,l.remainCoins,d,M,O).coinInput:C=O}return{primaryCoinAInputs:g,primaryCoinBInputs:C}}async remove(e){console.log({params:e});const{vaults:t,frams:n}=this.sdk.sdkOptions,{clmm_pool:i,integrate:o}=this._sdk.ClmmSDK.sdkOptions,s=new N,r=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.getVerifySenderAddress(),e.lp_token_type),a=X.buildCoinForAmount(s,r,BigInt(e.lp_token_amount),e.lp_token_type,!1).targetCoin,c=x(t),d=x(n),l=x(i),h=[e.coinTypeA,e.coinTypeB,e.lp_token_type],_=s.moveCall({target:`${t.published_at}::${$_}::remove`,typeArguments:h,arguments:[s.object(c.vaults_manager_id),s.object(e.vault_id),s.object(d.rewarder_manager_id),s.object(d.global_config_id),s.object(e.farming_pool),s.object(l.global_config_id),s.object(e.clmm_pool),a,s.pure.u64(e.lp_token_amount),s.pure.u64(e.min_amount_a),s.pure.u64(e.min_amount_b),s.object($)]}),g=_[0],C=_[1];if(e.swapParams){const{a2b:I,swap_amount:O,route_obj:M}=e.swapParams;if(M){const j={targetCoin:I?g:C,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:""},B={targetCoin:I?C:g,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:""},q=await X.buildAggregatorSwapReturnCoins(this._sdk.ClmmSDK,M,j,B,"",e.slippage,s),Z=I?[q.fromCoin,q.toCoin]:[q.toCoin,q.fromCoin];I?s.mergeCoins(Z[1],[C]):s.mergeCoins(Z[0],[g]),s.transferObjects([...Z],s.pure.address(this._sdk.getVerifySenderAddress()))}else{const j=on.getDefaultSqrtPriceLimit(I).toString(),B=s.moveCall({target:`${o.published_at}::${Nn}::swap`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[s.object(x(i).global_config_id),s.object(e.clmm_pool),g,C,s.pure.bool(I),s.pure.bool(!0),s.pure.u64(O),s.pure.u128(j),s.pure.bool(!0),s.object($)]});s.transferObjects([B[0],B[1]],s.pure.address(this._sdk.getVerifySenderAddress()))}}else s.transferObjects([g,C],s.pure.address(this._sdk.getVerifySenderAddress()));return s}async getVaultList(e="all"){const{vaults:t}=this._sdk.sdkOptions,n=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t.package_id}::vaults::CreateEvent`},e),i=n.data.map(r=>r.parsedJson.id),o=await this._sdk.ClmmSDK.fullClient.batchGetObjects(i,{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}),s=[];return o.forEach(r=>{const a=Et.buildPool(r);a&&(a.stake_protocol=this.findStakeProtocol(a.position.coinTypeA,a.position.coinTypeB),this.savePoolToCache(a),s.push(a))}),n.data=s,n}findStakeProtocol(e,t){const{haedal:n,volo:i,aftermath:o}=x(this._sdk.sdkOptions.vaults),s=D(e).full_address,r=D(t).full_address;if(he.isSuiCoin(s)||he.isSuiCoin(r)){if(n){const a=D(x(n).coin_type).full_address;if(s===a||r===a)return"Haedal"}if(i){const a=D(x(i).coin_type).full_address;if(s===a||r===a)return"Volo"}if(o){const a=D(x(o).coin_type).full_address;if(s===a||r===a)return"aftermath"}}}savePoolToCache(e){const t=`${e.id}_mirrorPool`;this.updateCache(t,e,z)}readPoolFromCache(e,t=!1){const n=`${e}_mirrorPool`;return this.getCache(n,t)}async calculateMaxAvailable(e){var I;const{integrate:t,simulationAccount:n}=this.sdk.ClmmSDK.sdkOptions,i=new N,o=G.tickIndexToSqrtPriceX64(e.lowerTick),s=G.tickIndexToSqrtPriceX64(e.upperTick),r=new m(e.curSqrtPrice),a=yt.getCoinAmountFromLiquidity(new m(e.input_amount),r,o,s,!1),c=[e.coinTypeA,e.coinTypeB];i.moveCall({target:`${t.published_at}::${Kt}::calculate_swap_result`,arguments:[i.object(e.clmm_pool),i.pure.bool(!0),i.pure.bool(!0),i.pure.u64(a.coinA.toString())],typeArguments:c}),i.moveCall({target:`${t.published_at}::${Kt}::calculate_swap_result`,arguments:[i.object(e.clmm_pool),i.pure.bool(!1),i.pure.bool(!0),i.pure.u64(a.coinB.toString())],typeArguments:c});const l=(I=(await this.sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:i,sender:n.address})).events)==null?void 0:I.filter(O=>D(O.type).name==="CalculatedSwapResultEvent");if(l.length===0)return null;const h=l[0].parsedJson.data,_=l[1].parsedJson.data,g=y(a.coinB.toString()).add(h.amount_out),C=y(a.coinA.toString()).add(_.amount_out);return{maxAmountB:g,maxAmountA:C}}async calculateRemoveSwapAmount(e,t){const n=Et.calculateDepositRatio(e.lowerTick,e.upperTick,new m(e.curSqrtPrice)),i=e.fix_amount_a?n.ratioA:n.ratioB;console.log({fixRatio:i});let o=y(e.receive_amount).mul(i),s,r;if(e.removeLiquidity){const I=G.tickIndexToSqrtPriceX64(e.lowerTick),O=G.tickIndexToSqrtPriceX64(e.upperTick),M=yt.getCoinAmountFromLiquidity(new m(e.removeLiquidity),new m(e.curSqrtPrice),I,O,!1);r=e.removeLiquidity,s=e.fix_amount_a?M.coinB.toString():M.coinA.toString(),o=e.fix_amount_a?y(M.coinA.toString()):y(M.coinB.toString())}else{const I=yt.estLiquidityAndcoinAmountFromOneAmounts(e.lowerTick,e.upperTick,new m(o.toFixed(0)),e.fix_amount_a,!1,.2,new m(e.curSqrtPrice));r=I.liquidityAmount.toString(),s=e.fix_amount_a?I.coinAmountB.toString():I.coinAmountA.toString()}console.log({fixAmount:o,otherSideAmount:s});const a=!e.fix_amount_a,c=await this.clmmPreSwap(e.clmm_pool,e.curSqrtPrice,a,y(s),e.coinTypeA,e.coinTypeB,!0,e.priceSplitPoint,e.use_route,[{pool_id:e.clmm_pool,tick_lower:e.lowerTick,tick_upper:e.upperTick,delta_liquidity:Number(r),is_increase:!1}]);console.log({data:c,range:t});const d=o.add(c.amount_out),l=y(e.receive_amount),h=l.sub(d);if(console.log(`实际得到: ${d.toString()} , 期望得到: ${e.receive_amount}, 剩余: ${h.toString()} `),(!e.removeLiquidity||e.removeLiquidity&&t)&&h.abs().greaterThan(l.mul(.01))){const I=d.lessThan(l);let O,M;t?I?(O=y(r),M=t.right):(O=t.left,M=y(r)):(O=y(I?r:0),M=y(I?e.maxLiquidity:r));const j=y(O).add(M).div(2).toFixed(0);if(console.log({left:O.toString(),right:M.toString(),midLiquidity:j.toString()}),!t||t&&t.count<15&&O<M)return await this.calculateRemoveSwapAmount({...e,removeLiquidity:j},{left:O,right:M,count:t?t.count+1:0})}const _=c.amount_in&&c.fee_amount?new m(c.amount_in).add(new m(c.fee_amount)).toString():c.amount_in,g=c.amount_out,{is_exceed:C}=c;return{swapInAmount:_,swapOutAmount:g,liquidity:r,is_exceed:C,routeObj:c.route_obj,request_id:e.request_id}}async calculateStakeDepositFixSui(e){const t=e.inputSuiAmount.mul(e.remainRate),n=e.inputSuiAmount.sub(e.swapSuiAmount),i=e.exchangeRate?e.exchangeRate:await this.getExchangeRateForStake(e.stakeProtocol,e.shouldRequestStake,Number(e.swapSuiAmount.toFixed(0))),o=e.swapSuiAmount.div(i).toFixed(0);console.log({swapAmount:e.swapSuiAmount.toString(),hasuiAmount:o.toString(),leftSuiAmount:e.leftSuiAmount.toString(),rightSuiAmount:e.rightSuiAmount.toString(),exchangeRate:i});const s=yt.estLiquidityAndcoinAmountFromOneAmounts(e.lowerTick,e.upperTick,new m(o.toString()),!e.fixCoinA,!0,0,new m(e.curSqrtPrice)),r=e.fixCoinA?s.coinAmountA.toString():s.coinAmountB.toString(),a=y(n).sub(r);return console.log({useSuiAmount:r.toString(),hasuiAmount:o.toString(),remainSui:n.toString(),remainSuiLimit:t.toString(),actRemainSui:a.toString(),rebalanceCount:e.rebalanceCount}),a.greaterThanOrEqualTo(0)&&a.lessThanOrEqualTo(t)||e.rebalanceCount>12||e.leftSuiAmount.greaterThanOrEqualTo(e.rightSuiAmount)?{swapInAmount:e.swapSuiAmount.toFixed(0),swapOutAmount:o,afterSqrtPrice:e.curSqrtPrice,fixAmountA:!e.fixCoinA,is_exceed:!0,request_id:"",stake_protocol:e.stakeProtocol}:a.lessThan(0)?await this.calculateStakeDepositFixSui({...e,rightSuiAmount:e.swapSuiAmount,swapSuiAmount:e.swapSuiAmount.add(e.leftSuiAmount).div(2),exchangeRate:i,rebalanceCount:e.rebalanceCount+1}):a.greaterThan(t)?await this.calculateStakeDepositFixSui({...e,leftSuiAmount:e.swapSuiAmount,swapSuiAmount:e.swapSuiAmount.add(e.rightSuiAmount).div(2),exchangeRate:i,rebalanceCount:e.rebalanceCount+1}):null}async calculateDepositSwapAmount(e,t=!1){const n=G.sqrtPriceX64ToTickIndex(new m(e.curSqrtPrice)),{ratioA:i,ratioB:o}=Et.calculateDepositRatio(e.lowerTick,e.upperTick,new m(e.curSqrtPrice));console.log("1110 calculateDepositSwapAmount params: ",{...e,currentTick:n,adjustBestAmount:t});const s=y(e.input_amount).mul(e.fix_amount_a?i:o);let r=y(e.input_amount).sub(s);console.log("1110 ",{fixAmount:s.toString(),swapAmount:r.toString()});const a=e.fix_amount_a;if(r.toFixed(0)==="0")return null;if(e.stakeProtocol){if(he.isSuiCoin(e.coinTypeA)&&e.fix_amount_a||he.isSuiCoin(e.coinTypeB)&&!e.fix_amount_a){const H=await this.calculateStakeDepositFixSui({inputSuiAmount:y(e.input_amount),swapSuiAmount:r,lowerTick:e.lowerTick,upperTick:e.upperTick,curSqrtPrice:e.curSqrtPrice,remainRate:e.remainRate?e.remainRate:.01,fixCoinA:e.fix_amount_a,rebalanceCount:0,shouldRequestStake:e.shouldRequestStake,leftSuiAmount:a?new V(r.toFixed(0)):new V(0),rightSuiAmount:a?new V(e.input_amount):new V(r.toFixed(0)),stakeProtocol:e.stakeProtocol});return H?{...H,request_id:e.request_id}:null}throw Error("Only support fix sui")}const c=n<e.lowerTick||n>e.upperTick,d={clmm_pool:e.clmm_pool,curSqrtPrice:e.curSqrtPrice,a2b:a,amount_a:a?new V(e.input_amount):new V(0),amount_b:a?new V(0):new V(e.input_amount),amount_left:a?new V(r.toFixed(0)):new V(0),amount_right:a?new V(e.input_amount):new V(r.toFixed(0)),lowerTick:e.lowerTick,upperTick:e.upperTick,tick_spacing:2,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,useRoute:e.use_route,remainRate:e.remainRate?e.remainRate:.01,priceSplitPoint:e.priceSplitPoint},l=t&&n<=e.upperTick;let h=l?await this.calculateRebalance(d):await this.clmmPreSwap(e.clmm_pool,e.curSqrtPrice,a,r,e.coinTypeA,e.coinTypeB,!0,e.priceSplitPoint,e.use_route),_=h.after_sqrt_price;const g=G.sqrtPriceX64ToTickIndex(new m(_));console.log("1110 首次计算 结果: ",{...h,currentTick:g},null,2);const C=g<e.lowerTick||g>e.upperTick;if(c!==C&&!l&&g<=e.upperTick){console.log("1110 区间发生变化, 再次进行swap: ");const{ratioA:H,ratioB:ce}=Et.calculateDepositRatio(e.lowerTick,e.upperTick,new m(_));console.log("1110 ",{newAfterRatioA:H,newAfterRatioB:ce}),r=y(e.input_amount).sub(y(e.input_amount).mul(e.fix_amount_a?H:ce)),d.amount_left=a?new V(r.toFixed(0)):new V(0),d.amount_right=a?new V(e.input_amount):new V(r.toFixed(0)),h=await this.calculateRebalance(d),_=h.after_sqrt_price;const we=G.sqrtPriceX64ToTickIndex(new m(_));console.log("1110 再次计算变化后: ",{lowerTick:e.lowerTick,upperTick:e.upperTick,currentTick:we,afterSqrtPrice:_})}const{ratioA:I,ratioB:O}=Et.calculateDepositRatio(e.lowerTick,e.upperTick,new m(_));console.log("1110 1",{afterRatioA:I,afterRatioB:O,data:h});let M=O.div(I).sub(o.div(i)).greaterThan("0");const j=h.amount_in&&h.fee_amount?new m(h.amount_in).add(new m(h.fee_amount)).toString():h.amount_in,B=h.amount_out,{is_exceed:q}=h;if(g<e.lowerTick)M=!0;else if(g>e.upperTick)M=!1;else{const H=M===a?new m(y(e.input_amount).sub(j).toString()):new m(B),ce=yt.estLiquidityAndcoinAmountFromOneAmounts(e.lowerTick,e.upperTick,H,M,!0,0,new m(_)),we=ce.coinAmountA,Pe=ce.coinAmountB,Q=y(e.fix_amount_a?we.toString():Pe.toString()).add(j);console.log("1110 实际消耗:",{preAmountTotal:Q.toString(),fixAmountA:M}),Q.greaterThanOrEqualTo(e.input_amount)&&(M=!M)}const Z={swapInAmount:j,swapOutAmount:B,afterSqrtPrice:_,is_exceed:q,fixAmountA:M,routeObj:h.route_obj,request_id:e.request_id,use_Haedal_stake:!1};return console.log(Z),Z}async calculateHaedalDepositSwapAmount(e){const t=G.sqrtPriceX64ToTickIndex(new m(e.curSqrtPrice)),{ratioA:n,ratioB:i}=Et.calculateDepositRatio(e.lowerTick,e.upperTick,new m(e.curSqrtPrice));console.log("1110 calculateDepositSwapAmount params: ",{...e,currentTick:t});const o=y(e.input_amount).mul(e.fix_amount_a?n:i),s=y(e.input_amount).sub(o);console.log("1110 ",{fixAmount:o.toString(),swapAmount:s.toString()});const r=e.fix_amount_a;if(s.toFixed(0)==="0")return null;if(e.stakeProtocol){if(he.isSuiCoin(e.coinTypeA)&&e.fix_amount_a||he.isSuiCoin(e.coinTypeB)&&!e.fix_amount_a){const a=await this.calculateStakeDepositFixSui({inputSuiAmount:y(e.input_amount),swapSuiAmount:s,lowerTick:e.lowerTick,upperTick:e.upperTick,curSqrtPrice:e.curSqrtPrice,remainRate:e.remainRate?e.remainRate:.01,fixCoinA:e.fix_amount_a,rebalanceCount:0,shouldRequestStake:e.shouldRequestStake,leftSuiAmount:r?new V(s.toFixed(0)):new V(0),rightSuiAmount:r?new V(e.input_amount):new V(s.toFixed(0)),stakeProtocol:e.stakeProtocol});return a?{...a,request_id:e.request_id}:null}throw Error("Only support fix sui")}return null}async calculateRebalance(e){const{clmm_pool:t,a2b:n,curSqrtPrice:i,amount_a:o,amount_b:s,lowerTick:r,upperTick:a,amount_left:c,amount_right:d,coinTypeA:l,coinTypeB:h,useRoute:_,priceSplitPoint:g,remainRate:C}=e,I=async(O,M,j)=>{const B=O.plus(M).div(2),q=await this.clmmPreSwap(t,i,n,B,l,h,!0,g,_);if(q.amount_out==="0")return q;if(q.after_sqrt_price||(q.after_sqrt_price=e.curSqrtPrice),q.is_exceed)return M=B,I(O,M,j+1);const Z=n?o.sub(q.amount_in):o.add(q.amount_out),H=n?s.add(q.amount_out):s.sub(q.amount_in),ce=G.sqrtPriceX64ToTickIndex(new m(q.after_sqrt_price)),we=yt.estLiquidityAndcoinAmountFromOneAmounts(r,a,new m(Z.toString()),!0,!0,1,new m(q.after_sqrt_price)),Pe=new V(we.coinAmountA.toString()),Q=new V(we.coinAmountB.toString());if(console.log("1110 swap递归计算 ",{preRes:q,left:O.toString(),right:M.toString(),mid:B.toString(),afterPoolTickIndex:ce,afterA:Z.toString(),afterB:H.toString(),usedA:Pe.toString(),usedB:toString(),count:j}),Pe.toString()!==Z.toString())throw new Error("usedA does not match afterA");if(H.lessThan(Q))n?O=B:M=B;else{n?M=B:O=B;const W=H.sub(Q),_e=H.mul(C);if(console.log("1110 剩余未使用amount ",{remainingB:W.toString(),maxRemainingB:_e.toString(),remainRate:C,count:j}),_e.sub(W).greaterThanOrEqualTo(0))return console.log("break"),{...q,remainingB:W}}return O.greaterThan(M)||M.sub(O).lessThan(10)?q:I(O,M,j+1)};return c.greaterThanOrEqualTo(d)?I(new V(0),c,0):I(c,d,0)}async clmmPreSwap(e,t,n,i,o,s,r,a,c,d){var M;if(c)try{const j=await this._sdk.ClmmSDK.RouterV2.getBestRouter(n?o:s,n?s:o,Number(i.toFixed(0)),r,a,"",void 0,void 0,!0,!1,d);if(!j.result)throw new Error("route unavailable");const{result:B}=j;let q=t;return B.splitPaths.forEach(Z=>{const H=Z.basePaths.find(ce=>ce.poolAddress.toLowerCase()===e.toLowerCase());H&&(q=H.afterSqrtPrice.toString())}),{amount_in:B.inputAmount.toString(),amount_out:B.outputAmount.toString(),after_sqrt_price:q,is_exceed:B.isExceed,route_obj:B}}catch{throw new Error("route unavailable")}const{integrate:l,simulationAccount:h}=this.sdk.ClmmSDK.sdkOptions,_=new N,g=[o,s],C=[_.object(e),_.pure.bool(n),_.pure.bool(r),_.pure.u64(i.toFixed(0))];_.moveCall({target:`${l.published_at}::${Kt}::calculate_swap_result`,arguments:C,typeArguments:g});const O=(M=(await this.sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:_,sender:h.address})).events)==null?void 0:M.filter(j=>D(j.type).name==="CalculatedSwapResultEvent");return O.length===0?null:O[0].parsedJson.data}async getVault(e,t=!1){const n=this.readPoolFromCache(e,t);if(n)return n;try{const i=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}}),o=Et.buildPool(i);if(o)return o.stake_protocol=this.findStakeProtocol(o.position.coinTypeA,o.position.coinTypeB),this.savePoolToCache(o),o}catch(i){console.log(i)}}async getVaultsConfigs(e=!1){const{package_id:t}=this._sdk.sdkOptions.vaults,n=`${t}_getMirrorPoolConfigs`,i=this.getCache(n,e);if(i!==void 0)return i;const o=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::vaults::InitEvent`})).data,s={admin_cap_id:"",vaults_manager_id:"",vaults_pool_handle:""};if(o.length>0){for(const r of o){const a=r.parsedJson;s.admin_cap_id=a.admin_cap_id,s.vaults_manager_id=a.manager_id;const c=await this._sdk.ClmmSDK.fullClient.getObject({id:s.vaults_manager_id,options:{showContent:!0}}),d=ee(c);s.vaults_pool_handle=d.vault_to_pool_maps.fields.id.id;break}this.updateCache(n,s,z)}return s}async getExchangeRateForStake(e,t,n){return e==="Haedal"?await ks.getExchangeRateForStake(this._sdk,t,n):e==="Volo"?await Cs.getExchangeRateForStake(this._sdk,t,n):e==="aftermath"?await As.getExchangeRateForStake(this._sdk,t,n):"0"}requestStakeCoin(e,t,n){if(e==="Haedal")return ks.requestStakeCoin(this._sdk,t,n);if(e==="Volo")return Cs.requestStakeCoin(this._sdk,t,n);if(e==="aftermath")return As.requestStakeCoin(this._sdk,t,n)}async requestStake(e,t,n){if(e==="Haedal")return await ks.requestStake(this._sdk,t,n);if(e==="Volo")return await Cs.requestStake(this._sdk,t,n);if(e==="aftermath")return await As.requestStake(this._sdk,t,n)}updateCache(e,t,n=qt){let i=this._cache[e];i?(i.overdueTime=ge(n),i.value=t):i=new Ot(t,ge(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e],i=n==null?void 0:n.isValid();if(!t&&i)return n.value;i||delete this._cache[e]}},z_=class{constructor(e){U(this,"_sdk");U(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getLimitOrderTokenList(){const{limit_order:e}=this._sdk.sdkOptions,{token_list_handle:t}=x(e),{fullClient:n}=this._sdk.ClmmSDK,o=(await n.getDynamicFieldsByPage(t)).data.map(r=>r.objectId);return(await n.batchGetObjects(o,{showContent:!0})).map(r=>{const{fields:a}=r.data.content;return{coin_type:D(a.name.fields.name).full_address,min_trade_amount:Number(a.value)}})}async getLimitOrderPoolList(){const{limit_order:e}=this._sdk.sdkOptions,{rate_orders_indexer_handle:t}=x(e),{fullClient:n}=this._sdk.ClmmSDK,o=(await n.getDynamicFieldsByPage(t)).data.map(r=>r.objectId);return(await n.batchGetObjects(o,{showContent:!0})).map(r=>{const{fields:a}=r.data.content.fields.value,c={pay_coin_type:D(a.pay_coin.fields.name).full_address,target_coin_type:D(a.target_coin.fields.name).full_address,indexer_id:a.indexer_id};return this._sdk.updateCache(`${c.pay_coin_type}_${c.target_coin_type}`,c.indexer_id),c})}async getPoolIndexerId(e,t){const n=this._sdk.getCache(`${e}_${t}`);try{if(n===void 0){const o=(await this.getLimitOrderPoolList()).filter(s=>D(s.pay_coin_type).full_address===D(e).full_address&&D(s.target_coin_type).full_address===D(t).full_address);if(o.length>0)return o[0].indexer_id}}catch{}return n}async getOwnerLimitOrderList(e,t){const{fullClient:n}=this._sdk.ClmmSDK,i={data:[],hasNextPage:!1};try{const o=await this.getUserIndexerHandle(e);if(!o)return i;const s=await n.getDynamicFieldsByPage(o,t);i.hasNextPage=s.hasNextPage,i.nextCursor=s.nextCursor;const r=s.data.map(d=>d.name.value),c=(await n.batchGetObjects(r,{showContent:!0})).map(d=>hi.buildLimitOrderInfo(d)).filter(d=>d!==void 0);i.data=c}catch(o){console.log("Error in getOwnerLimitOrderList:",o)}return i}async getLimitOrderConfigs(){const{package_id:e}=this._sdk.sdkOptions.limit_order,t={rate_orders_indexer_id:"",rate_orders_indexer_handle:"",global_config_id:"",token_list_handle:"",user_orders_indexer_id:"",user_orders_indexer_handle:""},n=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::limit_order::InitEvent`})).data;if(n.length>0){const o=n[0].parsedJson;t.rate_orders_indexer_id=o.rate_orders_indexer_id,t.user_orders_indexer_id=o.user_orders_indexer_id;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:t.rate_orders_indexer_id,options:{showContent:!0}});t.rate_orders_indexer_handle=ee(s).list.fields.id.id;const r=await this._sdk.ClmmSDK.fullClient.getObject({id:t.user_orders_indexer_id,options:{showContent:!0}});t.user_orders_indexer_handle=ee(r).indexer.fields.id.id}const i=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitFactoryEvent`})).data;if(i.length>0){const o=i[0].parsedJson;t.global_config_id=o.global_config_id;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:t.global_config_id,options:{showContent:!0}}),r=ee(s);t.token_list_handle=r.token_white_list.fields.id.id}return t}async getLimitOrder(e){const{fullClient:t}=this._sdk.ClmmSDK;try{const n=await t.getObject({id:e,options:{showContent:!0}});return hi.buildLimitOrderInfo(n)}catch(n){console.log("Error in getLimitOrder:",n);return}}async getLimitOrderLogs(e){const{fullClient:t}=this._sdk.ClmmSDK;try{const n=await t.queryTransactionBlocks({filter:{ChangedObject:e},options:{showEvents:!0}}),i=[];return n.data.forEach(o=>{i.push(...hi.buildOrderLimitEvent(o,["OrderPlacedEvent","OrderCanceledEvent","FlashLoanEvent"]))}),i}catch(n){return console.log("Error in getLimitOrderLogs:",n),[]}}async getLimitOrderClaimLogs(e){const{fullClient:t}=this._sdk.ClmmSDK;try{const n=await t.queryTransactionBlocks({filter:{ChangedObject:e},options:{showEvents:!0}}),i=[];return n.data.forEach(o=>{i.push(...hi.buildOrderLimitEvent(o,["ClaimTargetCoinEvent"]))}),i}catch(n){return console.log("Error in getLimitOrderLogs:",n),[]}}buildRateOrdersIndexerType(e){const{limit_order:t}=this._sdk.sdkOptions;return mo(`${t.package_id}::limit_order::RateOrdersIndexer`,[e.pay_coin_type,e.target_coin_type])}async placeLimitOrder(e){const{limit_order:t}=this._sdk.sdkOptions,{user_orders_indexer_id:n,global_config_id:i,rate_orders_indexer_id:o}=x(t),s=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,e.pay_coin_type),r=new N,a=await this.getPoolIndexerId(e.pay_coin_type,e.target_coin_type),c=X.buildCoinForAmount(r,s,BigInt(e.pay_coin_amount),e.pay_coin_type,!1,!0);return r.moveCall({target:`${t.published_at}::limit_order::${a===void 0?"create_indexer_and_place_limit_order":"place_limit_order"}`,typeArguments:[e.pay_coin_type,e.target_coin_type],arguments:[r.object(i),a===void 0?r.object(o):r.object(a),r.object(n),c.targetCoin,r.pure.u128(hi.priceToRate(e.price,e.pay_decimal,e.target_decimal)),r.pure.u64(e.expired_ts),r.object($)]}),r}async claimTargetCoin(e){const{limit_order:t}=this._sdk.sdkOptions,{global_config_id:n}=x(t),i=new N;return i.moveCall({target:`${t.published_at}::limit_order::claim_target_coin`,typeArguments:[e.pay_coin_type,e.target_coin_type],arguments:[i.object(n),i.object(e.order_id)]}),i}async cancelOrdersByOwner(e){const{limit_order:t}=this._sdk.sdkOptions,{global_config_id:n}=x(t),i=new N,o={};for(let s=0;s<e.length;s++){const r=e[s],a=await this.getPoolIndexerId(r.pay_coin_type,r.target_coin_type);if(a===void 0)throw Error("not found indexerId");o[r.order_id]=a}return e.forEach(s=>{i.moveCall({target:`${t.published_at}::limit_order::cancel_order_by_owner`,typeArguments:[s.pay_coin_type,s.target_coin_type],arguments:[i.object(n),i.object(o[s.order_id]),i.object(s.order_id),i.object($)]})}),i}async getUserIndexerHandle(e){const{fullClient:t}=this._sdk.ClmmSDK,{limit_order:n}=this._sdk.sdkOptions;let i=this.getUserIndexerHandleByCache(e);if(i===void 0){const o=new N;o.moveCall({target:`${n.published_at}::limit_order::get_orders_indexer_by_owner`,typeArguments:[],arguments:[o.pure.address(e),o.object(x(n).user_orders_indexer_id)]}),i=(await t.devInspectTransactionBlock({transactionBlock:o,sender:this._sdk.ClmmSDK.sdkOptions.simulationAccount.address})).events[0].parsedJson.orders_table_id,i&&this.saveUserIndexerHandleByCache(e,i)}return i}getUserIndexerHandleByCache(e){const t=`getUserIndexerHandleByCache_${e}`;return this.getCache(t)}saveUserIndexerHandleByCache(e,t){const n=`getUserIndexerHandleByCache_${e}`;return this.updateCache(n,t)}updateCache(e,t,n=z){let i=this._cache[e];i?(i.overdueTime=ge(n),i.value=t):i=new Ot(t,ge(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e],i=n==null?void 0:n.isValid();if(!t&&i)return n.value;i||delete this._cache[e]}},G_=class{constructor(e){U(this,"_sdk");U(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getFramsPoolList(e="all"){const{package_id:t}=this._sdk.sdkOptions.frams,n={data:[],hasNextPage:!1};try{const i=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::pool::CreatePoolEvent`},e),o=i.data.map(s=>s.parsedJson.pool_id);if(n.hasNextPage=i.hasNextPage,n.nextCursor=i.nextCursor,o.length>0){const s=await this._sdk.ClmmSDK.fullClient.batchGetObjects(o,{showType:!0,showContent:!0});for(const r of s){const a=Ji.buildFramsPool(r);a&&(a.rewarders=await this.getFramsRewarderConfig(a.clmm_pool_id,a.rewarders.map(c=>c.reward_coin)),n.data.push(a),this.updateCache(a.id,a))}}}catch(i){console.log("getFramsPoolList error ",i)}return n}async getFramsPool(e,t=!1){const n=this.getCache(e,t);if(n)return n;const i=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}}),o=Ji.buildFramsPool(i.data);return o&&(o.rewarders=await this.getFramsRewarderConfig(o.clmm_pool_id,o.rewarders.map(s=>s.reward_coin)),this.updateCache(o.id,o)),o}async getFramsRewarderConfig(e,t,n=!1){const{frams:i}=this._sdk.sdkOptions,o=[];for(const s of t){const r=`getFramsRewarderConfig_${s}_${e}`,a=this.getCache(r,n);if(a)o.push(a);else try{const c=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:x(i).rewarder_manager_handle,name:{type:"0x1::type_name::TypeName",value:md(s)}}),{fields:d}=c.data.content.fields.value.fields.value,l={reward_coin:s,last_reward_time:d.last_reward_time,emission_per_second:d.emission_per_second,total_allocate_point:d.total_allocate_point,allocate_point:""},h=d.pools.fields.id.id,_=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:h,name:{type:"0x2::object::ID",value:e}}),{allocate_point:g}=_.data.content.fields.value.fields.value.fields;l.allocate_point=g,this.updateCache(r,l),o.push(l)}catch(c){console.log(c)}}return o}async getOwnedFramsPositionNFTList(e,t=[],n=!1,i="all"){const{package_id:o}=this._sdk.sdkOptions.frams,s={data:[],hasNextPage:!1};let r={};const a=[],c=t.length>0,d=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{filter:{StructType:`${o}::pool::WrappedPositionNFT`},options:{showContent:!0}},i);s.hasNextPage=d.hasNextPage,s.nextCursor=d.nextCursor;for(const l of d.data){const h=Ji.buildFramsPositionNFT(l);if(h)if(c){if(t.includes(h.pool_id)){a.push(h);let _=r[h.pool_id];_?_.push(h):_=[h],r[h.pool_id]=_}}else a.push(h)}if(n&&a.length>0){const l=await this.calculateFarmingRewards(a.map(h=>({pool_id:h.pool_id,position_nft_id:h.id,clmm_pool_id:h.clmm_pool_id})));c?(r={},a.forEach(h=>{l[h.id]&&(h.rewards=l[h.id]);let g=r[h.pool_id];g?g.push(h):g=[h],r[h.pool_id]=g})):a.forEach(h=>{l[h.id]&&(h.rewards=l[h.id])})}return c?r:(s.data=a,s)}async getFramsPositionNFT(e,t=!0){const n=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),i=Ji.buildFramsPositionNFT(n);if(t&&i){const o=await this.calculateFarmingRewards([{pool_id:i.pool_id,position_nft_id:i.id}]);o[i.id]&&(i.rewards=o[i.id])}return i}async calculateFarmingRewards(e){var r;const{frams:t}=this._sdk.sdkOptions,n=new N,{rewarder_manager_id:i,global_config_id:o}=x(t);e.forEach(a=>{n.moveCall({target:`${t.published_at}::router::accumulated_position_rewards`,typeArguments:[],arguments:[n.object(o),n.object(i),n.object(a.pool_id),n.pure.address(a.position_nft_id),n.object($)]})});const s={};try{const a=await this._sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:n,sender:this.sdk.ClmmSDK.senderAddress});console.log({simulateRes:a});const c=(r=a==null?void 0:a.events)==null?void 0:r.filter(d=>D(d.type).name==="AccumulatedPositionRewardsEvent");if(c&&c.length>0)for(let d=0;d<c.length;d+=1){const{parsedJson:l}=c[d],h=[];l.rewards.contents.forEach(_=>{h.push({rewarder_type:D(_.key.name).full_address,rewarder_amount:_.value})}),s[l.wrapped_position_id]=h}}catch(a){console.log(a)}return s}depositPayload(e,t){const{frams:n}=this.sdk.sdkOptions;t=t||new N;const{global_config_id:i,rewarder_manager_id:o}=x(n);return t.moveCall({target:`${n.published_at}::router::deposit`,typeArguments:[],arguments:[t.object(i),t.object(o),t.object(e.pool_id),t.object(e.clmm_position_id),t.object($)]}),t}async withdrawPayload(e,t){const{frams:n}=this.sdk.sdkOptions,{global_config_id:i,rewarder_manager_id:o}=x(n);return t=t||new N,t=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id},t),t.moveCall({target:`${n.published_at}::router::withdraw`,typeArguments:[],arguments:[t.object(i),t.object(o),t.object(e.pool_id),t.object(e.position_nft_id),t.object($)]}),t}async batchHarvestPayload(e,t){t=t||new N;for(const n of e)await this.harvestPayload(n,t);return t}async batchHarvestAndClmmFeePayload(e,t){if(!gt(this._sdk.ClmmSDK.senderAddress))throw new Error("this config sdk senderAddress is not set right");const n=new N,i={},o=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,null);for(const c of t)this.collectClmmFeeInternal(c,i,n,o),this.collectClmmRewardInternal(c,i,n,o);const{frams:s}=this.sdk.sdkOptions,{global_config_id:r,rewarder_manager_id:a}=x(s);for(const c of e){const d=await this.getFramsPool(c.pool_id,!1);if(d===void 0)throw Error(`not found ${c.pool_id}`);c.collect_fee&&this.collectFeeInternal(c,i,n,o),c.clmm_rewarder_types.length>0&&await this.collectRewardInternal(c,i,n,o),c.collect_frams_rewarder&&d.rewarders.forEach(l=>{n&&n.moveCall({target:`${s.published_at}::router::harvest`,typeArguments:[l.reward_coin],arguments:[n.object(r),n.object(a),n.object(c.pool_id),n.object(c.position_nft_id),n.object($)]})})}return Object.keys(i).forEach(c=>{const d=i[c],l=d.originalSplitedCoin;(d.isMintZeroCoin||l&&(l==null?void 0:l.$kind)==="GasCoin")&&X.buildTransferCoin(this._sdk.ClmmSDK,n,d.targetCoin,c,this._sdk.ClmmSDK.senderAddress)}),n}async collectRewardInternal(e,t,n,i){const o=[];e.clmm_rewarder_types.forEach(s=>{const r=Se(s);let a=t[s];a===void 0&&(a=X.buildCoinForAmount(n,i,BigInt(0),r,!1),t[r]=a),o.push(a.targetCoin)}),await this.collectClmmRewardNoSendPayload(e,n)}collectFeeInternal(e,t,n,i){const{frams:o}=this.sdk.sdkOptions,{global_config_id:s}=x(o),{clmm_pool:r,integrate:a}=this.sdk.ClmmSDK.sdkOptions,c=x(r),d=Se(e.coinTypeA),l=Se(e.coinTypeB);let h=t[d];h===void 0&&(h=X.buildCoinForAmount(n,i,BigInt(0),d,!1),t[d]=h);let _=t[l];_===void 0&&(_=X.buildCoinForAmount(n,i,BigInt(0),l,!1),t[l]=_),n.moveCall({target:`${a.published_at}::stable_farming::collect_fee`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[n.object(s),n.object(c.global_config_id),n.object(e.clmm_pool_id),n.object(e.position_nft_id),h.targetCoin,_.targetCoin]})}collectClmmRewardInternal(e,t,n,i){const o=[];e.rewarder_coin_types.forEach(s=>{const r=Se(s);let a=t[s];a===void 0&&(a=X.buildCoinForAmount(n,i,BigInt(0),r,!1),t[r]=a),o.push(a.targetCoin)}),this._sdk.ClmmSDK.Rewarder.createCollectRewarderNoSendPaylod(e,n,o)}collectClmmFeeInternal(e,t,n,i){if(e.collect_fee){const o=Se(e.coinTypeA),s=Se(e.coinTypeB);let r=t[o];r===void 0&&(r=X.buildCoinForAmount(n,i,BigInt(0),o,!1),t[o]=r);let a=t[s];a===void 0&&(a=X.buildCoinForAmount(n,i,BigInt(0),s,!1),t[s]=a),this._sdk.ClmmSDK.Position.createCollectFeeNoSendPaylod({pool_id:e.pool_id,pos_id:e.pos_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB},n,r.targetCoin,a.targetCoin)}}async harvestPayload(e,t){const{frams:n}=this.sdk.sdkOptions;t=t||new N;const i=await this.getFramsPool(e.pool_id,!1);if(i===void 0)throw Error(`not found ${e.pool_id}`);const{global_config_id:o,rewarder_manager_id:s}=x(n);if("collect_fee"in e&&(e.collect_fee||e.clmm_rewarder_types.length>0)){const a=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},t,a)}return i.rewarders.forEach(a=>{t&&t.moveCall({target:`${n.published_at}::router::harvest`,typeArguments:[a.reward_coin],arguments:[t.object(o),t.object(s),t.object(e.pool_id),t.object(e.position_nft_id),t.object($)]})}),t}async claimFeeAndClmmReward(e){const t=new N,n=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);return await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},t,n),t}async openPositionAddLiquidityStakePaylod(e){const t=new N,{clmm_pool:n,integrate:i}=this._sdk.ClmmSDK.sdkOptions,o=x(n),s=t.moveCall({target:`${n.published_at}::pool::open_position`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(o.global_config_id),t.object(e.clmm_pool_id),t.pure.u32(Number(Ct(BigInt(e.tick_lower)).toString())),t.pure.u32(Number(Ct(BigInt(e.tick_upper)).toString()))]}),r=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),a=X.buildCoinForAmount(t,r,BigInt(e.amount_a),e.coinTypeA,!1),c=X.buildCoinForAmount(t,r,BigInt(e.amount_b),e.coinTypeB,!1);t.moveCall({target:`${i.published_at}::${Tn}::add_liquidity_by_fix_coin`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(o.global_config_id),t.object(e.clmm_pool_id),s,a.targetCoin,c.targetCoin,t.pure.u64(e.amount_a.toString()),t.pure.u64(e.amount_b.toString()),t.pure.bool(e.fix_amount_a),t.object($)]});const{frams:d}=this.sdk.sdkOptions,{global_config_id:l,rewarder_manager_id:h}=x(d);return t.moveCall({target:`${d.published_at}::router::deposit`,typeArguments:[],arguments:[t.object(l),t.object(h),t.object(e.pool_id),s,t.object($)]}),t}async addLiquidityPayload(e,t){const{frams:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;t=t||new N;const o=x(n),s=x(i),r=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),a=X.buildCoinForAmount(t,r,BigInt(e.amount_limit_a),e.coinTypeA,!1),c=X.buildCoinForAmount(t,r,BigInt(e.amount_limit_b),e.coinTypeB,!1);if(e.collect_rewarder&&(t=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id,clmm_pool_id:e.clmm_pool_id},t)),e.collect_fee||e.clmm_rewarder_types.length>0){const d=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},t,d,a.remainCoins,c.remainCoins)}return t.moveCall({target:`${n.published_at}::router::add_liquidity`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(o.global_config_id),t.object(s.global_config_id),t.object(o.rewarder_manager_id),t.object(e.pool_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),a.targetCoin,c.targetCoin,t.pure.u64(e.amount_limit_a),t.pure.u64(e.amount_limit_b),t.pure.u128(e.delta_liquidity),t.object($)]}),t}async addLiquidityFixCoinPayload(e,t){const{frams:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;t=t||new N;const o=x(n),s=x(i),r=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),a=X.buildCoinForAmount(t,r,BigInt(e.amount_a),e.coinTypeA,!1),c=X.buildCoinForAmount(t,r,BigInt(e.amount_b),e.coinTypeB,!1);if(e.collect_rewarder&&(t=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id,clmm_pool_id:e.clmm_pool_id},t)),e.collect_fee||e.clmm_rewarder_types.length>0){const d=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},t,d,a.remainCoins,c.remainCoins)}return t.moveCall({target:`${n.published_at}::router::add_liquidity_fix_coin`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(o.global_config_id),t.object(s.global_config_id),t.object(o.rewarder_manager_id),t.object(e.pool_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),a.targetCoin,c.targetCoin,t.pure.u64(e.amount_a.toString()),t.pure.u64(e.amount_b.toString()),t.pure.bool(e.fix_amount_a),t.object($)]}),t}async removeLiquidityPayload(e,t){const{frams:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;t=t||new N;const o=x(n),s=x(i);if(e.collect_rewarder&&(!e.unstake||e.close_position)&&(t=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id,clmm_pool_id:e.clmm_pool_id},t)),e.clmm_rewarder_types.length>0){const r=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:!1,clmm_rewarder_types:e.clmm_rewarder_types},t,r)}if(e.close_position){if(e.clmm_position_id===void 0)throw Error("close_position need clmm_position_id");t.moveCall({target:`${n.published_at}::router::close_position`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(o.global_config_id),t.object(o.rewarder_manager_id),t.object(e.pool_id),t.object(s.global_config_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),t.pure.u64(e.min_amount_a),t.pure.u64(e.min_amount_b),t.object($)]})}else t.moveCall({target:`${n.published_at}::router::remove_liquidity`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(o.global_config_id),t.object(s.global_config_id),t.object(o.rewarder_manager_id),t.object(e.pool_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),t.pure.u128(e.delta_liquidity),t.pure.u64(e.min_amount_a),t.pure.u64(e.min_amount_b),t.object($)]}),e.unstake&&this.withdrawPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id});return t}async buildCollectRewarderAndFeeParams(e,t,n,i,o){i===void 0&&(i=[...n]),o===void 0&&(o=[...n]);const s=Se(e.coinTypeA),r=Se(e.coinTypeB);e.collectFee&&this.collectFeePayload({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB},t);const a=[];return e.clmm_rewarder_types.forEach(c=>{switch(Se(c)){case s:a.push(X.buildCoinForAmount(t,i,BigInt(0),c,!1).targetCoin);break;case r:a.push(X.buildCoinForAmount(t,o,BigInt(0),c,!1).targetCoin);break;default:a.push(X.buildCoinForAmount(t,n,BigInt(0),c,!1).targetCoin);break}}),this.collectClmmRewardPayload({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,clmm_rewarder_types:e.clmm_rewarder_types,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,reward_coins:a},t),t}collectFeePayload(e,t){const{frams:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;t=t||new N;const o=x(n),s=x(i);return t.moveCall({target:`${n.published_at}::router::collect_fee`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(o.global_config_id),t.object(s.global_config_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id)]}),t}async collectClmmRewardPayload(e,t){var a;const{frams:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;t=t||new N;let o=e.reward_coins;if(e.clmm_rewarder_types.length>0&&o===void 0){o=[];const c=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);e.clmm_rewarder_types.forEach(d=>{o.push(X.buildCoinForAmount(t,c,BigInt(0),d,!1).targetCoin)})}const s=x(n),r=x(i);return(a=e.clmm_rewarder_types)==null||a.forEach((c,d)=>{t&&t.moveCall({target:`${n.published_at}::router::collect_clmm_reward`,typeArguments:[c,e.coinTypeA,e.coinTypeB],arguments:[t.object(s.global_config_id),t.object(r.global_config_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),t.object(r.global_vault_id),o[d],t.object($)]})}),t}async collectClmmRewardNoSendPayload(e,t){var c;const{frams:n}=this.sdk.sdkOptions,{clmm_pool:i,integrate:o}=this.sdk.ClmmSDK.sdkOptions;let s=e.reward_coins;if(e.clmm_rewarder_types.length>0&&s===void 0){s=[];const d=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);e.clmm_rewarder_types.forEach(l=>{s.push(X.buildCoinForAmount(t,d,BigInt(0),l,!1).targetCoin)})}const r=x(n),a=x(i);return(c=e.clmm_rewarder_types)==null||c.forEach((d,l)=>{t&&t.moveCall({target:`${o.published_at}::stable_farming::collect_clmm_reward`,typeArguments:[d,e.coinTypeA,e.coinTypeB],arguments:[t.object(r.global_config_id),t.object(a.global_config_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),t.object(a.global_vault_id),s[l],t.object($)]})}),t}async getFrarmsConfigs(){const{package_id:e}=this._sdk.sdkOptions.frams,t={global_config_id:"",rewarder_manager_id:"",rewarder_manager_handle:""},n=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitConfigEvent`})).data;if(n.length>0){const o=n[0].parsedJson;t.global_config_id=o.global_config_id,t.admin_cap_id=o.admin_cap_id}const i=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::rewarder::InitRewarderManagerEvent`})).data;if(i.length>0){const o=i[0].parsedJson;t.rewarder_manager_id=o.id;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:t.rewarder_manager_id,options:{showContent:!0}});t.rewarder_manager_handle=s.data.content.fields.rewarders.fields.id.id}return t}updateCache(e,t,n=z){let i=this._cache[e];i?(i.overdueTime=ge(n),i.value=t):i=new Ot(t,ge(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e];if(!t&&(n!=null&&n.isValid()))return n.value;delete this._cache[e]}},W_=class{constructor(e,t){U(this,"_cache",{});U(this,"_sdkOptions");U(this,"_launchpad");U(this,"_ido");U(this,"_xcetusModule");U(this,"_xtokenModule");U(this,"_boosterModule");U(this,"_makerModule");U(this,"_clmmSDK");U(this,"_liquidityStrategy");U(this,"_vaults");U(this,"_limitOrder");U(this,"_farmsModule");this._sdkOptions=e,this._clmmSDK=t,this._launchpad=new E_(this),this._ido=new L_(this),this._xcetusModule=new R_(this),this._xtokenModule=new U_(this),this._boosterModule=new M_(this),this._makerModule=new B_(this),this._vaults=new V_(this),this._limitOrder=new z_(this),this._farmsModule=new G_(this),this._liquidityStrategy=new K_(this),wr(this._sdkOptions)}get ClmmSDK(){return this._clmmSDK}get sdkOptions(){return this._sdkOptions}get Launchpad(){return this._launchpad}get Ido(){return this._ido}get XToken(){return this._xtokenModule}get XCetusModule(){return this._xcetusModule}get BoosterModule(){return this._boosterModule}get MakerModule(){return this._makerModule}get LiquidityStrategy(){return this._liquidityStrategy}get Vaults(){return this._vaults}get LimitOrder(){return this._limitOrder}get Farms(){return this._farmsModule}getVerifySenderAddress(){const{senderAddress:e}=this.ClmmSDK;if(e.length===0||!nn(e))throw Error("this clmm config sdk senderAddess is illegal");return e}updateCache(e,t,n=z){let i=this._cache[e];i?(i.overdueTime=ge(n),i.value=t):i=new Ot(t,ge(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e];if(!t&&(n!=null&&n.isValid()))return n.value;delete this._cache[e]}},k0=W_;export{Oi as $,su as A,f0 as B,yt as C,d0 as D,ic as E,Ji as F,sl as G,u0 as H,h0 as I,p0 as J,ru as K,rn as L,l0 as M,Xa as N,nn as O,c0 as P,bi as Q,Qr as R,er as S,G as T,eu as U,ae as V,ou as W,En as X,me as Y,ec as Z,xt as _,Qi as a,Bc as a0,ie as a1,N as a2,Xt as a3,In as a4,Ie as a5,Di as a6,mn as a7,L as a8,fe as a9,n0 as aA,i0 as aB,Ki as aC,sr as aa,Rf as ab,Ju as ac,Ps as ad,Du as ae,Ep as af,Se as ag,mt as ah,v0 as ai,r_ as aj,hi as ak,Et as al,fl as am,Y_ as an,Yn as ao,Jr as ap,ko as aq,e0 as ar,s0 as as,gi as at,dl as au,r0 as av,t0 as aw,Pt as ax,a0 as ay,o0 as az,m as b,Z_ as c,Gr as d,il as e,Va as f,y0 as g,Fl as h,k0 as i,j_ as j,g0 as k,_0 as l,zi as m,Gi as n,y as o,D as p,b0 as q,Ed as r,w0 as s,m0 as t,Q_ as u,Xs as v,X as w,ni as x,W_ as y,x as z};
