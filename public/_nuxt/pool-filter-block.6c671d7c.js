import{u as H,F as Y}from"./filter-pool-by-coin.344cb510.js";import{I as Z}from"./to-add.03535952.js";import{a as O,e as C,o as d,f,h as p,z as w,v as L,r as g,m as B,y as K,T as W,M as ee,ff as J,F as D,s as Q,i as S,p as F,k as x,H as oe,j as se,x as M,D as j,u as T,a0 as ne}from"./entry.a4db0d61.js";import{_ as le}from"./icon-selected_3x.09e9a6f0.js";import{k as I,R as q,S as z}from"./pool.2587b8e2.js";import{c as re,q as ie,w as ce}from"./index.6288ac24.js";import{u as te,f as ue}from"./useSDK.96ba4be6.js";import{u as pe}from"./useToken.31e8d532.js";import"./decimal.a2826370.js";import{D as G}from"./decimal.765d8738.js";const _e=O({name:"Checkbox",props:{modelValue:{type:Boolean,default:!1},label:{type:String,default:""}},setup(o,l){return{toggleSelect:()=>{l.emit("update:modelValue",!o.modelValue)}}}});const de={class:"checkbox-button"},fe={class:"label"};function ve(o,l,t,a,v,y){return d(),f("div",{class:"checkbox-container",onClick:l[0]||(l[0]=(...r)=>o.toggleSelect&&o.toggleSelect(...r))},[p("div",de,[p("img",{class:w({show:o.modelValue}),src:le},null,2)]),p("span",fe,L(o.label),1)])}const ae=C(_e,[["render",ve],["__scopeId","data-v-c6e355bc"]]),he=O({name:"Dropdown",components:{CheckBox:ae},props:{options:{type:Array,required:!0},modelValue:{type:Array,required:!0},label:{type:String,default:""},iconUrl:{type:String,default:""},num:{type:String,default:""}},setup(o,l){console.log("ðŸš€ðŸš€ðŸš€ ~ file: dropdown-checkbox.vue:112 ~ setup ~ props.options:",o.options);const t=g(!1),a=g(null),v=g(null),y=()=>{t.value=!t.value},r=B(()=>{const i=o.modelValue;return console.log("ðŸš€ðŸš€ðŸš€ ~ file: dropdown-checkbox.vue:65 ~ optionList ~ modelValueArr:",i),o.options.map(e=>({...e,value:i==null?void 0:i.includes(e.label)}))}),u=i=>{const e={};r.value.forEach(n=>{n.value&&(e[n.label]=!0)}),e[i.label]=i.value;const c=Object.keys(e).filter(n=>e[n]);console.log("ðŸš€ ~ file: dropdownCheckbox.vue:83 ~ selectOption ~ newValue:",c),l.emit("update:modelValue",c)},h=i=>{v.value&&!v.value.contains(i.target)&&(t.value=!1)};return K(()=>{document.addEventListener("click",h)}),W(()=>{document.removeEventListener("click",h)}),{isOpen:t,selectedOption:a,selectOption:u,toggleDropdown:y,optionList:r}}});const me=o=>(F("data-v-4652b6fc"),o=o(),x(),o),ge={class:"current-info"},ye={class:"icon-box"},be={class:"icon","aria-hidden":"true"},ke=["xlink:href"],we={class:"label"},$e=me(()=>p("use",{"xlink:href":"#icon-icon_on"},null,-1)),Se=[$e],Le={key:1,class:"num"},Ve=["onClick"];function Ce(o,l,t,a,v,y){const r=ee("CheckBox");return d(),f("div",{class:w(["dropdown-container",{open:o.isOpen}])},[p("div",{class:"dropdown-toggle",onClick:l[0]||(l[0]=(...u)=>o.toggleDropdown&&o.toggleDropdown(...u))},[J(o.$slots,"toggle",{},()=>[p("div",ge,[p("div",ye,[(d(),f("svg",be,[p("use",{"xlink:href":o.iconUrl},null,8,ke)]))]),p("span",we,L(o.label),1)])],!0),o.num?(d(),f("div",Le,L(o.num),1)):(d(),f("svg",{key:0,"aria-hidden":"true",class:w(["dropdown-icon",{open:o.isOpen}])},Se,2))]),p("ul",{class:w(["dropdown-list",{open:o.isOpen}])},[(d(!0),f(D,null,Q(o.optionList,u=>(d(),f("li",{key:u.value,onClick:h=>o.selectOption(u)},[S(r,{modelValue:u.value,"onUpdate:modelValue":h=>u.value=h,label:u.label},null,8,["modelValue","onUpdate:modelValue","label"])],8,Ve))),128))],2)],2)}const Oe=C(he,[["render",Ce],["__scopeId","data-v-4652b6fc"]]),Ae=O({name:"Dropdown",props:{options:{type:Array,required:!0},modelValue:{type:[String,Number],default:null},label:{type:String,default:"Label"},hasIcon:{type:Boolean,default:!1},iconUrl:{type:String,default:""}},setup(o,l){console.log("ðŸš€ðŸš€ðŸš€ ~ file: dropdown.vue:55 ~ setup ~ props:",o);const t=g(!1),a=g(null),v=g(null),y=()=>{t.value=!t.value},r=i=>{a.value=i,l.emit("update:modelValue",i.value),t.value=!1},u=()=>{a.value=o.options.find(i=>i.value===o.modelValue)||{label:"",value:null}},h=i=>{v.value&&!v.value.contains(i.target)&&(t.value=!1)};return K(()=>{document.addEventListener("click",h),u()}),W(()=>{document.removeEventListener("click",h)}),{isOpen:t,selectedOption:a,selectOption:r,toggleDropdown:y}}});const X=o=>(F("data-v-c4190e62"),o=o(),x(),o),Pe={class:"current-info"},Te={class:"icon-box"},Ie={class:"icon","aria-hidden":"true"},Be=["xlink:href"],De={class:"label"},Fe={class:"value"},xe=X(()=>p("use",{"xlink:href":"#icon-icon_on"},null,-1)),Ee=[xe],Re=["onClick"],Ne={key:0,"aria-hidden":"true",class:"icon"},Ue=X(()=>p("use",{"xlink:href":"#icon-icon_on-pool"},null,-1)),Me=[Ue];function je(o,l,t,a,v,y){return d(),f("div",{class:w(["dropdown-container",{open:o.isOpen}])},[p("div",{class:"dropdown-toggle",onClick:l[0]||(l[0]=(...r)=>o.toggleDropdown&&o.toggleDropdown(...r))},[J(o.$slots,"toggle",{},()=>{var r;return[p("div",Pe,[p("div",Te,[(d(),f("svg",Ie,[p("use",{"xlink:href":o.iconUrl},null,8,Be)]))]),p("span",De,L(o.label),1),p("span",Fe,L((r=o.selectedOption)==null?void 0:r.value),1)])]},!0),(d(),f("svg",{"aria-hidden":"true",class:w(["dropdown-icon",{open:o.isOpen}])},Ee,2))]),p("ul",{class:w(["dropdown-list",{open:o.isOpen}])},[(d(!0),f(D,null,Q(o.options,r=>(d(),f(D,{key:r.value},[r.value!==o.modelValue?(d(),f("li",{key:0,style:oe({color:r.color}),onClick:u=>o.selectOption(r)},[se(L(r.value)+" ",1),o.hasIcon?(d(),f("svg",Ne,Me)):M("",!0)],12,Re)):M("",!0)],64))),128))],2)],2)}const qe=C(Ae,[["render",je],["__scopeId","data-v-c4190e62"]]);function ze(){const o=te();pe();const{poolList:l,setPoolList:t,setPoolListLoading:a}=H(),v=(e,c)=>!!ce(z(e),z(c)),y=async e=>{var b,k,A;const c=(e==null?void 0:e.is_forward)===!1,n=(e==null?void 0:e.is_display_rewarder)&&((e==null?void 0:e.rewarder_display1)||(e==null?void 0:e.rewarder_display2)||(e==null?void 0:e.rewarder_display3)),_=[];if(n){const $=(A=(k=(b=e==null?void 0:e.object)==null?void 0:b.rewarder_manager)==null?void 0:k.fields)==null?void 0:A.rewarders;$==null||$.forEach((m,P)=>{var E,R,N,U;const V=I((E=m==null?void 0:m.fields)==null?void 0:E.emissions_per_second).mul(G.pow(2,-64));e!=null&&e[`rewarder_display${P+1}`]&&V.gt(0)&&_.push({coinType:ie((U=(N=(R=m==null?void 0:m.fields)==null?void 0:R.reward_coin)==null?void 0:N.fields)==null?void 0:U.name).source_address,emissionsEveryDay:q(V.mul(60*60*24).toString(),0)})})}return{...e,poolAddress:e==null?void 0:e.address,tokenAAddress:e==null?void 0:e.coin_a_address,tokenBAddress:e==null?void 0:e.coin_b_address,displayTokenAAddress:c?e==null?void 0:e.coin_b_address:e==null?void 0:e.coin_a_address,displayTokenBAddress:c?e==null?void 0:e.coin_a_address:e==null?void 0:e.coin_b_address,isReverse:c,tickSpacing:Number(e==null?void 0:e.tick_spacing),isClosed:e==null?void 0:e.is_closed,haveMining:n&&(_==null?void 0:_.length)>0,miningRewardList:_}},r=async(e,c)=>{const n=e==null?void 0:e.poolAddress,_=v(e==null?void 0:e.coinTypeA,e==null?void 0:e.coinTypeB),s=c[n],b=s&&(s==null?void 0:s.is_show_rewarder)&&((s==null?void 0:s.show_rewarder_1)||(s==null?void 0:s.show_rewarder_2)||(s==null?void 0:s.show_rewarder_3)),k=[];if(b){const $=e==null?void 0:e.rewarder_infos;$==null||$.forEach((m,P)=>{const V=I(m==null?void 0:m.emissions_per_second).mul(G.pow(2,-64));s!=null&&s[`show_rewarder_${P+1}`]&&V.gt(0)&&k.push({coinType:m==null?void 0:m.coinAddress,emissionsEveryDay:q(V.mul(60*60*24).toString(),0)})})}return{poolAddress:n,tokenAAddress:e==null?void 0:e.coinTypeA,tokenBAddress:e==null?void 0:e.coinTypeB,displayTokenAAddress:_?e==null?void 0:e.coinTypeB:e==null?void 0:e.coinTypeA,displayTokenBAddress:_?e==null?void 0:e.coinTypeA:e==null?void 0:e.coinTypeB,isReverse:_,tickSpacing:e.tickSpacing,isClosed:(s==null?void 0:s.is_closed)||!1,haveMining:b,miningRewardList:k,fee:I(e==null?void 0:e.fee_rate).div(Math.pow(10,6)).toString()}},u=async e=>{try{if(!e&&l&&(l==null?void 0:l.length)>0)return l;const c=await ue(`${re.Sui.api}/v2/sui/pools_info/v3`);console.log("ðŸš€ ~ file: usePoolList.ts:10 ~ fetchPoolList ~ res:",c);const n=c==null?void 0:c.lp_list;if(n){const _=[];for(let s=0;s<(n==null?void 0:n.length);s++){const b=n[s];if(!n[s].is_closed){const k=await y(b);_.push(k)}}return console.log("ðŸš€ ~ file: usePoolList.ts:61 ~ result ~ result:",_),_}}catch(c){if(console.error("ðŸš€ ~ file: usePoolList.ts:130 ~ fetchPoolList ~ error:",c),l)return l;try{return await h()||[]}catch(n){return console.error("ðŸš€ ~ file: usePoolList.ts:133 ~ fetchPoolList ~ e:",n),[]}}},h=async()=>{try{const e=await o.clmmSdk.CetusConfig.getClmmPoolConfigs()||[],c=Object.fromEntries(e.map(_=>[_==null?void 0:_.pool_address,_])),n=await o.clmmSdk.Pool.getPools([],0,9999);if(n){const _=[];for(let s=0;s<(n==null?void 0:n.length);s++){const b=n[s],k=await r(b,c);_.push(k)}return _}}catch(e){return console.error("ðŸš€ ~ file: usePoolList.ts:157 ~ getPoolListFromContract ~ error:",e),[]}};return{getPoolList:async()=>{a(!0);const e=await u();e&&t(e)}}}const Ge=o=>(F("data-v-e8cc00a3"),o=o(),x(),o),He={class:"icon-box"},Ke=Ge(()=>p("use",{"xlink:href":"#icon-icon_refresh"},null,-1)),We=[Ke],Je={__name:"pool-list-refresh-icon",setup(o){const{getPoolList:l}=ze(),t=g(!1),a=()=>{t.value=!0,l(),setTimeout(()=>{t.value=!1},1e3)};return(v,y)=>(d(),f("div",{class:"pool-list-refresh-icon",onClick:a},[p("div",He,[(d(),f("svg",{class:w(["icon",{refresh:t.value}]),"aria-hidden":"true"},We,2))])]))}},Qe=C(Je,[["__scopeId","data-v-e8cc00a3"]]),Xe={class:"pool-filter-block"},Ye=O({__name:"pool-filter-block",emits:["sort","filterPoolByCoin"],setup(o,{emit:l}){const t=g([{label:"Mining"},{label:"Farming"},{label:"No incentives"}]),a=g([{label:"Option 1",value:"All"},{label:"Option 2",value:"Wormhole",color:"#72C1F7"},{label:"Option 3",value:"Celer",color:"#6F86FF"}]);g([{label:"Option 1",value:"VOL"},{label:"Option 2",value:"APR"},{label:"Option 3",value:"TVL"}]);const v=H(),y=B(()=>v),r=B(()=>y.value.incentiveTypeList),u=r.value?g(r.value):g(["Mining","Farming","No incentives"]);j(()=>[u.value],([i])=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: pool-filter-block.vue:68 ~ newValue:",i),u.value=i,v.setIncentiveTypeList(i)},{immediate:!0});const h=g("All");return j(()=>h.value,i=>{v.setLabel(i)}),(i,e)=>(d(),f("div",Xe,[S(Y,{"is-allow-ban":!0,"have-import-btn":!0}),p("div",null,[S(Z),S(Oe,{modelValue:T(u),"onUpdate:modelValue":e[0]||(e[0]=c=>ne(u)?u.value=c:null),options:t.value,"icon-url":"#icon-icon_type_1",num:T(u)&&T(u).length,label:"Incentive type"},null,8,["modelValue","options","num"]),S(qe,{modelValue:h.value,"onUpdate:modelValue":e[1]||(e[1]=c=>h.value=c),options:a.value,label:"Label","icon-url":"#icon-icon_label"},null,8,["modelValue","options"]),S(Qe)])]))}});const uo=C(Ye,[["__scopeId","data-v-38fc47bc"]]);export{uo as P,ze as u};
