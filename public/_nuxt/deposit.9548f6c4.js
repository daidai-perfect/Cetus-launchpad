import{_ as Na}from"./back.198d3334.js";import{_ as qa}from"./refresh-icon.1dd6f82a.js";import{_ as La}from"./swap-setting.790eb90f.js";import{u as wo,a as Ma,c as In}from"./sha256.7f09dfa8.js";import{u as bn,c as yo,e as An,d as Fe,i as xn,t as ea,j as gn,n as $n,a as oo,k as Tn,s as Qo,b as Co,l as oa,p as na}from"./pool.c7bdc0b4.js";import{a as Po,r as g,H as kn,K as Ra,l as Z,q as we,b as sa,e as Io,o as s,f,h as t,v,i as ge,A as ye,c as fe,x as w,p as xo,k as en,s as Nn,t as co,j as De,I as ua,m as da,w as ze,M as Ua,u as Ae,B as ca,N as Oa,O as aa,F as No,E as Yo,S as va,y as Ba,z as Sn,P as Fa}from"./entry.61500d5d.js";import{i as Ze}from"./import-icon.de3e6c66.js";import{_ as ja}from"./assets-card.e0fc1841.js";import{_ as _a}from"./coin-lock.15636a36.js";import{_ as Da}from"./img-lock_2x.a28135f4.js";import{_ as Wa}from"./img-lock_2x.ba1d908b.js";import{_ as Ha,a as Ea}from"./new-add-or-create.3fcd8570.js";import{_ as za}from"./network-tips.0495b556.js";/* empty css              *//* empty css              */import{D as h}from"./decimal.0bdeb344.js";import{s as fn,m as Xa,l as Va,b as Ka,a as Za}from"./transform.c672907f.js";import{_ as Ga}from"./apr-tab.eb2b8b4b.js";import{_ as Ja}from"./token-warning.9ebb122a.js";import{_ as Qa}from"./apr-tips.578f992f.js";/* empty css              */import{p as Ya}from"./precision.a7a6c57b.js";import{_ as xa}from"./coin-select.69595517.js";import{_ as et}from"./viewDetail.6d0a5108.js";import{a as ot,s as nt,_ as at}from"./poolFee.12cf2746.js";import{_ as tt}from"./token-warning-modal.cda7de73.js";/* empty css              */import{u as lt}from"./notifi.e1e2a417.js";import{_ as ta,a as la}from"./icon-Add-Liquidity_2x.0acb06cb.js";import{_ as pa}from"./icon-selected_3x.09e9a6f0.js";import{_ as ma,a as fa}from"./img-no-data_2x.708a7f95.js";/* empty css              *//* empty css              */import"./icon-error_2x.539d1e6a.js";import"./status-block.dddc5aa8.js";import"./index.364dc328.js";import"./token-warning_2x.28d81f1f.js";import"./img-no-Positions_2x.1c41be11.js";import"./img-no-Positions_2x.074135fe.js";import"./icon-arrow_2x.948aedb2.js";import"./icon-arrow_2x.4ffddb8e.js";import"./useWhale.375ab066.js";const it=Po({props:{poolInfo:{type:Object,default:()=>({})}},setup(e,a){const W=g(!1),z=g(null),F=g(0),Y=g(20),G=bn(),ie=wo(),X=g(!1);kn(()=>{}),Ra(()=>{clearInterval(z.value)});const x=()=>{z.value=setInterval(()=>{var A;X.value||F.value<Y.value&&(F.value+=1,F.value===Y.value&&((A=e==null?void 0:e.poolInfo)!=null&&A.poolAddress&&G.updateCurrentPools(e.poolInfo.poolAddress,ie.chainName),F.value=0))},1e3)},ee=Z(()=>ie.slippage),D=()=>{a.emit("clearAll")},re=()=>{F.value=0,a.emit("clickRefresh")};we(()=>e.poolInfo,A=>{A&&!z.value&&x()},{immediate:!0});const Te=sa();return{clickRefresh:re,isShowSwapSetting:W,countdown:F,autoRefreshTime:Y,slippage:ee,clearAll:D,checkNullObj:yo,router:Te}}});const rt=e=>(xo("data-v-f484e6e0"),e=e(),en(),e),st={class:"title"},ut={class:"left"},dt=rt(()=>t("svg",{class:"icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),ct={class:"deposit-progress"};function vt(e,a,W,z,F,Y){var X,x;const G=qa,ie=La;return s(),f("div",st,[t("div",ut,[t("span",null,v(e.poolInfo?e.$t("common.concentratedLiquidity"):(x=(X=e.$route)==null?void 0:X.query)!=null&&x.action?e.$t("newAdd.createClmmPool"):e.$t("common.concentratedLiquidity")),1)]),t("div",{class:ye(["right title-right deposit-setting",e.poolInfo?"havePoolInfo":"noPoolInfo"])},[t("div",{class:"slippage-icon",onClick:a[0]||(a[0]=ee=>e.isShowSwapSetting=!0)},[dt,t("span",null,v(e.slippage)+"%",1)]),t("div",ct,[ge(G,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])],2),e.isShowSwapSetting?(s(),fe(ie,{key:0,onOnClose:a[1]||(a[1]=ee=>e.isShowSwapSetting=!1)})):w("",!0)])}const pt=Io(it,[["render",vt],["__scopeId","data-v-f484e6e0"]]);const mt=Po({props:{coinIcon:{type:String,default:""},coin:{type:Object,default:()=>({})}},setup(e){const a=wo(),W=Z(()=>a),z=g(""),F=g(""),Y=g(""),G=bn(),ie=Z(()=>G),X=g(""),x=D=>{var re;X.value=(D==null?void 0:D.logoURI)||(D==null?void 0:D.logo_url)||((re=ie.value.tokensObj[D==null?void 0:D.address])==null?void 0:re.logo_url)||(W.value.theme==="default"?Ze("/image/coins/unknown.png"):Ze("/image/coins/sui-unknown.png"))};we(()=>[e.coin,ie.value.tokensObj],([D,re])=>{var Te;D?(F.value=re&&re[D.address]&&((Te=re[D.address])==null?void 0:Te.labels),z.value=D.name,Y.value=D.symbol,x(D)):(F.value="",z.value="",Y.value="",X.value="")},{immediate:!0,deep:!0});const ee=Z(()=>{var D,re,Te;return e.coinIcon||((Te=(re=ie==null?void 0:ie.value)==null?void 0:re.tokensObj[(D=e.coin)==null?void 0:D.address])==null?void 0:Te.logo_url)||(W.value.theme==="default"?Ze("/image/coins/unknown.png"):Ze("/image/coins/sui-unknown.png"))});return{store:W,importIcon:Ze,coinName:z,coinLabels:F,coinSymbol:Y,currentIcon:ee,coinLogo:X,getCoinIcon:x}}}),ft=e=>(xo("data-v-0da5c5b4"),e=e(),en(),e),gt={class:"coin-block"},bt={class:"coin-info"},kt={class:"symbol"},ht={key:0,class:"name"},Ct={key:0,class:"label"},yt=ft(()=>t("div",null,[t("svg",{class:"icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-icon_on"})])],-1));function wt(e,a,W,z,F,Y){const G=Nn("image");return s(),f("div",gt,[t("div",null,[co(t("img",null,null,512),[[G,e.coinLogo]]),t("div",bt,[t("div",kt,v(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinName?(s(),f("div",ht,[De(v(e.coin.name)+" ",1),e.store.theme=="default"?(s(),f("span",Ct,v(e.coinLabels?`(${e.coinLabels})`:""),1)):w("",!0)])):w("",!0)])]),yt])}const Pt=Io(mt,[["render",wt],["__scopeId","data-v-0da5c5b4"]]),It=Po({props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},poolInfo:{type:Object,default:()=>({})},showfromCoinLock:{type:Boolean,default:!1},showtoCoinLock:{type:Boolean,default:!1}},setup(){const e=wo();return{storeIndex:Z(()=>e)}}});const Tt={class:"create-pool-lock"},St={key:0,src:Da,alt:""},$t={key:1,src:Wa,alt:""};function At(e,a,W,z,F,Y){return s(),f("div",Tt,[t("div",null,[e.storeIndex.theme=="default"?(s(),f("img",St)):(s(),f("img",$t))])])}const Nt=Io(It,[["render",At],["__scopeId","data-v-5d070e17"]]),qt=Po({props:{clickClear:{type:Boolean,default:!1},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},intPrice:{type:String,default:""}},setup(e,a){const W=g("");return{inpValue:W,changecurrentPrice:F=>{var G;console.log(F.target.value,"e.target.value"),console.log((G=e.fromCoin)==null?void 0:G.decimals,"==>props.fromCoin?.decimals");const Y=new RegExp("[^\\d-]*(\\d*(?:\\.\\d*)?).*$");F.target.value=F.target.value.replace(Y,"$1"),W.value=F.target.value,console.log(W.value,"===>inpValue.value"),a.emit("changecurrentPrice",W.value)}}}});const Lt={class:"set-init-price"},Mt={class:"init-price-tips"};function Rt(e,a,W,z,F,Y){var ie,X,x,ee;const G=ua;return s(),f("div",Lt,[ge(G,{type:"text",placeholder:"0.0",value:e.intPrice,disabled:!((X=(ie=e.$route)==null?void 0:ie.query)!=null&&X.fee),onChange:e.changecurrentPrice},null,8,["value","disabled","onChange"]),t("div",Mt,v((x=e.toCoin)==null?void 0:x.symbol)+" per "+v((ee=e.fromCoin)==null?void 0:ee.symbol),1)])}const Ut=Io(qt,[["render",Rt],["__scopeId","data-v-9e71be9e"]]),Ot=Po({props:{inputValue:{type:String,default:""},pType:{type:String,required:!0},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},defaultMaxPrice:{type:String,default:""},defaultMinPrice:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1},intPrice:{type:String,default:""}},emits:["onInput"],setup(e,a){const W=g(""),z=g("");let F=g(""),Y=g("");const G=da(),ie=wo(),X=Z(()=>ie),x=Z(()=>X.value.chainName?An(X.value.chainName):{}),ee=()=>{if(!(Number.isNaN(W.value)||Number(W.value)!==0&&!W.value||!e.poolInfo.tickSpacing))try{const m=xn(new h(W.value.toString()),Number(A.value.tickSpacing)),H=ea(m+Number(A.value.tickSpacing));if(e.pType=="Min"&&Number(H.toString())>=Number(Y.value.toString()))return;const T=H.toString();a.emit("onInput",T)}catch{a.emit("onInput","")}},D=()=>{try{if(Number.isNaN(W.value)||!W.value||!e.poolInfo.tickSpacing)return;const m=xn(new h(W.value),Number(A.value.tickSpacing)),H=ea(m-Number(A.value.tickSpacing)),T=H.toString();if(e.pType=="Max"&&Number(H)<=Number(F.value))return;a.emit("onInput",T)}catch{a.emit("onInput","")}},re=m=>{let H=m.toString().replace(/[^\d.]/g,"");const T=/^\d+(\.\d+)?$/;H.split(".").length>2&&!T.exec(H)&&(H=H.substr(0,H.length-1)),z.value=String(H),console.log(H,"v===>")},Te=m=>{var E,ue,$e,ve;const{TickUtil:H,TickMath:T,getNearestTickByTick:k}=x.value;console.log("0519###onBlur###event###",m);const l=m.target.value;console.log("0519###onBlur###value###",l);let c;if(l==="0"){c=-443636,a.emit("onInput","0");return}else{const j=T.priceToTickIndex(new h(l),(E=A.value.token_a)==null?void 0:E.decimals,(ue=A.value.token_b)==null?void 0:ue.decimals);console.log("0519###onBlur###t###",j),c=k(Number(j),Number(A.value.tickSpacing))}console.log("0519###onBlur###tick###",c);const O=T.tickIndexToPrice(new h(c),($e=A.value.token_a)==null?void 0:$e.decimals,(ve=A.value.token_b)==null?void 0:ve.decimals);console.log("0519###onBlur###price###",O.toString()),a.emit("onInput",O.toString())};we(()=>e.defaultMinPrice,(m,H)=>{m!==H&&(console.log(e.defaultMinPrice,"props.defaultMinPrice===>"),F.value=e.defaultMinPrice,console.log(F.value,"props.minPrice.value===>"))},{immediate:!0}),we(()=>e.defaultMaxPrice,(m,H)=>{m!==H&&(Y.value=e.defaultMaxPrice)},{immediate:!0}),we(()=>z.value,m=>{console.log(m,"=sdajlaksjdkldas")},{immediate:!0}),we(()=>[e.inputValue,G.query.action],([m])=>{if(console.log(m,"==>newValue"),m&&m!=="0"&&m!=="∞"){W.value=m;const T=m.toString().split(".")[1];z.value=m!=="0"&&m!=="∞"&&T&&T.length>6?Fe(m.toString(),6):m.toString()}else(m=="0"||m=="∞"||G.query.action)&&(z.value=m);console.log(z.value,"===> oValue.value")},{immediate:!0});const A=g({});we(()=>e.poolInfo,(m,H)=>{m&&(A.value=m)},{immediate:!0});const no=g("");return we(()=>e.currentPriceTab,m=>{no.value=m},{immediate:!0}),console.log(e,"props=======>"),{addPrice:ee,minusPrice:D,oValue:z,changeValue:re,isDisabled:no,route:G,onBlur:Te}}});const Bt={class:"set-price-item"},Ft={class:"title"},jt={class:"input-box"},_t={class:"minus-btn"},Dt=["disabled"],Wt={class:"plus-btn"};function Ht(e,a,W,z,F,Y){const G=ua,ie=Ua;return s(),f("div",Bt,[t("div",Ft,v(e.pType=="Max"?e.$t("common.maxPrice"):e.pType=="Min"?e.$t("common.minPrice"):""),1),ge(ie,{loading:e.loading,active:"",paragraph:!1},{default:ze(()=>[t("div",jt,[t("a",_t,[t("div",{class:ye(!e.fromCoin&&!e.toCoin||e.poolInfo&&!e.poolInfo.tickSpacing&&!e.$route.query.action?"reductionDis":"reduction"),disabled:e.isDisabled!=="Custom",onClick:a[0]||(a[0]=(...X)=>e.minusPrice&&e.minusPrice(...X))},null,10,Dt)]),ge(G,{id:"pValu",value:e.oValue,"onUpdate:value":a[1]||(a[1]=X=>e.oValue=X),disabled:e.route.query.action&&!e.intPrice,autocomplete:"off",placeholder:"0",onChange:a[2]||(a[2]=X=>e.changeValue(X.target.value)),onBlur:a[3]||(a[3]=X=>e.onBlur(X))},null,8,["value","disabled"]),t("a",Wt,[t("div",{class:ye(!e.fromCoin&&!e.toCoin||e.poolInfo&&!e.poolInfo.tickSpacing&&!e.$route.query.action?"addDis":"add"),onClick:a[4]||(a[4]=(...X)=>e.addPrice&&e.addPrice(...X))},null,2)])])]),_:1},8,["loading"]),t("p",{class:ye(["per-text",!e.toCoin&&!e.fromCoin?"per-text-disabled":""])},v(e.toCoin&&e.toCoin.symbol)+" per "+v(e.fromCoin&&e.fromCoin.symbol),3)])}const ia=Io(Ot,[["render",Ht],["__scopeId","data-v-4029f5b6"]]),Et=Po({props:{min:{type:String,default:""},max:{type:String,default:""},defaultMinPrice:{type:String,default:""},defaultMaxPrice:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},invalidPriceRange:{type:Boolean,default:!1},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1},intPrice:{type:String,default:""}},setup(e,a){let W=g(""),z=g(""),F=g(),Y=g(!1),G=g(!1);const ie=g({}),X=wo(),x=Z(()=>X);kn(()=>{W.value=e.min,z.value=e.max}),we(()=>e.currentPriceTab,(m,H)=>{m!==H&&(F.value=e.currentPriceTab)},{immediate:!0}),we(()=>e.min,(m,H)=>{m!==H&&(W.value=m,console.log(e.min,"===> props.min"))}),we(()=>e.max,(m,H)=>{m!==H&&(z.value=m)}),we(()=>e.poolInfo,(m,H)=>{m&&(ie.value=m)},{immediate:!0});const ee=g("");we(()=>e.intPrice,m=>{console.log(e.intPrice,"===>props.intPrice"),ee.value=m},{immediate:!0,deep:!0});const D=m=>{console.log(m,"val===>123"),W.value=m,a.emit("onChangeMinPrice",m)},re=m=>{z.value=m,a.emit("onChangeMaxPrice",m)};we(Y,(m,H)=>{m!==H&&a.emit("onChangeFullRange",m)});const Te=()=>{W.value=e.defaultMinPrice,z.value=e.defaultMaxPrice,G.value=!1,Y.value=!1},A=()=>{G.value=!1,W.value="0",z.value="∞"};return we(Y,(m,H)=>{m!==H&&a.emit("onChangeFullRange",m)}),{store:x,changeMinPrice:D,changeMaxPrice:re,importIcon:Ze,resetPrice:Te,changeShowUnderStand:()=>{Y.value=!Y.value,Y.value?G.value=!0:Te(),G.value||(W.value=e.defaultMinPrice,z.value=e.defaultMaxPrice)},showUnderStand:G,minPrice:W,maxPrice:z,understand:A,isRadio:Y,initPirce:ee}}});const zt={class:"set-price"},Xt={class:"card-container"},Vt={key:0,class:"card"},Kt=["src"],Zt={key:1,class:"understand"},Gt={class:"left"},Jt={class:"right"};function Qt(e,a,W,z,F,Y){const G=ia,ie=ia,X=ca;return s(),f("div",zt,[t("div",Xt,[e.showUnderStand?(s(),f("div",Zt,[t("div",Gt,[t("p",null,v(e.$t("common.lowerEfficiency")),1),t("p",null,v(e.$t("common.lowerEfficiencyTips")),1)]),t("div",Jt,[ge(X,{onClick:e.understand},{default:ze(()=>[De(v(e.$t("common.understand")),1)]),_:1},8,["onClick"])])])):(s(),f("div",Vt,[ge(G,{value:e.minPrice,"onUpdate:value":a[0]||(a[0]=x=>e.minPrice=x),"input-value":e.minPrice,"p-type":"Min","default-max-price":e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"current-price-tab":e.currentPriceTab,"int-price":e.initPirce,onOnInput:e.changeMinPrice,onAddValue:e.changeMinPrice,onDelValue:e.changeMinPrice},null,8,["value","input-value","default-max-price","from-coin","to-coin","dirction","pool-info","loading","current-price-tab","int-price","onOnInput","onAddValue","onDelValue"]),ge(ie,{value:e.maxPrice,"onUpdate:value":a[1]||(a[1]=x=>e.maxPrice=x),"input-value":e.maxPrice,"p-type":"Max","default-min-price":e.minPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"int-price":e.initPirce,"current-price-tab":e.currentPriceTab,onOnInput:e.changeMaxPrice,onAddValue:e.changeMaxPrice,onDelValue:e.changeMaxPrice},null,8,["value","input-value","default-min-price","from-coin","to-coin","dirction","pool-info","loading","int-price","current-price-tab","onOnInput","onAddValue","onDelValue"]),t("img",{src:("importIcon"in e?e.importIcon:Ae(Ze))("/image/lmg-line@2x.png"),alt:""},null,8,Kt)]))])])}const Yt=Io(Et,[["render",Qt],["__scopeId","data-v-d07618c3"]]);function ra(e,a,W){const z=new h(10).pow(a-W);return new h(1.0001).pow(e).mul(z)}const xt=Po({props:{poolInfo:{type:Object,default:()=>({chartLoading:!1,token_a:{decimal:6},token_b:{decimal:6},currentLiquity:"50000000"})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:()=>[]},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1},currentPriceTab:{type:String,default:""},before7dContractPriceLowest:{type:String,default:""},before7dContractPriceHighest:{type:String,default:""}},setup(e,a){const W=g(1),z=g(""),F=g(""),Y=Z(()=>{var l,c,O;return D.sqrtPriceX64ToPrice((l=e.poolInfo)==null?void 0:l.current_sqrt_price,(c=e.poolInfo)==null?void 0:c.coinA.decimals,(O=e.poolInfo)==null?void 0:O.coinB.decimals).toString()}),G=Z(()=>{let l=0;return e.direction?l=(Number(e.minPrice)/Number(Y.value)-1)*100:l=(Number(e.minPrice)/Number(1/Number(Y.value))-1)*100,l=l>0&&l<.1?.1:l,l=l<0&&l>-.1?-.1:l,l}),ie=Z(()=>{let l=0;return e.direction?l=(Number(e.maxPrice)/Number(Y.value)-1)*100:l=(Number(e.maxPrice)/Number(1/Number(Y.value))-1)*100,l=l>0&&l<.1?.1:l,l=l<0&&l>-.1?-.1:l,l}),X=wo(),x=Z(()=>X),ee=Z(()=>x.value.chainName?An(x.value.chainName):{}),{TickMath:D,getNearestTickByTick:re}=ee.value,Te=()=>{const l=W.value/2;W.value=l,m(e.poolInfo,l)},A=()=>{const l=W.value*2;W.value=l,m(e.poolInfo,l)},no=(l=[])=>{let c=6;const O=Math.abs(Number(l[0])-Number(l[l.length-1]));return O>=6?c=0:O>=1?c=1:O>=.1?c=2:O>=.01?c=3:O>=.001?c=4:O>=1e-4?c=5:O>=1e-5?c=6:O>=1e-6?c=7:O>=1e-7&&(c=8),c},m=(l,c=1)=>{if(l&&l.token_a&&!e.chartLoading&&e.minPrice&&e.maxPrice){console.log(e.poolInfo,"==>props.poolInfo");const O=Number(e.poolInfo.current_tick_index);console.log("0117###dataProcessing###currentTick###",O),console.log("0117###dataProcessing###props.poolInfo###",e.poolInfo),console.log("0117###dataProcessing###minPrice###",e.minPrice),console.log("0117###dataProcessing###maxPrice###",e.maxPrice),console.log("0117###dataProcessing###poolInfo###",e.poolInfo);let E=O+100*c,ue=O-100*c,$e,ve;if(e.maxPrice==="∞")ve=ee.value.TickUtil.getMaxIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?ve=D.priceToTickIndex(new h(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):ve=D.priceToTickIndex(new h(1).div(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{ve=443636}if(e.minPrice==="0")$e=ee.value.TickUtil.getMinIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?$e=D.priceToTickIndex(new h(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):$e=D.priceToTickIndex(new h(1).div(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{$e=-443636}let j=0;if(e.currentPriceTab!=="full range"){if(O>=$e&&O<=ve){const oe=O-$e,M=ve-O;j=Math.max(Math.abs(oe),Math.abs(M))}else O<$e?j=Math.abs(ve-O):j=Math.abs(O-$e);E=O+j+100*c,ue=O-j-100*c,console.log(c,O,"===>zooms")}else{const oe=(Math.abs(O)>5e3,2e4);E=O+oe*c,ue=O-oe*c}ue<-443636&&(ue=-443636),E>443636&&(E=443636),console.log(ue,E,"===>201");const te=new h(l.liquidity).div(Math.pow(10,8)).toString();console.log(te,"==>currentLiquity");const V=e.tickList;console.log("0117####drawChart####tick_info_array####",V);const ae=[],Oe=[];let J={};for(let oe=0;oe<V.length;oe++){if(J=V[oe],J.index<=O&&J.index>=ue){if(ae.length<1&&oe!==0){const M=V[oe-1];ae.unshift({...M,index:ue})}ae.unshift(J)}else if(J.index>O&&J.index<=E&&(Oe.push(J),ae.length<1&&oe!==0)){const M=V[oe-1];ae.push({...M,index:ue})}if(J.index>E){const M=V[oe];if(Oe.push({...M,index:E}),ae.length<1&&oe!==0){const To=V[oe-1];ae.push({...To,index:ue})}break}}console.log(O,ue,E,"===>currentTick");let Pe="0";for(let oe=ae.length-1;oe>=0;oe--)Pe=new h(Pe).plus(new h(ae[oe].liquidityNet.toString()).div(Math.pow(10,8))).toString(),ae[oe].liquityAmount=Pe;let de=te;for(let oe=0;oe<Oe.length;oe++)de=new h(de).plus(new h(Oe[oe].liquidityNet.toString()).div(Math.pow(10,8))).toString(),Oe[oe].liquityAmount=de;console.log(ae.length,Oe.length,"leftArray");let Ne=[];const le=V&&V.length>0?{index:O,liquityAmount:Number(te)}:{index:O,liquityAmount:0};(ae.length>0||Oe.length>0)&&(console.log([le,...Oe],"279===>"),Ne=[...ae.reverse(),le,...Oe],e.direction||(Ne=Ne.reverse()));const Ee=[];V.forEach(oe=>{Ee.push({...oe,liquidityGross:oe.liquidityGross.toString(),liquidityNet:oe.liquidityNet.toString()})}),console.log("0117####drawChart####testTickInfoArray####",Ee),console.log("0117####drawChart####currentLiquity####",te),console.log(Ne,"===>chartData"),T(Ne,ue,E,$e,ve,O)}};let H=g(!1);kn(()=>{document.body.clientWidth<750?H.value=!1:H.value=!0,window.onresize=()=>{document.body.clientWidth<750?H.value=!1:H.value=!0,m(e.poolInfo,W.value)}});const T=(l,c,O,E,ue,$e)=>{console.log("0117####drawChart####chartData####",l),console.log("0117####drawChart####tickMin####",c),console.log("0117####drawChart####tickMax####",O),console.log("0117####drawChart####minPriceTick####",E),console.log("0117####drawChart####maxPriceTick####",ue),console.log("0117####drawChart####currentTick####",$e),console.log("0117####drawChart####props.direction####",e.direction),console.log("0518###newd3###props.before7dContractPriceLowest###",e.before7dContractPriceLowest),console.log("0518###newd3###props.before7dContractPriceHighest###",e.before7dContractPriceHighest);let ve,j;e.direction?(ve=e.before7dContractPriceLowest&&Number(e.before7dContractPriceLowest)>0?D.priceToTickIndex(new h(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",j=e.before7dContractPriceHighest&&Number(e.before7dContractPriceHighest)>0?D.priceToTickIndex(new h(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):""):(ve=e.before7dContractPriceLowest&&Number(e.before7dContractPriceLowest)>0?D.priceToTickIndex(new h(1).div(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",j=e.before7dContractPriceHighest&&Number(e.before7dContractPriceHighest)>0?D.priceToTickIndex(new h(1).div(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"");const te={top:30,right:35,bottom:20,left:55};let V,ae;H.value?(V=460-te.left-te.right,ae=205-te.top-te.bottom):(V=340-te.left-te.right,ae=205-te.top-te.bottom);const Oe=O-c,J=parseInt(String(Oe/4));let Pe=[c+J/4,c+J,c+2*J,O-J,O-J/4];const de=c,Ne=O,le=V/(Ne-de);e.currentPriceTab==="full range"&&(Pe=[c,c+2*J,O]),console.log("0117####drawChart####xArr####",Pe),console.log("0117####drawChart####utickMin####",de),console.log("0117####drawChart####utickMax####",Ne),console.log("0117####drawChart####unit####",le);const Ee=Pe.map(R=>e.direction?ra(R,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString():new h(1).div(ra(R,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)).toString()),oe=no(Ee);fn("#chart").selectAll("*").remove();const M=fn("#chart").attr("width",V+te.left+te.right).attr("height",ae+te.top+te.bottom).append("g").attr("transform",`translate(${te.left},${te.right})`),To=Xa(l,function(R){return Number(Math.abs(R.liquityAmount))})||0,q=Va().range([0,ae]).domain([To,0]);Ka().rangeRound([0,V]).padding(.1);const qo=M.append("g").attr("id","barsBox").selectAll("rect").data(l).enter().append("rect");x.value.theme=="default"?qo.attr("x",function(R,P){return P===0?0:e.direction?Math.abs(R.index-de)*le:Math.abs(Ne-R.index)*le}).attr("y",function(R,P){return e.direction?P===l.length-1?0:q(R.liquityAmount):P===l.length-1?0:q(l[P+1].liquityAmount)}).attr("width",function(R,P){return P===0&&l.length===1&&R.liquityAmount>0?V:(e.direction,P!==l.length-1?Math.abs(l[P+1].index-R.index)*le:0)}).attr("height",function(R,P){return P===0&&l.length===1&&R.liquityAmount>0?ae:e.direction?P===l.length-1?0:ae-q(R.liquityAmount):P===l.length-1?0:ae-q(l[P+1].liquityAmount)}).attr("fill","#279477").attr("class","bars").attr("stroke-width",1).attr("stroke","#279477"):qo.attr("x",function(R,P){return P===0?0:e.direction?Math.abs(R.index-de)*le:Math.abs(Ne-R.index)*le}).attr("y",function(R,P){return e.direction?P===l.length-1?0:q(Math.abs(R.liquityAmount)):P===l.length-1?0:q(Math.abs(l[P+1].liquityAmount))}).attr("width",function(R,P){return P===0&&l.length===1&&R.liquityAmount>0?V:(e.direction,P!==l.length-1?Math.abs(l[P+1].index-R.index)*le:0)}).attr("height",function(R,P){if(P===0&&l.length===1&&R.liquityAmount>0)return ae;if(e.direction)return P===l.length-1?0:Number(R.liquityAmount)?ae-q(Math.abs(R.liquityAmount)):0;{if(P===l.length-1)return 0;const Xe=ae-q(Math.abs(l[P+1].liquityAmount));return Number(l[P+1].liquityAmount)?Xe:0}}).attr("fill","#407497").attr("class","bars").attr("stroke-width",1).attr("stroke","#407497");const Lo=M.append("g");Lo.append("line").attr("x1",0).attr("y1",155).attr("x2",V).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D");const po=Lo.append("g");let So=0;if(e.direction){for(let R=0;R<Pe.length;R++){const P=Fe(Ee[R],oe)||"0";console.log("0423####price####",P),Ee.push(P);const Xe=Math.abs(Pe[R]-de)*le;let Le=0;for(let be=0;be<P.length;be++)P[be]==="1"?Le+=4.02:P[be]==="."?Le+=2.64:P[be]==="7"?Le+=5.48:Le+=6;console.log(Xe,"x=>>>"),po.append("text").text(P).attr("x",Xe-Le/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}So=Math.abs($e-de)*le}else{for(let R=Pe.length-1;R>=0;R--){const P=Fe(Ee[R],oe)||0;Ee.push(P);const Xe=Math.abs(Pe[R]-Ne)*le;let Le=0;for(let be=0;be<P.length;be++)P[be]==="1"?Le+=4.02:P[be]==="."?Le+=2.64:P[be]==="7"?Le+=5.48:Le+=6;po.append("text").text(P).attr("x",Xe-Le/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}So=Math.abs($e-Ne)*le}(x.value.theme=="default"?M.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#68FFD8"):M.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#76C8FF")).attr("transform","translate("+So+", 0)");let Ge,We,mo,fo;e.direction?(console.log("0525###d3###select###minPriceTick###",E),console.log("0525###d3###select###maxPriceTick###",ue),console.log("0525###d3###select###props.minPrice###",e.minPrice),console.log("0525###d3###select###props.maxPrice###",e.maxPrice),Ge=E<de?-100:parseInt(String(Math.abs(E-de)*le)),We=ue<de?-100:parseInt(String(Math.abs(ue-de)*le)),mo=ve<de?-100:Math.abs(ve-de)*le,fo=j<de?-100:Math.abs(j-de)*le):(We=E<de?-100:Math.abs(Ne-E)*le,Ge=ue<de?-100:Math.abs(Ne-ue)*le,fo=ve<de?-100:Math.abs(Ne-ve)*le,mo=j<de?-100:Math.abs(Ne-j)*le),e.minPrice==="0"&&(Ge=0),e.maxPrice==="∞"&&(We=V),H.value?z.value=V-Ge+60+"px":z.value=V-Ge+52+"px",F.value=We+74+"px",ve&&mo<V&&M.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+mo+", 0)"),j&&fo<V&&M.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+fo+", 0)");const Je=M.append("g").attr("id","left-handle"),Be=M.append("g").attr("id","right-handle");x.value.theme=="default"?(Je.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),Je.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 20) rotate(180)"),Je.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",6).attr("fill","#68FFD8"),Je.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",4.5).attr("fill","#68FFD8"),Be.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),Be.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),Be.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",6).attr("fill","#68FFD8"),Be.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",4.5).attr("fill","#68FFD8")):(Je.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),Je.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 24) rotate(180)"),Je.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",8).attr("fill","#76C8FF"),Je.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",6.5).attr("fill","#76C8FF"),Be.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),Be.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),Be.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",8).attr("fill","#76C8FF"),Be.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",6.5).attr("fill","#76C8FF")),console.log("0525###d3###select###minPriceTickX###",Ge),console.log("0525###d3###select###maxPriceTickX###",We),Je.attr("transform","translate("+Ge+", 0)"),Be.attr("transform","translate("+We+", 0)");const Mo=Za().extent([[0,0],[V,ae]]).handleSize(30).on("end",_o);M.append("g").attr("class","brush").call(Mo).call(Mo.move,[Ge,We]);function _o(R){if(!R.sourceEvent||!R.selection)return;Je.attr("transform","translate("+R.selection[0]+", 0)"),Be.attr("transform","translate("+R.selection[1]+", 0)"),H.value?z.value=V-R.selection[0]+60+"px":z.value=V-R.selection[0]+52+"px",F.value=R.selection[1]+74+"px";let P,Xe;console.log("0525###d3###select###e.selection[0]###",R.selection[0]),console.log("0525###d3###select###e.selection[0]###",R.selection[1]),console.log("0525###d3###select###props.direction###",e.direction),console.log("0525###d3###select###width###",V),console.log("0525###d3###select###unit###",le),console.log("0525###d3###select###utickMin###",de),console.log("0525###d3###select###utickMax###",Ne),console.log("0525###d3###select###props.poolInfo###",e.poolInfo);let Le=0,be=0;e.direction?(Le=re(parseInt(String(R.selection[0]/le+de)),Number(e.poolInfo.tickSpacing)),P=D.tickIndexToPrice(Le,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),be=re(parseInt(String(R.selection[1]/le+de)),Number(e.poolInfo.tickSpacing)),Xe=D.tickIndexToPrice(be,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),console.log("0525###d3###select###minTick###",Le),console.log("0525###d3###select###maxTick###",be),console.log("0525###d3###select###minPrice###",P),console.log("0525###d3###select###maxPrice###",Xe)):(be=re(Ne-R.selection[0]/le,Number(e.poolInfo.tickSpacing)),P=1/D.tickIndexToPrice(be,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),Le=re(Ne-R.selection[1]/le,Number(e.poolInfo.tickSpacing)),Xe=1/D.tickIndexToPrice(Le,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString()),a.emit("onChangeMinPrice",String(Fe(String(P),6))),a.emit("onChangeMaxPrice",String(Fe(String(Xe),6)))}x.value.theme=="default"?fn(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#15322C"):fn(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#152632")};g(""),we(()=>[e.poolInfo,e.minPrice,e.maxPrice,e.currentPriceTab],([l,c,O,E])=>{console.log(l,c,O,O>c,"poolInfo && minPrice && maxPrice && (maxPrice > minPrice)"),l&&c&&O&&m(l,W.value)},{immediate:!0});const k=g(!0);return we(()=>e.chartLoading,(l,c)=>{l!==c&&(k.value=l)},{immediate:!0,deep:!0}),{store:x,loading:k,zoomOut:Te,zoomIn:A,rangeSizeLower:G,rangeSizeUpper:ie,rangeSizeLowerPosition:z,rangeSizeUpperPosition:F,decimalFormat:gn,numberformat:$n}}});const el=e=>(xo("data-v-beaf2b95"),e=e(),en(),e),ol={class:"chart-box"},nl={class:"chart"},al={class:"zoom"},tl=el(()=>t("svg",{id:"chart"},null,-1));function ll(e,a,W,z,F,Y){return s(),f("div",ol,[co(t("div",nl,[t("div",al,[t("div",{class:"amplification",onClick:a[0]||(a[0]=(...G)=>e.zoomOut&&e.zoomOut(...G))}),t("div",{class:"narrow",onClick:a[1]||(a[1]=(...G)=>e.zoomIn&&e.zoomIn(...G))})]),e.currentPriceTab!=="full range"?(s(),f("div",{key:0,class:"range-size range-size-lower",style:aa({right:e.rangeSizeLowerPosition})},v(("numberformat"in e?e.numberformat:Ae($n))(e.rangeSizeLower.toFixed(1),1))+"% ",5)):w("",!0),e.currentPriceTab!=="full range"?(s(),f("div",{key:1,class:"range-size range-size-upper",style:aa({left:e.rangeSizeUpperPosition})},v(("numberformat"in e?e.numberformat:Ae($n))(e.rangeSizeUpper.toFixed(1),1))+"% ",5)):w("",!0),tl],512),[[Oa,!e.loading]])])}const il=Io(xt,[["render",ll],["__scopeId","data-v-beaf2b95"]]),rl=Po({props:{poolInfo:{type:Object,default:()=>({})},aprRewardsParameter:{type:Number,default:30},label:{type:Boolean,default:!0}},setup(e,a){const W=g("0"),z=g(""),F=g(""),Y=wo(),G=Z(()=>Y);console.log(e,"props124====>");const ie=bn(),X=Z(()=>ie),x=(k,l)=>k&&l?Ya.plus(Tn(k),Tn(l)):k>0?k:0,ee=k=>{let l=0;return k&&k.forEach(c=>{l+=Tn(String(c))}),String(l)},D=g([]),re=g([]),Te=g("0"),A=g(""),no=g(!0);we(()=>[G.value.newTopPoolsObj,e.poolInfo,X.value.tokensObj,e.aprRewardsParameter],([k,l,c])=>{var O;if(k&&l&&c){const E=k[l==null?void 0:l.poolAddress]||{};if(E&&!yo(E)){console.log(E,"===>stats"),W.value=E&&E.apr_7day&&E.apr_7day.replace("%","")||"0",A.value=ee(E&&E.rewarder_apr),Te.value=x(E&&E.apr_7day,E&&ee(E.rewarder_apr)),console.log(e.poolInfo,"===>props.poolInfo"),console.log(Te.value,"===> rewardApr.value"),z.value=oo(E.tvl_in_usd,2),F.value=oo(E.vol_in_usd_24h,2);const ue=l&&e.poolInfo.rewarder_infos||[],$e=[];for(let j=0;j<ue.length;j++){const te=ue[j];if(c[te.coinAddress]){const V=c[te.coinAddress].decimals,ae=gn(te.emissionsEveryDay/Math.pow(10,V),4),Oe=Number(ae)>0?oo(ae):ae,J=gn(Number(ae)*((O=X.value.RATES[te.coinAddress])==null?void 0:O.price),4);$e.push({...te,logoUrl:c[te.coinAddress].logoURI,day:Oe,dayUSD:J,symbol:c[te.coinAddress].symbol,rewarder_display:l&&l[`rewarder_display${j+1}`]?l[`rewarder_display${j+1}`]:!1})}}console.log($e,"mockArr206===>"),D.value=$e.filter(j=>j.rewarder_display);const ve=[];$e.forEach((j,te)=>{c[j.coinAddress]&&ve.push({...j,symbol:c[j.coinAddress].symbol,rewarderApr:E.rewarder_apr[te]&&E.rewarder_apr[te].replace("%","")})}),re.value=ve.filter(j=>j.rewarder_display)}else W.value="0",z.value="--",F.value="--",Te.value="0",re.value=[],D.value=[];console.log(re.value,"===>rewarderArr.value"),no.value=!1}else W.value="0",z.value="--",F.value="--",Te.value="0",re.value=[],D.value=[]},{immediate:!0,deep:!0});const m=()=>{a.emit("reviseValue")},H=k=>{var l;return(k==null?void 0:k.logoURI)||(k==null?void 0:k.logo_url)||((l=X.value.tokensObj[k==null?void 0:k.address])==null?void 0:l.logo_url)||(G.value.theme==="default"?Ze("/image/coins/unknown.png"):Ze("/image/coins/sui-unknown.png"))},T=Z(()=>X.value.tokensWarningObj);return console.log(T.value,"==>tokensObj"),console.log(e.poolInfo,"props.poolInfo====>"),{tokensWarningObj:T,rewarderInfo:D,rewarderArr:re,rewardApr:Te,rewardAprList:A,apr:W,liquidityTvl:z,vol24:F,addCommom:oo,reviseValue:m,loading:no,getCoinIcon:H,store:Y}}});const hn=e=>(xo("data-v-af74a71f"),e=e(),en(),e),sl={key:0,class:"pool-info"},ul=hn(()=>t("use",{"xlink:href":"#icon-icon_on"},null,-1)),dl=[ul],cl={key:0,class:"info-block-container"},vl={class:"info-block"},pl={class:"coin-tips"},ml={class:"left"},fl={alt:""},gl={class:"address"},bl=hn(()=>t("use",{"xlink:href":"#icon-icon-copy"},null,-1)),kl=[bl],hl={class:"info-block"},Cl={class:"coin-tips"},yl={class:"left"},wl={alt:""},Pl={class:"address"},Il=hn(()=>t("use",{"xlink:href":"#icon-icon-copy"},null,-1)),Tl=[Il],Sl={class:"info-block"},$l={class:"leabl"},Al={class:"text"},Nl={class:"apr-hover-content"},ql={class:"info-block"},Ll={class:"leabl"},Ml={class:"text"},Rl={class:"info-block"},Ul={class:"leabl"},Ol={class:"text"},Bl={class:"info-block"},Fl={class:"leabl"},jl={class:"text"},_l={key:1,class:"pool-rewards-info"},Dl={class:"rewards-list-all"},Wl=hn(()=>t("div",{class:"icon-sign"},null,-1)),Hl={alt:""},El={class:"rewards-value"};function zl(e,a,W,z,F,Y){const G=Ja,ie=Qa,X=va,x=Nn("image");return e.poolInfo?(s(),f("div",sl,[e.loading?(s(),fe(X,{key:1})):(s(),f(No,{key:0},[t("div",{class:ye(e.label?"pool-info-border pool-info-title":"pool-info-title")},[De(v(e.$t("newAdd.poolInfo"))+" ",1),(s(),f("svg",{class:ye(e.label?"show-icon icon":"icon"),"aria-hidden":"true",onClick:a[0]||(a[0]=ee=>e.reviseValue())},dl,2))],2),e.label?(s(),f("div",cl,[t("div",vl,[t("div",pl,[t("div",ml,[co(t("img",fl,null,512),[[x,e.getCoinIcon(e.poolInfo.needReverse?e.poolInfo.token_b:e.poolInfo.token_a)]]),t("div",gl,v(e.poolInfo.needReverse?e.poolInfo.token_b.address:e.poolInfo.token_a.address),1),ge(G,{address:e.poolInfo.needReverse?e.poolInfo.token_b.address:e.poolInfo.token_a.address,"style-params":{width:"12px",height:"12px",left:"10px",bottom:"0px"}},null,8,["address"]),(s(),f("svg",{class:"icon","aria-hidden":"true",onClick:a[1]||(a[1]=ee=>e.store.copy(e.poolInfo.needReverse?e.poolInfo.token_b.address:e.poolInfo.token_a.address))},kl))])])]),t("div",hl,[t("div",Cl,[t("div",yl,[co(t("img",wl,null,512),[[x,e.getCoinIcon(e.poolInfo.needReverse?e.poolInfo.token_a:e.poolInfo.token_b)]]),t("div",Pl,v(e.poolInfo.needReverse?e.poolInfo.token_a.address:e.poolInfo.token_b.address),1),ge(G,{address:e.poolInfo.needReverse?e.poolInfo.token_a.address:e.poolInfo.token_b.address,"style-params":{width:"12px",height:"12px",left:"10px",bottom:"0px"}},null,8,["address"]),(s(),f("svg",{class:"icon","aria-hidden":"true",onClick:a[2]||(a[2]=ee=>e.store.copy(e.poolInfo.needReverse?e.poolInfo.token_a.address:e.poolInfo.token_b.address))},Tl))])])]),t("div",Sl,[t("div",$l,v(e.$t("common.apr")),1),t("div",Al,[De(v(e.poolInfo.is_display_rewarder?e.rewardApr>0&&e.rewardApr<.01?"<0.01":("addCommom"in e?e.addCommom:Ae(oo))(e.rewardApr,2):e.apr>0&&e.apr<.01?"<0.01":("addCommom"in e?e.addCommom:Ae(oo))(e.apr,2))+"% ",1),t("div",Nl,[ge(ie,{"l-item":{apr:e.apr,aprTotal:e.rewardApr,rewarder_apr:e.rewardAprList,is_display_rewarder:e.poolInfo.is_display_rewarder},"rewarder-info":e.rewarderArr},null,8,["l-item","rewarder-info"])])])]),t("div",ql,[t("div",Ll,v(e.$t("common.liquidity")),1),t("div",Ml,"$"+v(e.liquidityTvl),1)]),t("div",Rl,[t("div",Ul,v(e.$t("common.volume24h")),1),t("div",Ol,"$"+v(e.vol24),1)]),t("div",Bl,[t("div",Fl,v(e.$t("newAdd.tickSpacing")),1),t("div",jl,v(e.poolInfo&&e.poolInfo.tick_spacing),1)])])):w("",!0),e.poolInfo.is_display_rewarder&&e.label&&e.rewarderInfo&&e.rewarderInfo.length>0?(s(),f("div",_l,[De(v("Farming Rewards")+" "),t("div",Dl,[(s(!0),f(No,null,Yo(e.rewarderInfo,ee=>(s(),f("div",{key:ee,class:ye(["rewards-list",ee.day==0?"rewards-none":""])},[Wl,co(t("img",Hl,null,512),[[x,ee.logoUrl]]),t("div",El,[t("p",null,v(ee.day)+" "+v(ee.symbol)+" / "+v(e.$t("newAdd.day"))+" ",1)])],2))),128))])])):w("",!0)],64))])):w("",!0)}const Xl=Io(rl,[["render",zl],["__scopeId","data-v-af74a71f"]]),Vl=Po({setup(){let e=g(!1);const{t:a,locale:W}=Ba(),z=Ma(),F=Z(()=>z),Y=wo(),G=g(0),ie=g(!1),X=g(!1),x=g(!1),ee=g("fromCoin"),D=g(""),re=g(""),Te=g(!1),A=g(!0),no=g(!1),m=g(!0),H=g(!1),T=g(""),k=g(""),l=g(""),c=g(""),O=g(""),E=g(""),ue=g(!1),$e=g(!1),ve=g(!1),j=g(""),te=g(0),V=g(!0),ae=g(!1),Oe=g([]),J=g(""),Pe=g(30),de=g("30D"),Ne=g("Estimated APR"),le=g([{time:"24H",num:24},{time:"7D",num:7},{time:"30D",num:30}]),Ee=g(!0),oe=wo(),M=Z(()=>oe),To=Z(()=>{var o;return!!((o=d==null?void 0:d.query)!=null&&o.action&&(!i.value||!r.value||!j.value))}),q=Z(()=>M.value.chainName?An(M.value.chainName):{}),ao=Z(()=>{var o;return(o=M.value)==null?void 0:o.filterCreatePoolCoin}),qo=o=>{console.log(o,"====>>>>item",o.num,Pe.value),Ye.updateCurrentPools(S.value.poolAddress,M.value.chainName),de.value=o.time,Pe.value=o.num},Lo=()=>{console.log("reviseValue==>"),Ee.value=!Ee.value},po=g([]),So=()=>{G.value=0,d.query.action!=="create-pool"&&d.query.actions!=="new-position"&&(Go(),so(),Ye.updateCurrentPools(S.value.poolAddress,M.value.chainName)),Ye.setPoolConfigList(mn.value,M.value.filterCoinsObj)},Vo=Z(()=>Number(l.value)>0&&Number(c.value)>0&&Number(l.value)>Number(c.value)),Ge=o=>{no.value=o,l.value="0",c.value="∞"},We=Z(()=>{if(N.value.poolConfigList&&i.value&&r.value){const o=N.value.poolConfigList.filter(u=>{var b,y,C,$;return u.token_a.address.toUpperCase()===((b=i.value.address)==null?void 0:b.toUpperCase())&&u.token_b.address.toUpperCase()===((y=r.value.address)==null?void 0:y.toUpperCase())||u.token_b.address.toUpperCase()===((C=i.value.address)==null?void 0:C.toUpperCase())&&u.token_a.address.toUpperCase()===(($=r.value.address)==null?void 0:$.toUpperCase())});console.log(o,"===>info");const n=[];return o.forEach(u=>{n.push(Number(u.fee))}),console.log(n,"===>>result"),n}else return[]}),mo=o=>{const n={};let u=new h(0);o.forEach(L=>{u=u.add(new h(L.object.liquidity))});const b=[];let y=new h(0);o.forEach(L=>{const U=new h(L.object.liquidity),_=U.gt(0)?new h(U).div(u).mul(100).toString():0,B=Qo(_,2);y=y.plus(B);const K=B.split(".");b.push({value:B,int:K[0],decimal:K[1],fee:L.fee})});let C=new h(100).minus(y).toNumber();const $=b.sort((L,U)=>Number(U.decimal)-Number(L.decimal));if(C)for(let L=0;L<$.length&&C;L++)$[L].value=new h($[L].value).plus(.01).toString(),C=new h(C).minus(.01).toNumber();return o.forEach(L=>{var _;const U=(_=$.find(B=>L.fee===B.fee))==null?void 0:_.value;n[L.fee]={rateText:(U>0&&U<.01?"<0.01":U==0?0:Qo(U,2))+"% select",rate:U}}),n},fo=Z(()=>{if(N.value.poolConfigList&&i.value&&r.value){const o=N.value.poolConfigList.filter(u=>{var C,$,L,U;const b=u.coin_a_address=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":u.coin_a_address,y=u.coin_b_address=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":u.coin_b_address;return console.log(u,"p===>1334"),b.toUpperCase()===((C=i.value.address)==null?void 0:C.toUpperCase())&&y.toUpperCase()===(($=r.value.address)==null?void 0:$.toUpperCase())||y.toUpperCase()===((L=i.value.address)==null?void 0:L.toUpperCase())&&b.toUpperCase()===((U=r.value.address)==null?void 0:U.toUpperCase())});return mo(o)}}),Je=Z(()=>[{label:.01+"% "+a("common.feeTier"),title:.01+"% ",fee:1e-4,text:a("newAdd.bestVeryStablePairs")},{label:.05+"% "+a("common.feeTier"),title:.05+"% ",fee:5e-4,text:a("newAdd.bestStablePairs")},M.value.chainName=="Aptos"?{label:.2+"% "+a("common.feeTier"),title:.2+"% ",fee:.002,text:a("newAdd.bestMostPairs")}:{label:.25+"% "+a("common.feeTier"),title:.25+"% ",fee:.0025,text:a("newAdd.bestMostPairs")},M.value.chainName=="Aptos"?{label:.6+"% "+a("common.feeTier"),title:.6+"% ",fee:.006,text:a("newAdd.besteExoticPairs")}:{label:"1% "+a("common.feeTier"),title:"1% ",fee:.01,text:a("newAdd.besteExoticPairs")}]),Be=Z(()=>Y.slippage),Mo=Z(()=>!i.value||!r.value),_o=Z(()=>{var o,n;return!T.value&&!k.value?(console.log("addLiquidityBtnDisabled11111"),!0):Number(T.value)>Number(Ve.value)||Number(k.value)>Number(Ke.value)?(console.log("addLiquidityBtnDisabled22222"),!0):R.value!==a("button.addLiquidity")&&R.value!==a("newAdd.preview")?(console.log("addLiquidityBtnDisabled33333###",R.value),!0):S.value&&S.value&&S.value.is_pause?(console.log("addLiquidityBtnDisabled44444"),!0):(o=d==null?void 0:d.query)!=null&&o.action&&!I.value&&!((n=I.value)!=null&&n.currentPrice)?(console.log("addLiquidityBtnDisabled55555"),!0):!!(Number(T.value)<=0&&Number(k.value)<=0||!ke.value&&Number(T.value)==0||!he.value&&Number(k.value)==0||ve.value)}),R=Z(()=>{var o,n,u;return S.value&&S.value.is_pause?"Pool Closed":!i.value||!r.value?a("modal.selectTokenModalTitle"):mn.value=="Sui"&&!We.value.includes(1e-4)&&!We.value.includes(5e-4)&&!We.value.includes(.0025)&&!We.value.includes(.01)&&!ao.value[i==null?void 0:i.value.address]&&!ao.value[(o=r.value)==null?void 0:o.address]?"Invalid Pool":(d.query.action||d.query.actions)&&!j.value&&In[M.value.chainName].hasCreatePool?(console.log("addLiquidityBtnDisabled11111"),"Select fee tier"):Mo.value?a("modal.selectTokenModalTitle"):!In[M.value.chainName].hasCreatePool&&!S.value?a("button.poolNotFound"):Number(T.value)>Number(Ve.value)?a("button.insufficientBalance",{name:i.value.symbol}):Number(k.value)>Number(Ke.value)?a("button.insufficientBalance",{name:r.value.symbol}):H.value?a("modal.selectTokenModalTitle"):(console.log(S.value,"==>poolInfo.value"),console.log(!S.value&&((n=d==null?void 0:d.query)==null?void 0:n.action),"===>!poolInfo.value && route?.query?.action"),!S.value&&i.value&&r.value&&((u=d==null?void 0:d.query)==null?void 0:u.action)=="create-pool"?a("newAdd.preview"):!Number(T.value)&&!Number(k.value)?a("button.enterAmount"):c.value!=="∞"&&Number(l.value)>=Number(c.value)?a("newAdd.invalidRange"):a("button.addLiquidity"))}),P=Z(()=>{var o,n,u;return!S.value||yo(M.value.addressHistTokens)||!M.value.addressHistTokens[(o=S.value)==null?void 0:o.poolAddress]?null:Object.fromEntries((u=M.value.addressHistTokens[(n=S.value)==null?void 0:n.poolAddress])==null?void 0:u.data.map(b=>[b.key,b.value]))}),Xe=Z(()=>A.value?P.value&&Fe(Pe.value==7?P.value.before_7_d_contract_price_lowest:Pe.value==24?P.value.before_24_h_contract_price_lowest:P.value.before_30_d_contract_price_lowest,6)||0:P.value&&Fe(new h(1).div(Pe.value==7?P.value.before_7_d_contract_price_highest:Pe.value==24?P.value.before_24_h_contract_price_highest:P.value.before_30_d_contract_price_highest).toString(),6)||0),Le=Z(()=>A.value?P.value&&Fe(Pe.value==7?P.value.before_7_d_contract_price_highest:Pe.value==24?P.value.before_24_h_contract_price_highest:P.value.before_30_d_contract_price_highest,6)||0:(P.value&&Fe(1/Number(Pe.value==7?P.value.before_7_d_contract_price_lowest:Pe.value==24?P.value.before_24_h_contract_price_lowest:P.value.before_30_d_contract_price_lowest),6))==1/0?0:P.value&&Fe(1/Number(Pe.value==7?P.value.before_7_d_contract_price_lowest:Pe.value==24?P.value.before_24_h_contract_price_lowest:P.value.before_30_d_contract_price_lowest),6)||0),be=sa(),i=g(),r=g();kn(()=>{document.body.clientWidth<750?(Ee.value=!1,e.value=!1):(Ee.value=!0,e.value=!0)});const on=o=>{var n,u;if((n=S.value)==null||n.token_a.decimals,(u=S.value)==null||u.token_b.decimals,console.log(o,"value1830===>"),d.query.action&&jo.value&&o!==l.value){wn();return}o!==l.value&&J.value=="full range"?(dn({key:"custom",...to.value.custom}),console.log(to.value.custom.min,"priceConfigObj.value[custom].min")):(J.value!=="full range"&&J.value!=="custom"&&(J.value="custom"),l.value=o)},nn=o=>{if(d.query.action&&jo.value&&o!==c.value){wn();return}o!==c.value&&J.value=="full range"?dn({key:"custom",...to.value.custom}):(J.value!=="full range"&&J.value!=="custom"&&(J.value="custom"),c.value=o)},an=()=>{var n;if(d.query.action)A.value=!A.value,I.value&&pn(Fe(new h(1).div(I.value.currentPrice).toString(),(n=r==null?void 0:r.value)==null?void 0:n.decimals));else if(V.value=!0,V.value=!1,A.value=!A.value,l.value!==""&&c.value!==""&&l.value!=="0"&&c.value!=="∞"){const u=l.value,b=c.value;l.value=new h(1).div(b).toString(),c.value=new h(1).div(u).toString();const y=O.value,C=E.value;O.value=new h(1).div(C).toString(),E.value=new h(1).div(y).toString(),ae.value=!1}const o=i.value;i.value=r.value,r.value=o,m.value?T.value=k.value:k.value=T.value};we([l,c],([o,n])=>{console.log(o,n,"==>minPrice,maxPrice"),Number(o)!==0&&Number(n)!==0&&so(),n!=="∞"&&Number(o)!==0&&Number(n)!==0&&Number(o)>=Number(n)?ve.value=!0:ve.value=!1,Number(o)==0&&Number(n)==0&&je.value&&(ve.value=!0,console.log("价格区间错误"))});const Ro=g(!1),Uo=g(!1),tn=o=>{var n,u,b,y,C,$,L,U,_;ee.value=o,o==="fromCoin"?(D.value=((n=r.value)==null?void 0:n.address)||"",re.value=d.query.action=="create-pool"||d.query.actions=="new-position"||!S.value?(u=i.value)==null?void 0:u.address:S.value.needReverse?S.value.token_b.address:S.value.token_a.address,((b=d==null?void 0:d.query)==null?void 0:b.action)=="create-pool"&&((y=d==null?void 0:d.query)==null?void 0:y.from)==="pool"?Uo.value=!0:Uo.value=!1,Ro.value=!1):(D.value=((C=i.value)==null?void 0:C.address)||"",re.value=d.query.action=="create-pool"||d.query.actions=="new-position"||!S.value?($=r.value)==null?void 0:$.address:S.value.needReverse?S.value.token_a.address:S.value.token_b.address,((L=d==null?void 0:d.query)==null?void 0:L.action)=="create-pool"&&((U=d==null?void 0:d.query)==null?void 0:U.from)==="pool"&&!ao[(_=i.value)==null?void 0:_.address]?(console.log("0515###这里这里##fromCoin.value###",i.value),Ro.value=!0):Ro.value=!1,Uo.value=!1),Te.value=!0},Se=g(null),Ie=g(null),Ko=g({}),Zo=g({}),ln=o=>{var b,y,C,$,L,U;H.value=!1;const n=S.value?S.value.needReverse?S.value.token_b:S.value.token_a:Se.value,u=S.value?S.value.needReverse?S.value.token_a:S.value.token_b:Ie.value;console.log((b=i==null?void 0:i.value)==null?void 0:b.address,"#####onCoinSelect fromCoin"),console.log((y=r==null?void 0:r.value)==null?void 0:y.address,"#####onCoinSelect toCoin"),console.log(n==null?void 0:n.address,"#####onCoinSelect blockFromCoin"),console.log(u==null?void 0:u.address,"#####onCoinSelect blockToCoin"),console.log("#####onCoinSelect------------------------------->"),ee.value==="fromCoin"?(((C=i.value)==null?void 0:C.address)===(n==null?void 0:n.address)||!(($=i.value)!=null&&$.address)?(r.value&&o.address.toLowerCase()===(r==null?void 0:r.value.address.toLowerCase())&&(r.value=null,Ie.value=null,j.value=""),i.value=o,Se.value=o):(i.value&&o.address.toLowerCase()===(i==null?void 0:i.value.address.toLowerCase())&&(i.value=null,Se.value=null,j.value=""),r.value=o),d.query.action||(d.query.fee="")):(((L=r.value)==null?void 0:L.address)===(u==null?void 0:u.address)||!((U=r.value)!=null&&U.address)?(i.value&&o.address.toLowerCase()===(i==null?void 0:i.value.address.toLowerCase())&&(i.value=null,Se.value=null,j.value=""),r.value=o,Ie.value=o):(r.value&&o.address.toLowerCase()===(r==null?void 0:r.value.address.toLowerCase())&&(r.value=null,Ie.value=null,j.value=""),i.value=o),d.query.action||(d.query.fee="")),console.log(Ie.value,"==>createPoolToCoin.value2103"),pn(""),Te.value=!1},rn=o=>{o==="fromCoin"?(m.value=!0,M.value.chainName==="Aptos"?T.value=Number(Ve.value)>0?i.value.symbol=="APT"?new h(Number(Ve.value)).sub(new h(.1)).lt(new h(0))?"0":new h(Number(Ve.value)).sub(new h(.1)).toString():String(Ve.value):"":T.value=Number(Ve.value)>0?i.value.symbol=="SUI"?new h(Number(Ve.value)).sub(new h(.05)).lt(new h(0))?"0":new h(Number(Ve.value)).sub(new h(.05)).toString():String(Ve.value):""):(m.value=!1,M.value.chainName==="Aptos"?k.value=Number(Ke.value)>0?r.value.symbol=="APT"?new h(Number(Ke.value)).sub(new h(.1)).lt(new h(0))?"0":new h(Number(Ke.value)).sub(new h(.1)).toString():String(Ke.value):"":k.value=Number(Ke.value)>0?r.value.symbol=="SUI"?new h(Number(Ke.value)).sub(new h(.05)).lt(new h(0))?"0":new h(Number(Ke.value)).sub(new h(.05)).toString():String(Ke.value):"")},sn=o=>{o==="fromCoin"?(m.value=!0,T.value=Number(Ve.value)>0?Qo(new h(Number(Ve.value)).div(2).toString(),i.value.decimals).toString():""):(m.value=!1,k.value=Number(Ke.value)>0?Qo(new h(Number(Ke.value)).div(2).toString(),r.value.decimals).toString():"")};we(T,(o,n)=>{console.log(T,"===>fromCoinAmount"),o==""&&m.value&&(k.value=""),o&&m.value&&so()}),we(k,(o,n)=>{console.log(o,"===>>>>newValsda"),o==""&&!m.value&&(T.value=""),o&&!m.value&&so()});const un=()=>{i.value=null,r.value=null,l.value="0",c.value="0",T.value="",k.value="",H.value=!0,j.value="",ue.value=!1,ke.value=!0,he.value=!0,V.value=!1},io=g(!1),{setIsShowSuccess:go,setIsShowRejected:bo,setIsShowWaiting:Qe,setTransactionDesc:Do,setTransactionTxid:ko,setPositiomNum:Wo}=Y,d=da(),Ye=bn(),$o=Z(()=>In[M.value.chainName].hasCreatePool);we(()=>[j.value,d.query.action,i.value,r.value,d.query.actions,$o.value],([o,n,u,b,y,C])=>{!o&&(n=="create-pool"||y=="new-position")&&u&&b&&C?(ue.value=!0,V.value=!1):(!u||!b)&&(ue.value=!1)},{immediate:!0});const N=Z(()=>Ye);we(()=>N.value.tokens,async o=>{if(o&&o.length>0){const n=o;if(d&&d.query&&d.query.tokena&&(console.log("0410###deposite###watch###route.query.tokena####",d.query.tokena),d.query.tokena)){const u=await q.value.getTokenBySymbol(n,d.query.tokena);i.value=u,Se.value=u}if(d&&d.query&&d.query.tokenb&&d.query.tokenb){const u=await q.value.getTokenBySymbol(n,d.query.tokenb);r.value=u,Ie.value=u}}},{immediate:!0});const ho=g({}),ke=g(!1),he=g(!1),Ho=g(),Eo=g(),je=g(),ro=g(),so=async()=>{var Me,ce,xe,Re,pe,Ue;if(!l.value&&!c.value)return!1;if(!T.value&&!k.value&&!l.value&&!c.value)return;console.log(S.value,"==》poolInfo.value");const o=S.value?S.value:I.value;if(console.log(o,"===>poolInfos"),yo(o))return;console.log("添加流动性预计算=====>");const{TickUtil:n,TickMath:u,getNearestTickByTick:b}=q.value,y=o==null?void 0:o.token_a.decimals,C=o==null?void 0:o.token_b.decimals;let $,L,U,_,B,K,se,Ce,ne=o.current_tick_index,Q;if(o.token_a.address.toLowerCase()===i.value.address.toLowerCase()&&o.token_b.address.toLowerCase()===r.value.address.toLowerCase()?Q=!0:Q=!1,console.log(Q,"=====>directs"),console.log("currentTickIndex####",ne),console.log("currentTickIndex####",ne),console.log("currentTickIndex####",ne),l.value==="0"&&c.value==="∞")U=n.getMinIndex(Number(o.tickSpacing)),_=n.getMaxIndex(Number(o.tickSpacing)),B=u.tickIndexToSqrtPriceX64(U),K=u.tickIndexToSqrtPriceX64(_);else if(J.value=="custom"||d.query.action){console.log(Q,"===>directs1866"),Q?($=Number(l.value),L=Number(c.value)):($=new h(1).div(c.value).toString(),L=new h(1).div(l.value).toString()),console.log("0518###pre###directs###",Q),console.log("0518###pre###minPrice###",l.value),console.log("0518###pre###maxPrice###",c.value),console.log("0518###pre###poolInfos###",o),console.log("0518###pre###decimalsA###",y),console.log("0518###pre###decimalsB###",C),console.log("0518###pre###currentTickIndex###",ne),console.log($,L,"min max1875"),console.log(l.value,c.value,"===>maxPrice.value");try{se=$==0?-443636:u.priceToTickIndex(new h($),y,C)}catch{se=-443636}try{Ce=u.priceToTickIndex(new h(L),y,C)}catch{Ce=443636}U=b(se,Number(o.tickSpacing)),_=b(Ce,Number(o.tickSpacing)),console.log("0523####min####",$),console.log("0523####max####",L),B=u.priceToSqrtPriceX64(new h($),y,C);try{K=u.priceToSqrtPriceX64(new h(L),y,C)}catch{console.log("0523###test###max###",L),L===1/0&&(console.log("0523###test###max###11111"),K=u.tickIndexToSqrtPriceX64(n.getMaxIndex(Number(o.tickSpacing))))}console.log(U,"===>tick_lower"),console.log(_,"===>tick_upper"),console.log("0518###pre###tick_lower###",U,_,ne),console.log("0518###pre###tick_upper###",_)}else U=(Me=to.value[J.value])==null?void 0:Me.lower,_=(ce=to.value[J.value])==null?void 0:ce.upper,B=u.tickIndexToSqrtPriceX64(U),K=u.tickIndexToSqrtPriceX64(_);if(c.value!=="∞"&&U>=_){ke.value=!0,T.value="",he.value=!0,k.value="";return}if(console.log(_,ne,U,"1922"),c.value==="∞"||ne>=U&&ne<=_){ke.value=!1,he.value=!1;let qe;if(T.value||k.value){if(m.value){const uo=new h(T.value).mul(Math.pow(10,i.value.decimals)).toString();qe=new Co(uo)}else{const uo=new h(k.value).mul(Math.pow(10,r.value.decimals)).toString();qe=new Co(uo)}console.log(Q,"======>directs");const{liquidityAmount:me,tokenMaxA:eo,tokenMaxB:He,tokenMaxAOrigin:_e,tokenMaxBOrigin:vo}=q.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:o.token_a,tokenB:o.token_b,lowerTick:U,upperTick:_,coinAmount:qe,iscoinA:Q?m.value:!m.value,roundUp:!0,slippage:Number(Be.value)/100,curSqrtPrice:new Co(o.current_sqrt_price)});ho.value={liquidityAmount:me,tokenMaxA:eo,tokenMaxB:He,tokenMaxAOrigin:_e,tokenMaxBOrigin:vo},console.log(eo,He,"preAdd"),Q?m.value?k.value=Number(He)>0?He:"":T.value=Number(eo)>0?eo:"":m.value?k.value=eo:T.value=He}}else if(ne>_){if(Q?T.value="":k.value="",ke.value=Q,he.value=!Q,(xe=d==null?void 0:d.query)!=null&&xe.action&&(ke.value=!0,he.value=!0),T.value||k.value){let qe;if(Q){const me=new h(k.value).mul(Math.pow(10,(Re=r.value)==null?void 0:Re.decimals)).toString();qe=new Co(me),ho.value={liquidityAmount:q.value.estimateLiquidityForCoinB(B,K,qe),tokenMaxA:0,tokenMaxB:k.value}}else{const me=new h(T.value).mul(Math.pow(10,(pe=i.value)==null?void 0:pe.decimals)).toString();qe=new Co(me),ho.value={liquidityAmount:q.value.estimateLiquidityForCoinB(B,K,qe),tokenMaxA:0,tokenMaxB:T.value}}}}else if(ne<U){if(ke.value=!Q,he.value=Q,(Ue=d==null?void 0:d.query)!=null&&Ue.action&&(ke.value=!0,he.value=!0),Q?k.value="":T.value="",T.value||k.value){let qe;if(Q){const me=new h(T.value).mul(Math.pow(10,i.value.decimals)).toString();qe=new Co(me),console.log(B,"minPriceX64===>"),console.log(K,"maxPriceX64===>maxPriceX64"),console.log(me,"===>amount"),ho.value={liquidityAmount:q.value.estimateLiquidityForCoinA(B,K,qe),tokenMaxA:T.value,tokenMaxB:0}}else{const me=new h(k.value).mul(Math.pow(10,r.value.decimals)).toString();qe=new Co(me),ho.value={liquidityAmount:q.value.estimateLiquidityForCoinA(B,K,qe),tokenMaxA:k.value,tokenMaxB:0}}}}else ke.value=!0,T.value="",he.value=!0,k.value=""},Oo=g(0);we(()=>{var o;return(o=d.query)==null?void 0:o.fee},o=>{o&&(Oo.value=o,j.value=Number(o)*100+"% "+a("common.feeTier"))},{immediate:!0,deep:!0});const zo=Z(()=>{var y,C,$,L,U;const o=(y=d==null?void 0:d.query)==null?void 0:y.fee,n=(C=d==null?void 0:d.query)==null?void 0:C.tokena,u=($=d==null?void 0:d.query)==null?void 0:$.tokenb;let b=null;console.log("0501###basePoolInfo###tokena###",n),console.log("0501###basePoolInfo###tokenb###",u),console.log("0501###basePoolInfo###fromCoin###",(L=i==null?void 0:i.value)==null?void 0:L.address),console.log("0501###basePoolInfo###toCoin###",(U=r==null?void 0:r.value)==null?void 0:U.address),console.log("0501###basePoolInfo###fee###",o),console.log(N.value.poolConfigList,"===>pools.value.poolConfigList");for(let _=0;_<N.value.poolConfigList.length;_++){const B=N.value.poolConfigList[_];console.log(B,"p===>"),!n||!u?b={}:(B.token_a.address.toUpperCase()===(n==null?void 0:n.toUpperCase())&&B.token_b.address.toUpperCase()===(u==null?void 0:u.toUpperCase())||B.token_b.address.toUpperCase()===(n==null?void 0:n.toUpperCase())&&B.token_a.address.toUpperCase()===(u==null?void 0:u.toUpperCase()))&&(b=B)}return console.log("0501###baseInfo###",b),b}),S=Z(()=>{var n,u,b,y,C,$,L,U,_,B,K,se,Ce;const o=(n=d==null?void 0:d.query)==null?void 0:n.fee;if(i.value&&r.value){let ne=null;if(o)for(const Me in N.value.poolsObj){const ce=N.value.poolsObj[Me];(ce.token_a.address.toUpperCase()===((b=(u=i==null?void 0:i.value)==null?void 0:u.address)==null?void 0:b.toUpperCase())&&ce.token_b.address.toUpperCase()===((C=(y=r==null?void 0:r.value)==null?void 0:y.address)==null?void 0:C.toUpperCase())&&Number(ce.fee)==Number(Oo.value)||ce.token_b.address.toUpperCase()===(($=i==null?void 0:i.value.address)==null?void 0:$.toUpperCase())&&ce.token_a.address.toUpperCase()===((U=(L=r==null?void 0:r.value)==null?void 0:L.address)==null?void 0:U.toUpperCase())&&Number(ce.fee)==Number(Oo.value))&&(ne=ce)}const Q=[];if(!((_=d==null?void 0:d.query)!=null&&_.action)&&(!o||!ne)){for(const Me in N.value.poolsObj){const ce=N.value.poolsObj[Me];(ce.token_a.address.toUpperCase()===((B=i==null?void 0:i.value.address)==null?void 0:B.toUpperCase())&&ce.token_b.address.toUpperCase()===((K=r.value.address)==null?void 0:K.toUpperCase())||ce.token_b.address.toUpperCase()===((se=i==null?void 0:i.value.address)==null?void 0:se.toUpperCase())&&ce.token_a.address.toUpperCase()===((Ce=r.value.address)==null?void 0:Ce.toUpperCase()))&&Q.push(ce)}console.log(Q,"result2408===>"),Q&&Q.length>0&&(ne=Q.sort((Me,ce)=>{const xe=Me.coinAmountA+Me.coinAmountB;return ce.coinAmountA+ce.coinAmountB-xe})[0]),console.log(Q,"result===>2351")}return ne&&!yo(ne)?(console.log(ne,"info===>"),ne):null}return null}),p=Z(()=>{var b,y;const o=(b=i==null?void 0:i.value)==null?void 0:b.address,n=(y=r==null?void 0:r.value)==null?void 0:y.address;let u=null;for(let C=0;C<N.value.poolConfigList.length;C++){const $=N.value.poolConfigList[C];!o||!n?u={}:($.token_a.address.toUpperCase()===(o==null?void 0:o.toUpperCase())&&$.token_b.address.toUpperCase()===(n==null?void 0:n.toUpperCase())||$.token_b.address.toUpperCase()===(o==null?void 0:o.toUpperCase())&&$.token_a.address.toUpperCase()===(n==null?void 0:n.toUpperCase()))&&(u=$)}return console.log("0501###baseInfo###",u),u});we(()=>[zo.value,S.value,N.value.recommendRangesObj],(o,n)=>{var u,b,y,C,$;o[0]&&!o[1]&&o[2]&&!yo(o[2])&&(!n||o[0]&&((u=o[0])==null?void 0:u.address)!==n[0]&&((b=n[0])!=null&&b.address))&&(y=o[0])!=null&&y.address&&!((C=d==null?void 0:d.query)!=null&&C.action)&&Ye.setSinglePool(o[0],o[2][($=o[0])==null?void 0:$.address],M.value.chainName)},{immediate:!0,deep:!0});const to=g({}),Bo=async(o,n)=>{var u,b,y,C;if(console.log("deposit##poolInfoWatch###value####",o),o){const{TickMath:$,getNearestTickByTick:L}=q.value;n&&(V.value=!0,ke.value=!1,he.value=!1),ae.value=!0;const U=o.token_a.decimals,_=o.token_b.decimals;j.value=o.fee*100+"% "+a("common.feeTier");const B=o.current_tick_index;je.value=$.sqrtPriceX64ToPrice(o.current_sqrt_price,U,_).toString(),ro.value=new h(1).div(new h(je.value)).toString();const K=await q.value.getTicks(o);if(console.log(K,"result====>"),Oe.value=K?q.value.getTickDataFromUrlData(K):[],n){let se=N.value.poolPriceConfigObj&&N.value.poolPriceConfigObj[o.address]&&N.value.poolPriceConfigObj[o.address].recommend_ranges||{};const Ce=N.value.poolPriceConfigObj&&N.value.poolPriceConfigObj[o.address]&&N.value.poolPriceConfigObj[o.address].type||"",ne=B-Number(Ce=="unstable"?Number(o.tickSpacing)*2:Number(o.tickSpacing)*3),Q=B+Number(Ce=="unstable"?Number(o.tickSpacing)*2:Number(o.tickSpacing)*3),Me=(b=(u=S==null?void 0:S.value)==null?void 0:u.token_a)==null?void 0:b.decimals,ce=(C=(y=S==null?void 0:S.value)==null?void 0:y.token_b)==null?void 0:C.decimals,xe=q.value.TickMath.tickIndexToPrice(ne,Me,ce).toString(),Re=q.value.TickMath.tickIndexToPrice(Q,Me,ce).toString();se["full range"]={lower:-443636,upper:443636},se.custom={lower:ne,upper:Q,minPrice:xe,maxPrice:Re};const pe=[];for(let Ue in se)se[Ue]&&pe.push({...se[Ue],key:Ue});po.value=pe,Ce?o.isSelfBuilt?J.value="custom":Ce=="stable"?J.value="suggested":J.value="passive":J.value="custom",to.value=se,dn({key:J.value,...se[J.value]}),console.log(po,"===>currentPriceTabList")}V.value=!1}else V.value=!1},Xo=Z(()=>Ye.getPoolInfoSuccess);we(()=>S.value,(o,n)=>{var u,b,y,C,$,L,U,_,B,K,se,Ce;console.log("0419###poolInfo###watch###",o),console.log("0419###poolInfo###pools.value.poolsObj###",N.value.poolsObj),o&&o.current_sqrt_price?((!n||o.poolAddress!==n.poolAddress||o.current_sqrt_price!==n.current_sqrt_price)&&Bo(o,!n||o.poolAddress!==n.poolAddress),(d==null?void 0:d.name)=="deposit"&&be.push(`/deposit?poolAddress=${o==null?void 0:o.address}&tokena=${(u=i==null?void 0:i.value)==null?void 0:u.address}&tokenb=${(b=r==null?void 0:r.value)==null?void 0:b.address}&fee=${o==null?void 0:o.fee}`)):((y=d==null?void 0:d.query)==null?void 0:y.actions)=="new-position"||(!p.value&&$o.value&&((C=i==null?void 0:i.value)!=null&&C.address||($=r==null?void 0:r.value)!=null&&$.address)?(j.value="",l.value="0",c.value="∞",ke.value=!1,he.value=!1,V.value=!1,je.value="",ro.value="",console.log("0501####333333",i==null?void 0:i.value),(d==null?void 0:d.name)=="deposit"&&be.push(`/deposit?action=create-pool&tokena=${(L=i==null?void 0:i.value)==null?void 0:L.address}&tokenb=${(U=r==null?void 0:r.value)==null?void 0:U.address}&from=${(_=d==null?void 0:d.query)==null?void 0:_.from}`)):$o.value&&!o&&!((B=d==null?void 0:d.query)!=null&&B.action)&&Xo.value&&!zo.value?(j.value="",l.value="0",c.value="∞",ke.value=!1,he.value=!1,V.value=!1,je.value="",ro.value="",console.log("0501####222222"),(d==null?void 0:d.name)=="deposit"&&be.push(`/deposit?action=create-pool&tokena=${(K=i==null?void 0:i.value)==null?void 0:K.address}&tokenb=${(se=r==null?void 0:r.value)==null?void 0:se.address}&from=${(Ce=d==null?void 0:d.query)==null?void 0:Ce.from}`)):(ke.value=!1,he.value=!1,V.value=!1,je.value="",ro.value="")),console.log(!zo.value,"===>getPoolInfoSuccess.value&& !basePoolInfo.value")},{immediate:!0});const Ve=Z(()=>F.value.assets&&i.value&&F.value.assets[i.value.address]?na(F.value.assets[i.value.address].balance,i.value.decimals):"0"),Ke=Z(()=>F.value.assets&&r.value&&F.value.assets[r.value.address]?na(F.value.assets[r.value.address].balance,r.value.decimals):"0"),Go=async()=>{console.log("0412###resetTickList####");const o=await q.value.getTicks(S.value);console.log("0412###resetTickList###result####",o);const n=o?q.value.getTickDataFromUrlData(o):[];Oe.value=n,console.log("0412###resetTickList###tickList####",n)},Cn=lt(),Fo=Z(()=>N.value.currentPositionInfo),ga=async o=>{var B,K,se,Ce,ne,Q,Me,ce,xe,Re;console.log(S.value,"===> poolInfo.value"),io.value=!1,N.value.currentPositionInfo={},ko(""),Do(a("tips.increaseLiquiditySuccess",{from:ke.value?"":`${T.value} ${(B=i.value)==null?void 0:B.symbol}`,and:!ke.value&&!he.value?"and":"",to:he.value?"":`${k.value} ${(K=r.value)==null?void 0:K.symbol}`})),Qe(!0);const n=A.value?m.value:!m.value;let u,b,y,C,$,L;const U=S.value.token_a.decimals,_=S.value.token_b.decimals;if(l.value==="0"&&c.value==="∞")y=q.value.TickUtil.getMinIndex(Number(S.value.tickSpacing)),C=q.value.TickUtil.getMaxIndex(Number(S.value.tickSpacing));else if(J.value=="custom"){A.value?(u=Number(l.value),b=Number(c.value)):(u=new h(1).div(c.value).toString(),b=new h(1).div(l.value).toString()),console.log("0519###toAdd###min###",u),console.log("0519###toAdd###max###",b),console.log("0519###toAdd###minPrice.value###",l.value),console.log("0519###toAdd###maxPrice.value###",c.value);try{$=u==0?q.value.TickUtil.getMinIndex(Number(S.value.tickSpacing)):q.value.TickMath.priceToTickIndex(new h(u),U,_)}catch{$=q.value.TickUtil.getMinIndex(Number(S.value.tickSpacing))}try{L=q.value.TickMath.priceToTickIndex(new h(b),U,_)}catch{L=q.value.TickUtil.getMaxIndex(Number(S.value.tickSpacing))}y=q.value.getNearestTickByTick($,Number(S.value.tickSpacing)),C=q.value.getNearestTickByTick(L,Number(S.value.tickSpacing))}else y=to.value[J.value].lower,C=to.value[J.value].upper;console.log(y,C,"add3155"),console.log(S.value,"==>poolInfo.value.curSqrtPrice");try{const pe=await q.value.getAddLiquidityTransactionPayload({pool:{poolAddress:S.value.poolAddress,token_a:S.value.token_a,token_b:S.value.token_b},amount:m.value?T.value:k.value,fix_amount_a:n,tick_lower:y,tick_upper:C,index:0,slippage:Number(Be.value)/100,roundUp:!0,collect_fee:!1,curSqrtPrice:new Co(S.value.current_sqrt_price)});let Ue;if(M.value.chainName==="Aptos")Ue=await F.value.currentWallet.signAndSubmitTransaction(pe);else{const qe=await F.value.currentWallet.signAndExecuteTransactionBlock(pe);Ue=q.value.handleTx(qe)}if(console.log("0410###tx###",Ue),Ue&&Ue.hash){ko(Ue.hash),Qe(!1),go(!0);const qe=qn();let me;S.value.needReverse?S.value.token_a.address.toLowerCase()===i.value.address.toLowerCase()&&S.value.token_b.address.toLowerCase()===r.value.address.toLowerCase()?me=!1:me=!0:S.value.token_a.address.toLowerCase()===i.value.address.toLowerCase()&&S.value.token_b.address.toLowerCase()===r.value.address.toLowerCase()?me=!0:me=!1,console.log(me,"===>directs");const eo={title:"Supplied",desc:a("tips.addLiquiditySuccessText",{from:ke.value?"":`${T.value} ${(se=i.value)==null?void 0:se.symbol}`,and:!ke.value&&!he.value?"and":"",to:he.value?"":`${k.value} ${(Ce=r.value)==null?void 0:Ce.symbol}`}),hash:Ue.hash,tit:"Position Created",icon:"icon-icon-Position-Created",tokenInfo:{tokena:me?(ne=i.value)==null?void 0:ne.address:(Q=r.value)==null?void 0:Q.address,numa:me?T.value:k.value,logoa:me?N.value.tokensObj&&i.value&&i.value.address&&N.value.tokensObj[i.value.address]&&N.value.tokensObj[i.value.address].logoURI:N.value.tokensObj&&r.value&&r.value.address&&N.value.tokensObj[r.value.address]&&N.value.tokensObj[r.value.address].logoURI,tokenb:me?(ce=r.value)==null?void 0:ce.address:(Me=i.value)==null?void 0:Me.address,numb:me?k.value:T.value,logob:me?N.value.tokensObj&&r.value&&r.value.address&&N.value.tokensObj[r.value.address]&&N.value.tokensObj[r.value.address].logoURI:N.value.tokensObj&&i.value&&i.value.address&&N.value.tokensObj[i.value.address]&&N.value.tokensObj[i.value.address].logoURI},text:`Deopsit ${ke.value?"":`${T.value} ${(xe=i.value)==null?void 0:xe.symbol}`} ${!ke.value&&!he.value?"and":""} ${he.value?"":`${k.value} ${(Re=r.value)==null?void 0:Re.symbol}`}`};M.value.chainName!=="Aptos"&&(eo.res=Ue.res),q.value.showTransitionPending(eo);const He=await q.value.watchTransaction(eo,!0);if(He.status){if(go(!1),N.value.setCurrentPositionLoading(!0),X.value=!0,console.log(He.nftInfo,"===> watchInfo.nftInfo"),M.value.chainName==="Aptos"){if(await N.value.setCurrentPositionInfo(He.nftInfo[0].data.id.creator,He.nftInfo[0].data.id.collection,He.nftInfo[0].data.name,M.value.chainName),o)try{await Cn.subscribePosition({pool_address:Fo.value.poolAddress,position_index:Fo.value.index},Fo.value.nftHash)}catch(_e){console.log(_e,"e")}}else{const _e=He.nftInfo,vo=await oa(2e3);if(await N.value.setCurrentPositionInfo(_e==null?void 0:_e.pool,"","",M.value.chainName,_e==null?void 0:_e.position),await oa(1e3),console.log("0529###nftInfo###",_e),console.log("0529###currentPositionInfo.value.index###",Fo.value.index),o)try{await Cn.subscribePosition({pool_address:Fo.value.poolAddress,position_index:Fo.value.index},Fo.value.nftHash)}catch(uo){console.log(uo)}}setTimeout(()=>{Ye.updateCurrentPools(S.value.poolAddress,M.value.chainName),q.value.getAccount(F.value.address)},3e3),setTimeout(async()=>{Go()},3e3)}Wo()}else Qe(!1),bo(!0);T.value="",k.value=""}catch(pe){T.value="",k.value="",console.log("0330###Add liquidity Error###",pe),Qe(!1),bo(!0)}},ba=o=>{switch(o){case"active":return a("newAdd.activeTips");case"passive":return a("newAdd.passiveTips");case"full range":return a("newAdd.fullRangTips");case"suggested":return a("newAdd.suggestedTips");case"custom":return a("newAdd.customTips")}},ka=o=>{switch(o){case"suggested":return a("newAdd.suggested");case"active":return a("newAdd.active");case"passive":return a("newAdd.conservative");case"full range":return a("newAdd.fullRange");case"custom":return a("newAdd.custom")}},dn=o=>{console.log("priceTab====>",o),console.log("priceTab###poolInfo###",S.value),J.value=o.key.toLowerCase();const n=S.value.token_a.decimals,u=S.value.token_b.decimals,{lower:b,upper:y}=o,C=q.value.TickMath.tickIndexToPrice(b,n,u).toString(),$=q.value.TickMath.tickIndexToPrice(y,n,u).toString();if(o.key=="full range"){Ho.value=b,Eo.value=y,Ge(!0),so();return}console.log(A.value,"===>direct.value"),A.value?(O.value=String(C),l.value=String(C),E.value=String($),c.value=String($),Ho.value=b,Eo.value=y,so()):(O.value=String(1/Number($)),l.value=String(1/Number($)),E.value=String(1/Number(C)),c.value=String(1/Number(C)),Ho.value=q.value.TickMath.priceToTickIndex(new h(1/Number($)),n,u),Eo.value=q.value.TickMath.priceToTickIndex(new h(1/Number(C)),n,u),so())},ha=Z(()=>N.value.tokensObj&&i.value.address&&N.value.tokensObj[i.value.address]&&N.value.tokensObj[i.value.address].logoURI),Ca=Z(()=>N.value.tokensObj&&r.value.address&&N.value.tokensObj[r.value.address]&&N.value.tokensObj[r.value.address].logoURI),qn=()=>{var u,b,y,C,$,L,U,_;let o=null;const n=N.value.poolConfigList;for(let B=0;B<n.length;B++){const K=n[B];if(K.token_a.address.toUpperCase()===((b=(u=i==null?void 0:i.value)==null?void 0:u.address)==null?void 0:b.toUpperCase())&&K.token_b.address.toUpperCase()===((C=(y=r==null?void 0:r.value)==null?void 0:y.address)==null?void 0:C.toUpperCase())||K.token_b.address.toUpperCase()===((L=($=i==null?void 0:i.value)==null?void 0:$.address)==null?void 0:L.toUpperCase())&&K.token_a.address.toUpperCase()===((_=(U=r==null?void 0:r.value)==null?void 0:U.address)==null?void 0:_.toUpperCase())){o=K;break}}return o},ya=o=>{var u,b,y,C,$,L,U,_,B,K;console.log(o,"item===>3480");const n=qn();if(n&&(Se.value=n.needReverse?n==null?void 0:n.token_b:n==null?void 0:n.token_a,Ie.value=n.needReverse?n==null?void 0:n.token_a:n==null?void 0:n.token_b,i.value=n.needReverse?n==null?void 0:n.token_b:n==null?void 0:n.token_a,r.value=n.needReverse?n==null?void 0:n.token_a:n==null?void 0:n.token_b,console.log("0524###test###11111###samePoolInfo###",n),A.value=i.value.address===((u=n==null?void 0:n.token_a)==null?void 0:u.address),console.log(A.value,"###direct.value")),We.value.includes(o.fee))j.value=o.label,Oo.value=o.fee,be.push(`/deposit?tokena=${n?n.needReverse?(y=n==null?void 0:n.token_b)==null?void 0:y.address:(b=n==null?void 0:n.token_a)==null?void 0:b.address:A.value?i.value.address:r.value.address}&tokenb=${n?n.needReverse?($=n==null?void 0:n.token_a)==null?void 0:$.address:(C=n==null?void 0:n.token_b)==null?void 0:C.address:A.value?r.value.address:i.value.address}&fee=${o.fee}`);else{if(console.log(ao[i.value.address],"filterCreatePoolCoin[fromCoin.value.address]"),console.log(ao[r.value.address],"filterCreatePoolCoin[toCoin.value.address]"),console.log(ao.value,"filterCreatePoolCoin===>"),M.value.chainName!=="Aptos"&&!ao.value[i.value.address]&&!ao.value[r.value.address]){console.log(111,"===>111");return}j.value=o.label,S.value&&(l.value="",c.value=""),T.value="",k.value="",je.value="",ro.value="",l.value="",c.value="",cn.value="",vn.value="",console.log("====>3558"),be.push(`/deposit?action=create-pool&tokena=${n?n.needReverse?(U=n==null?void 0:n.token_b)==null?void 0:U.address:(L=n==null?void 0:n.token_a)==null?void 0:L.address:A.value?i.value.address:r.value.address}&tokenb=${n?n.needReverse?(B=n==null?void 0:n.token_a)==null?void 0:B.address:(_=n==null?void 0:n.token_b)==null?void 0:_.address:A.value?r.value.address:i.value.address}&fee=${o.fee}&from=${(K=d==null?void 0:d.query)==null?void 0:K.from}`)}},wa=g(!1),Pa=()=>{S.value,io.value=!0},I=g(null),cn=g(""),vn=g(""),pn=o=>{var L,U,_,B,K,se,Ce,ne,Q,Me,ce,xe;if(o?(cn.value=o,je.value=o,ro.value=o,vn.value=new h(1).div(new h(o)).toString(),V.value=!1):(cn.value="",je.value="",ro.value="",vn.value=""),!((L=Se.value)!=null&&L.address)||!((U=Ie.value)!=null&&U.address))return;let n=!1;const u=N.value.poolConfigList;let b=null;for(let Re=0;Re<u.length;Re++){const pe=u[Re];if(pe.token_a.address.toUpperCase()===((B=(_=Se==null?void 0:Se.value)==null?void 0:_.address)==null?void 0:B.toUpperCase())&&pe.token_b.address.toUpperCase()===((se=(K=Ie==null?void 0:Ie.value)==null?void 0:K.address)==null?void 0:se.toUpperCase())){n=pe.needReverse,b=pe;break}else if(pe.token_b.address.toUpperCase()===((ne=(Ce=Se==null?void 0:Se.value)==null?void 0:Ce.address)==null?void 0:ne.toUpperCase())&&pe.token_a.address.toUpperCase()===((Me=(Q=Ie==null?void 0:Ie.value)==null?void 0:Q.address)==null?void 0:Me.toUpperCase())){n=pe.needReverse,b=pe;break}}let y=!1;q.value.getIsSortedSymbols((ce=Se.value)==null?void 0:ce.address,(xe=Ie.value)==null?void 0:xe.address)&&(y=!0);let C;y&&!A.value?C=!0:y&&A.value||!y&&A.value?C=!1:C=!0,console.log("0518###c####direct.value####",A.value),console.log("0518###c####createPoolNeedReverse####",y),console.log("0518###c####newDirect####",C);const $=M.value.chainName=="Aptos"?ot:nt;if(i.value&&r.value&&o){const Re=b?b==null?void 0:b.token_a.decimals:y?Ie.value.decimals:Se.value.decimals,pe=b?b==null?void 0:b.token_b.decimals:y?Se.value.decimals:Ie.value.decimals,Ue=o&&q.value.TickMath.priceToSqrtPriceX64(C?new h(1/o):new h(o),Re,pe);console.log(Ue,"===>current_sqrt_price");const qe=o&&q.value.TickMath.priceToSqrtPriceX64(new h(1).div(o),i.value.decimals,r.value.decimals);console.log(!C,"===>!newDirect"),console.log(Re,pe,"decimalsA,decimalsB===>");const me=q.value.TickMath.priceToTickIndex(C?new h(1).div(o):new h(o),Re,pe);console.log(me,"==>currentTickIndex");const eo=me-$[d.query.fee]*5,He=me+$[d.query.fee]*5,_e=q.value.TickMath.tickIndexToPrice(eo,Re,pe).toString(),vo=q.value.TickMath.tickIndexToPrice(He,Re,pe).toString();jo.value?(l.value="0",c.value="∞"):C?(l.value=String(1/vo),c.value=String(1/_e),O.value=String(1/vo),E.value=String(1/_e)):(l.value=_e,c.value=vo,O.value=_e,E.value=vo),console.log("0518###c####createPoolFromCoin.value####",Se.value),console.log("0518###c####createPoolToCoin.value####",Ie.value),console.log("0518###c####createPoolNeedReverse####",y);const uo={token_a:b?b.token_a:y?Ie.value:Se.value,token_b:b?b.token_b:y?Se.value:Ie.value,isCreate:!0,tickSpacing:$[d.query.fee],currentPrice:o,current_sqrt_price:Ue,tick_lower:eo,tick_upper:He,current_tick_index:me,currentPriceReverse:gn(String(1/o),6),reverse_current_sqrt_price:qe,needReverse:n,fee:d.query.fee};I.value=uo,console.log("0518###c####poolInfos####",uo),so()}else I.value=null,l.value="",c.value=""},Ia=async()=>{var _,B,K,se;if(M.value.chainName!=="Aptos"){Ln();return}io.value=!1;let o,n,u,b,y,C;const $=Se.value.decimals,L=Ie.value.decimals;ko(""),Do(a("tips.increaseLiquiditySuccess",{from:ke.value?"":`${T.value} ${(_=i.value)==null?void 0:_.symbol}`,and:!ke.value&&!he.value?"and":"",to:he.value?"":`${k.value} ${(B=r.value)==null?void 0:B.symbol}`})),Qe(!0),l.value==="0"&&c.value==="∞"?(u=q.value.TickUtil.getMinIndex(Number(I.value.tickSpacing)),b=q.value.TickUtil.getMaxIndex(Number(I.value.tickSpacing))):(A.value?(o=Number(l.value),n=Number(c.value)):(o=1/Number(c.value),n=1/Number(l.value)),y=o==0?-443636:q.value.TickMath.priceToTickIndex(new h(o),$,L),C=q.value.TickMath.priceToTickIndex(new h(n),$,L),u=q.value.getNearestTickByTick(y,Number(I.value.tickSpacing)),b=q.value.getNearestTickByTick(C,Number(I.value.tickSpacing)));const U=A.value?m.value:!m.value;try{const Ce=await q.value.getCreatPoolTransactionPayload({coinTypeA:Se.value.address,coinTypeB:Ie.value.address,tick_spacing:Number(I.value.tickSpacing),initialize_sqrt_price:new Co(I.value.current_sqrt_price),uri:"",current_tick_index:I.value.current_tick_index,max_amount_a:A.value?T.value:k.value,max_amount_b:A.value?k.value:T.value,tick_lower:u,tick_upper:b,slippage:Number(Be.value)/100,decimalsA:$,decimalsB:L,fix_amount_a:U,liquidityInput:ho.value});let ne;if(console.log(JSON.stringify(Ce),"===>creatPoolPayload"),M.value.chainName==="Aptos")ne=await F.value.currentWallet.signAndSubmitTransaction(Ce);else{const Q=await F.value.currentWallet.signAndExecuteTransactionBlock(Ce);ne=q.value.handleTx(Q)}if(ne&&ne.hash){ko(ne.hash),Qe(!1),go(!0);const Q={title:"Created pool",desc:"Pool created successfully ",hash:ne.hash,tit:"Pool Created",icon:"icon-icon-Position-Created",tokenInfo:{tokena:`${(K=i.value)==null?void 0:K.address}`,numa:ke.value?"":`- ${T.value}`,logoa:N.value.tokensObj&&i.value&&i.value.address&&N.value.tokensObj[i.value.address]&&N.value.tokensObj[i.value.address].logoURI,tokenb:`${(se=r.value)==null?void 0:se.address}`,numb:he.value?"":`- ${k.value}`,logob:N.value.tokensObj&&r.value&&r.value.address&&N.value.tokensObj[r.value.address]&&N.value.tokensObj[r.value.address].logoURI},text:"Pool created successfully"};M.value.chainName!=="Aptos"&&(Q.res=ne.res),q.value.showTransitionPending(Q),(await q.value.watchTransaction(Q,!0)).status&&(go(!1),ie.value=!0,setTimeout(()=>{Ye.setPoolConfigList(M.value.chainName,M.value.filterCoinsObj),q.value.getAccount(F.value.address)},1e3)),Wo()}else Qe(!1),bo(!0);T.value="",k.value=""}catch(Ce){Ye.setPoolConfigList(M.value.chainName,M.value.filterCoinsObj),io.value=!1,console.log(Ce,"error===>"),T.value="",k.value="",Qe(!1),bo(!0)}},Ln=async()=>{var Ce,ne,Q,Me,ce,xe,Re,pe,Ue,qe,me,eo,He,_e,vo,uo,Rn,Un,On,Bn,Fn,jn,_n,Dn,Wn,Hn,En,zn,Xn,Vn,Kn,Zn,Gn,Jn,Qn,Yn;io.value=!1,console.log("创建sui池子");let o=!1;q.value.getIsSortedSymbols(Se.value.address,Ie.value.address)&&(o=!0),ko("");const n=ke.value?"":`${T.value} ${(Ce=i.value)==null?void 0:Ce.symbol}`,u=he.value?"":`${k.value} ${(ne=r.value)==null?void 0:ne.symbol}`;console.log("0424###createPoolFromCoin###",Se.value),console.log("0424###createPoolToCoin###",Ie.value),console.log("0424###needReverse###",o),console.log("0424###createPoolInfo?.value?.needReverse###",(Q=I==null?void 0:I.value)==null?void 0:Q.needReverse),Do(a("tips.increaseLiquiditySuccess",{from:!o&&!((Me=I==null?void 0:I.value)!=null&&Me.needReverse)||o&&((ce=I==null?void 0:I.value)!=null&&ce.needReverse)?n:u,and:!ke.value&&!he.value?"and":"",to:!o&&!((xe=I==null?void 0:I.value)!=null&&xe.needReverse)||o&&((Re=I==null?void 0:I.value)!=null&&Re.needReverse)?u:n})),Qe(!0);let b="",y="",C="",$="",L="",U="",_=0,B=0,K=!1,se;if(o||(pe=I==null?void 0:I.value)!=null&&pe.needReverse){const Ao=o&&!((Ue=I==null?void 0:I.value)!=null&&Ue.needReverse);b=Ao?(He=(eo=I==null?void 0:I.value)==null?void 0:eo.token_b)==null?void 0:He.address:(me=(qe=I==null?void 0:I.value)==null?void 0:qe.token_a)==null?void 0:me.address,y=Ao?(Rn=(uo=I==null?void 0:I.value)==null?void 0:uo.token_a)==null?void 0:Rn.address:(vo=(_e=I==null?void 0:I.value)==null?void 0:_e.token_b)==null?void 0:vo.address,C=Ao?(Fn=(Bn=I==null?void 0:I.value)==null?void 0:Bn.token_b)==null?void 0:Fn.decimals:(On=(Un=I==null?void 0:I.value)==null?void 0:Un.token_a)==null?void 0:On.decimals,$=Ao?(Wn=(Dn=I==null?void 0:I.value)==null?void 0:Dn.token_a)==null?void 0:Wn.decimals:(_n=(jn=I==null?void 0:I.value)==null?void 0:jn.token_b)==null?void 0:_n.decimals,(Hn=I==null?void 0:I.value)!=null&&Hn.needReverse?(L=A.value?T.value:k.value,U=A.value?k.value:T.value,_=A.value?Number(l.value):1/Number(c.value),B=A.value?Number(c.value):1/Number(l.value),K=A.value?m.value:!m.value,se=A.value?je.value:1/Number(je.value)):(L=A.value?k.value:T.value,U=A.value?T.value:k.value,_=A.value?1/Number(c.value):Number(l.value),B=A.value?1/Number(l.value):Number(c.value),K=A.value?!m.value:m.value,se=A.value?1/Number(je.value):je.value)}else b=(zn=(En=I==null?void 0:I.value)==null?void 0:En.token_a)==null?void 0:zn.address,y=(Vn=(Xn=I==null?void 0:I.value)==null?void 0:Xn.token_b)==null?void 0:Vn.address,C=(Zn=(Kn=I==null?void 0:I.value)==null?void 0:Kn.token_a)==null?void 0:Zn.decimals,$=(Jn=(Gn=I==null?void 0:I.value)==null?void 0:Gn.token_b)==null?void 0:Jn.decimals,L=A.value?T.value:k.value,U=A.value?k.value:T.value,_=A.value?Number(l.value):1/Number(c.value),B=A.value?Number(c.value):1/Number(l.value),K=A.value?m.value:!m.value,se=A.value?je.value:1/Number(je.value);try{console.log("0501###toCreatePool###params###",{coinTypeA:b,coinTypeB:y,decimalsA:C,decimalsB:$,amountA:L,amountB:U,minPrice:_,maxPrice:B,fix_amount_a:K,tick_spacing:Number(I.value.tickSpacing),slippage:Number(Be.value)/100,price:se});const Ao=await q.value.getCreatPoolTransactionPayload({coinTypeA:b,coinTypeB:y,decimalsA:C,decimalsB:$,amountA:L,amountB:U,minPrice:l.value=="0"&&c.value=="∞"?"0":_,maxPrice:l.value=="0"&&c.value=="∞"?"∞":B,fix_amount_a:K,tick_spacing:Number(I.value.tickSpacing),slippage:Number(Be.value)/100,price:se}),Aa=await F.value.currentWallet.signAndExecuteTransactionBlock(Ao),Jo=q.value.handleTx(Aa);if(Jo&&Jo.hash){ko(Jo.hash),Qe(!1),go(!0);const Pn={title:"Created pool",desc:"Pool created successfully ",hash:Jo.hash,tit:"Pool Created",icon:"icon-icon-Position-Created",tokenInfo:{tokena:`${(Qn=i.value)==null?void 0:Qn.address}`,numa:ke.value?"":`- ${T.value}`,logoa:N.value.tokensObj&&i.value&&i.value.address&&N.value.tokensObj[i.value.address]&&N.value.tokensObj[i.value.address].logoURI,tokenb:`${(Yn=r.value)==null?void 0:Yn.address}`,numb:he.value?"":`- ${k.value}`,logob:N.value.tokensObj&&r.value&&r.value.address&&N.value.tokensObj[r.value.address]&&N.value.tokensObj[r.value.address].logoURI},text:"Pool created successfully"};M.value.chainName!=="Aptos"&&(Pn.res=Jo.res),q.value.showTransitionPending(Pn),(await q.value.watchTransaction(Pn,!0)).status&&(go(!1),ie.value=!0,setTimeout(()=>{Ye.setPoolConfigList(M.value.chainName,M.value.filterCoinsObj),q.value.getAccount(F.value.address)},1e3)),Wo()}else Qe(!1),bo(!0);T.value="",k.value=""}catch(Ao){console.log("0407###createPool###error##",Ao),io.value=!1,Ye.setPoolConfigList(M.value.chainName,M.value.filterCoinsObj),T.value="",k.value="",Qe(!1),bo(!0)}},Ta=Z(()=>{var o,n,u,b,y,C;return((o=i.value)==null?void 0:o.isSelfBuilt)||((n=r.value)==null?void 0:n.isSelfBuilt)||((b=N.value.tokensObj[(u=i.value)==null?void 0:u.address])==null?void 0:b.isSelfBuilt)||((C=N.value.tokensObj[(y=r.value)==null?void 0:y.address])==null?void 0:C.isSelfBuilt)}),Sa=o=>{var n;return(o==null?void 0:o.logoURI)||(o==null?void 0:o.logo_url)||((n=N.value.tokensObj[o==null?void 0:o.address])==null?void 0:n.logo_url)||(M.value.theme==="default"?Ze("/image/coins/unknown.png"):Ze("/image/coins/sui-unknown.png"))},yn=(o,n)=>{console.log(ee.value,"===>currentCoinKey.value"),console.log(o);const u=localStorage.getItem(o.address);console.log(N.value.tokensObj,"===>pools.value.tokensObj"),console.log(u,"===>coinLocak"),N.value.tokensObj&&N.value.tokensObj[o.address]&&N.value.tokensObj[o.address].isSelfBuilt&&!u&&(n=="fromCoin"&&(Ko.value=o),n=="toCoin"&&(Zo.value=o),Mn.value=!0)};we(()=>[i.value,r.value],([o,n])=>{o&&!yo(o)&&yn(o,"fromCoin"),n&&!yo(n)&&yn(n,"toCoin")},{immediate:!0});const Mn=g(!1),$a=()=>{mn.value!=="Aptos"?be.push("/pool/list"):be.push("/pools")},mn=Z(()=>M.value.chainName);we(()=>[M.value.chainName,M.value.filterCoinsObj],([o,n])=>{o&&n&&Ye.setPoolConfigList(o,n)},{immediate:!0}),we(()=>[We.value,ao.value,i.value,r.value,$o.value],([o,n,u,b,y])=>{console.log(o.value,"==>isCreatePool.value"),console.log(n.value,"===>filterCreatePoolCoin.value"),console.log(u,"===>fromCoin"),console.log(b,"===>toCoin"),y&&o&&n&&!o.includes(1e-4)&&!o.includes(5e-4)&&!o.includes(.0025)&&!o.includes(.01)&&!n[u==null?void 0:u.address]&&!n[b==null?void 0:b.address]&&(j.value="")},{immediate:!0});const jo=g(!0),wn=()=>{Ge(!jo.value),jo.value=!jo.value,pn(I.value.currentPrice)};return{isFullRange:jo,clickFullRange:wn,warningToCoin:Zo,warningFromCoin:Ko,getTokenSource:yn,closeTokenWarning:$a,isShowTokenWarning:Mn,chainName:mn,hasCreatePool:$o,isCreateSuccess:ie,intPriceReverse:vn,isShowMask:To,isPc:e,intPrice:cn,createPoolToCoin:Ie,createPoolFromCoin:Se,getPoolInfoSuccess:Xo,toCreatePool:Ia,createPoolInfo:I,changecurrentPrice:pn,isShowCreatePoolModal:wa,addOrCreate:Pa,halfBtnSelect:sn,selectFee:ya,isViewDetail:X,addCommom:oo,decimalUi:Fe,fromCoinUrl:ha,toCoinUrl:Ca,t:a,wallet:F,toAdd:ga,chartLoading:V,currentTick:te,tickList:Oe,poolInfo:S,storeIndex:M,importIcon:Ze,addLiquidityBtnText:R,slippage:Be,countdown:G,loading:x,fromCoin:i,toCoin:r,openCoinSelect:tn,onCoinSelect:ln,existingCoins:D,lastSelectCoin:re,currentCoinKey:ee,showCoinSelect:Te,fromCoinAmount:T,toCoinAmount:k,maxBtnSelect:rn,fixedFromCoin:m,isShowLiquidityModal:io,direct:A,toggle:an,edit:ue,inputValue:j,feeTierList:Je,minPrice:l,maxPrice:c,invalidPriceRange:Vo,defaultMinPrice:O,defaultMaxPrice:E,priceRangeChangeMin:on,priceRangeChangeMax:nn,toFullRange:Ge,clearAll:un,clickClear:H,positionError:ve,positionTips:$e,router:be,clickRefresh:So,fromCoinBlance:Ve,toCoinBlance:Ke,showToCoinLock:he,showFromCoinLock:ke,currentPriceReverse:ro,currentPrice:je,getPirceText:ba,currentPriceTab:J,currentPriceTabList:po,getPirceKey:ka,priceTab:dn,aprRewardsParameter:Pe,aprRewardsDateList:le,aprTab:qo,reviseValue:Lo,label:Ee,aprTitle:Ne,isCreatePool:We,before7dContractPriceLowest:Xe,before7dContractPriceHighest:Le,aprRewardsTime:de,addLiquidityBtnDisabled:_o,checkNullObj:yo,sFixD:Qo,toCreateSuiPool:Ln,isSelfBuilt:Ta,getCoinIcon:Sa,isCreatePoolToCoin:Ro,isCreatePoolFromCoin:Uo,filterCreatePoolCoin:ao,poolTvl:fo}}});const lo=e=>(xo("data-v-bb88075e"),e=e(),en(),e),Kl={class:"pools-container"},Zl={key:0,class:"content pc-content"},Gl={class:"content-left"},Jl={class:"content-left-bg"},Ql={class:"content-left-title"},Yl={key:0,class:"pool-warning"},xl={class:"coin-select"},ei={key:0,class:"icon","aria-hidden":"true"},oi=lo(()=>t("use",{"xlink:href":"#icon-edit"},null,-1)),ni=[oi],ai={key:0,class:"fee-container"},ti=["onClick"],li={key:0,class:"icon fee-disabled","aria-hidden":"true"},ii=lo(()=>t("use",{"xlink:href":"#icon-icon-disable"},null,-1)),ri=[ii],si={key:1},ui={key:2},di={key:0},ci={key:1,class:"text-active"},vi={class:"deposit-title"},pi={class:"card-container"},mi={class:"card-item"},fi={class:"card-item"},gi={key:0,class:"icon","aria-hidden":"true"},bi=lo(()=>t("use",{"xlink:href":"#icon-icon-add"},null,-1)),ki=[bi],hi={class:"pc-network"},Ci={class:"content-right"},yi={key:0,class:"initPrice-mask"},wi={class:"content-right-title"},Pi=lo(()=>t("svg",{class:"icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-icon-information"})],-1)),Ii={class:"content-right-bg"},Ti={key:1,class:"price-tab"},Si=["onClick"],$i={key:2,class:"create-pool-tips"},Ai={key:3,class:"set-price-range"},Ni={class:"radio"},qi={key:0,src:pa},Li=lo(()=>t("span",null,"Full Range",-1)),Mi={key:0},Ri={key:1,class:"coin"},Ui={key:2,class:"coin"},Oi={key:3,class:"no-price"},Bi={alt:""},Fi={alt:""},ji={key:6,class:"position-tips"},_i={alt:""},Di={class:"tips"},Wi={key:7,class:"position-tips"},Hi={alt:""},Ei={class:"error"},zi={key:8,class:"d3-chart-box"},Xi={key:9,class:"day-7-price-range"},Vi=lo(()=>t("i",null,null,-1)),Ki={class:"gray"},Zi={key:11,class:"create-pool-tips"},Gi={key:12,class:"create-pool-warning"},Ji={key:1,class:"no-data"},Qi={key:0,src:ma,alt:""},Yi={key:1,src:fa,alt:""},xi={key:1,class:"content h5-content"},er={class:"content-left"},or={class:"content-left-bg"},nr={class:"content-left-title"},ar={key:0,class:"pool-warning"},tr={class:"coin-select"},lr={key:0,class:"icon","aria-hidden":"true"},ir=lo(()=>t("use",{"xlink:href":"#icon-edit"},null,-1)),rr=[ir],sr={key:0,class:"fee-container"},ur=["onClick"],dr={key:0},cr={key:1},vr={key:0},pr={key:1,class:"text-active"},mr={class:"content-right"},fr={key:0,class:"initPrice-mask"},gr={class:"content-right-title"},br=lo(()=>t("svg",{class:"icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-icon-information"})],-1)),kr={class:"content-right-bg"},hr={key:1,class:"price-tab"},Cr=["onClick"],yr={key:2,class:"create-pool-tips"},wr={key:3,class:"set-price-range"},Pr={class:"radio"},Ir={key:0,src:pa},Tr=lo(()=>t("span",null,"Full Range",-1)),Sr={key:0},$r={key:1,class:"coin"},Ar={key:2,class:"coin"},Nr={key:3,class:"no-price"},qr={alt:""},Lr={alt:""},Mr={key:6,class:"position-tips"},Rr=["src"],Ur={class:"tips"},Or={key:7,class:"position-tips"},Br=["src"],Fr={class:"error"},jr={key:8,class:"d3-chart-box"},_r={key:9,class:"day-7-price-range"},Dr=lo(()=>t("i",null,null,-1)),Wr={class:"gray"},Hr={key:11,class:"create-pool-tips"},Er={key:1,class:"no-data"},zr={key:0,src:ma,alt:""},Xr={key:1,src:fa,alt:""},Vr={key:0,class:"icon","aria-hidden":"true"},Kr=lo(()=>t("use",{"xlink:href":"#icon-icon-add"},null,-1)),Zr=[Kr],Gr={class:"pc-network"},Jr={class:"new-right"},Qr={class:"deposit-title"},Yr={class:"card-container"},xr={class:"card-item"},es={class:"card-item"},os={key:0,class:"icon","aria-hidden":"true"},ns=lo(()=>t("use",{"xlink:href":"#icon-icon-add"},null,-1)),as=[ns],ts={class:"h5-network"};function ls(e,a,W,z,F,Y){var te,V,ae,Oe,J,Pe,de,Ne,le,Ee,oe,M,To,q,ao,qo,Lo,po,So,Vo,Ge,We,mo,fo,Je,Be,Mo,_o,R,P,Xe,Le,be,i,r,on,nn,an,Ro,Uo,tn,Se,Ie,Ko,Zo,ln,rn,sn,un,io,go,bo,Qe,Do,ko,Wo,d,Ye,$o,N,ho,ke,he,Ho,Eo,je,ro,so,Oo,zo,S;const G=Na,ie=pt,X=Fa,x=Pt,ee=ja,D=_a,re=Nt,Te=Ha,A=ca,no=za,m=Ut,H=Yt,T=il,k=va,l=Ga,c=Xl,O=xa,E=et,ue=at,$e=tt,ve=Ea,j=Nn("image");return s(),f("div",Kl,[ge(G,{url:e.storeIndex.theme=="default"?"/pools":"/pool/list"},null,8,["url"]),ge(ie,{"pool-info":e.poolInfo,onClearAll:e.clearAll,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClearAll","onClickRefresh"]),e.isPc?(s(),f("div",Zl,[t("div",Gl,[t("div",Jl,[t("div",Ql,[De(v(e.$t("common.selectPool"))+" ",1),ge(X,{placement:"bottom","arrow-point-at-center":""},{title:ze(()=>[t("span",null,v(e.t("newAdd.poolWarning")),1)]),default:ze(()=>[e.isSelfBuilt?(s(),f("div",Yl)):w("",!0)]),_:1})]),t("div",xl,[ge(x,{"coin-icon":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_b.logoURI:e.poolInfo.token_a.logoURI:e.createPoolFromCoin?e.createPoolFromCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_b.symbol:e.poolInfo.token_a.symbol:e.createPoolFromCoin&&e.createPoolFromCoin.symbol,coin:e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_b:e.poolInfo.token_a:e.createPoolFromCoin,onClick:a[0]||(a[0]=p=>e.openCoinSelect("fromCoin"))},null,8,["coin-icon","coin-name","coin"]),ge(x,{"coin-icon":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_a.logoURI:e.poolInfo.token_b.logoURI:e.createPoolToCoin?e.createPoolToCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_a.symbol:e.poolInfo.token_b.symbol:e.createPoolToCoin&&e.createPoolToCoin.symbol,coin:e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_a:e.poolInfo.token_b:e.createPoolToCoin,onClick:a[1]||(a[1]=p=>e.openCoinSelect("toCoin"))},null,8,["coin-icon","coin-name","coin"])]),t("div",{class:ye(["pool-fee",e.edit?"pool-fee-edit":""])},[t("div",{class:"pool-fee-header",onClick:a[2]||(a[2]=p=>e.hasCreatePool?e.clickClear||!e.fromCoin||!e.toCoin?"":e.edit=!e.edit:"")},[t("span",{class:ye(e.inputValue?"":"fee-span")},v(e.inputValue?e.inputValue:e.$t("newAdd.selectFeeTier")),3),e.hasCreatePool?(s(),f("svg",ei,ni)):w("",!0)]),e.edit?(s(),f("div",ai,[(s(!0),f(No,null,Yo(e.feeTierList,(p,to)=>{var Bo,Xo,Ve,Ke,Go;return s(),f("div",{key:to,class:ye(["fee-item",[e.inputValue&&e.inputValue==p.label?"fee-item-active":"",e.isCreatePool.includes(p.fee)&&e.$route.query.action?" pool-created":" pool-not-created",e.chainName!=="Aptos"&&!e.isCreatePool.includes(p.fee)&&!e.filterCreatePoolCoin[(Bo=e.fromCoin)==null?void 0:Bo.address]&&!e.filterCreatePoolCoin[(Xo=e.toCoin)==null?void 0:Xo.address]?"disabled":""]]),onClick:Sn(Cn=>e.selectFee(p),["stop"])},[e.chainName!=="Aptos"&&!e.isCreatePool.includes(p.fee)&&!e.filterCreatePoolCoin[(Ve=e.fromCoin)==null?void 0:Ve.address]&&!e.filterCreatePoolCoin[(Ke=e.toCoin)==null?void 0:Ke.address]?(s(),f("svg",li,ri)):w("",!0),e.$route.query.action=="create-pool"?(s(),f("div",si,[t("p",null,v(p.title),1),t("p",{class:ye(e.isCreatePool&&e.isCreatePool.includes(p.fee)?"text-default":"text-theme")},v(e.isCreatePool&&e.isCreatePool.includes(p.fee)?e.$t("newAdd.alreadyCreated"):e.$t("newAdd.notCreated")),3)])):(s(),f("div",ui,[t("p",{class:ye(e.isCreatePool&&e.isCreatePool.includes(p.fee)?"text-active":"text-default")},v(p.title),3),e.isCreatePool&&!e.isCreatePool.includes(p.fee)?(s(),f("p",di,v(e.$t("newAdd.notCreated")),1)):w("",!0),e.isCreatePool&&e.isCreatePool.includes(p.fee)?(s(),f("p",ci,v(e.poolTvl&&e.poolTvl[p.fee]&&((Go=e.poolTvl[p.fee])==null?void 0:Go.rateText)),1)):w("",!0)])),t("span",null,v(p.text),1)],10,ti)}),128))])):w("",!0)],2),t("div",vi,v(e.$t("newAdd.depositAmounts")),1),t("div",pi,[t("div",mi,[ge(ee,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":a[3]||(a[3]=p=>e.fromCoinAmount=p),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:a[4]||(a[4]=p=>e.maxBtnSelect("fromCoin")),onOnHalf:a[5]||(a[5]=p=>e.halfBtnSelect("fromCoin")),onOnInput:a[6]||(a[6]=p=>{e.fromCoinAmount=p,e.fixedFromCoin=!0}),onOnSelect:a[7]||(a[7]=p=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&e.$route.query.action!=="create-pool"?(s(),fe(D,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):w("",!0)]),t("div",fi,[ge(ee,{modelValue:e.toCoinAmount,"onUpdate:modelValue":a[8]||(a[8]=p=>e.toCoinAmount=p),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:a[9]||(a[9]=p=>e.maxBtnSelect("toCoin")),onOnHalf:a[10]||(a[10]=p=>e.halfBtnSelect("toCoin")),onOnInput:a[11]||(a[11]=p=>{e.toCoinAmount=p,e.fixedFromCoin=!1}),onOnSelect:a[12]||(a[12]=p=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&e.$route.query.action!=="create-pool"?(s(),fe(D,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):w("",!0)]),((V=(te=e.$route)==null?void 0:te.query)==null?void 0:V.action)=="create-pool"&&(e.showToCoinLock||e.showFromCoinLock||!e.filterCreatePoolCoin[(ae=e.fromCoin)==null?void 0:ae.address]&&!e.filterCreatePoolCoin[(Oe=e.toCoin)==null?void 0:Oe.address])?(s(),fe(re,{key:0,"show-to-coin-lock":e.showToCoinLock,"showfrom-coin-lock":e.showFromCoinLock},null,8,["show-to-coin-lock","showfrom-coin-lock"])):w("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme=="default"?(s(),f("img",{key:1,class:"add",src:ta,alt:"",onClick:a[13]||(a[13]=(...p)=>e.toggle&&e.toggle(...p))})):w("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme!=="default"?(s(),f("img",{key:2,class:"add",src:la,alt:"",onClick:a[14]||(a[14]=(...p)=>e.toggle&&e.toggle(...p))})):w("",!0)]),e.poolInfo?(s(),fe(Te,{key:0,"min-price":e.minPrice,"max-price":e.maxPrice,"pool-info":e.poolInfo||e.createPoolInfo,"fixed-from-coin":e.fixedFromCoin,"from-coin":e.fromCoin,"to-coin":e.toCoin,"current-price-tab":e.currentPriceTab,slippage:e.slippage,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount},null,8,["min-price","max-price","pool-info","fixed-from-coin","from-coin","to-coin","current-price-tab","slippage","current-price","current-price-reverse","from-coin-amount","to-coin-amount"])):w("",!0)]),ge(A,{disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,class:"big-btn",onClick:a[15]||(a[15]=p=>e.wallet.connected?e.addOrCreate():e.wallet.setIsShowWalletModal(!0))},{default:ze(()=>[e.addLiquidityBtnText!==e.$t("newAdd.preview")&&e.addLiquidityBtnText!==e.$t("modal.selectTokenModalTitle")&&e.wallet.connected?(s(),f("svg",gi,ki)):w("",!0),t("span",null,v(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),t("div",hi,[ge(no)])]),t("div",Ci,[e.isShowMask?(s(),f("div",yi)):w("",!0),t("div",wi,[De(v((J=e.$route)!=null&&J.query.action?e.$t("newAdd.setInitialPrice"):e.$t("newAdd.selectRange"))+" ",1),e.poolInfo?(s(),fe(X,{key:0,placement:"bottom","arrow-point-at-center":""},{title:ze(()=>[t("span",null,v(e.$t("newAdd.selectRangeTips")),1)]),default:ze(()=>[Pi]),_:1})):w("",!0)]),t("div",Ii,[!((de=(Pe=e.$route)==null?void 0:Pe.query)!=null&&de.action)&&e.poolInfo||(le=(Ne=e.$route)==null?void 0:Ne.query)!=null&&le.action?(s(),f(No,{key:0},[(oe=(Ee=e.$route)==null?void 0:Ee.query)!=null&&oe.action&&!e.poolInfo?(s(),fe(m,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"click-clear":e.clickClear,"int-price":e.intPrice,onChangecurrentPrice:e.changecurrentPrice},null,8,["from-coin","to-coin","click-clear","int-price","onChangecurrentPrice"])):w("",!0),e.poolInfo?(s(),f("div",Ti,[(s(!0),f(No,null,Yo(e.currentPriceTabList,p=>(s(),f("div",{key:p,class:ye(["price-item",{"price-item-active":p.key==e.currentPriceTab,"price-stable":e.poolInfo.type=="stable"}]),onClick:to=>e.priceTab(p)},[ge(X,{placement:"bottom","arrow-point-at-center":""},{title:ze(()=>[t("span",null,v(e.getPirceText(p.key)),1)]),default:ze(()=>[De(" "+v(e.getPirceKey(p.key)),1)]),_:2},1024)],10,Si))),128))])):w("",!0),(To=(M=e.$route)==null?void 0:M.query)!=null&&To.action&&!e.poolInfo?(s(),f("div",$i,v(e.$t("newAdd.createPoolInitialText")),1)):w("",!0),!e.poolInfo&&((ao=(q=e.$route)==null?void 0:q.query)!=null&&ao.action)?(s(),f("div",Ai,[t("div",null,v(e.$t("common.setPriceRange")),1),t("div",null,[t("div",{class:ye(["tab-item",e.isFullRange?"tab-item-active tab-item-farms-active":""]),onClick:a[16]||(a[16]=Sn(p=>e.clickFullRange(),["stop"]))},[t("div",Ni,[e.isFullRange&&e.chainName=="Sui"?(s(),f("img",qi)):w("",!0)]),Li],2)])])):w("",!0),e.poolInfo||(Lo=(qo=e.$route)==null?void 0:qo.query)!=null&&Lo.action?(s(),f("div",{key:4,class:ye(["current-price",(So=(po=e.$route)==null?void 0:po.query)!=null&&So.action&&!e.createPoolInfo&&!e.poolInfo&&!e.inputValue?"create-pool-price":""])},[!e.fromCoin||!e.toCoin?(s(),f("span",Mi,v(e.$t("common.currentPrice")),1)):w("",!0),e.fromCoin&&e.toCoin&&e.direct?(s(),f("div",Ri,[t("span",null,v(e.$t("common.currentPrice")),1),De(" "+v(e.currentPrice===""?"--":("addCommom"in e?e.addCommom:Ae(oo))(("decimalUi"in e?e.decimalUi:Ae(Fe))(e.currentPrice,6)))+" "+v((Vo=e.toCoin)==null?void 0:Vo.symbol)+" per "+v((Ge=e.fromCoin)==null?void 0:Ge.symbol),1)])):e.fromCoin&&e.toCoin&&!e.direct?(s(),f("div",Ui,[t("span",null,v(e.$t("common.currentPrice")),1),De(" "+v(e.currentPriceReverse===""?"--":("addCommom"in e?e.addCommom:Ae(oo))(("decimalUi"in e?e.decimalUi:Ae(Fe))(e.currentPriceReverse,6)))+" "+v((We=e.toCoin)==null?void 0:We.symbol)+" per "+v((mo=e.fromCoin)==null?void 0:mo.symbol),1)])):(s(),f("div",Oi,"0.0")),e.fromCoin&&e.toCoin?(s(),f("div",{key:4,class:ye(e.poolInfo&&((fo=e.poolInfo)!=null&&fo.needReverse)||e.createPoolInfo&&((Je=e.createPoolInfo)!=null&&Je.needReverse)?"toggle reverse":"toggle")},[t("div",{class:ye(e.direct?"item active-item":"item"),onClick:a[17]||(a[17]=p=>e.direct?"":e.toggle())},[co(t("img",Bi,null,512),[[j,e.getCoinIcon(e.direct?e.fromCoin:e.toCoin)]]),De(" "+v(e.direct?(Be=e.fromCoin)==null?void 0:Be.symbol:(Mo=e.toCoin)==null?void 0:Mo.symbol),1)],2),t("div",{class:ye(e.direct?"item ":"item active-item"),onClick:a[18]||(a[18]=p=>e.direct?e.toggle():"")},[co(t("img",Fi,null,512),[[j,e.getCoinIcon(e.direct?e.toCoin:e.fromCoin)]]),De(" "+v(e.direct?(_o=e.toCoin)==null?void 0:_o.symbol:(R=e.fromCoin)==null?void 0:R.symbol),1)],2)],2)):w("",!0)],2)):w("",!0),e.poolInfo||(Xe=(P=e.$route)==null?void 0:P.query)!=null&&Xe.action?(s(),fe(H,{key:5,min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direct,"invalid-price-range":e.invalidPriceRange,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo?e.poolInfo:e.createPoolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,"int-price":e.intPrice,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax,onOnChangeFullRange:e.toFullRange},null,8,["min","max","from-coin","to-coin","direct","invalid-price-range","default-min-price","default-max-price","pool-info","loading","current-price-tab","int-price","onOnChangeMinPrice","onOnChangeMaxPrice","onOnChangeFullRange"])):w("",!0),e.positionTips&&!e.clickClear&&e.poolInfo?(s(),f("div",ji,[co(t("img",_i,null,512),[[j,("importIcon"in e?e.importIcon:Ae(Ze))("/image/icon-tips@2x.png")]]),t("p",Di,v(e.$t("tips.positionTips")),1)])):w("",!0),e.positionError&&(e.poolInfo||(be=(Le=e.$route)==null?void 0:Le.query)!=null&&be.action)&&(Number(e.minPrice)||Number(e.maxPrice))?(s(),f("div",Wi,[co(t("img",Hi,null,512),[[j,("importIcon"in e?e.importIcon:Ae(Ze))("/image/icon-tips-error@2x.png")]]),t("p",Ei,v(e.$t("tips.positionError")),1)])):w("",!0),e.fromCoin&&e.toCoin&&e.poolInfo&&((i=e.poolInfo)!=null&&i.current_sqrt_price)?(s(),f("div",zi,[e.fromCoin&&e.toCoin&&e.poolInfo?(s(),fe(T,{key:0,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direct,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):w("",!0),e.chartLoading?(s(),fe(k,{key:1})):w("",!0)])):w("",!0),e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(s(),f("div",Xi,[Vi,t("span",Ki,v(e.aprRewardsTime)+" Price Range",1),t("span",null,v(("addCommom"in e?e.addCommom:Ae(oo))(("decimalUi"in e?e.decimalUi:Ae(Fe))(e.before7dContractPriceLowest,6)))+" - "+v(("addCommom"in e?e.addCommom:Ae(oo))(("decimalUi"in e?e.decimalUi:Ae(Fe))(e.before7dContractPriceHighest,6))),1)])):w("",!0),e.poolInfo&&!e.isSelfBuilt&&Number(e.minPrice)<Number(e.maxPrice)||e.poolInfo&&!e.isSelfBuilt&&e.maxPrice=="∞"?(s(),fe(l,{key:10,"apr-title":e.aprTitle,"apr-rewards-date-list":e.aprRewardsDateList,"apr-rewards-parameter":e.aprRewardsParameter,"name-tab":"deposit","from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,onAprTab:e.aprTab},null,8,["apr-title","apr-rewards-date-list","apr-rewards-parameter","from-coin","to-coin","pool-info","min-price","max-price","onAprTab"])):w("",!0),(on=(r=e.$route)==null?void 0:r.query)!=null&&on.action&&!e.poolInfo&&!e.showFromCoinLock&&!e.showToCoinLock?(s(),f("div",Zi,v(e.$t("newAdd.createPoolText")),1)):w("",!0),((an=(nn=e.$route)==null?void 0:nn.query)==null?void 0:an.action)=="create-pool"&&(e.showFromCoinLock||e.showToCoinLock)&&Number(e.maxPrice)>Number(e.minPrice)?(s(),f("div",Gi," To create a new pool, the initial price you set must be within your price range. ")):w("",!0)],64)):(s(),f("div",Ji,[e.storeIndex.theme=="default"?(s(),f("img",Qi)):(s(),f("img",Yi)),t("p",null,v(e.$t("newAdd.positionAppear")),1)]))]),e.poolInfo&&e.$route.query.action!=="create-pool"?(s(),fe(c,{key:1,"apr-rewards-parameter":e.aprRewardsParameter,"pool-info":e.poolInfo,label:e.label,onReviseValue:e.reviseValue},null,8,["apr-rewards-parameter","pool-info","label","onReviseValue"])):w("",!0)])])):w("",!0),e.isPc?w("",!0):(s(),f("div",xi,[t("div",er,[t("div",or,[t("div",nr,[De(v(e.$t("common.selectPool"))+" ",1),ge(X,{placement:"bottom","arrow-point-at-center":""},{title:ze(()=>[t("span",null,v(e.t("newAdd.poolWarning")),1)]),default:ze(()=>[e.poolInfo&&e.isSelfBuilt?(s(),f("div",ar)):w("",!0)]),_:1})]),t("div",tr,[ge(x,{"coin-icon":e.poolInfo?e.poolInfo.token_a.logoURI:e.createPoolFromCoin?e.createPoolFromCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.token_a.symbol:e.createPoolFromCoin&&e.createPoolFromCoin.symbol,coin:e.poolInfo?e.poolInfo.token_a:e.createPoolFromCoin,onClick:a[19]||(a[19]=p=>e.openCoinSelect("fromCoin"))},null,8,["coin-icon","coin-name","coin"]),ge(x,{"coin-icon":e.poolInfo?e.poolInfo.token_b.logoURI:e.createPoolToCoin?e.createPoolToCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.token_b.symbol:e.createPoolToCoin&&e.createPoolToCoin.symbol,coin:e.poolInfo?e.poolInfo.token_b:e.createPoolToCoin,onClick:a[20]||(a[20]=p=>e.openCoinSelect("toCoin"))},null,8,["coin-icon","coin-name","coin"])]),t("div",{class:ye(["pool-fee",e.edit?"pool-fee-edit":""])},[t("div",{class:"pool-fee-header",onClick:a[21]||(a[21]=p=>e.hasCreatePool?e.clickClear||!e.fromCoin||!e.toCoin?"":e.edit=!e.edit:"")},[t("span",{class:ye(e.inputValue?"":"fee-span")},v(e.inputValue?e.inputValue:e.$t("newAdd.selectFeeTier")),3),e.hasCreatePool?(s(),f("svg",lr,rr)):w("",!0)]),e.edit?(s(),f("div",sr,[e.getPoolInfoSuccess?(s(!0),f(No,{key:1},Yo(e.feeTierList,(p,to)=>{var Bo;return s(),f("div",{key:to,class:ye(["fee-item",[e.inputValue&&e.inputValue==p.label?"fee-item-active":"",e.isCreatePool&&e.isCreatePool.length>0&&e.isCreatePool.includes(p.fee)&&e.$route.query.action?" pool-created":" pool-not-created"]]),onClick:Xo=>e.selectFee(p)},[e.$route.query.action=="create-pool"?(s(),f("div",dr,[t("p",null,v(p.title),1),t("p",{class:ye(e.isCreatePool.includes(p.fee)?"text-default":"text-theme")},v(e.isCreatePool.includes(p.fee)?e.$t("newAdd.alreadyCreated"):e.$t("newAdd.notCreated")),3)])):(s(),f("div",cr,[t("p",{class:ye(e.isCreatePool.includes(p.fee)?"text-active":"text-default")},v(p.title),3),e.isCreatePool&&!e.isCreatePool.includes(p.fee)?(s(),f("p",vr,v(e.$t("newAdd.notCreated")),1)):w("",!0),e.isCreatePool&&e.isCreatePool.includes(p.fee)?(s(),f("p",pr,v(e.poolTvl&&e.poolTvl[p.fee]&&((Bo=e.poolTvl[p.fee])==null?void 0:Bo.rateText)),1)):w("",!0)])),t("span",null,v(p.text),1)],10,ur)}),128)):(s(),fe(k,{key:0}))])):w("",!0)],2)]),t("div",mr,[e.isShowMask?(s(),f("div",fr)):w("",!0),t("div",gr,[De(v((Ro=e.$route)!=null&&Ro.query.action?e.$t("newAdd.setInitialPrice"):e.$t("newAdd.selectRange"))+" ",1),e.poolInfo?(s(),fe(X,{key:0,placement:"bottom","arrow-point-at-center":""},{title:ze(()=>[t("span",null,v(e.$t("newAdd.selectRangeTips")),1)]),default:ze(()=>[br]),_:1})):w("",!0)]),t("div",kr,[!((tn=(Uo=e.$route)==null?void 0:Uo.query)!=null&&tn.action)&&e.poolInfo||(Ie=(Se=e.$route)==null?void 0:Se.query)!=null&&Ie.action?(s(),f(No,{key:0},[(Zo=(Ko=e.$route)==null?void 0:Ko.query)!=null&&Zo.action&&!e.poolInfo?(s(),fe(m,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"click-clear":e.clickClear,"int-price":e.intPrice,onChangecurrentPrice:e.changecurrentPrice},null,8,["from-coin","to-coin","click-clear","int-price","onChangecurrentPrice"])):w("",!0),e.poolInfo?(s(),f("div",hr,[(s(!0),f(No,null,Yo(e.currentPriceTabList,p=>(s(),f("div",{key:p,class:ye(["price-item",{"price-item-active":p.key==e.currentPriceTab,"price-stable":e.poolInfo.type=="stable"}]),onClick:to=>e.priceTab(p)},[ge(X,{placement:"bottom","arrow-point-at-center":""},{title:ze(()=>[t("span",null,v(e.getPirceText(p.key)),1)]),default:ze(()=>[De(" "+v(e.getPirceKey(p.key)),1)]),_:2},1024)],10,Cr))),128))])):w("",!0),(rn=(ln=e.$route)==null?void 0:ln.query)!=null&&rn.action&&!e.poolInfo?(s(),f("div",yr,v(e.$t("newAdd.createPoolInitialText")),1)):w("",!0),!e.poolInfo&&((un=(sn=e.$route)==null?void 0:sn.query)!=null&&un.action)?(s(),f("div",wr,[t("div",null,v(e.$t("common.setPriceRange")),1),t("div",null,[t("div",{class:ye(["tab-item",e.isFullRange?"tab-item-active tab-item-farms-active":""]),onClick:a[22]||(a[22]=Sn(p=>e.clickFullRange(),["stop"]))},[t("div",Pr,[e.isFullRange&&e.chainName=="Sui"?(s(),f("img",Ir)):w("",!0)]),Tr],2)])])):w("",!0),e.poolInfo||(go=(io=e.$route)==null?void 0:io.query)!=null&&go.action?(s(),f("div",{key:4,class:ye(["current-price",(Qe=(bo=e.$route)==null?void 0:bo.query)!=null&&Qe.action&&!e.createPoolInfo&&!e.poolInfo&&!e.inputValue?"create-pool-price":""])},[!e.fromCoin||!e.toCoin?(s(),f("span",Sr,v(e.$t("common.currentPrice")),1)):w("",!0),e.fromCoin&&e.toCoin&&e.direct?(s(),f("div",$r,[t("span",null,v(e.$t("common.currentPrice")),1),De(" "+v(("addCommom"in e?e.addCommom:Ae(oo))(("decimalUi"in e?e.decimalUi:Ae(Fe))(e.currentPrice,6)))+" "+v((Do=e.toCoin)==null?void 0:Do.symbol)+" per "+v((ko=e.fromCoin)==null?void 0:ko.symbol),1)])):e.fromCoin&&e.toCoin&&!e.direct?(s(),f("div",Ar,[t("span",null,v(e.$t("common.currentPrice")),1),De(" "+v(("addCommom"in e?e.addCommom:Ae(oo))(("decimalUi"in e?e.decimalUi:Ae(Fe))(e.currentPriceReverse,6)))+" "+v((Wo=e.toCoin)==null?void 0:Wo.symbol)+" per "+v((d=e.fromCoin)==null?void 0:d.symbol),1)])):(s(),f("div",Nr,"0.0")),e.fromCoin&&e.toCoin?(s(),f("div",{key:4,class:ye(e.poolInfo&&((Ye=e.poolInfo)!=null&&Ye.needReverse)||e.createPoolInfo&&(($o=e.createPoolInfo)!=null&&$o.needReverse)?"toggle reverse":"toggle")},[t("div",{class:ye(e.direct?"item active-item":"item"),onClick:a[23]||(a[23]=p=>e.direct?"":e.toggle())},[co(t("img",qr,null,512),[[j,e.getCoinIcon(e.direct?e.fromCoin:e.toCoin)]]),De(" "+v(e.direct?(N=e.fromCoin)==null?void 0:N.symbol:(ho=e.toCoin)==null?void 0:ho.symbol),1)],2),t("div",{class:ye(e.direct?"item ":"item active-item"),onClick:a[24]||(a[24]=p=>e.direct?e.toggle():"")},[co(t("img",Lr,null,512),[[j,e.getCoinIcon(e.direct?e.toCoin:e.fromCoin)]]),De(" "+v(e.direct?(ke=e.toCoin)==null?void 0:ke.symbol:(he=e.fromCoin)==null?void 0:he.symbol),1)],2)],2)):w("",!0)],2)):w("",!0),e.poolInfo||(Eo=(Ho=e.$route)==null?void 0:Ho.query)!=null&&Eo.action?(s(),fe(H,{key:5,min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direct,"invalid-price-range":e.invalidPriceRange,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo?e.poolInfo:e.createPoolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax,onOnChangeFullRange:e.toFullRange},null,8,["min","max","from-coin","to-coin","direct","invalid-price-range","default-min-price","default-max-price","pool-info","loading","current-price-tab","onOnChangeMinPrice","onOnChangeMaxPrice","onOnChangeFullRange"])):w("",!0),e.positionTips&&!e.clickClear&&e.poolInfo?(s(),f("div",Mr,[t("img",{src:("importIcon"in e?e.importIcon:Ae(Ze))("/image/icon-tips@2x.png"),alt:""},null,8,Rr),t("p",Ur,v(e.$t("tips.positionTips")),1)])):w("",!0),e.positionError&&(e.poolInfo||(ro=(je=e.$route)==null?void 0:je.query)!=null&&ro.action)?(s(),f("div",Or,[t("img",{src:("importIcon"in e?e.importIcon:Ae(Ze))("/image/icon-tips-error@2x.png"),alt:""},null,8,Br),t("p",Fr,v(e.$t("tips.positionError")),1)])):w("",!0),e.fromCoin&&e.toCoin&&e.poolInfo?(s(),f("div",jr,[e.fromCoin&&e.toCoin&&e.poolInfo?(s(),fe(T,{key:0,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direct,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):w("",!0),e.chartLoading?(s(),fe(k,{key:1})):w("",!0)])):w("",!0),e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(s(),f("div",_r,[Dr,t("span",Wr,v(e.aprRewardsTime)+" Price Range",1),t("span",null,v(("addCommom"in e?e.addCommom:Ae(oo))(("decimalUi"in e?e.decimalUi:Ae(Fe))(e.before7dContractPriceLowest,6)))+" - "+v(("addCommom"in e?e.addCommom:Ae(oo))(("decimalUi"in e?e.decimalUi:Ae(Fe))(e.before7dContractPriceHighest,6))),1)])):w("",!0),e.poolInfo&&!e.isSelfBuilt&&Number(e.minPrice)<Number(e.maxPrice)||e.poolInfo&&!e.isSelfBuilt&&e.maxPrice=="∞"?(s(),fe(l,{key:10,"apr-title":e.aprTitle,"apr-rewards-date-list":e.aprRewardsDateList,"apr-rewards-parameter":e.aprRewardsParameter,"name-tab":"deposit","from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,onAprTab:e.aprTab},null,8,["apr-title","apr-rewards-date-list","apr-rewards-parameter","from-coin","to-coin","pool-info","min-price","max-price","onAprTab"])):w("",!0),(Oo=(so=e.$route)==null?void 0:so.query)!=null&&Oo.action&&!e.poolInfo?(s(),f("div",Hr,v(e.$t("newAdd.createPoolText")),1)):w("",!0)],64)):(s(),f("div",Er,[e.storeIndex.theme=="default"?(s(),f("img",zr)):(s(),f("img",Xr)),t("p",null,v(e.$t("newAdd.positionAppear")),1)]))]),e.poolInfo&&!e.isSelfBuilt?(s(),fe(c,{key:1,"apr-rewards-parameter":e.aprRewardsParameter,"pool-info":e.poolInfo,label:e.label,onReviseValue:e.reviseValue},null,8,["apr-rewards-parameter","pool-info","label","onReviseValue"])):w("",!0)]),ge(A,{disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,class:"big-btn",onClick:a[25]||(a[25]=p=>e.wallet.connected?e.addOrCreate():e.wallet.setIsShowWalletModal(!0))},{default:ze(()=>[e.addLiquidityBtnText!==e.$t("newAdd.preview")&&e.addLiquidityBtnText!==e.$t("modal.selectTokenModalTitle")?(s(),f("svg",Vr,Zr)):w("",!0),t("span",null,v(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),t("div",Gr,[ge(no)])]),t("div",Jr,[t("div",Qr,v(e.$t("newAdd.depositAmounts")),1),t("div",Yr,[t("div",xr,[ge(ee,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":a[26]||(a[26]=p=>e.fromCoinAmount=p),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:a[27]||(a[27]=p=>e.maxBtnSelect("fromCoin")),onOnHalf:a[28]||(a[28]=p=>e.halfBtnSelect("fromCoin")),onOnInput:a[29]||(a[29]=p=>{e.fromCoinAmount=p,e.fixedFromCoin=!0}),onOnSelect:a[30]||(a[30]=p=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock?(s(),fe(D,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):w("",!0)]),t("div",es,[ge(ee,{modelValue:e.toCoinAmount,"onUpdate:modelValue":a[31]||(a[31]=p=>e.toCoinAmount=p),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:a[32]||(a[32]=p=>e.maxBtnSelect("toCoin")),onOnHalf:a[33]||(a[33]=p=>e.halfBtnSelect("toCoin")),onOnInput:a[34]||(a[34]=p=>{e.toCoinAmount=p,e.fixedFromCoin=!1}),onOnSelect:a[35]||(a[35]=p=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock?(s(),fe(D,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):w("",!0)]),(S=(zo=e.$route)==null?void 0:zo.query)!=null&&S.action&&!e.poolInfo&&(!e.createPoolInfo||!e.createPoolInfo.currentPrice)?(s(),fe(re,{key:0,"show-to-coin-lock":e.showToCoinLock,"showfrom-coin-lock":e.showFromCoinLock},null,8,["show-to-coin-lock","showfrom-coin-lock"])):w("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme=="default"?(s(),f("img",{key:1,class:"add",src:ta,alt:"",onClick:a[36]||(a[36]=(...p)=>e.toggle&&e.toggle(...p))})):w("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme!=="default"?(s(),f("img",{key:2,class:"add",src:la,alt:"",onClick:a[37]||(a[37]=(...p)=>e.toggle&&e.toggle(...p))})):w("",!0)]),e.poolInfo||e.createPoolInfo?(s(),fe(Te,{key:0,"min-price":e.minPrice,"max-price":e.maxPrice,"pool-info":e.poolInfo||e.createPoolInfo,"fixed-from-coin":e.fixedFromCoin,"from-coin":e.fromCoin,"to-coin":e.toCoin,"current-price-tab":e.currentPriceTab,slippage:e.slippage,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount},null,8,["min-price","max-price","pool-info","fixed-from-coin","from-coin","to-coin","current-price-tab","slippage","current-price","current-price-reverse","from-coin-amount","to-coin-amount"])):w("",!0)])])),ge(A,{disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,class:"big-btn h5-btn",onClick:a[38]||(a[38]=p=>e.wallet.connected?e.addOrCreate():e.wallet.setIsShowWalletModal(!0))},{default:ze(()=>[e.addLiquidityBtnText!==e.$t("newAdd.preview")?(s(),f("svg",os,as)):w("",!0),t("span",null,v(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),t("div",ts,[ge(no)]),e.showCoinSelect?(s(),fe(O,{key:2,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,"is-create-pool-to-coin":e.isCreatePoolToCoin,"is-create-pool-from-coin":e.isCreatePoolFromCoin,onOnSelect:e.onCoinSelect,onOnClose:a[39]||(a[39]=p=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","is-create-pool-to-coin","is-create-pool-from-coin","onOnSelect"])):w("",!0),e.isViewDetail?(s(),fe(E,{key:3,"pool-info":e.poolInfo,onOnClose:a[40]||(a[40]=p=>e.isViewDetail=!1)},null,8,["pool-info"])):w("",!0),e.isCreateSuccess?(s(),fe(ue,{key:4,onOnClose:a[41]||(a[41]=p=>e.isCreateSuccess=!1)})):w("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(s(),fe($e,{key:5,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,onClose:e.closeTokenWarning,onClickContinue:a[42]||(a[42]=p=>e.isShowTokenWarning=!1)},null,8,["from-coin","to-coin","onClose"])):w("",!0),e.isShowLiquidityModal?(s(),fe(ve,{key:6,"pool-info":e.poolInfo||e.createPoolInfo,title:e.$route.query.action=="create-pool"?e.$t("newAdd.preview"):e.$t("button.addLiquidity"),"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"current-price-tab":e.currentPriceTab,"min-price":e.minPrice,"max-price":e.maxPrice,"show-from-coin-lock":e.showFromCoinLock,"show-to-coin-lock":e.showToCoinLock,"current-direct":e.direct,"is-increase":!1,onCreatePool:e.toCreatePool,onToAdd:e.toAdd,onOnClose:a[43]||(a[43]=p=>e.isShowLiquidityModal=!1)},null,8,["pool-info","title","from-coin-amount","to-coin-amount","from-coin","to-coin","fixed-from-coin","current-price","current-price-reverse","current-price-tab","min-price","max-price","show-from-coin-lock","show-to-coin-lock","current-direct","onCreatePool","onToAdd"])):w("",!0)])}const Gs=Io(Vl,[["render",ls],["__scopeId","data-v-bb88075e"]]);export{Gs as default};
