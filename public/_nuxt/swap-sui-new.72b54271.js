import{a as Y,d as ce,c as re,h as Te,M as mo,b as Ae,z as vo,p as fo,e as je,o as go,q as Ve}from"./common.26dbc61a.js";import{aa as Bo,m as o,r as U,A as se,q as xe,a as pe,o as h,c as ee,w as ne,P as Ke,h as n,f as F,i as J,F as ze,E as He,x as q,G as X,p as he,k as we,e as ve,l as ae,y as ge,j as $e,S as eo,u as te,D as Oo,$ as Lo,B as oo,s as Uo,Y as Eo,z as to,K as jo,N as Do,a1 as qo,b as ho,fg as Wo}from"./entry.8e75b3ab.js";import"./index.abd2f5b0.js";import{u as Se,e as wo,a as Re,b as So}from"./index.4ed5b0c4.js";import{u as Co,C as no,R as Vo,c as Ee,A as zo,a as Ho,_ as Go,b as Ko,d as Yo}from"./confetti.module.df85bd5f.js";import{u as ko}from"./useToken.fef31a36.js";import"./decimal.a2826370.js";import{b as Ge,u as Ye,c as me}from"./index.91fc242d.js";import{D as M}from"./decimal.765d8738.js";/* empty css              */import{C as Jo}from"./coin-img.6109f284.js";import{_ as Xo}from"./within-error.a1d66a2f.js";import{_ as Qo}from"./refresh-icon.5b810dd0.js";import{_ as Zo}from"./swap-setting.6504553c.js";/* empty css              */import{_ as xo}from"./coin-select.176463ce.js";import{_ as et}from"./token-warning-modal.eb441851.js";/* empty css              */import{T as ot}from"./token-dropdown-select.8213cb89.js";import{u as tt}from"./useDebounceFunction.d68cdc11.js";import{u as so}from"./token.ebb2586c.js";import{C as nt}from"./coin-img-warning.a4e33e8e.js";import{i as st}from"./install.0c190e2b.js";import{U as at}from"./underline-tab.b604db25.js";import"./icon-tooltip.9c059160.js";import"./fetchFun.ff4aae28.js";import"./useSDK.c220472c.js";/* empty css              */import"./icon-error_2x.2c9cbac6.js";import"./import-icon.de3e6c66.js";/* empty css              */import"./token-warning_2x.0f0ae6ce.js";import"./img-no-Positions_2x.3896aa04.js";import"./img-no-Positions_2x.adeca125.js";import"./check-box.34ab5c53.js";import"./limit-beta.c32a4968.js";const le=Bo("useSuiSwapStore",{state:()=>({fromCoin:{},toCoin:{},fromCoinAmount:"",toCoinAmount:"",fixedFromCoin:!0,oneFromAmount:"",oneToAmount:"",minimumReceived:"",maximumSold:"",isSwapping:!1,swapPoolInfo:{},suiPreSwapData:{},swapRouterLoading:!1,notFoundRouter:!1,isRouterProgress:!1,refresh:!0,routerPool:[],routerSwap:[],insufficientLiquidity:!1,countdown:0,isSwapConfirmModal:!1,plusChecked:localStorage.getItem("plusChecked")||"close"}),actions:{setFromCoin(e){this.fromCoin=e},setFromCoinAmount(e){console.log("ðŸš€ ~ setFromCoinAmount ~ data:",e),this.fromCoinAmount=e},setToCoin(e){this.toCoin=e},setToCoinAmount(e){this.toCoinAmount=e},setFixedFromCoin(e){this.fixedFromCoin=e},setPlusChecked(e){this.plusChecked=e},setOneFromAmount(e){this.oneFromAmount=e},setOneToAmount(e){this.oneToAmount=e},setIsSwapping(e){this.isSwapping=e},setSwapPoolInfo(e){this.swapPoolInfo=e},setSuiPreSwapData(e){this.suiPreSwapData=e},setSwapRouterLoading(e){this.swapRouterLoading=e},setNotFoundRouter(e){this.notFoundRouter=e},setIsRouterProgress(e){this.isRouterProgress=e},setRouterPool(e){this.routerPool=e},setRouterSwap(e){this.routerSwap=e},setInsufficientLiquidity(e){this.insufficientLiquidity=e},setCountdown(e){this.countdown=e},setRefresh(e){this.refresh=e},setIsSwapConfirmModal(e){this.isSwapConfirmModal=e},setMinimumReceived(e){this.minimumReceived=e},setMaximumSold(e){this.maximumSold=e}}});function Ze(e,t=500){let m=null;return function(...s){clearTimeout(m),m=setTimeout(()=>{e.call(this,...s)},t)}}function bo(){const e=Se(),t=o(()=>e);console.log(1313);const m=le(),s=o(()=>m),{setIsRouterProgress:d,setInsufficientLiquidity:g,setIsSwapping:i,setOneFromAmount:p,setOneToAmount:r,setSwapRouterLoading:a,setNotFoundRouter:k,setSuiPreSwapData:w,setRouterPool:u,setFromCoinAmount:A,setToCoinAmount:y,setCountdown:$,setMinimumReceived:I,setMaximumSold:P}=m,_=o(()=>s.value.swapPoolInfo),j=o(()=>s.value.fromCoin),f=o(()=>s.value.toCoin),l=o(()=>s.value.fromCoinAmount),C=o(()=>s.value.toCoinAmount),S=o(()=>s.value.fixedFromCoin),B=o(()=>s.value.isRouterProgress),v=o(()=>s.value.routerSwap),N=o(()=>t.value.slippage),E=o(()=>Co()),O=U(0),D=async c=>{var b,R;if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1954 ~ getSuiAmount ~ getSuiAmount:"),d(!0),g(!1),j.value&&f.value&&(Number(l.value)>0&&S.value||Number(C.value)>0&&!S.value)){console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1954 ~ getSuiAmount ~ getSuiAmount:1"),(!l.value&&C.value||l.value&&!C.value)&&i(!0),p(""),r(""),a(!0),k(!1);let L;_.value&&(L=j.value.address===_.value.coinA.address&&f.value.address===_.value.coinB.address?0:1);try{let T;if(S.value){const fe=new M(l.value).mul(Math.pow(10,j.value.decimals)).toString();T=new Ge(fe)}else{const fe=new M(C.value).mul(Math.pow(10,f.value.decimals)).toString();T=new Ge(fe)}const W=Number(N.value)/100,G=_.value?{poolAddresses:v.value,coinTypeA:_.value.coin_a_address,coinTypeB:_.value.coin_b_address,decimalsA:_.value.coinA.decimals,decimalsB:_.value.coinB.decimals,a2b:L==0,byAmountIn:S.value,amount:T.toString()}:"";console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ fromCoin:",j),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ toCoin:",f),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ coinAmount:",T),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ fixedFromCoin.value:",S.value);const z=O.value+1;O.value=z;const V=await((b=E==null?void 0:E.value)==null?void 0:b.getFindRouter(j,f,T.toString(),S.value,W,_.value?G:"",z));if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ swapRouter:",V),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ swapRouter JSON:",JSON.stringify(V,null,2)),O.value!==(V==null?void 0:V.id)){a(!1),d(!1),i(!1),w({}),u([]),S.value?y(""):A("");return}if(V!=null&&V.insufficientLiquidity){g(!0),a(!1),d(!1),i(!1),w({}),u([]),S.value?y(""):A("");return}if(!V||!(V!=null&&V.routes)||((R=V==null?void 0:V.routes)==null?void 0:R.length)==0){i(!1),k(!0),a(!1),d(!1),w({}),u([]),l.value?y(""):A("");return}if(V.fromCoinAddress!==j.value.address||V.toCoinAddress!==f.value.address){console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1861 ~ getSuiAmount ~",V.fromCoinAddress!==j.value.address||V.toCoinAddress!==f.value.address),w({}),u([]);return}if(V){if(w(V),u(V.routes),g(!1),S.value){if(l.value){const _e=new M(V.amountOut).div(new M(Math.pow(10,f.value.decimals))).toString();y(_e)}}else if(C.value){const _e=new M(V.amountIn).div(new M(Math.pow(10,j.value.decimals))).toString();A(_e)}console.log(C.value,"###toCoinAmount.value");const fe=Y(ce(new M(l.value).div(new M(C.value).toString()),j.value.decimals));p(fe);const Ce=Y(ce(new M(C.value).div(l.value).toString(),f.value.decimals));r(Ce),i(!1),k(!1),a(!1)}else i(!1),k(!0),a(!1)}catch(T){console.log("pre swap error2",T),i(!1),a(!1),d(!1)}}else S.value?y(""):A(""),i(!1),a(!1);d(!1),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1926 ~ getSuiAmount ~ isRouterProgress.value:",B.value)};return se(l,(c,b)=>{console.log("ðŸš€ ~ newVal123131:",c),c&&Number(c)!==0&&S.value&&($(0),Ze(D(),800)),c==""&&S.value&&y("")}),se(C,(c,b)=>{c&&Number(c)!==0&&!S.value&&($(0),Ze(D(),800)),c==""&&!S.value&&A("")}),se(()=>[j.value,f.value],([c,b])=>{!re(c)&&!re(b)&&($(0),Ze(D(S.value?l.value:C.value)))},{immediate:!0,deep:!0}),se(()=>[l.value,C.value,j.value,f.value,S.value,N.value],([c,b,R,L,T,W])=>{if(c&&b&&R&&L&&W)if(T){const G=new M(b).mul(new M(W/100));I(new M(b).sub(G).toString())}else{const G=new M(c).mul(new M(W/100));P(new M(c).add(G).toString())}},{immediate:!0}),{getSuiAmount:D}}function it(){const e=le(),{getToken:t}=ko(),{getSuiAmount:m}=bo(),{setCountdown:s}=e,d=U(0),g=U([]),i=o(()=>e),p=o(()=>i.value.fixedFromCoin),r=o(()=>i.value.fromCoinAmount),a=o(()=>i.value.toCoinAmount),k=o(()=>i.value.fromCoin),w=o(()=>i.value.toCoin),u=o(()=>i.value.suiPreSwapData),A=Se(),y=U(!1),$=wo(),I=o(()=>$),P=o(()=>A.isShowRouterModal),_=o(()=>I.value.isInitRouter);xe(()=>{window.addEventListener("updateSwapParams",l=>{y.value=!y.value})});const j=U(""),f=async l=>{var C,S,B,v,N,E;if(((C=l==null?void 0:l.routes)==null?void 0:C.length)===1)if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap-info.vue:462 ~ getOnlyOneRouteText ~ suiPreSwapData?.routes:",l==null?void 0:l.routes),((v=(B=(S=l==null?void 0:l.routes)==null?void 0:S[0])==null?void 0:B.path)==null?void 0:v.length)>1){const O=[k==null?void 0:k.value.symbol],D=(E=(N=l==null?void 0:l.routes)==null?void 0:N[0])==null?void 0:E.path;for(let c=0;c<D.length;c++){const b=D[c];console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap-info.vue:467 ~ getOnlyOneRouteText ~ path[i]:",D[c]);const R=await t(b==null?void 0:b.target);O.push(R==null?void 0:R.symbol)}j.value=O==null?void 0:O.join(" > ")}else j.value=`${k==null?void 0:k.value.symbol} > ${w==null?void 0:w.value.symbol}`};return se(()=>u.value,async l=>{var C;if(l&&!re(l)){const S=[];(C=l==null?void 0:l.routes)==null||C.forEach(B=>{B==null||B.path.forEach(async v=>{S.push(v.provider)})}),g.value=Array.from(new Set(S)),d.value=g.value.length,f(l)}},{immediate:!0}),se(()=>y.value,l=>{(Number(r.value)>0||Number(a.value)>0)&&m(p.value?r.value:a.value)},{immediate:!0}),se(()=>_.value,l=>{l||(s(0),m(p.value?r.value:a.value))},{immediate:!0}),{onlyOneRouteText:j,sourcesArr:g,refreshSwapRouter:y,isShowRouterModal:P}}const Je=e=>(he("data-v-26ab6b7a"),e=e(),we(),e),rt={class:"price-impact-tips"},ut=Je(()=>n("div",{class:"text"}," The difference between the market price and estimated price due to trade size. ",-1)),lt={class:"market-price-rate"},ct=Je(()=>n("div",null,"Market Price Rate",-1)),dt={key:0},mt={key:1,class:"price-unknown"},pt={key:0,class:"market-price-sources"},vt=Je(()=>n("span",null,"Market price sources:",-1)),ft=Je(()=>n("svg",{class:"icon tips-icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon_tips"})],-1)),gt=pe({__name:"swap-price-impact-tooltip",props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},marketPriceSource:{type:Object,default:()=>({})},marketPriceA2B:{type:Object,default:()=>({})},marketPriceA2BReverse:{type:Object,default:()=>({})},impact:{type:String,defualt:"",requires:!0}},setup(e){return(t,m)=>{const s=Ke;return h(),ee(s,{"overlay-class-name":"price-impact-tooltip","open(v-model)":!0},{title:ne(()=>[n("div",rt,[ut,n("div",lt,[ct,e.impact!=="Incalculable"?(h(),F("div",dt,[J(no,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"one-to-amount":e.marketPriceA2B,"one-from-amount":e.marketPriceA2BReverse},null,8,["from-coin","to-coin","one-to-amount","one-from-amount"])])):(h(),F("div",mt,"Price is unknown"))]),e.marketPriceSource&&e.marketPriceSource.length>0&&e.impact!=="Incalculable"?(h(),F("div",pt,[vt,(h(!0),F(ze,null,He(e.marketPriceSource,d=>(h(),F("span",{key:d==null?void 0:d.name},q(d==null?void 0:d.name),1))),128))])):X("",!0)])]),default:ne(()=>[ft]),_:1})}}});const ht=ve(gt,[["__scopeId","data-v-26ab6b7a"]]);function yo(){const e=Re(),t=o(()=>e),m=U([]),s=U(),d=U(),g=$=>{switch($){case"pyth":return{name:"Pyth Network",logo:"/image/logo_pyth.png"};case"coingecko":return{name:"CoinGecko",logo:"/image/logo_CoinGecko@2x.png"};case"birdeye":return{name:"Birdeye",logo:"/image/birdeye-logo.png"};case"Cetus":return{name:"Cetus",logo:"/sui-image/logo_cetus@2x.png"}}},i=le(),p=o(()=>i),r=o(()=>p.value.fromCoin),a=o(()=>p.value.toCoin),k=o(()=>p.value.fromCoin),w=o(()=>p.value.toCoin),u=o(()=>p.value.suiPreSwapData),A=o(()=>{var $,I,P,_,j,f,l,C,S,B,v,N,E,O;try{if(($=r==null?void 0:r.value)!=null&&$.address&&((I=a==null?void 0:a.value)!=null&&I.address)&&(u!=null&&u.value)&&!re(u==null?void 0:u.value)){const D=Te((P=u==null?void 0:u.value)==null?void 0:P.amountIn).div(Math.pow(10,(_=r.value)==null?void 0:_.decimals)),c=Te((j=u==null?void 0:u.value)==null?void 0:j.amountOut).div(Math.pow(10,(f=a.value)==null?void 0:f.decimals)),b=Te(c).div(D);console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ currentSwapRate:",b==null?void 0:b.toString());const R=(S=(l=t==null?void 0:t.value)==null?void 0:l.RATES)==null?void 0:S[(C=r==null?void 0:r.value)==null?void 0:C.address];console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ fromCoinRate:",R);const L=(N=(B=t==null?void 0:t.value)==null?void 0:B.RATES)==null?void 0:N[(v=a==null?void 0:a.value)==null?void 0:v.address];if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ toCoinRate:",L),!(R!=null&&R.price)||!(L!=null&&L.price)||Te(R==null?void 0:R.price).lte(0)||Te(L==null?void 0:L.price).lte(0))throw Error("rate invalid");const T=Te(R==null?void 0:R.price).div(L==null?void 0:L.price);if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ marketRate:",T==null?void 0:T.toString()),b.gt(T)){const W=b.minus(T).div(b).mul(100);return mo((E=W==null?void 0:W.negated())==null?void 0:E.toString(),2)}else{const W=b.minus(T).div(b).mul(100);return mo((O=W==null?void 0:W.abs())==null?void 0:O.toString(),2)}}return}catch(D){return console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2271 ~ suiPriceImpact ~ error:",D),"Incalculable"}}),y=$=>{var f,l,C,S;const I=((f=$[r==null?void 0:r.value.address])==null?void 0:f.price)||0,P=((l=$[a==null?void 0:a.value.address])==null?void 0:l.price)||0,_=(C=$[r==null?void 0:r.value.address])==null?void 0:C.market,j=(S=$[a==null?void 0:a.value.address])==null?void 0:S.market;s.value=ce(new M(I).div(new M(P)).toString(),a==null?void 0:a.value.decimals),d.value=ce(new M(P).div(new M(I)).toString(),r==null?void 0:r.value.decimals),m.value=_==j?[g(_)]:[g(_),g(j)],console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap-info.vue:725 ~ getTokenMarketPrice ~ marketPriceA2B.value:",s.value,d.value,m.value)};return se(()=>[t.value.RATES,k.value,w.value,r.value,a.value],([$])=>{$&&!re($)&&y($)},{immediate:!0}),{getTokenMarketPrice:y,marketPriceSource:m,marketPriceA2B:s,marketPriceA2BReverse:d,suiPriceImpact:A}}const wt=pe({components:{PriceImpactTooltip:ht},setup(){const{suiPriceImpact:e,marketPriceSource:t,marketPriceA2B:m,marketPriceA2BReverse:s}=yo(),d=le(),g=o(()=>d),i=o(()=>g.value.fromCoin),p=o(()=>g.value.toCoin),r=o(()=>g.value.swapRouterLoading),a=o(()=>{var k;return Number(e.value)>0&&Number(e.value)<.01?"<0.01":Number(e.value)>100?">100":Number(e.value)>0?`-${e.value}`:`+${(k=e.value)==null?void 0:k.replace("-","")}`});return{marketPriceA2B:m,marketPriceA2BReverse:s,showImpact:a,impact:e,marketPriceSource:t,fromCoin:i,toCoin:p,swapRouterLoading:r}}});const St=e=>(he("data-v-a9619c4b"),e=e(),we(),e),Ct={class:"swap-show-info-impact"},kt={class:"label"},bt=St(()=>n("span",null,"Price Impact",-1)),yt={key:0,class:"text impact-w"},$t=["src"];function _t(e,t,m,s,d,g){const i=ae("PriceImpactTooltip"),p=eo;return h(),F("div",Ct,[n("div",kt,[bt,J(i,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"market-price-source":e.marketPriceSource,"market-price-a2-b":e.marketPriceA2B,"market-price-a2-b-reverse":e.marketPriceA2BReverse,impact:e.impact},null,8,["from-coin","to-coin","market-price-source","market-price-a2-b","market-price-a2-b-reverse","impact"])]),!e.swapRouterLoading&&e.impact==="Incalculable"?(h(),F("div",yt,q(e.impact),1)):e.swapRouterLoading?(h(),ee(p,{key:2,paragraph:!1,active:""})):(h(),F("div",{key:1,class:ge(["text",e.impact<10?"impact-s":e.impact<30&&e.impact>=10?"impact-w":"impact-e"])},[$e(q(e.showImpact)+"% ",1),(h(!0),F(ze,null,He(e.marketPriceSource,r=>(h(),F("img",{key:r,src:r==null?void 0:r.logo},null,8,$t))),128))],2))])}const $o=ve(wt,[["render",_t],["__scopeId","data-v-a9619c4b"]]),At=pe({components:{CurrentPrice:no,RouterModal:Vo,ShowInfoImpact:$o},setup(){const e=U(!1),{sourcesArr:t,onlyOneRouteText:m}=it(),s=Se(),d=o(()=>s),g=le(),i=o(()=>g),p=o(()=>i.value.fromCoin),r=o(()=>i.value.toCoin),a=o(()=>i.value.fromCoinAmount),k=o(()=>i.value.toCoinAmount),w=o(()=>i.value.oneToAmount),u=o(()=>i.value.oneFromAmount),A=o(()=>i.value.fixedFromCoin),y=o(()=>i.value.swapRouterLoading),$=o(()=>i.value.insufficientLiquidity),I=o(()=>i.value.suiPreSwapData),P=o(()=>d.value.isShowRouterModal),_=o(()=>i.value.minimumReceived),j=o(()=>i.value.maximumSold),f=o(()=>d.value.liquiditySourceObj);return{store:s,onlyOneRouteText:m,liquiditySourceObj:f,sourcesArr:t,minimumReceived:_,maximumSold:j,toCoinAmount:k,fromCoinAmount:a,suiPreSwapData:I,isShowRouterModal:P,indexStore:d,insufficientLiquidity:$,fixedFromCoin:A,isOpen:e,fromCoin:p,toCoin:r,oneToAmount:w,oneFromAmount:u,swapRouterLoading:y}}});const ao=e=>(he("data-v-df4a8567"),e=e(),we(),e),It={key:0,class:"show-info"},Tt={class:"price-box"},Rt={class:"price"},Pt=ao(()=>n("use",{"xlink:href":"#icon-icon_on"},null,-1)),Ft=[Pt],Mt={key:0,class:"impact"},Nt={class:"trade-block"},Bt={class:"label"},Ot={key:0,class:"text"},Lt={key:0,class:"trade-block"},Ut=ao(()=>n("div",{class:"label"},"Auto Router",-1)),Et={key:0,class:"text text-box"},jt=["src","alt"],Dt={key:1,class:"text text-box"},qt=["src","alt"],Wt=ao(()=>n("svg",{class:"icon route-icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon_expand"})],-1));function Vt(e,t,m,s,d,g){var k,w;const i=ae("CurrentPrice"),p=ae("ShowInfoImpact"),r=eo,a=ae("RouterModal");return e.fromCoin&&e.toCoin&&e.fromCoinAmount&&e.toCoinAmount?(h(),F("div",It,[n("div",Tt,[n("div",Rt,[J(i,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"one-to-amount":e.oneToAmount,"one-from-amount":e.oneFromAmount},null,8,["from-coin","to-coin","one-to-amount","one-from-amount"]),(h(),F("svg",{"aria-hidden":"true",class:ge(["dropdown-icon",{open:e.isOpen}]),onClick:t[0]||(t[0]=u=>e.isOpen=!e.isOpen)},Ft,2))]),e.isOpen?(h(),F("div",Mt,[J(p)])):X("",!0)]),n("div",Nt,[n("div",Bt,q(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swapRouterLoading?(h(),ee(r,{key:1,paragraph:!1,active:""})):(h(),F("div",Ot,q(e.fixedFromCoin?("addCommom"in e?e.addCommom:te(Y))(("sFixD"in e?e.sFixD:te(Ae))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:te(Y))(("sFixD"in e?e.sFixD:te(Ae))(e.maximumSold,e.fromCoin.decimals)))+" "+q(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),e.insufficientLiquidity?X("",!0):(h(),F("div",Lt,[Ut,e.swapRouterLoading?(h(),ee(r,{key:1,paragraph:!1,active:""})):(h(),F("div",{key:0,class:"text text-bg",onClick:t[1]||(t[1]=Oo(u=>e.store.setIsShowRouterModal(!e.isShowRouterModal),["stop"]))},[!e.swapRouterLoading&&e.suiPreSwapData&&e.suiPreSwapData.routes&&e.suiPreSwapData.routes.length==1?(h(),F("div",Et,[n("span",null,q(e.onlyOneRouteText),1),(h(!0),F(ze,null,He(e.sourcesArr,u=>{var A,y;return h(),F("img",{key:u,src:(y=(A=e.liquiditySourceObj)==null?void 0:A[u])==null?void 0:y.logo,alt:u},null,8,jt)}),128))])):e.swapRouterLoading?X("",!0):(h(),F("div",Dt,[$e(q((w=(k=e.suiPreSwapData)==null?void 0:k.routes)==null?void 0:w.length)+" Streams ",1),(h(!0),F(ze,null,He(e.sourcesArr,u=>{var A,y;return h(),F("img",{key:u,src:(y=(A=e.liquiditySourceObj)==null?void 0:A[u])==null?void 0:y.logo,alt:u},null,8,qt)}),128))])),Wt]))])),e.isShowRouterModal?(h(),ee(a,{key:1,"sui-pre-swapdata":e.suiPreSwapData,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,onOnClose:t[2]||(t[2]=u=>e.store.setIsShowRouterModal(!1))},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount"])):X("",!0)])):X("",!0)}const _o=ve(At,[["render",Vt],["__scopeId","data-v-df4a8567"]]),zt=pe({components:{Modal:Lo,CoinImg:Jo,CurrentPrice:no,ShowInfoImpact:$o},props:{isShowAccept:{type:Boolean,default:!1}},setup(e,t){const m=Re(),s=o(()=>m),d=Se(),g=o(()=>d),i=U(!1),p=o(()=>g.value.chainName),r=async()=>{t.emit("to-swap")},a=U(0),{suiPriceImpact:k}=yo(),w=le(),u=o(()=>w),A=o(()=>g.value.slippage),y=o(()=>u.value.minimumReceived),$=o(()=>u.value.maximumSold),I=o(()=>u.value.fromCoin),P=o(()=>u.value.toCoin),_=o(()=>u.value.fromCoinAmount),j=o(()=>u.value.toCoinAmount),f=o(()=>u.value.oneFromAmount),l=o(()=>u.value.oneToAmount),C=o(()=>u.value.fixedFromCoin),S=o(()=>u.value.swapRouterLoading),B=U(""),v=o(()=>{var c,b,R,L,T,W,G,z;return(b=(c=s==null?void 0:s.value)==null?void 0:c.tokensObj[I==null?void 0:I.value.address])!=null&&b.pyth_id&&((L=(R=s==null?void 0:s.value)==null?void 0:R.tokensObj[I==null?void 0:I.value.address])==null?void 0:L.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(W=(T=s==null?void 0:s.value)==null?void 0:T.tokensObj[I==null?void 0:I.value.address])!=null&&W.coingecko_id?"coingecko":(z=(G=s==null?void 0:s.value)==null?void 0:G.tokensObj[I==null?void 0:I.value.address])!=null&&z.birdeyeid?"birdeye":null}),N=o(()=>{var c,b,R,L,T,W,G,z;return(b=(c=s==null?void 0:s.value)==null?void 0:c.tokensObj[P==null?void 0:P.value.address])!=null&&b.pyth_id&&((L=(R=s==null?void 0:s.value)==null?void 0:R.tokensObj[P==null?void 0:P.value.address])==null?void 0:L.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(W=(T=s==null?void 0:s.value)==null?void 0:T.tokensObj[P==null?void 0:P.value.address])!=null&&W.coingecko_id?"coingecko":(z=(G=s==null?void 0:s.value)==null?void 0:G.tokensObj[P==null?void 0:P.value.address])!=null&&z.birdeyeid?"birdeye":null}),E=async()=>{var R;const c=s.value.tokenExternalPriceObj[I==null?void 0:I.value.address],b=s.value.tokenExternalPriceObj[(R=P.value)==null?void 0:R.valaddress];if(c&&b){const L=new M(c).div(new M(b)),T=new M(l.value.replace(new RegExp(/,/g),"")).sub(L).div(L).mul(100);let W=Math.abs(Ae(T,2));L.toNumber()<Number(l.value.replace(new RegExp(/,/g),""))?B.value="":B.value=T>0&&T<=.01?"0.01":W}else B.value=""},O=c=>{if(c<5)return"color-s";if(c>=5&&c<10)return"color-w";if(c>=10)return"color-e"};se(()=>[l.value,s.value.tokenExternalPriceObj,p.value],([c,b,R])=>{c&&b&&!re(b)&&E()},{immediate:!0,deep:!0});const D=U(!1);return{impact:k,fromCoin:I,toCoin:P,fromCoinAmount:_,toCoinAmount:j,oneFromAmount:f,oneToAmount:l,slippage:A,fixedFromCoin:C,swapRouterLoading:S,addCommom:Y,sFixD:Ae,rateChange:i,chainName:p,clickNextBtn:r,pathLength:a,maximumSold:$,minimumReceived:y,decimalUi:ce,getTextColor:O,priceExangeRate:B,formCoinMarket:v,toCoinMarket:N,readWithin:D}}});const Pe=e=>(he("data-v-20bf5f95"),e=e(),we(),e),Ht=Pe(()=>n("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Gt={class:"new-swap-contnet"},Kt={class:"coin-info"},Yt={class:"from-coin-info"},Jt={class:"left"},Xt={class:"coin-amount"},Qt={class:"coin-symbol"},Zt={class:"right"},xt={class:"to-coin-info"},en={class:"left"},on={class:"coin-amount"},tn={class:"coin-symbol"},nn={class:"right"},sn=Pe(()=>n("div",{class:"to-swap-logo"},null,-1)),an={class:"coin-rate"},rn={key:0,class:"price-impact"},un=Pe(()=>n("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),ln=[un],cn=Pe(()=>n("br",null,null,-1)),dn={class:"bottom"},mn={class:"induction"},pn={class:"item"},vn={class:"induction-text"},fn={class:"induction-value"},gn={class:"item"},hn={class:"induction-text"},wn={class:"induction-value"},Sn={class:"item"},Cn={key:0,class:"within-desc"},kn=Pe(()=>n("div",{class:"within-top"},[n("img",{src:Xo,alt:""}),n("span",null,"The exchange rate of this order deviates from the market price by a large percentage. Are you sure you want to continue the swap?")],-1)),bn={class:"within-bottom"},yn={key:0,class:"price-updated"},$n=Pe(()=>n("span",null,"Price updated",-1));function _n(e,t,m,s,d,g){const i=ae("CoinImg"),p=ae("CurrentPrice"),r=ae("ShowInfoImpact"),a=oo,k=ae("Modal");return h(),ee(k,{width:"440px",visible:!0,footer:null,title:e.$t("button.swap"),class:"add-liquidity-modal",onCancel:t[4]||(t[4]=w=>e.$emit("on-close"))},{closeIcon:ne(()=>[Ht]),default:ne(()=>{var w,u,A,y;return[n("div",Gt,[n("div",Kt,[n("div",Yt,[n("div",Jt,[n("div",Xt,q(e.fromCoinAmount&&("addCommom"in e?e.addCommom:te(Y))(e.fromCoinAmount)),1),n("div",Qt,q(e.fromCoin&&e.fromCoin.symbol),1)]),n("div",Zt,[(w=e.fromCoin)!=null&&w.address?(h(),ee(i,{key:0,url:(u=e.fromCoin)==null?void 0:u.logoURI,size:"28px"},null,8,["url"])):X("",!0)])]),n("div",xt,[n("div",en,[n("div",on,q(e.toCoinAmount&&("addCommom"in e?e.addCommom:te(Y))(e.toCoinAmount)),1),n("div",tn,q(e.toCoin&&e.toCoin.symbol),1)]),n("div",nn,[(A=e.toCoin)!=null&&A.address?(h(),ee(i,{key:0,url:(y=e.toCoin)==null?void 0:y.logoURI,size:"28px"},null,8,["url"])):X("",!0)]),sn]),n("div",an,[J(p,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"one-to-amount":e.oneToAmount,"one-from-amount":e.oneFromAmount},null,8,["from-coin","to-coin","one-to-amount","one-from-amount"]),e.impact>=10&&e.fromCoinAmount&&e.toCoinAmount&&!e.swapLoading?(h(),F("div",rn,[(h(),F("svg",{class:ge(["icon warning-icon",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""]),"ria-hidden":"true"},ln,2)),n("span",{class:ge(["pc-impact-tips",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""])},"Price Impact Alert. Be cautious before submitting your order.",2),n("span",{class:ge(["h5-impact-tips",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""])},[$e("Price Impact Alert."),cn,$e(" Be cautious before submitting your order.")],2)])):X("",!0)])]),n("div",dn,[n("div",mn,[n("div",pn,[n("div",vn,q(e.$t("modal.slippageTolerance")),1),n("div",fn,q(e.slippage)+"%",1)]),n("div",gn,[n("div",hn,q(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),n("div",wn,q(e.fixedFromCoin?("addCommom"in e?e.addCommom:te(Y))(("sFixD"in e?e.sFixD:te(Ae))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:te(Y))(("sFixD"in e?e.sFixD:te(Ae))(e.maximumSold,e.fromCoin.decimals)))+" "+q(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1)]),n("div",Sn,[J(r)])])]),e.priceExangeRate&&Number(e.priceExangeRate)>10?(h(),F("div",Cn,[kn,n("div",bn,[n("div",{class:ge(["within-btn",e.readWithin?"within-btn-active":""]),onClick:t[0]||(t[0]=$=>e.readWithin=!0)}," Yes, please continue. ",2),n("div",{class:"within-btn",onClick:t[1]||(t[1]=$=>e.$emit("on-close"))},"No, cancel it.")])])):X("",!0)]),e.isShowAccept?(h(),F("div",yn,[$n,J(a,{class:"accept-btn",loading:e.swapLoading,onClick:t[2]||(t[2]=$=>e.$emit("accept"))},{default:ne(()=>[$e("Accept")]),_:1},8,["loading"])])):e.chainName=="Sui"?(h(),ee(a,{key:1,class:"big-btn swap-confirm-btn",disabled:Number(e.priceExangeRate)>10&&!e.readWithin,onClick:t[3]||(t[3]=$=>e.clickNextBtn())},{default:ne(()=>[$e(q(e.$t("button.confirmSwap")),1)]),_:1},8,["disabled"])):X("",!0)]}),_:1},8,["title"])}const Ao=ve(zt,[["render",_n],["__scopeId","data-v-20bf5f95"]]);function An(){const e=le(),t=o(()=>e),m=Ye(),s=o(()=>m),d=Re(),g=o(()=>d),i=o(()=>v.chainName),{getSuiAmount:p}=bo(),{setToCoinAmount:r,setFromCoinAmount:a}=e,{setCountdown:k,setRefresh:w}=e,u=U(20),A=U(null),y=o(()=>t.value.countdown),$=o(()=>t.value.refresh),I=o(()=>t.value.isRouterProgress),P=o(()=>me&&me[i.value]&&me[i.value].hasRouter),_=o(()=>t.value.swapPoolInfo),j=o(()=>t.value.fixedFromCoin),f=o(()=>t.value.fromCoinAmount),l=o(()=>t.value.toCoinAmount),C=o(()=>t.value.isSwapConfirmModal),S=U(!1),B=o(()=>v.includeRoutes),v=Se(),N=o(()=>v.liquiditySourceList),E=o(()=>i.value?So(i.value):{}),O=T=>{T&&T.length>0?T.every(G=>G.name=="Cetus"?!0:G.status==="close")?e.setPlusChecked("close"):e.setPlusChecked("open"):e.setPlusChecked("close"),S.value=!1},D=T=>{e.setPlusChecked(e.plusChecked=="open"?"close":"open"),localStorage.setItem("plusChecked",e.plusChecked);const W=B.value,G=N.value;G.forEach(z=>{T?z.status="open":z.name!=="Cetus"?z.status="close":z.status="open"}),v.setAggregatorSetting(G,W)},c=()=>{const T=window.innerWidth,W=window.innerHeight,G=document.getElementById("plusModeSwitch"),z=G==null?void 0:G.getBoundingClientRect(),V=z==null?void 0:z.left,fe=z==null?void 0:z.top,Ce=2,_e=Ee.shapeFromText({text:"ðŸŸ¢",scalar:Ce}),De=Ee.shapeFromText({text:"ðŸ”µ",scalar:Ce}),Xe=Ee.shapeFromText({text:"ðŸ’š",scalar:Ce}),ke=Ee.shapeFromText({text:"ðŸ’™",scalar:Ce});Ee({particleCount:40,spread:60,shapes:[_e,De,Xe,ke],scalar:Ce,origin:{x:V/T,y:fe*1.2/W}})},b=T=>{a(""),r(""),T&&c(),D(T),setTimeout(()=>{p()},500)},R=()=>{var T,W,G;$.value||!_.value&&!P.value||(clearInterval(A.value),k(0),w(!0),I.value||p(j.value?f.value:l.value),s.value.address&&E.value.getAccount(s.value.address),setTimeout(()=>{w(!1),L()},1e3),(!((T=g==null?void 0:g.value)!=null&&T.RATES)||re((W=g==null?void 0:g.value)==null?void 0:W.RATES))&&((G=g==null?void 0:g.value)==null||G.setRates("Sui")))},L=()=>{A.value=setInterval(()=>{if(w(!1),y.value<u.value){const T=y.value+1;k(T),y.value===u.value&&(C.value||R(),k(0),w(!0))}},1e3)};return{setMarketTimer:L,clickRefresh:R,marketTimer:A,autoRefreshTime:u,isShowAggregatorModal:S,clickChecked:D,modalConfirm:O,handleSwitchPlusMode:b}}const In=pe({components:{AggregatorSettingModal:zo},setup(){const e=Se(),t=le(),m=o(()=>t),{isShowAggregatorModal:s,handleSwitchPlusMode:d,setMarketTimer:g,autoRefreshTime:i,clickRefresh:p,marketTimer:r}=An(),a=o(()=>m.value.countdown),k=o(()=>m.value.refresh),w=o(()=>e.slippage);let u=U(!1);return xe(()=>{g()}),Uo(()=>{clearInterval(r.value)}),{slippage:w,countdown:a,refresh:k,isShowAggregatorModal:s,handleSwitchPlusMode:d,suiSwapStore:t,clickRefresh:p,isShowSwapSetting:u,autoRefreshTime:i,marketTimer:r}}});const Fe=e=>(he("data-v-b123d831"),e=e(),we(),e),Tn={class:"plus-setting-container"},Rn={class:"plus-setting"},Pn=Fe(()=>n("div",{class:"price-reference-text"}," The Plus Mode will aggregate external liquidity sources ",-1)),Fn={class:ge("icon-bg plus-switch")},Mn=Fe(()=>n("p",null,[n("span",null,"Plus Mode")],-1)),Nn={class:"sui-setting-box"},Bn=Fe(()=>n("div",{class:"new-style-tooltip-text"},"Swap Settings",-1)),On=Fe(()=>n("div",{class:"icon-bg"},[n("svg",{"aria-hidden":"true",class:"icon"},[n("use",{"xlink:href":"#icon-icon_set"})])],-1)),Ln=Fe(()=>n("div",{class:"new-style-tooltip-text"},"Slippage Settings",-1)),Un={class:"icon-bg"},En=Fe(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon_verticalslider"})],-1)),jn={class:"icon-bg"};function Dn(e,t,m,s,d,g){const i=Eo,p=Ke,r=Qo,a=Zo,k=ae("AggregatorSettingModal");return h(),F("div",Tn,[n("div",Rn,[J(p,{"overlay-class-name":"price-impact-tooltip"},{title:ne(()=>[Pn]),default:ne(()=>[n("div",Fn,[Mn,J(i,{id:"plusModeSwitch",checked:e.suiSwapStore.plusChecked=="open",onClick:t[0]||(t[0]=w=>{e.handleSwitchPlusMode(w)})},null,8,["checked"])])]),_:1}),n("div",Nn,[n("div",{class:"aggregator-setting",onClick:t[1]||(t[1]=w=>e.isShowAggregatorModal=!0)},[J(p,{"overlay-class-name":"new-style-tooltip"},{title:ne(()=>[Bn]),default:ne(()=>[On]),_:1})]),J(p,{"overlay-class-name":"new-style-tooltip"},{title:ne(()=>[Ln]),default:ne(()=>[n("div",{class:"slippage-icon",onClick:t[2]||(t[2]=w=>e.isShowSwapSetting=!0)},[n("div",Un,[En,n("span",null,q(e.slippage)+"%",1)])])]),_:1}),n("div",jn,[J(r,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])])]),e.isShowSwapSetting?(h(),ee(a,{key:0,onOnClose:t[3]||(t[3]=w=>e.isShowSwapSetting=!1)})):X("",!0),e.isShowAggregatorModal?(h(),ee(k,{key:1,onClose:t[4]||(t[4]=w=>e.isShowAggregatorModal=!1),onModalConfirm:t[5]||(t[5]=w=>{e.modalConfirm(w)})})):X("",!0)])}const qn=ve(In,[["render",Dn],["__scopeId","data-v-b123d831"]]);function po(e){const t=[];let m=e.indexOf(",");for(;m!==-1;)t.push(m),m=e.indexOf(",",m+1);return t}const Wn=pe({components:{TokenDropdownSelect:ot},props:{titleText:{type:String,default:""},inputValue:{type:String,default:""},inputDisabled:{type:Boolean,default:!1},tokenInfo:{type:Object,default:null},havemax:{type:Boolean,default:!0},havehalf:{type:Boolean,default:!0},hasArrow:{type:Boolean,default:!0},importPage:{type:String,default:""},isShowAmountPrice:{type:Boolean,default:!0},assetsLoading:{type:Boolean,default:!1},inputLoading:{type:Boolean,default:!1}},setup(e,t){const{t:m,locale:s}=to(),d=o(()=>{var f,l,C;return A.value.assets&&e.tokenInfo&&A.value.assets[(f=e.tokenInfo)==null?void 0:f.address]?fo(A.value.assets[(l=e.tokenInfo)==null?void 0:l.address].balance,(C=e.tokenInfo)==null?void 0:C.decimals):0}),g=o(()=>new M(Number(d.value)).div(2)),i=U(""),p=()=>{var f;if(d.value){const l=Number(d.value)>0?((f=e.tokenInfo)==null?void 0:f.symbol)=="SUI"?new M(Number(d.value)).sub(new M(.05)).lt(new M(0))?"0":new M(Number(d.value)).sub(new M(.05)).toString():String(d.value):"";i.value=l,a(l)}},r=()=>{var f;if(d.value){const l=Number(d.value)>0?Ae(new M(Number(d.value)).div(2).toString(),(f=e.tokenInfo)==null?void 0:f.decimals).toString():"";i.value=l,a(l)}},a=tt(f=>{t.emit("onInput",f),t.emit("onInputLoading",!1)},500),k=f=>{const l=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(_==null?void 0:_.value)&&(_==null?void 0:_.value)}})?).*$`),C=f.target.value.replace(/,/g,"").replace(l,"$1");C>0&&t.emit("onInputLoading",!0),a(C)},w=f=>{var D;const l=f.target.selectionStart,C=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(_==null?void 0:_.value)&&(_==null?void 0:_.value)}})?).*$`);console.log("ðŸš€ ~ file: assets-card.vue:287 ~ handleInput ~ event.target.value:",f.target.value);let S=f.target.value.replace(/,/g,"").replace(C,"$1");console.log("ðŸš€ ~ file: assets-card.vue:287 ~ handleInput ~ value:",S),console.log("ðŸš€ ~ file: assets-card.vue:287 ~ handleInput ~ event.inputType:",f.inputType);let B=S.includes(".")&&String(Y(S))==="0"?S:String(Y(S));const v=po(f.target.value),N=po(B),E=N.length-v.length;let O=l+E;if((D=f==null?void 0:f.inputType)!=null&&D.includes("delete")&&E>0&&l===N[N.length-1]){const c=f.target.value.slice(0,l-1)+f.target.value.slice(l);B=String(Y(c.replace(/,/g,""))),O=O-2}console.log("ðŸš€ ~ file: assets-card.vue:287 ~ handleInput ~ fValue:",B),i.value=B||"",setTimeout(()=>{try{f.target.setSelectionRange(O<0?0:O,O<0?0:O)}catch(c){console.log("ðŸš€ ~ file: assets-card.vue:307 ~ setTimeout ~ error:",c)}},0)};se(()=>e.inputValue,f=>{const l=String(Y(f));l!==i.value&&(i.value=l)},{immediate:!0});const u=Ye(),A=o(()=>u),y=Re(),$=o(()=>y);let I={};se(()=>$.value.RATES,f=>{f&&(I=f)},{immediate:!0});const P=o(()=>{var C,S;const f=I&&I[(C=e.tokenInfo)==null?void 0:C.address]&&I[(S=e.tokenInfo)==null?void 0:S.address].price||0,l=new M(e.inputValue||0).mul(f).toNumber();return f<=0?0:l>0&&l<.01?"<$0.01":je(l,2)}),_=o(()=>{var f;return(f=e.tokenInfo)==null?void 0:f.decimals}),j=o(()=>$.value.isTokenLoading);return{balance:d,isTokenLoading:j,halfBalance:g,t:m,addCommom:Y,wallet:A,inputChange:k,amountPirce:P,coinDecimals:_,formatNumber:vo,formattedValue:i,handleInput:w,maxBtnSelect:p,halfBtnSelect:r}}});const Vn=e=>(he("data-v-d12815c2"),e=e(),we(),e),zn={class:"token-input-block"},Hn={class:"title"},Gn={class:"card-top"},Kn={class:"card-bottom"},Yn={class:"left"},Jn={key:0,class:"amount-price"},Xn={key:1},Qn={class:"right"},Zn={class:"balance"},xn=Vn(()=>n("svg",{class:"icon icon-down","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon_wallet1"})],-1)),es={key:1};function os(e,t,m,s,d,g){var k,w;const i=jo,p=eo,r=ae("TokenDropdownSelect"),a=oo;return h(),F("div",zn,[n("div",Hn,q(e.titleText),1),n("div",Gn,[e.inputLoading?(h(),ee(p,{key:1,class:"input-loading-skeleton",loading:!0,size:"large",active:"",paragraph:!1})):(h(),ee(i,{key:0,value:e.inputValue=="InsufficientLiquidity"?"":e.formattedValue,placeholder:"0.0",disabled:e.inputDisabled,onChange:e.inputChange,onInput:e.handleInput,onFocus:t[0]||(t[0]=u=>e.$emit("onFocus"))},null,8,["value","disabled","onChange","onInput"])),J(r,{"token-info":e.tokenInfo,"has-opcity":!0,"is-loading":e.isTokenLoading,onOnSelect:t[1]||(t[1]=u=>e.$emit("onSelect"))},null,8,["token-info","is-loading"])]),n("div",Kn,[n("div",Yn,[e.inputValue&&e.amountPirce!="--"&&(Number(e.amountPirce)>0||e.amountPirce=="<$0.01")&&e.isShowAmountPrice&&!e.inputLoading?(h(),F("div",Jn,q(e.amountPirce!=="<$0.01"?`$${("formatNumber"in e?e.formatNumber:te(vo))(e.amountPirce)}`:`${e.amountPirce}`),1)):(h(),F("div",Xn,[e.inputLoading?(h(),ee(p,{key:0,class:"rate-loading-skeleton",loading:!0,size:"large",active:"",paragraph:!1})):X("",!0)]))]),n("div",Qn,[n("span",Zn,[xn,e.assetsLoading?(h(),ee(p,{key:0,class:"token-loading-skeleton",loading:!0,active:"",paragraph:!1})):(h(),F("span",es,q(e.wallet.connected?("addCommom"in e?e.addCommom:te(Y))(e.balance,e.coinDecimals):"0"),1))]),e.havehalf&&e.wallet.connected?(h(),ee(a,{key:0,disabled:!((k=e.tokenInfo)!=null&&k.name)||("addCommom"in e?e.addCommom:te(Y))(e.halfBalance,e.coinDecimals)==0,class:"max-btn half-btn",onClick:t[2]||(t[2]=u=>e.halfBtnSelect())},{default:ne(()=>[$e("HALF")]),_:1},8,["disabled"])):X("",!0),e.havemax&&e.wallet.connected?(h(),ee(a,{key:1,disabled:!((w=e.tokenInfo)!=null&&w.name)||("addCommom"in e?e.addCommom:te(Y))(e.balance,e.coinDecimals)==0,class:"max-btn",onClick:t[3]||(t[3]=u=>e.maxBtnSelect())},{default:ne(()=>[$e("MAX")]),_:1},8,["disabled"])):X("",!0)])])])}const ts=ve(Wn,[["render",os],["__scopeId","data-v-d12815c2"]]),ns=pe({components:{TokenInputBlock:ts},setup(){const e=U(!0),t=U(!1),m=le(),s=o(()=>m),d=Se();o(()=>d);const{setFromCoin:g,setToCoin:i,setFixedFromCoin:p,setFromCoinAmount:r,setToCoinAmount:a}=s.value,k=U("fromCoin"),w=U(""),u=U(""),A=U(!1),y=o(()=>s.value.fromCoin),$=o(()=>s.value.toCoin),I=o(()=>s.value.fromCoinAmount),P=o(()=>s.value.toCoinAmount),_=o(()=>s.value.fixedFromCoin),j=o(()=>s.value.swapRouterLoading),f=o(()=>s.value.plusChecked);let l=U(!1);function C(){const c=y.value;g($.value),i(c),l.value=!0,f.value=="open"?p(!0):p(!_.value),_.value?(r(P.value),a("")):(a(I.value),r("")),setTimeout(()=>{l.value=!1},300)}const S=c=>{var b,R,L,T;k.value=c,c==="fromCoin"?(w.value=((b=$.value)==null?void 0:b.address)||"",u.value=((R=y.value)==null?void 0:R.address)||""):(w.value=((L=y.value)==null?void 0:L.address)||"",u.value=((T=$.value)==null?void 0:T.address)||""),A.value=!0},B=U({}),v=U({}),N=c=>{k.value==="fromCoin"?(B.value=c,D(c)):(v.value=c,D(c))},E=U(!1),O=()=>{v.value={},B.value={},E.value=!1},D=c=>{const b=d.importTokenListObj;if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1499 ~ getTokenSource ~ !importTokenListObj?.hasOwnProperty(token?.address):",!(b!=null&&b.hasOwnProperty(c==null?void 0:c.address))),c!=null&&c.isSelfBuilt&&!(b!=null&&b.hasOwnProperty(c==null?void 0:c.address)))E.value=!0;else{if(k.value==="fromCoin"){$.value&&c.address.toLowerCase()===($==null?void 0:$.value.address.toLowerCase())&&i(null),g(c);const R=Number(I.value)>0?ce(I.value,c==null?void 0:c.decimals):"";r(R)}else{y.value&&c.address.toLowerCase()===(y==null?void 0:y.value.address.toLowerCase())&&g(null),i(c);const R=Number(P.value)>0?ce(P.value,c==null?void 0:c.decimals):"";a(R)}O()}};return{fixedFromCoin:_,swapRouterLoading:j,onCoinSelect:N,existingCoins:w,lastSelectCoin:u,currentCoinKey:k,showCoinSelect:A,openCoinSelect:S,warningToCoin:v,warningFromCoin:B,isAddCardTopPadding:e,isAddCardBottomPadding:t,suiSwapStore:m,clickExchange:C,closeTokenWarning:O,isShowTokenWarning:E,getTokenSource:D,change:l,fromCoin:y,toCoin:$,fromCoinAmount:I,toCoinAmount:P}}});const Io=e=>(he("data-v-ce82e847"),e=e(),we(),e),ss={class:"input-block-container"},as=Io(()=>n("svg",{class:"icon icon-down","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon_swap1"})],-1)),is=Io(()=>n("svg",{class:"icon icon-swap","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-tx_swap1"})],-1)),rs=[as,is];function us(e,t,m,s,d,g){const i=ae("TokenInputBlock"),p=xo,r=et;return h(),F("div",ss,[n("div",{class:ge(["asset-card-box",[e.suiSwapStore.plusChecked=="open"?"toInputBlockDisabled input-block-add-top":"",e.isAddCardTopPadding?"input-block-add-top":"",e.isAddCardBottomPadding&&e.suiSwapStore.plusChecked!=="open"?"input-block-add-bottom":""]])},[J(i,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[0]||(t[0]=a=>e.fromCoinAmount=a),"title-text":"You pay","input-value":e.fromCoinAmount,"token-info":e.fromCoin||null,"input-loading":!e.fixedFromCoin&&e.swapRouterLoading,onOnInput:t[1]||(t[1]=a=>{e.suiSwapStore.setFromCoinAmount(a),e.suiSwapStore.setFixedFromCoin(!0)}),onOnFocus:t[2]||(t[2]=()=>{e.suiSwapStore.setFixedFromCoin(!0),e.isAddCardTopPadding=!0,e.isAddCardBottomPadding=!1}),onOnSelect:t[3]||(t[3]=a=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","token-info","input-loading"]),J(i,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[4]||(t[4]=a=>e.toCoinAmount=a),"title-text":"You receive","input-value":e.toCoinAmount,"token-info":e.toCoin||null,"input-disabled":e.suiSwapStore.plusChecked=="open",havemax:!1,havehalf:!1,"input-loading":!e.fixedFromCoin&&e.swapRouterLoading,onOnInput:t[5]||(t[5]=a=>{e.suiSwapStore.setToCoinAmount(a),e.suiSwapStore.setFixedFromCoin(!1)}),onOnFocus:t[6]||(t[6]=()=>{e.suiSwapStore.setFixedFromCoin(!1),e.isAddCardTopPadding=!1,e.isAddCardBottomPadding=!0}),onOnSelect:t[7]||(t[7]=a=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","token-info","input-disabled","input-loading"]),n("div",{class:"exchange",onClick:t[8]||(t[8]=(...a)=>e.clickExchange&&e.clickExchange(...a))},rs)],2),e.showCoinSelect?(h(),ee(p,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,"have-import-btn":!0,onOnSelect:e.onCoinSelect,onOnClose:t[9]||(t[9]=a=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):X("",!0),e.isShowTokenWarning?(h(),ee(r,{key:1,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,"is-import-modal":!0,onClose:e.closeTokenWarning,onClickContinue:e.getTokenSource},null,8,["from-coin","to-coin","onClose","onClickContinue"])):X("",!0)])}const ls=ve(ns,[["render",us],["__scopeId","data-v-ce82e847"]]);function cs(){const e=le(),t=o(()=>e),m=o(()=>t.value.fromCoin),s=o(()=>t.value.toCoin),{allTokensObj:d}=so(),g=o(()=>m.value.logoURI),i=o(()=>s.value.logoURI),p=o(()=>m.value&&m.value.address||null),r=o(()=>s.value&&s.value.address||null),a=o(()=>{var w,u,A,y,$,I,P,_;return console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1222 ~ formCoinMarket ~ allTokensObj:",d),(u=d[(w=m==null?void 0:m.value)==null?void 0:w.address])!=null&&u.pyth_id&&((y=d[(A=m==null?void 0:m.value)==null?void 0:A.address])==null?void 0:y.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(I=d[($=m==null?void 0:m.value)==null?void 0:$.address])!=null&&I.coingecko_id?"coingecko":(_=d[(P=m==null?void 0:m.value)==null?void 0:P.address])!=null&&_.birdeyeid?"birdeye":null}),k=o(()=>{var w,u,A,y,$,I,P,_;return(u=d[(w=s==null?void 0:s.value)==null?void 0:w.address])!=null&&u.pyth_id&&((y=d[(A=s==null?void 0:s.value)==null?void 0:A.address])==null?void 0:y.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(I=d[($=s==null?void 0:s.value)==null?void 0:$.address])!=null&&I.coingecko_id?"coingecko":(_=d[(P=s==null?void 0:s.value)==null?void 0:P.address])!=null&&_.birdeyeid?"birdeye":null});return{formCoinId:p,toCoinId:r,formCoinMarket:a,toCoinMarket:k,fromCoinUrl:g,toCoinUrl:i}}const ds=pe({components:{CoinImgWarning:nt},props:{tokenInfo:{type:Object,default:null},isHaveLabel:{type:Boolean,default:!1},justifyContent:{type:String,default:"flex-end"}},setup(e,t){const{t:m,locale:s}=to();return{currentIcon:o(()=>{var g,i;return((g=e.tokenInfo)==null?void 0:g.logo_url)||((i=e.tokenInfo)==null?void 0:i.logoURI)||""}),t:m}}});const ms={class:"coin-pair-container"},ps={class:"symbol-label-name"},vs={class:"symbol-label"},fs={class:"symbol"},gs={class:"name"};function hs(e,t,m,s,d,g){var p,r,a,k,w,u;const i=ae("CoinImgWarning");return h(),F("div",ms,[n("div",{class:"show-token",style:Do({justifyContent:e.justifyContent})},[J(i,{"token-info":e.tokenInfo},null,8,["token-info"]),n("div",ps,[n("div",vs,[n("p",fs,q(e.tokenInfo?(p=e.tokenInfo)==null?void 0:p.symbol:e.$t("modal.selectTokenModalTitle")),1),e.isHaveLabel&&((r=e.tokenInfo)!=null&&r.labels)&&((a=e.tokenInfo)!=null&&a.labels[0])?(h(),F("div",{key:0,class:ge(["label",(k=e.tokenInfo)==null?void 0:k.labels[0]])},q((w=e.tokenInfo)==null?void 0:w.labels[0]),3)):X("",!0)]),n("p",gs,q((u=e.tokenInfo)==null?void 0:u.name),1)])],4)])}const ws=ve(ds,[["render",hs],["__scopeId","data-v-d19ced3f"]]),Ss=pe({components:{CoinSingle:ws},props:{coin:{type:Object,default:()=>({})},refresh:{type:Boolean,default:!1},id:{type:String,default:""},market:{type:String,default:""}},setup(e){const t=o(()=>r.value.currentExplorer),{$echarts:m}=qo(),s=wo();let d=null,g;const i=U(!0),p=Se(),r=o(()=>p),a=o(()=>r.value.chainName),k=o(()=>me[a.value]),w=Re();o(()=>w);const{allTokensObj:u}=so(),A=(C,S,B)=>{g={xAxis:{type:"category",boundaryGap:!1,show:!1,data:S},yAxis:{type:"value",show:!1,min:function(v){return v.min-v.min*.1},max:function(v){return v.max+v.max*.1}},grid:{top:1,right:1,bottom:1,left:1},tooltip:{trigger:"axis",borderWidth:0,padding:0,backgroundColor:"transparent",axisPointer:{lineStyle:{color:r.value.chainName=="Aptos"?"#68FFD8":"#76C8FF"}},formatter:function(v){return`<div class="chart-tip">
              <div>${v&&v[0]&&v[0].name}</div>
              <div>$${ce(v&&v[0]&&v[0].value,4)}</div>
            </chart-tip>`}},color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:r.value.chainName=="Aptos"?"#0C4535":"#2E546D"},{offset:1,color:r.value.chainName=="Aptos"?"#151817":"#1B1B1B"}]},series:[{data:C,type:"line",showSymbol:!1,areaStyle:{},lineStyle:{color:r.value.chainName=="Aptos"?"#68FFD8":"#76C8FF",width:2,type:"solid"}}]},g&&d.clear(),g&&d.setOption(g,!0),d.resize(),i.value=!1},y=U(""),$=U(""),I=async C=>{var D,c,b;const S=[],B=[],{price:v,daily_rate:N}=await Ho(C,e.market);w.setTokenExternalPrice(e.coin.address,(D=v[v.length-1])==null?void 0:D.price),y.value=N;const E=v&&v.length>=1&&v[v.length-1].price;$.value=E,s.setCurrentCoinPairRate({[C]:E}),a.value==="Aptos"?v.forEach(R=>{S.push(R.price);const L=Ve(Number(R.timestamp),"MD"),T=Ve(Number(R.timestamp),"HM");B.push(L+" "+T)}):v.forEach(R=>{S.push(R.price);const L=Ve(new M(R.timestamp).mul(1e3).toNumber(),"MD"),T=Ve(new M(R.timestamp).mul(1e3).toNumber(),"HM");B.push(L+" "+T)});let O=document.getElementById(`main${(c=e.coin)==null?void 0:c.name}`);d=m.init(O),m.use([st]),A(S,B,(b=e.coin)==null?void 0:b.name)};se(()=>e.id,(C,S)=>{C&&(y.value="",$.value="",setTimeout(()=>{I(C)},1e3))},{immediate:!0});const P=U(""),_=U(""),j=U(""),f=U("");se(()=>[u,e.coin],([C,S])=>{var B,v;C&&S&&C[S.address]&&(_.value=((B=C[S.address])==null?void 0:B.labels)&&((v=C[S.address])==null?void 0:v.labels[0]),P.value=C[S.address].name,j.value=C[S.address].symbol,f.value=C[S.address].address)},{immediate:!0,deep:!0}),se(()=>e.refresh,C=>{C&&I(e.id)});const l=o(()=>r.value.theme);return{currentExplorer:t,getExplorerUrl:go,theme:l,store:p,fixD:je,config:k,price_rate_24h:y,nowPrice:$,coinName:P,coinLabels:_,coinSymbol:j,address:f,decimalUi:ce,addCommom:Y}}});const To=e=>(he("data-v-d9466654"),e=e(),we(),e),Cs={class:"price-token-chart"},ks={class:"top"},bs={class:"right"},ys={class:"price-info"},$s={key:0,src:Go,alt:""},_s={key:1,src:Ko,alt:""},As={key:2,src:Yo,alt:""},Is={class:"bottom"},Ts={class:"left"},Rs={class:"address"},Ps={key:0,class:"pc-address"},Fs={key:1,class:"pc-address"},Ms={class:"h5-address"},Ns=To(()=>n("use",{"xlink:href":"#icon-icon_copy2"},null,-1)),Bs=[Ns],Os=["href"],Ls=To(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon_link"})],-1)),Us=[Ls],Es={class:"right"},js=["id"];function Ds(e,t,m,s,d,g){var r;const i=ae("CoinSingle"),p=Ke;return h(),F("div",Cs,[n("div",ks,[J(i,{"token-info":e.coin},null,8,["token-info"]),n("div",bs,[J(p,{placement:"top","arrow-point-at-center":""},{title:ne(()=>[$e(q(e.market==="pyth"?"Data source: Pyth Network":e.market==="coingecko"?"Data source: CoinGecko":"Data source: Birdeye"),1)]),default:ne(()=>[n("div",ys,[e.market==="pyth"?(h(),F("img",$s)):e.market==="coingecko"?(h(),F("img",_s)):e.market==="birdeye"?(h(),F("img",As)):X("",!0),n("span",null,"$"+q(e.nowPrice?Number(e.nowPrice)<1?("decimalUi"in e?e.decimalUi:te(ce))(e.nowPrice,4):("addCommom"in e?e.addCommom:te(Y))(("fixD"in e?e.fixD:te(je))(e.nowPrice,2)):"--"),1),e.price_rate_24h?(h(),F("i",{key:3,class:ge(e.price_rate_24h>0?"up":e.price_rate_24h<0?"down":"up")},q(e.price_rate_24h<0?+`${("fixD"in e?e.fixD:te(je))(e.price_rate_24h,2)}`:`+ ${("fixD"in e?e.fixD:te(je))(e.price_rate_24h,2)}`)+"%",3)):X("",!0)])]),_:1})])]),n("div",Is,[n("div",Ts,[n("div",Rs,[e.coin&&e.address!=="0x2::sui::SUI"?(h(),F("span",Ps,q(e.coin&&e.coin.address.substr(0,8))+" ... "+q(e.coin&&e.coin.address.substr(e.coin.address.length-8,8)),1)):(h(),F("span",Fs,q(e.coin&&e.coin.address),1)),n("span",Ms,q(e.coin&&e.coin.address.substr(0,4))+" ... "+q(e.coin&&e.coin.address.substr(e.coin.address.length-4,4)),1),(h(),F("svg",{class:"icon","aria-hidden":"true",onClick:t[0]||(t[0]=a=>e.store.copy(e.coin&&e.coin.address))},Bs)),n("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:te(go))(e.currentExplorer,"coin",e.coin&&e.coin.address),target:"_blank"},Us,8,Os)])]),n("div",Es,[n("div",{id:`main${(r=e.coin)==null?void 0:r.name}`,class:"main"},null,8,js)])])])}const qs=ve(Ss,[["render",Ds],["__scopeId","data-v-d9466654"]]),Ws=pe({components:{PriceTokenChart:qs},setup(){const{formCoinId:e,toCoinId:t,formCoinMarket:m,toCoinMarket:s,fromCoinUrl:d,toCoinUrl:g}=cs(),i=le(),p=o(()=>i),r=o(()=>p.value.fromCoin),a=o(()=>p.value.toCoin);return{refresh:o(()=>p.value.refresh),fromCoin:r,toCoin:a,formCoinId:e,toCoinId:t,formCoinMarket:m,toCoinMarket:s,fromCoinUrl:d,toCoinUrl:g}}});const io=e=>(he("data-v-b7c1adc9"),e=e(),we(),e),Vs={class:"price-reference-container"},zs={class:"info-title"},Hs=io(()=>n("span",{class:"coingecko"},"Price Reference",-1)),Gs=io(()=>n("div",{class:"price-reference-text"}," The following price is only an external reference from 3rd party data providers, which does not reflect actual data on Cetus. ",-1)),Ks=io(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon_tips"})],-1));function Ys(e,t,m,s,d,g){const i=Ke,p=ae("PriceTokenChart");return h(),F("div",Vs,[n("div",zs,[Hs,J(i,{"overlay-class-name":"price-impact-tooltip",placement:"top","arrow-point-at-center":""},{title:ne(()=>[Gs]),default:ne(()=>[Ks]),_:1})]),e.fromCoin&&e.formCoinMarket?(h(),ee(p,{key:0,id:e.formCoinId,coin:e.fromCoin,market:e.formCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):X("",!0),e.toCoin&&e.toCoinMarket?(h(),ee(p,{key:1,id:e.toCoinId,coin:e.toCoin,market:e.toCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):X("",!0)])}const Js=ve(Ws,[["render",Ys],["__scopeId","data-v-b7c1adc9"]]);function Xs(){const{getToken:e,getTokenList:t}=ko(),m=ho(),{t:s,locale:d}=to(),g=Se(),i=o(()=>Co()),{allTokensObj:p}=so(),r=le(),a=o(()=>(console.log(r,"#suiSwapStore"),r)),{setIsSwapping:k,setIsSwapConfirmModal:w,setFromCoinAmount:u,setToCoinAmount:A,setOneFromAmount:y,setOneToAmount:$,setInsufficientLiquidity:I,setRouterPool:P,setSuiPreSwapData:_,setCountdown:j,setFromCoin:f,setToCoin:l,setFixedFromCoin:C,setRouterSwap:S,setSwapPoolInfo:B}=r;xe(()=>{t()});const v=o(()=>a.value.fromCoin),N=o(()=>a.value.toCoin),E=o(()=>a.value.fromCoinAmount),O=o(()=>a.value.toCoinAmount),D=o(()=>a.value.fixedFromCoin),c=o(()=>a.value.isSwapping),b=o(()=>a.value.swapPoolInfo),R=o(()=>a.value.swapRouterLoading),L=o(()=>a.value.notFoundRouter),T=o(()=>a.value.insufficientLiquidity),W=o(()=>a.value.isSwapConfirmModal),G=o(()=>a.value.suiPreSwapData),z=o(()=>g.chainName),V=o(()=>g.slippage),fe=o(()=>me&&me[z.value]&&me[z.value].hasRouter),Ce=o(()=>_e.getPoolInfoSuccess),_e=Re(),De=o(()=>_e),Xe=Ye(),ke=o(()=>Xe),Me=o(()=>z.value?So(z.value):{}),ro=o(()=>ke.value.assets&&v.value&&ke.value.assets[v.value.address]?fo(ke.value.assets[v.value.address].balance,v.value.decimals):0),Qe=o(()=>{var H;return ke.value.connected?b.value&&((H=b.value)!=null&&H.is_pause)?"Pool Closed":!v.value||!N.value?s("modal.selectTokenModalTitle"):!Number(E.value)&&!Number(O.value)?s("button.enterAmount"):!fe.value&&!b.value&&Ce.value?"Pool Not Found":fe.value&&L.value?"No Available Route":T.value?s("button.insufficientLiquidity"):Number(E.value)>Number(ro.value)?s("button.insufficientBalance",{name:v.value.symbol}):s("button.swap"):s("button.connectWallet")}),Ro=o(()=>{var H;return ke.value.connected?!!(c.value||!v.value||!N.value||!Number(E.value)||!Number(O.value)||Number(E.value)>Number(ro.value)||Qe.value==s("button.poolNotFound")||Qe.value!==s("button.swap")||(H=b==null?void 0:b.value)!=null&&H.is_pause||R.value):!1});se(()=>p,async H=>{if(H&&!re(H)){const K=m?m.currentRoute.value.query.to:"",Q=m?m.currentRoute.value.query.from:"";if(console.log(Q,re(v.value),"!routerCoinFrom && checkNullObj(fromCoin)"),Q&&Q!=="undefined"){console.log("ðŸš€ ~ routerCoinFrom:",Q);const ie=await e(Q);f(ie)}else if(!Q&&re(v.value)){const ie=me[z.value].swapDefaultPair.fromCoin,Z=await e(ie);console.log(Z,ie,"#coin"),f(Z)}if(K&&K!=="undefined"){const ie=await e(K);l(ie)}else if(!K&&re(N.value)){const ie=me[z.value].swapDefaultPair.toCoin,Z=await e(ie);l(Z)}!Q&&K&&f("")}},{immediate:!0}),se(()=>[v.value,N.value,De.value.poolConfigList],([H,K,Q])=>{var ie;if(!re(H)&&!re(K)){console.log("ðŸš€ ~ fromCoin:",K,H);let Z=null;const oe={};Object.values(De.value.poolConfigList).forEach(x=>{var ue,be,We,Oe,Le,ye,Ie,Ue;(x.coinA.address.toUpperCase()===((be=(ue=H.value)==null?void 0:ue.address)==null?void 0:be.toUpperCase())&&x.coinB.address.toUpperCase()===((Oe=(We=K.value)==null?void 0:We.address)==null?void 0:Oe.toUpperCase())||x.coinB.address.toUpperCase()===((ye=(Le=H.value)==null?void 0:Le.address)==null?void 0:ye.toUpperCase())&&x.coinA.address.toUpperCase()===((Ue=(Ie=K.value)==null?void 0:Ie.address)==null?void 0:Ue.toUpperCase()))&&(oe[x.address]={...x})});const de=Object.values(oe).sort((x,ue)=>x.fee-ue.fee);for(let x=0;x<de.length;x++)if(!((ie=de[x])!=null&&ie.is_pause)){Z=de[x];break}Z&&!re(Z)&&(console.log("ðŸš€ ~ info:",Z),B(Z)),B(null)}if(B(null),Q&&Q.length>0&&H&&K){const Z=[];Q.forEach(oe=>{var de,x,ue,be;(oe.coinA.address.toUpperCase()===((de=H.address)==null?void 0:de.toUpperCase())&&oe.coinB.address.toUpperCase()===((x=K.address)==null?void 0:x.toUpperCase())||oe.coinB.address.toUpperCase()===((ue=H.address)==null?void 0:ue.toUpperCase())&&oe.coinA.address.toUpperCase()===((be=K.address)==null?void 0:be.toUpperCase()))&&(oe!=null&&oe.is_pause||Z.push(oe.address))}),S(Z)}},{immediate:!0}),se(D,Wo((H,K)=>{C(H)},500),{immediate:!0}),se(()=>[v.value,N.value],([H,K])=>{if(!re(H)||!re(K)){const Q=`/swap?from=${H==null?void 0:H.address}&to=${K==null?void 0:K.address}`;m.push(Q)}},{immediate:!0,deep:!0});const Ne=U(!1),uo=async H=>{var K;try{let Q;if(D.value){const oe=new M(E.value).mul(Math.pow(10,v.value.decimals)).toString();Q=new Ge(oe)}else{const oe=new M(O.value).mul(Math.pow(10,N.value.decimals)).toString();Q=new Ge(oe)}const ie=Number(V.value)/100,Z=await((K=i==null?void 0:i.value)==null?void 0:K.getFindRouter(v,N,Q.toString(),D.value,ie,""));if(Z){_(Z),P(Z.routes),I(!1);const oe=Y(ce(new M(E.value).div(new M(O.value).toString()),v.value.decimals));y(oe);const de=Y(ce(new M(O.value).div(E.value).toString(),N.value.decimals));$(de);const x=new M(Z.amountOut).div(new M(Math.pow(10,N.value.decimals))).toString(),ue=new M(Z.amountIn).div(new M(Math.pow(10,v.value.decimals))).toString();D.value?O.value!==x&&(Ne.value=!0,A(x)):E.value!==ue&&(Ne.value=!0,u(ue))}}catch(Q){console.log("pre swap error3",Q)}},Be=U(null);se(()=>W.value,H=>{H?Be.value=setInterval(()=>{uo(D.value)},3e3):(clearInterval(Be.value),window.clearInterval(Be.value))},{immediate:!0});const Po=()=>{Ne.value=!1},Fo=()=>{w(!1),Ne.value=!1},{setIsShowSuccess:Mo,setIsShowRejected:lo,setIsShowWaiting:qe,setTransactionDesc:No,setTransactionTxid:co}=g;return{isShowAccept:Ne,toSwap:async()=>{var H,K,Q,ie,Z,oe,de,x,ue;w(!1),k(!0),clearInterval(Be),window.clearInterval(Be),co(""),No(s("tips.swapping",{from:`${Y(E.value)} ${(H=v.value)==null?void 0:H.symbol}`,to:`${Y(O.value)} ${(K=N.value)==null?void 0:K.symbol}`})),qe(!0);try{const be=D.value,We=Number(V.value)/100,Oe=await((Q=i==null?void 0:i.value)==null?void 0:Q.getRouterSwapPayload(G.value,be,We,v,N));console.log("0221####swap###swapPayload###",Oe);const Le=await Me.value.signAndExecuteTransactionBlock(ke.value.currentWallet,Oe);console.log("0221###sui swap res###",Le);const ye=Me.value.handleTx(Le);if(console.log("0221###swap###sui##tx###",ye),ye&&ye.hash){co(ye.hash),qe(!1),Mo(!0);const Ie={title:s("tips.swap"),desc:s("tips.swapSuccessText",{from:`${Y(E.value)} ${(ie=v.value)==null?void 0:ie.symbol}`,to:`${Y(O.value)} ${(Z=N.value)==null?void 0:Z.symbol}`}),hash:ye.hash,tit:"Swap",type:"liquidity",action:"swap",isHaveSui:v.value.address==me[z.value].currentChainTokenAddress||N.value.address==me[z.value].currentChainTokenAddress,icon:"icon-icon-swap1",tokenInfo:{tokena:`${(oe=v.value)==null?void 0:oe.address}`,numa:`- ${E.value}`,logoa:p&&v.value&&v.value.address&&p[v.value.address]&&p[v.value.address].logoURI,tokenb:`${(de=N.value)==null?void 0:de.address}`,numb:`+ ${O.value}`,logob:p&&N.value&&N.value.address&&p[N.value.address]&&p[N.value.address].logoURI},text:`Pay ${E.value} ${(x=v.value)==null?void 0:x.symbol} to receive ${O.value} ${(ue=N.value)==null?void 0:ue.symbol}`};Ie.res=ye.res,Me.value.showTransitionPending(Ie);const Ue=await Me.value.watchTransaction(Ie);console.log("0221###swap###transitionStatus####",Ue),Ue&&setTimeout(()=>{Me.value.getAccount(ke.value.address)},1e3)}else qe(!1),lo(!0);u(""),A(""),k(!1)}catch(be){u(""),A(""),k(!1),console.log("Swap Error###",be),qe(!1),lo(!0)}},updateAccept:Po,getSuiAmountAccept:uo,closeSwapConfirmModal:Fo,slippage:V,swapBtnText:Qe,isSwapBtnDisabled:Ro}}const Qs=pe({components:{SwapShowInfo:_o,UnderlineTab:at,PlusSetting:qn,TokenInputBox:ls,PriceReference:Js,SwapSuiConfirm:Ao},setup(){const{closeSwapConfirmModal:e,isShowAccept:t,updateAccept:m,toSwap:s,swapBtnText:d,isSwapBtnDisabled:g}=Xs(),i=le(),p=o(()=>i),r=Se(),a=o(()=>r.slippage),k=o(()=>p.value.isSwapping),w=o(()=>p.value.isSwapConfirmModal),{setIsSwapConfirmModal:u}=p.value,A=ho(),y=Ye(),$=o(()=>y);return{isShowAccept:t,slippage:a,updateAccept:m,closeSwapConfirmModal:e,toSwap:s,isSwapping:k,swapBtnText:d,isSwapBtnDisabled:g,isSwapConfirmModal:w,clickSwapBtn:()=>{$.value.connected?u(!0):$.value.setIsShowWalletModal(!0)},router:A,tradeTabList:[{label:"Swap",value:"swap",link:"/swap"},{label:"Limit",value:"limit",link:"/limit"},{label:"DCA",value:"dca",link:"/dca",isHaveBeta:!0}]}}});const Zs=e=>(he("data-v-db6681ae"),e=e(),we(),e),xs={class:"swap-sui-container"},ea=Zs(()=>n("div",{class:"bg"},null,-1));function oa(e,t,m,s,d,g){const i=ae("UnderlineTab"),p=ae("PlusSetting"),r=ae("TokenInputBox"),a=oo,k=_o,w=ae("PriceReference"),u=Ao;return h(),F("div",xs,[ea,J(i,{"tab-list":e.tradeTabList,"current-tab":"swap",onClickTab:t[0]||(t[0]=A=>e.$router.push(A.link))},null,8,["tab-list"]),J(p),J(r),J(a,{disabled:e.isSwapBtnDisabled,class:"big-btn new-big-btn",loading:e.isSwapping,onClick:t[1]||(t[1]=A=>e.clickSwapBtn())},{default:ne(()=>[n("span",null,q(e.swapBtnText),1)]),_:1},8,["disabled","loading"]),J(k),J(w),e.isSwapConfirmModal?(h(),ee(u,{key:0,"is-show-accept":e.isShowAccept,onOnClose:e.closeSwapConfirmModal,onToSwap:e.toSwap,onAccept:e.updateAccept},null,8,["is-show-accept","onOnClose","onToSwap","onAccept"])):X("",!0)])}const ja=ve(Qs,[["render",oa],["__scopeId","data-v-db6681ae"]]);export{ja as default};
