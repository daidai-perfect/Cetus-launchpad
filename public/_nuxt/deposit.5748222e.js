import{j as Wt,n as vt,d as ge,e as kt,u as It,a as Le,c as Ne,s as ft,T as nt,E as Zt,b as je,l as Ct,p as _t}from"./pool.bb70887e.js";import{a as at,r as O,l as $,H as At,q as Re,e as rt,o as F,f as V,t as Lt,N as Kt,h as s,O as gt,v as se,u as fe,x as ie,c as Je,p as Nt,k as qt,S as Mt,y as $t,m as wt,K as Bt,s as Gt,F as pt,E as Pt,i as ze,A as ct,w as bt,j as Rt,P as Jt,b as Qt,B as Yt}from"./entry.2356a469.js";/* empty css              */import{s as st,m as Vt,l as eo,b as to,a as oo}from"./transform.c672907f.js";import{D as a}from"./decimal.0bdeb344.js";import{u as yt,a as no}from"./sha256.0b273565.js";import{d as Ot,_ as Ft,c as Ut,a as xt,b as io}from"./new-liquidity-title.999ff190.js";import{i as ht}from"./import-icon.de3e6c66.js";/* empty css              */import"./decimal.6f03adc8.js";import{positionError as Ye,fromCoin as k,toCoin as b,tickList as Qe,minPrice as M,maxPrice as T,currentPrice as Ve,currentPriceReverse as it,direction as qe,currentPriceTab as x,defaultMinPrice as dt,defaultMaxPrice as mt,toggle as jt,isInputTotalAmount as De,priceConfigObj as Ge,fromCoinAmount as y,toCoinAmount as C,fixedFromCoin as ye,resetTickList as Tt,resetData as ao}from"./data.e3b55ddf.js";import{_ as ro}from"./coin-lock.c78b8a5a.js";import{_ as lo}from"./coin-select.09f4c5b4.js";import{_ as so}from"./viewDetail.6e66c9c4.js";import{a as uo}from"./new-add-or-create.c82d6e23.js";import{u as co}from"./notifi.6e8e1ba3.js";import{_ as mo,a as vo}from"./icon-Add-Liquidity_2x.0acb06cb.js";import"./img-lock_2x.a28135f4.js";import"./lock.7ee2565f.js";/* empty css              *//* empty css              */import"./token-warning.f508744c.js";import"./swap-setting.7fc9fd7f.js";/* empty css              */import"./icon-error_2x.f3376577.js";import"./img-lock_2x.0539eaac.js";import"./img-no-Positions_2x.699e9e30.js";import"./status-block.c845c5bb.js";import"./icon-arrow_2x.948aedb2.js";import"./icon-arrow_2x.4ffddb8e.js";import"./useWhale.40c71e88.js";import"./index.128f5049.js";function St(e,v,ke){const ue=new a(10).pow(v-ke);return new a(1.0001).pow(e).mul(ue)}const fo=at({props:{poolInfo:{type:Object,default:()=>({chartLoading:!1,token_a:{decimal:6},token_b:{decimal:6},currentLiquity:"50000000"})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:()=>[]},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1},currentPriceTab:{type:String,default:""},before7dContractPriceLowest:{type:String,default:""},before7dContractPriceHighest:{type:String,default:""},zoom:{type:Number,default:1}},setup(e,v){const ke=O(""),ue=O(""),B=$(()=>{var n,r,d,X,R,G;return console.log(e.poolInfo,"===>props.poolInfo"),(n=e.poolInfo)!=null&&n.current_sqrt_price&&((r=e.poolInfo)!=null&&r.coinA.decimals)&&((d=e.poolInfo)!=null&&d.coinB.decimals)?i.sqrtPriceX64ToPrice((X=e.poolInfo)==null?void 0:X.current_sqrt_price,(R=e.poolInfo)==null?void 0:R.coinA.decimals,(G=e.poolInfo)==null?void 0:G.coinB.decimals).toString():"0"}),_e=$(()=>{let n=0;return e.direction?n=(Number(e.minPrice)/Number(B.value)-1)*100:n=(Number(e.minPrice)/Number(1/Number(B.value))-1)*100,n=n>0&&n<.1?.1:n,n=n<0&&n>-.1?-.1:n,n}),j=$(()=>{let n=0;return e.direction?n=(Number(e.maxPrice)/Number(B.value)-1)*100:n=(Number(e.maxPrice)/Number(1/Number(B.value))-1)*100,n=n>0&&n<.1?.1:n,n=n<0&&n>-.1?-.1:n,n}),z=yt(),S=$(()=>z),ee=$(()=>S.value.chainName?kt(S.value.chainName):{}),{TickMath:i,getNearestTickByTick:I}=ee.value,te=(n=[])=>{let r=6;const d=Math.abs(Number(n[0])-Number(n[n.length-1]));return d>=6?r=0:d>=1?r=1:d>=.1?r=2:d>=.01?r=3:d>=.001?r=4:d>=1e-4?r=5:d>=1e-5?r=6:d>=1e-6?r=7:d>=1e-7&&(r=8),r},Pe=(n,r=1)=>{if(n&&n.token_a&&!e.chartLoading&&e.minPrice&&e.maxPrice){const d=Number(e.poolInfo.current_tick_index);console.log("0117###dataProcessing###currentTick###",d),console.log("0117###dataProcessing###props.poolInfo###",e.poolInfo),console.log("0117###dataProcessing###minPrice###",e.minPrice),console.log("0117###dataProcessing###maxPrice###",e.maxPrice),console.log("0117###dataProcessing###poolInfo###",e.poolInfo);let X=d+100*r,R=d-100*r,G,le;if(e.maxPrice==="∞")le=ee.value.TickUtil.getMaxIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?le=i.priceToTickIndex(new a(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):le=i.priceToTickIndex(new a(1).div(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{le=443636}if(e.minPrice==="0")G=ee.value.TickUtil.getMinIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?G=i.priceToTickIndex(new a(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):G=i.priceToTickIndex(new a(1).div(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{G=-443636}let we=0;if(e.currentPriceTab!=="full range"){if(d>=G&&d<=le){const _=d-G,oe=le-d;we=Math.max(Math.abs(_),Math.abs(oe))}else d<G?we=Math.abs(le-d):we=Math.abs(d-G);X=d+we+100*r,R=d-we-100*r}else{const _=(Math.abs(d)>5e3,2e4);X=d+_*r,R=d-_*r}R<-443636&&(R=-443636),X>443636&&(X=443636);const p=new a(n.liquidity).div(Math.pow(10,8)).toString(),P=e.tickList;console.log("0117####drawChart####tick_info_array####",P);const N=[],pe=[];let h={};for(let _=0;_<P.length;_++){if(h=P[_],h.index<=d&&h.index>=R){if(N.length<1&&_!==0){const oe=P[_-1];N.unshift({...oe,index:R,source:"left"})}N.unshift(h)}else if(h.index>d&&h.index<=X&&(pe.push(h),N.length<1&&_!==0)){const oe=P[_-1];N.push({...oe,index:R,source:"left"})}if(h.index>X){const oe=P[_];if(pe.push({...oe,index:X,source:"right"}),N.length<1&&_!==0){const Ke=P[_-1];N.push({...Ke,index:R,source:"left"})}break}}let A="0";for(let _=N.length-1;_>=0;_--)A=new a(A).plus(new a(N[_].liquidityNet.toString()).div(Math.pow(10,8))).toString(),N[_].liquityAmount=A;let E=p;for(let _=0;_<pe.length;_++)E=new a(E).plus(new a(pe[_].liquidityNet.toString()).div(Math.pow(10,8))).toString(),pe[_].liquityAmount=E;let D=[];const L=P&&P.length>0?{index:d,liquityAmount:Number(p)}:{index:d,liquityAmount:0};(N.length>0||pe.length>0)&&(D=[...N.reverse(),L,...pe],e.direction||(D=D.reverse()));const xe=[];P.forEach(_=>{xe.push({..._,liquidityGross:_.liquidityGross.toString(),liquidityNet:_.liquidityNet.toString()})}),console.log("0117####drawChart####testTickInfoArray####",xe),console.log("0117####drawChart####currentLiquity####",p),console.log(D,"###chartData"),H(D,R,X,G,le,d)}};let Ce=O(!1);const w=O(!1);At(()=>{const n=document.body.clientWidth;w.value=!0,n<750?Ce.value=!1:Ce.value=!0,window.onresize=()=>{document.body.clientWidth<750?Ce.value=!1:Ce.value=!0,console.log("这里执行了吗"),Pe(e.poolInfo,e.zoom)}});const H=(n,r,d,X,R,G)=>{console.log("0117####drawChart####chartData####",n),console.log("0117####drawChart####tickMin####",r),console.log("0117####drawChart####tickMax####",d),console.log("0117####drawChart####minPriceTick####",X),console.log("0117####drawChart####maxPriceTick####",R),console.log("0117####drawChart####currentTick####",G),console.log("0117####drawChart####props.direction####",e.direction),console.log("0518###newd3###props.before7dContractPriceLowest###",e.before7dContractPriceLowest),console.log("0518###newd3###props.before7dContractPriceHighest###",e.before7dContractPriceHighest);let le,we;e.direction?(le=e.before7dContractPriceLowest?i.priceToTickIndex(new a(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",we=e.before7dContractPriceHighest?i.priceToTickIndex(new a(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):""):(le=e.before7dContractPriceLowest?i.priceToTickIndex(new a(1).div(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",we=e.before7dContractPriceHighest?i.priceToTickIndex(new a(1).div(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"");const p={top:30,right:35,bottom:20,left:80};let P,N;Ce.value?(P=460-p.left-p.right,N=205-p.top-p.bottom):(P=340-p.left-p.right,N=205-p.top-p.bottom);const pe=d-r,h=parseInt(String(pe/4));let A=[r+h/4,r+h,r+2*h,d-h,d-h/4];const E=r,D=d,L=P/(D-E);e.currentPriceTab==="full range"&&(A=[r,r+2*h,d]),console.log("0117####drawChart####xArr####",A),console.log("0117####drawChart####utickMin####",E),console.log("0117####drawChart####utickMax####",D),console.log("0117####drawChart####unit####",L);const xe=A.map(l=>e.direction?St(l,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString():new a(1).div(St(l,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)).toString()),_=te(xe);st("#chart").selectAll("*").remove();const oe=st("#chart").attr("width",P+p.left+p.right).attr("height",N+p.top+p.bottom).append("g").attr("transform",`translate(${p.left},${p.right})`),Ke=Vt(n,function(l){return Number(Math.abs(l.liquityAmount))})||0,Me=eo().range([0,N]).domain([Ke,0]);to().rangeRound([0,P]).padding(.1);const et=oe.append("g").attr("id","barsBox").selectAll("rect").data(n).enter().append("rect");S.value.theme=="default"?et.attr("x",function(l,u){return u===0?0:e.direction?Math.abs(l.index-E)*L:Math.abs(D-l.index)*L}).attr("y",function(l,u){return e.direction?u===n.length-1?0:Me(l.liquityAmount):u===n.length-1?0:Me(n[u+1].liquityAmount)}).attr("width",function(l,u){return u===0&&n.length===1&&l.liquityAmount>0?P:(e.direction,u!==n.length-1?Math.abs(n[u+1].index-l.index)*L:0)}).attr("height",function(l,u){return u===0&&n.length===1&&l.liquityAmount>0?N:e.direction?u===n.length-1?0:N-Me(l.liquityAmount):u===n.length-1?0:N-Me(n[u+1].liquityAmount)}).attr("fill","#279477").attr("class","bars").attr("stroke-width",1).attr("stroke","#279477"):et.attr("x",function(l,u){return u===0?0:e.direction?Math.abs(l.index-E)*L:Math.abs(D-l.index)*L}).attr("y",function(l,u){return e.direction?u===n.length-1?0:Me(Math.abs(l.liquityAmount)):u===n.length-1?0:Me(Math.abs(n[u+1].liquityAmount))}).attr("width",function(l,u){return u===0&&n.length===1&&l.liquityAmount>0?P:(e.direction,u!==n.length-1?Math.abs(n[u+1].index-l.index)*L:0)}).attr("height",function(l,u){if(u===0&&n.length===1&&l.liquityAmount>0)return N;if(e.direction)return u===n.length-1?0:Number(l.liquityAmount)?N-Me(Math.abs(l.liquityAmount)):0;{if(u===n.length-1)return 0;const Fe=N-Me(Math.abs(n[u+1].liquityAmount));return Number(n[u+1].liquityAmount)?Fe:0}}).attr("fill",function(l,u){return"#417494"}).attr("class","bars").attr("stroke-width",1).attr("stroke",function(l,u){return"#417494"});const t=oe.append("g");t.append("line").attr("x1",0).attr("y1",155).attr("x2",P).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D");const m=t.append("g");let f=0;if(e.direction){for(let l=0;l<A.length;l++){const u=ge(xe[l],_)||"0";console.log("0423####price####",u),xe.push(u);const Fe=Math.abs(A[l]-E)*L;let de=0;for(let me=0;me<u.length;me++)u[me]==="1"?de+=4.02:u[me]==="."?de+=2.64:u[me]==="7"?de+=5.48:de+=6;console.log(Fe,"x=>>>"),m.append("text").text(u).attr("x",Fe-de/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}f=Math.abs(G-E)*L}else{for(let l=A.length-1;l>=0;l--){const u=ge(xe[l],_)||0;xe.push(u);const Fe=Math.abs(A[l]-D)*L;let de=0;for(let me=0;me<u.length;me++)u[me]==="1"?de+=4.02:u[me]==="."?de+=2.64:u[me]==="7"?de+=5.48:de+=6;m.append("text").text(u).attr("x",Fe-de/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}f=Math.abs(G-D)*L}console.log(G,D,L,"######currentPricePositon"),(S.value.theme=="default"?oe.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#68FFD8"):oe.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#76C8FF")).attr("transform","translate("+f+", 0)");let J,Q,ce,Oe;e.direction?(J=X<E?-100:parseInt(String(Math.abs(X-E)*L)),Q=R<E?-100:parseInt(String(Math.abs(R-E)*L)),ce=le<E?-100:Math.abs(le-E)*L,Oe=we<E?-100:Math.abs(we-E)*L):(Q=X<E?-100:Math.abs(D-X)*L,J=R<E?-100:Math.abs(D-R)*L,Oe=le>D?-100:Math.abs(D-le)*L,ce=we>D?-100:Math.abs(D-we)*L),e.minPrice==="0"&&(J=0),e.maxPrice==="∞"&&(Q=P),console.log(J,"==>minPriceTickX"),Ce.value,ke.value=P-J+87+"px",ue.value=Q+98+"px",le&&ce<P&&oe.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+ce+", 0)"),we&&Oe<P&&oe.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+Oe+", 0)");const Te=oe.append("g").attr("id","left-handle"),Se=oe.append("g").attr("id","right-handle");S.value.theme=="default"?(Te.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),Te.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 20) rotate(180)"),Te.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",6).attr("fill","#68FFD8"),Te.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",4.5).attr("fill","#68FFD8"),Se.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),Se.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),Se.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",6).attr("fill","#68FFD8"),Se.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",4.5).attr("fill","#68FFD8")):(Te.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),Te.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 24) rotate(180)"),Te.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",8).attr("fill","#76C8FF"),Te.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",6.5).attr("fill","#76C8FF"),Se.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),Se.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),Se.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",8).attr("fill","#76C8FF"),Se.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",6.5).attr("fill","#76C8FF")),console.log("0525###d3###select###minPriceTickX###",J),console.log("0525###d3###select###maxPriceTickX###",Q),Te.attr("transform","translate("+J+", 0)"),Se.attr("transform","translate("+Q+", 0)");const He=oo().extent([[0,0],[P,N]]).handleSize(30).on("end",We);oe.append("g").attr("class","brush").call(He).call(He.move,[J,Q]);function We(l){if(!l.sourceEvent||!l.selection)return;Te.attr("transform","translate("+l.selection[0]+", 0)"),Se.attr("transform","translate("+l.selection[1]+", 0)"),Ce.value,ke.value=P-l.selection[0]+87+"px",ue.value=l.selection[1]+74+"px";let u,Fe;console.log("0525###d3###select###e.selection[0]###",l.selection[0]),console.log("0525###d3###select###e.selection[0]###",l.selection[1]),console.log("0525###d3###select###props.direction###",e.direction),console.log("0525###d3###select###width###",P),console.log("0525###d3###select###unit###",L),console.log("0525###d3###select###utickMin###",E),console.log("0525###d3###select###utickMax###",D),console.log("0525###d3###select###props.poolInfo###",e.poolInfo);let de=0,me=0;e.direction?(de=I(parseInt(String(l.selection[0]/L+E)),Number(e.poolInfo.tickSpacing)),u=i.tickIndexToPrice(de,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),me=I(parseInt(String(l.selection[1]/L+E)),Number(e.poolInfo.tickSpacing)),Fe=i.tickIndexToPrice(me,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),console.log("1114###d3###select###minTick###",de),console.log("1114###d3###select###maxTick###",me),console.log("1114###d3###select###minPrice###",u),console.log("1114###d3###select###maxPrice###",Fe)):(me=I(D-l.selection[0]/L,Number(e.poolInfo.tickSpacing)),u=1/i.tickIndexToPrice(me,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),de=I(D-l.selection[1]/L,Number(e.poolInfo.tickSpacing)),Fe=1/i.tickIndexToPrice(de,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString()),v.emit("onChangeMinPrice",String(ge(String(u),6))),v.emit("onChangeMaxPrice",String(ge(String(Fe),6)))}S.value.theme=="default"?st(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#15322C"):st(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#152632"),console.log("画完了##")};return O(""),Re(()=>[e.poolInfo,e.minPrice,e.maxPrice,e.currentPriceTab,e.zoom,e.tickList],([n,r,d,X,R,G])=>{console.log(n,r,d,d>r,R,"poolInfo && minPrice && maxPrice && (maxPrice > minPrice)"),n&&r&&d&&(n!=null&&n.liquidity)&&(X!=="Custom"||console.log("绘制"),Pe(n,R))},{immediate:!0}),console.log(e,"props===>"),{store:S,loading:w,rangeSizeLower:_e,rangeSizeUpper:j,rangeSizeLowerPosition:ke,rangeSizeUpperPosition:ue,decimalFormat:Wt,numberformat:vt}}});const go=e=>(Nt("data-v-60bd7ae2"),e=e(),qt(),e),po={class:"chart-box"},bo={class:"chart"},ho=go(()=>s("svg",{id:"chart"},null,-1));function ko(e,v,ke,ue,B,_e){const j=Mt;return F(),V("div",po,[Lt(s("div",bo,[e.currentPriceTab!=="full range"&&e.minPrice!=="0"&&e.maxPrice!=="∞"?(F(),V("div",{key:0,class:"range-size range-size-lower",style:gt({right:e.rangeSizeLowerPosition})},se(("numberformat"in e?e.numberformat:fe(vt))(e.rangeSizeLower.toFixed(1),1))+"% ",5)):ie("",!0),e.currentPriceTab!=="full range"&&e.minPrice!=="0"&&e.maxPrice!=="∞"?(F(),V("div",{key:1,class:"range-size range-size-upper",style:gt({left:e.rangeSizeUpperPosition})},se(("numberformat"in e?e.numberformat:fe(vt))(e.rangeSizeUpper.toFixed(1),1))+"% ",5)):ie("",!0),ho],512),[[Kt,!e.chartLoading]]),e.chartLoading?(F(),Je(j,{key:0})):ie("",!0)])}const zt=rt(fo,[["render",ko],["__scopeId","data-v-60bd7ae2"]]),wo=at({props:{lever:{type:String,default:""}},setup(){return{}}});const yo=e=>(Nt("data-v-619778e2"),e=e(),qt(),e),Co={class:"lever"},_o=yo(()=>s("div",{class:"lever-title"},"Leverage",-1)),Po={class:"lever-text"};function To(e,v,ke,ue,B,_e){return F(),V("div",Co,[_o,s("div",Po,se(e.lever),1)])}const So=rt(wo,[["render",To],["__scopeId","data-v-619778e2"]]),Io=at({components:{NewLiquidityD3Chart:zt,NewLiquidityPrice:Ot},setup(){const{t:e,locale:v}=$t(),ke=O("liquidity"),ue=yt(),B=$(()=>ue),_e=$(()=>B.value.chainName),j=It(),z=$(()=>j),S=$(()=>B.value.chainName?kt(B.value.chainName):{});At(()=>{Ye.value=!1});const ee=wt(),i=$(()=>{let t=null;for(let m=0;m<z.value.poolConfigList.length;m++){const f=z.value.poolConfigList[m];f.address==ee.query.poolAddress&&(t=f)}return console.log(t,"===>basePoolInfo"),t}),I=$(()=>{let t=null;for(const m in z.value.poolsObj){const f=z.value.poolsObj[m];f.address==ee.query.poolAddress&&(console.log(f,"p===>"),t=f)}return t}),te=O(),Pe=O(!0),Ce=async(t,m)=>{if(console.log(Pe.value,"==>chartLoading.value"),Pe.value=!0,m){Qe.value=[],H.value=[];const f=t.token_a.decimals,q=t.token_b.decimals;console.log(t,"pool===>1111"),console.log("poolPrice###pool.current_tick_index####",t.current_tick_index);const J=nt.tickIndexToPrice(t.current_tick_index,f,q);console.log("poolPrice###",J.toString()),Ve.value=nt.sqrtPriceX64ToPrice(t==null?void 0:t.current_sqrt_price,f,q).toString(),console.log(Ve.value,"##currentPrice.value"),it.value=new a(1).div(nt.sqrtPriceX64ToPrice(t==null?void 0:t.current_sqrt_price,f,q)).toString(),console.log(it.value,"##currentPriceReverse.value"),k.value=t.needReverse?t.token_b:t.token_a,b.value=t.needReverse?t.token_a:t.token_b,te.value=t.needReverse,t.token_a.address.toLowerCase()===k.value.address.toLowerCase()&&t.token_b.address.toLowerCase()===b.value.address.toLowerCase()?qe.value=!0:qe.value=!1,console.log(t,"187===>"),console.log(t,"###pool===>");let Q={poolAddress:t.address,coinTypeA:t.coin_a_address,coinTypeB:t.coin_b_address};const ce=await S.value.getTicks(Q);Qe.value=ce?S.value.getTickDataFromUrlData(ce):[],console.log(Qe.value,"===>chartLoadingtickList.value"),Pe.value=!1,r(t)}},w=t=>{const m=t.token_a.decimals,f=t.token_b.decimals;console.log(t,"pool===>1111"),console.log("poolPrice###pool.current_tick_index####",t.current_tick_index),Ve.value=nt.sqrtPriceX64ToPrice(t==null?void 0:t.current_sqrt_price,m,f).toString(),it.value=new a(1).div(nt.sqrtPriceX64ToPrice(t==null?void 0:t.current_sqrt_price,m,f)).toString()},H=O([]),n=O(),r=t=>{const m=t.token_a.decimals,f=t.token_b.decimals;let q=z.value.poolPriceConfigObj&&z.value.poolPriceConfigObj[t.address]&&z.value.poolPriceConfigObj[t.address].recommend_ranges||{};const J=z.value.poolPriceConfigObj&&z.value.poolPriceConfigObj[t.address]&&z.value.poolPriceConfigObj[t.address].type||"";console.log(q,"===>priceConfigList");let Q,ce;const Oe=Zt(t.current_tick_index,t.tickSpacing);n.value=t.current_tick_index,console.log(Oe,t.tickSpacing,"==>pool.tickSpacing"),Q=Oe-Number(t.type=="unstable"?Number(t.tickSpacing)*2:Number(t.tickSpacing)*3),ce=Oe+Number(t.type=="unstable"?Number(t.tickSpacing)*2:Number(t.tickSpacing)*3);const Te=S.value.TickMath.tickIndexToPrice(Q,m,f).toString(),Se=S.value.TickMath.tickIndexToPrice(ce,m,f).toString();q["full range"]={lower:S.value.TickUtil.getMinIndex(Number(I.value.tickSpacing)),upper:S.value.TickUtil.getMaxIndex(Number(I.value.tickSpacing))},q.custom={lower:Q,upper:ce,minPrice:Te,maxPrice:Se};const He=[];for(let We in q)q[We]&&(console.log(We,"j==>"),He.push({...q[We],key:We}));console.log(He,"priceList"),console.log(t,"###pool.type 504"),J&&He&&He.length>2?t.isSelfBuilt?x.value="custom":J=="stable"?x.value="suggested":x.value="passive":x.value="custom",H.value=He,Ge.value=q,R({key:x.value,...q[x.value]})},d=O(""),X=O(""),R=t=>{console.log("priceTab====>",t),console.log("priceTab###poolInfo###",I.value),x.value=t.key.toLowerCase();const m=I.value.token_a.decimals,f=I.value.token_b.decimals,{lower:q,upper:J}=t;De.value=!1;const Q=S.value.TickMath.tickIndexToPrice(q,m,f).toString(),ce=S.value.TickMath.tickIndexToPrice(J,m,f).toString();if(t.key=="full range"){d.value=q,X.value=J,G();return}console.log(qe.value,"===>direct.value"),qe.value?(dt.value=String(Q),M.value=String(Q),mt.value=String(ce),T.value=String(ce),d.value=q,X.value=J):(dt.value=String(1/Number(ce)),M.value=String(1/Number(ce)),mt.value=String(1/Number(Q)),T.value=String(1/Number(Q)),d.value=S.value.TickMath.priceToTickIndex(new a(1/Number(ce)),m,f),X.value=S.value.TickMath.priceToTickIndex(new a(1/Number(Q)),m,f)),console.log(M.value,T.value,"===>111")},G=t=>{M.value="0",T.value="∞"};Re(()=>I.value,(t,m)=>{console.log(m,"===>oldVal"),console.log(t,"===>newVal"),(!m&&t&&!Ne(t)||m&&t&&m.address!==t.address)&&(console.log("池子信息"),Ce(t,!m||t.address!==m.address)),t&&!Ne(t)&&w(t)},{immediate:!0}),Bt(()=>{k.value=O(),b.value=O(),Qe.value=[]}),Re(()=>[i.value,I.value,z.value.recommendRangesObj],(t,m)=>{var f,q;console.log(t,"===>newValue369"),console.log(m,"===>oldValue369"),(!m||t[0]&&t[1]&&t[2]&&!Ne(t[0])&&!Ne(t[1]&&!Ne(t[2]))||((f=t[0])==null?void 0:f.address)!==((q=m[0])==null?void 0:q.address))&&t[0]&&t[2]&&!Ne(t[0])&&!Ne(t[2])&&(console.log(t[0],t[2],"======>374"),j.setSinglePool(t[0],t[2],_e.value))},{immediate:!0,deep:!0});const le=t=>{if(_e.value=="Sui")switch(t){case"passive":return"/sui-image/icon_ conservative@2x.png";case"active":return"/sui-image/icon_active@2x.png";case"full range":return"/sui-image/icon_fullrange@2x.png";case"custom":return"/sui-image/icon_costom@2x.png";case"suggested":return"/sui-image/icon_stabel@2x.png"}else switch(t){case"passive":return"/image/icon_ conservative@2x.png";case"active":return"/image/icon_active@2x.png";case"full range":return"/image/icon_fullrange@2x.png";case"custom":return"/image/icon_costom@2x.png";case"suggested":return"/image/icon_stabel@2x.png"}},we=t=>{switch(t){case"suggested":return e("newAdd.suggested");case"active":return e("newAdd.active");case"passive":return e("newAdd.conservative");case"full range":return e("newAdd.fullRange");case"custom":return e("newAdd.custom")}},p=t=>{var f,q;const m=z.value.poolPriceConfigObj&&z.value.poolPriceConfigObj[(f=I.value)==null?void 0:f.address]&&z.value.poolPriceConfigObj[(q=I.value)==null?void 0:q.address].type||"";if(console.log(m,t,"==>poolType"),H.value.length>2)if(m=="unstable")switch(t){case"active":return{top:"35%"};case"passive":return{top:"10%"};case"full range":return{top:"60%"};case"custom":return{top:"85%"}}else switch(t){case"suggested":return{top:"23%"};case"full range":return{top:"48%"};case"custom":return{top:"73%"}}else if(m=="unstable")switch(t){case"active":return{top:"35%"};case"passive":return{top:"10%"};case"full range":return{top:"60%"};case"custom":return{top:"85%"}}else switch(t){case"full range":return{top:"35%"};case"custom":return{top:"60%"}}},P=O(1),N=()=>{const t=P.value/2;P.value=t},pe=()=>{const t=P.value*2;P.value=t};console.log(H.value,"==>priceTablList");const h=$(()=>{var t,m,f;return!I.value||Ne(B.value.addressHistTokens)||!B.value.addressHistTokens[(t=I.value)==null?void 0:t.poolAddress]?null:Object.fromEntries((f=B.value.addressHistTokens[(m=I.value)==null?void 0:m.poolAddress])==null?void 0:f.data.map(q=>[q.key,q.value]))}),A=O(30),E=O("30D"),D=$(()=>qe.value?h.value&&ge(A.value==7?h.value.before_7_d_contract_price_lowest:A.value==24?h.value.before_24_h_contract_price_lowest:h.value.before_30_d_contract_price_lowest,6)||0:h.value&&ge(new a(1).div(A.value==7?h.value.before_7_d_contract_price_highest:A.value==24?h.value.before_24_h_contract_price_highest:h.value.before_30_d_contract_price_highest).toString(),6)||0),L=$(()=>qe.value?h.value&&ge(A.value==7?h.value.before_7_d_contract_price_highest:A.value==24?h.value.before_24_h_contract_price_highest:h.value.before_30_d_contract_price_highest,6)||0:(h.value&&ge(1/Number(A.value==7?h.value.before_7_d_contract_price_lowest:A.value==24?h.value.before_24_h_contract_price_lowest:h.value.before_30_d_contract_price_lowest),6))==1/0?0:h.value&&ge(1/Number(A.value==7?h.value.before_7_d_contract_price_lowest:A.value==24?h.value.before_24_h_contract_price_lowest:h.value.before_30_d_contract_price_lowest),6)||0),xe=$(()=>{const t=Number(M.value),m=Number(T.value);if(M.value=="0"&&T.value=="∞"||x.value=="full range")return"1x";if(M.value==T.value||x.value=="full range")return"--";if(M.value&&T.value&&M.value!=="0"&&T.value!=="∞"){const f=ft(1/(1-Number((t/m)**.25)),2);return Number(f)>0?f+"x":"--"}else return 1}),_=$(()=>{var t,m,f,q,J,Q;return((t=k.value)==null?void 0:t.isSelfBuilt)||((m=b.value)==null?void 0:m.isSelfBuilt)||((q=z.value.tokensObj[(f=k.value)==null?void 0:f.address])==null?void 0:q.isSelfBuilt)||((Q=z.value.tokensObj[(J=b.value)==null?void 0:J.address])==null?void 0:Q.isSelfBuilt)}),oe=(t,m)=>{console.log(t,"####0731 priceRangeChangeMin"),t!==M.value&&x.value=="full range"?(console.log(H.value,"===>priceTablList"),R({key:"custom",...H.value.custom})):x.value!=="full range"&&x.value!=="custom"?(x.value="custom",M.value=t):M.value=t},Ke=(t,m)=>{console.log(t,"###priceRangeChangeMax maxPirce"),t!==T.value&&x.value=="full range"?R({key:"custom",...H.value.custom}):x.value!=="full range"&&x.value!=="custom"?(x.value="custom",t=="0"?T.value="∞":T.value=t):t=="0"?T.value="∞":T.value=t};return console.log(M.value,T.value,"683==>"),Re(()=>[M.value,T.value],([t,m])=>{console.log(t,m,"minmax new-liquidity-left")},{deep:!0,immediate:!0}),{positionError:Ye,getCoinIcon:t=>{var m;return(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((m=z.value.tokensObj[t==null?void 0:t.address])==null?void 0:m.logo_url)||(B.value.theme==="default"?ht("/image/coins/unknown.png"):ht("/image/coins/sui-unknown.png"))},chainName:_e,store:B,currentTab:ke,currentPrice:Ve,currentPriceReverse:it,fromCoin:k,toCoin:b,direction:qe,needReverse:te,addCommom:Le,decimalUi:ge,priceTablList:H,currentPriceTab:x,sliderStyle:p,poolInfo:I,tickList:Qe,getPriceTabImage:le,getPriceTabText:we,defaultMinPrice:dt,defaultMaxPrice:mt,minPrice:M,maxPrice:T,currentTick:n,chartLoading:Pe,zoomOut:N,zoomIn:pe,zoom:P,priceTab:R,before7dContractPriceLowest:D,before7dContractPriceHighest:L,aprRewardsTime:E,lever:xe,aprRewardsParameter:A,isSelfBuilt:_,priceRangeChangeMin:oe,priceRangeChangeMax:Ke,toggle:jt,getPirceTabTips:t=>{switch(t){case"active":return e("newAdd.activeTips");case"passive":return e("newAdd.passiveTips");case"full range":return e("newAdd.fullRangTips");case"suggested":return e("newAdd.suggestedTips");case"custom":return e("newAdd.customTips")}},timeList:[{label:"24H",value:24},{label:"7D",value:7},{label:"30D",value:30}]}}});const Ao={class:"new-liquidity-left"},Lo=s("span",{class:"selectRange"},"Select Range",-1),No={class:"price-info"},qo={class:"left"},Mo={class:"base-coin"},$o={class:"base-coin-title"},Bo=s("span",null,"Base coin",-1),Ro=s("svg",{class:"icon icon-up","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-exchange_up1"})],-1),Oo=s("svg",{class:"icon icon-down","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-exchange_down1"})],-1),Fo=[Ro,Oo],Uo={class:"base-coin-bottom"},xo={alt:""},jo={class:"current-price"},zo=s("div",{class:"current-price-title"},"Current Price",-1),Ho={key:0,class:"from-pre-to"},Xo={class:"right"},Eo={class:"price-range"},Do={class:"left"},Wo={class:"price-slider"},Zo={class:"slider"},Ko=s("div",{class:"slider-ratio-content"},null,-1),Go=[Ko],Jo={class:"price-tab-list"},Qo=["onClick"],Yo=["src"],Vo={class:"right"},en={class:"price-zoom"},tn={class:"current-price"},on=s("div",{class:"current-price-title"},"Current Price",-1),nn={key:0,class:"from-pre-to"},an={class:"price-zoom-right"},rn={class:"leverage"},ln=s("div",{class:"left"},null,-1),sn={class:"right"},un={class:"right-time"},cn={key:0,class:"day-7-price-range"},dn=s("i",null,null,-1),mn={class:"gray"},vn={class:"time-list"},fn=["onClick"],gn={class:"right-price-h5"},pn={class:"apr-leverage"},bn={key:0,class:"position-tips"},hn=["src"],kn={class:"error"};function wn(e,v,ke,ue,B,_e){var I,te,Pe,Ce,w,H,n;const j=Jt,z=zt,S=So,ee=Ot,i=Gt("image");return F(),V("div",Ao,[Lo,s("div",No,[s("div",qo,[s("div",Mo,[s("div",$o,[Bo,s("div",{class:"change-price",onClick:v[0]||(v[0]=(...r)=>e.toggle&&e.toggle(...r))},Fo)]),s("div",Uo,[Lt(s("img",xo,null,512),[[i,e.getCoinIcon(e.fromCoin)]]),s("span",null,se((I=e.fromCoin)==null?void 0:I.symbol),1)])]),s("div",jo,[zo,s("div",null,[s("span",null,se(e.poolInfo?e.direction?("addCommom"in e?e.addCommom:fe(Le))(("decimalUi"in e?e.decimalUi:fe(ge))(e.currentPrice,6)):("addCommom"in e?e.addCommom:fe(Le))(("decimalUi"in e?e.decimalUi:fe(ge))(e.currentPriceReverse,6)):"--"),1),e.fromCoin&&e.toCoin?(F(),V("span",Ho,se((te=e.toCoin)==null?void 0:te.symbol)+" per "+se((Pe=e.fromCoin)==null?void 0:Pe.symbol),1)):ie("",!0)])])]),s("div",Xo,[e.currentTab=="liquidity"?(F(),V("div",{key:0,class:"zoom-out",onClick:v[1]||(v[1]=(...r)=>e.zoomOut&&e.zoomOut(...r))}," + ")):ie("",!0),e.currentTab=="liquidity"?(F(),V("div",{key:1,class:"zoom-in",onClick:v[2]||(v[2]=(...r)=>e.zoomIn&&e.zoomIn(...r))}," - ")):ie("",!0)])]),s("div",Eo,[s("div",Do,[s("div",Wo,[s("div",Zo,[s("div",{class:"slider-ratio",style:gt(e.sliderStyle(e.currentPriceTab))},Go,4)])]),s("div",Jo,[(F(!0),V(pt,null,Pt(e.priceTablList,r=>(F(),V("div",{key:r.key,class:ct(["price-tab-item",e.currentPriceTab==r.key?"price-tab-item-active":""]),onClick:d=>e.priceTab(r)},[ze(j,{placement:"bottom","arrow-point-at-center":""},{title:bt(()=>[Rt(se(e.getPirceTabTips(r.key)),1)]),default:bt(()=>[s("img",{src:e.getPriceTabImage(r.key),alt:""},null,8,Yo),s("span",null,se(e.getPriceTabText(r.key)),1)]),_:2},1024)],10,Qo))),128))])]),s("div",Vo,[s("div",en,[s("div",tn,[on,s("div",null,[s("span",null,se(e.poolInfo?e.direction&&!e.needReverse?("addCommom"in e?e.addCommom:fe(Le))(("decimalUi"in e?e.decimalUi:fe(ge))(e.currentPrice,6)):("addCommom"in e?e.addCommom:fe(Le))(("decimalUi"in e?e.decimalUi:fe(ge))(e.currentPriceReverse,6)):"--"),1),e.fromCoin&&e.toCoin?(F(),V("span",nn,se(e.direction&&!e.needReverse?`${(Ce=e.fromCoin)==null?void 0:Ce.symbol} per ${(w=e.toCoin)==null?void 0:w.symbol}`:`${(H=e.toCoin)==null?void 0:H.symbol} per ${(n=e.fromCoin)==null?void 0:n.symbol}`),1)):ie("",!0)])]),s("div",an,[e.currentTab=="liquidity"?(F(),V("div",{key:0,class:"zoom-out",onClick:v[3]||(v[3]=(...r)=>e.zoomOut&&e.zoomOut(...r))}," + ")):ie("",!0),e.currentTab=="liquidity"?(F(),V("div",{key:1,class:"zoom-in",onClick:v[4]||(v[4]=(...r)=>e.zoomIn&&e.zoomIn(...r))}," - ")):ie("",!0)])]),e.poolInfo?(F(),Je(z,{key:0,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direction,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,zoom:e.zoom,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","zoom","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):ie("",!0)])]),s("div",rn,[ln,s("div",sn,[s("div",un,[e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(F(),V("div",cn,[dn,s("span",mn,se(e.aprRewardsParameter==7?"7D":e.aprRewardsParameter==24?"24H":"30D")+" Price Range",1),s("span",null,se(("addCommom"in e?e.addCommom:fe(Le))(("decimalUi"in e?e.decimalUi:fe(ge))(e.before7dContractPriceLowest,6)))+" - "+se(("addCommom"in e?e.addCommom:fe(Le))(("decimalUi"in e?e.decimalUi:fe(ge))(e.before7dContractPriceHighest,6))),1)])):ie("",!0),s("div",vn,[(F(!0),V(pt,null,Pt(e.timeList,r=>(F(),V("div",{key:r.value,class:ct(["time-item",r.value==e.aprRewardsParameter?"time-item-active":""]),onClick:d=>e.aprRewardsParameter=r.value},se(r.label),11,fn))),128))])]),s("div",gn,[s("span",null,se(("addCommom"in e?e.addCommom:fe(Le))(("decimalUi"in e?e.decimalUi:fe(ge))(e.before7dContractPriceLowest,6)))+" - "+se(("addCommom"in e?e.addCommom:fe(Le))(("decimalUi"in e?e.decimalUi:fe(ge))(e.before7dContractPriceHighest,6))),1)])])]),s("div",{class:ct(["apr-and-price",e.positionError&&e.poolInfo?"padding-apr-and-price":""])},[s("div",pn,[ze(S,{lever:e.lever},null,8,["lever"])]),ze(ee,{min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direction,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["min","max","from-coin","to-coin","direct","default-min-price","default-max-price","pool-info","loading","current-price-tab","onOnChangeMinPrice","onOnChangeMaxPrice"]),e.positionError&&e.poolInfo?(F(),V("div",bn,[s("img",{src:("importIcon"in e?e.importIcon:fe(ht))("/image/icon-tips-error@2x.png"),alt:""},null,8,hn),s("p",kn,se(e.$t("tips.positionError")),1)])):ie("",!0)],2)])}const Ht=rt(Io,[["render",wn]]),yn=at({components:{NewLiquidityTitle:Ft,NewLiquidityAssetsCard:Ut,NewLiquidityDepositRatio:xt},setup(){const{t:e,locale:v}=$t(),ke=yt(),ue=$(()=>ke),B=$(()=>ue.value.chainName),_e=It(),j=$(()=>_e),z=no(),S=$(()=>z),ee=wt(),i=$(()=>{let o=null;for(const c in j.value.poolsObj){const g=j.value.poolsObj[c];g.address==ee.query.poolAddress&&(console.log(g,"p===>"),o=g)}return o}),I=O(!1),te=O(!1),Pe=$(()=>ue.value.theme),Ce=async(o,c)=>{k.value=o.needReverse?o.token_b:o.token_a,b.value=o.needReverse?o.token_a:o.token_b,y.value="",C.value=""},w=$(()=>S.value.assets&&k.value&&S.value.assets[k.value.address]?_t(S.value.assets[k.value.address].balance,k.value.decimals):"0"),H=$(()=>S.value.assets&&b.value&&S.value.assets[b.value.address]?_t(S.value.assets[b.value.address].balance,b.value.decimals):"0"),n=o=>{o==="fromCoin"?(ye.value=!0,B.value==="Aptos"?y.value=Number(w.value)>0?k.value.symbol=="APT"?new a(Number(w.value)).sub(new a(.1)).lt(new a(0))?"0":new a(Number(w.value)).sub(new a(.1)).toString():String(w.value):"":y.value=Number(w.value)>0?k.value.symbol=="SUI"?new a(Number(w.value)).sub(new a(.05)).lt(new a(0))?"0":new a(Number(w.value)).sub(new a(.05)).toString():String(w.value):""):(ye.value=!1,B.value==="Aptos"?C.value=Number(H.value)>0?b.value.symbol=="APT"?new a(Number(H.value)).sub(new a(.1)).lt(new a(0))?"0":new a(Number(H.value)).sub(new a(.1)).toString():String(H.value):"":C.value=Number(H.value)>0?b.value.symbol=="SUI"?new a(Number(H.value)).sub(new a(.05)).lt(new a(0))?"0":new a(Number(H.value)).sub(new a(.05)).toString():String(H.value):"")},r=o=>{o==="fromCoin"?(ye.value=!0,y.value=Number(w.value)>0?ft(new a(Number(w.value)).div(2).toString(),k.value.decimals).toString():""):(ye.value=!1,C.value=Number(H.value)>0?ft(new a(Number(H.value)).div(2).toString(),b.value.decimals).toString():"")},d=O(),X=O(),R=O(),G=O(!1),le=o=>{var c,g,ae,U;d.value=o,o==="fromCoin"?(X.value=((c=b.value)==null?void 0:c.address)||"",R.value=ee.query.actions=="new-position"?(g=k.value)==null?void 0:g.address:i.value.needReverse?i.value.token_b.address:i.value.token_a.address):(X.value=((ae=k.value)==null?void 0:ae.address)||"",R.value=ee.query.actions=="new-position"?(U=b.value)==null?void 0:U.address:i.value.needReverse?i.value.token_a.address:i.value.token_b.address),G.value=!0,console.log(G.value,"==>showCoinSelect.value ")},we=o=>{var ae,U,ne,re,Y,K,W,be;const c=i.value.needReverse?i.value.token_b:i.value.token_a,g=i.value.needReverse?i.value.token_a:i.value.token_b;d.value==="fromCoin"?(((ae=k.value)==null?void 0:ae.address)===(c==null?void 0:c.address)||!((U=k.value)!=null&&U.address)?(b.value&&o.address.toLowerCase()===((ne=b)==null?void 0:ne.value.address.toLowerCase())&&(b.value=null),k.value=o):(k.value&&o.address.toLowerCase()===((re=k)==null?void 0:re.value.address.toLowerCase())&&(k.value=null),b.value=o),ee.query.action||(ee.query.fee="")):((Y=b.value)==null?void 0:Y.address)===(g==null?void 0:g.address)||!((K=b.value)!=null&&K.address)?(k.value&&o.address.toLowerCase()===((W=k)==null?void 0:W.value.address.toLowerCase())&&(k.value=null),b.value=o):(b.value&&o.address.toLowerCase()===((be=b)==null?void 0:be.value.address.toLowerCase())&&(b.value=null),k.value=o),G.value=!1},p=$(()=>ue.value.chainName?kt(ue.value.chainName):{}),P=$(()=>ue.value.slippage),N=O(),pe=async()=>{var Ue,Ae,$e,Be;if(De.value)return console.log("跳出"),!1;if(!M.value&&!T.value)return!1;if(!y.value&&!C.value&&!M.value&&!T.value)return;const o=i.value||{};if(Ne(o))return;const{TickUtil:c,TickMath:g,getNearestTickByTick:ae}=p.value,U=o==null?void 0:o.token_a.decimals,ne=o==null?void 0:o.token_b.decimals;let re,Y,K,W,be,Ie,Xe,Ze,ve=o==null?void 0:o.current_tick_index,Z;if(o.token_a.address.toLowerCase()===k.value.address.toLowerCase()&&o.token_b.address.toLowerCase()===b.value.address.toLowerCase()?Z=!0:Z=!1,M.value==="0"&&T.value==="∞")K=c.getMinIndex(Number(o.tickSpacing)),W=c.getMaxIndex(Number(o.tickSpacing)),be=g.tickIndexToSqrtPriceX64(K),Ie=g.tickIndexToSqrtPriceX64(W),console.log(K,W,"#######updateAmounts 513");else if(x.value=="custom"){console.log(Z,"===>directs1866"),Z?(re=M.value,Y=T.value):(re=T.value!=="∞"?new a(1).div(T.value).toString():1/0,Y=new a(1).div(M.value).toString());try{Xe=new a(re).equals(new a(0))?-443636:g.priceToTickIndex(new a(re),U,ne)}catch{Xe=-443636}try{Ze=g.priceToTickIndex(new a(Y),U,ne)}catch{Ze=443636}console.log("1113###updateAmounts###min###",re),console.log("1113###updateAmounts###max###",Y),console.log("1113###updateAmounts###minTick###",Xe),console.log("1113###updateAmounts###maxTick###",Ze),K=ae(Xe,Number(o.tickSpacing),!0),W=ae(Ze,Number(o.tickSpacing),!0),console.log("1113###updateAmounts###tick_lower###",K),console.log("1113###updateAmounts###tick_upper###",W);try{be=g.priceToSqrtPriceX64(new a(re),U,ne)}catch{(Y===1/0||Y==="∞")&&(be=g.tickIndexToSqrtPriceX64(c.getMinIndex(Number(o.tickSpacing))))}try{Ie=g.priceToSqrtPriceX64(new a(Y),U,ne)}catch{console.log("0523###test###max###",Y),(Y===1/0||Y==="∞")&&(console.log("0523###test###max###11111"),Ie=g.tickIndexToSqrtPriceX64(c.getMaxIndex(Number(o.tickSpacing))))}console.log("0518###pre###tick_lower###",K,W,ve),console.log("0518###pre###tick_upper###",W)}else K=(Ue=Ge.value[x.value])==null?void 0:Ue.lower,W=(Ae=Ge.value[x.value])==null?void 0:Ae.upper,be=g.tickIndexToSqrtPriceX64(K),Ie=g.tickIndexToSqrtPriceX64(W);if(console.log("1116###updateAmounts###tick_lower####",K),console.log("1116###updateAmounts###tick_upper####",W),console.log("1116###updateAmounts###currentTickIndex####",ve),T.value!=="∞"&&K>=W){I.value=!0,y.value="",te.value=!0,C.value="";return}if(console.log(W,ve,K,"1922"),T.value==="∞"||ve>=K&&ve<W){I.value=!1,te.value=!1;let he;if(y.value||C.value){if(ye.value){const ut=new a(y.value).mul(Math.pow(10,k.value.decimals)).toString();he=new je(ut)}else{const ut=new a(C.value).mul(Math.pow(10,b.value.decimals)).toString();he=new je(ut)}console.log(Z,"======>directs"),g.tickIndexToSqrtPriceX64(i.value.current_tick_index);const{liquidityAmount:Ee,tokenMaxA:tt,tokenMaxB:ot,tokenMaxAOrigin:Et,tokenMaxBOrigin:Dt}=p.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:o.token_a,tokenB:o.token_b,lowerTick:K,upperTick:W,coinAmount:he,iscoinA:Z?ye.value:!ye.value,roundUp:!0,slippage:Number(P.value)/100,curSqrtPrice:new je(i.value.current_sqrt_price)});N.value={liquidityAmount:Ee,tokenMaxA:tt,tokenMaxB:ot,tokenMaxAOrigin:Et,tokenMaxBOrigin:Dt},console.log(tt,ot,"preAdd"),Z?ye.value?C.value=Number(ot)>0?ot:"":y.value=Number(tt)>0?tt:"":ye.value?C.value=tt:y.value=ot}}else if(ve>=W){if(Z?y.value="":C.value="",I.value=Z,te.value=!Z,y.value||C.value){let he;if(Z){const Ee=new a(C.value).mul(Math.pow(10,($e=b.value)==null?void 0:$e.decimals)).toString();he=new je(Ee),N.value={liquidityAmount:p.value.estimateLiquidityForCoinB(be,Ie,he),tokenMaxA:0,tokenMaxB:C.value}}else{const Ee=new a(y.value).mul(Math.pow(10,(Be=k.value)==null?void 0:Be.decimals)).toString();he=new je(Ee),N.value={liquidityAmount:p.value.estimateLiquidityForCoinB(be,Ie,he),tokenMaxA:0,tokenMaxB:y.value}}}}else if(ve<K){if(I.value=!Z,te.value=Z,Z?C.value="":y.value="",y.value||C.value){let he;if(Z){const Ee=new a(y.value).mul(Math.pow(10,k.value.decimals)).toString();he=new je(Ee),N.value={liquidityAmount:p.value.estimateLiquidityForCoinA(be,Ie,he),tokenMaxA:y.value,tokenMaxB:0}}else{const Ee=new a(C.value).mul(Math.pow(10,b.value.decimals)).toString();he=new je(Ee),N.value={liquidityAmount:p.value.estimateLiquidityForCoinA(be,Ie,he),tokenMaxA:C.value,tokenMaxB:0}}}}else I.value=!0,y.value="",te.value=!0,C.value=""};Re(()=>i.value,(o,c)=>{console.log(c,"===>oldVal"),console.log(o,"===>newVal"),(!c&&o&&!Ne(o)||c&&o&&c.address!==o.address)&&(console.log("池子信息"),Ce(o,!c||o.address!==c.address)),o&&!Ne(o)&&pe()},{immediate:!0}),Re(y,(o,c)=>{console.log(y,"===>fromCoinAmount"),o==""&&ye.value&&(C.value=""),o&&ye.value&&!De.value&&pe()}),Re(C,(o,c)=>{console.log(o,"===>>>>newValsda"),o==""&&!ye.value&&(y.value=""),o&&!ye.value&&!De.value&&pe()}),Re(()=>qe.value,(o,c)=>{pe()}),Re(()=>[k.value,b.value],([o,c])=>{o&&c&&(I.value=!1,te.value=!1)});const h=O("--"),A=$(()=>j.value.RATES),E=()=>{const o=A.value&&A.value[k.value.address]&&A.value[k.value.address].price,c=A.value&&A.value[b.value.address]&&A.value[b.value.address].price;if(o&&c){const g=new a(y.value>0?y.value:0).mul(o),ae=new a(C.value>0?C.value:0).mul(c),U=g.add(ae).toNumber();h.value=U>0&&U<.01?"<$0.01":"$"+Le(U,2)}else h.value="--"};Re(()=>[y.value,C.value,De.value],([o,c,g])=>{(o||c)&&!g?E():(!o||!c)&&!g&&(h.value="--")},{immediate:!0}),Re(()=>h,o=>{console.log(o,"71911111")},{immediate:!0});const D=O(),L=async()=>{var Z,Ue;if(!M.value&&!T.value)return!1;if(!y.value&&!C.value&&!M.value&&!T.value)return;const o=i.value;if(Ne(o))return;const{TickUtil:c,TickMath:g,getNearestTickByTick:ae}=p.value,U=o==null?void 0:o.token_a.decimals,ne=o==null?void 0:o.token_b.decimals;let re,Y,K,W,be,Ie,Xe;if(o.token_a.address.toLowerCase()===k.value.address.toLowerCase()&&o.token_b.address.toLowerCase()===b.value.address.toLowerCase()?Xe=!0:Xe=!1,M.value==="0"&&T.value==="∞")K=c.getMinIndex(Number(o.tickSpacing)),W=c.getMaxIndex(Number(o.tickSpacing));else if(x.value=="custom"){Xe?(re=Number(M.value),Y=Number(T.value)):(re=new a(1).div(T.value).toString(),Y=new a(1).div(M.value).toString());try{be=re==0?-443636:g.priceToTickIndex(new a(re),U,ne)}catch{be=-443636}try{Ie=g.priceToTickIndex(new a(Y),U,ne)}catch{Ie=443636}K=ae(be,Number(o.tickSpacing),!0),W=ae(Ie,Number(o.tickSpacing),!0)}else K=(Z=Ge.value[x.value])==null?void 0:Z.lower,W=(Ue=Ge.value[x.value])==null?void 0:Ue.upper;const Ze=A.value[o==null?void 0:o.token_a.address].price,ve=A.value[o==null?void 0:o.token_b.address].price;qe.value?new je(o.current_sqrt_price):new je(1/o.current_sqrt_price),console.log(qe.value,"===>direction.value"),console.log(o,"poolInfos===>"),console.log(K,W,"####tick_lower tick_upper 889"),console.log(h.value,"liquidityTotalAmount.value");try{const{amountA:Ae,amountB:$e,tokenAmountsInfo:Be}=await p.value.estCoinAmountsFromTotalAmount({lowerTick:K,upperTick:W,decimalsA:U,decimalsB:ne,curSqrtPrice:new je(o.current_sqrt_price),totalAmount:h.value.replace(/[^\d.]/g,""),tokenPriceA:Ze,tokenPriceB:ve});console.log(Ae,$e,"###estCoinAmountsFromTotalAmount 844"),console.log(o.needReverse,qe.value,"===>849"),D.value=Be,o.needReverse?qe.value?(y.value=Ae,C.value=$e):(y.value=$e,C.value=Ae):(y.value=Ae,C.value=$e)}catch(Ae){console.log(Ae,"e===>")}};Re([M,T],([o,c])=>{console.log(o,c,"==>minPrice,maxPrice"),De.value?De.value&&L():pe(),c!=="∞"&&Number(o)!==0&&Number(c)!==0&&Number(o)>=Number(c)?Ye.value=!0:Ye.value=!1,Number(o)==0&&Number(c)==0&&Ve.value&&(Ye.value=!0,console.log("价格区间错误"))},{deep:!0,immediate:!0});const xe=o=>{console.log(o,"e");const c=o.replace(/[^\d.]/g,""),g="$"+Le(c);De.value=!0,h.value=g,c>0?L():(y.value="",C.value="")},_=O(!1),{setTransactionTxid:oe,setTransactionDesc:Ke,setIsShowWaiting:Me,setIsShowSuccess:lt,setPositiomNum:et,setIsShowRejected:t}=ke,m=co(),f=$(()=>j.value.currentPositionInfo),q=O(!1),J=async o=>{var be,Ie,Xe,Ze;console.log(i.value,"===> poolInfo.value"),_.value=!1,j.value.currentPositionInfo={},oe(""),Ke(e("tips.increaseLiquiditySuccess",{from:I.value?"":`${Le(y.value)} ${(be=k.value)==null?void 0:be.symbol}`,and:!I.value&&!te.value?"and":"",to:te.value?"":`${Le(C.value)} ${(Ie=b.value)==null?void 0:Ie.symbol}`})),Me(!0);const c=qe.value?ye.value:!ye.value;let g,ae,U,ne,re,Y;const K=i.value.token_a.decimals,W=i.value.token_b.decimals;if(M.value==="0"&&T.value==="∞")U=p.value.TickUtil.getMinIndex(Number(i.value.tickSpacing)),ne=p.value.TickUtil.getMaxIndex(Number(i.value.tickSpacing));else if(x.value=="custom"){qe.value?(g=M.value,ae=T.value):(g=new a(1).div(T.value).toString(),ae=new a(1).div(M.value).toString()),console.log("0519###toAdd###min###",g),console.log("0519###toAdd###max###",ae),console.log("0519###toAdd###minPrice.value###",M.value),console.log("0519###toAdd###maxPrice.value###",T.value);try{re=g==0?p.value.TickUtil.getMinIndex(Number(i.value.tickSpacing)):p.value.TickMath.priceToTickIndex(new a(g),K,W)}catch{re=p.value.TickUtil.getMinIndex(Number(i.value.tickSpacing))}try{Y=p.value.TickMath.priceToTickIndex(new a(ae),K,W)}catch{Y=p.value.TickUtil.getMaxIndex(Number(i.value.tickSpacing))}U=p.value.getNearestTickByTick(re,Number(i.value.tickSpacing),!0),ne=p.value.getNearestTickByTick(Y,Number(i.value.tickSpacing),!0)}else U=Ge.value[x.value].lower,ne=Ge.value[x.value].upper;console.log(U,ne,"####tick_lower tick_upper 889"),console.log(i.value,"==>poolInfo.value.curSqrtPrice"),console.log("1202###Add###tick_lower####",U),console.log("1202###Add###tick_upper####",ne),console.log("1202###Add###poolInfo.value####",i.value);try{let ve;De.value?ve=await p.value.getCreateAddLiquidityPayload({pool:i.value,curSqrtPrice:new je(i.value.current_sqrt_price),tickLower:U,tickUpper:ne,slippage:Number(P.value)/100,tokenAmounts:D.value}):ve=await p.value.getAddLiquidityTransactionPayload({pool:{poolAddress:i.value.poolAddress,token_a:i.value.token_a,token_b:i.value.token_b},amount:ye.value?y.value:C.value,fix_amount_a:c,tick_lower:U,tick_upper:ne,index:0,slippage:Number(P.value)/100,roundUp:!0,collect_fee:!1,curSqrtPrice:new je(i.value.current_sqrt_price)}),console.log(ve,"payload===?");let Z;if(B.value==="Aptos")Z=await S.value.currentWallet.signAndSubmitTransaction(ve);else{const Ue=await S.value.currentWallet.signAndExecuteTransactionBlock(ve);Z=p.value.handleTx(Ue)}if(console.log("0410###tx###",Z),Z&&Z.hash){oe(Z.hash),Me(!1),lt(!0);let Ue;i.value.needReverse?i.value.token_a.address.toLowerCase()===k.value.address.toLowerCase()&&i.value.token_b.address.toLowerCase()===b.value.address.toLowerCase()?Ue=!1:Ue=!0:i.value.token_a.address.toLowerCase()===k.value.address.toLowerCase()&&i.value.token_b.address.toLowerCase()===b.value.address.toLowerCase()?Ue=!0:Ue=!1,console.log(Ue,"===>directs");const Ae={title:"Supplied",desc:e("tips.addLiquiditySuccessText",{from:I.value?"":`${Le(y.value)} ${(Xe=k.value)==null?void 0:Xe.symbol}`,and:!I.value&&!te.value?"and":"",to:te.value?"":`${Le(C.value)} ${(Ze=b.value)==null?void 0:Ze.symbol}`}),hash:Z.hash,tit:"Position Created",icon:"icon-icon-Position-Created"};B.value!=="Aptos"&&(Ae.res=Z.res),p.value.showTransitionPending(Ae);const $e=await p.value.watchTransaction(Ae,!0);if($e.status){if(lt(!1),j.value.setCurrentPositionLoading(!0),q.value=!0,console.log($e.nftInfo,"===> watchInfo.nftInfo"),B.value==="Aptos"){if(await j.value.setCurrentPositionInfo($e.nftInfo[0].data.id.creator,$e.nftInfo[0].data.id.collection,$e.nftInfo[0].data.name,B.value),o)try{await m.subscribePosition({pool_address:f.value.poolAddress,position_index:f.value.index},f.value.nftHash)}catch(Be){console.log(Be,"e")}}else{const Be=$e.nftInfo,he=await Ct(2e3);if(await j.value.setCurrentPositionInfo(Be==null?void 0:Be.pool,"","",B.value,Be==null?void 0:Be.position),await Ct(1e3),console.log("0529###nftInfo###",Be),console.log("0529###currentPositionInfo.value.index###",f.value.index),o)try{await m.subscribePosition({pool_address:f.value.poolAddress,position_index:f.value.index},f.value.nftHash)}catch(Ee){console.log(Ee)}}setTimeout(()=>{_e.updateCurrentPools(i.value.poolAddress,B.value),p.value.getAccount(S.value.address)},3e3),setTimeout(async()=>{Tt(p,i)},3e3)}et()}else Me(!1),t(!0);y.value="",C.value=""}catch(ve){y.value="",C.value="",console.log("0330###Add liquidity Error###",ve),Me(!1),t(!0)}},Q=$(()=>!y.value&&!C.value?(console.log("addLiquidityBtnDisabled11111"),!0):Number(y.value)>Number(w.value)||Number(C.value)>Number(H.value)?(console.log("addLiquidityBtnDisabled22222"),!0):Oe.value!==e("button.addLiquidity")&&Oe.value!==e("newAdd.preview")?(console.log("addLiquidityBtnDisabled33333###",Oe.value),!0):i.value&&i.value&&i.value.is_pause?(console.log("addLiquidityBtnDisabled44444"),!0):Number(y.value)<=0&&Number(C.value)<=0||!I.value&&Number(y.value)==0||!te.value&&Number(C.value)==0),ce=$(()=>!k.value||!b.value),Oe=$(()=>i.value&&i.value.is_pause?"Pool Closed":!k.value||!b.value||ce.value?e("modal.selectTokenModalTitle"):Number(y.value)>Number(w.value)?e("button.insufficientBalance",{name:k.value.symbol}):Number(C.value)>Number(H.value)?e("button.insufficientBalance",{name:b.value.symbol}):!Number(y.value)&&!Number(C.value)?e("button.enterAmount"):T.value!=="∞"&&Number(M.value)>=Number(T.value)?e("newAdd.invalidRange"):e("button.addLiquidity")),Te=O({}),Se=O({}),He=O(!1),We=(o,c)=>{console.log(d.value,"===>currentCoinKey.value"),console.log(o);const g=localStorage.getItem(o.address);console.log(j.value.tokensObj,"===>pools.value.tokensObj"),console.log(g,"===>coinLocak"),j.value.tokensObj&&j.value.tokensObj[o.address]&&j.value.tokensObj[o.address].isSelfBuilt&&!g&&(c=="fromCoin"&&(Te.value=o),c=="toCoin"&&(Se.value=o),He.value=!0)};Re(()=>[k.value,b.value],([o,c])=>{o&&!Ne(o)&&We(o,"fromCoin"),c&&!Ne(c)&&We(c,"toCoin")},{immediate:!0});const l=Qt(),u=()=>{B.value!=="Aptos"?l.push("/pool/list"):l.push("/pools")},Fe=o=>{De.value,J(o)},de=()=>{ee.query.action!=="create-pool"&&ee.query.actions!=="new-position"&&(Tt(p,i),pe(),_e.updateCurrentPools(i.value.poolAddress,B.value)),_e.setPoolConfigList(B.value,ue.value.filterCoinsObj)},me=$(()=>{var g,ae,U,ne,re,Y;const o=(U=A.value[(ae=(g=k)==null?void 0:g.value)==null?void 0:ae.address])==null?void 0:U.price,c=(Y=A.value[(re=(ne=b)==null?void 0:ne.value)==null?void 0:re.address])==null?void 0:Y.price;return!!(o&&c)});return Re(()=>[ee,j.value.tokensObj],([o,c])=>{var g;c&&!Ne(c)&&(b.value||(b.value=j.value.tokensObj[(g=o==null?void 0:o.query)==null?void 0:g.toCoin]))},{immediate:!0,deep:!0}),{positionError:Ye,decimalUi:ge,poolInfo:i,fromCoinAmount:y,toCoinAmount:C,fromCoin:k,toCoin:b,theme:Pe,showFromCoinLock:I,showToCoinLock:te,fromCoinBlance:w,toCoinBlance:H,maxBtnSelect:n,halfBtnSelect:r,fixedFromCoin:ye,openCoinSelect:le,currentCoinKey:d,existingCoins:X,lastSelectCoin:R,showCoinSelect:G,onCoinSelect:we,liquidityTotalAmount:h,toggle:jt,onInput:xe,isInputTotalAmount:De,isViewDetail:q,addLiquidityBtnDisabled:Q,addLiquidityBtnText:Oe,isShowTokenWarning:He,chainName:B,closeTokenWarning:u,warningFromCoin:Te,warningToCoin:Se,isShowLiquidityModal:_,currentPrice:Ve,currentPriceReverse:it,currentPriceTab:x,minPrice:M,maxPrice:T,toAdd:J,direction:qe,wallet:S,getAddLiquidityType:Fe,clickRefresh:de,isShowtotalAmount:me}}});const Cn={class:"new-liquidity-right"},_n={class:"deposit-title"},Pn={class:"card-container"},Tn={key:0,class:"lock"},Sn={class:"card-item"},In={class:"card-item"},An={key:0,class:"total-amount"},Ln=s("span",null,"Total Amount",-1);function Nn(e,v,ke,ue,B,_e){const j=Ft,z=io,S=Ut,ee=ro,i=xt,I=Yt,te=lo,Pe=so,Ce=uo;return F(),V("div",Cn,[s("div",_n,[ze(j,{"pool-info":e.poolInfo,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClickRefresh"])]),s("div",Pn,[e.positionError?(F(),V("div",Tn,[ze(z)])):ie("",!0),s("div",Sn,[ze(S,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":v[0]||(v[0]=w=>e.fromCoinAmount=w),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:v[1]||(v[1]=w=>e.maxBtnSelect("fromCoin")),onOnHalf:v[2]||(v[2]=w=>e.halfBtnSelect("fromCoin")),onOnInput:v[3]||(v[3]=w=>{e.fromCoinAmount=w,e.fixedFromCoin=!0,e.isInputTotalAmount=!1}),onOnSelect:v[4]||(v[4]=w=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&!e.positionError?(F(),Je(ee,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo},null,8,["from-coin","to-coin","pool-info"])):ie("",!0)]),s("div",In,[ze(S,{modelValue:e.toCoinAmount,"onUpdate:modelValue":v[5]||(v[5]=w=>e.toCoinAmount=w),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:v[6]||(v[6]=w=>e.maxBtnSelect("toCoin")),onOnHalf:v[7]||(v[7]=w=>e.halfBtnSelect("toCoin")),onOnInput:v[8]||(v[8]=w=>{e.toCoinAmount=w,e.fixedFromCoin=!1,e.isInputTotalAmount=!1}),onOnSelect:v[9]||(v[9]=w=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&!e.positionError?(F(),Je(ee,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo},null,8,["from-coin","to-coin","pool-info"])):ie("",!0)]),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.theme=="default"?(F(),V("img",{key:1,class:"add",src:mo,alt:"",onClick:v[10]||(v[10]=(...w)=>e.toggle&&e.toggle(...w))})):ie("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.theme!=="default"?(F(),V("img",{key:2,class:"add",src:vo,alt:"",onClick:v[11]||(v[11]=(...w)=>e.toggle&&e.toggle(...w))})):ie("",!0)]),e.isShowtotalAmount?(F(),V("div",An,[Ln,s("span",null,se(e.liquidityTotalAmount)+" ",1)])):ie("",!0),ze(i,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"fixed-from-coin":e.fixedFromCoin,"is-input-total-amount":e.isInputTotalAmount,"min-price":e.minPrice,"max-price":e.maxPrice,"current-price-tab":e.currentPriceTab,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","fixed-from-coin","is-input-total-amount","min-price","max-price","current-price-tab","current-price","current-price-reverse"]),ze(I,{class:"add-liquidity-btn",disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,onClick:v[12]||(v[12]=w=>e.wallet.connected?e.isShowLiquidityModal=!0:e.wallet.setIsShowWalletModal(!0))},{default:bt(()=>[Rt(se(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),e.showCoinSelect?(F(),Je(te,{key:1,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:v[13]||(v[13]=w=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):ie("",!0),e.isViewDetail?(F(),Je(Pe,{key:2,"pool-info":e.poolInfo,onOnClose:v[14]||(v[14]=w=>e.isViewDetail=!1)},null,8,["pool-info"])):ie("",!0),e.isShowLiquidityModal?(F(),Je(Ce,{key:3,"pool-info":e.poolInfo,title:e.$t("button.addLiquidity"),"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"current-price-tab":e.currentPriceTab,"min-price":e.minPrice,"max-price":e.maxPrice,"show-from-coin-lock":e.showFromCoinLock,"show-to-coin-lock":e.showToCoinLock,"current-direct":e.direction,"is-increase":!1,onToAdd:e.getAddLiquidityType,onOnClose:v[15]||(v[15]=w=>e.isShowLiquidityModal=!1)},null,8,["pool-info","title","from-coin-amount","to-coin-amount","from-coin","to-coin","fixed-from-coin","current-price","current-price-reverse","current-price-tab","min-price","max-price","show-from-coin-lock","show-to-coin-lock","current-direct","onToAdd"])):ie("",!0)])}const Xt=rt(yn,[["render",Nn]]),qn=at({components:{NewLiquidityLeft:Ht,NewLiquidityRight:Xt},setup(){Bt(()=>{ao()});const e=wt();return{tickList:Qe,route:e}}});const Mn={key:0,class:"loading-spin-liquidity loading-global"},$n={class:"privide-liquidity"};function Bn(e,v,ke,ue,B,_e){var ee,i;const j=Mt,z=Ht,S=Xt;return F(),V(pt,null,[!e.tickList&&((i=(ee=e.route)==null?void 0:ee.query)!=null&&i.poolAddress)?(F(),V("div",Mn,[ze(j)])):ie("",!0),s("div",$n,[ze(z),ze(S)])],64)}const vi=rt(qn,[["render",Bn],["__scopeId","data-v-fc58011a"]]);export{vi as default};
