import{a6 as A,r as i,N as S,a as B,D as u,o as T,f as j,j as d,i as O,w as C,h as m,v as g,u as p,B as G}from"./entry.d2fe8287.js";import{P as f,u as I}from"./index.3377e62e.js";import{u as x}from"./fetchFun.8ebdc33e.js";import{u as y}from"./token.926b420c.js";import{u as E}from"./useToken.3776f25c.js";import"./decimal.0bdeb344.js";const b=A("useSuiUserStore",{state:()=>({assetsObj:{}}),getters:{getBalance:t=>o=>{var n,a,e,s;return console.log("ðŸš€ ~ file: user.ts:11 ~ coinType:",o),console.log("ðŸš€ ~ file: user.ts:11 ~ state.assetsObj:",t.assetsObj),console.log("ðŸš€ ~ file: user.ts:11 ~ state.assetsObj?.[coinType]?.balance:",(a=(n=t.assetsObj)==null?void 0:n[o])==null?void 0:a.balance),((s=(e=t.assetsObj)==null?void 0:e[o])==null?void 0:s.balance)||""}},actions:{setAssetsObj(t){this.assetsObj=t}}});function N(){const t=x(),{setAssetsObj:o}=b();return{getAssets:async a=>{try{if(!a)throw Error("Account is empty");const e=await t.clmmSdk.getOwnerCoinAssets(a);if(console.log("ðŸš€ ~ file: useGetAssets.ts:9 ~ getAssets ~ list:",e),(e==null?void 0:e.length)>0){const s=Object.fromEntries(e.map(c=>{var l;return[(l=f(c.coinAddress))==null?void 0:l.full_address,c]}));console.log("ðŸš€ ~ file: useGetAssets.ts:10 ~ getAssets ~ assets:",s),s&&o(s)}}catch(e){console.log("ðŸš€ ~ file: useGetAssets.ts:10 ~ getAssets ~ error:",e),o({})}}}}function w(t){const o=b(),n=i("");return S(()=>{n.value=o.getBalance(f(t).full_address)}),n}function k(t){const{getTokenBySdk:o}=E(),n=y(),a=i(),e=async s=>{try{const c=await o(s);console.log("ðŸš€ ~ file: useGetTokenInfo.ts:14 ~ getTokenFromSdk ~ info:",c),a.value=c}catch(c){console.log("ðŸš€ ~ file: useGetTokenInfo.ts:17 ~ getTokenFromSdk ~ error:",c),a.value=void 0}};return S(()=>{const s=n.getToken(f(t).full_address);s?(console.log("ðŸš€ ~ file: useGetTokenInfo.ts:28 ~ watchEffect ~ info:",s),a.value=s):e(f(t).full_address)}),a}const F={class:"swap-container"},q=B({__name:"swap",setup(t){const{getAssets:o}=N(),n=I();u(()=>[n.address],([r])=>{console.log("ðŸš€ ~ file: swap.vue:20 ~ watch ~ address :",r)},{immediate:!0,deep:!0});const a=()=>{o(n.address)},e=i("0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"),s=i("0xa99b8952d4f7d947ea77fe0ecdcc9e5fc0bcab2841d6e2a5aa00c3044e5544b5::navx::NAVX"),c=w(e.value),l=w(s.value);u(()=>c,r=>{console.log("ðŸš€ ~ file: swap.vue:42 ~ watch ~ fromBalance:",r)}),u(()=>l,r=>{console.log("ðŸš€ ~ file: swap.vue:42 ~ watch ~ toBalance:",r)});const h=k(e.value),_=k(s.value);return u(()=>h,r=>{console.log("ðŸš€ ~ file: swap.vue:56 ~ watch ~ fromCoinInfo:",r)},{deep:!0,immediate:!0}),u(()=>_,r=>{console.log("ðŸš€ ~ file: swap.vue:60 ~ watch ~ toCoinInfo:",r)}),(r,U)=>{const v=G;return T(),j("div",F,[d(" this is new swap "),O(v,{onClick:a},{default:C(()=>[d("test get assets ")]),_:1}),m("p",null,"fromBalance: "+g(p(c)),1),m("p",null,"toBalance: "+g(p(l)),1)])}}});export{q as default};
