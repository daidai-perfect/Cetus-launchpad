import{_ as ro}from"./back.1469d5a6.js";import{_ as mo}from"./coin-pair-name.13e123eb.js";import{_ as vo}from"./status-block.3e14cd96.js";import{_ as co}from"./swap-setting.b2ce57aa.js";import{a as po,I as fo,r as u,C as ho,l as I,J as Io,E as ko,ah as bo,x as _o,w as V,k as wo,ab as S,N as r,i as go,O as F,Y as yo,R as K,ax as So,b as Co,o as k,e as O,q as b,f as e,t as s,H as Q,c as x,h as oo,Z as $o,$ as No,v as eo,s as qo,z as Ao,A as Po,a0 as To,ay as Bo,B as Ro,p as Lo,j as Vo,a2 as Oo}from"./entry.b2a8e1c0.js";import{p as Uo}from"./precision.ce0280e5.js";const jo=po({setup(){const{t:o,locale:d}=fo();let H=u(!1),_=u(!1);const $=u(!1),J=()=>{P(),$.value=!0,setTimeout(()=>{$.value=!1},1e3)},U=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],j=ho(),N=u(""),q=u(""),A=u(""),t=I(()=>j),a=u({}),l=u({}),n=u(t.value.currentPositionInfo||{}),M=Io(),w=I(()=>M),g=ko();bo(()=>{w.value.connected||g.push("/position-list")});const W=_o(),P=async()=>{t.value.setCurrentPositionLoading(!0);const i=g.currentRoute.value.query.token||"",p=g.currentRoute.value.query.collect||"";i&&p&&(N.value=p,q.value=g.currentRoute.value.query.address,A.value=i,t.value.setCurrentPositionInfo(q.value,N.value,A.value),n.value=t.value.currentPositionInfo)};V(()=>t.value.addressLpTokens,i=>{i&&P()},{immediate:!0}),V(()=>t.value.currentPositionInfo,i=>{i&&(n.value=t.value.currentPositionInfo,a.value=n.value.token_a,l.value=n.value.token_b,X({value:c.value/100}))});const c=u(50),m=u(0),v=u(0),T=u(0),D=wo(),no=I(()=>D),E=I(()=>D.slippage);V(c,i=>{i&&n.value&&(c.value=Math.ceil(i),X({value:c.value/100}))}),V(E,i=>{i&&n.value&&X({value:c.value/100})});const X=i=>{c.value=i.value*100;const p=n.value.token_a.decimals,R=n.value.token_b.decimals,L=n.value.tick_lower_index,f=n.value.tick_upper_index,z=K.tickIndexToSqrtPriceX64(L),h=K.tickIndexToSqrtPriceX64(f);T.value=n.value.liquidity*Number(i.value),console.log("1205###setPercent###liquidityVal.value####",T.value),console.log("1205###setPercent###positionInfo.value.liquidity####",n.value.liquidity),console.log("1205###setPercent###item.value####",i.value);const y=So.getCoinAmountFromLiquidity(new F(T.value),new F(n.value.current_sqrt_price),z,h,!0),G=Number(y.coinA.toString())/Math.pow(10,p),uo=Number(y.coinB.toString())/Math.pow(10,R);m.value=G,v.value=uo},{setIsShowSuccess:so,setIsShowRejected:Y,setIsShowWaiting:B,setTransactionDesc:io,setTransactionTxid:Z,setPositiomNum:Ae}=D,to=async()=>{var i,p,R,L;console.log(99999),_.value=!0,Z(""),io(o("tips.removeLiquidiyText",{from:r(m.value,a.value.decimals)==0?"":`${S(r(m.value,a.value.decimals))} ${a.value.symbol}`,and:r(m.value,a.value.decimals)==0||r(v.value,l.value.decimals)==0?"":"and",to:r(v.value,l.value.decimals)==0?"":`${S(r(v.value,l.value.decimals))} ${l.value.symbol}`})),B(!0);try{const f=u({});f.value={pool:{...n.value.poolInfo,coinA:n.value.token_a,coinB:n.value.token_b},position:n.value,delta_liquidity:new F(yo(T.value,0)),slippage:Number(E.value)},console.log(f.value,888999);const z=await W.getRemoveLiquidityTransactionPayload(f.value);let h;if(h=await w.value.currentWallet.signAndSubmitTransaction(z),h&&h.hash){Z(h.hash),B(!1),so(!0);const y={title:o("common.removeLiquidity"),desc:o("tips.removeSuccessText",{from:r(m.value,a.value.decimals)==0?"":`${S(r(m.value,a.value.decimals))} ${a.value.symbol}`,and:r(m.value,a.value.decimals)==0||r(v.value,l.value.decimals)==0?"":"and",to:r(v.value,l.value.decimals)==0?"":`${S(r(v.value,l.value.decimals))} ${l.value.symbol}`}),hash:h.hash,descTransactions:`Remove ${m.value} ${(i=a.value)==null?void 0:i.symbol} and ${v.value} ${(p=l.value)==null?void 0:p.symbol} 
             from the pool`,sender:w.value.address,chainName:no.value.chainName,tit:`${c.value==100?"Closed":"Modified"} Position: ${n.value.poolInfo.symbol}`,text:`Withdraw ${m.value} ${(R=a.value)==null?void 0:R.symbol} and ${v.value} ${(L=l.value)==null?void 0:L.symbol}`};W.showTransitionPending(y),await W.watchTransaction(y)&&(setTimeout(()=>{P()},3e3),setTimeout(()=>{P()},6e3),Number(c.value)==100&&g.push("/position-list"))}else B(!1),Y(!0);_.value=!1}catch(f){console.log("Remove error",f),_.value=!1,B(!1),Y(!0)}},ao=I(()=>t.value.tokensObj&&a.value.address&&t.value.tokensObj[a.value.address]&&t.value.tokensObj[a.value.address].logoURI),lo=I(()=>t.value.tokensObj&&l.value.address&&t.value.tokensObj[l.value.address]&&t.value.tokensObj[l.value.address].logoURI);return{showNum:S,fromCoinUrl:ao,toCoinUrl:lo,precision:Uo,addCommom:r,loading:_,wallet:w,toRemove:to,fromCoinAmount:m,toCoinAmount:v,pools:t,refresh:$,amountArr:U,sliderVal:c,positionInfo:n,slippage:E,importIcon:go,clickRefresh:J,isShowSwapSetting:H}}});const C=o=>(Lo("data-v-e8703c67"),o=o(),Vo(),o),Mo={class:"remove-liquidity"},Wo={class:"remove-liquidity-top"},Do={class:"remove-title"},Eo={class:"right title-right"},Xo=C(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),zo=C(()=>e("use",{"xlink:href":"#icon-icon-refresh"},null,-1)),Fo=[zo],Ho={class:"remove-liquidity-center"},Jo={class:"top"},Yo={class:"left"},Zo={class:"right"},Go={class:"fee"},Ko={class:"bottom"},Qo={class:"add-amount"},xo={class:"add-amount-header"},oe={class:"amount-list"},ee=["onClick"],ne={class:"slider-box"},se={class:"receive"},ie={class:"receiveTit"},te={class:"item"},ae={class:"left"},le=["src"],ue={class:"right"},de={class:"item"},re={class:"left"},me=["src"],ve={class:"right"},ce={class:"induction remove-liquidity-bottom"},pe={class:"item"},fe={class:"induction-text"},he={class:"induction-value"},Ie={class:"item"},ke=C(()=>e("div",{class:"induction-text"},null,-1)),be={class:"induction-value"},_e={class:"item"},we={class:"induction-text"},ge={class:"induction-value"},ye={class:"item"},Se=C(()=>e("div",{class:"induction-text"},null,-1)),Ce={class:"induction-value"},$e=C(()=>e("svg",{"aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-Remove"})],-1)),Ne={class:"loading-global"};function qe(o,d,H,_,$,J){const U=ro,j=mo,N=vo,q=To,A=Bo,t=Ro,a=co,l=Oo;return k(),O("div",Mo,[b(U),e("div",Wo,[e("div",Do,s(o.$t("common.removeLiquidity")),1),e("div",Eo,[e("div",{class:"slippage-icon",onClick:d[0]||(d[0]=n=>o.isShowSwapSetting=!0)},[Xo,e("span",null,s(o.slippage)+"%",1)]),(k(),O("svg",{"aria-hidden":"true",class:Q(o.refresh?"refresh refresh-icon ":"refresh-icon"),onClick:d[1]||(d[1]=(...n)=>o.clickRefresh&&o.clickRefresh(...n))},Fo,2))])]),e("div",Ho,[e("div",Jo,[e("div",Yo,[o.positionInfo?(k(),x(j,{key:0,"from-coin":o.positionInfo.token_a,"to-coin":o.positionInfo.token_b},null,8,["from-coin","to-coin"])):oo("",!0),e("div",Zo,[e("div",Go,s(o.positionInfo.fee)+"%",1)])]),b(N,{"current-status":o.positionInfo.currentStatus||""},null,8,["current-status"])]),e("div",Ko,[e("div",Qo,[e("div",xo,[e("span",null,s(o.$t("common.amount")),1),e("div",oe,[(k(!0),O($o,null,No(o.amountArr,(n,M)=>(k(),O("div",{key:M,class:Q(["amount-item",o.sliderVal==n.value?"amount-item-active":""]),onClick:w=>o.sliderVal=n.value},s(n.name),11,ee))),128))])]),e("div",ne,[b(q,{value:o.sliderVal,"onUpdate:value":d[2]||(d[2]=n=>o.sliderVal=n),oninput:"this.value = this.value.replace(/[^\\d.]/g,'');",suffix:"%"},null,8,["value"]),b(A,{value:o.sliderVal,"onUpdate:value":d[3]||(d[3]=n=>o.sliderVal=n)},null,8,["value"])])])])]),e("div",se,[e("div",ie,s(o.$t("newAdd.receive")),1),e("div",te,[e("div",ae,[e("img",{src:o.fromCoinUrl||o.importIcon(`/image/coins/${o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol.toLowerCase()}.png`)},null,8,le),eo(" "+s(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol),1)]),e("div",ue,s(o.showNum(o.addCommom(o.fromCoinAmount,o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.decimals))),1)]),e("div",de,[e("div",re,[e("img",{src:o.toCoinUrl||o.importIcon(`/image/coins/${o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol.toLowerCase()}.png`)},null,8,me),eo(" "+s(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol),1)]),e("div",ve,s(o.showNum(o.addCommom(o.toCoinAmount,o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.decimals))),1)])]),e("div",ce,[e("div",pe,[e("div",fe,s(o.$t("common.liquidity")),1),e("div",he,s(o.showNum(o.positionInfo.amountA))+" "+s(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol)+" \u2192 "+s(o.showNum(o.addCommom(o.precision.minus(Number(o.positionInfo.amountA),Number(o.fromCoinAmount)),o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.decimals)))+" "+s(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol),1)]),e("div",Ie,[ke,e("div",be,s(o.showNum(o.positionInfo.amountB))+" "+s(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol)+" \u2192 "+s(o.showNum(o.addCommom(o.precision.minus(Number(o.positionInfo.amountB),Number(o.toCoinAmount)),o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.decimals)))+" "+s(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol),1)]),e("div",_e,[e("div",we,s(o.$t("common.feesEarned")),1),e("div",ge,s(o.addCommom(o.positionInfo&&o.positionInfo.feeOwedA,o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.decimals)==0?0:o.showNum(o.addCommom(o.positionInfo&&o.positionInfo.feeOwedA,o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.decimals)))+" "+s(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol),1)]),e("div",ye,[Se,e("div",Ce,s(o.addCommom(o.positionInfo&&o.positionInfo.feeOwedB,o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.decimals)==0?0:o.showNum(o.addCommom(o.positionInfo&&o.positionInfo.feeOwedB,o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.decimals)))+" "+s(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol),1)])]),b(t,{disabled:o.wallet.connected?Number(o.sliderVal)==0||o.loading:!1,class:"remove-btn big-btn",onClick:d[4]||(d[4]=n=>o.wallet.connected?o.toRemove():o.wallet.setIsShowWalletModal(!0))},{default:qo(()=>[$e,e("span",null,s(o.wallet.connected?o.$t("button.remove"):o.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),o.isShowSwapSetting?(k(),x(a,{key:0,onOnClose:d[5]||(d[5]=n=>o.isShowSwapSetting=!1)})):oo("",!0),Ao(e("div",Ne,[b(l)],512),[[Po,o.pools.currentPositionLoading]])])}const Oe=Co(jo,[["render",qe],["__scopeId","data-v-e8703c67"]]);export{Oe as default};
