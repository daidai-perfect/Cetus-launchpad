import{_ as vn}from"./back.f6b47496.js";import{_ as mn}from"./refresh-icon.51f84ff3.js";import{a as He,$ as Po,z as ho,r as w,ff as pn,e as Me,l as oo,o as a,c as D,w as te,h as o,i as V,j as pe,x as i,f as m,F as we,E as So,y as $e,G as H,fg as cn,K as fn,B as _o,p as Ee,k as We,q as To,s as Fo,m as y,A as Ie,b as Vo,L as Je,C as $o,I as _e,u as T,P as Xo,S as Io,a8 as zo,N as Oo,a7 as ko,a2 as yn,a3 as gn,D as Go,O as bn}from"./entry.8c071894.js";/* empty css              */import{_ as kn,a as hn}from"./icon-error_2x.c2108c14.js";import{u as no,a as Yo}from"./autoPool.e8f3106b.js";import{a as Qe,u as fo,b as Ko,e as _n}from"./index.a960bb3c.js";import{c as Ke,a as R,o as Uo,d as Pe,b as B,p as Wo,X as $n}from"./common.7b3188ac.js";import{_ as yo}from"./token-warning.cb1558fb.js";import{_ as Zo}from"./auto-pool-apy-tips.814615a1.js";/* empty css              */import"./index.0614c8b1.js";import{i as Ze}from"./import-icon.de3e6c66.js";import{u as Ro,T as Ye,b as ge,al as Mo}from"./index.e235d647.js";/* empty css              */import{_ as Jo}from"./assets-card.a8115d11.js";import{_ as Qo}from"./coin-lock.4b140739.js";import"./decimal.a2826370.js";import{D as v}from"./decimal.765d8738.js";/* empty css              *//* empty css              */import"./useDebounceFunction.497218f4.js";import"./img-lock_2x.a28135f4.js";import"./img-lock_2x.cf302037.js";const In=He({components:{Modal:Po},setup(e,s){const{t:z,locale:E}=ho(),N=no(),P=["0.1","0.5","1"],u=w(N.slippage||.1),{setSlippage:h}=N,p=pn(),C=w(!1);function t(r,d){C.value=!1,u.value=d}function b(){h(u.value),s.emit("onClose",!1)}return{settingArr:P,changeActiveIndex:t,confirm:b,emit:p,slippage:u,t:z,isInput:C,inputChange:r=>{const d=new RegExp(/[^\d^\.]+/g);r.target.value=r.target.value.replace(d,""),u.value=r.target.value}}}}),wn=""+globalThis.__publicAssetsURL("sui-image/icon_Slippage_tolerance@2x.png");const xo=e=>(Ee("data-v-03ae0296"),e=e(),We(),e),Cn=xo(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),An={class:"setting-container"},Sn={class:"title"},Pn=xo(()=>o("img",{src:wn,alt:""},null,-1)),Tn={class:"tag-list"},Rn={key:0,src:kn,alt:""},qn={key:1,src:hn,alt:""},Nn={class:"footer"};function Ln(e,s,z,E,N,P){const u=cn,h=fn,p=_o,C=oo("Modal");return a(),D(C,{title:"Settings",class:"setting",centered:"",visible:!0,width:"400px",onCancel:s[3]||(s[3]=t=>e.$emit("onClose"))},{closeIcon:te(()=>[Cn]),footer:te(()=>[o("div",Nn,[V(p,{type:"cancel",class:"cancel-btn",onClick:s[2]||(s[2]=t=>e.$emit("onClose"))},{default:te(()=>[pe(i(e.$t("button.cancel")),1)]),_:1}),V(p,{class:"confirmbtn",disabled:Number(e.slippage)==0||Number(e.slippage)>1||Number(e.slippage)<.01,onClick:e.confirm},{default:te(()=>[pe(i(e.$t("button.confirm")),1)]),_:1},8,["disabled","onClick"])])]),default:te(()=>[o("div",An,[o("div",Sn,[Pn,o("span",null,i(e.$t("modal.slippageTolerance")),1)]),o("div",Tn,[(a(!0),m(we,null,So(e.settingArr,(t,b)=>(a(),D(u,{key:b,class:$e(!e.isInput&&t==e.slippage?"tag-active":""),onClick:n=>e.changeActiveIndex(b,t)},{default:te(()=>[pe(i(t)+"% ",1)]),_:2},1032,["class","onClick"]))),128)),V(u,{class:$e(["input-tag",e.isInput?"tag-active":""]),onClick:s[1]||(s[1]=t=>e.isInput=!0)},{default:te(()=>[V(h,{value:e.slippage,"onUpdate:value":s[0]||(s[0]=t=>e.slippage=t),placeholder:"",suffix:"%",class:$e(["slippage-input",Number(e.slippage)>.5&&Number(e.slippage)<1?"slippage-input-waring":Number(e.slippage)>1?"slippage-input-error":""]),onChange:e.inputChange},null,8,["value","class","onChange"])]),_:1},8,["class"])])]),Number(e.slippage)>.5&&Number(e.slippage)<1||Number(e.slippage)>1?(a(),m("div",{key:0,class:$e(["slippage-hint",Number(e.slippage)>.5&&Number(e.slippage)<1?"slippage-hint-waring":Number(e.slippage)>1?"slippage-hint-error":""])},[Number(e.slippage)>.5&&1>=Number(e.slippage)?(a(),m("img",Rn)):H("",!0),Number(e.slippage)>1?(a(),m("img",qn)):H("",!0),o("p",null,i(Number(e.slippage)>.5&&1>=Number(e.slippage)?e.$t("tips.slippageTolerance2"):Number(e.slippage)>1?e.$t("tips.slippageTolerance1"):""),1)],2)):H("",!0)]),_:1})}const Bn=Me(In,[["render",Ln],["__scopeId","data-v-03ae0296"]]),Dn=He({props:{poolInfo:{type:Object,default:()=>({})}},setup(e,s){const z=w(!1),E=w(null),N=w(0);let P=w(!1);const u=w(20);Qe();const h=no(),p=w(!1);To(()=>{}),Fo(()=>{clearInterval(E.value)});const C=()=>{P.value=!1,E.value=setInterval(()=>{var c;p.value||N.value<u.value&&(N.value+=1,N.value===u.value&&((c=e==null?void 0:e.poolInfo)!=null&&c.address&&n(),N.value=0))},1e3)},t=y(()=>h.slippage),b=()=>{s.emit("clearAll")},n=()=>{P.value||(P.value=!0,N.value=0,s.emit("clickRefresh"),setTimeout(()=>{P.value=!1},1e3))};Ie(()=>e.poolInfo,c=>{c&&!E.value&&C()},{immediate:!0});const r=Vo(),d=Je();return{refresh:P,clickRefresh:n,isShowSwapSetting:z,countdown:N,autoRefreshTime:u,slippage:t,clearAll:b,checkNullObj:Ke,router:r,route:d}}});const On=e=>(Ee("data-v-41ba3d57"),e=e(),We(),e),Un={class:"title"},Mn={class:"left"},Fn=On(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Vn={key:0,class:"deposit-progress"};function jn(e,s,z,E,N,P){const u=vn,h=mn,p=Bn;return a(),m("div",Un,[o("div",Mn,[V(u)]),o("div",{class:$e(["right title-right deposit-setting",e.poolInfo?"havePoolInfo":"noPoolInfo"])},[o("div",{class:"slippage-icon",onClick:s[0]||(s[0]=C=>e.isShowSwapSetting=!0)},[Fn,o("span",null,i(e.slippage)+"%",1)]),e.route.name!=="liquidity-create"?(a(),m("div",Vn,[V(h,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])):H("",!0)],2),e.isShowSwapSetting?(a(),D(p,{key:0,onOnClose:s[1]||(s[1]=C=>e.isShowSwapSetting=!1)})):H("",!0)])}const Hn=Me(Dn,[["render",jn],["__scopeId","data-v-41ba3d57"]]),En=He({components:{AutoPoolApyTips:Zo},setup(){const e=fo(),s=y(()=>e),z=Qe(),E=y(()=>z),N=no(),P=y(()=>N),u=y(()=>s.value.theme),h=Je(),p=w();Ie(()=>[P.value.positionInfoObj,h.params.id],([g,f])=>{g&&!Ke(g)&&f&&(p.value=g[f])},{immediate:!0,deep:!0});const C=y(()=>{var g;return(g=p.value)==null?void 0:g.needReverse}),t=g=>{var f;return(g==null?void 0:g.logoURI)||(g==null?void 0:g.logo_url)||((f=E.value.tokensObj[g==null?void 0:g.address])==null?void 0:f.logo_url)||(u.value==="default"?Ze("/image/coins/unknown.png"):Ze("/image/coins/sui-unknown.png"))},b=y(()=>{var g;return(g=p==null?void 0:p.value)==null?void 0:g.poolUSD}),n=y(()=>{var g,f;return P.value.apyObj&&((f=P.value.apyObj[(g=p.value)==null?void 0:g.id])==null?void 0:f.apr)||"--"}),r=y(()=>(console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-info.vue:399 ~ apyObj ~ autoPool.value.apyObj:",P.value.apyObj),P.value.apyObj)),d=y(()=>s.value.currentExplorer),c=y(()=>P.value.autoPoolLoading);return{positionInfo:p,needReverse:C,getCoinIcon:t,tvl:b,apy:n,addCommom:R,getExplorerUrl:Uo,currentExplorer:d,autoPoolLoading:c,apyObj:r,checkNullObj:Ke}}});const Xe=e=>(Ee("data-v-d995b4cc"),e=e(),We(),e),Wn={class:"auto-pool-v2-info"},Xn={class:"pool-info"},zn={class:"left"},Gn={class:"coin-a"},Yn={alt:""},Kn={class:"coin-b"},Zn={alt:""},Jn={class:"position-name"},Qn={key:0,class:"pool-fee"},xn=Xe(()=>o("span",null,"Fee tier",-1)),et={key:1,class:"vault-address"},ot=["href"],nt=Xe(()=>o("span",null,"Vault Address",-1)),tt=Xe(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),st=[nt,tt],at={class:"apy-and-tvl"},lt={class:"apy"},it=Xe(()=>o("div",{class:"apy-title"},"APY",-1)),ut={key:0,class:"apy-text"},rt={class:"reward-coin"},dt=Xe(()=>o("div",{class:"reward"},"Rewards",-1)),vt={class:"right"},mt={alt:""},pt={class:"tvl"},ct=Xe(()=>o("div",{class:"tvl-title"},"TVL",-1)),ft={key:0,class:"tvl-text"},yt={class:"pool-info h5-pool-info"},gt={class:"left"},bt={class:"coin-a"},kt={alt:""},ht={class:"coin-b"},_t={alt:""},$t={class:"position-name"},It={key:0,class:"pool-fee"},wt=Xe(()=>o("span",null,"Fee tier",-1)),Ct={class:"left"},At={class:"vault-address"},St=["href"],Pt=Xe(()=>o("span",null,"Vault Address",-1)),Tt=Xe(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),Rt=[Pt,Tt],qt={class:"apy-and-tvl"},Nt={class:"apy"},Lt=Xe(()=>o("div",{class:"apy-title"},"APY",-1)),Bt={key:0,class:"apy-text"},Dt={class:"reward-coin"},Ot=Xe(()=>o("div",{class:"reward"},"Rewards",-1)),Ut={class:"right"},Mt={alt:""},Ft={class:"tvl"},Vt=Xe(()=>o("div",{class:"tvl-title"},"TVL",-1)),jt={key:0,class:"tvl-text"};function Ht(e,s,z,E,N,P){var b,n,r,d,c,g,f,$,L,M,j,G,ae,k,_,W,X,Z,le,F,Y,se,ue,ve,q,A,U,be,ce,I,ee,Se,Ce,Te,Fe,Oe,he,Ve,Re,so,uo,xe,qe,ao,ro,vo;const u=yo,h=Io,p=Zo,C=Xo,t=$o("image");return a(),m("div",Wn,[o("div",Xn,[o("div",zn,[o("div",Gn,[_e(o("img",Yn,null,512),[[t,e.needReverse?e.getCoinIcon((n=e.positionInfo)==null?void 0:n.token_b):e.getCoinIcon((b=e.positionInfo)==null?void 0:b.token_a)]]),V(u,{address:e.needReverse?(g=(c=e.positionInfo)==null?void 0:c.token_b)==null?void 0:g.address:(d=(r=e.positionInfo)==null?void 0:r.token_a)==null?void 0:d.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",Kn,[_e(o("img",Zn,null,512),[[t,e.needReverse?e.getCoinIcon(($=e.positionInfo)==null?void 0:$.token_a):e.getCoinIcon((f=e.positionInfo)==null?void 0:f.token_b)]]),V(u,{address:e.needReverse?(G=(j=e.positionInfo)==null?void 0:j.token_a)==null?void 0:G.address:(M=(L=e.positionInfo)==null?void 0:L.token_b)==null?void 0:M.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",Jn,[e.autoPoolLoading?(a(),D(h,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),m(we,{key:0},[pe(i(e.needReverse?(k=(ae=e.positionInfo)==null?void 0:ae.token_b)==null?void 0:k.symbol:(W=(_=e.positionInfo)==null?void 0:_.token_a)==null?void 0:W.symbol)+" - "+i(e.needReverse?(Z=(X=e.positionInfo)==null?void 0:X.token_a)==null?void 0:Z.symbol:(F=(le=e.positionInfo)==null?void 0:le.token_b)==null?void 0:F.symbol),1)],64))]),(Y=e.positionInfo)!=null&&Y.fee?(a(),m("div",Qn,[xn,pe(" "+i(((se=e.positionInfo)==null?void 0:se.fee)*100)+"% ",1)])):H("",!0),e.autoPoolLoading?H("",!0):(a(),m("div",et,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:T(Uo))(e.currentExplorer,"poolAddress",(ue=e.positionInfo)==null?void 0:ue.id),target:"_blank"},st,8,ot)]))]),o("div",at,[o("div",lt,[it,e.autoPoolLoading?(a(),D(h,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),m("div",ut,[pe(i(e.apy)+" ",1),V(p)]))]),o("div",rt,[dt,e.autoPoolLoading?(a(),D(h,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),D(C,{key:0,"overlay-class-name":"reward-coin-tips"},{title:te(()=>[pe("Rewards will be auto harvested and compounded to your position.")]),default:te(()=>{var ze;return[o("div",vt,[(a(!0),m(we,null,So((ze=e.positionInfo)==null?void 0:ze.rewardList,je=>(a(),m("div",{key:je,class:"coin-a"},[_e(o("img",mt,null,512),[[t,e.getCoinIcon({address:je})]]),V(u,{address:je,"style-params":{width:"8px",height:"8px",right:"0px",bottom:"0px"}},null,8,["address"])]))),128))])]}),_:1}))]),o("div",pt,[ct,e.tvl?(a(),m("div",ft,"$"+i(("addCommom"in e?e.addCommom:T(R))(e.tvl,2)),1)):(a(),D(h,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1}))])])]),o("div",yt,[o("div",gt,[o("div",bt,[_e(o("img",kt,null,512),[[t,e.needReverse?e.getCoinIcon((q=e.positionInfo)==null?void 0:q.token_b):e.getCoinIcon((ve=e.positionInfo)==null?void 0:ve.token_a)]]),V(u,{address:e.needReverse?(ce=(be=e.positionInfo)==null?void 0:be.token_b)==null?void 0:ce.address:(U=(A=e.positionInfo)==null?void 0:A.token_a)==null?void 0:U.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",ht,[_e(o("img",_t,null,512),[[t,e.needReverse?e.getCoinIcon((ee=e.positionInfo)==null?void 0:ee.token_a):e.getCoinIcon((I=e.positionInfo)==null?void 0:I.token_b)]]),V(u,{address:e.needReverse?(Fe=(Te=e.positionInfo)==null?void 0:Te.token_a)==null?void 0:Fe.address:(Ce=(Se=e.positionInfo)==null?void 0:Se.token_b)==null?void 0:Ce.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",$t,i(e.needReverse?(he=(Oe=e.positionInfo)==null?void 0:Oe.token_b)==null?void 0:he.symbol:(Re=(Ve=e.positionInfo)==null?void 0:Ve.token_a)==null?void 0:Re.symbol)+" - "+i(e.needReverse?(uo=(so=e.positionInfo)==null?void 0:so.token_a)==null?void 0:uo.symbol:(qe=(xe=e.positionInfo)==null?void 0:xe.token_b)==null?void 0:qe.symbol),1),(ao=e.positionInfo)!=null&&ao.fee?(a(),m("div",It,[wt,pe(" "+i(((ro=e.positionInfo)==null?void 0:ro.fee)*100)+"% ",1)])):H("",!0)]),o("div",Ct,[o("div",At,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:T(Uo))(e.currentExplorer,"poolAddress",(vo=e.positionInfo)==null?void 0:vo.id),target:"_blank"},Rt,8,St)])]),o("div",qt,[o("div",Nt,[Lt,e.autoPoolLoading?(a(),D(h,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),m("div",Bt,[pe(i(e.apy)+" ",1),V(p)]))]),o("div",Dt,[Ot,e.autoPoolLoading?(a(),D(h,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),D(C,{key:0,"overlay-class-name":"reward-coin-tips"},{title:te(()=>[pe("Rewards will be auto harvested and compounded to your position.")]),default:te(()=>{var ze;return[o("div",Ut,[(a(!0),m(we,null,So((ze=e.positionInfo)==null?void 0:ze.rewardList,je=>(a(),m("div",{key:je,class:"coin-a"},[_e(o("img",Mt,null,512),[[t,e.getCoinIcon({address:je})]]),V(u,{address:je,"style-params":{width:"8px",height:"8px",right:"0px",bottom:"0px"}},null,8,["address"])]))),128))])]}),_:1}))]),o("div",Ft,[Vt,e.tvl?(a(),m("div",jt,"$"+i(("addCommom"in e?e.addCommom:T(R))(e.tvl,2)),1)):(a(),D(h,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1}))])])])])}const en=Me(En,[["render",Ht],["__scopeId","data-v-d995b4cc"]]),Et=He({components:{Slider:zo},setup(){const e=w(!0),s=Qe(),z=y(()=>s),E=no(),N=y(()=>E),P=Je(),u=w();Ie(()=>[N.value.positionInfoObj,P.params.id],([n,r])=>{n&&!Ke(n)&&r&&(u.value=n[r])},{immediate:!0,deep:!0});const h=y(()=>{var n;return(n=u.value)==null?void 0:n.needReverse}),p=n=>{var r;return(n==null?void 0:n.logoURI)||(n==null?void 0:n.logo_url)||((r=z.value.tokensObj[n==null?void 0:n.address])==null?void 0:r.logo_url)||Ze("/image/coins/sui-unknown.png")},C=y(()=>{var g,f,$,L,M,j,G;const n=e.value?((g=u.value)==null?void 0:g.minPrice)&&B(u==null?void 0:u.value.minPrice,6):((f=u.value)==null?void 0:f.maxPrice)&&B(1/(u==null?void 0:u.value.maxPrice),6),r=e.value?(($=u.value)==null?void 0:$.maxPrice)&&B((L=u.value)==null?void 0:L.maxPrice,6):((M=u.value)==null?void 0:M.minPrice)&&B(1/(u==null?void 0:u.value.minPrice),6),d=(h.value?!e.value:e.value)?B((j=u.value)==null?void 0:j.price,6):B(1/((G=u.value)==null?void 0:G.price),6);let c={};return c[n]={label:"Min Price"},c[r]={label:"Max Price"},d>n&&d<r?c[d]={label:"Current Price"}:d<n?c[Number(n)+1e-9]={label:"Current Price"}:d>r&&(c[Number(r)-1e-9]={label:"Current Price"}),c}),t=y(()=>{var r,d;return(h.value?!e.value:e.value)?Pe((r=u.value)==null?void 0:r.price,6):Pe(1/((d=u.value)==null?void 0:d.price),6)}),b=y(()=>{var r,d;return(h.value?!e.value:e.value)?Pe((r=u.value)==null?void 0:r.price,6):Pe(1/((d=u.value)==null?void 0:d.price),6)});return{direct:e,positionInfo:u,needReverse:h,getCoinIcon:p,decimalUi:Pe,addCommom:R,sFixD:B,marks:C,currentPrice:t,currentPriceResever:b}}});const qo=e=>(Ee("data-v-d45875e4"),e=e(),We(),e),Wt={class:"v2-position-range"},Xt={class:"position-range-top"},zt=qo(()=>o("div",null,"Position Range",-1)),Gt={class:"base-coin"},Yt={key:0},Kt={alt:""},Zt={key:1},Jt={alt:""},Qt={key:2},xt={key:3},es=qo(()=>o("p",null,"Base coin",-1)),os={class:"coin-rate"},ns=qo(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),ts=qo(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),ss=[ns,ts],as={class:"position-range-bottom"},ls={class:"price-range"},is={class:"price-range-bg"},us={key:0,class:"min-price"},rs={key:0},ds={key:1},vs={key:1,class:"max-price"},ms={key:0},ps={key:1},cs={key:0,class:"min-price"},fs={key:0},ys={key:1},gs={key:1,class:"max-price"},bs={key:0},ks={key:1};function hs(e,s,z,E,N,P){var C,t,b,n,r,d,c,g,f,$,L,M,j,G,ae,k,_,W,X,Z,le,F,Y,se,ue,ve,q,A;const u=yo,h=oo("Slider"),p=$o("image");return a(),m("div",Wt,[o("div",Xt,[zt,o("div",Gt,[e.needReverse?(a(),m("div",Zt,[_e(o("img",Jt,null,512),[[p,e.direct?e.getCoinIcon((g=e.positionInfo)==null?void 0:g.token_b):e.getCoinIcon((c=e.positionInfo)==null?void 0:c.token_a)]]),V(u,{address:e.direct?(M=(L=e.positionInfo)==null?void 0:L.token_b)==null?void 0:M.address:($=(f=e.positionInfo)==null?void 0:f.token_a)==null?void 0:$.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])):(a(),m("div",Yt,[_e(o("img",Kt,null,512),[[p,e.direct?e.getCoinIcon((C=e.positionInfo)==null?void 0:C.token_a):e.getCoinIcon((t=e.positionInfo)==null?void 0:t.token_b)]]),V(u,{address:e.direct?(n=(b=e.positionInfo)==null?void 0:b.token_a)==null?void 0:n.address:(d=(r=e.positionInfo)==null?void 0:r.token_b)==null?void 0:d.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])),e.needReverse?(a(),m("span",xt,i(e.direct?(W=(_=e.positionInfo)==null?void 0:_.token_b)==null?void 0:W.symbol:(Z=(X=e.positionInfo)==null?void 0:X.token_a)==null?void 0:Z.symbol),1)):(a(),m("span",Qt,i(e.direct?(G=(j=e.positionInfo)==null?void 0:j.token_a)==null?void 0:G.symbol:(k=(ae=e.positionInfo)==null?void 0:ae.token_b)==null?void 0:k.symbol),1)),es,o("div",os,[o("div",{onClick:s[0]||(s[0]=U=>e.direct=!e.direct)},ss)])])]),o("div",as,[o("div",ls,[o("div",is,[e.direct?(a(),D(h,{key:0,value:e.currentPrice,class:$e(["position-slider",e.currentPrice<Number(("sFixD"in e?e.sFixD:T(B))((le=e.positionInfo)==null?void 0:le.minPrice,6))||e.currentPrice>Number(("sFixD"in e?e.sFixD:T(B))((F=e.positionInfo)==null?void 0:F.maxPrice,6))?"hide-handler":""]),step:null,marks:e.marks,disabled:!0,min:Number(("decimalUi"in e?e.decimalUi:T(Pe))((Y=e.positionInfo)==null?void 0:Y.minPrice,6)),max:Number(("decimalUi"in e?e.decimalUi:T(Pe))((se=e.positionInfo)==null?void 0:se.maxPrice,6))},{mark:te(({label:U})=>{var be,ce,I,ee,Se,Ce,Te,Fe,Oe,he,Ve,Re;return[U=="Min Price"?(a(),m("div",us,[o("div",null,i(U),1),e.direct?(a(),m("div",rs,i(((be=e.positionInfo)==null?void 0:be.minPrice)&&("sFixD"in e?e.sFixD:T(B))((ce=e.positionInfo)==null?void 0:ce.minPrice,6)),1)):(a(),m("div",ds,i(((I=e.positionInfo)==null?void 0:I.maxPrice)&&("sFixD"in e?e.sFixD:T(B))(1/((ee=e.positionInfo)==null?void 0:ee.maxPrice),6)),1))])):H("",!0),U=="Max Price"?(a(),m("div",vs,[o("div",null,i(U),1),e.direct?(a(),m("div",ms,i(((Se=e.positionInfo)==null?void 0:Se.maxPrice)&&("sFixD"in e?e.sFixD:T(B))((Ce=e.positionInfo)==null?void 0:Ce.maxPrice,6)),1)):(a(),m("div",ps,i(((Te=e.positionInfo)==null?void 0:Te.minPrice)&&("sFixD"in e?e.sFixD:T(B))(1/((Fe=e.positionInfo)==null?void 0:Fe.minPrice),6)),1))])):H("",!0),U=="Current Price"?(a(),m("div",{key:2,class:$e(["current-price",e.currentPrice<Number(("sFixD"in e?e.sFixD:T(B))((Oe=e.positionInfo)==null?void 0:Oe.minPrice,6))?"current-price-left":e.currentPrice>Number(("sFixD"in e?e.sFixD:T(B))((he=e.positionInfo)==null?void 0:he.maxPrice,6))?"current-price-right":""])},[o("div",null,i(U),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(a(),m(we,{key:0},[pe(i(("addCommom"in e?e.addCommom:T(R))(("decimalUi"in e?e.decimalUi:T(Pe))((Ve=e.positionInfo)==null?void 0:Ve.price,6))),1)],64)):(a(),m(we,{key:1},[pe(i(("addCommom"in e?e.addCommom:T(R))(("decimalUi"in e?e.decimalUi:T(Pe))(1/((Re=e.positionInfo)==null?void 0:Re.price),6))),1)],64))])],2)):H("",!0)]}),_:1},8,["value","class","marks","min","max"])):(a(),D(h,{key:1,value:e.currentPriceResever,class:$e(["position-slider",e.currentPriceResever<Number(("sFixD"in e?e.sFixD:T(B))(1/((ue=e.positionInfo)==null?void 0:ue.maxPrice),6))||e.currentPriceResever>Number(("sFixD"in e?e.sFixD:T(B))(1/((ve=e.positionInfo)==null?void 0:ve.minPrice),6))?"hide-handler":""]),step:null,min:Number(("decimalUi"in e?e.decimalUi:T(Pe))(1/((q=e.positionInfo)==null?void 0:q.maxPrice),6)),max:Number(("decimalUi"in e?e.decimalUi:T(Pe))(1/((A=e.positionInfo)==null?void 0:A.minPrice),6)),marks:e.marks,disabled:!0},{mark:te(({label:U})=>{var be,ce,I,ee,Se,Ce,Te,Fe,Oe,he,Ve,Re;return[U=="Min Price"?(a(),m("div",cs,[o("div",null,i(U),1),e.direct?(a(),m("div",fs,i(((be=e.positionInfo)==null?void 0:be.minPrice)&&("sFixD"in e?e.sFixD:T(B))((ce=e.positionInfo)==null?void 0:ce.minPrice,6)),1)):(a(),m("div",ys,i(((I=e.positionInfo)==null?void 0:I.maxPrice)&&("sFixD"in e?e.sFixD:T(B))(1/((ee=e.positionInfo)==null?void 0:ee.maxPrice),6)),1))])):H("",!0),U=="Max Price"?(a(),m("div",gs,[o("div",null,i(U),1),e.direct?(a(),m("div",bs,i(((Se=e.positionInfo)==null?void 0:Se.maxPrice)&&("sFixD"in e?e.sFixD:T(B))((Ce=e.positionInfo)==null?void 0:Ce.maxPrice,6)),1)):(a(),m("div",ks,i(((Te=e.positionInfo)==null?void 0:Te.minPrice)&&("sFixD"in e?e.sFixD:T(B))(1/((Fe=e.positionInfo)==null?void 0:Fe.minPrice),6)),1))])):H("",!0),U=="Current Price"?(a(),m("div",{key:2,class:$e(["current-price current-price-direct",e.currentPriceResever<Number(("sFixD"in e?e.sFixD:T(B))(1/((Oe=e.positionInfo)==null?void 0:Oe.maxPrice),6))?"current-price-left":e.currentPriceResever>Number(("sFixD"in e?e.sFixD:T(B))(1/((he=e.positionInfo)==null?void 0:he.minPrice),6))?"current-price-right":""])},[o("div",null,i(U),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(a(),m(we,{key:0},[pe(i(("addCommom"in e?e.addCommom:T(R))(("decimalUi"in e?e.decimalUi:T(Pe))((Ve=e.positionInfo)==null?void 0:Ve.price,6))),1)],64)):(a(),m(we,{key:1},[pe(i(("addCommom"in e?e.addCommom:T(R))(("decimalUi"in e?e.decimalUi:T(Pe))(1/((Re=e.positionInfo)==null?void 0:Re.price),6))),1)],64))])],2)):H("",!0)]}),_:1},8,["value","class","min","max","marks"]))])])])])}const on=Me(Et,[["render",hs],["__scopeId","data-v-d45875e4"]]),_s=He({components:{Modal:Po},props:{positionInfo:{type:Object,default:()=>({})}},setup(e){const s=y(()=>{var E,N;const z=Math.ceil(((E=e.positionInfo)==null?void 0:E.poolUSD)/((N=e.positionInfo)==null?void 0:N.quoteUSD)*100);return Number(z)});return{sFixD:B,addCommom:R,ratio:s}}});const jo=e=>(Ee("data-v-766b1627"),e=e(),We(),e),$s=jo(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Is={class:"deposit-slider"},ws={class:"info-block"},Cs=jo(()=>o("div",{class:"leabl"},"Current Depositï¼š",-1)),As={class:"text"},Ss={class:"info-block"},Ps=jo(()=>o("div",{class:"leabl"},"Max Capacityï¼š",-1)),Ts={class:"text"};function Rs(e,s,z,E,N,P){const u=oo("Modal");return a(),D(u,{width:"440px",visible:!0,footer:null,title:"Vault Capacity",onCancel:s[0]||(s[0]=h=>e.$emit("onClose"))},{closeIcon:te(()=>[$s]),default:te(()=>{var h,p,C,t;return[o("div",Is,[o("div",{class:"current-deposit",style:Oo({width:`${e.ratio>100?100:e.ratio}%`})},null,4)]),o("div",ws,[Cs,o("div",As,i(("addCommom"in e?e.addCommom:T(R))(("sFixD"in e?e.sFixD:T(B))((h=e.positionInfo)==null?void 0:h.currentDeposit,2)))+" "+i((p=e.positionInfo)==null?void 0:p.quoteCoinInfo.symbol),1)]),o("div",Ss,[Ps,o("div",Ts,i(("addCommom"in e?e.addCommom:T(R))(("sFixD"in e?e.sFixD:T(B))((C=e.positionInfo)==null?void 0:C.quoteUSD,2)))+" "+i((t=e.positionInfo)==null?void 0:t.quoteCoinInfo.symbol),1)])]}),_:1})}const nn=Me(_s,[["render",Rs],["__scopeId","data-v-766b1627"]]),qs=He({components:{AutoPoolV2PoolCapacity:nn},setup(){const e=Qe(),s=y(()=>e),z=no(),E=y(()=>z),N=Je(),P=w();Ie(()=>[E.value.positionInfoObj,N.params.id],([t,b])=>{t&&!Ke(t)&&b&&(P.value=t[b])},{immediate:!0,deep:!0});const u=y(()=>{var t;return(t=P.value)==null?void 0:t.needReverse}),h=t=>{var b;return(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((b=s.value.tokensObj[t==null?void 0:t.address])==null?void 0:b.logo_url)||Ze("/image/coins/sui-unknown.png")},p=y(()=>E.value.autoPoolLoading),C=w(!1);return{needReverse:u,positionInfo:P,getCoinIcon:h,addCommom:R,isShowModal:C,autoPoolLoading:p}}});const Ns=e=>(Ee("data-v-ead86b7d"),e=e(),We(),e),Ls={class:"pool-composition"},Bs={class:"pool-composition-top"},Ds=Ns(()=>o("span",null,"Vault Composition",-1)),Os={class:"pool-composition-bottom"},Us={class:"token-ratio"},Ms={class:"before-coin"},Fs={alt:""},Vs={class:"after-coin"},js={alt:""},Hs={class:"token-num"},Es={class:"num-box"},Ws={class:"num-box"};function Xs(e,s,z,E,N,P){var t,b,n,r,d,c,g,f,$,L,M,j,G,ae,k,_,W,X,Z,le,F,Y,se,ue,ve,q,A,U,be;const u=yo,h=Io,p=nn,C=$o("image");return a(),m("div",Ls,[o("div",Bs,[Ds,Number((t=e.positionInfo)==null?void 0:t.quoteUSD)>0?(a(),m("div",{key:0,class:"pool-capacity",onClick:s[0]||(s[0]=ce=>e.isShowModal=!0)},"Vault Capacity")):H("",!0)]),o("div",Os,[o("div",Us,[o("div",Ms,[o("div",null,[V(u,{address:e.needReverse?(d=(r=e.positionInfo)==null?void 0:r.token_b)==null?void 0:d.address:(n=(b=e.positionInfo)==null?void 0:b.token_a)==null?void 0:n.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"]),_e(o("img",Fs,null,512),[[C,e.needReverse?e.getCoinIcon((g=e.positionInfo)==null?void 0:g.token_b):e.getCoinIcon((c=e.positionInfo)==null?void 0:c.token_a)]])]),o("span",null,[e.autoPoolLoading?(a(),D(h,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),m(we,{key:0},[pe(i((f=e.positionInfo)==null?void 0:f.poolCoinARatio)+"% ",1)],64))])]),o("div",Vs,[o("span",null,[e.autoPoolLoading?(a(),D(h,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),m(we,{key:0},[pe(i(($=e.positionInfo)==null?void 0:$.poolCoinBRatio)+"% ",1)],64))]),o("div",null,[_e(o("img",js,null,512),[[C,e.needReverse?e.getCoinIcon((M=e.positionInfo)==null?void 0:M.token_a):e.getCoinIcon((L=e.positionInfo)==null?void 0:L.token_b)]]),V(u,{address:e.needReverse?(k=(ae=e.positionInfo)==null?void 0:ae.token_a)==null?void 0:k.address:(G=(j=e.positionInfo)==null?void 0:j.token_b)==null?void 0:G.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])])])]),o("div",Hs,[o("div",{class:"token-a-bg",style:Oo({width:`${(_=e.positionInfo)==null?void 0:_.poolCoinARatio}%`})},null,4),o("div",{class:"token-b-bg",style:Oo({width:`${(W=e.positionInfo)==null?void 0:W.poolCoinBRatio}%`})},null,4),o("div",Es,[e.autoPoolLoading?(a(),D(h,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),m(we,{key:0},[o("div",null,i(("addCommom"in e?e.addCommom:T(R))((X=e.positionInfo)==null?void 0:X.poolCoinANum))+" "+i(e.needReverse?(Y=(F=e.positionInfo)==null?void 0:F.token_b)==null?void 0:Y.symbol:(le=(Z=e.positionInfo)==null?void 0:Z.token_a)==null?void 0:le.symbol),1),o("div",null,"$"+i(("addCommom"in e?e.addCommom:T(R))((se=e.positionInfo)==null?void 0:se.poolCoinAUSD)),1)],64))]),o("div",Ws,[e.autoPoolLoading?(a(),D(h,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),m(we,{key:0},[o("div",null,i(("addCommom"in e?e.addCommom:T(R))((ue=e.positionInfo)==null?void 0:ue.poolCoinBNum))+" "+i(e.needReverse?(U=(A=e.positionInfo)==null?void 0:A.token_a)==null?void 0:U.symbol:(q=(ve=e.positionInfo)==null?void 0:ve.token_b)==null?void 0:q.symbol),1),o("div",null,"$"+i(("addCommom"in e?e.addCommom:T(R))((be=e.positionInfo)==null?void 0:be.poolCoinBUSD)),1)],64))])])]),e.isShowModal?(a(),D(p,{key:0,"position-info":e.positionInfo,onOnClose:s[1]||(s[1]=ce=>e.isShowModal=!1)},null,8,["position-info"])):H("",!0)])}const tn=Me(qs,[["render",Xs],["__scopeId","data-v-ead86b7d"]]),zs=He({setup(){const e=Qe(),s=y(()=>e),z=no(),E=y(()=>z),N=Je(),P=w();Ie(()=>[E.value.positionInfoObj,N.params.id],([b,n])=>{b&&!Ke(b)&&n&&(P.value=b[n])},{immediate:!0,deep:!0});const u=y(()=>{var b;return(b=P.value)==null?void 0:b.needReverse}),h=b=>{var n;return(b==null?void 0:b.logoURI)||(b==null?void 0:b.logo_url)||((n=s.value.tokensObj[b==null?void 0:b.address])==null?void 0:n.logo_url)||Ze("/image/coins/sui-unknown.png")},p=Ro(),C=y(()=>p),t=y(()=>E.value.autoPoolLoading);return{needReverse:u,positionInfo:P,getCoinIcon:h,addCommom:R,wallet:C,autoPoolLoading:t}}});const wo=e=>(Ee("data-v-3cde2b77"),e=e(),We(),e),Gs={class:"my-liquidity"},Ys={class:"my-liquidity-top"},Ks=wo(()=>o("div",null,"My Liquidity",-1)),Zs=wo(()=>o("p",null,"My share of pool",-1)),Js={class:"my-liquidity-bottom"},Qs={class:"lp-token"},xs=wo(()=>o("div",null,[o("span",null,"LP Token BalanceÂ ")],-1)),ea={class:"lp-balance"},oa={class:"token-num-content"},na={class:"token-num token-a-num"},ta={class:"logo"},sa=["src"],aa={class:"text"},la={class:"lp-logo"},ia=["src"],ua=wo(()=>o("div",null,"Pooled Assets",-1)),ra={class:"token-num"},da={class:"logo"},va=["src"],ma={class:"text"},pa=wo(()=>o("div",{class:"token-num-content-bg"},null,-1));function ca(e,s,z,E,N,P){var p,C,t,b,n,r,d,c,g,f,$,L,M,j,G,ae,k,_,W,X,Z,le,F,Y,se,ue,ve,q,A;const u=Io,h=yo;return a(),m("div",Gs,[o("div",Ys,[Ks,o("div",null,[Zs,o("p",null,[e.autoPoolLoading?(a(),D(u,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),m(we,{key:0},[pe(i(e.wallet.connected?(p=e.positionInfo)==null?void 0:p.myShare:"--")+"%",1)],64))])])]),o("div",Js,[o("div",Qs,[xs,o("div",null,[e.autoPoolLoading?(a(),D(u,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),m(we,{key:0},[o("span",ea,i(e.wallet.connected?("addCommom"in e?e.addCommom:T(R))((C=e.positionInfo)==null?void 0:C.myLiquidity):"--")+" LP",1),o("span",null,i(e.wallet.connected?((t=e.positionInfo)==null?void 0:t.myLiquidityUSD)!=="<0.01"?`$${("addCommom"in e?e.addCommom:T(R))((b=e.positionInfo)==null?void 0:b.myLiquidityUSD)}`:"<$0.01":"--"),1)],64))])]),o("div",oa,[o("div",na,[o("div",ta,[o("img",{src:e.needReverse?e.getCoinIcon((r=e.positionInfo)==null?void 0:r.token_b):e.getCoinIcon((n=e.positionInfo)==null?void 0:n.token_a),alt:""},null,8,sa),V(h,{address:e.needReverse?(f=(g=e.positionInfo)==null?void 0:g.token_b)==null?void 0:f.address:(c=(d=e.positionInfo)==null?void 0:d.token_a)==null?void 0:c.address,"style-params":{width:"14px",height:"14px",left:"18px",bottom:"0"}},null,8,["address"])]),o("div",aa,[e.autoPoolLoading?(a(),D(u,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),m(we,{key:0},[o("div",null,i(e.wallet.connected?("addCommom"in e?e.addCommom:T(R))(($=e.positionInfo)==null?void 0:$.amountA):"--")+" "+i(e.needReverse?(G=(j=e.positionInfo)==null?void 0:j.token_b)==null?void 0:G.symbol:(M=(L=e.positionInfo)==null?void 0:L.token_a)==null?void 0:M.symbol),1),o("div",null,i(e.wallet.connected?("addCommom"in e?e.addCommom:T(R))((ae=e.positionInfo)==null?void 0:ae.myAmountAUSD):"--"),1)],64))])]),o("div",la,[o("img",{src:e.getCoinIcon((k=e.positionInfo)==null?void 0:k.lpInfo),alt:""},null,8,ia),ua]),o("div",ra,[o("div",da,[o("img",{src:e.needReverse?e.getCoinIcon((W=e.positionInfo)==null?void 0:W.token_a):e.getCoinIcon((_=e.positionInfo)==null?void 0:_.token_b),alt:""},null,8,va),V(h,{address:e.needReverse?(F=(le=e.positionInfo)==null?void 0:le.token_a)==null?void 0:F.address:(Z=(X=e.positionInfo)==null?void 0:X.token_b)==null?void 0:Z.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])]),o("div",ma,[e.autoPoolLoading?(a(),D(u,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),m(we,{key:0},[o("div",null,i(e.wallet.connected?("addCommom"in e?e.addCommom:T(R))((Y=e.positionInfo)==null?void 0:Y.amountB):"--")+" "+i(e.needReverse?(q=(ve=e.positionInfo)==null?void 0:ve.token_a)==null?void 0:q.symbol:(ue=(se=e.positionInfo)==null?void 0:se.token_b)==null?void 0:ue.symbol),1),o("div",null,i(e.wallet.connected?("addCommom"in e?e.addCommom:T(R))((A=e.positionInfo)==null?void 0:A.myAmountBUSD):"--"),1)],64))])]),pa])])])}const sn=Me(zs,[["render",ca],["__scopeId","data-v-3cde2b77"]]),fa=He({components:{Modal:Po},props:{poolInfo:{type:Object,default:()=>({})},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},totalAmount:{type:String,default:""},shareOfPool:{type:String,default:""},minimumReceivedLP:{type:String,default:""},isOnlyA:{type:Boolean,default:!1},isOnlyB:{type:Boolean,default:!1}},setup(e,s){const{t:z}=ho(),E=y(()=>{var n,r,d;return((n=e==null?void 0:e.poolInfo)==null?void 0:n.needReverse)||((d=(r=e==null?void 0:e.poolInfo)==null?void 0:r.poolInfo)==null?void 0:d.needReverse)}),N=Qe(),P=y(()=>N),u=fo(),h=y(()=>u),p=n=>{var r;return(n==null?void 0:n.logoURI)||(n==null?void 0:n.logo_url)||((r=P.value.tokensObj[n==null?void 0:n.address])==null?void 0:r.logo_url)||(h.value.theme==="default"?Ze("/image/coins/unknown.png"):Ze("/image/coins/sui-unknown.png"))},C=Je(),t=w(!1);return{needReverse:E,getCoinIcon:p,addCommom:R,t:z,route:C,checked:t,decimalUi:Pe,clickSubmit:()=>{s.emit("toAdd")}}}});const No=e=>(Ee("data-v-9d7ef3bf"),e=e(),We(),e),ya=No(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),ga={class:"modal-content"},ba={class:"pool-info"},ka={class:"left"},ha={alt:""},_a={alt:""},$a={class:"pool-name"},Ia={class:"right"},wa={class:"coin-info"},Ca={key:0,class:"from-coin-info"},Aa={class:"left"},Sa={class:"coin-amount"},Pa={class:"coin-symbol"},Ta={class:"right"},Ra={key:1,class:"to-coin-info"},qa={class:"left"},Na={class:"coin-amount"},La={class:"coin-symbol"},Ba={class:"right"},Da={key:0,class:"to-swap-logo"},Oa={class:"add-info"},Ua={class:"total-amount"},Ma=No(()=>o("span",null,"Total Amount",-1)),Fa={class:"total-amount"},Va=No(()=>o("span",null,"Share of Pool",-1)),ja={key:0,class:"total-amount"},Ha=No(()=>o("span",null,"Minimum Received LP",-1));function Ea(e,s,z,E,N,P){const u=yo,h=_o,p=oo("Modal"),C=$o("image");return a(),D(p,{width:"440px",visible:!0,footer:null,title:"Add Liquidity",onCancel:s[0]||(s[0]=t=>e.$emit("onClose"))},{closeIcon:te(()=>[ya]),default:te(()=>{var t,b,n,r,d,c,g,f,$,L,M,j,G,ae,k,_,W,X,Z,le,F,Y,se,ue;return[o("div",ga,[o("div",ba,[o("div",ka,[o("div",null,[_e(o("img",ha,null,512),[[C,e.needReverse?(r=(n=e.poolInfo)==null?void 0:n.token_b)==null?void 0:r.logo_url:(b=(t=e.poolInfo)==null?void 0:t.token_a)==null?void 0:b.logo_url]]),V(u,{address:e.needReverse?(f=(g=e.poolInfo)==null?void 0:g.token_b)==null?void 0:f.address:(c=(d=e.poolInfo)==null?void 0:d.token_a)==null?void 0:c.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),o("div",null,[_e(o("img",_a,null,512),[[C,e.needReverse?(j=(M=e.poolInfo)==null?void 0:M.token_a)==null?void 0:j.logo_url:(L=($=e.poolInfo)==null?void 0:$.token_b)==null?void 0:L.logo_url]]),V(u,{address:e.needReverse?(_=(k=e.poolInfo)==null?void 0:k.token_a)==null?void 0:_.address:(ae=(G=e.poolInfo)==null?void 0:G.token_b)==null?void 0:ae.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),o("div",$a,[o("span",null,i(e.needReverse?(le=(Z=e.poolInfo)==null?void 0:Z.token_b)==null?void 0:le.symbol:(X=(W=e.poolInfo)==null?void 0:W.token_a)==null?void 0:X.symbol),1),pe(" - "),o("span",null,i(e.needReverse?(ue=(se=e.poolInfo)==null?void 0:se.token_a)==null?void 0:ue.symbol:(Y=(F=e.poolInfo)==null?void 0:F.token_b)==null?void 0:Y.symbol),1)])]),o("div",Ia,[pe(" Fee tier "),o("span",null,i(e.poolInfo&&e.poolInfo.fee*100)+"%",1)])]),o("div",wa,[e.isOnlyA||!e.isOnlyA&&!e.isOnlyB?(a(),m("div",Ca,[o("div",Aa,[o("div",Sa,i(("addCommom"in e?e.addCommom:T(R))(e.fromCoinAmount)||0),1),o("div",Pa,i(e.fromCoin&&e.fromCoin.symbol),1)]),o("div",Ta,[_e(o("img",null,null,512),[[C,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),V(u,{address:e.fromCoin&&e.fromCoin.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])])])):H("",!0),e.isOnlyB||!e.isOnlyA&&!e.isOnlyB?(a(),m("div",Ra,[o("div",qa,[o("div",Na,i(("addCommom"in e?e.addCommom:T(R))(e.toCoinAmount)||0),1),o("div",La,i(e.toCoin&&e.toCoin.symbol),1)]),o("div",Ba,[_e(o("img",null,null,512),[[C,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),V(u,{address:e.toCoin&&e.toCoin.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),!e.isOnlyA&&!e.isOnlyB?(a(),m("div",Da)):H("",!0)])):H("",!0)]),o("div",Oa,[o("div",Ua,[Ma,o("span",null,i(Number(e.totalAmount)>0&&Number(e.totalAmount)<.01?"<$0.01":`$${("addCommom"in e?e.addCommom:T(R))(e.totalAmount,2)}`),1)]),o("div",Fa,[Va,o("span",null,i(e.shareOfPool)+"%",1)]),e.minimumReceivedLP?(a(),m("div",ja,[Ha,o("span",null,i(("addCommom"in e?e.addCommom:T(R))(e.minimumReceivedLP))+" "+i(e.fromCoin.symbol)+"-"+i(e.toCoin.symbol),1)])):H("",!0)])]),V(h,{class:"big-btn liquidity-btn",onClick:e.clickSubmit},{default:te(()=>[pe(" Add Liquidity ")]),_:1},8,["onClick"])]}),_:1})}const an=Me(fa,[["render",Ea],["__scopeId","data-v-9d7ef3bf"]]),Wa=""+globalThis.__publicAssetsURL("image/icon-tips-error@2x.png");const Xa={},ln=e=>(Ee("data-v-fcbc716b"),e=e(),We(),e),za={class:"status"},Ga=ln(()=>o("img",{src:Wa,alt:""},null,-1)),Ya=ln(()=>o("span",null,"Rebalancing is in processing. New deposits and withdraws are paused and will be back in minutes. ",-1)),Ka=[Ga,Ya];function Za(e,s){return a(),m("div",za,Ka)}const un=Me(Xa,[["render",Za],["__scopeId","data-v-fcbc716b"]]),Ja=He({components:{AutoPoolAddModal:an,AutoPoolV2PoolStatus:un},setup(){const e=Ro(),s=w(!1),z=fo(),E=y(()=>z),N=y(()=>E.value.chainName),P=y(()=>e),u=no(),h=y(()=>u),p=Qe(),C=y(()=>p),t=w(),b=Je(),n=w(!1),r=w(!1);Ie(()=>[h.value.positionInfoObj,b.params.id],([S,x])=>{S&&!Ke(S)&&x&&(t.value=S[x])},{immediate:!0,deep:!0});const d=y(()=>{var S;return(S=t.value)==null?void 0:S.needReverse}),c=w(),g=w(),f=w(),$=w(),L=w(!0),M=y(()=>P.value.assets&&c.value&&P.value.assets[c.value.address]?Wo(P.value.assets[c.value.address].balance,c.value.decimals):0),j=y(()=>P.value.assets&&g.value&&P.value.assets[g.value.address]?Wo(P.value.assets[g.value.address].balance,g.value.decimals):0),G=S=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-add.vue:358 ~ maxBtnSelect ~ maxBtnSelect:",c.value.symbol=="SUI",g.value.symbol=="SUI",S),S==="fromCoin"?(L.value=!0,f.value=M.value>0?c.value.symbol=="SUI"?new v(Number(M.value)).sub(new v(.05)).lt(new v(0))?"0":new v(Number(M.value)).sub(new v(.5)).toString():String(M.value):""):(L.value=!1,$.value=j.value>0?g.value.symbol=="SUI"?new v(Number(j.value)).sub(new v(.05)).lt(new v(0))?"0":new v(Number(j.value)).sub(new v(.5)).toString():String(j.value):"")},ae=S=>{S==="fromCoin"?(L.value=!0,f.value=M.value>0?B(new v(Number(M.value)).div(2).toString(),c.value.decimals).toString():""):(L.value=!1,$.value=j.value>0?B(new v(Number(j.value)).div(2).toString(),g.value.decimals).toString():"")},k=y(()=>N.value?Ko(N.value):{}),_=y(()=>h.value.slippage),W=w("--"),X=w("--"),Z=S=>{const x=new v(t.value.autoPoolPositionInfo.liquidity),ke=new v(S.toString());if(x.toNumber()>0&&ke.toNumber()>0){const J=ke.add(x),l=ke.div(J).mul(100).toNumber(),O=$n(l),ie=O==-1?2:O+2,Q=B(ke.div(J).mul(100).toNumber(),ie),re=new v(1).div(new v(Math.pow(10,t.value.lpInfo.decimals))).toString();Number(Q)<Number(re)?W.value=`<${re}`:W.value=Q}else ke.toNumber()>0&&x.toNumber()<=0?W.value="100":W.value="--"},le=S=>{if(t.value.total_supply==0){X.value="";return}new v(S.toString());const x=new v(_.value).div(100),ke=Mo.get_lp_amount_by_liquidity({liquidity:t.value.liquidity,total_supply:t.value.total_supply},S.toString()),J=new v(Math.pow(10,t.value.lpInfo.decimals)),l=new v(ke).div(J).toString(),O=new v(l).mul(x),ie=new v(l).sub(O);X.value=B(ie.toString(),t.value.decimals)},F=w(!1),Y=w(!1),se=w(""),ue=w(),ve=w(!1),q=w(!1),A=w(!1),U=w(!1),be=S=>{if(S=="Haedal")return"Haedal";if(S=="Volo")return"Volo";if(S=="aftermath")return"Aftermath"},ce=async()=>{if(!t.value)return;if(t.value.supportHaedalStake&&U.value&&$.value<10){q.value=!0;return}r.value=!1,ve.value=!0;const S=t.value.autoPoolPositionInfo.tick_lower_index,x=t.value.autoPoolPositionInfo.tick_upper_index,ke=Ye.sqrtPriceX64ToTickIndex(new ge(t.value.current_sqrt_price));Ye.tickIndexToSqrtPriceX64(S),Ye.tickIndexToSqrtPriceX64(x),ke<S&&(d.value?F.value=!0:Y.value=!0),ke>x&&(d.value?Y.value=!0:F.value=!0);let J;if(f.value||$.value){L.value?J=new v(f.value).mul(Math.pow(10,c.value.decimals)).toString():J=new v($.value).mul(Math.pow(10,g.value.decimals)).toString();let l,O=L.value;if(A.value||U.value){const me=new v(1);if(new v(J).lte(me))return r.value=!0,!1;console.log("1106###calculateDepositSwapAmount###params###",{lowerTick:S,upperTick:x,curSqrtPrice:new ge(t.value.current_sqrt_price),fix_amount_a:O,input_amount:J,coinTypeA:t.value.autoPoolPositionInfo.coinTypeA,coinTypeB:t.value.autoPoolPositionInfo.coinTypeB,clmm_pool:t.value.address,slippage:Number(_.value)/100,decimals:A.value?c.value.decimals:g.value.decimals,use_Haedal_stake:t.value.supportHaedalStake&&U.value,shouldRequestStake:!1});let oe;try{oe=await ao.calculateDepositSwapAmount({lowerTick:S,upperTick:x,curSqrtPrice:new ge(t.value.current_sqrt_price),fix_amount_a:O,input_amount:J,coinTypeA:t.value.autoPoolPositionInfo.coinTypeA,coinTypeB:t.value.autoPoolPositionInfo.coinTypeB,clmm_pool:t.value.address,slippage:Number(_.value)/100,decimals:A.value?c.value.decimals:g.value.decimals,request_id:J,stakeProtocol:t.value.supportHaedalStake&&(U.value&&!t.value.isTokenA||A.value&&t.value.isTokenA)?t.value.stakeProtocol:"",shouldRequestStake:!1})}catch(K){console.log("calculateDepositSwapAmount",K)}if(oe=="HaedalStakeSuiAmountError"){n.value=!1,q.value=!0;return}else if(oe){if(oe.request_id!==J)return;q.value=!1,n.value=t.value.supportHaedalStake?!1:oe.is_exceed,l=new ge(oe.afterSqrtPrice),J=oe.fixAmountA===O?new ge(new v(J).sub(oe.swapInAmount).toString()):new ge(oe.swapOutAmount),ue.value={swap_amount:oe.swapInAmount,route_obj:oe.route_obj,a2b:O,input_amount:J,stakeProtocol:oe.stake_protocol},O=oe.fixAmountA;const K=t.value.token_a.decimals,ne=t.value.token_b.decimals,Ne=new v(oe.swapInAmount).div(new v(Math.pow(10,K))).toString(),ye=B(new v(oe.swapOutAmountLimit).div(new v(Math.pow(10,ne))).toString(),ne),Ae=d.value?t.value.token_b.symbol:t.value.token_a.symbol,Le=d.value?t.value.token_a.symbol:t.value.token_b.symbol,Be=`By depositing ${R(A.value?f.value:$.value)} ${A.value?Ae:Le},
            ${R(Ne)} ${A.value?Ae:Le}  will be traded for ${R(ye)} ${A.value?Le:Ae} and then added to the pool together.`,De=`By depositing ${R($.value)} ${Le}, ${R(ye)} ${Le} will be converted to ${Ae} via ${be(t.value.stakeProtocol)} 
            liquid staking and added to the pool together.`;se.value=t.value.supportHaedalStake&&U.value?De:Be}else l=t.value.current_sqrt_price,J=new ge(J)}else n.value=!1,l=t.value.current_sqrt_price,J=new ge(J),se.value="";let ie,Q,re;const de=k.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:c.value,tokenB:g.value,lowerTick:S,upperTick:x,coinAmount:J,iscoinA:O,roundUp:!0,slippage:Number(_.value)/100,curSqrtPrice:new ge(l)});ie=de.liquidityAmount,Q=de.tokenMaxA,re=de.tokenMaxB,!A.value&&!U.value&&(L.value?$.value=Number(re)>0?re:"":f.value=Number(Q)>0?Q:""),console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-add.vue:734 ~ updateAmounts ~ liquidityAmount:",ie.toString),Z(ie),le(ie),ve.value=!1}};Ie(()=>t.value,S=>{S&&!Ke(S)&&(c.value=S==null?void 0:S.token_a,g.value=S==null?void 0:S.token_b,F.value=!1,Y.value=!1,ce())},{immediate:!0});const I=y(()=>C.value.RATES),ee=y(()=>{var S,x,ke,J,l,O,ie,Q;if((x=I.value[(S=c.value)==null?void 0:S.address])!=null&&x.price&&((J=I.value[(ke=g.value)==null?void 0:ke.address])!=null&&J.price)){const re=new v(f.value||0).mul(new v((O=I.value[(l=c.value)==null?void 0:l.address])==null?void 0:O.price)),de=new v($.value||0).mul(new v((Q=I.value[(ie=g.value)==null?void 0:ie.address])==null?void 0:Q.price));return re.add(de).toString()}else return"--"});Ie(()=>f.value,ko((S,x)=>{S?ce():(W.value="--",$.value="",X.value="--")},500),{immediate:!0}),Ie(()=>$.value,ko((S,x)=>{S?ce():(f.value="",W.value="--",X.value="--")},500),{immediate:!0});const{t:Se,locale:Ce}=ho(),Te=y(()=>{var S,x;if(A.value||U.value){const ke=A.value?f.value:$.value,J=A.value?c.value:g.value;if((S=I.value[J==null?void 0:J.address])!=null&&S.price)return new v(ke||0).mul(new v((x=I.value[J==null?void 0:J.address])==null?void 0:x.price)).toNumber()}return 0}),Fe=y(()=>{const S=Number(f.value)>Number(M.value),x=Number($.value)>Number(j.value);return!f.value&&!$.value?Se("button.enterAmount"):t.value.supportHaedalStake&&U.value&&$.value<10?"Minimum deposit 10 SUI":S?Se("button.insufficientBalance",{name:c.value.symbol}):x?Se("button.insufficientBalance",{name:g.value.symbol}):n.value?Se("button.insufficientLiquidity"):Number(t.value.remainingTokenUSD)!==0&&Number(t.value.quoteUSD)>0&&Number(ee.value)>Number(t.value.remainingTokenUSD)?"Exceeded the max capacity":r.value?Se("button.enterAmount"):"Add Liquidity"}),Oe=y(()=>{const S=Number(f.value)>Number(M.value),x=Number($.value)>Number(j.value);return!!(!f.value&&!$.value||S||x||f.value<=0&&$.value<=0||n.value||ze.value!=="STATUS_RUNNING"||Number(t.value.remainingTokenUSD)!==0&&Number(t.value.quoteUSD)>0&&Number(ee.value)>Number(t.value.remainingTokenUSD)||r.value||t.value.supportHaedalStake&&!U.value&&Te.value>1e4||!t.value.supportHaedalStake&&Te.value>1e4||q.value||t.value.supportHaedalStake&&U.value&&$.value<10)}),he=w(!1),{setIsShowSuccess:Ve,setIsShowRejected:Re,setIsShowWaiting:so,setTransactionDesc:uo,setTransactionTxid:xe,setPositiomNum:qe}=z,ao=Yo("Sui"),ro=async()=>{var re,de,me,oe;s.value=!1,he.value=!0,xe("");const S=`${R(f.value)} ${(re=c.value)==null?void 0:re.symbol}`,x=`${R($.value)} ${(de=g.value)==null?void 0:de.symbol}`;uo(`Deposit ${f.value>0?S:""} ${$.value>0&&f.value>0?"and":""} ${$.value>0?x:""}`),so(!0);const ke=L.value,J=t.value.autoPoolPositionInfo.tick_lower_index,l=t.value.autoPoolPositionInfo.tick_upper_index,O=Ye.sqrtPriceX64ToTickIndex(new ge(t.value.current_sqrt_price));let ie;L.value?ie=new v(f.value).mul(Math.pow(10,c.value.decimals)).toString():ie=new v($.value).mul(Math.pow(10,g.value.decimals)).toString();const Q=(oe=(me=t==null?void 0:t.value)==null?void 0:me.rewarderInfo)==null?void 0:oe.map(K=>K.coinAddress);try{const K={lowerTick:J,upperTick:l,coinAmount:ie,fix_amount_a:ke,slippage:Number(_.value)/100,curSqrtPrice:new ge(t.value.current_sqrt_price),id:t.value.id,clmm_pool:t.value.autoPoolPositionInfo.clmm_pool_id,lp_token_type:t.value.lp_token_type,coinTypeA:t.value.autoPoolPositionInfo.coinTypeA,coinTypeB:t.value.autoPoolPositionInfo.coinTypeB,rewarder_coin_types:Q,swapParams:ue.value,isOnlyA:A.value,isOnlyB:U.value,currentTickIndex:O,decimal_b:t.value.coinB.decimals,request_id:ie,stakeProtocol:t.value.supportHaedalStake&&(U.value&&!t.value.isTokenA||A.value&&t.value.isTokenA)?t.value.stakeProtocol:"",shouldRequestStake:t.value.supportHaedalStake&&U.value,farming_pool:t.value.autoPoolPositionInfo.pool_id};console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-add.vue:854 ~ toAdd ~ params.positionInfo.value.supportHaedalStake&&isOnlyB.value:",t.value.supportHaedalStake&&U.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-add.vue:1027 ~ toAdd ~ params:",K);const ne=await ao.deposit(K);console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-add.vue:858 ~ toAdd ~ payload:",ne);const Ne=await k.value.signAndExecuteTransactionBlock(P.value.currentWallet,ne);let ye=k.value.handleTx(Ne);if(console.log("toAdd###tx###",ye),ye&&ye.hash){xe(ye.hash),so(!1),Ve(!0);const Ae={title:"Supplied",desc:`Deposit ${f.value>0?S:""} ${$.value>0&&f.value>0?"and":""} ${$.value>0?x:""}`,hash:ye.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deposit ${f.value>0?S:""} ${$.value>0&&f.value>0?"and":""} ${$.value>0?x:""}`,isOnlyToken:A.value||U.value,isOnlyTokenInfo:A.value?c.value:g.value};N.value!=="Aptos"&&(Ae.res=ye.res),k.value.showTransitionPending(Ae),await k.value.watchTransaction(Ae)&&setTimeout(()=>{u.updatePositionItem(t.value.id),k.value.getAccount(P.value.address)},1e3),qe()}else so(!1),Re(!0);f.value="",$.value="",he.value=!1}catch(K){f.value="",$.value="",console.log("addError###",K),he.value=!1,so(!1),Re(!0)}},vo=S=>{f.value="",$.value="",se.value="",q.value=!1,S=="only-a-b"?(A.value=!1,U.value=!1):S=="only-a"?(A.value=!0,U.value=!1):(U.value=!0,A.value=!1)},ze=y(()=>h.value.currentAutoPoolStatus),je=w(),Lo=()=>{je.value=window.setInterval(()=>{(f.value||$.value)&&ce()},2e4)};To(()=>{Lo()}),Fo(()=>{window.clearInterval(je.value)});const Bo=yn(gn,{style:{fontSize:"20px",color:"#75C8FF"},spin:!0}),fe="You can also choose to deposit in only one asset type. In that case,the vault will convert your asset to the required propositions using Cetus.Please note that trading fees & slippage will be applied. When slippage is involved,a certain amount of post-swap dust (no loss of funds) will be returned to you.",go=y(()=>`When you deposit in only SUI tokens, a part of your SUI amount will be converted to ${c.value.symbol} via ${be(t.value.stakeProtocol)} liquid staking services to match required liquidity compositions of the liquidity pool on Cetus. A certain amount of dust (no loss of funds) will be returned to you if slippage is involved.`),Do=y(()=>h.value.autoPoolLoading);return{currentAutoPoolStatus:ze,wallet:P,positionInfo:t,isShowAddModal:s,needReverse:d,fromCoin:c,toCoin:g,fromCoinAmount:f,toCoinAmount:$,fromCoinBlance:M,toCoinBlance:j,fixedFromCoin:L,maxBtnSelect:G,halfBtnSelect:ae,totalAmountUSD:ee,addCommom:R,shareOfPool:W,minimumReceivedLP:X,addLiquidityBtnText:Fe,addLiquidityBtnDisabled:Oe,toAdd:ro,showToCoinLock:Y,showFromCoinLock:F,isOnlyA:A,isOnlyB:U,onlyToken:vo,onlyText:se,onlyTokenUSD:Te,calculateLoading:ve,indicator:Bo,depositTokenTips:fe,depositHaedalTokenTips:go,loading:he,autoPoolLoading:Do}}});const to=e=>(Ee("data-v-95c82ef3"),e=e(),We(),e),Qa={class:"auto-pool-add"},xa={class:"auto-pool-add-content"},el={class:"liquidity-action-tab"},ol=to(()=>o("div",{class:"increase tab-active"},"Add",-1)),nl={class:"only-token"},tl=to(()=>o("div",null,"Deposit Amounts",-1)),sl={key:0},al=to(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1)),ll=to(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1)),il={key:0,class:"card-item"},ul={key:1,class:"card-item"},rl=to(()=>o("span",null,"Pool Closed",-1)),dl={key:0,class:"add-info"},vl={key:0,class:"only-text"},ml={class:"total-amount"},pl=to(()=>o("span",null,"Total Amount",-1)),cl={key:0},fl={class:"total-amount"},yl=to(()=>o("span",null,"Share of Pool",-1)),gl={key:0},bl={key:1,class:"total-amount"},kl=to(()=>o("span",null,"Minimum Received LP",-1)),hl={key:0},_l={key:1,class:"add-info only-add-info"},$l=to(()=>o("div",{class:"only-text"}," Single-asset deposit can't be higher than $10,000 at a time. ",-1)),Il=[$l];function wl(e,s,z,E,N,P){var r,d,c,g,f,$,L,M,j,G,ae,k,_,W,X,Z,le,F,Y,se,ue,ve,q;const u=Xo,h=Jo,p=Qo,C=oo("AutoPoolV2PoolStatus"),t=_o,b=Io,n=an;return a(),m("div",Qa,[o("div",xa,[o("div",el,[ol,o("div",{class:"remove",onClick:s[0]||(s[0]=Go(A=>e.$emit("changeCurrentTab"),["stop"]))},"Remove")]),o("div",nl,[tl,e.autoPoolLoading?H("",!0):(a(),m("div",sl,[o("div",{class:$e(["only-a-b",!e.isOnlyA&&!e.isOnlyB?"active-only":""]),onClick:s[1]||(s[1]=A=>e.onlyToken("only-a-b"))},[o("span",null,i(e.needReverse?(g=(c=e.positionInfo)==null?void 0:c.token_b)==null?void 0:g.symbol:(d=(r=e.positionInfo)==null?void 0:r.token_a)==null?void 0:d.symbol)+" + "+i(e.needReverse?(M=(L=e.positionInfo)==null?void 0:L.token_a)==null?void 0:M.symbol:($=(f=e.positionInfo)==null?void 0:f.token_b)==null?void 0:$.symbol),1)],2),o("div",{class:$e(["only-a",e.isOnlyA?"active-only":""]),onClick:s[2]||(s[2]=A=>e.onlyToken("only-a"))},[o("span",null,i(e.needReverse?(k=(ae=e.positionInfo)==null?void 0:ae.token_b)==null?void 0:k.symbol:(G=(j=e.positionInfo)==null?void 0:j.token_a)==null?void 0:G.symbol)+" only",1),V(u,{placement:"bottom","arrow-point-at-center":""},{title:te(()=>[o("span",null,i(e.depositTokenTips),1)]),default:te(()=>[al]),_:1})],2),o("div",{class:$e(["only-b",e.isOnlyB?"active-only":""]),onClick:s[3]||(s[3]=A=>e.onlyToken("only-b"))},[o("span",null,i(e.needReverse?(Z=(X=e.positionInfo)==null?void 0:X.token_a)==null?void 0:Z.symbol:(W=(_=e.positionInfo)==null?void 0:_.token_b)==null?void 0:W.symbol)+" only",1),V(u,{placement:"bottom","arrow-point-at-center":""},{title:te(()=>[o("span",null,i(e.positionInfo.supportHaedalStake?e.depositHaedalTokenTips:e.depositTokenTips),1)]),default:te(()=>[ll]),_:1})],2)]))]),o("div",{class:$e(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(a(),m("div",il,[V(h,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":s[4]||(s[4]=A=>e.fromCoinAmount=A),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:s[5]||(s[5]=A=>e.maxBtnSelect("fromCoin")),onOnHalf:s[6]||(s[6]=A=>e.halfBtnSelect("fromCoin")),onOnInput:s[7]||(s[7]=A=>{e.fromCoinAmount=A}),onOnFocus:s[8]||(s[8]=()=>{e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&!e.isOnlyA?(a(),D(p,{key:0})):H("",!0)])):H("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(a(),m("div",ul,[V(h,{modelValue:e.toCoinAmount,"onUpdate:modelValue":s[9]||(s[9]=A=>e.toCoinAmount=A),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:s[10]||(s[10]=A=>e.maxBtnSelect("toCoin")),onOnHalf:s[11]||(s[11]=A=>e.halfBtnSelect("toCoin")),onOnInput:s[12]||(s[12]=A=>{e.toCoinAmount=A}),onOnFocus:s[13]||(s[13]=()=>{e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&!e.isOnlyB?(a(),D(p,{key:0})):H("",!0)])):H("",!0)],2)]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(a(),D(C,{key:0})):H("",!0),(le=e.positionInfo)!=null&&le.is_pause?(a(),D(t,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:te(()=>[rl]),_:1})):e.wallet.connected?(a(),D(t,{key:2,class:"big-btn liquidity-btn",disabled:e.loading||e.addLiquidityBtnDisabled,loading:e.loading,onClick:s[14]||(s[14]=A=>e.isShowAddModal=!0)},{default:te(()=>[o("span",null,i(e.addLiquidityBtnText),1)]),_:1},8,["disabled","loading"])):(a(),D(t,{key:3,class:"big-btn liquidity-btn",onClick:s[15]||(s[15]=A=>e.wallet.setIsShowWalletModal(!0))},{default:te(()=>[o("span",null,i(e.$t("button.connectWallet")),1)]),_:1})),(((F=e.positionInfo)==null?void 0:F.quoteUSD)==0||Number((Y=e.positionInfo)==null?void 0:Y.remainingTokenUSD)>Number(e.totalAmountUSD))&&(Number(e.fromCoinAmount)>0||Number(e.toCoinAmount)>0)?(a(),m(we,{key:4},[e.positionInfo.supportHaedalStake&&e.isOnlyB||e.onlyTokenUSD<=1e4?(a(),m("div",dl,[e.onlyText&&(e.isOnlyA&&e.fromCoinAmount>0||e.isOnlyB&&e.toCoinAmount>0)?(a(),m("div",vl,i(e.onlyText),1)):H("",!0),o("div",ml,[pl,e.calculateLoading?(a(),D(b,{key:1,paragraph:!1,active:""})):(a(),m("span",cl,i(Number(e.totalAmountUSD)>0&&Number(e.totalAmountUSD)<.01?"<$0.01":`$${("addCommom"in e?e.addCommom:T(R))(e.totalAmountUSD,2)}`),1))]),o("div",fl,[yl,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(a(),m("span",gl,i(e.shareOfPool)+"%",1)):(a(),D(b,{key:1,paragraph:!1,active:""}))]),e.minimumReceivedLP?(a(),m("div",bl,[kl,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(a(),m("span",hl,i(("addCommom"in e?e.addCommom:T(R))(e.minimumReceivedLP))+" "+i(e.needReverse?(se=e.toCoin)==null?void 0:se.symbol:(ue=e.fromCoin)==null?void 0:ue.symbol)+"-"+i(e.needReverse?(ve=e.fromCoin)==null?void 0:ve.symbol:(q=e.toCoin)==null?void 0:q.symbol),1)):(a(),D(b,{key:1,paragraph:!1,active:""}))])):H("",!0)])):e.positionInfo.supportHaedalStake&&!e.isOnlyB&&e.onlyTokenUSD>1e4||!e.positionInfo.supportHaedalStake&&e.onlyTokenUSD>1e4?(a(),m("div",_l,Il)):H("",!0)],64)):H("",!0),e.isShowAddModal?(a(),D(n,{key:5,"pool-info":e.positionInfo,"from-coin":e.needReverse?e.positionInfo.token_b:e.positionInfo.token_a,"to-coin":e.needReverse?e.positionInfo.token_a:e.positionInfo.token_b,"from-coin-amount":e.needReverse?e.toCoinAmount:e.fromCoinAmount,"to-coin-amount":e.needReverse?e.fromCoinAmount:e.toCoinAmount,"total-amount":e.totalAmountUSD,"share-of-pool":e.shareOfPool,"minimum-received-l-p":e.minimumReceivedLP,"is-only-a":e.isOnlyA,"is-only-b":e.isOnlyB,onOnClose:s[16]||(s[16]=A=>e.isShowAddModal=!1),onToAdd:e.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","is-only-a","is-only-b","onToAdd"])):H("",!0)])}const Cl=Me(Ja,[["render",wl],["__scopeId","data-v-95c82ef3"]]),Al=He({components:{Modal:Po},props:{title:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:"1245566.008946"},toCoinAmount:{type:String,default:"11111111111"},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},isIncrease:{type:Boolean,default:!1},fixedFromCoin:{type:Boolean,default:!0},currentPriceTab:{type:String,default:""},currentPrice:{type:String,default:""},currentPriceReverse:{type:String,default:""},showFromCoinLock:{type:Boolean,default:!1},showToCoinLock:{type:Boolean,default:!1},currentDirect:{type:Boolean,default:!0},positionTotalAmount:{type:Number,default:0},tickLower:{type:Number,default:0},tickUpper:{type:Number,default:0},isCreate:{type:Boolean,default:!1}},setup(e,s){const{t:z}=ho(),E=y(()=>{var n,r,d;return((n=e==null?void 0:e.poolInfo)==null?void 0:n.needReverse)||((d=(r=e==null?void 0:e.poolInfo)==null?void 0:r.poolInfo)==null?void 0:d.needReverse)}),N=Qe(),P=y(()=>N),u=fo(),h=y(()=>u),p=n=>{var r;return(n==null?void 0:n.logoURI)||(n==null?void 0:n.logo_url)||((r=P.value.tokensObj[n==null?void 0:n.address])==null?void 0:r.logo_url)||(h.value.theme==="default"?Ze("/image/coins/unknown.png"):Ze("/image/coins/sui-unknown.png"))},C=Je(),t=w(!1);return{needReverse:E,getCoinIcon:p,addCommom:R,t:z,route:C,checked:t,decimalUi:Pe,clickSubmit:()=>{s.emit("toAdd")}}}});const io=e=>(Ee("data-v-1327bdf7"),e=e(),We(),e),Sl=io(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Pl={class:"modal-content"},Tl={class:"pool-info"},Rl={class:"left"},ql={alt:""},Nl={alt:""},Ll={class:"pool-name"},Bl={class:"right"},Dl=io(()=>o("div",{class:"lp-info"},[o("div",{class:"lp-num"},[o("p",null,"1,126,122.123456"),o("span",null,"USDT-USDC LP")]),o("div",{class:"lp-bg"})],-1)),Ol={class:"est-receive"},Ul=io(()=>o("div",{class:"est-receive-title"},"Estimated Receive",-1)),Ml={class:"token-a"},Fl=io(()=>o("div",null,"0.941824",-1)),Vl={alt:""},jl=io(()=>o("span",null,"USDT",-1)),Hl={class:"token-a"},El=io(()=>o("div",null,"0.941824",-1)),Wl={alt:""},Xl=io(()=>o("span",null,"USDC",-1));function zl(e,s,z,E,N,P){const u=yo,h=_o,p=oo("Modal"),C=$o("image");return a(),D(p,{width:"440px",visible:!0,footer:null,title:"Add Liquidity",onCancel:s[0]||(s[0]=t=>e.$emit("onClose"))},{closeIcon:te(()=>[Sl]),default:te(()=>{var t,b,n,r,d,c,g,f,$,L,M,j,G,ae,k,_,W,X,Z,le,F,Y,se,ue;return[o("div",Pl,[o("div",Tl,[o("div",Rl,[o("div",null,[_e(o("img",ql,null,512),[[C,e.needReverse?(r=(n=e.poolInfo)==null?void 0:n.token_b)==null?void 0:r.logo_url:(b=(t=e.poolInfo)==null?void 0:t.token_a)==null?void 0:b.logo_url]]),V(u,{address:e.needReverse?(f=(g=e.poolInfo)==null?void 0:g.token_b)==null?void 0:f.address:(c=(d=e.poolInfo)==null?void 0:d.token_a)==null?void 0:c.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),o("div",null,[_e(o("img",Nl,null,512),[[C,e.needReverse?(j=(M=e.poolInfo)==null?void 0:M.token_a)==null?void 0:j.logo_url:(L=($=e.poolInfo)==null?void 0:$.token_b)==null?void 0:L.logo_url]]),V(u,{address:e.needReverse?(_=(k=e.poolInfo)==null?void 0:k.token_a)==null?void 0:_.address:(ae=(G=e.poolInfo)==null?void 0:G.token_b)==null?void 0:ae.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),o("div",Ll,[o("span",null,i(e.needReverse?(le=(Z=e.poolInfo)==null?void 0:Z.token_b)==null?void 0:le.symbol:(X=(W=e.poolInfo)==null?void 0:W.token_a)==null?void 0:X.symbol),1),pe(" - "),o("span",null,i(e.needReverse?(ue=(se=e.poolInfo)==null?void 0:se.token_a)==null?void 0:ue.symbol:(Y=(F=e.poolInfo)==null?void 0:F.token_b)==null?void 0:Y.symbol),1)])]),o("div",Bl,[pe(" Fee tier "),o("span",null,i(e.poolInfo&&e.poolInfo.fee*100)+"%",1)])]),Dl,o("div",Ol,[Ul,o("div",Ml,[Fl,o("div",null,[_e(o("img",Vl,null,512),[[C,"1"]]),jl])]),o("div",Hl,[El,o("div",null,[_e(o("img",Wl,null,512),[[C,"1"]]),Xl])])])]),V(h,{class:"big-btn liquidity-btn",onClick:e.clickSubmit},{default:te(()=>[pe(i(e.isIncrease?"Increase Liquidity":e.title==e.$t("button.addLiquidity")?"Add Liquidity":"Create and Add Liquidity"),1)]),_:1},8,["onClick"])]}),_:1})}const rn=Me(Al,[["render",zl],["__scopeId","data-v-1327bdf7"]]),Gl=He({components:{AutoPoolRemoveModal:rn,AutoPoolV2PoolStatus:un},setup(){const e=Ro(),s=y(()=>e),z=fo(),E=y(()=>z),N=y(()=>b.value.slippage),P=y(()=>E.value.chainName),u=_n();y(()=>u);const h=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],p=w(0),C=Je(),t=no(),b=y(()=>t),n=y(()=>b.value.positionInfoObj[C.params.id]),r=y(()=>{var l;return(l=n.value)==null?void 0:l.needReverse}),d=w(),c=w(),g=w(!1),f=w(),$=y(()=>{var l;return(l=n.value)==null?void 0:l.myLiquidity}),L=w(!0),M=y(()=>P.value?Ko(P.value):{}),j=w(),G=w(),ae=Yo("Sui"),k=w(""),_=w(""),W=w("--"),X=w(!1),Z=w(!1),le=w(),F=w(!0),Y=w(),se=Qe(),ue=y(()=>se),ve=y(()=>ue.value.RATES),q=w(!1),A=async()=>{if(L.value||!n.value||n.value.positionLiquidity==0)return;G.value=!1,q.value=!0;const l=n.value.autoPoolPositionInfo.tick_lower_index,O=n.value.autoPoolPositionInfo.tick_upper_index,ie=Ye.sqrtPriceX64ToTickIndex(new ge(n.value.current_sqrt_price));ie<l&&(r.value?X.value=!0:Z.value=!0),ie>O&&(r.value?Z.value=!0:X.value=!0);let Q;if(k.value||_.value){console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:365 ~ updateAmounts ~ fixedFromCoin.value:",F.value,k.value,_.value),F.value?(Q=new v(k.value).mul(Math.pow(10,d.value.decimals)).toString(),console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:368 ~ updateAmounts ~ coinAmount:",Q,k.value)):(Q=new v(_.value).mul(Math.pow(10,c.value.decimals)).toString(),console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:374 ~ updateAmounts ~ coinAmount:",Q));let re,de=F.value;if(I.value||ee.value){I.value?Number(k.value)/Number(fe.value):Number(_.value)/Number(fe.value);const ne=await ae.calculateRemoveSwapAmount({lowerTick:l,upperTick:O,curSqrtPrice:new ge(n.value.current_sqrt_price),fix_amount_a:de,receiveAmount:Q,coinTypeA:n.value.autoPoolPositionInfo.coinTypeA,coinTypeB:n.value.autoPoolPositionInfo.coinTypeB,clmm_pool:n.value.address,slippage:Number(N.value)/100,decimals:I.value?d.value.decimals:c.value.decimals,liquidity:k.value==fe.value||_.value==fe.value?n.value.positionLiquidity:"",maxLiquidity:n.value.positionLiquidity,request_id:Q});if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:362 ~ updateAmounts ~ swapResult:",ne),ne){if(ne.request_id!==Q)return;j.value=ne.is_exceed,Q=new ge(ne.swapOutAmount),re=n.value.current_sqrt_price,le.value={swap_amount:ne.swapInAmount,liquidity:ne.liquidity,a2b:!de,route_obj:ne.route_obj},de=!de;const Ne=n.value.token_a.decimals,ye=n.value.token_b.decimals,Ae=new v(ne.swapInAmount).div(new v(Math.pow(10,Ne))).toString(),Le=B(new v(ne.swapOutAmountLimit).div(new v(Math.pow(10,ye))).toString(),ye),Be=r.value?n.value.token_b.symbol:n.value.token_a.symbol,De=r.value?n.value.token_a.symbol:n.value.token_b.symbol;Y.value=k.value==fe.value||_.value==fe.value?`To withdraw ${R(I.value?k.value:_.value)} ${I.value?Be:De},
                  ${R(I.value?n.value.amountB:n.value.amountA)} ${I.value?De:Be}
                   in the pool will be traded for ${Ae} ${I.value?Be:De}`:`To withdraw ${R(I.value?k.value:_.value)} ${I.value?Be:De},
                  ${R(Ae)} ${I.value?De:Be}  in the pool will be traded for ${R(Le)} ${I.value?Be:De}`}else{G.value=!0,Y.value="";return}}else j.value=!1,re=n.value.current_sqrt_price,Q=new ge(Q);const{liquidityAmount:me,tokenMaxA:oe,tokenMaxB:K}=M.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:d.value,tokenB:c.value,lowerTick:l,upperTick:O,coinAmount:Q,iscoinA:de,roundUp:!1,slippage:Number(N.value)/100,curSqrtPrice:new ge(re)});if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:484 ~ updateAmounts ~ coinAmount:",Q.toString()),!I.value&&!ee.value&&(F.value?_.value=Number(K)>0?K:"":k.value=Number(oe)>0?oe:""),(I.value||ee.value)&&(Number(k.value)>=Number(fe.value)||Number(_.value)>=Number(fe.value))){f.value=n.value.myLiquidity;const ne=new v(100);W.value=new v(n.value.myLiquidity).mul(new v(Math.pow(10,n.value.lpInfo.decimals))).toString(),U.value=me.toString(),p.value=ne.toNumber()}else{const ne=Mo.get_lp_amount_by_liquidity({liquidity:n.value.liquidity,total_supply:n.value.total_supply},me.toString()),Ne=new v(ne).div(new v(Math.pow(10,n.value.lpInfo.decimals))).toString();console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:518 ~ updateAmounts ~ result:",Ne);const ye=new v(Ne).div(new v($.value)).mul(100);f.value=new v($.value).mul(B(ye.toString(),2)).div(100).toString(),W.value=ne,U.value=me.toString(),console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:518 ~ updateAmounts ~ ratio:",ye.toString()),p.value=ye.toNumber()}q.value=!1}},U=w(),be=y(()=>{var l;return(l=n==null?void 0:n.value)==null?void 0:l.amountA}),ce=y(()=>{var l;return(l=n==null?void 0:n.value)==null?void 0:l.amountB}),I=w(!1),ee=w(!1),Se=y(()=>{var de,me,oe,K;const l=((me=ve.value[(de=d==null?void 0:d.value)==null?void 0:de.address])==null?void 0:me.price)||0,O=((K=ve.value[(oe=c==null?void 0:c.value)==null?void 0:oe.address])==null?void 0:K.price)||0;let ie=k.value!=="--"&&k.value!==""?k.value:0,Q=_.value!=="--"&&_.value!==""?_.value:0,re="0";return l&&O&&(I.value||ee.value?re=new v(I.value?ie:Q).mul(new v(I.value?l:O)).toString():re=new v(ie).mul(new v(l)).add(new v(Q).mul(new v(O))).toString()),re>0&&re<.01?"<$0.01":`$${R(B(re,2))}`}),Ce=async l=>{var Ne,ye,Ae,Le,Be,De,bo,Ge,Ao,eo,mo;if(!L.value)return;console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:798 ~ setPercent ~ setPercent:",L.value),L.value=!0,G.value=!1,(ye=(Ne=n.value)==null?void 0:Ne.token_a)==null||ye.decimals,(Le=(Ae=n.value)==null?void 0:Ae.token_b)==null||Le.decimals;const O=(Be=n.value)==null?void 0:Be.tick_lower_index,ie=(De=n.value)==null?void 0:De.tick_upper_index;Ye.tickIndexToSqrtPriceX64(O),Ye.tickIndexToSqrtPriceX64(ie);const Q=(Ge=(bo=n.value)==null?void 0:bo.autoPoolPositionInfo)==null?void 0:Ge.tick_lower_index,re=(eo=(Ao=n.value)==null?void 0:Ao.autoPoolPositionInfo)==null?void 0:eo.tick_upper_index,de=Ye.sqrtPriceX64ToTickIndex(new ge((mo=n==null?void 0:n.value)==null?void 0:mo.current_sqrt_price));de<Q&&(r.value?X.value=!0:Z.value=!0),de>re&&(r.value?Z.value=!0:X.value=!0);let me="",oe,K;I.value?F.value=!0:ee.value&&(F.value=!1);let ne=F.value;if(I.value||ee.value&&!X.value&&!Z.value){if(I.value){const lo=new v(fe.value).mul(Math.pow(10,d.value.decimals)).mul(l.value).toString();K=B(lo,0),k.value=fe.value>0&&l.value?B(new v(fe.value).mul(l.value).toString(),d.value.decimals):""}if(ee.value){const lo=new v(fe.value).mul(l.value).mul(Math.pow(10,c.value.decimals)).toString();K=B(lo,0),_.value=fe.value>0&&l.value>0?B(new v(fe.value).mul(l.value).toString(),c.value.decimals):""}const Ue=await ae.calculateRemoveSwapAmount({lowerTick:O,upperTick:ie,curSqrtPrice:new ge(n.value.current_sqrt_price),fix_amount_a:ne,receiveAmount:K,coinTypeA:n.value.autoPoolPositionInfo.coinTypeA,coinTypeB:n.value.autoPoolPositionInfo.coinTypeB,clmm_pool:n.value.address,slippage:Number(N.value)/100,decimals:I.value?d.value.decimals:c.value.decimals,liquidity:l.value==1?n.value.positionLiquidity:"",maxLiquidity:n.value.positionLiquidity,request_id:K});if(Ue){if(Ue.request_id!==K)return;j.value=Ue.is_exceed,K=new ge(Ue.swapOutAmount),n.value.current_sqrt_price,le.value={swap_amount:Ue.swapInAmount,liquidity:Ue.liquidity,route_obj:Ue.route_obj,a2b:!ne},ne=!ne;const lo=n.value.token_a.decimals,Ho=n.value.token_b.decimals,dn=new v(Ue.swapInAmount).div(new v(Math.pow(10,lo))).toString(),Eo=B(new v(Ue.swapOutAmountLimit).div(new v(Math.pow(10,Ho))).toString(),Ho),po=r.value?n.value.token_b.symbol:n.value.token_a.symbol,co=r.value?n.value.token_a.symbol:n.value.token_b.symbol;Y.value=l.value==1?`To withdraw ${R(I.value?k.value:_.value)} ${I.value?po:co},
          ${R(I.value?n.value.amountB:n.value.amountA)} ${I.value?co:po}  in the pool will be traded for ${R(Eo)} ${I.value?po:co}`:`To withdraw ${R(I.value?k.value:_.value)} ${I.value?po:co},
          ${R(dn)} ${I.value?co:po}  in the pool will be traded for ${R(Eo)} ${I.value?po:co}`,me=Ue.liquidity}else n.value.current_sqrt_price,K=new ge(K),Y.value="",G.value=!0;W.value=new v(n.value.myLiquidity).mul(new v(l.value)).toString(),f.value=new v(W.value),U.value=me}else{j.value=!1;const Ue=new v(be.value).mul(Math.pow(10,d.value.decimals)).mul(l.value).toString();K=B(Ue,0),k.value=l.value>0?B(new v(be.value).mul(l.value).toString(),d.value.decimals):"";const lo=new v(ce.value).mul(l.value).mul(Math.pow(10,c.value.decimals)).toString();K=B(lo,0),_.value=l.value>0?B(new v(ce.value).mul(l.value).toString(),c.value.decimals):"",n.value.current_sqrt_price,K=new ge(K),l.value!==1?oe=new v(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).mul(l.value).toString():oe=new v(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).toString(),f.value=new v(oe).div(Math.pow(10,n.value.lpInfo.decimals)),me=Mo.get_share_liquidity_by_amount({liquidity:n.value.liquidity,total_supply:n.value.total_supply},oe),W.value=B(oe,0),U.value=B(me,0)}};Ie(p,ko((l,O)=>{l!==O&&L.value&&(Number(l)>100?p.value=100:l&&n.value?(p.value=l,Ce({value:p.value/100})):(k.value="",_.value=""))},300)),Ie(()=>k.value,ko((l,O)=>{l?A():!I.value&&!ee.value&&(_.value="",p.value=0)},500),{immediate:!0}),Ie(()=>_.value,ko((l,O)=>{l?A():!I.value&&!ee.value&&(k.value="",p.value=0)},500),{immediate:!0});const Te=Vo(),{setIsShowSuccess:Fe,setIsShowRejected:Oe,setIsShowWaiting:he,setTransactionDesc:Ve,setTransactionTxid:Re,setPositiomNum:so,setTransactionDescText:uo}=z,xe=w(!1),{t:qe}=ho(),ao=async()=>{var Ne,ye,Ae,Le,Be,De,bo;xe.value=!0,Re("");const l=Number(k.value)>0?`${R(k.value,d.value.decimals)} ${d.value.symbol}`:"",O=Number(_.value)>0?`${R(_.value,c.value.decimals)} ${c.value.symbol}`:"";Ve(qe("tips.removeLiquidiyText",{from:r.value?O:l,and:Number(k.value)>0&&Number(_.value)>0?"and":"",to:r.value?l:O})),he(!0);const ie=qe("modal.removeLiquidityText2");uo(ie);const Q=n.value.autoPoolPositionInfo.tick_lower_index,re=n.value.autoPoolPositionInfo.tick_upper_index,de=Ye.tickIndexToSqrtPriceX64(Q),me=Ye.tickIndexToSqrtPriceX64(re),oe=(ye=(Ne=n==null?void 0:n.value)==null?void 0:Ne.rewarderInfo)==null?void 0:ye.map(Ge=>Ge.coinAddress);let K;(k.value||_.value)&&(console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:909 ~ toRemove ~ fixedFromCoin.value:",F.value),F.value?K=new v(k.value).mul(Math.pow(10,d.value.decimals)).toString():K=new v(_.value).mul(Math.pow(10,c.value.decimals)).toString());const ne={lowerSqrtPrice:de,upperSqrtPrice:me,lpTokenAmount:W.value,liquidity:U.value,curSqrtPrice:new ge(((Le=(Ae=n==null?void 0:n.value)==null?void 0:Ae.object)==null?void 0:Le.current_sqrt_price)||((Be=n==null?void 0:n.value)==null?void 0:Be.current_sqrt_price)),slippage:Number(N.value)/100,id:n.value.id,clmm_pool:n.value.autoPoolPositionInfo.clmm_pool_id,lp_token_type:n.value.lp_token_type,coinTypeA:n.value.autoPoolPositionInfo.coinTypeA,coinTypeB:n.value.autoPoolPositionInfo.coinTypeB,rewarder_coin_types:oe,swapParams:le.value,fix_amount_a:F.value,isOnlyA:!X.value&&!Z.value?I.value:!1,isOnlyB:!Z.value&&!X.value?ee.value:!1,lowerTick:Q,upperTick:re,receiveAmount:K,sliderVal:p.value,positionInfo:n.value,maxLiquidity:n.value.positionLiquidity,farming_pool:n.value.autoPoolPositionInfo.pool_id};console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:911 ~ toRemove ~ params:",ne);try{const Ge=await ae.remove(ne),Ao=await M.value.signAndExecuteTransactionBlock(s.value.currentWallet,Ge);let eo=M.value.handleTx(Ao);if(console.log("0331###remove###tx####",eo),eo&&eo.hash){Re(eo.hash),he(!1),Fe(!0);const mo={title:qe("common.removeLiquidity"),desc:"",hash:eo.hash,descTransactions:`Remove ${l} ${Number(k.value)>0&&Number(_.value)>0?"and":""} ${O} from the pool`,sender:s.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${k.value} ${(De=d.value)==null?void 0:De.symbol} and ${_.value} ${(bo=c.value)==null?void 0:bo.symbol}`};mo.res=eo.res,M.value.showTransitionPending(mo),await M.value.watchTransaction(mo)&&(k.value="",_.value="",f.value="",p.value=0,setTimeout(()=>{t.updatePositionItem(n.value.id),M.value.getAccount(s.value.address)},1e3),Number(p.value)==100&&C.name=="auto-pool-detail"&&Te.push("/vaults"))}else he(!1),Oe(!0);xe.value=!1}catch(Ge){console.log("Remove error",Ge),xe.value=!1,he(!1),Oe(!0)}};Ie(()=>n.value,(l,O)=>{l&&!Ke(l)&&(d.value=l==null?void 0:l.token_a,c.value=l==null?void 0:l.token_b,(!O||O&&O.address!==l.address)&&(p.value=p.value>0?p.value:0,Ce({value:p.value/100})),O&&O.current_sqrt_price!==l.current_sqrt_price&&(L.value?Ce({value:p.value/100}):A()))},{immediate:!0});const ro=y(()=>{if(n.value.positionLiquidity==0)return"Insufficient LP Amount";const l=Number(f.value)>Number($.value);return!k.value&&!_.value||!f.value||f.value<=0||!k.value&&I.value||!_.value&&ee.value?qe("button.enterAmount"):l?"Invalid Amount":j.value?qe("button.insufficientLiquidity"):G.value?qe("button.enterAmount"):I.value&&Number(k.value)>Number(fe.value)||ee.value&&Number(_.value)>Number(fe.value)?"Invalid Amount":qe("button.remove")}),vo=y(()=>{var O;if(((O=n==null?void 0:n.value)==null?void 0:O.positionLiquidity)==0)return!0;const l=Number(f.value)>Number($.value);return!k.value&&!_.value||Number(k.value)<=0&&I.value||Number(_.value)<=0&&ee.value?!0:!f.value||f.value<=0?(console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:1109 ~ removeLiquidityBtnDisabled ~ lpAmount.value:",f.value),!0):!!(l||j.value||x.value!=="STATUS_RUNNING"||G.value||I.value&&Number(k.value)>Number(fe.value)||ee.value&&Number(_.value)>Number(fe.value))}),ze=l=>(l==null?void 0:l.logoURI)||(l==null?void 0:l.logo_url)||Ze("/image/coins/sui-unknown.png"),je=l=>{k.value="",_.value="",L.value=!0,p.value=0,Y.value="",l=="only-a-b"?(I.value=!1,ee.value=!1,Ce({value:p.value/100})):l=="only-a"?(I.value=!0,ee.value=!1):(ee.value=!0,I.value=!1)},Lo=l=>{L.value=!0,p.value=100,l==="fromCoin"?F.value=!0:F.value=!1},Bo=l=>{L.value=!0,p.value=50,l==="fromCoin"?F.value=!0:F.value=!1},fe=w(),go=w(!1),Do=async()=>{go.value=!0;const l=n.value.token_a.decimals,O=n.value.token_b.decimals,ie=new v(be.value).mul(new v(Math.pow(10,l))).toNumber(),Q=new v(ce.value).mul(new v(Math.pow(10,O))).toNumber(),re=I.value?Q:ie;I.value?(c.value.address,n.value.token_a.address):(d.value.address,n.value.token_a.address);try{const de=await M.value.getSwapRouter(I.value?c:d,I.value?d:c,re,!0,Number(N.value)/100,"",void 0,[{pool_id:n.value.address,tick_lower:n.value.autoPoolPositionInfo.tick_lower_index,tick_upper:n.value.autoPoolPositionInfo.tick_upper_index,delta_liquidity:Number(n.value.positionLiquidity),is_increase:!1}]),me=new v(de.amountOut);fe.value=me.sub(me.mul(Number(N.value)/100)).add(new v(I.value?be.value:ce.value)).toString()}catch(de){console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:1179 ~ convertAssets ~ e:",de)}go.value=!1,Ce({value:p.value/100})};Ie(()=>[I.value,ee.value,be.value,ce.value],([l,O])=>{(l||O)&&Do()},{immediate:!0});const S=l=>`${l}%`,x=y(()=>b.value.currentAutoPoolStatus),ke=w(),J=()=>{ke.value=window.setInterval(()=>{(k.value||_.value)&&!L.value?A():Ce({value:p.value/100})},2e4)};return To(()=>{J()}),Fo(()=>{window.clearInterval(ke.value)}),{removeLiquidityBtnText:ro,removeLiquidityBtnDisabled:vo,wallet:s,ratioArr:h,positionInfo:n,isShowRemoveModal:g,needReverse:r,fromCoin:d,toCoin:c,lpAmount:f,lpBalance:$,sliderVal:p,sFixD:B,isSlider:L,fromCoinAmount:k,toCoinAmount:_,setPercent:Ce,toRemove:ao,addCommom:R,getCoinIcon:ze,isOnlyA:I,isOnlyB:ee,onlyToken:je,fixedFromCoin:F,maxBtnSelect:Lo,halfBtnSelect:Bo,fromCoinBlance:be,toCoinBlance:ce,showFromCoinLock:X,showToCoinLock:Z,removeText:Y,onlyTokenBalance:fe,totalWithdraw:Se,formatter:S,currentAutoPoolStatus:x,calculateLoading:q,convertAssetsLoading:go}}});const Co=e=>(Ee("data-v-165dcfee"),e=e(),We(),e),Yl={class:"auto-pool-add"},Kl={class:"auto-pool-add-content"},Zl={class:"liquidity-action-tab"},Jl=Co(()=>o("div",{class:"remove tab-active"},"Remove",-1)),Ql={key:0,class:"only-token"},xl=Co(()=>o("div",null,"Remove Amounts",-1)),ei={key:0,class:"card-item"},oi={key:1,class:"card-item"},ni={class:"remove-ratio"},ti={class:"remove-ratio-select"},si={key:0,class:"ratio"},ai={key:1,class:"ratio"},li={class:"ratio-list"},ii=["onClick"],ui=Co(()=>o("span",null,"Pool Closed",-1)),ri={key:4,class:"remove-info"},di={key:0,class:"remove-text total-amount"},vi={class:"total-amount"},mi=Co(()=>o("span",null,"Total Withdraw",-1)),pi={key:0},ci={class:"total-amount"},fi=Co(()=>o("span",null,"LP Burn Amount",-1)),yi={key:0};function gi(e,s,z,E,N,P){var r,d,c,g,f,$,L,M,j,G,ae,k,_,W,X,Z,le,F,Y,se,ue,ve;const u=Jo,h=Qo,p=zo,C=oo("AutoPoolV2PoolStatus"),t=_o,b=Io,n=rn;return a(),m("div",Yl,[o("div",Kl,[o("div",Zl,[o("div",{class:"increase",onClick:s[0]||(s[0]=Go(q=>e.$emit("changeCurrentTab"),["stop"]))},"Add"),Jl]),!e.showFromCoinLock&&!e.showToCoinLock?(a(),m("div",Ql,[xl,o("div",null,[o("div",{class:$e(["only-a-b",!e.isOnlyA&&!e.isOnlyB?"active-only":""]),onClick:s[1]||(s[1]=q=>e.onlyToken("only-a-b"))},[o("span",null,i(e.needReverse?(g=(c=e.positionInfo)==null?void 0:c.token_b)==null?void 0:g.symbol:(d=(r=e.positionInfo)==null?void 0:r.token_a)==null?void 0:d.symbol)+" + "+i(e.needReverse?(M=(L=e.positionInfo)==null?void 0:L.token_a)==null?void 0:M.symbol:($=(f=e.positionInfo)==null?void 0:f.token_b)==null?void 0:$.symbol),1)],2),o("div",{class:$e(["only-a",e.isOnlyA?"active-only":""]),onClick:s[2]||(s[2]=q=>e.onlyToken("only-a"))},[o("span",null,i(e.needReverse?(k=(ae=e.positionInfo)==null?void 0:ae.token_b)==null?void 0:k.symbol:(G=(j=e.positionInfo)==null?void 0:j.token_a)==null?void 0:G.symbol)+" only",1)],2),o("div",{class:$e(["only-b",e.isOnlyB?"active-only":""]),onClick:s[3]||(s[3]=q=>e.onlyToken("only-b"))},[o("span",null,i(e.needReverse?(Z=(X=e.positionInfo)==null?void 0:X.token_a)==null?void 0:Z.symbol:(W=(_=e.positionInfo)==null?void 0:_.token_b)==null?void 0:W.symbol)+" only",1)],2)])])):H("",!0),o("div",{class:$e(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(a(),m("div",ei,[V(u,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":s[4]||(s[4]=q=>e.fromCoinAmount=q),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.isOnlyA?e.onlyTokenBalance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","amount-leabl":"Available","convert-assets-loading":e.convertAssetsLoading,"has-arrow":!1,onOnMax:s[5]||(s[5]=q=>e.maxBtnSelect("fromCoin")),onOnHalf:s[6]||(s[6]=q=>e.halfBtnSelect("fromCoin")),onOnInput:s[7]||(s[7]=q=>{e.isSlider=!1,e.fromCoinAmount=q}),onOnFocus:s[8]||(s[8]=()=>{e.isSlider=!1,e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address","convert-assets-loading"]),e.showFromCoinLock?(a(),D(h,{key:0})):H("",!0)])):H("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(a(),m("div",oi,[V(u,{modelValue:e.toCoinAmount,"onUpdate:modelValue":s[9]||(s[9]=q=>e.toCoinAmount=q),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.isOnlyB?e.onlyTokenBalance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","convert-assets-loading":e.convertAssetsLoading,"import-page":"deposit","amount-leabl":"Available","has-arrow":!1,onOnMax:s[10]||(s[10]=q=>e.maxBtnSelect("toCoin")),onOnHalf:s[11]||(s[11]=q=>e.halfBtnSelect("toCoin")),onOnInput:s[12]||(s[12]=q=>{e.isSlider=!1,e.toCoinAmount=q}),onOnFocus:s[13]||(s[13]=()=>{e.isSlider=!1,e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address","convert-assets-loading"]),e.showToCoinLock?(a(),D(h,{key:0})):H("",!0)])):H("",!0)],2),o("div",ni,[o("div",ti,[Number(e.lpBalance)>=Number(e.lpAmount)?(a(),m("div",si,i(e.sliderVal>0&&Number(("sFixD"in e?e.sFixD:T(B))(e.sliderVal,2))<.01?"<0.01":("sFixD"in e?e.sFixD:T(B))(e.sliderVal,2))+"% ",1)):(a(),m("div",ai,"--")),o("div",li,[(a(!0),m(we,null,So(e.ratioArr,(q,A)=>(a(),m("div",{key:A,class:$e(["ratio-item",e.sliderVal==q.value?"ratio-item-active":""]),onClick:()=>{e.isSlider=!0,e.sliderVal=q.value}},i(q.name),11,ii))),128))])]),V(p,{value:e.sliderVal,"onUpdate:value":s[14]||(s[14]=q=>e.sliderVal=q),"tip-formatter":e.formatter,onChange:s[15]||(s[15]=q=>e.isSlider=!0)},null,8,["value","tip-formatter"])])]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(a(),D(C,{key:0})):H("",!0),(le=e.positionInfo)!=null&&le.is_pause?(a(),D(t,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:te(()=>[ui]),_:1})):e.wallet&&e.wallet.address?(a(),D(t,{key:2,class:"big-btn liquidity-btn",disabled:e.removeLiquidityBtnDisabled,onClick:s[16]||(s[16]=q=>e.toRemove())},{default:te(()=>[o("span",null,i(e.removeLiquidityBtnText),1)]),_:1},8,["disabled"])):(a(),D(t,{key:3,class:"big-btn liquidity-btn",onClick:s[17]||(s[17]=q=>e.wallet.setIsShowWalletModal(!0))},{default:te(()=>[o("span",null,i(e.$t("button.connectWallet")),1)]),_:1})),e.removeLiquidityBtnDisabled?H("",!0):(a(),m("div",ri,[e.removeText&&(e.isOnlyA&&Number(e.fromCoinAmount)>0||e.isOnlyB&&Number(e.toCoinAmount)>0)?(a(),m("div",di,i(e.removeText),1)):H("",!0),o("div",vi,[mi,e.calculateLoading?(a(),D(b,{key:1,paragraph:!1,active:""})):(a(),m("span",pi,i(e.totalWithdraw),1))]),o("div",ci,[fi,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(a(),m("span",yi,i(("addCommom"in e?e.addCommom:T(R))(("sFixD"in e?e.sFixD:T(B))(e.lpAmount,(F=e.positionInfo)==null?void 0:F.decimals)))+" "+i(e.needReverse?(Y=e.toCoin)==null?void 0:Y.symbol:(se=e.fromCoin)==null?void 0:se.symbol)+"-"+i(e.needReverse?(ue=e.fromCoin)==null?void 0:ue.symbol:(ve=e.toCoin)==null?void 0:ve.symbol),1)):(a(),D(b,{key:1,paragraph:!1,active:""}))])])),e.isShowRemoveModal?(a(),D(n,{key:5,"pool-info":e.positionInfo,"from-coin":e.positionInfo.token_a,"to-coin":e.positionInfo.token_b,onOnClose:s[18]||(s[18]=q=>e.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):H("",!0)])}const bi=Me(Gl,[["render",gi],["__scopeId","data-v-165dcfee"]]),ki=He({components:{AutoPoolV2Info:en,AutoPoolV2PositionRange:on,AutoPoolV2PoolComposition:tn,AutoPoolV2PoolLiquidity:sn,AutoPoolV2PoolAdd:Cl,AutoPoolV2PoolRemove:bi},setup(){const e=no(),s=Qe(),z=y(()=>s),E=fo(),N=y(()=>E),P=y(()=>e),u=Je(),h=w();Ie(()=>[P.value.positionInfoObj,u.params.id],([r,d])=>{r&&!Ke(r)&&d&&(h.value=r[d],console.log(h.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const p=async()=>{e.getAutoPoolAPY(),e.getVault(u.params.id,"refresh")},C=w();Ie(()=>u.query.action,r=>{r&&(C.value=r)},{immediate:!0}),To(()=>{e.getAutoPoolAPY()}),Ie(()=>[z.value.poolConfigList,P.value.autoPoolList],([r,d])=>{r&&r.length>0&&d&&d.length==0&&e.getAutoPoolList()},{immediate:!0}),y(()=>N.value.chainName),Vo();const t=Ro(),b=y(()=>t);Ie(()=>b.value.address,r=>{r||e.logout()},{immediate:!0});const n=y(()=>P.value.autoPoolLoading);return{clickRefresh:p,currentTab:C,positionInfo:h,autoPoolLoading:n}}});const hi={class:"auto-pool-detail-v2"},_i={class:"detail-top"},$i={class:"detail-bottom pc-detail"},Ii={class:"detail-bottom-left"},wi={class:"detail-bottom-right"},Ci={class:"h5-detail"},Ai={key:0,class:"loading-global"};function Si(e,s,z,E,N,P){const u=Hn,h=en,p=on,C=tn,t=sn,b=oo("AutoPoolV2PoolAdd"),n=oo("AutoPoolV2PoolRemove"),r=bn;return a(),m("div",hi,[o("div",_i,[V(u,{"pool-info":e.positionInfo,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClickRefresh"]),V(h)]),o("div",$i,[o("div",Ii,[V(p),V(C),V(t)]),o("div",wi,[e.currentTab=="deposit"?(a(),D(b,{key:0,onChangeCurrentTab:s[0]||(s[0]=d=>e.currentTab="remove")})):(a(),D(n,{key:1,onChangeCurrentTab:s[1]||(s[1]=d=>e.currentTab="deposit")}))])]),o("div",Ci,[e.currentTab=="deposit"?(a(),D(b,{key:0,onChangeCurrentTab:s[2]||(s[2]=d=>e.currentTab="remove")})):(a(),D(n,{key:1,onChangeCurrentTab:s[3]||(s[3]=d=>e.currentTab="deposit")})),V(p),V(C),V(t)]),e.autoPoolLoading?(a(),m("div",Ai,[V(r)])):H("",!0)])}const Qi=Me(ki,[["render",Si],["__scopeId","data-v-3e4353e1"]]);export{Qi as default};
