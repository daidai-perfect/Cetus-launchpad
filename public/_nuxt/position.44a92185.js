import{_ as Fe}from"./upgrade-select-input.17aaf10e.js";import{_ as Ve}from"./upgrade-loading.6f98b450.js";import{_ as He}from"./status-block.a850ef60.js";import{g as le,a as Ge,u as _e,s as qe,k as me,e as u,j as Me,b as We,c as ue,d as v,D as ze,f as Je}from"./pool.f11e722d.js";import{a as he,l as ke,m as g,e as ge,o as t,f as r,h as s,i as V,u as o,v as a,c as Re,w as ve,x as f,j as ne,z as oe,L as Ke,p as be,k as Ie,b as $e,r as N,D as W,y as Ue,q as Ze,t as T,F as K,s as Z,S as Qe,C as Xe,N as Ye,V as xe,T as ye,B as es}from"./entry.a66dad04.js";/* empty css              */import{u as we,_ as Ne}from"./index.db94fabb.js";/* empty css              */import{i as ae}from"./import-icon.de3e6c66.js";import{_ as Ce}from"./icon-arrow_2x.948aedb2.js";import{_ as Pe}from"./icon-arrow_2x.4ffddb8e.js";import{u as ss}from"./notifi.7d1f29f5.js";import{_ as Se}from"./icon_on_2x.5e96733d.js";import{_ as os,a as as}from"./img-no-Positions_2x.144f9fbf.js";import{_ as ns,a as ts}from"./img-connect-wallet_2x.8b05d53b.js";import"./coin-select.a5c8464a.js";/* empty css              *//* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";const rs=he({props:{pItem:{type:Object,required:!0},currentStatus:{type:String,required:!0},rewarderInfo:{type:Number,required:!0},aprAmount:{type:Number,required:!0}},setup(e){const{t:b}=ke(),D=we(),S=g(()=>D),I=g(()=>S.value.chainName);console.log(e.pItem,"pItempItem121221");const L=g(()=>Ne[I.value]);return{getExplorerUrl:le,store:S,config:L,t:b}}});const Ae=e=>(be("data-v-4530e4e6"),e=e(),Ie(),e),is={class:"status-block-box"},ds={key:0,class:"owner-addres"},ls=["href"],ms=["href"],us={class:"copy-link"},ps=Ae(()=>s("use",{"xlink:href":"#icon-icon-copy"},null,-1)),cs=["href"],vs=Ae(()=>s("svg",{class:"icon","aria-hidden":"true"},[ne(" > "),s("use",{"xlink:href":"#icon-icon-link"})],-1)),hs=[vs];function ks(e,b,D,S,I,L){const $=He,c=Ke;return t(),r("div",{class:oe(["upgrade-position-status",`position-status-${e.pItem.currentStatus.toLowerCase()}`])},[s("div",is,[V($,{class:"status-block","current-status":e.pItem.currentStatus||"","is-pause":e.pItem.is_pause,"apr-amount":e.aprAmount,"block-name":"position"},null,8,["current-status","is-pause","apr-amount"])]),e.pItem.tokenName?(t(),r("div",ds,[e.pItem.tokenName.length<=24?(t(),r("a",{key:0,href:("getExplorerUrl"in e?e.getExplorerUrl:o(le))("nftAddress",e.pItem.nftHash),target:"_blank"},a(e.pItem.tokenName.split("|")[1]),9,ls)):(t(),Re(c,{key:1,placement:"bottom","arrow-point-at-center":""},{title:ve(()=>[s("span",null,a(e.pItem.tokenName),1)]),default:ve(()=>[s("a",{target:"_blank",href:("getExplorerUrl"in e?e.getExplorerUrl:o(le))("nftAddress",e.pItem.nftHash)},a(e.pItem.tokenName.substr(0,4))+" ... "+a(e.pItem.tokenName.substr(e.pItem.tokenName.length-4,4)),9,ms)]),_:1}))])):f("",!0),s("div",us,[(t(),r("svg",{class:"icon","aria-hidden":"true",onClick:b[0]||(b[0]=k=>e.store.copy(e.pItem.nftHash))},[ne(" > "),ps])),e.pItem.tokenName.length<=24?(t(),r("a",{key:0,href:("getExplorerUrl"in e?e.getExplorerUrl:o(le))("nftAddress",e.pItem.nftHash),target:"_blank"},hs,8,cs)):f("",!0)])],2)}const gs=ge(rs,[["render",ks],["__scopeId","data-v-4530e4e6"]]),bs=he({props:{pItem:{type:Object,required:!0}},setup(e){const{t:b}=ke(),D=$e(),S=we(),I=g(()=>S),L=g(()=>I.value.chainName?Ge(I.value.chainName):{}),$=_e(),c=g(()=>$),k=()=>{I.value.chainName==="Aptos"?D.push(`/position-detail?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}`):D.push(`/position-detail?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}&pos=${e.pItem.pos_object_id}`)},A=g(()=>c.value.allTokenObj&&e.pItem.token_a.address&&c.value.allTokenObj[e.pItem.token_a.address]&&c.value.allTokenObj[e.pItem.token_a.address].logo_url),n=g(()=>c.value.allTokenObj&&e.pItem.token_b.address&&c.value.allTokenObj[e.pItem.token_b.address]&&c.value.allTokenObj[e.pItem.token_b.address].logo_url),H=g(()=>c.value.feeOwedObj[e.pItem.tokenName]&&c.value.feeOwedObj[e.pItem.tokenName].feeOwed),B=g(()=>c.value.feeOwedObj[e.pItem.tokenName]&&c.value.feeOwedObj[e.pItem.tokenName].feesResult),Q=g(()=>c.value.rewarderObj[e.pItem.tokenName]&&c.value.rewarderObj[e.pItem.tokenName].pendingRewarder),G=g(()=>c.value.rewarderObj[e.pItem.tokenName]&&c.value.rewarderObj[e.pItem.tokenName].pendingRewarderView),X=g(()=>c.value.rewarderObj[e.pItem.tokenName]&&c.value.rewarderObj[e.pItem.tokenName].pendingRewarderArr),z=N(0),pe=N();W(()=>c.value.RATES,l=>{l&&(pe.value=l)},{immediate:!0});const te=l=>{var R;return(l==null?void 0:l.logoURI)||(l==null?void 0:l.logo_url)||((R=c.value.tokensObj[l==null?void 0:l.address])==null?void 0:R.logo_url)||(I.value.theme==="default"?ae("/image/coins/unknown.png"):ae("/image/coins/sui-unknown.png"))},Y=g(()=>c.value.tokensObj);Ue(()=>{ce(e.pItem),q(e.pItem.minPrice,e.pItem.maxPrice)});const x=N("--"),q=(l,R)=>{l!=="0"&&R!=="∞"?x.value=qe(1/(1-Number((l/R)**.25)),2)+"x":x.value=1},U=N(30),y=N(null),ce=async l=>{var O,E,M;console.log("0607###list###aprPercentageObj###poolInfo###",l),console.log("0607###list###aprPercentageObj###props.pItem###",e.pItem);let R;e.pItem.needReverse?R=!1:R=!0,console.log("0607###list###aprPercentageObj###directs###",R);const C=R?Number(e.pItem.minPrice):e.pItem.maxPrice=="∞"?1/2**50:1/Number(e.pItem.maxPrice),P=isNaN(Number(e.pItem.maxPrice))||e.pItem.maxPrice=="∞"?2**50:R?Number(e.pItem.maxPrice):1/Number(e.pItem.minPrice);console.log("0607###list###aprPercentageObj###lowerUserPrice###",C),console.log("0607###list###aprPercentageObj###upperUserPrice###",P);let _=[];_=I.value&&I.value.addressHistTokens&&I.value.addressHistTokens[l.poolAddress]&&I.value.addressHistTokens[l.poolAddress].data&&I.value.addressHistTokens[l.poolAddress].data.length>0&&Object.fromEntries(I.value.addressHistTokens[l.poolAddress].data.map(F=>[F.key,F.value]));const J=Number(Number(U.value==7?_.before_7_d_contract_price_lowest:U.value==24?_.before_24_h_contract_price_lowest:_.before_30_d_contract_price_lowest)),d=Number(Number(U.value==7?_.before_7_d_contract_price_highest:U.value==24?_.before_24_h_contract_price_highest:_.before_30_d_contract_price_highest)),i=c.value.tokensObj,m=await L.value.getEstPositionAPRWithMulti(C,P,J,d);console.log("0607###lis###resMulti####",m.toString());const h=Number(m.toString()),p=I.value.newTopPoolsObj[l.poolAddress];let w;if(p){U.value==7?w=p.apr_7day?Number(p.apr_7day.substring(0,p.apr_7day.length-1)):0:U.value==24?w=p.apr_24h?Number(p.apr_24h.substring(0,p.apr_24h.length-1)):0:w=p.apr_30day?Number(p.apr_30day.substring(0,p.apr_30day.length-1)):0;const F=p.rewarder_apr[0]?Number(p.rewarder_apr[0].substring(0,p.rewarder_apr[0].length-1)):0,je=p.rewarder_apr[1]?Number(p.rewarder_apr[1].substring(0,p.rewarder_apr[1].length-1)):0,De=p.rewarder_apr[2]?Number(p.rewarder_apr[2].substring(0,p.rewarder_apr[2].length-1)):0,ee=Number(h*w),re=Number(h*F),ie=Number(h*je),de=Number(h*De),se=ee+(l.rewarder_display1?re:0)+(l.rewarder_display2?ie:0)+(l.rewarder_display3?de:0),Le=l.rewarder_infos[0]?(O=i[l.rewarder_infos[0].coinAddress])==null?void 0:O.symbol:"--",Te=l.rewarder_infos[1]?(E=i[l.rewarder_infos[1].coinAddress])==null?void 0:E.symbol:"--",Be=l.rewarder_infos[2]?(M=i[l.rewarder_infos[2].coinAddress])==null?void 0:M.symbol:"--",Ee={aprFee:ee==1/0||isNaN(ee)?0:ee,rewardAprList:[{rewarder_name:Le,rewarder_apr:re==1/0||isNaN(re)?0:re,styleName:"one",rewarder_display:l.rewarder_display1},{rewarder_name:Te,rewarder_apr:ie==1/0||isNaN(ie)?0:ie,styleName:"two",rewarder_display:l.rewarder_display2},{rewarder_name:Be,rewarder_apr:de==1/0||isNaN(de)?0:de,styleName:"three",rewarder_display:l.rewarder_display2}],aprPercentageTotal:se==1/0||isNaN(se)||se===0?0:se,aprPercentage:me(ee/se,2),is_display_rewarder:l.is_display_rewarder};y.value=Ee}};return{aprNum:g(()=>{var l,R,C,P,_,J,d,i,m,h,p,w;return y.value?y.value.is_display_rewarder?(l=y.value)!=null&&l.aprPercentageTotal?((R=y.value)==null?void 0:R.aprPercentageTotal)>1e4?">10,000":((C=y.value)==null?void 0:C.aprPercentageTotal)<.01&&((P=y.value)==null?void 0:P.aprPercentageTotal)>0?"<0.01":u((_=y.value)==null?void 0:_.aprPercentageTotal,2):(J=y.value)!=null&&J.rewardAprList?"0":"--":(d=y.value)!=null&&d.aprFee?((i=y.value)==null?void 0:i.aprFee)>1e4?">10,000":((m=y.value)==null?void 0:m.aprFee)<.01&&((h=y.value)==null?void 0:h.aprFee)>0?"<0.01":u((p=y.value)==null?void 0:p.aprFee,2):(w=y.value)!=null&&w.rewardAprList?"0":"--":"--"}),lever:x,tokensObj:Y,showNum:Me,fromCoinUrl:A,toCoinUrl:n,decimalFormat:We,clickDetails:k,t:b,addCommom:u,importIcon:ae,router:D,store:I,pendingRewarder:Q,pendingFees:H,pendingRewarderArr:X,pendingFeesArr:B,checkNullObj:ue,fixD:me,decimalUi:v,pendingRewarderView:G,aprAmount:z,getCoinIcon:te,Decimal:ze}}});const j=e=>(be("data-v-1917e0be"),e=e(),Ie(),e),Is={class:"upgrade-position-item"},ws={class:"card-content"},fs={class:"left"},ys={class:"top card-header"},_s={class:"token-item"},Rs={class:"item"},$s={key:0,class:"token-warning"},Us={class:"item"},Ns={key:0,class:"token-warning"},Cs={class:"card-header-right"},Ps={key:0,class:"item"},Ss=j(()=>s("span",null,"Leverage",-1)),As={class:"item"},Os=j(()=>s("span",null,"Estimated APR",-1)),js=j(()=>s("div",{class:"more-img"},null,-1)),Ds={class:"bottom"},Ls={class:"info-block-container"},Ts={class:"info-block"},Bs=j(()=>s("div",{class:"leabl"},"Fee Tier",-1)),Es={class:"text"},Fs={class:"info-block"},Vs=j(()=>s("div",{class:"leabl"},"Price Range",-1)),Hs={class:"text"},Gs={class:"min-and-max"},qs={class:"left-text"},Ms={class:"text"},Ws={class:"hover-text"},zs={key:0,src:Ce,alt:""},Js={key:1,src:Pe,alt:""},Ks={class:"right-text"},Zs={class:"text"},Qs={class:"hover-text"},Xs={class:"leabl"},Ys={class:"text"},xs={key:0,class:"hover-rewarder"},eo={class:"rewarder-info"},so={class:"left-rewarder"},oo={alt:""},ao={class:"right-rewarder"},no={class:"amount"},to={key:0,class:"amount-usd"},ro={key:1,class:"amount-usd"},io={class:"rewarder-info"},lo={class:"left-rewarder"},mo={alt:""},uo={class:"right-rewarder"},po={class:"amount"},co={key:0,class:"amount-usd"},vo={key:1,class:"amount-usd"},ho={class:"leabl"},ko={key:0,class:"text"},go={key:1,class:"text"},bo={key:2,class:"text"},Io={key:3,class:"hover-rewarder"},wo={class:"left-rewarder"},fo={alt:""},yo={class:"right-rewarder"},_o={class:"amount"},Ro={class:"amount-usd"},$o={class:"leabl"},Uo={key:0,class:"text"},No={key:1,class:"text"},Co={key:2,class:"hover-rewarder"},Po={class:"left-rewarder"},So={alt:""},Ao={class:"right-rewarder"},Oo={class:"amount"},jo={class:"amount-usd"},Do={class:"h5-bottom"},Lo={class:"item"},To=j(()=>s("span",null,"Leverage",-1)),Bo={class:"item"},Eo=j(()=>s("span",null,"Estimated APR",-1)),Fo=j(()=>s("div",{class:"more-img"},null,-1)),Vo={class:"info"},Ho={class:"info-item"},Go=j(()=>s("div",{class:"left"},"Fee Tier",-1)),qo={class:"right"},Mo={class:"info-item range-item"},Wo={class:"left"},zo={class:"right"},Jo={class:"min-and-max"},Ko={class:"text"},Zo={key:0,src:Ce,alt:""},Qo={key:1,src:Pe,alt:""},Xo={class:"text"},Yo={class:"info-item"},xo=j(()=>s("div",{class:"left"},"Liquidity",-1)),ea={class:"right"},sa={key:0,class:"hover-rewarder"},oa={class:"rewarder-info"},aa={class:"left-rewarder"},na={alt:""},ta={class:"right-rewarder"},ra={class:"amount"},ia={key:0,class:"amount-usd"},da={key:1,class:"amount-usd"},la={class:"rewarder-info"},ma={class:"left-rewarder"},ua={alt:""},pa={class:"right-rewarder"},ca={class:"amount"},va={key:0,class:"amount-usd"},ha={key:1,class:"amount-usd"},ka={class:"info-item"},ga=j(()=>s("div",{class:"left"},"Pending Fees",-1)),ba={key:0,class:"right"},Ia={key:1,class:"right"},wa={key:2,class:"right"},fa={key:3,class:"hover-rewarder"},ya={class:"left-rewarder"},_a={alt:""},Ra={class:"right-rewarder"},$a={class:"amount"},Ua={class:"amount-usd"},Na={key:0,class:"info-item"},Ca={class:"left"},Pa={key:0,class:"right"},Sa={key:1,class:"right"},Aa={key:2,class:"hover-rewarder"},Oa={class:"left-rewarder"},ja={alt:""},Da={class:"right-rewarder"},La={class:"amount"},Ta={class:"amount-usd"};function Ba(e,b,D,S,I,L){var A;const $=gs,c=Qe,k=Ze("image");return t(),r("div",Is,[s("div",ws,[s("div",fs,[V($,{"p-item":e.pItem,"current-status":((A=e.pItem)==null?void 0:A.currentStatus)||"","rewarder-info":e.pendingRewarder,"apr-amount":e.aprAmount},null,8,["p-item","current-status","rewarder-info","apr-amount"])]),s("div",{class:"right",onClick:b[0]||(b[0]=(...n)=>e.clickDetails&&e.clickDetails(...n))},[s("div",ys,[s("div",_s,[s("div",Rs,[s("div",null,[T(s("img",null,null,512),[[k,(e.pItem.needReverse?e.toCoinUrl:e.fromCoinUrl)||e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)]]),(e.pItem.needReverse?e.tokensObj&&e.tokensObj[e.pItem.token_b.address]&&e.tokensObj[e.pItem.token_b.address].isSelfBuilt:e.tokensObj&&e.tokensObj[e.pItem.token_a.address]&&e.tokensObj[e.pItem.token_a.address].isSelfBuilt)?(t(),r("div",$s)):f("",!0),s("span",null,a(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("p",null,a(e.pItem.needReverse?e.pItem.token_b.name:e.pItem.token_a.name)+" "+a(e.pItem.needReverse?e.pItem.token_b.labels&&e.pItem.token_b.labels[0]?`(${e.pItem.token_b.labels[0]})`:"":e.pItem.token_a.labels&&e.pItem.token_a.labels[0]?`(${e.pItem.token_a.labels[0]})`:""),1)]),s("div",Us,[s("div",null,[T(s("img",null,null,512),[[k,(e.pItem.needReverse?e.fromCoinUrl:e.toCoinUrl)||e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)]]),(e.pItem.needReverse?e.tokensObj&&e.tokensObj[e.pItem.token_a.address]&&e.tokensObj[e.pItem.token_a.address].isSelfBuilt:e.tokensObj&&e.tokensObj[e.pItem.token_b.address]&&e.tokensObj[e.pItem.token_b.address].isSelfBuilt)?(t(),r("div",Ns)):f("",!0),s("span",null,a(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),s("p",null,a(e.pItem.needReverse?e.pItem.token_a.name:e.pItem.token_b.name)+" "+a(e.pItem.needReverse?e.pItem.token_a.labels&&e.pItem.token_a.labels[0]?`(${e.pItem.token_a.labels[0]})`:"":e.pItem.token_b.labels&&e.pItem.token_b.labels[0]?`(${e.pItem.token_b.labels[0]})`:""),1)])]),s("div",Cs,[e.pItem.minPrice!=="0"&&e.pItem.maxPrice!=="∞"?(t(),r("div",Ps,[s("p",null,a(e.lever),1),Ss])):f("",!0),s("div",As,[s("p",null,a(e.aprNum)+"%",1),Os]),js])]),s("div",Ds,[s("div",Ls,[s("div",Ts,[Bs,s("div",Es,a(e.pItem.fee*100)+"%",1)]),s("div",Fs,[Vs,s("div",Hs,[s("div",Gs,[s("div",qs,[s("div",Ms,a(e.pItem.needReverse?e.pItem.maxPrice==="∞"?"0":("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(new e.Decimal(1).div(e.pItem.maxPrice).toString(),6)):("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.minPrice,6))),1),s("div",Ws,a(e.pItem.needReverse?e.pItem.maxPrice==="∞"?"0":("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(new e.Decimal(1).div(e.pItem.maxPrice).toString(),6)):("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.minPrice,6))),1)]),e.store.theme=="default"?(t(),r("img",zs)):(t(),r("img",Js)),s("div",Ks,[s("div",Zs,a((e.pItem.needReverse?e.pItem.minPrice.indexOf("+")>-1||e.pItem.minPrice=="0":e.pItem.maxPrice.indexOf("+")>-1||e.pItem.maxPrice==="∞")?"∞":e.pItem.needReverse?("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(1/e.pItem.minPrice,6)):("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.maxPrice,6))),1),s("div",Qs,a((e.pItem.needReverse?e.pItem.minPrice.indexOf("+")>-1||e.pItem.minPrice=="0":e.pItem.maxPrice.indexOf("+")>-1||e.pItem.maxPrice==="∞")?"∞":e.pItem.needReverse?("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(1/e.pItem.minPrice,6)):("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.maxPrice,6))),1)]),s("span",null,a(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol)+" per "+a(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)])])]),s("div",{class:oe(["info-block cursor-block",e.pItem.amountUSD=="--"||Number(e.pItem.amountUSD)==0?"block-none":""])},[s("div",Xs,a(e.$t("common.liquidity")),1),s("div",Ys," $"+a(e.pItem.amountUSD=="--"?"--":Number(e.pItem.amountUSD)==0?0:Number(e.pItem.amountUSD)<.01?"<0.01":("addCommom"in e?e.addCommom:o(u))(e.pItem.amountUSD,2)),1),e.pItem.amountUSD>0?(t(),r("div",xs,[s("div",eo,[s("div",so,[T(s("img",oo,null,512),[[k,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)]]),s("span",null,a(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("div",ao,[s("div",no,a(e.pItem.needReverse?("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.amountB,e.pItem.token_b.decimals)):("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.amountA,e.pItem.token_a.decimals))),1),e.pItem.needReverse?(t(),r("div",ro,a(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("fixD"in e?e.fixD:o(me))(e.pItem.tokenBRates,2):"<$0.01"),1)):(t(),r("div",to,a(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("fixD"in e?e.fixD:o(me))(e.pItem.tokenARates,2):"<$0.01"),1))])]),s("div",io,[s("div",lo,[T(s("img",mo,null,512),[[k,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)]]),s("span",null,a(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),s("div",uo,[s("div",po,a(e.pItem.needReverse?("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.amountA,e.pItem.token_a.decimals)):("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.amountB,e.pItem.token_b.decimals))),1),e.pItem.needReverse?(t(),r("div",vo,a(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.tokenARates,2)):"<$0.01"),1)):(t(),r("div",co,a(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.tokenBRates,2)):"<$0.01"),1))])])])):f("",!0)],2),s("div",{class:oe(["info-block cursor-block",e.pendingFees==0?"block-none":""])},[s("div",ho,a(e.$t("newAdd.pendingFees")),1),e.pendingFees==="--"?(t(),r("div",ko,"$ --")):isNaN(e.pendingFees)?(t(),r("div",bo,[V(c,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])):(t(),r("div",go,a(e.pendingFees==0?"$0":e.pendingFees<.01?"<$0.01":"$"+("addCommom"in e?e.addCommom:o(u))(e.pendingFees,2)),1)),e.pendingFees>0?(t(),r("div",Io,[(t(!0),r(K,null,Z(e.pendingFeesArr,n=>(t(),r("div",{key:n,class:"rewarder-info"},[s("div",wo,[T(s("img",fo,null,512),[[k,e.getCoinIcon(n)]]),s("span",null,a(n.symbol),1)]),s("div",yo,[s("div",_o,a(Number(n.amount)==0?0:Number(n.amount)>1e-6?("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(n.amount,n.decimals),n.decimals):"<0.000001"),1),s("div",Ro,a(Number(n.amountUSD)==0?"$0":Number(n.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:o(u))(n.amountUSD,2):"<$0.01"),1)])]))),128))])):f("",!0)],2),e.pItem.is_display_rewarder&&!("checkNullObj"in e?e.checkNullObj:o(ue))(e.pItem.rewarder_infos)&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0?(t(),r("div",{key:0,class:oe(["info-block cursor-block",e.pendingRewarder==0?"block-none":""])},[s("div",$o,a(e.$t("newAdd.pendingRewards")),1),e.pendingRewarder||e.pendingRewarder==0?(t(),r("div",Uo," $"+a(e.pendingRewarder>0&&e.pendingRewarderView>0?e.pendingRewarderView:e.pendingRewarder>0&&e.pendingRewarderView<=0?"<0.01":0),1)):(t(),r("div",No,[V(c,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])),e.pendingRewarder>0?(t(),r("div",Co,[(t(!0),r(K,null,Z(e.pendingRewarderArr,n=>(t(),r("div",{key:n,class:"rewarder-info"},[s("div",Po,[T(s("img",So,null,512),[[k,n.logoURI]]),s("span",null,a(n.symbol),1)]),s("div",Ao,[s("div",Oo,a(("decimalUi"in e?e.decimalUi:o(v))(n.amount,n.decimals)),1),s("div",jo,a(Number(n.amountUSD)==0?"$0":Number(n.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:o(u))(n.amountUSD,2):"<$0.01"),1)])]))),128))])):f("",!0)],2)):f("",!0)])])])]),s("div",Do,[s("div",{class:"card-header-right",onClick:b[1]||(b[1]=(...n)=>e.clickDetails&&e.clickDetails(...n))},[s("div",Lo,[s("p",null,a(e.lever),1),To]),s("div",Bo,[s("p",null,a(e.aprNum)+"%",1),Eo]),Fo]),s("div",Vo,[s("div",Ho,[Go,s("div",qo,a(e.pItem.fee*100)+"%",1)]),s("div",Mo,[s("div",Wo,[ne("Price Range ("),s("span",null,a(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol)+" per "+a(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol)+")",1)]),s("div",zo,[s("div",Jo,[s("div",Ko,a(e.pItem.needReverse?e.pItem.maxPrice==="∞"?"0":("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(new e.Decimal(1).div(e.pItem.maxPrice).toString(),6)):("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.minPrice,6))),1),e.store.theme=="default"?(t(),r("img",Zo)):(t(),r("img",Qo)),s("div",Xo,a((e.pItem.needReverse?e.pItem.minPrice.indexOf("+")>-1||e.pItem.minPrice=="0":e.pItem.maxPrice.indexOf("+")>-1||e.pItem.maxPrice==="∞")?"∞":e.pItem.needReverse?("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(1/e.pItem.minPrice,6)):("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.maxPrice,6))),1)])])]),s("div",Yo,[xo,s("div",ea," $"+a(e.pItem.amountUSD=="--"?"--":Number(e.pItem.amountUSD)==0?0:Number(e.pItem.amountUSD)<.01?"<0.01":("addCommom"in e?e.addCommom:o(u))(e.pItem.amountUSD,2)),1),e.pItem.amountUSD>0?(t(),r("div",sa,[s("div",oa,[s("div",aa,[T(s("img",na,null,512),[[k,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)]]),s("span",null,a(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("div",ta,[s("div",ra,a(e.pItem.needReverse?("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.amountB,e.pItem.token_b.decimals)):("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.amountA,e.pItem.token_a.decimals))),1),e.pItem.needReverse?(t(),r("div",da,a(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("addCommom"in e?e.addCommom:o(u))(e.pItem.tokenBRates,2):"<$0.01"),1)):(t(),r("div",ia,a(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("addCommom"in e?e.addCommom:o(u))(e.pItem.tokenARates,2):"<$0.01"),1))])]),s("div",la,[s("div",ma,[T(s("img",ua,null,512),[[k,e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)]]),s("span",null,a(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),s("div",pa,[s("div",ca,a(e.pItem.needReverse?("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.amountA,e.pItem.token_a.decimals)):("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.amountB,e.pItem.token_b.decimals))),1),e.pItem.needReverse?(t(),r("div",ha,a(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.tokenARates,2)):"<$0.01"),1)):(t(),r("div",va,a(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(e.pItem.tokenBRates,2)):"<$0.01"),1))])])])):f("",!0)]),s("div",ka,[ga,e.pendingFees==="--"?(t(),r("div",ba,"$ --")):isNaN(e.pendingFees)?(t(),r("div",wa,[V(c,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])):(t(),r("div",Ia,a(e.pendingFees==0?"$0":e.pendingFees<.01?"<$0.01":"$"+("addCommom"in e?e.addCommom:o(u))(e.pendingFees,2)),1)),e.pendingFees>0?(t(),r("div",fa,[(t(!0),r(K,null,Z(e.pendingFeesArr,n=>(t(),r("div",{key:n,class:"rewarder-info"},[s("div",ya,[T(s("img",_a,null,512),[[k,e.getCoinIcon(n)]]),s("span",null,a(n.symbol),1)]),s("div",Ra,[s("div",$a,a(Number(n.amount)==0?0:Number(n.amount)>1e-6?("addCommom"in e?e.addCommom:o(u))(("decimalUi"in e?e.decimalUi:o(v))(n.amount,n.decimals),n.decimals):"<0.000001"),1),s("div",Ua,a(Number(n.amountUSD)==0?"$0":Number(n.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:o(u))(n.amountUSD,2):"<$0.01"),1)])]))),128))])):f("",!0)]),e.pItem.is_display_rewarder&&!("checkNullObj"in e?e.checkNullObj:o(ue))(e.pItem.rewarder_infos)&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0?(t(),r("div",Na,[s("div",Ca,a(e.$t("newAdd.pendingRewards")),1),e.pendingRewarder||e.pendingRewarder==0?(t(),r("div",Pa," $"+a(e.pendingRewarder>0&&e.pendingRewarderView>0?e.pendingRewarderView:e.pendingRewarder>0&&e.pendingRewarderView<=0?"<0.01":0),1)):(t(),r("div",Sa,[V(c,{class:"upgrade-reward-skeleton",loading:!0,active:"",paragraph:!1})])),e.pendingRewarder>0?(t(),r("div",Aa,[(t(!0),r(K,null,Z(e.pendingRewarderArr,n=>(t(),r("div",{key:n,class:"rewarder-info"},[s("div",Oa,[T(s("img",ja,null,512),[[k,n.logoURI]]),s("span",null,a(n.symbol),1)]),s("div",Da,[s("div",La,a(("decimalUi"in e?e.decimalUi:o(v))(n.amount,n.decimals)),1),s("div",Ta,a(Number(n.amountUSD)==0?"$0":Number(n.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:o(u))(n.amountUSD,2):"<$0.01"),1)])]))),128))])):f("",!0)])):f("",!0)])])])}const Ea=ge(bs,[["render",Ba],["__scopeId","data-v-1917e0be"]]),Fa=he({setup(){const e=N(!1),{t:b}=ke(),D=N(["position"]),S=$e(),I=N(""),L=we(),$=g(()=>L),c=g(()=>$.value.chainName?Ne[$.value.chainName]:{});let k=N([]);const A=_e(),n=g(()=>A),H=Je(),B=g(()=>H),Q=N(!1),G=N(b("tab.all")),X=N([b("tab.layerZero"),b("tab.wormhole"),b("tab.celer")]),z=N(!0),pe=N("TVL"),te=()=>{e.value=!0,k.value=[],B.value.address&&A.getMyPositons(B.value.address,n.value.poolsObj,$.value.chainName),setTimeout(()=>{e.value=!1},1e3)};W(()=>$.value.isRefresh,d=>{var i;d&&((i=S==null?void 0:S.currentRoute)==null?void 0:i.value.name.split("-")[1])=="position"&&te()}),Ue(()=>{k.value=[],document.addEventListener("click",()=>{Q.value=!1}),A.setMyPositionsLoading(!0)}),Xe(()=>{document.addEventListener("click",()=>{Q.value=!1})}),Ye(()=>{B.value.connected||(k.value=[])});const Y=()=>{e.value=!0;let d=[];n.value.myPositions.forEach(i=>{var O,E,M,F;let m,h;const p=i.amountA*((O=n.value.RATES[i.token_a.address])==null?void 0:O.price),w=i.amountB*((E=n.value.RATES[i.token_b.address])==null?void 0:E.price);(M=n.value.RATES[i.token_a.address])!=null&&M.price&&((F=n.value.RATES[i.token_b.address])!=null&&F.price)?(m=p+w,h=p+w):(m=" --",h=0),d.push({...i,amountUSD:m,amountUSDOrigin:h,tokenARates:p,tokenBRates:w})}),G.value!="All"?z.value?(k.value=d.sort((i,m)=>Number(m.amountUSDOrigin)-Number(i.amountUSDOrigin)),e.value=!1):(k.value=d.sort((i,m)=>Number(i.amountUSDOrigin)-Number(m.amountUSDOrigin)),e.value=!1):z.value?(k.value=d.sort((i,m)=>m.amountUSDOrigin-i.amountUSDOrigin),e.value=!1):(k.value=d.sort((i,m)=>i.amountUSDOrigin-m.amountUSDOrigin),e.value=!1),console.log(k.value,"list.value========>")};W(()=>[n.value.myPositions,n.value.RATES],([d,i])=>{d&&i&&(console.log("0605==>updateLpList9099999"),Y())},{immediate:!0}),W(()=>[B.value.address,n.value.poolConfigList,n.value.poolsObj,$.value.chainName],([d,i,m,h])=>{var p,w,O;d&&i&&i.length>0&&h&&(h!=null&&h.toLowerCase().includes((p=i[0])==null?void 0:p.chain))&&!ue(m)&&(h==="Aptos"?i.length===Object.values(m).length:(O=(w=Object.values(m)[0])==null?void 0:w.chain)!=null&&O.includes("sui"))&&(console.log("0605==>getMyPositons9099999"),A.getMyPositons(B.value.address,m,h))},{immediate:!0,deep:!0}),W(()=>G.value,d=>{Y()}),W(()=>z.value,d=>{Y()});const x=d=>{const i=[];X.value.forEach((m,h)=>{m==d?i[h]=G.value:i[h]=m}),X.value=i,G.value=d},q=ss(),U=g(()=>q),y=g(()=>A),ce=async d=>{await q.getSourceGroups();const i=U.value.sourceGroups&&U.value.sourceGroups.length>0&&U.value.sourceGroups[0]&&U.value.sourceGroups[0].sources||[];for(let m=0;m<i.length;m++){const{pool_address:h,position_index:p}=JSON.parse(i[m].blockchainAddress);let w=!1,O;for(let E=0;E<d.length;E++){const{poolAddress:M,index:F}=d[E];h==M&&Number(F)==Number(p)&&(w=!0),O={pool_address:h,position_index:p}}w||await q.subscribePosition(O,"",!1,!1)}},fe=async()=>{await q.getSourceGroups();const d=U.value.sourceGroups&&U.value.sourceGroups.length>0&&U.value.sourceGroups[0]&&U.value.sourceGroups[0].sources||[];for(let i=0;i<d.length;i++){const{pool_address:m,position_index:h}=JSON.parse(d[i].blockchainAddress),{name:p}=d[i],w={pool_address:m,position_index:h};await q.subscribePosition(w,p,!1,!1)}},l=g(()=>y.value.myPositionsLoading);W(()=>y.value.myPositions,(d,i)=>{c.value.hasNotifi&&(d&&d.length>0&&i&&i.length!==d.length?ce(d):d&&d.length==0&&!l.value&&fe())},{immediate:!0});const R=d=>{var i;return(d==null?void 0:d.logoURI)||(d==null?void 0:d.logo_url)||((i=n.value.tokensObj[d==null?void 0:d.address])==null?void 0:i.logo_url)||($.value.theme==="default"?ae("/image/coins/unknown.png"):ae("/image/coins/sui-unknown.png"))},C=N(null),P=g(()=>C.value&&C.value.firstToken?C.value.firstToken:null),_=g(()=>C.value&&C.value.lastToken?C.value.lastToken:null),J=g(()=>{let d=[];d=k.value;const i=d.filter((m,h)=>P.value&&_.value?m.coinA.symbol==P.value.symbol&&m.coinB.symbol==_.value.symbol||m.coinA.symbol==_.value.symbol&&m.coinB.symbol==P.value.symbol:P.value?m.coinA.symbol.toLowerCase().includes(P.value.symbol.toLowerCase())||m.coinB.symbol.toLowerCase().includes(P.value.symbol.toLowerCase()):_.value?m.coinA.symbol.toLowerCase().includes(_.value.symbol.toLowerCase())||m.coinB.symbol.toLowerCase().includes(_.value.symbol.toLowerCase()):d);return n.value.myPositionsLoading||L.setPositiomAmount(i.length),i});return xe(()=>{L.setPositiomAmount("--")}),{showList:J,childTokenSelectRef:C,firstToken:P,lastToken:_,getCoinIcon:R,changeSortLabel:x,label:Q,labelList:X,labelValue:G,select:z,selectValue:pe,t:b,pools:n,store:$,wallet:B,list:k,clickRefresh:te,refresh:e,current:D,router:S,searchKey:I}}});const Oe=e=>(be("data-v-a9330e48"),e=e(),Ie(),e),Va={class:"upgrade-position-list-container"},Ha={class:"content-top"},Ga={class:"content-top-left"},qa={class:"content-top-right"},Ma={class:"value"},Wa=Oe(()=>s("use",{"xlink:href":"#icon-icon_on"},null,-1)),za=[Wa],Ja={key:0,class:"select-item"},Ka=["onClick"],Za={class:"search-select-box"},Qa=Oe(()=>s("span",null,"TVL",-1)),Xa={key:0,src:Se,alt:""},Ya={key:1,class:"fan-img",src:Se,alt:""},xa={key:0,class:"upgrade-loading"},en={key:1,class:"position-list"},sn={key:2,class:"no-data"},on={key:0,src:os,alt:""},an={key:1,src:as,alt:""},nn={key:3,class:"no-data"},tn={key:0,src:ns,alt:""},rn={key:1,src:ts,alt:""};function dn(e,b,D,S,I,L){const $=Fe,c=Ve,k=Ea,A=es;return t(),r("div",Va,[s("div",Ha,[s("div",Ga,[V($,{ref:"childTokenSelectRef"},null,512)]),s("div",qa,[e.store.theme=="default"?(t(),r("div",{key:0,class:"search-label",onClick:b[0]||(b[0]=ye(n=>e.label=!e.label,["stop"]))},[s("span",null,a(e.$t("newAdd.label")),1),s("div",Ma,a(e.labelValue),1),(t(),r("svg",{"aria-hidden":"true",class:oe(e.label?"show-icon icon":"icon")},za,2)),e.label?(t(),r("div",Ja,[(t(!0),r(K,null,Z(e.labelList,(n,H)=>(t(),r("div",{key:H,class:"select-menu-item",onClick:B=>e.changeSortLabel(n)},a(n),9,Ka))),128))])):f("",!0)])):f("",!0),s("div",Za,[s("div",{class:"search-select",onClick:b[1]||(b[1]=ye(n=>e.select=!e.select,["stop"]))},[ne(a(e.$t("newAdd.sortBy"))+" ",1),s("div",null,[Qa,e.select?(t(),r("img",Xa)):(t(),r("img",Ya))])])])])]),e.pools.myPositionsLoading&&e.wallet.connected?(t(),r("div",xa,[V(c,{loading:e.pools.myPositionsLoading,type:"position"},null,8,["loading"])])):f("",!0),e.showList&&e.showList.length>0&&e.wallet.connected&&!e.pools.myPositionsLoading?(t(),r("div",en,[(t(!0),r(K,null,Z(e.showList,(n,H)=>(t(),Re(k,{key:H,"p-item":n},null,8,["p-item"]))),128))])):f("",!0),e.showList&&e.showList.length<=0&&!e.pools.myPositionsLoading&&e.wallet.connected?(t(),r("div",sn,[e.store.theme=="default"?(t(),r("img",on)):(t(),r("img",an)),s("span",null,a(e.$t("common.noLiquidityPositions")),1)])):f("",!0),e.wallet.connected?f("",!0):(t(),r("div",nn,[e.store.theme=="default"?(t(),r("img",tn)):(t(),r("img",rn)),V(A,{class:"connect-wallet",onClick:b[2]||(b[2]=n=>e.wallet.setIsShowWalletModal(!0))},{default:ve(()=>[ne(a(e.$t("button.connectWallet")),1)]),_:1})]))])}const Cn=ge(Fa,[["render",dn],["__scopeId","data-v-a9330e48"]]);export{Cn as default};
