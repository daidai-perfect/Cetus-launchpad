import{a as q,C as _e,o as i,f as n,F as J,E as Q,G as A,h as e,I as te,x as _,u as m,e as z,p as X,k as Z,m as w,r as p,A as he,c as E,w as F,i as b,y as ge,j as H,D as ye,$ as me,Y as we,K as Ce,P as be,B as oe,N as ke,S as $e}from"./entry.f915a1e9.js";import"./index.cce2acd5.js";import{u as le}from"./pool.4c0bddd9.js";import{s as ne}from"./formatter.bbce4c5f.js";import{V as k,h as L,a as Se}from"./common.26bee659.js";import{_ as Pe}from"./coin-pair-name.ef94b07f.js";import{_ as Le}from"./no-data.3c7720ee.js";/* empty css              *//* empty css              *//* empty css              */import{u as Ye,c as xe,b as Ae}from"./index.4a60ce8c.js";import{u as Ue}from"./index.bdee7b42.js";import{u as Te,a as De,c as Ie,b as Re}from"./usePositionList.76380144.js";const Fe={key:0,class:"claim-list"},Oe={class:"left"},Ne={alt:""},Be={class:"right"},je=q({__name:"claim-list",props:{myClaimList:{type:Object,default:()=>[]}},setup(s){return console.log("ðŸš€ðŸš€ðŸš€ ~ file: claim-list.vue:25 ~ myClaimList:",s.myClaimList),(f,$)=>{const h=_e("image");return s.myClaimList&&s.myClaimList.length>0?(i(),n("div",Fe,[(i(!0),n(J,null,Q(s.myClaimList,l=>(i(),n("div",{key:l,class:"claim-item"},[e("div",Oe,[te(e("img",Ne,null,512),[[h,l.tokenInfo.logo_url]]),e("span",null,_(l.tokenInfo.symbol),1)]),e("div",Be,[e("span",null,_(m(k)(l.amount,l.decimals,!0,!1,!1)),1),e("span",null,_(m(k)(l.amountUSD,2,!1,!1)),1)])]))),128))])):A("",!0)}}});const ve=z(je,[["__scopeId","data-v-e1793294"]]),pe=s=>(X("data-v-237b921c"),s=s(),Z(),s),Ee={class:"fees-and-reward"},He={key:0,class:"fees"},qe={class:"fees-title"},ze=pe(()=>e("div",null,"Fees",-1)),Me={alt:""},Ve={class:"symbol"},We={class:"amount"},Ke={class:"amount-usd"},Ge={key:1,class:"fees"},Je={class:"fees-title"},Qe=pe(()=>e("div",null,"Mining rewards",-1)),Xe={alt:""},Ze={class:"symbol"},es={class:"amount"},ss={class:"amount-usd"},ts=q({__name:"fees-and-reward",props:{pendingRewarderList:{type:Object,default:()=>[]},pendingFeesList:{type:Object,default:()=>[]},rewarderUsd:{type:String,default:""},feeOwedUsd:{type:String,default:""}},setup(s){return console.log("ðŸš€ðŸš€ðŸš€ ~ file: fees-and-reward.vue:63 ~ props:",s),(f,$)=>{const h=_e("image");return i(),n("div",Ee,[s.feeOwedUsd&&s.feeOwedUsd>0?(i(),n("div",He,[e("div",qe,[ze,e("div",null,_(m(k)(s.feeOwedUsd,2,!1,!1)),1)]),(i(!0),n(J,null,Q(s.pendingFeesList,l=>(i(),n("div",{key:l,class:"fees-details"},[e("div",null,[te(e("img",Me,null,512),[[h,l.tokenInfo.logo_url]]),e("span",Ve,_(l.tokenInfo.symbol),1)]),e("div",null,[e("span",We,_(m(k)(l.amount,l.tokenInfo.decimals,!0,!1,!1)),1),e("span",Ke,"("+_(m(k)(l.amountUSD,2,!1,!1))+")",1)])]))),128))])):A("",!0),s.rewarderUsd&&s.rewarderUsd>0?(i(),n("div",Ge,[e("div",Je,[Qe,e("div",null,_(m(k)(s.rewarderUsd,2,!1,!1)),1)]),(i(!0),n(J,null,Q(s.pendingRewarderList,l=>(i(),n("div",{key:l,class:"fees-details"},[e("div",null,[te(e("img",Xe,null,512),[[h,l.tokenInfo.logo_url]]),e("span",Ze,_(l.tokenInfo.symbol),1)]),e("div",null,[e("span",es,_(m(k)(l.amount,l.tokenInfo.decimals,!0,!1,!1)),1),e("span",ss,"("+_(m(k)(l.amountUSD,2,!1,!1))+")",1)])]))),128))])):A("",!0)])}}});const os=z(ts,[["__scopeId","data-v-237b921c"]]),D=s=>(X("data-v-914b5796"),s=s(),Z(),s),ls={class:"yield-details-box"},is={class:"yield-details"},as={class:"total-claim"},ns=D(()=>e("div",null,"Pending Yield",-1)),ds={class:"total-claim-usd"},cs={class:"position-detail"},us={class:"position-detail-top"},rs=D(()=>e("div",{class:"left"},"Position",-1)),_s={class:"right plus-switch plus-liquidity-switch"},ms=D(()=>e("span",null,"Hide yield < ",-1)),vs={class:"position-detail-bottom"},ps={class:"item-top"},fs={class:"left"},hs={class:"bottom"},gs={class:"right"},ys=["onClick"],ws={key:0,"aria-hidden":"true"},Cs=D(()=>e("use",{"xlink:href":"#icon-icon_sel"},null,-1)),bs=[Cs],ks={class:"item-bottom"},$s=D(()=>e("div",{class:"left"}," Pending Yield ",-1)),Ss={class:"right"},Ps={key:0,class:"yield-amount"},Ls={key:1,class:"yield-amount-zero"},Ys={class:"select"},xs={class:"all"},As=D(()=>e("use",{"xlink:href":"#icon-icon_sel"},null,-1)),Us=[As],Ts=D(()=>e("span",null,"Select all",-1)),Ds={class:"amount-selected"},Is=D(()=>e("div",null,"Amount selected",-1)),Rs=q({__name:"yield-details",props:{pendingYieldPositionList:{type:Object,default:()=>[]},isShowYiedlDetails:{type:Boolean,default:!1}},emits:["showClaimYield","close"],setup(s,{emit:d}){const f=d,$=s,h=le(),l=w(()=>h.positionPendingFees),a=w(()=>h.positionPendingRewards),g=p([]),U=p({}),M=p(),Y=p(!0),j=o=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: yield-details.vue:364 ~ watchPositionList ~ list:",o);const t=[];let u=L(0);for(let r=0;r<o.length;r++){const y=o[r],I=l==null?void 0:l.value[y==null?void 0:y.positionId],R=a==null?void 0:a.value[y==null?void 0:y.positionId],B=I==null?void 0:I.feesAmountUSD.add((R==null?void 0:R.rewardsAmount)||0).toString();x.value&&B>P.value?t.push({totalRewardUsd:B,...y,positionPendingFees:I,positionPendingRewards:R,positionName:`Cetus LP | ${y.positionName}`}):x.value||t.push({totalRewardUsd:B,...y,positionPendingFees:I,positionPendingRewards:R,positionName:`Cetus LP | ${y.positionName}`}),u=u.add(B)}g.value=t.sort((r,y)=>y.totalRewardUsd-r.totalRewardUsd),U.value=Object.fromEntries(t.map(r=>[r==null?void 0:r.positionId,r])),M.value=u,(Y.value||S.value=="all")&&(c.value=g.value.map(r=>r.positionId),Y.value=!1)},c=p([]),S=p("all"),O=o=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: yield-details.vue:414 ~ selectPosition ~ selectList.value:",c.value);const t=c.value.indexOf(o);S.value=="all"&&c.value.length==0?g.value.forEach(u=>{u.positionId!==o&&c.value.push(o)}):t>-1?c.value.splice(t,1):c.value.push(o),c.value.length!==g.value.length?S.value="":S.value="all",console.log("ðŸš€ðŸš€ðŸš€ ~ file: yield-details.vue:429 ~ selectPosition ~ selectList:",c.value)},x=p(!0),P=p(.01),V=o=>{const t=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,4})?).*$");o.target.value=o.target.value.replace(t,"$1"),P.value=o.target.value},se=()=>{(!P.value||P.value<.01)&&(P.value=.01)};he(()=>[$.pendingYieldPositionList,x.value,P.value],([o])=>{o&&o.length>0&&j(o)},{immediate:!0});const N=w(()=>{let o=L(0);return c.value.forEach(t=>{var r;const u=((r=U.value[t])==null?void 0:r.totalRewardUsd)||0;console.log("ðŸš€ðŸš€ðŸš€ ~ file: yield-details.vue:436 ~ amountSelected ~ ele.totalRewardUsd:",t.totalRewardUsd),o=o.add(u)}),console.log("ðŸš€ðŸš€ðŸš€ ~ file: yield-details.vue:447 ~ amountSelected ~ selectedTotalAmount.toString():",o.toString()),o.toString()}),C=()=>{S.value="all",g.value.forEach(o=>{c.value.includes(o.positionId)||c.value.push(o.positionId)})},T=()=>{const o=[];g.value.forEach(t=>{c.value.includes(t.positionId)&&o.push(t)}),console.log("ðŸš€ðŸš€ðŸš€ ~ file: yield-details.vue:494 ~ showClaimYield ~ result:",o),f("showClaimYield",o)};return(o,t)=>{const u=we,r=Ce,y=Pe,I=be,R=Le,B=oe;return i(),E(m(me),{title:"Details",footer:null,visible:s.isShowYiedlDetails,width:"440px","wrap-class-name":"details-modal",class:"new-modal-have-btn",onCancel:t[2]||(t[2]=v=>o.$emit("close"))},{default:F(()=>[e("div",ls,[e("div",is,[e("div",as,[ns,e("div",ds,[e("span",null,_(m(k)(M.value,2,!1,!1)),1)])]),e("div",cs,[e("div",us,[rs,e("div",_s,[b(u,{class:"range-alerts-switch",checked:x.value,onClick:t[0]||(t[0]=()=>{x.value=!x.value,Y.value=!1})},null,8,["checked"]),ms,b(r,{value:`$${P.value}`,onChange:V,onBlur:se},null,8,["value"])])]),e("div",vs,[g.value&&g.value.length>0?(i(!0),n(J,{key:0},Q(g.value,v=>{var ae;return i(),n("div",{key:v,class:"position-item"},[e("div",ps,[e("div",fs,[b(y,{"from-coin":v.coinA,"to-coin":v.coinB,"fee-tier":(ae=v.feeRate)==null?void 0:ae.replace("%","")},null,8,["from-coin","to-coin","fee-tier"]),e("div",hs,_(v.positionName),1)]),e("div",gs,[e("div",{class:ge(["radio",v.totalRewardUsd<=0?"radio-disable":""]),onClick:ht=>v.totalRewardUsd>0?O(v.positionId):""},[(S.value=="all"||c.value.includes(v.positionId))&&v.totalRewardUsd>0?(i(),n("svg",ws,bs)):A("",!0)],10,ys)])]),e("div",ks,[$s,e("div",Ss,[v.totalRewardUsd>0?(i(),n("div",Ps,[b(I,{placement:"bottomRight","overlay-class-name":"yield-amount-tooltip"},{title:F(()=>[b(os,{"pending-fees-list":v.positionPendingFees.feesList,"pending-rewarder-list":v.positionPendingRewards.rewarderAmountOwed,"rewarder-usd":v.positionPendingRewards.rewardsAmount,"fee-owed-usd":v.positionPendingFees.feesAmountUSD},null,8,["pending-fees-list","pending-rewarder-list","rewarder-usd","fee-owed-usd"])]),default:F(()=>[H(_(m(k)(v.totalRewardUsd,2,!1,!1))+" ",1)]),_:2},1024)])):(i(),n("div",Ls,_(m(k)(v.totalRewardUsd,2,!1,!1)),1))])])])}),128)):(i(),E(R,{key:1,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No Position Found"}))])])]),e("div",Ys,[e("div",xs,[e("div",{class:"radio",onClick:C},[S.value=="all"?(i(),n("svg",{key:0,"aria-hidden":"true",onClick:t[1]||(t[1]=ye(()=>{c.value=[],S.value=""},["stop"]))},Us)):A("",!0)]),Ts]),e("div",Ds,[Is,e("div",null,_(m(k)(N.value,2,!1,!1)),1)])]),b(B,{class:"claim-yield-btn modal-bottom-btn",disabled:N.value=="0",onClick:T},{default:F(()=>[H("Claim Yield")]),_:1},8,["disabled"])])]),_:1},8,["visible"])}}});const Fs=z(Rs,[["__scopeId","data-v-914b5796"]]),de=p(!1),G=p(!1),fe=Ye(),{setIsShowSuccess:Os,setIsShowRejected:ce,setIsShowWaiting:W,setTransactionDesc:Ns,setTransactionTxid:ue}=fe,Bs=xe("Sui"),K=Ae("Sui"),js=Ue(),re=w(()=>js),Es=le(),Hs=w(()=>Es.poolsObj);w(()=>fe);Te();De();Ie();const{getPositionList:qs}=Re(),zs=async s=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: data.ts:32 ~ batchHarvestAndClmmFee ~ positionList:",s),G.value=!0;try{const d=[],f=[];s.forEach(a=>{const g=Hs.value[a.pool].miningRewardList.filter(U=>U.emissionsEveryDay>0).map(U=>U.coinType);console.log("ðŸš€ðŸš€ðŸš€ ~ file: data.ts:66 ~ batchHarvestAndClmmFee ~ position:",a),a.positionSource=="clmm"?d.push({pool_id:a.pool,pos_id:a.positionId,collect_fee:!0,rewarder_coin_types:g,coinTypeA:a.defaultCoinaAddress,coinTypeB:a.defaultCoinbAddress}):f.push({pool_id:a.farm_pool_id,position_nft_id:a.farmPositionId,clmm_pool_id:a.pool,collect_fee:!0,collect_frams_rewarder:!1,clmm_rewarder_types:g,coinTypeA:a.defaultCoinaAddress,coinTypeB:a.defaultCoinbAddress})}),ue(""),Ns("Claim Yield"),W(!0),console.log("ðŸš€ðŸš€ðŸš€ ~ file: data.ts:71 ~ batchHarvestAndClmmFee ~ clmmPositionList:",d),console.log("ðŸš€ðŸš€ðŸš€ ~ file: data.ts:71 ~ batchHarvestAndClmmFee ~ framsPositionList:",f);const $=await Bs.batchHarvestAndClmmFee(f,d),h=await K.signAndExecuteTransactionBlock(re.value.currentWallet,$.txb,$.payloadParams),l=K.handleTx(h);if(l&&l.hash){ue(l.hash),W(!1),Os(!0);const a={title:"Claim",desc:"Claim Yield",hash:l.hash};a.res=l.res,K.showTransitionPending(a),await K.watchTransaction(a)&&setTimeout(()=>{qs(re.value.address)},1e3)}else W(!1),ce(!0);G.value=!1,de.value=!1}catch(d){G.value=!1,W(!1),ce(!0),de.value=!1,console.log("batchHarvestAndClmmFee error:",d)}},ie=s=>(X("data-v-c84b105c"),s=s(),Z(),s),Ms={class:"claim-yield-content"},Vs={class:"total-claim"},Ws=ie(()=>e("div",null,"Total Claim",-1)),Ks={class:"total-claim-usd"},Gs=ie(()=>e("svg",{"aria-hidden":"true",class:"back-icon"},[e("use",{"xlink:href":"#icon-icon-back"})],-1)),Js=ie(()=>e("span",null,"Back",-1)),Qs=[Gs,Js],Xs=q({__name:"claim-yield",props:{pendingYield:{type:Number,default:0},myClaimList:{type:Object,default:()=>[]},myClaimPositionList:{type:Object,default:()=>[]}},setup(s){return(d,f)=>{const $=oe;return i(),E(m(me),{class:"new-modal-have-btn",title:"Claim Yield",visible:!0,footer:null,width:"440px",onCancel:f[2]||(f[2]=h=>d.$emit("close"))},{default:F(()=>[e("div",Ms,[e("div",Vs,[Ws,e("div",Ks,_(s.pendingYield>0&&s.pendingYield<.01?"<$0.01":`$${m(Se)(s.pendingYield,2)}`),1)]),b(ve,{"my-claim-list":s.myClaimList},null,8,["my-claim-list"]),e("div",{class:"choose-amount",onClick:f[0]||(f[0]=h=>d.$emit("chooseAmount"))},Qs),b($,{class:"confirm-btn modal-bottom-btn",loading:m(G),onClick:f[1]||(f[1]=h=>m(zs)(s.myClaimPositionList))},{default:F(()=>[H("Confirm")]),_:1},8,["loading"])])]),_:1})}}});const Zs=z(Xs,[["__scopeId","data-v-c84b105c"]]),ee=s=>(X("data-v-486d88d3"),s=s(),Z(),s),et={class:"total-info"},st={class:"total-liquidity"},tt=ee(()=>e("span",{class:"total-liquidity-text"},"Total Liquidity",-1)),ot={key:0,class:"skeleton-box"},lt={key:1,class:"total-liquidity-usd"},it={class:"pending-yield"},at=ee(()=>e("div",{class:"pending-yield-text"},"Pending Yield",-1)),nt={key:0,class:"skeleton-box"},dt={key:1,class:"pending-yield-show-value"},ct={class:"pending-yield-value-box"},ut={key:0,class:"claim-list-box"},rt={class:"claim-list-content"},_t=ee(()=>e("use",{"xlink:href":"#icon-icon_expand"},null,-1)),mt=[_t],vt=ee(()=>e("use",{"xlink:href":"#icon-icon_expand"},null,-1)),pt=[vt],ft=q({__name:"total-position",setup(s){const d=le(),f=w(()=>d.isPositionLoading),$=w(()=>d.positionTotalPrice),h=w(()=>d.positionTotalPendingFees),l=w(()=>d.positionTotalPendingRewards),a=w(()=>(console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:64 ~ pendingYield ~ positionTotalPendingFees.value:",h.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:65 ~ pendingYield ~ positionTotalPendingRewards.value:",l.value),h.value==="--"||l.value==="--"?0:L(h.value||0).add(l.value||0).toNumber())),g=w(()=>d.pendingYieldLoading),U=w(()=>d.pendingYieldTokenList),M=p(!1),Y=p(!1),j=p(1),c=()=>{a.value>0&&(Y.value=!0,j.value=j.value==1?2:1)},S=w(()=>d.pendingYieldPositionList),O=p(!1),x=p(),P=p(),V=p(),se=N=>{Y.value=!1,O.value=!0;let C=L(0);const T=[],o={};N.forEach(t=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: total-position.vue:352 ~ showClaimYield ~ ele:",t);const u=t.positionPendingRewards.rewardsAmount||0,r=t.positionPendingFees.feesAmountUSD||0;C=C.add(L(u)).add(L(r)),T.push(...t.positionPendingFees.feesList),T.push(...t.positionPendingRewards.rewarderAmountOwed)}),T.forEach(t=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: total-position.vue:369 ~ showClaimYield ~ claimItem:",t);const u=t.tokenInfo.address;o[u]?o[u]={...t,amountUSD:L(o[u].amountUSD).add(t.amountUSD).toString(),amount:L(o[u].amount).add(t.amount).toString()}:(o[u]={},o[u]={...t,amountUSD:L(0).add(t.amountUSD).toString(),amount:L(0).add(t.amount).toString()})}),console.log("ðŸš€ðŸš€ðŸš€ ~ file: total-position.vue:362 ~ showClaimYield ~ claimObj:",o),x.value=C.toNumber(),V.value=Object.values(o).filter(t=>t.amount>0).sort((t,u)=>u.amountUSD-t.amountUSD),P.value=N};return(N,C)=>{const T=$e,o=oe;return i(),n("div",et,[e("div",st,[tt,f.value?(i(),n("div",ot,[b(T,{class:"upgrade-text-skeleton",active:"",paragraph:!1})])):(i(),n("span",lt,_(m(ne)($.value||0)),1))]),e("div",it,[at,g.value?(i(),n("div",nt,[b(T,{class:"upgrade-text-skeleton",active:"",paragraph:!1})])):(i(),n("div",dt,[e("div",ct,[e("span",{class:"pending-yield-usd",style:ke(a.value<=0?{border:"none"}:{}),onClick:c},[H(_(m(ne)(a.value||0))+" ",1),a.value>0?(i(),n("div",ut,[e("div",rt,[b(ve,{"my-claim-list":U.value},null,8,["my-claim-list"])])])):A("",!0)],4),a.value>0?(i(),n("svg",{key:0,class:"icon route-icon pc-icon","aria-hidden":"true",onClick:c},mt)):A("",!0),b(o,{class:"claim-all-btn",disabled:a.value<=0,loading:M.value,onClick:c},{default:F(()=>[H("Claim All")]),_:1},8,["disabled","loading"])]),a.value>0?(i(),n("svg",{key:0,class:"icon route-icon h5-icon","aria-hidden":"true",onClick:c},pt)):A("",!0)]))]),O.value?(i(),E(Zs,{key:0,"pending-yield":x.value,"my-claim-list":V.value,"my-claim-position-list":P.value,onClose:C[0]||(C[0]=t=>O.value=!1),onChooseAmount:C[1]||(C[1]=()=>{O.value=!1,Y.value=!0})},null,8,["pending-yield","my-claim-list","my-claim-position-list"])):A("",!0),(i(),E(Fs,{key:j.value,"pending-yield-position-list":S.value,"is-show-yiedl-details":Y.value,onClose:C[2]||(C[2]=()=>Y.value=!1),onShowClaimYield:se},null,8,["pending-yield-position-list","is-show-yiedl-details"]))])}}});const Ut=z(ft,[["__scopeId","data-v-486d88d3"]]);export{Ut as T};
