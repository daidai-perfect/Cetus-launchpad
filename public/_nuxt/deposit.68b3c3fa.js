import{a as je,r as y,m as C,q as Ci,A as se,e as De,o as a,f as l,I as dt,M as mt,h as o,N as Bi,x as n,u as S,G as g,c as Ke,p as ki,k as hi,O as Ji,L as fi,i as ee,w as Be,y as ei,S as Yi,K as vt,l as ge,B as Mi,j as ci,F as xe,E as ji,z as zi,s as Ei,Y as Hi,P as Qi,b as Xi,$ as Vi,a6 as ft,a0 as pt}from"./entry.82d9c46a.js";/* empty css              */import{positionError as bi,fromCoin as G,toCoin as W,tickList as gi,currentPrice as yi,currentPriceReverse as qi,direction as Ie,currentPriceTab as ce,defaultMinPrice as Oi,defaultMaxPrice as Fi,minPrice as J,maxPrice as z,toggle as xi,isStableFarmingRange as Oe,isInputTotalAmount as Ge,priceConfigObj as vi,fromCoinAmount as ie,toCoinAmount as te,fixedFromCoin as Fe,resetTickList as Zi,resetData as gt}from"./data.1cd08591.js";import{g as et,n as Di,d as M,a as x,c as ve,b as it,o as bt,s as kt,p as Gi}from"./common.9fb5840b.js";import{i as ri}from"./import-icon.de3e6c66.js";/* empty css              */import"./index.840463b0.js";/* empty css              */import{u as Je,b as Pi,a as pi}from"./index.fd3ccf30.js";import{T as Ni,g as ht,b as Me,c as tt,u as yt}from"./index.e949074f.js";import"./decimal.a2826370.js";import{s as Li,m as Ct,l as Pt,b as It,a as St}from"./transform.c672907f.js";import{D as h}from"./decimal.765d8738.js";/* empty css              */import{C as nt}from"./coin-img.917987a9.js";import{u as Ri}from"./farms.3e6ddaea.js";import{_ as ot}from"./icon_farms_2x.25f05fbe.js";import{_ as wt}from"./coin-select.26c45951.js";import{I as Tt}from"./icon-slippage.748d773f.js";import{I as _t}from"./icon-refresh.0950be05.js";import{I as rt}from"./icon-tooltip.c969dd23.js";import{C as at}from"./coin-img-warning.16457167.js";import{_ as $t}from"./deposit-ratio.f3b44c53.js";import{u as st}from"./notifi.d9a4edaa.js";import{N as At,I as Nt}from"./input-lock.cf19c586.js";import{_ as Lt}from"./status-block.863a3061.js";import{_ as lt}from"./icon-arrow_2x.4ffddb8e.js";import{T as qt}from"./token-input-block.feefdaa8.js";import{_ as Mt}from"./lock.35e1d915.js";import"./token-warning_2x.98153a95.js";import"./img-no-Positions_2x.73e6931c.js";import"./img-no-Positions_2x.2f784224.js";import"./swap-setting.5a97bac0.js";import"./icon-error_2x.87955f16.js";import"./token.db3cdd8b.js";import"./useWhale.fcce5e12.js";import"./token-dropdown-select.0345dd9d.js";import"./useDebounceFunction.d45dfc09.js";function Ki(e,u,A){const w=new h(10).pow(u-A);return new h(1.0001).pow(e).mul(w)}const Rt=je({props:{poolInfo:{type:Object,default:()=>({chartLoading:!1,token_a:{decimal:6},token_b:{decimal:6},currentLiquity:"50000000"})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:()=>[]},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1},currentPriceTab:{type:String,default:""},before7dContractPriceLowest:{type:String,default:""},before7dContractPriceHighest:{type:String,default:""},zoom:{type:Number,default:1}},setup(e,u){const A=y(""),w=y(""),$=C(()=>{var t,b,p,F,B,K;return(t=e.poolInfo)!=null&&t.current_sqrt_price&&((b=e.poolInfo)!=null&&b.coinA)&&((p=e.poolInfo)!=null&&p.coinB)?s.sqrtPriceX64ToPrice((F=e.poolInfo)==null?void 0:F.current_sqrt_price,(B=e.poolInfo)==null?void 0:B.coinA.decimals,(K=e.poolInfo)==null?void 0:K.coinB.decimals).toString():"0"}),R=C(()=>{let t=0;return e.direction?t=(Number(e.minPrice)/Number($.value)-1)*100:t=(Number(e.minPrice)/Number(1/Number($.value))-1)*100,t=t>0&&t<.1?.1:t,t=t<0&&t>-.1?-.1:t,t}),d=C(()=>{let t=0;return e.direction?t=(Number(e.maxPrice)/Number($.value)-1)*100:t=(Number(e.maxPrice)/Number(1/Number($.value))-1)*100,t=t>0&&t<.1?.1:t,t=t<0&&t>-.1?-.1:t,t}),P=Je(),f=C(()=>P),H=C(()=>f.value.chainName?Pi(f.value.chainName):{}),{TickMath:s,getNearestTickByTick:N}=H.value,L=(t=[])=>{let b=6;const p=Math.abs(Number(t[0])-Number(t[t.length-1]));return p>=6?b=0:p>=1?b=1:p>=.1?b=2:p>=.01?b=3:p>=.001?b=4:p>=1e-4?b=5:p>=1e-5?b=6:p>=1e-6?b=7:p>=1e-7&&(b=8),b},U=(t,b=1)=>{if(t&&t.token_a&&!e.chartLoading&&e.minPrice&&e.maxPrice){const p=Number(e.poolInfo.current_tick_index);let F=p+100*b,B=p-100*b,K,k;if(e.maxPrice==="âˆž")k=H.value.TickUtil.getMaxIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?k=s.priceToTickIndex(new h(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):k=s.priceToTickIndex(new h(1).div(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{k=443636}if(e.minPrice==="0")K=H.value.TickUtil.getMinIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?K=s.priceToTickIndex(new h(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):K=s.priceToTickIndex(new h(1).div(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{K=-443636}let Y=0;if(e.currentPriceTab!=="full range"){if(p>=K&&p<=k){const Q=p-K,me=k-p;Y=Math.max(Math.abs(Q),Math.abs(me))}else p<K?Y=Math.abs(k-p):Y=Math.abs(p-K);F=p+Y+100*b,B=p-Y-100*b}else{const Q=(Math.abs(p)>5e3,2e4);F=p+Q*b,B=p-Q*b}B<-443636&&(B=-443636),F>443636&&(F=443636);const I=new h(t.liquidity).div(Math.pow(10,8)).toString(),q=e.tickList,O=[],le=[];let re={};for(let Q=0;Q<q.length;Q++){if(re=q[Q],re.index<=p&&re.index>=B){if(O.length<1&&Q!==0){const me=q[Q-1];O.unshift({...me,index:B,source:"left"})}O.unshift(re)}else if(re.index>p&&re.index<=F&&(le.push(re),O.length<1&&Q!==0)){const me=q[Q-1];O.push({...me,index:B,source:"left"})}if(re.index>F){const me=q[Q];if(le.push({...me,index:F,source:"right"}),O.length<1&&Q!==0){const He=q[Q-1];O.push({...He,index:B,source:"left"})}break}}let X="0";for(let Q=O.length-1;Q>=0;Q--)X=new h(X).plus(new h(O[Q].liquidityNet.toString()).div(Math.pow(10,8))).toString(),O[Q].liquityAmount=X;let E=I;for(let Q=0;Q<le.length;Q++)E=new h(E).plus(new h(le[Q].liquidityNet.toString()).div(Math.pow(10,8))).toString(),le[Q].liquityAmount=E;let ue=[];const ne=q&&q.length>0?{index:p,liquityAmount:Number(I)}:{index:p,liquityAmount:0};(O.length>0||le.length>0)&&(ue=[...O.reverse(),ne,...le],e.direction||(ue=ue.reverse()));const $e=[];q.forEach(Q=>{$e.push({...Q,liquidityGross:Q.liquidityGross.toString(),liquidityNet:Q.liquidityNet.toString()})}),c(ue,B,F,K,k,p)}};let Z=y(!1);const j=y(!1);Ci(()=>{const t=document.body.clientWidth;j.value=!0,t<750?Z.value=!1:Z.value=!0,window.onresize=()=>{document.body.clientWidth<750?Z.value=!1:Z.value=!0,U(e.poolInfo,e.zoom)}});const c=(t,b,p,F,B,K)=>{let k,Y;e.direction?(k=Number(e.before7dContractPriceLowest)!==0?s.priceToTickIndex(new h(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",Y=Number(e.before7dContractPriceHighest)!==0?s.priceToTickIndex(new h(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):""):(k=Number(e.before7dContractPriceLowest)!==0?s.priceToTickIndex(new h(1).div(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",Y=Number(e.before7dContractPriceHighest)!==0?s.priceToTickIndex(new h(1).div(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"");const I={top:30,right:35,bottom:58,left:80};let q,O;Z.value?(q=528-I.left-I.right,O=242-I.top-I.bottom):(q=340-I.left-I.right,O=205-I.top-I.bottom);const le=p-b,re=parseInt(String(le/4));let X=[b+re/4,b+re,b+2*re,p-re,p-re/4];const E=b,ue=p,ne=q/(ue-E);e.currentPriceTab==="full range"&&(X=[b,b+2*re,p]);const $e=X.map(m=>e.direction?Ki(m,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString():new h(1).div(Ki(m,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)).toString()),Q=L($e);Li("#chart").selectAll("*").remove();const me=Li("#chart").attr("width",q+I.left+I.right).attr("height",O+I.top+I.bottom).append("g").attr("transform",`translate(${I.left},${I.right})`),He=Ct(t,function(m){return Number(Math.abs(m.liquityAmount))})||0,Ae=Pt().range([0,O]).domain([He,0]);It().rangeRound([0,q]).padding(.1);const ii=me.append("g").attr("id","barsBox").selectAll("rect").data(t).enter().append("rect");f.value.theme=="default"?ii.attr("x",function(m,v){return v===0?0:e.direction?Math.abs(m.index-E)*ne:Math.abs(ue-m.index)*ne}).attr("y",function(m,v){return e.direction?v===t.length-1?0:Ae(m.liquityAmount):v===t.length-1?0:Ae(t[v+1].liquityAmount)}).attr("width",function(m,v){return v===0&&t.length===1&&m.liquityAmount>0?q:(e.direction,v!==t.length-1?Math.abs(t[v+1].index-m.index)*ne:0)}).attr("height",function(m,v){return v===0&&t.length===1&&m.liquityAmount>0?O:e.direction?v===t.length-1?0:O-Ae(m.liquityAmount):v===t.length-1?0:O-Ae(t[v+1].liquityAmount)}).attr("fill","#279477").attr("class","bars").attr("stroke-width",1).attr("stroke","#279477"):ii.attr("x",function(m,v){return v===0?0:e.direction?Math.abs(m.index-E)*ne:Math.abs(ue-m.index)*ne}).attr("y",function(m,v){return e.direction?v===t.length-1?0:Ae(Math.abs(m.liquityAmount)):v===t.length-1?0:Ae(Math.abs(t[v+1].liquityAmount))}).attr("width",function(m,v){return v===0&&t.length===1&&m.liquityAmount>0?q:(e.direction,v!==t.length-1?Math.abs(t[v+1].index-m.index)*ne:0)}).attr("height",function(m,v){if(v===0&&t.length===1&&m.liquityAmount>0)return O;if(e.direction)return v===t.length-1?0:Number(m.liquityAmount)?O-Ae(Math.abs(m.liquityAmount)):0;{if(v===t.length-1)return 0;const oe=O-Ae(Math.abs(t[v+1].liquityAmount));return Number(t[v+1].liquityAmount)?oe:0}}).attr("fill",function(m,v){return"#417494"}).attr("class","bars").attr("stroke-width",1).attr("stroke",function(m,v){return"#417494"});const Xe=me.append("g");Xe.append("line").attr("x1",0).attr("y1",155).attr("x2",q).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D");const di=Xe.append("g");let ze=0;if(e.direction){for(let m=0;m<X.length;m++){const v=M($e[m],Q)||"0";$e.push(v);const oe=Math.abs(X[m]-E)*ne;let ae=0;for(let fe=0;fe<v.length;fe++)v[fe]==="1"?ae+=4.02:v[fe]==="."?ae+=2.64:v[fe]==="7"?ae+=5.48:ae+=6;di.append("text").text(v).attr("x",oe-ae/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}ze=Math.abs(K-E)*ne}else{for(let m=X.length-1;m>=0;m--){const v=M($e[m],Q)||0;$e.push(v);const oe=Math.abs(X[m]-ue)*ne;let ae=0;for(let fe=0;fe<v.length;fe++)v[fe]==="1"?ae+=4.02:v[fe]==="."?ae+=2.64:v[fe]==="7"?ae+=5.48:ae+=6;di.append("text").text(v).attr("x",oe-ae/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}ze=Math.abs(K-ue)*ne}(f.value.theme=="default"?me.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#68FFD8"):me.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#76C8FF")).attr("transform","translate("+ze+", 0)");let We,Ye,Qe,Ze;e.direction?(We=F<E?-100:parseInt(String(Math.abs(F-E)*ne)),Ye=B<E?-100:parseInt(String(Math.abs(B-E)*ne)),Qe=k<E?-100:Math.abs(k-E)*ne,Ze=Y<E?-100:Math.abs(Y-E)*ne):(Ye=F<E?-100:Math.abs(ue-F)*ne,We=B<E?-100:Math.abs(ue-B)*ne,Ze=k>ue?-100:Math.abs(ue-k)*ne,Qe=Y>ue?-100:Math.abs(ue-Y)*ne),e.minPrice==="0"&&(We=0),e.maxPrice==="âˆž"&&(Ye=q),Z.value?A.value=q-We+94+"px":A.value=q-We+87+"px",w.value=Ye+98+"px",k&&Qe<q&&me.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+Qe+", 0)"),Y&&Ze<q&&me.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+Ze+", 0)");const Ne=me.append("g").attr("id","left-handle"),i=me.append("g").attr("id","right-handle");f.value.theme=="default"?(Ne.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),Ne.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#23252C").attr("stroke","#23252C").attr("transform","translate(-1, 20) rotate(180)"),Ne.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",6).attr("fill","#68FFD8"),Ne.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",4.5).attr("fill","#68FFD8"),i.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),i.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#23252C").attr("stroke","#23252C").attr("transform","translate(1, 0)"),i.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",6).attr("fill","#68FFD8"),i.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",4.5).attr("fill","#68FFD8")):(Ne.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),Ne.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#23252C").attr("stroke","#23252C").attr("transform","translate(-1, 24) rotate(180)"),Ne.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",8).attr("fill","#76C8FF"),Ne.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",6.5).attr("fill","#76C8FF"),i.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),i.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#23252C").attr("stroke","#23252C").attr("transform","translate(1, 0)"),i.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",8).attr("fill","#76C8FF"),i.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",6.5).attr("fill","#76C8FF")),Ne.attr("transform","translate("+We+", 0)"),i.attr("transform","translate("+Ye+", 0)");const _=St().extent([[0,0],[q,O]]).handleSize(30).on("end",V);me.append("g").attr("class","brush").call(_).call(_.move,[We,Ye]);function V(m){if(!m.sourceEvent||!m.selection)return;Ne.attr("transform","translate("+m.selection[0]+", 0)"),i.attr("transform","translate("+m.selection[1]+", 0)"),Z.value,A.value=q-m.selection[0]+87+"px",w.value=m.selection[1]+74+"px";let v,oe,ae=0,fe=0;e.direction?(ae=N(parseInt(String(m.selection[0]/ne+E)),Number(e.poolInfo.tickSpacing)),v=s.tickIndexToPrice(ae,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),fe=N(parseInt(String(m.selection[1]/ne+E)),Number(e.poolInfo.tickSpacing)),oe=s.tickIndexToPrice(fe,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString()):(fe=N(ue-m.selection[0]/ne,Number(e.poolInfo.tickSpacing)),v=1/s.tickIndexToPrice(fe,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),ae=N(ue-m.selection[1]/ne,Number(e.poolInfo.tickSpacing)),oe=1/s.tickIndexToPrice(ae,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString()),u.emit("onChangeMinPrice",String(M(String(v),6))),u.emit("onChangeMaxPrice",String(M(String(oe),6)))}f.value.theme=="default"?Li(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#15322C"):Li(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#152632")};return y(""),se(()=>[e.poolInfo,e.minPrice,e.maxPrice,e.currentPriceTab,e.zoom,e.tickList],([t,b,p,F,B,K])=>{t&&b&&p&&(t!=null&&t.liquidity)&&U(t,B)},{immediate:!0}),{store:f,loading:j,rangeSizeLower:R,rangeSizeUpper:d,rangeSizeLowerPosition:A,rangeSizeUpperPosition:w,decimalFormat:et,numberformat:Di}}});const Ut=e=>(ki("data-v-03adb102"),e=e(),hi(),e),Ot={class:"chart-box"},Ft={class:"chart"},Bt=Ut(()=>o("svg",{id:"chart"},null,-1));function jt(e,u,A,w,$,R){const d=Ji;return a(),l("div",Ot,[dt(o("div",Ft,[e.currentPriceTab!=="full range"&&e.minPrice!=="0"&&e.maxPrice!=="âˆž"?(a(),l("div",{key:0,class:"range-size range-size-lower",style:Bi({right:e.rangeSizeLowerPosition})},n(("numberformat"in e?e.numberformat:S(Di))(e.rangeSizeLower.toFixed(1),1))+"% ",5)):g("",!0),e.currentPriceTab!=="full range"&&e.minPrice!=="0"&&e.maxPrice!=="âˆž"?(a(),l("div",{key:1,class:"range-size range-size-upper",style:Bi({left:e.rangeSizeUpperPosition})},n(("numberformat"in e?e.numberformat:S(Di))(e.rangeSizeUpper.toFixed(1),1))+"% ",5)):g("",!0),Bt],512),[[mt,!e.chartLoading]]),e.chartLoading?(a(),Ke(d,{key:0})):g("",!0)])}const Dt=De(Rt,[["render",jt],["__scopeId","data-v-03adb102"]]),zt=je({props:{inputValue:{type:String,default:""},pType:{type:String,required:!0},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},defaultMaxPrice:{type:String,default:""},defaultMinPrice:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1},intPrice:{type:String,default:""}},emits:["onInput"],setup(e,u){const A=y(""),w=y("");let $=y(""),R=y("");const d=fi(),P=Je(),f=C(()=>P),H=C(()=>f.value.chainName?Pi(f.value.chainName):{}),s=()=>{var t,b,p,F;if(!(Number.isNaN(A.value)||Number(A.value)!==0&&!A.value||!e.poolInfo.tickSpacing))try{const{TickUtil:B,TickMath:K,getNearestTickByTick:k}=H.value,Y=K.priceToTickIndex(new h(A.value.toString()),(t=j.value.token_a)==null?void 0:t.decimals,(b=j.value.token_b)==null?void 0:b.decimals),I=k(Y,Number(j.value.tickSpacing),!0);let q;if(q=K.tickIndexToPrice(I+Number(j.value.tickSpacing),(p=j.value.token_a)==null?void 0:p.decimals,(F=j.value.token_b)==null?void 0:F.decimals),e.pType=="Min"&&Number(q.toString())>Number(R.value.toString()))return;const O=q.toString();u.emit("onInput",O)}catch{u.emit("onInput","")}},N=()=>{var t,b,p,F;try{if(Number.isNaN(A.value)||!A.value||!e.poolInfo.tickSpacing)return;const{TickUtil:B,TickMath:K,getNearestTickByTick:k}=H.value,Y=K.priceToTickIndex(new h(A.value.toString()),(t=j.value.token_a)==null?void 0:t.decimals,(b=j.value.token_b)==null?void 0:b.decimals),I=k(Y,Number(j.value.tickSpacing),!0);let q;q=K.tickIndexToPrice(I-Number(j.value.tickSpacing),(p=j.value.token_a)==null?void 0:p.decimals,(F=j.value.token_b)==null?void 0:F.decimals);const O=q.toString();if(e.pType=="Max"&&Number(q)<Number($.value))return;u.emit("onInput",O)}catch{u.emit("onInput","")}},L=t=>{let b=t.toString().replace(/[^\d.]/g,"");const p=/^\d+(\.\d+)?$/;b.split(".").length>2&&!p.exec(b)&&(b=b.substr(0,b.length-1)),w.value=String(b)},U=t=>{if(t&&t!=="0"&&t!=="âˆž"){A.value=t;const p=t.toString().split(".")[1];w.value=t!=="0"&&t!=="âˆž"&&p&&p.length>6?M(t.toString(),6):t.toString()}else(t=="0"||t=="âˆž"||d.query.action)&&(w.value=t)},Z=t=>{var k,Y,I,q;const{TickUtil:b,TickMath:p,getNearestTickByTick:F}=H.value,B=t.target.value;let K;if(B==="0"){K=-443636,u.emit("onInput","0");return}else if(B!=="0"&&B){const O=p.priceToTickIndex(new h(B),(k=j.value.token_a)==null?void 0:k.decimals,(Y=j.value.token_b)==null?void 0:Y.decimals);K=F(Number(O),Number(j.value.tickSpacing),!0);const le=p.tickIndexToPrice(new h(K),(I=j.value.token_a)==null?void 0:I.decimals,(q=j.value.token_b)==null?void 0:q.decimals);U(le.toString()),u.emit("onInput",le.toString())}else u.emit("onInput")};se(()=>e.defaultMinPrice,(t,b)=>{t!==b&&($.value=e.defaultMinPrice)},{immediate:!0}),se(()=>e.defaultMaxPrice,(t,b)=>{t!==b&&(R.value=e.defaultMaxPrice)},{immediate:!0}),se(()=>[e.inputValue,d.query.action],([t])=>{U(t)},{immediate:!0});const j=y({});se(()=>e.poolInfo,(t,b)=>{t&&(j.value=t)},{immediate:!0});const c=y("");return se(()=>e.currentPriceTab,t=>{c.value=t},{immediate:!0}),{addPrice:s,minusPrice:N,oValue:w,changeValue:L,isDisabled:c,route:d,onBlur:Z}}});const Et={class:"set-price-item"},Ht={class:"title"},Xt={class:"input-box"},Wt={key:0,class:"minus-btn"},Zt={key:1,class:"plus-btn"};function Gt(e,u,A,w,$,R){const d=vt,P=Yi;return a(),l("div",Et,[o("div",Ht,n(e.pType=="Max"?e.$t("common.maxPrice"):e.pType=="Min"?e.$t("common.minPrice"):""),1),ee(P,{loading:e.loading,active:"",paragraph:!1},{default:Be(()=>[o("div",Xt,[e.currentPriceTab!=="full range"?(a(),l("a",Wt,[o("div",{class:ei(!e.fromCoin&&!e.toCoin||e.poolInfo&&!e.poolInfo.tickSpacing&&!e.$route.query.action?"reductionDis":"reduction"),onClick:u[0]||(u[0]=(...f)=>e.minusPrice&&e.minusPrice(...f))},"-",2)])):g("",!0),ee(d,{id:"pValu",value:e.oValue,"onUpdate:value":u[1]||(u[1]=f=>e.oValue=f),disabled:e.route.query.action&&!e.intPrice,autocomplete:"off",placeholder:"0",onChange:u[2]||(u[2]=f=>e.changeValue(f.target.value)),onBlur:u[3]||(u[3]=f=>e.onBlur(f))},null,8,["value","disabled"]),e.currentPriceTab!=="full range"?(a(),l("a",Zt,[o("div",{class:ei(!e.fromCoin&&!e.toCoin||e.poolInfo&&!e.poolInfo.tickSpacing&&!e.$route.query.action?"addDis":"add"),onClick:u[4]||(u[4]=(...f)=>e.addPrice&&e.addPrice(...f))},"+",2)])):g("",!0)])]),_:1},8,["loading"]),o("p",{class:ei(["per-text",!e.toCoin&&!e.fromCoin?"per-text-disabled":""])},n(e.toCoin&&e.toCoin.symbol)+" per "+n(e.fromCoin&&e.fromCoin.symbol),3)])}const Kt=De(zt,[["render",Gt],["__scopeId","data-v-bf0c9bd5"]]),Jt=je({components:{SuiLiquiditySetPrice:Kt},props:{min:{type:String,default:""},max:{type:String,default:""},defaultMinPrice:{type:String,default:""},defaultMaxPrice:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},invalidPriceRange:{type:Boolean,default:!1},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1},intPrice:{type:String,default:""}},setup(e,u){let A=y(""),w=y(""),$=y(),R=y(!1),d=y(!1);const P=y({}),f=Je(),H=C(()=>f);Ci(()=>{A.value=e.min,w.value=e.max}),se(()=>e.currentPriceTab,(c,t)=>{c!==t&&($.value=e.currentPriceTab)},{immediate:!0}),se(()=>e.min,(c,t)=>{c!==t&&(A.value=c)}),se(()=>e.max,(c,t)=>{c!==t&&(w.value=c)}),se(()=>e.poolInfo,(c,t)=>{c&&(P.value=c)},{immediate:!0});const s=y("");se(()=>e.intPrice,c=>{s.value=c},{immediate:!0,deep:!0});const N=c=>{A.value=c,u.emit("onChangeMinPrice",c)},L=c=>{w.value=c,u.emit("onChangeMaxPrice",c)};se(R,(c,t)=>{c!==t&&u.emit("onChangeFullRange",c)});const U=()=>{A.value=e.defaultMinPrice,w.value=e.defaultMaxPrice,d.value=!1,R.value=!1},Z=()=>{d.value=!1,A.value="0",w.value="âˆž"};return se(R,(c,t)=>{c!==t&&u.emit("onChangeFullRange",c)}),{store:H,changeMinPrice:N,changeMaxPrice:L,importIcon:ri,resetPrice:U,changeShowUnderStand:()=>{R.value=!R.value,R.value?d.value=!0:U(),d.value||(A.value=e.defaultMinPrice,w.value=e.defaultMaxPrice)},showUnderStand:d,minPrice:A,maxPrice:w,understand:Z,isRadio:R,initPirce:s}}});const Yt={class:"set-price"},Qt={class:"card-container"},Vt={key:0,class:"card"},xt={key:1,class:"understand"},en={class:"left"},tn={class:"right"};function nn(e,u,A,w,$,R){const d=ge("SuiLiquiditySetPrice"),P=Mi;return a(),l("div",Yt,[o("div",Qt,[e.showUnderStand?(a(),l("div",xt,[o("div",en,[o("p",null,n(e.$t("common.lowerEfficiency")),1),o("p",null,n(e.$t("common.lowerEfficiencyTips")),1)]),o("div",tn,[ee(P,{onClick:e.understand},{default:Be(()=>[ci(n(e.$t("common.understand")),1)]),_:1},8,["onClick"])])])):(a(),l("div",Vt,[ee(d,{value:e.minPrice,"onUpdate:value":u[0]||(u[0]=f=>e.minPrice=f),"input-value":e.minPrice,"p-type":"Min","default-max-price":e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"current-price-tab":e.currentPriceTab,"int-price":e.initPirce,onOnInput:e.changeMinPrice,onAddValue:e.changeMinPrice,onDelValue:e.changeMinPrice},null,8,["value","input-value","default-max-price","from-coin","to-coin","dirction","pool-info","loading","current-price-tab","int-price","onOnInput","onAddValue","onDelValue"]),ee(d,{value:e.maxPrice,"onUpdate:value":u[1]||(u[1]=f=>e.maxPrice=f),"input-value":e.maxPrice,"p-type":"Max","default-min-price":e.minPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"int-price":e.initPirce,"current-price-tab":e.currentPriceTab,onOnInput:e.changeMaxPrice,onAddValue:e.changeMaxPrice,onDelValue:e.changeMaxPrice},null,8,["value","input-value","default-min-price","from-coin","to-coin","dirction","pool-info","loading","int-price","current-price-tab","onOnInput","onAddValue","onDelValue"])]))])])}const on=De(Jt,[["render",nn],["__scopeId","data-v-6fa4beef"]]),rn=je({components:{CoinImage:nt},props:{rectangleTabList:{type:Object,default:()=>null},currentRectangleTab:{type:String,default:()=>""}},setup(e){const u=e.rectangleTabList;return{activeIndex:y(0),list:u}}});const an={class:"rectangle-tab"},sn=["onClick"];function ln(e,u,A,w,$,R){const d=ge("CoinImage");return a(),l("div",an,[(a(!0),l(xe,null,ji(e.list,(P,f)=>(a(),l("div",{key:P.link,class:ei(e.activeIndex==f?"tab-active tab":"tab"),onClick:()=>{e.$emit("clickTab",P),e.activeIndex=f}},[P.logo?(a(),Ke(d,{key:0,url:P.logo,size:e.logoSize||"16px"},null,8,["url","size"])):g("",!0),o("span",null,n(P.label),1)],10,sn))),128))])}const un=De(rn,[["render",ln],["__scopeId","data-v-1558c80e"]]),cn=je({components:{SuiLiquidityD3Chart:Dt,RectangleTab:un,SuiLiquidityPrice:on},setup(){var Ne;const{t:e,locale:u}=zi(),A=y("liquidity"),w=Je(),$=C(()=>w),R=C(()=>$.value.chainName),d=pi(),P=C(()=>d),f=C(()=>$.value.chainName?Pi($.value.chainName):{});Ci(()=>{bi.value=!1});const H=fi(),s=C(()=>{let i=null;for(let _=0;_<P.value.poolConfigList.length;_++){const V=P.value.poolConfigList[_];V.address==H.query.poolAddress&&(i=V)}return i}),N=C(()=>{let i=null;console.log("ðŸš€ðŸš€ðŸš€ ~ file: sui-liquidity-left.vue:481 ~ constpoolInfo:any=computed ~ pools.value.poolsObj:",P.value.poolsObj);for(const _ in P.value.poolsObj){const V=P.value.poolsObj[_];V.address==H.query.poolAddress&&(i=V)}return i}),L=y(),U=y(!0),Z=async(i,_)=>{var V,m,v,oe,ae,fe,si,mi,ti,li,wi,Ti;if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: sui-liquidity-left.vue:497 ~ watchPoolInfo ~ pool:",i),i&&(G.value=i.needReverse?i.token_b:i.token_a,W.value=i.needReverse?i.token_a:i.token_b),_&&i.current_tick_index){U.value=!0,gi.value=[],c.value=[],Oe.value=!1;const _i=i.token_a.decimals,$i=i.token_b.decimals;yi.value=Ni.sqrtPriceX64ToPrice((i==null?void 0:i.current_sqrt_price)||((V=i==null?void 0:i.object)==null?void 0:V.current_sqrt_price),_i,$i).toString(),qi.value=new h(1).div(Ni.sqrtPriceX64ToPrice((i==null?void 0:i.current_sqrt_price)||((m=i==null?void 0:i.object)==null?void 0:m.current_sqrt_price),_i,$i)).toString(),L.value=i.needReverse,((oe=(v=i==null?void 0:i.token_a)==null?void 0:v.address)==null?void 0:oe.toLowerCase())===((si=(fe=(ae=G)==null?void 0:ae.value)==null?void 0:fe.address)==null?void 0:si.toLowerCase())&&((ti=(mi=i==null?void 0:i.token_b)==null?void 0:mi.address)==null?void 0:ti.toLowerCase())===((Ti=(wi=(li=W)==null?void 0:li.value)==null?void 0:wi.address)==null?void 0:Ti.toLowerCase())?Ie.value=!0:Ie.value=!1;let Wi={poolAddress:i.address,coinTypeA:i.coin_a_address,coinTypeB:i.coin_b_address};const{list:r,address:T}=await f.value.getTicks(Wi);gi.value=r&&T==i.address?f.value.getTickDataFromUrlData(r):[],i!=null&&i.current_tick_index&&(b(i),U.value=!1)}},j=i=>{var m,v;const _=i.token_a.decimals,V=i.token_b.decimals;yi.value=Ni.sqrtPriceX64ToPrice((i==null?void 0:i.current_sqrt_price)||((m=i==null?void 0:i.object)==null?void 0:m.current_sqrt_price),_,V).toString(),qi.value=new h(1).div(Ni.sqrtPriceX64ToPrice((i==null?void 0:i.current_sqrt_price)||((v=i==null?void 0:i.object)==null?void 0:v.current_sqrt_price),_,V)).toString()},c=y([]),t=y(),b=async i=>{const _=i.token_a.decimals,V=i.token_b.decimals;let m=P.value.poolPriceConfigObj&&P.value.poolPriceConfigObj[i.address]&&P.value.poolPriceConfigObj[i.address].recommend_ranges||{};const v=P.value.poolPriceConfigObj&&P.value.poolPriceConfigObj[i.address]&&P.value.poolPriceConfigObj[i.address].type||"";let oe,ae;const fe=ht(i.current_tick_index,i.tickSpacing);t.value=i.current_tick_index,oe=fe-Number(i.type=="unstable"?Number(i.tickSpacing)*2:Number(i.tickSpacing)*3),ae=fe+Number(i.type=="unstable"?Number(i.tickSpacing)*2:Number(i.tickSpacing)*3);const si=f.value.TickMath.tickIndexToPrice(oe,_,V).toString(),mi=f.value.TickMath.tickIndexToPrice(ae,_,V).toString();m["full range"]={lower:f.value.TickUtil.getMinIndex(Number(N.value.tickSpacing)),upper:f.value.TickUtil.getMaxIndex(Number(N.value.tickSpacing))},m.custom={lower:oe,upper:ae,minPrice:si,maxPrice:mi};const ti=[];for(let li in m)m[li]&&ti.push({...m[li],key:li});v&&ti&&ti.length>2?i.isSelfBuilt?ce.value="custom":v=="stable"?ce.value="suggested":ce.value="passive":ce.value="custom",c.value=ti||{},vi.value=m,B({key:ce.value,...m[ce.value]})},p=y(""),F=y(""),B=i=>{ce.value=i.key.toLowerCase();const _=N.value.token_a.decimals,V=N.value.token_b.decimals,{lower:m,upper:v}=i;Ge.value=!1;const oe=f.value.TickMath.tickIndexToPrice(m,_,V).toString(),ae=f.value.TickMath.tickIndexToPrice(v,_,V).toString();if(i.key=="full range"){p.value=m,F.value=v,K();return}Ie.value?(Oi.value=String(oe),J.value=String(oe),Fi.value=String(ae),z.value=String(ae),p.value=m,F.value=v):(Oi.value=new h(1).div(new h(ae)).toString(),J.value=new h(1).div(new h(ae)).toString(),Fi.value=new h(1).div(new h(oe)).toString(),z.value=new h(1).div(new h(oe)).toString(),p.value=f.value.TickMath.priceToTickIndex(new h(1/Number(ae)),_,V),F.value=f.value.TickMath.priceToTickIndex(new h(1/Number(oe)),_,V))},K=i=>{J.value="0",z.value="âˆž"};se(()=>N.value,(i,_)=>{(!_&&i&&!ve(i)||_&&i&&(!(_!=null&&_.current_tick_index)||(_==null?void 0:_.address)!==(i==null?void 0:i.address)))&&Z(i,!_||!(_!=null&&_.current_tick_index)||(_==null?void 0:_.address)!==(i==null?void 0:i.address)),i&&!ve(i)&&j(i),i||(gi.value=[])},{immediate:!0}),Ei(()=>{G.value=y(),W.value=y(),gi.value=[]}),se(()=>s.value,(i,_)=>{i&&d.setSinglePool(i,{},R.value)},{immediate:!0});const k=i=>{switch(i){case"passive":return"/sui-image/icon_conservative@2x.png";case"active":return"/sui-image/icon_active@2x.png";case"full range":return"/sui-image/icon_fullrange@2x.png";case"custom":return"/sui-image/icon_costom@2x.png";case"suggested":return"/sui-image/icon_stabel@2x.png"}},Y=i=>{switch(i){case"passive":return"/sui-image/img_conservative_def@2x.png";case"active":return"/sui-image/img_active_def@2x.png";case"full range":return"/sui-image/img_fullrange_def.png";case"custom":return"/sui-image/img_custom_def.png";case"suggested":return"/sui-image/icon_stabel_def@2x.png"}},I=i=>{switch(i){case"suggested":return e("newAdd.suggested");case"active":return e("newAdd.active");case"passive":return e("newAdd.conservative");case"full range":return e("newAdd.fullRange");case"custom":return e("newAdd.custom")}},q=i=>{var V,m;const _=P.value.poolPriceConfigObj&&P.value.poolPriceConfigObj[(V=N.value)==null?void 0:V.address]&&P.value.poolPriceConfigObj[(m=N.value)==null?void 0:m.address].type||"";if(c.value.length>2)if(_=="unstable")switch(i){case"active":return{top:"38%"};case"passive":return{top:"13%"};case"full range":return{top:"63%"};case"custom":return{top:"87%"}}else switch(i){case"suggested":return{top:"25%"};case"full range":return{top:"49%"};case"custom":return{top:"75%"}}else if(_=="unstable")switch(i){case"active":return{top:"38%"};case"passive":return{top:"13%"};case"full range":return{top:"63%"};case"custom":return{top:"87%"}}else switch(i){case"full range":return{top:"35%"};case"custom":return{top:"60%"}}},O=y(1),le=()=>{const i=O.value/2;O.value=i},re=()=>{const i=O.value*2;O.value=i},X=C(()=>{var i,_,V;return!N.value||ve($.value.addressHistTokens)||!$.value.addressHistTokens[(i=N.value)==null?void 0:i.poolAddress]?null:Object.fromEntries((V=$.value.addressHistTokens[(_=N.value)==null?void 0:_.poolAddress])==null?void 0:V.data.map(m=>[m.key,m.value]))}),E=y(30),ue=y("30D"),ne=C(()=>Ie.value?X.value&&M(E.value==7?X.value.before_7_d_contract_price_lowest:E.value==24?X.value.before_24_h_contract_price_lowest:X.value.before_30_d_contract_price_lowest,6)||0:X.value&&M(new h(1).div(E.value==7?X.value.before_7_d_contract_price_highest:E.value==24?X.value.before_24_h_contract_price_highest:X.value.before_30_d_contract_price_highest).toString(),6)||0),$e=C(()=>Ie.value?X.value&&M(E.value==7?X.value.before_7_d_contract_price_highest:E.value==24?X.value.before_24_h_contract_price_highest:X.value.before_30_d_contract_price_highest,6)||0:(X.value&&M(1/Number(E.value==7?X.value.before_7_d_contract_price_lowest:E.value==24?X.value.before_24_h_contract_price_lowest:X.value.before_30_d_contract_price_lowest),6))==1/0?0:X.value&&M(1/Number(E.value==7?X.value.before_7_d_contract_price_lowest:E.value==24?X.value.before_24_h_contract_price_lowest:X.value.before_30_d_contract_price_lowest),6)||0),Q=C(()=>{const i=Number(J.value),_=Number(z.value);if(J.value=="0"&&z.value=="âˆž"||ce.value=="full range")return"1x";if(J.value==z.value||ce.value=="full range")return"--";if(J.value&&z.value&&J.value!=="0"&&z.value!=="âˆž"){const V=it(1/(1-Number((i/_)**.25)),2);return Number(V)>0?V+"x":"--"}else return 1}),me=C(()=>{var i,_,V,m,v,oe;return((i=G.value)==null?void 0:i.isSelfBuilt)||((_=W.value)==null?void 0:_.isSelfBuilt)||((m=P.value.tokensObj[(V=G.value)==null?void 0:V.address])==null?void 0:m.isSelfBuilt)||((oe=P.value.tokensObj[(v=W.value)==null?void 0:v.address])==null?void 0:oe.isSelfBuilt)}),He=(i,_)=>{i!==J.value&&ce.value=="full range"?B({key:"custom",...c.value.custom}):ce.value!=="full range"&&ce.value!=="custom"?(ce.value="custom",J.value=i):J.value=i,Te.value&&(Oe.value?(Ie.value&&J.value!==Te.value.minPrice&&(Oe.value=!1),!Ie.value&&Number(J.value)!==1/Number(Te.value.maxPrice)&&(Oe.value=!1)):(Ie.value&&J.value==Te.value.minPrice&&z.value==Te.value.maxPrice&&(Oe.value=!0),!Ie.value&&Number(J.value)==1/Number(Te.value.maxPrice)&&Number(z.value)==1/Number(Te.value.minPrice)&&(Oe.value=!0)))},Ae=(i,_)=>{i!==z.value&&ce.value=="full range"?B({key:"custom",...c.value.custom}):ce.value!=="full range"&&ce.value!=="custom"?(ce.value="custom",i=="0"?z.value="âˆž":z.value=i):i=="0"?z.value="âˆž":z.value=i,Te.value&&(Oe.value?(Ie.value&&z.value!==Te.value.maxPrice&&(Oe.value=!1),!Ie.value&&Number(z.value)!==1/Number(Te.value.minPrice)&&(Oe.value=!1)):(Ie.value&&J.value==Te.value.minPrice&&z.value==Te.value.maxPrice&&(Oe.value=!0),!Ie.value&&Number(J.value)==1/Number(Te.value.maxPrice)&&Number(z.value)==1/Number(Te.value.minPrice)&&(Oe.value=!0)))},ai=i=>{var _;return console.log("ðŸš€ðŸš€ðŸš€ ~ file: sui-liquidity-left.vue:1215 ~ getCoinIcon ~ info:",i),(i==null?void 0:i.logoURI)||(i==null?void 0:i.logo_url)||((_=P.value.tokensObj[i==null?void 0:i.address])==null?void 0:_.logo_url)||($.value.theme==="default"?ri("/image/coins/unknown.png"):ri("/image/coins/sui-unknown.png"))},ii=i=>{switch(i){case"active":return e("newAdd.activeTips");case"passive":return e("newAdd.passiveTips");case"full range":return e("newAdd.fullRangTips");case"suggested":return e("newAdd.suggestedTips");case"custom":return e("newAdd.customTips")}},Xe=[{label:"24H",value:24},{label:"7D",value:7},{label:"30D",value:30}],di=Ri(),ze=C(()=>di),Te=C(()=>{var i;return ze.value.farmsPoolObj[(i=N==null?void 0:N.value)==null?void 0:i.address]}),We=C(()=>P.value.poolPriceConfigObj);se(()=>[Oe.value,N.value,c.value,We.value,Te.value,Ie.value],(i,_)=>{var V,m;if(i[0]&&i[4]&&!ve(i[4]))ce.value="custom",J.value=i[5]?i[4].minPrice:String(1/i[4].maxPrice),z.value=i[5]?i[4].maxPrice:String(1/i[4].minPrice);else if(i[1]&&!ve(i[1])&&i[2]&&!ve(i[2])&&i[3]&&!ve(i[3])&&i[4]&&!ve(i[4])){i[3]&&i[3][(V=i[1])==null?void 0:V.address]&&i[3][(m=i[1])==null?void 0:m.address].type;const v=i[2].filter(oe=>oe.key===(i[2].length==4?"passive":"suggested"));v!=null&&v[0]&&(!_||_[0]!==i[0])&&B({...v[0]})}},{immediate:!0});const Ye=C(()=>P.value.poolsLoading),Qe=C(()=>{var i,_,V,m,v,oe;return[{label:(i=G.value)==null?void 0:i.symbol,value:(_=G.value)==null?void 0:_.address,logo:(V=G.value)==null?void 0:V.logo_url},{label:(m=W.value)==null?void 0:m.symbol,value:(v=W.value)==null?void 0:v.address,logo:(oe=W.value)==null?void 0:oe.logo_url}]});return{currentRectangleTab:y((Ne=G.value)==null?void 0:Ne.address),rectangleTabList:Qe,positionError:bi,getCoinIcon:ai,chainName:R,store:$,currentTab:A,currentPrice:yi,currentPriceReverse:qi,fromCoin:G,toCoin:W,direction:Ie,needReverse:L,addCommom:x,decimalUi:M,priceTabList:c,currentPriceTab:ce,sliderStyle:q,poolInfo:N,tickList:gi,getPriceTabImage:k,getPriceTabDefImage:Y,getPriceTabText:I,defaultMinPrice:Oi,defaultMaxPrice:Fi,minPrice:J,maxPrice:z,currentTick:t,chartLoading:U,zoomOut:le,zoomIn:re,zoom:O,priceTab:B,before7dContractPriceLowest:ne,before7dContractPriceHighest:$e,aprRewardsTime:ue,lever:Q,aprRewardsParameter:E,isSelfBuilt:me,priceRangeChangeMin:He,priceRangeChangeMax:Ae,toggle:xi,getPirceTabTips:ii,timeList:Xe,farmsPoolInfo:Te,checkNullObj:ve,isStableFarmingRange:Oe,poolsLoading:Ye}}});const dn={class:"sui-liquidity-left"},mn={class:"title-box"},vn=o("span",{class:"selectRange"},"Select Range",-1),fn={key:0,class:"tab-box"},pn={class:"range-top"},gn={class:"price-tab-list"},bn=["onClick"],kn={class:"block"},hn=["src"],yn={class:"price-leverage"},Cn={class:"price-info"},Pn={class:"left"},In={class:"current-price"},Sn=o("div",{class:"current-price-title"},"Current Price",-1),wn={key:0,class:"from-pre-to"},Tn={class:"right"},_n={class:"chart-box"},$n={class:"leverage"},An={class:"right-time"},Nn={class:"day-7-price-range"},Ln=o("i",null,null,-1),qn={class:"gray"},Mn={key:0},Rn={key:1,class:"skeleton"},Un={class:"time-list"},On=["onClick"],Fn={class:"range pc-range"},Bn={key:0,class:"position-tips"},jn=["src"],Dn={class:"error"},zn={key:1,class:"stable-farming-range pc-stable-farming-range"},En={class:"value"},Hn=o("img",{src:ot},null,-1),Xn=o("span",{class:"text"},"Farm rewards rangeï¼š",-1),Wn={class:"text"},Zn={class:"check-box-active plus-switch plus-liquidity-switch"};function Gn(e,u,A,w,$,R){var L,U,Z,j;const d=ge("RectangleTab"),P=Qi,f=ge("SuiLiquidityD3Chart"),H=Yi,s=ge("SuiLiquidityPrice"),N=Hi;return a(),l("div",dn,[o("div",mn,[vn,e.fromCoin&&e.toCoin?(a(),l("div",fn,[ee(d,{"current-rectangle-tab":e.currentRectangleTab,"rectangle-tab-list":e.rectangleTabList,onClickTab:u[0]||(u[0]=c=>{e.toggle()})},null,8,["current-rectangle-tab","rectangle-tab-list"])])):g("",!0)]),o("div",pn,[o("div",gn,[(a(!0),l(xe,null,ji(e.priceTabList,c=>(a(),l("div",{key:c.key,class:ei(["price-tab-item",e.currentPriceTab==c.key?"price-tab-item-active":""]),onClick:t=>e.priceTab(c)},[ee(P,{placement:"bottom","arrow-point-at-center":""},{title:Be(()=>[ci(n(e.getPirceTabTips(c.key)),1)]),default:Be(()=>[o("div",kn,[o("img",{src:e.currentPriceTab==c.key?e.getPriceTabImage(c.key):e.getPriceTabDefImage(c.key),alt:""},null,8,hn),o("span",null,n(e.getPriceTabText(c.key)),1)])]),_:2},1024)],10,bn))),128))]),o("div",yn,[o("div",Cn,[o("div",Pn,[o("div",In,[Sn,o("div",null,[o("span",null,n(e.poolInfo?e.direction?("addCommom"in e?e.addCommom:S(x))(("decimalUi"in e?e.decimalUi:S(M))(e.currentPrice,6)):("addCommom"in e?e.addCommom:S(x))(("decimalUi"in e?e.decimalUi:S(M))(e.currentPriceReverse,6)):"--"),1),e.fromCoin&&e.toCoin?(a(),l("span",wn,n((L=e.toCoin)==null?void 0:L.symbol)+" per "+n((U=e.fromCoin)==null?void 0:U.symbol),1)):g("",!0)])])]),o("div",Tn,[e.currentTab=="liquidity"?(a(),l("div",{key:0,class:"zoom-out",onClick:u[1]||(u[1]=(...c)=>e.zoomOut&&e.zoomOut(...c))}," + ")):g("",!0),e.currentTab=="liquidity"?(a(),l("div",{key:1,class:"zoom-in",onClick:u[2]||(u[2]=(...c)=>e.zoomIn&&e.zoomIn(...c))}," - ")):g("",!0)])]),o("div",_n,[e.poolInfo?(a(),Ke(f,{key:0,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direction,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,zoom:e.zoom,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","zoom","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):g("",!0),o("div",$n,[o("div",An,[o("div",null,[o("div",Nn,[Ln,o("span",qn,n(e.aprRewardsParameter==7?"7D":e.aprRewardsParameter==24?"24H":"30D")+" Price Range",1),e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(a(),l("span",Mn,n(("addCommom"in e?e.addCommom:S(x))(("decimalUi"in e?e.decimalUi:S(M))(e.before7dContractPriceLowest,6)))+" - "+n(("addCommom"in e?e.addCommom:S(x))(("decimalUi"in e?e.decimalUi:S(M))(e.before7dContractPriceHighest,6))),1)):(a(),l("div",Rn,[ee(H,{loading:!0,size:"large",active:"",paragraph:!1})]))])]),o("div",Un,[(a(!0),l(xe,null,ji(e.timeList,c=>(a(),l("div",{key:c.value,class:ei(["time-item",c.value==e.aprRewardsParameter?"time-item-active":""]),onClick:t=>e.aprRewardsParameter=c.value},n(c.label),11,On))),128))])])])])])]),o("div",{class:ei(["apr-and-price",e.positionError&&e.poolInfo?"padding-apr-and-price":""])},[o("div",Fn,[ee(s,{min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direction,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["min","max","from-coin","to-coin","direct","default-min-price","default-max-price","pool-info","loading","current-price-tab","onOnChangeMinPrice","onOnChangeMaxPrice"]),e.positionError&&e.poolInfo?(a(),l("div",Bn,[o("img",{src:("importIcon"in e?e.importIcon:S(ri))("/image/icon-tips-error@2x.png"),alt:""},null,8,jn),o("p",Dn,n(e.$t("tips.positionError")),1)])):g("",!0),e.farmsPoolInfo&&!("checkNullObj"in e?e.checkNullObj:S(ve))(e.farmsPoolInfo)&&e.fromCoin&&e.toCoin?(a(),l("div",zn,[o("div",En,[Hn,Xn,ci(" "+n(("decimalUi"in e?e.decimalUi:S(M))(e.direction?e.farmsPoolInfo.minPrice:1/e.farmsPoolInfo.maxPrice,6))+" - "+n(("decimalUi"in e?e.decimalUi:S(M))(e.direction?e.farmsPoolInfo.maxPrice:1/e.farmsPoolInfo.minPrice,6))+" ",1),o("div",Wn,"Â Â "+n((Z=e.toCoin)==null?void 0:Z.symbol)+" per "+n((j=e.fromCoin)==null?void 0:j.symbol),1)]),o("div",Zn,[ee(N,{class:"liquidity-switch",checked:e.isStableFarmingRange,onClick:u[3]||(u[3]=c=>e.isStableFarmingRange=!e.isStableFarmingRange)},null,8,["checked"])])])):g("",!0)])],2)])}const Kn=De(cn,[["render",Gn]]),Jn=je({components:{IconSlippage:Tt,IconRefresh:_t},props:{poolInfo:{type:Object,default:()=>({})}},setup(e,u){const A=y(!1),w=y(null),$=y(0);let R=y(!1);const d=y(20),P=pi(),f=Je(),H=y(!1);Ci(()=>{}),Ei(()=>{clearInterval(w.value)});const s=()=>{R.value=!1,w.value=setInterval(()=>{var c;H.value||$.value<d.value&&($.value+=1,$.value===d.value&&(R.value=!0,(c=e==null?void 0:e.poolInfo)!=null&&c.poolAddress&&P.updateCurrentPools(e.poolInfo.poolAddress,f.chainName),$.value=0,setTimeout(()=>{R.value=!1},1e3)))},1e3)},N=C(()=>f.slippage),L=()=>{u.emit("clearAll")},U=()=>{R.value||(R.value=!0,$.value=0,u.emit("clickRefresh"),setTimeout(()=>{R.value=!1,s()},1e3))};se(()=>e.poolInfo,c=>{c&&!w.value&&s()},{immediate:!0});const Z=Xi(),j=fi();return{refresh:R,clickRefresh:U,isShowSwapSetting:A,countdown:$,autoRefreshTime:d,slippage:N,clearAll:L,checkNullObj:ve,router:Z,route:j}}});const Yn=e=>(ki("data-v-47ca611f"),e=e(),hi(),e),Qn={class:"title"},Vn=Yn(()=>o("div",{class:"left"},[o("span",null,"Deposit Amounts")],-1)),xn={key:0,class:"deposit-progress"};function eo(e,u,A,w,$,R){const d=ge("IconSlippage"),P=ge("IconRefresh");return a(),l("div",Qn,[Vn,o("div",{class:ei(["right",e.poolInfo?"havePoolInfo":"noPoolInfo"])},[ee(d),e.route.name!=="liquidity-create"?(a(),l("div",xn,[ee(P,{refresh:e.refresh,onClickRefresh:e.clickRefresh},null,8,["refresh","onClickRefresh"])])):g("",!0)],2)])}const io=De(Jn,[["render",eo],["__scopeId","data-v-47ca611f"]]),to=je({components:{IconTooltip:rt,CoinImgWarning:at},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},fixedFromCoin:{type:Boolean,defalut:!0},isInputTotalAmount:{type:Boolean,default:!1},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},createPoolInfo:{type:Object,default:()=>({})},currentPrice:{type:Number,default:0},currentPriceReverse:{type:Number,default:0},currentPriceTab:{type:String,default:""}},setup(e){const u=pi(),A=C(()=>u),w=Je(),$=C(()=>w),R=fi(),d=C(()=>{let L=null;if(R.name=="liquidity-create")L=e.createPoolInfo;else for(const U in A.value.poolsObj){const Z=A.value.poolsObj[U];Z.address==R.query.poolAddress&&(L=Z)}return L}),P=C(()=>$.value.chainName?Pi($.value.chainName):{}),f=C(()=>$.value.slippage),H=y(),s=y(),N=async()=>{var le;if(!e.minPrice&&!e.maxPrice)return;console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-liquidity-deposit-ratio.vue:170 ~ getRatio ~ poolInfo.value:",d.value);const{TickUtil:L,TickMath:U,getNearestTickByTick:Z}=P.value,j=d.value.token_a.decimals,c=d.value.token_b.decimals;let t,b,p,F,B,K,k,Y=1,I=1;const q=d.value.current_tick_index;let O=A.value.poolPriceConfigObj&&A.value.poolPriceConfigObj[d.value.address]&&A.value.poolPriceConfigObj[d.value.address].recommend_ranges||{};if(d.value.token_a.address.toLowerCase()===e.fromCoin.address.toLowerCase()&&d.value.token_b.address.toLowerCase()===e.toCoin.address.toLowerCase()?k=!0:k=!1,e.minPrice==="0"&&e.maxPrice==="âˆž")p=L.getMinIndex(d.value.tickSpacing),F=L.getMaxIndex(d.value.tickSpacing);else if(e.currentPriceTab=="custom"){k?(t=e.minPrice,b=e.maxPrice):(t=e.maxPrice!=="âˆž"?new h(1).div(e.maxPrice).toString():1/0,b=new h(1).div(e.minPrice).toString());try{B=U.priceToTickIndex(new h(t),j,c)}catch{B=-443636}try{K=U.priceToTickIndex(new h(b),j,c)}catch{K=443636}t==0&&(B=-443636),p=Z(B,Number(d.value.tickSpacing),!0),F=Z(K,Number(d.value.tickSpacing),!0)}else p=O&&O[e.currentPriceTab]&&O[e.currentPriceTab].lower,F=O&&O[e.currentPriceTab]&&O[e.currentPriceTab].upper;if(e.maxPrice==="âˆž"||q>=p&&q<=F){let re;if(e.fixedFromCoin){const ue=new h(Number(e.fromCoinAmount)==0?1:e.fromCoinAmount).mul(Math.pow(10,e.fromCoin.decimals)).toString();re=new Me(ue)}else{const ue=new h(Number(e.toCoinAmount)==0?1:e.toCoinAmount).mul(Math.pow(10,e.toCoin.decimals)).toString();re=new Me(ue)}if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: new-liquidity-deposit-ratio.vue:262 ~ getRatio ~ poolInfo.value.current_sqrt_price:",d.value.current_sqrt_price),((le=d==null?void 0:d.value)==null?void 0:le.current_sqrt_price)<=0)return!1;const{tokenMaxA:X,tokenMaxB:E}=await P.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:d.value.token_a,tokenB:d.value.token_b,lowerTick:p,upperTick:F,coinAmount:re,iscoinA:k?e.fixedFromCoin:!e.fixedFromCoin,roundUp:!0,slippage:Number(f.value)/100,curSqrtPrice:new Me(d.value.current_sqrt_price)});k?e.fixedFromCoin?(I=Number(E)>0?E:"",Y=Number(X)>0?X:""):(Y=Number(X)>0?X:"",I=Number(E)>0?E:""):(e.fixedFromCoin,I=X,Y=E)}else q>F?k?(I=1,Y=0):(Y=1,I=0):q<p&&(k?(I=0,Y=1):(I=1,Y=0));if(e.minPrice=="0"&&e.maxPrice=="âˆž")H.value=50,s.value=50;else{const re=Y?Number(Y):0,X=I?Number(I):0,E=new h(X).add(new h(k?new h(re*e.currentPrice):new h(re*e.currentPriceReverse))),ue=M(new h(re).mul(new h(k?e.currentPrice:e.currentPriceReverse)).div(E).mul(100).toNumber().toFixed(2),2),ne=M(new h(X).div(E).mul(100).toNumber().toFixed(2),2);H.value=ue,s.value=ne}};return se(()=>[d.value,e.minPrice,e.maxPrice,e.fromCoinAmount,e.toCoinAmount,e.isInputTotalAmount],([L,U,Z,j,c])=>{U&&Z&&L&&!ve(L)&&(U!=="0"||Z!=="0")?N():(H.value="",s.value="")},{immediate:!0,deep:!0}),{fromCoinRatio:H,toCoinRatio:s}}});const no={class:"deposit-ratio"},oo={class:"deposit-ratio-text"},ro=o("span",null,"Deposit Ratio",-1),ao={class:"deposit-ratio-content"},so={class:"coin-ratio"},lo={class:"coin-a-ratio"},uo={class:"coin-b-ratio"};function co(e,u,A,w,$,R){var f,H;const d=ge("IconTooltip"),P=ge("CoinImgWarning");return a(),l("div",no,[o("div",oo,[ro,ee(d,{type:"depositRatio","xlink-href":"#icon-icon_tips"})]),o("div",ao,[o("div",so,[o("div",lo,[ee(P,{"token-info":e.fromCoin,"coin-size":"20px","warning-coin-size":"10px"},null,8,["token-info"]),o("span",null,n((f=e.fromCoin)==null?void 0:f.symbol),1),o("span",null,n(e.fromCoinRatio)+"%",1)]),o("div",uo,[ee(P,{"token-info":e.toCoin,"coin-size":"20px","warning-coin-size":"10px"},null,8,["token-info"]),o("span",null,n((H=e.toCoin)==null?void 0:H.symbol),1),o("span",null,n(e.toCoinRatio)+"%",1)])])])])}const mo=De(to,[["render",co]]),vo=je({components:{Modal:Vi,CoinImgWarning:at,NewStatusBlock:At},props:{title:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:"1245566.008946"},toCoinAmount:{type:String,default:"11111111111"},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},isIncrease:{type:Boolean,default:!1},fixedFromCoin:{type:Boolean,default:!0},currentPriceTab:{type:String,default:""},currentPrice:{type:String,default:""},currentPriceReverse:{type:String,default:""},showFromCoinLock:{type:Boolean,default:!1},showToCoinLock:{type:Boolean,default:!1},currentDirect:{type:Boolean,default:!0},positionTotalAmount:{type:Number,default:0},tickLower:{type:Number,default:0},tickUpper:{type:Number,default:0},isCreate:{type:Boolean,default:!1}},setup(e,u){const{t:A}=zi(),w=C(()=>{var I,q,O;return((I=e==null?void 0:e.poolInfo)==null?void 0:I.needReverse)||((O=(q=e==null?void 0:e.poolInfo)==null?void 0:q.poolInfo)==null?void 0:O.needReverse)}),$=pi(),R=C(()=>$),d=Je(),P=C(()=>d),f=I=>{var q;return(I==null?void 0:I.logoURI)||(I==null?void 0:I.logo_url)||((q=R.value.tokensObj[I==null?void 0:I.address])==null?void 0:q.logo_url)||(P.value.theme==="default"?ri("/image/coins/unknown.png"):ri("/image/coins/sui-unknown.png"))},H=y(!1),s=y(!0);function N(){s.value=!s.value}const L=C(()=>P.value.slippage),U=st(),Z=C(()=>U),j=C(()=>Z.value.status),c=C(()=>P.value.chainName),t=C(()=>tt[c.value].hasNotifi),b=fi(),p=y(!1),F=y(""),B=y(""),K=y(""),k=y("");return Ci(()=>{F.value=String(M(String(e.minPrice),6)),B.value=String(M(String(e.maxPrice),6)),K.value=e.currentPrice,k.value=e.currentPriceReverse,e.isIncrease&&(F.value=w.value?String(M(String(1/e.maxPrice),6)):String(M(String(e.minPrice),6)),B.value=w.value?String(M(String(1/e.minPrice),6)):String(M(String(e.maxPrice),6)),K.value=w.value?e.currentPriceReverse:e.currentPrice,k.value=w.value?e.currentPrice:e.currentPriceReverse)}),se(s,I=>{!e.isIncrease&&I||e.isIncrease&&!w.value&&I?(F.value=String(M(String(e.minPrice),6)),B.value=String(M(String(e.maxPrice),6))):!e.isIncrease&&!I||e.isIncrease&&!w.value&&!I?(F.value=String(M(String(1/Number(e.maxPrice)),6)),B.value=String(M(String(1/Number(e.minPrice)),6))):e.isIncrease&&w.value&&(e.currentDirect?I:!I)?(F.value=String(M(String(1/Number(e.maxPrice)),6)),B.value=String(M(String(1/Number(e.minPrice)),6))):e.isIncrease&&w.value&&(e.currentDirect?!I:I)&&(F.value=String(M(String(e.minPrice),6)),B.value=String(M(String(e.maxPrice),6))),K.value=e.currentPrice,k.value=e.currentPriceReverse}),{needReverse:w,getCoinIcon:f,addCommom:x,rateChange:H,changeDirect:N,direct:s,t:A,slippage:L,notifiStatus:j,hasNotifi:t,route:b,checked:p,min:F,max:B,decimalUi:M,clickSubmit:()=>{e.isIncrease?u.emit("toAdd"):e.title==ft.global.t("newAdd.preview")?u.emit("createPool"):u.emit("toAdd",p.value&&j.value=="authenticated")}}}});const Ii=e=>(ki("data-v-21f9f6ad"),e=e(),hi(),e),fo=Ii(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),po={class:"modal-content"},go={class:"pool-info"},bo={class:"left"},ko={class:"pool-name"},ho={class:"right"},yo={class:"coin-info"},Co={class:"from-coin-info"},Po={class:"left"},Io={class:"coin-amount"},So={class:"coin-symbol"},wo={class:"right"},To={class:"to-coin-info"},_o={class:"left"},$o={class:"coin-amount"},Ao={class:"coin-symbol"},No={class:"right"},Lo={class:"select-range"},qo=Ii(()=>o("div",{class:"select-range-title"},"Selected Range",-1)),Mo={class:"price-conent"},Ro={class:"current-price"},Uo={class:"left"},Oo={key:0,class:"current-price-title"},Fo={key:1,class:"current-price-title"},Bo={key:0,class:"a2b"},jo={key:0},Do={key:1},zo={key:2},Eo={key:3},Ho={key:4},Xo={key:5},Wo={key:6},Zo={key:7},Go={key:1,class:"a2b"},Ko={key:0},Jo={key:1},Yo={key:2},Qo={key:3},Vo={key:4},xo={key:5},er={key:6},ir={key:7},tr={key:2,class:"a2b"},nr={key:0},or={key:1},rr={key:2},ar={key:3},sr={key:3,class:"a2b"},lr={key:0},ur={key:1},cr={key:2},dr={key:3},mr={key:0,class:"a2b"},vr={key:0},fr={key:1},pr={key:2},gr={key:3},br={key:4},kr={key:5},hr={key:6},yr={key:7},Cr={key:1,class:"a2b"},Pr={key:0},Ir={key:1},Sr={key:2},wr={key:3},Tr={key:4},_r={key:5},$r={key:6},Ar={key:7},Nr={class:"right"},Lr=Ii(()=>o("use",{"xlink:href":"#icon-icon_swap2"},null,-1)),qr=[Lr],Mr={class:"price-range-block-content"},Rr={class:"price-range-block"},Ur={class:"price-item"},Or={class:"title"},Fr={class:"price"},Br={key:0,class:"text"},jr={key:1,class:"text"},Dr={key:0,class:"text"},zr={key:1,class:"text"},Er={key:0,class:"text"},Hr={key:1,class:"text"},Xr={class:"price-item"},Wr={class:"title"},Zr={class:"price"},Gr={key:0,class:"text"},Kr={key:1,class:"text"},Jr={key:0,class:"text"},Yr={key:1,class:"text"},Qr={key:0,class:"text"},Vr={key:1,class:"text"},xr={class:"deposit-ratio-content"},ea={key:0,class:"range-alerts"},ia={class:"range-alerts-top"},ta=Ii(()=>o("div",{class:"title"}," Range alerts for this position ",-1)),na=Ii(()=>o("div",{class:"range-alerts-bottom"}," Subscribe to receive alerts on email, SMS, or Telegram when the price for this pool moves out of your selected range. ",-1));function oa(e,u,A,w,$,R){const d=ge("CoinImgWarning"),P=ge("NewStatusBlock"),f=$t,H=Hi,s=Mi,N=ge("Modal");return a(),Ke(N,{width:"440px",visible:!0,footer:null,title:e.title,onCancel:u[2]||(u[2]=L=>e.$emit("onClose"))},{closeIcon:Be(()=>[fo]),default:Be(()=>{var L,U,Z,j,c,t,b,p,F,B;return[o("div",po,[o("div",go,[o("div",bo,[ee(d,{"token-info":(L=e.poolInfo)==null?void 0:L.token_a,"coin-size":"28px","warning-coin-size":"12px"},null,8,["token-info"]),ee(d,{"token-info":(U=e.poolInfo)==null?void 0:U.token_b,"coin-size":"28px","warning-coin-size":"12px"},null,8,["token-info"]),o("div",ko,[o("span",null,n(e.needReverse?(t=(c=e.poolInfo)==null?void 0:c.token_b)==null?void 0:t.symbol:(j=(Z=e.poolInfo)==null?void 0:Z.token_a)==null?void 0:j.symbol)+"Â -Â  ",1),o("span",null,n(e.needReverse?(B=(F=e.poolInfo)==null?void 0:F.token_a)==null?void 0:B.symbol:(p=(b=e.poolInfo)==null?void 0:b.token_b)==null?void 0:p.symbol),1)])]),o("div",ho,[ci(" Fee tier "),o("span",null,n(e.poolInfo&&e.poolInfo.fee*100)+"%",1)])]),o("div",yo,[o("div",Co,[o("div",Po,[o("div",Io,n(("addCommom"in e?e.addCommom:S(x))(e.fromCoinAmount)||0),1),o("div",So,n(e.fromCoin&&e.fromCoin.symbol),1)]),o("div",wo,[ee(d,{"token-info":e.fromCoin,"coin-size":"28px","warning-coin-size":"12px"},null,8,["token-info"])])]),o("div",To,[o("div",_o,[o("div",$o,n(("addCommom"in e?e.addCommom:S(x))(e.toCoinAmount)||0),1),o("div",Ao,n(e.toCoin&&e.toCoin.symbol),1)]),o("div",No,[ee(d,{"token-info":e.toCoin,"coin-size":"28px","warning-coin-size":"12px"},null,8,["token-info"])])])]),o("div",Lo,[qo,e.title!==e.$t("newAdd.preview")?(a(),Ke(P,{key:0,"position-info":e.showFromCoinLock||e.showToCoinLock?{positionStatus:"Active"}:{positionStatus:"Inactive"}},null,8,["position-info"])):g("",!0)]),o("div",Mo,[o("div",Ro,[o("div",Uo,[e.title!==e.$t("newAdd.preview")?(a(),l("div",Oo,"Current Price")):(a(),l("div",Fo,"Initial Price")),e.isCreate?(a(),l(xe,{key:3},[!e.isIncrease&&!e.needReverse?(a(),l("div",mr,[e.direct&&e.currentDirect?(a(),l("span",vr,n(("addCommom"in e?e.addCommom:S(x))(("decimalUi"in e?e.decimalUi:S(M))(e.currentPrice,e.toCoin.decimals))),1)):g("",!0),e.direct&&!e.currentDirect?(a(),l("span",fr,n(("addCommom"in e?e.addCommom:S(x))(("decimalUi"in e?e.decimalUi:S(M))(e.currentPriceReverse,e.toCoin.decimals))),1)):g("",!0),!e.direct&&e.currentDirect?(a(),l("span",pr,n(("addCommom"in e?e.addCommom:S(x))(("decimalUi"in e?e.decimalUi:S(M))(e.currentPriceReverse,e.fromCoin.decimals))),1)):g("",!0),!e.direct&&!e.currentDirect?(a(),l("span",gr,n(("addCommom"in e?e.addCommom:S(x))(("decimalUi"in e?e.decimalUi:S(M))(e.currentPrice,e.fromCoin.decimals))),1)):g("",!0),e.direct&&e.currentDirect?(a(),l("div",br,n(e.toCoin.symbol)+" per "+n(e.fromCoin.symbol),1)):g("",!0),e.direct&&!e.currentDirect?(a(),l("div",kr,n(e.toCoin.symbol)+" per "+n(e.fromCoin.symbol),1)):g("",!0),!e.direct&&e.currentDirect?(a(),l("div",hr,n(e.fromCoin.symbol)+" per "+n(e.toCoin.symbol),1)):g("",!0),!e.direct&&!e.currentDirect?(a(),l("div",yr,n(e.fromCoin.symbol)+" per "+n(e.toCoin.symbol),1)):g("",!0)])):!e.isIncrease&&e.needReverse?(a(),l("div",Cr,[e.direct&&e.currentDirect?(a(),l("span",Pr,n(("addCommom"in e?e.addCommom:S(x))(("decimalUi"in e?e.decimalUi:S(M))(e.currentPrice,e.toCoin.decimals))),1)):g("",!0),!e.direct&&e.currentDirect?(a(),l("span",Ir,n(("addCommom"in e?e.addCommom:S(x))(("decimalUi"in e?e.decimalUi:S(M))(e.currentPriceReverse,e.fromCoin.decimals))),1)):g("",!0),e.direct&&!e.currentDirect?(a(),l("span",Sr,n(("addCommom"in e?e.addCommom:S(x))(("decimalUi"in e?e.decimalUi:S(M))(e.currentPrice,e.toCoin.decimals))),1)):g("",!0),!e.direct&&!e.currentDirect?(a(),l("span",wr,n(("addCommom"in e?e.addCommom:S(x))(("decimalUi"in e?e.decimalUi:S(M))(e.currentPriceReverse,e.fromCoin.decimals))),1)):g("",!0),e.direct&&e.currentDirect?(a(),l("div",Tr,n(e.toCoin.symbol)+" per "+n(e.fromCoin.symbol),1)):g("",!0),!e.direct&&e.currentDirect?(a(),l("div",_r,n(e.fromCoin.symbol)+" per "+n(e.toCoin.symbol),1)):g("",!0),e.direct&&!e.currentDirect?(a(),l("div",$r,n(e.toCoin.symbol)+" per "+n(e.fromCoin.symbol),1)):g("",!0),!e.direct&&!e.currentDirect?(a(),l("div",Ar,n(e.fromCoin.symbol)+" per "+n(e.toCoin.symbol),1)):g("",!0)])):g("",!0)],64)):(a(),l(xe,{key:2},[!e.isIncrease&&!e.needReverse?(a(),l("div",Bo,[e.direct&&e.currentDirect?(a(),l("span",jo,n(("addCommom"in e?e.addCommom:S(x))(("decimalUi"in e?e.decimalUi:S(M))(e.currentPrice,e.toCoin.decimals))),1)):g("",!0),e.direct&&!e.currentDirect?(a(),l("span",Do,n(("addCommom"in e?e.addCommom:S(x))(("decimalUi"in e?e.decimalUi:S(M))(e.currentPriceReverse,e.toCoin.decimals))),1)):g("",!0),!e.direct&&e.currentDirect?(a(),l("span",zo,n(("addCommom"in e?e.addCommom:S(x))(("decimalUi"in e?e.decimalUi:S(M))(e.currentPriceReverse,e.fromCoin.decimals))),1)):g("",!0),!e.direct&&!e.currentDirect?(a(),l("span",Eo,n(("addCommom"in e?e.addCommom:S(x))(("decimalUi"in e?e.decimalUi:S(M))(e.currentPrice,e.fromCoin.decimals))),1)):g("",!0),e.direct&&e.currentDirect?(a(),l("div",Ho,n(e.toCoin.symbol)+" per "+n(e.fromCoin.symbol),1)):g("",!0),e.direct&&!e.currentDirect?(a(),l("div",Xo,n(e.toCoin.symbol)+" per "+n(e.fromCoin.symbol),1)):g("",!0),!e.direct&&e.currentDirect?(a(),l("div",Wo,n(e.fromCoin.symbol)+" per "+n(e.toCoin.symbol),1)):g("",!0),!e.direct&&!e.currentDirect?(a(),l("div",Zo,n(e.fromCoin.symbol)+" per "+n(e.toCoin.symbol),1)):g("",!0)])):!e.isIncrease&&e.needReverse?(a(),l("div",Go,[e.direct&&e.currentDirect?(a(),l("span",Ko,n(("addCommom"in e?e.addCommom:S(x))(("decimalUi"in e?e.decimalUi:S(M))(e.currentPrice,e.toCoin.decimals))),1)):g("",!0),!e.direct&&e.currentDirect?(a(),l("span",Jo,n(("addCommom"in e?e.addCommom:S(x))(("decimalUi"in e?e.decimalUi:S(M))(e.currentPriceReverse,e.fromCoin.decimals))),1)):g("",!0),e.direct&&!e.currentDirect?(a(),l("span",Yo,n(("addCommom"in e?e.addCommom:S(x))(("decimalUi"in e?e.decimalUi:S(M))(e.currentPriceReverse,e.toCoin.decimals))),1)):g("",!0),!e.direct&&!e.currentDirect?(a(),l("span",Qo,n(("addCommom"in e?e.addCommom:S(x))(("decimalUi"in e?e.decimalUi:S(M))(e.currentPrice,e.fromCoin.decimals))),1)):g("",!0),e.direct&&e.currentDirect?(a(),l("div",Vo,n(e.toCoin.symbol)+" per "+n(e.fromCoin.symbol),1)):g("",!0),!e.direct&&e.currentDirect?(a(),l("div",xo,n(e.fromCoin.symbol)+" per "+n(e.toCoin.symbol),1)):g("",!0),e.direct&&!e.currentDirect?(a(),l("div",er,n(e.toCoin.symbol)+" per "+n(e.fromCoin.symbol),1)):g("",!0),!e.direct&&!e.currentDirect?(a(),l("div",ir,n(e.fromCoin.symbol)+" per "+n(e.toCoin.symbol),1)):g("",!0)])):g("",!0),e.isIncrease&&!e.needReverse?(a(),l("div",tr,[e.direct?(a(),l("span",nr,n(("addCommom"in e?e.addCommom:S(x))(("decimalUi"in e?e.decimalUi:S(M))(e.currentPrice,e.toCoin.decimals))),1)):(a(),l("span",or,n(("addCommom"in e?e.addCommom:S(x))(("decimalUi"in e?e.decimalUi:S(M))(e.currentPriceReverse,6))),1)),e.direct?(a(),l("div",ar,n(e.toCoin.symbol)+" per "+n(e.fromCoin.symbol),1)):(a(),l("div",rr,n(e.fromCoin.symbol)+" per "+n(e.toCoin.symbol),1))])):g("",!0),e.isIncrease&&e.needReverse?(a(),l("div",sr,[e.direct?(a(),l("span",lr,n(("addCommom"in e?e.addCommom:S(x))(("decimalUi"in e?e.decimalUi:S(M))(e.currentPriceReverse,e.fromCoin.decimals))),1)):(a(),l("span",ur,n(("addCommom"in e?e.addCommom:S(x))(("decimalUi"in e?e.decimalUi:S(M))(e.currentPrice,e.toCoin.decimals))),1)),e.direct?(a(),l("div",cr,n(e.toCoin.symbol)+" per "+n(e.fromCoin.symbol),1)):(a(),l("div",dr,n(e.fromCoin.symbol)+" per "+n(e.toCoin.symbol),1))])):g("",!0)],64))]),o("div",Nr,[(a(),l("svg",{class:"icon icon-up","aria-hidden":"true",onClick:u[0]||(u[0]=(...K)=>e.changeDirect&&e.changeDirect(...K))},qr))])]),o("div",Mr,[o("div",Rr,[o("div",Ur,[o("div",Or,n(e.$t("common.minPrice")),1),o("p",Fr,n(("addCommom"in e?e.addCommom:S(x))(e.min)),1),!e.isIncrease&&!e.direct?(a(),l("div",Br,n(e.fromCoin.symbol)+" per "+n(e.toCoin.symbol),1)):!e.isIncrease&&e.direct?(a(),l("div",jr,n(e.toCoin.symbol)+" per "+n(e.fromCoin.symbol),1)):g("",!0),e.isIncrease&&e.needReverse?(a(),l(xe,{key:2},[e.isIncrease&&(e.needReverse?e.direct:!e.direct)?(a(),l("div",Dr,n(e.toCoin.symbol)+" per "+n(e.fromCoin.symbol),1)):e.isIncrease&&(e.needReverse?!e.direct:e.direct)?(a(),l("div",zr,n(e.fromCoin.symbol)+" per "+n(e.toCoin.symbol),1)):g("",!0)],64)):g("",!0),e.isIncrease&&!e.needReverse?(a(),l(xe,{key:3},[e.isIncrease&&(e.needReverse?e.direct:!e.direct)?(a(),l("div",Er,n(e.fromCoin.symbol)+" per "+n(e.toCoin.symbol),1)):e.isIncrease&&(e.needReverse?!e.direct:e.direct)?(a(),l("div",Hr,n(e.toCoin.symbol)+" per "+n(e.fromCoin.symbol),1)):g("",!0)],64)):g("",!0)]),o("div",Xr,[o("div",Wr,n(e.$t("common.maxPrice")),1),o("p",Zr,n(e.maxPrice.indexOf("âˆž")>-1||e.maxPrice.indexOf("+")>-1?"âˆž":("addCommom"in e?e.addCommom:S(x))(e.max)),1),!e.isIncrease&&!e.direct?(a(),l("div",Gr,n(e.fromCoin.symbol)+" per "+n(e.toCoin.symbol),1)):!e.isIncrease&&e.direct?(a(),l("div",Kr,n(e.toCoin.symbol)+" per "+n(e.fromCoin.symbol),1)):g("",!0),e.isIncrease&&e.needReverse?(a(),l(xe,{key:2},[e.isIncrease&&(e.needReverse?e.direct:!e.direct)?(a(),l("div",Jr,n(e.toCoin.symbol)+" per "+n(e.fromCoin.symbol),1)):e.isIncrease&&(e.needReverse?!e.direct:e.direct)?(a(),l("div",Yr,n(e.fromCoin.symbol)+" per "+n(e.toCoin.symbol),1)):g("",!0)],64)):g("",!0),e.isIncrease&&!e.needReverse?(a(),l(xe,{key:3},[e.isIncrease&&(e.needReverse?e.direct:!e.direct)?(a(),l("div",Qr,n(e.fromCoin.symbol)+" per "+n(e.toCoin.symbol),1)):e.isIncrease&&(e.needReverse?!e.direct:e.direct)?(a(),l("div",Vr,n(e.toCoin.symbol)+" per "+n(e.fromCoin.symbol),1)):g("",!0)],64)):g("",!0)])])])]),o("div",xr,[e.poolInfo?(a(),Ke(f,{key:0,"min-price":e.minPrice,"max-price":e.maxPrice,"pool-info":e.poolInfo,"fixed-from-coin":e.fixedFromCoin,"from-coin":e.fromCoin,"to-coin":e.toCoin,"current-price-tab":e.currentPriceTab,slippage:e.slippage,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"position-total-amount":e.positionTotalAmount,"tick-lower":e.tickLower,"tick-upper":e.tickUpper},null,8,["min-price","max-price","pool-info","fixed-from-coin","from-coin","to-coin","current-price-tab","slippage","current-price","current-price-reverse","from-coin-amount","to-coin-amount","position-total-amount","tick-lower","tick-upper"])):g("",!0)])]),e.notifiStatus=="authenticated"&&e.hasNotifi&&e.route.name=="liquidity-deposit"&&e.title==e.$t("button.addLiquidity")&&e.minPrice!=="0"&&e.maxPrice!=="âˆž"?(a(),l("div",ea,[o("div",ia,[ta,ee(H,{class:"range-alerts-switch",checked:e.checked,onClick:u[1]||(u[1]=K=>e.checked=!e.checked)},null,8,["checked"])]),na])):g("",!0),ee(s,{class:"big-btn modal-bottom-btn",style:Bi(e.notifiStatus=="authenticated"&&e.hasNotifi&&e.route.name=="liquidity-deposit"&&e.title==e.$t("button.addLiquidity")&&e.minPrice!=="0"&&e.maxPrice!=="âˆž"?{bottom:"-172px"}:{bottom:"-65px"}),onClick:e.clickSubmit},{default:Be(()=>[ci(n(e.isIncrease?"Increase Liquidity":e.title==e.$t("button.addLiquidity")?"Add Liquidity":"Create and Add Liquidity"),1)]),_:1},8,["style","onClick"])]}),_:1},8,["title"])}const ra=De(vo,[["render",oa],["__scopeId","data-v-21f9f6ad"]]),aa=je({components:{IconTooltip:rt},props:{lever:{type:String,default:""}},setup(){return{}}});const sa=e=>(ki("data-v-0923a380"),e=e(),hi(),e),la={class:"lever"},ua={class:"left"},ca=sa(()=>o("span",{class:"lever-title"},"Leverage",-1)),da={class:"lever-text"};function ma(e,u,A,w,$,R){const d=ge("IconTooltip");return a(),l("div",la,[o("div",ua,[ca,ee(d,{type:"leverage","xlink-href":"#icon-icon_tips"})]),o("div",da,n(e.lever),1)])}const va=De(aa,[["render",ma],["__scopeId","data-v-0923a380"]]),fa=je({components:{Modal:Vi,CoinImg:nt},props:{positionInfo:{type:Object,default:()=>({})},poolInfo:{type:Object,required:!0},farmPoolInfo:{type:Object,default:()=>({})},isAutoStakeFarming:{type:Boolean,default:!0}},setup(e){const u=Je(),A=C(()=>u),w=C(()=>A.value.chainName),$=C(()=>tt[w.value]);let R=y(!0);const d=pi(),P=C(()=>d),f=Xi(),H=C(()=>{var U;return(U=e.poolInfo)==null?void 0:U.needResever}),s=C(()=>e.farmPoolInfo&&e.isAutoStakeFarming?`/new-position-detail?position_nft_id=${e.positionInfo.id}&positionSource=farming`:`/new-position-detail?collect=${e.positionInfo.collectionName}&&token=${e.positionInfo.tokenName}&&address=${e.positionInfo.pool}&pos=${e.positionInfo.pos_object_id}`),N=U=>{var Z;return(U==null?void 0:U.logoURI)||(U==null?void 0:U.logo_url)||((Z=P.value.tokensObj[U==null?void 0:U.address])==null?void 0:Z.logo_url)||(A.value.theme==="default"?ri("/image/coins/unknown.png"):ri("/image/coins/sui-unknown.png"))},L=C(()=>A.value.currentExplorer);return{getExplorerUrl:bt,addCommom:x,router:f,pools:P,decimalFormat:et,rateChange:R,config:$,importIcon:ri,store:A,chainName:w,checkNullObj:ve,needReverse:H,getCoinIcon:N,decimalUi:M,currentExplorer:L,positionDetailUrl:s}}});const Si=e=>(ki("data-v-b2b2fe57"),e=e(),hi(),e),pa=Si(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),ga={class:"view-detail-box"},ba=Si(()=>o("div",{class:"coin-pair"},null,-1)),ka={class:"coin-pair"},ha={class:"fee"},ya={class:"status"},Ca={class:"min-and-max"},Pa={key:0},Ia={class:"text"},Sa=Si(()=>o("img",{src:lt,alt:""},null,-1)),wa={class:"text"},Ta={key:1},_a={class:"text"},$a=Si(()=>o("img",{src:lt,alt:""},null,-1)),Aa={class:"text"},Na=Si(()=>o("use",{"xlink:href":"#icon-icon_swap2"},null,-1)),La=[Na];function qa(e,u,A,w,$,R){const d=ge("CoinImg"),P=Lt,f=Mi,H=ge("Modal");return a(),Ke(H,{visible:!0,class:"transiaction-rejected",centered:"",title:e.$t("newAdd.openPositionSuccessful"),width:"340px",footer:null,onCancel:u[2]||(u[2]=s=>e.$emit("onClose"))},{closeIcon:Be(()=>[pa]),default:Be(()=>{var s,N,L,U,Z,j,c,t,b,p,F,B,K,k,Y,I,q,O,le,re,X,E,ue,ne,$e,Q,me,He,Ae,ai;return[o("div",ga,[ba,o("div",{class:ei(["left",`position-status-${e.positionInfo&&e.positionInfo.currentStatus&&e.positionInfo.currentStatus.toLowerCase()}`])},[o("div",ka,[o("div",null,[ee(d,{url:e.getCoinIcon(e.needReverse?(N=e.positionInfo)==null?void 0:N.token_b:(s=e.positionInfo)==null?void 0:s.token_a)},null,8,["url"]),ee(d,{url:e.getCoinIcon(e.needReverse?(U=e.positionInfo)==null?void 0:U.token_a:(L=e.positionInfo)==null?void 0:L.token_b)},null,8,["url"])]),o("span",null,n(e.needReverse?(t=(c=e.positionInfo)==null?void 0:c.token_b)==null?void 0:t.symbol:(j=(Z=e.positionInfo)==null?void 0:Z.token_a)==null?void 0:j.symbol)+" - "+n(e.needReverse?(B=(F=e.positionInfo)==null?void 0:F.token_a)==null?void 0:B.symbol:(p=(b=e.positionInfo)==null?void 0:b.token_b)==null?void 0:p.symbol),1)]),o("div",ha,n(e.$t("common.fee"))+" "+n(e.poolInfo.fee*100)+"%",1)],2),o("div",ya,[ee(P,{"current-status":e.positionInfo.currentStatus||""},null,8,["current-status"])]),o("div",Ca,[(e.needReverse?!e.rateChange:e.rateChange)?(a(),l("div",Pa,[o("div",Ia,n(("addCommom"in e?e.addCommom:S(x))(("decimalUi"in e?e.decimalUi:S(M))(String(e.positionInfo&&e.positionInfo.minPrice),6))),1),Sa,o("div",wa,n(e.positionInfo&&((k=(K=e.positionInfo)==null?void 0:K.maxPrice)==null?void 0:k.indexOf("âˆž"))>-1||e.positionInfo&&((I=(Y=e.positionInfo)==null?void 0:Y.maxPrice)==null?void 0:I.indexOf("+"))>-1?"âˆž":("addCommom"in e?e.addCommom:S(x))(("decimalUi"in e?e.decimalUi:S(M))(String(e.positionInfo&&((q=e.positionInfo)==null?void 0:q.maxPrice)),6)))+" "+n((le=(O=e.positionInfo)==null?void 0:O.token_b)==null?void 0:le.symbol)+" per "+n((X=(re=e.positionInfo)==null?void 0:re.token_a)==null?void 0:X.symbol),1)])):(a(),l("div",Ta,[o("div",_a,n(("addCommom"in e?e.addCommom:S(x))(("decimalUi"in e?e.decimalUi:S(M))(String(1/Number(e.positionInfo&&((E=e.positionInfo)==null?void 0:E.maxPrice))),6))),1),$a,o("div",Aa,n(e.positionInfo&&((ue=e.positionInfo.maxPrice)==null?void 0:ue.indexOf("âˆž"))>-1||e.positionInfo&&((ne=e.positionInfo.maxPrice)==null?void 0:ne.indexOf("+"))>-1?"âˆž":("addCommom"in e?e.addCommom:S(x))(("decimalUi"in e?e.decimalUi:S(M))(String(1/Number(e.positionInfo&&(($e=e.positionInfo)==null?void 0:$e.minPrice))),6)))+" "+n((me=(Q=e.positionInfo)==null?void 0:Q.token_a)==null?void 0:me.symbol)+" per "+n((Ae=(He=e.positionInfo)==null?void 0:He.token_b)==null?void 0:Ae.symbol),1)])),(a(),l("svg",{class:"icon-change","aria-hidden":"true",onClick:u[0]||(u[0]=ii=>e.rateChange=!e.rateChange)},La))])]),ee(f,{disabled:("checkNullObj"in e?e.checkNullObj:S(ve))(e.positionInfo)||e.isAutoStakeFarming&&!((ai=e.positionInfo)!=null&&ai.clmm_pool_id),onClick:u[1]||(u[1]=ii=>e.router.push(e.positionDetailUrl))},{default:Be(()=>[ci(n(e.$t("newAdd.viewDetail")),1)]),_:1},8,["disabled"])]}),_:1},8,["title"])}const Ma=De(fa,[["render",qa],["__scopeId","data-v-b2b2fe57"]]),Ra=je({props:{poolInfo:{type:Object,default:()=>({})},isActive:{type:Boolean,default:!0}},setup(e,u){const A=Ri();C(()=>A);const w=y(!1),$=y(),R=y(!0),d=Je(),P=C(()=>d),f=C(()=>P.value.newTopPoolsObj),H=N=>{var Z,j,c,t;const L=N[(Z=e==null?void 0:e.poolInfo)==null?void 0:Z.poolAddress]||{};let U=0;L&&!ve(L)&&((c=(j=L==null?void 0:L.stable_farming)==null?void 0:j.stable_rewarder)==null||c.forEach(b=>{b.amount_second>0&&(U+=b.amount_second)}),U>0?(w.value=!0,$.value={id:L.stable_farming.stable_farming_pool,clmm_pool_id:(t=e==null?void 0:e.poolInfo)==null?void 0:t.poolAddress},u.emit("sendFarmsPoolInfo",R.value&&e.isActive?$.value:"")):(w.value=!1,u.emit("sendFarmsPoolInfo","")))};return se(()=>[f.value,e.poolInfo],([N,L])=>{N&&!ve(N)&&L&&!ve(L)&&H(N)},{immediate:!0}),se(()=>[e.isActive,R.value,$.value],([N,L,U])=>{u.emit("sendFarmsPoolInfo",L&&e.isActive?U:"")},{immediate:!0}),{isShowAutoStake:w,changeIsOpen:()=>{R.value=!R.value,u.emit("sendFarmsPoolInfo",R.value&&e.isActive?$.value:"")},isOpen:R}}});const Ua=e=>(ki("data-v-489098d8"),e=e(),hi(),e),Oa={key:0,class:"farms-auto-stake"},Fa=Ua(()=>o("div",{class:"icon-desc"},[o("img",{class:"farms-icon",src:ot,alt:""}),o("div",{class:"desc"},"Automatically stake your position into the farm to enjoy higher yield.")],-1)),Ba={class:"switch-box"},ja={key:0,class:"check-box-active plus-switch plus-liquidity-switch"},Da={class:"check-box-active plus-switch plus-liquidity-switch"};function za(e,u,A,w,$,R){const d=Hi,P=Qi;return e.isShowAutoStake?(a(),l("div",Oa,[Fa,o("div",Ba,[e.isActive?(a(),l("div",ja,[ee(d,{class:"liquidity-switch",checked:e.isOpen,onClick:e.changeIsOpen},null,8,["checked","onClick"])])):(a(),Ke(P,{key:1,"overlay-style":{"min-width":"200px"},"overlay-class-name":"ant-tooltip-text-color"},pt({default:Be(()=>[o("div",Da,[ee(d,{class:"liquidity-switch",checked:!1,onClick:()=>{}})])]),_:2},[e.isActive?void 0:{name:"title",fn:Be(()=>[ci("Farming rewards only available for active positions.")]),key:"0"}]),1024))])])):g("",!0)}const Ea=De(Ra,[["render",za],["__scopeId","data-v-489098d8"]]),Ha=je({components:{SuiLiquidityTitle:io,SuiLiquidityDepositRatio:mo,InputLock:Nt,SuiAddOrCreate:ra,SuiFarmsAutoStake:Ea,TokenInputBlock:qt,SuiLiquidityLever:va,SuiViewDetail:Ma},setup(){const{t:e,locale:u}=zi(),A=Je(),w=C(()=>A),$=C(()=>w.value.chainName),R=pi(),d=C(()=>R),P=yt(),f=C(()=>P),H=fi(),s=C(()=>{let r=null;for(const T in d.value.poolsObj){const D=d.value.poolsObj[T];D.address==H.query.poolAddress&&(r=D)}return console.log("ðŸš€ðŸš€ðŸš€ ~ file: sui-liquidity-right.vue:272 ~ constpoolInfo:any=computed ~ info:",r),r}),N=y(!1),L=y(!1),U=C(()=>w.value.theme),Z=async(r,T)=>{G.value=r.needReverse?r.token_b:r.token_a,W.value=r.needReverse?r.token_a:r.token_b,ie.value="",te.value=""},j=C(()=>f.value.assets&&G.value&&f.value.assets[G.value.address]?Gi(f.value.assets[G.value.address].balance,G.value.decimals):"0"),c=C(()=>f.value.assets&&W.value&&f.value.assets[W.value.address]?Gi(f.value.assets[W.value.address].balance,W.value.decimals):"0"),t=y(),b=y(),p=y(),F=y(!1),B=r=>{var T,D,ke,de;t.value=r,r==="fromCoin"?(b.value=((T=W.value)==null?void 0:T.address)||"",p.value=H.query.actions=="new-position"?(D=G.value)==null?void 0:D.address:s.value.needReverse?s.value.token_b.address:s.value.token_a.address):(b.value=((ke=G.value)==null?void 0:ke.address)||"",p.value=H.query.actions=="new-position"?(de=W.value)==null?void 0:de.address:s.value.needReverse?s.value.token_a.address:s.value.token_b.address),F.value=!0},K=r=>{var ke,de,Se,we,he,Ce,Pe,_e;const T=s.value.needReverse?s.value.token_b:s.value.token_a,D=s.value.needReverse?s.value.token_a:s.value.token_b;t.value==="fromCoin"?(((ke=G.value)==null?void 0:ke.address)===(T==null?void 0:T.address)||!((de=G.value)!=null&&de.address)?(W.value&&r.address.toLowerCase()===((Se=W)==null?void 0:Se.value.address.toLowerCase())&&(W.value=null),G.value=r):(G.value&&r.address.toLowerCase()===((we=G)==null?void 0:we.value.address.toLowerCase())&&(G.value=null),W.value=r),H.query.action||(H.query.fee="")):((he=W.value)==null?void 0:he.address)===(D==null?void 0:D.address)||!((Ce=W.value)!=null&&Ce.address)?(G.value&&r.address.toLowerCase()===((Pe=G)==null?void 0:Pe.value.address.toLowerCase())&&(G.value=null),W.value=r):(W.value&&r.address.toLowerCase()===((_e=W)==null?void 0:_e.value.address.toLowerCase())&&(W.value=null),G.value=r),F.value=!1},k=C(()=>w.value.chainName?Pi(w.value.chainName):{}),Y=C(()=>w.value.slippage),I=y(),q=async()=>{var Ee,qe,Re,ni;if(Ge.value||!J.value&&!z.value)return!1;if(!ie.value&&!te.value&&!J.value&&!z.value)return;const r=s.value||{};if(ve(r))return;const{TickUtil:T,TickMath:D,getNearestTickByTick:ke}=k.value,de=r==null?void 0:r.token_a.decimals,Se=r==null?void 0:r.token_b.decimals;let we,he,Ce,Pe,_e,Le,Ve,ui,ye=r==null?void 0:r.current_tick_index;if(!ye)return;let pe;if(r.token_a.address.toLowerCase()===G.value.address.toLowerCase()&&r.token_b.address.toLowerCase()===W.value.address.toLowerCase()?pe=!0:pe=!1,J.value==="0"&&z.value==="âˆž")Ce=T.getMinIndex(Number(r.tickSpacing)),Pe=T.getMaxIndex(Number(r.tickSpacing)),_e=D.tickIndexToSqrtPriceX64(Ce),Le=D.tickIndexToSqrtPriceX64(Pe);else if(ce.value=="custom"){pe?(we=J.value,he=z.value):(we=z.value!=="âˆž"?new h(1).div(z.value).toString():1/0,he=new h(1).div(J.value).toString());try{Ve=new h(we).equals(new h(0))?-443636:D.priceToTickIndex(new h(we),de,Se)}catch{Ve=-443636}try{ui=D.priceToTickIndex(new h(he),de,Se)}catch{ui=443636}Ce=ke(Ve,Number(r.tickSpacing),!0),Pe=ke(ui,Number(r.tickSpacing),!0);try{_e=D.priceToSqrtPriceX64(new h(we),de,Se)}catch{(he===1/0||he==="âˆž")&&(_e=D.tickIndexToSqrtPriceX64(T.getMinIndex(Number(r.tickSpacing))))}try{Le=D.priceToSqrtPriceX64(new h(he),de,Se)}catch{(he===1/0||he==="âˆž")&&(Le=D.tickIndexToSqrtPriceX64(T.getMaxIndex(Number(r.tickSpacing))))}}else Ce=(Ee=vi.value[ce.value])==null?void 0:Ee.lower,Pe=(qe=vi.value[ce.value])==null?void 0:qe.upper,_e=D.tickIndexToSqrtPriceX64(Ce),Le=D.tickIndexToSqrtPriceX64(Pe);if(z.value!=="âˆž"&&Ce>=Pe){console.log("ðŸš€ðŸš€ðŸš€ ~ file: sui-liquidity-right.vue:639 ~ updateAmounts ~",z.value!=="âˆž"&&Ce>=Pe),N.value=!0,ie.value="",L.value=!0,te.value="";return}if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: sui-liquidity-right.vue:708 ~ updateAmounts ~ currentTickIndex:",ye),z.value==="âˆž"||ye>=Ce&&ye<Pe){N.value=!1,L.value=!1;let be;if(ie.value||te.value){if(Fe.value){const Ui=new h(ie.value).mul(Math.pow(10,G.value.decimals)).toString();be=new Me(Ui)}else{const Ui=new h(te.value).mul(Math.pow(10,W.value.decimals)).toString();be=new Me(Ui)}D.tickIndexToSqrtPriceX64(s.value.current_tick_index);const{liquidityAmount:Ue,tokenMaxA:oi,tokenMaxB:Ai,tokenMaxAOrigin:ut,tokenMaxBOrigin:ct}=k.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:r.token_a,tokenB:r.token_b,lowerTick:Ce,upperTick:Pe,coinAmount:be,iscoinA:pe?Fe.value:!Fe.value,roundUp:!0,slippage:Number(Y.value)/100,curSqrtPrice:new Me(s.value.current_sqrt_price)});I.value={liquidityAmount:Ue,tokenMaxA:oi,tokenMaxB:Ai,tokenMaxAOrigin:ut,tokenMaxBOrigin:ct},pe?Fe.value?te.value=Number(Ai)>0?Ai:"":ie.value=Number(oi)>0?oi:"":Fe.value?te.value=oi:ie.value=Ai}}else if(ye>=Pe){if(pe?ie.value="":te.value="",N.value=pe,L.value=!pe,ie.value||te.value){let be;if(pe){const Ue=new h(te.value).mul(Math.pow(10,(Re=W.value)==null?void 0:Re.decimals)).toString();be=new Me(Ue),I.value={liquidityAmount:k.value.estimateLiquidityForCoinB(_e,Le,be),tokenMaxA:0,tokenMaxB:te.value}}else{const Ue=new h(ie.value).mul(Math.pow(10,(ni=G.value)==null?void 0:ni.decimals)).toString();be=new Me(Ue),I.value={liquidityAmount:k.value.estimateLiquidityForCoinB(_e,Le,be),tokenMaxA:0,tokenMaxB:ie.value}}}}else if(ye<Ce){if(N.value=!pe,L.value=pe,pe?te.value="":ie.value="",ie.value||te.value){let be;if(pe){const Ue=new h(ie.value).mul(Math.pow(10,G.value.decimals)).toString();be=new Me(Ue),I.value={liquidityAmount:k.value.estimateLiquidityForCoinA(_e,Le,be),tokenMaxA:ie.value,tokenMaxB:0}}else{const Ue=new h(te.value).mul(Math.pow(10,W.value.decimals)).toString();be=new Me(Ue),I.value={liquidityAmount:k.value.estimateLiquidityForCoinA(_e,Le,be),tokenMaxA:te.value,tokenMaxB:0}}}}else N.value=!0,console.log("ðŸš€ðŸš€ðŸš€ ~ file: sui-liquidity-right.vue:783 ~ updateAmounts ~ showFromCoinLock.value:",N.value),ie.value="",L.value=!0,te.value=""};se(()=>s.value,(r,T)=>{(!T&&r&&!ve(r)||T&&r&&T.address!==r.address)&&Z(r,!T||r.address!==T.address),r&&!ve(r)&&q()},{immediate:!0}),se(ie,(r,T)=>{r==""&&Fe.value&&(te.value=""),r&&Fe.value&&!Ge.value&&q()}),se(te,(r,T)=>{r==""&&!Fe.value&&(ie.value=""),r&&!Fe.value&&!Ge.value&&q()}),se(()=>Ie.value,(r,T)=>{q()}),se(()=>[G.value,W.value],([r,T])=>{r&&T&&(N.value=!1,L.value=!1)});const O=y("--"),le=C(()=>d.value.RATES),re=()=>{const r=le.value&&le.value[G.value.address]&&le.value[G.value.address].price,T=le.value&&le.value[W.value.address]&&le.value[W.value.address].price;if(r&&T){const D=new h(ie.value>0?ie.value:0).mul(r),ke=new h(te.value>0?te.value:0).mul(T),de=D.add(ke).toNumber();O.value=de>0&&de<.01?"<$0.01":"$"+x(de,2)}else O.value="--"};se(()=>[ie.value,te.value,Ge.value],([r,T,D])=>{(r||T)&&!D?re():(!r||!T)&&!D&&(O.value="--")},{immediate:!0});const X=y(),E=async()=>{var pe,Ee;if(!J.value&&!z.value)return!1;if(!ie.value&&!te.value&&!J.value&&!z.value)return;const r=s.value;if(ve(r))return;const{TickUtil:T,TickMath:D,getNearestTickByTick:ke}=k.value,de=r==null?void 0:r.token_a.decimals,Se=r==null?void 0:r.token_b.decimals;let we,he,Ce,Pe,_e,Le,Ve;if(r.token_a.address.toLowerCase()===G.value.address.toLowerCase()&&r.token_b.address.toLowerCase()===W.value.address.toLowerCase()?Ve=!0:Ve=!1,J.value==="0"&&z.value==="âˆž")Ce=T.getMinIndex(Number(r.tickSpacing)),Pe=T.getMaxIndex(Number(r.tickSpacing));else if(ce.value=="custom"){Ve?(we=Number(J.value),he=Number(z.value)):(we=new h(1).div(z.value).toString(),he=new h(1).div(J.value).toString());try{_e=we==0?-443636:D.priceToTickIndex(new h(we),de,Se)}catch{_e=-443636}try{Le=D.priceToTickIndex(new h(he),de,Se)}catch{Le=443636}Ce=ke(_e,Number(r.tickSpacing),!0),Pe=ke(Le,Number(r.tickSpacing),!0)}else Ce=(pe=vi.value[ce.value])==null?void 0:pe.lower,Pe=(Ee=vi.value[ce.value])==null?void 0:Ee.upper;const ui=le.value[r==null?void 0:r.token_a.address].price,ye=le.value[r==null?void 0:r.token_b.address].price;Ie.value?new Me(r.current_sqrt_price):new Me(1/r.current_sqrt_price);try{const{amountA:qe,amountB:Re,tokenAmountsInfo:ni}=await k.value.estCoinAmountsFromTotalAmount({lowerTick:Ce,upperTick:Pe,decimalsA:de,decimalsB:Se,curSqrtPrice:new Me(r.current_sqrt_price),totalAmount:O.value.replace(/[^\d.]/g,""),tokenPriceA:ui,tokenPriceB:ye});X.value=ni,r.needReverse?Ie.value?(ie.value=qe,te.value=Re):(ie.value=Re,te.value=qe):(ie.value=qe,te.value=Re)}catch(qe){console.log(qe,"e===>")}};se([J,z],([r,T])=>{Ge.value?Ge.value&&E():q(),T!=="âˆž"&&Number(r)!==0&&Number(T)!==0&&Number(r)>=Number(T)?bi.value=!0:bi.value=!1,Number(r)==0&&Number(T)==0&&yi.value&&(bi.value=!0)},{deep:!0,immediate:!0});const ue=r=>{const T=r.replace(/[^\d.]/g,""),D="$"+x(T);Ge.value=!0,O.value=D,T>0?E():(ie.value="",te.value="")},ne=y(!1),{setTransactionTxid:$e,setTransactionDesc:Q,setIsShowWaiting:me,setIsShowSuccess:He,setPositiomNum:Ae,setIsShowRejected:ai}=A,ii=st(),Xe=C(()=>d.value.currentPositionInfo),di=y(!1),ze=y(!0),Te=Ri(),We=C(()=>Te),Ye=C(()=>We.value.farmsPoolObj);se(()=>[Ye.value,s.value],([r,T])=>{r&&!ve(r)&&T&&!ve(T)&&(r[T.address]||(ze.value=!1))},{immediate:!0});const Qe=y(),Ze=y(),Ne=r=>{Qe.value=r,r?ze.value=!0:ze.value=!1},i=async(r,T,D,ke)=>{try{T=="farming"?await d.value.setCurrentPositionInfo("","","","Sui",D,"farming"):await d.value.setCurrentPositionInfo(r,"","",$.value,ke),await kt(3e3),ze.value?await ii.subscribePosition({pool_address:Xe.value.clmm_pool_id,position_index:Xe.value.name.split("-")[1]},Xe.value.clmm_position_id):await ii.subscribePosition({pool_address:Xe.value.poolAddress,position_index:Xe.value.index},Xe.value.nftHash)}catch(de){console.log("ðŸš€ðŸš€ðŸš€ ~ file: sui-liquidity-right.vue:1151 ~ notifiSubscribePosition ~ error:",de)}},_=async r=>{var _e,Le,Ve,ui;ne.value=!1,d.value.currentPositionInfo={},$e(""),Q(e("tips.increaseLiquiditySuccess",{from:N.value?"":`${x(ie.value)} ${(_e=G.value)==null?void 0:_e.symbol}`,and:!N.value&&!L.value?"and":"",to:L.value?"":`${x(te.value)} ${(Le=W.value)==null?void 0:Le.symbol}`})),me(!0);const T=Ie.value?Fe.value:!Fe.value;let D,ke,de,Se,we,he;const Ce=s.value.token_a.decimals,Pe=s.value.token_b.decimals;if(J.value==="0"&&z.value==="âˆž")de=k.value.TickUtil.getMinIndex(Number(s.value.tickSpacing)),Se=k.value.TickUtil.getMaxIndex(Number(s.value.tickSpacing));else if(ce.value=="custom"){Ie.value?(D=J.value,ke=z.value):(D=new h(1).div(z.value).toString(),ke=new h(1).div(J.value).toString());try{we=D==0?k.value.TickUtil.getMinIndex(Number(s.value.tickSpacing)):k.value.TickMath.priceToTickIndex(new h(D),Ce,Pe)}catch{we=k.value.TickUtil.getMinIndex(Number(s.value.tickSpacing))}try{he=k.value.TickMath.priceToTickIndex(new h(ke),Ce,Pe)}catch{he=k.value.TickUtil.getMaxIndex(Number(s.value.tickSpacing))}de=k.value.getNearestTickByTick(we,Number(s.value.tickSpacing),!0),Se=k.value.getNearestTickByTick(he,Number(s.value.tickSpacing),!0)}else de=vi.value[ce.value].lower,Se=vi.value[ce.value].upper;try{let ye;Ge.value?ye=await k.value.getCreateAddLiquidityPayload({pool:s.value,curSqrtPrice:new Me(s.value.current_sqrt_price),tickLower:de,tickUpper:Se,slippage:Number(Y.value)/100,tokenAmounts:X.value}):ye=await k.value.getAddLiquidityTransactionPayload({pool:{poolAddress:s.value.poolAddress,token_a:s.value.token_a,token_b:s.value.token_b},amount:Fe.value?ie.value:te.value,fix_amount_a:T,tick_lower:de,tick_upper:Se,index:0,slippage:Number(Y.value)/100,roundUp:!0,collect_fee:!1,curSqrtPrice:new Me(s.value.current_sqrt_price),farmPoolInfo:Qe.value});let pe;if($.value==="Aptos")pe=await f.value.currentWallet.signAndSubmitTransaction(ye);else{const Ee=await k.value.signAndExecuteTransactionBlock(f.value.currentWallet,ye==null?void 0:ye.txb,ye==null?void 0:ye.payloadParams);pe=k.value.handleTx(Ee)}if(console.log("0410###tx###",pe),pe&&pe.hash){$e(pe.hash),me(!1),He(!0);let Ee;s.value.needReverse?s.value.token_a.address.toLowerCase()===G.value.address.toLowerCase()&&s.value.token_b.address.toLowerCase()===W.value.address.toLowerCase()?Ee=!1:Ee=!0:s.value.token_a.address.toLowerCase()===G.value.address.toLowerCase()&&s.value.token_b.address.toLowerCase()===W.value.address.toLowerCase()?Ee=!0:Ee=!1;const qe={title:"Supplied",desc:e("tips.addLiquiditySuccessText",{from:N.value?"":`${x(ie.value)} ${(Ve=G.value)==null?void 0:Ve.symbol}`,and:!N.value&&!L.value?"and":"",to:L.value?"":`${x(te.value)} ${(ui=W.value)==null?void 0:ui.symbol}`}),hash:pe.hash,tit:"Position Created",icon:"icon-icon-Position-Created"};$.value!=="Aptos"&&(qe.res=pe.res),k.value.showTransitionPending(qe),console.log(qe,"toAdd params###");const Re=await k.value.watchTransaction(qe,!0);if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: sui-liquidity-right.vue:1295 ~ toAdd ~ watchInfo:",Re),Re.status){He(!1),d.value.setCurrentPositionLoading(!0);let ni,be;$.value==="Aptos"?Ze.value={token_a:s.value.token_a,token_b:s.value.token_b,minPrice:J.value,maxPrice:z.value,pool:s.value.address,collection:Re.nftInfo[0].data.id.collection,tokenName:Re.nftInfo[0].data.name}:(be=Re.nftInfo,console.log("ðŸš€ðŸš€ðŸš€ ~ file: sui-liquidity-right.vue:1319 ~ toAdd ~ nftInfo:",be),ze.value?(Re.res.events.forEach(oi=>{oi.type.indexOf("::pool::DepositEvent")>-1&&(ni=oi.parsedJson.wrapped_position_id)}),Ze.value={token_a:s.value.needReverse?s.value.token_b:s.value.token_a,token_b:s.value.needReverse?s.value.token_a:s.value.token_b,minPrice:J.value,maxPrice:z.value,id:ni,clmm_pool_id:s.value.address,pool:s.value.address}):Ze.value={token_a:s.value.needReverse?s.value.token_b:s.value.token_a,token_b:s.value.needReverse?s.value.token_a:s.value.token_b,minPrice:J.value,maxPrice:z.value,pos_object_id:be.position,pool:s.value.address},console.log("ðŸš€ðŸš€ðŸš€ ~ file: sui-liquidity-right.vue:1389 ~ toAdd ~ positionInfoDetail:",Ze.value)),di.value=!0;const Ue=s.value.poolAddress;setTimeout(()=>{if(r){const oi=ni?"farming":"clmm";console.log("ðŸš€ðŸš€ðŸš€ ~ file: sui-liquidity-right.vue:1400 ~ setTimeout ~ poolInfo.value.poolAddress:",Ue),i(Ue,oi,ni,be==null?void 0:be.position)}},3e3),setTimeout(()=>{R.updateCurrentPools(Ue,$.value),k.value.getAccount(f.value.address)},3e3),setTimeout(async()=>{Zi(k,s)},7e3)}Ae()}else me(!1),ai(!0);ie.value="",te.value=""}catch(ye){ie.value="",te.value="",console.log("0330###Add liquidity Error###",ye),me(!1),ai(!0)}},V=C(()=>!!(!ie.value&&!te.value||Number(ie.value)>Number(j.value)||Number(te.value)>Number(c.value)||v.value!==e("button.addLiquidity")&&v.value!==e("newAdd.preview")||s.value&&s.value&&s.value.is_pause||Number(ie.value)<=0&&Number(te.value)<=0||!N.value&&Number(ie.value)==0||!L.value&&Number(te.value)==0)),m=C(()=>!G.value||!W.value),v=C(()=>s.value&&s.value.is_pause?"Pool Closed":!G.value||!W.value||m.value?e("modal.selectTokenModalTitle"):Number(ie.value)>Number(j.value)?e("button.insufficientBalance",{name:G.value.symbol}):Number(te.value)>Number(c.value)?e("button.insufficientBalance",{name:W.value.symbol}):!Number(ie.value)&&!Number(te.value)?e("button.enterAmount"):z.value!=="âˆž"&&Number(J.value)>=Number(z.value)?e("newAdd.invalidRange"):e("button.addLiquidity")),oe=y({}),ae=y({}),fe=y(!1),si=(r,T)=>{const D=localStorage.getItem(r.address);console.log("ðŸš€ðŸš€ðŸš€ ~ file: sui-liquidity-right.vue:1518 ~ getTokenSource ~ coinLocak:",D,r),r!=null&&r.isSelfBuilt&&!D&&(T=="fromCoin"&&(oe.value=r),T=="toCoin"&&(ae.value=r),fe.value=!0)};se(()=>[G.value,W.value],([r,T])=>{r&&!ve(r)&&si(r,"fromCoin"),T&&!ve(T)&&si(T,"toCoin")},{immediate:!0});const mi=Xi(),ti=()=>{$.value!=="Aptos"?mi.push("/pool/list"):mi.push("/pools")},li=r=>{Ge.value,_(r)},wi=()=>{H.query.action!=="create-pool"&&H.query.actions!=="new-position"&&(Zi(k,s),q(),f.value.address&&k.value.getAccount(f.value.address),R.updateCurrentPools(s.value.poolAddress,$.value)),R.setPoolConfigList($.value,w.value.filterCoinsObj)},Ti=C(()=>{var D,ke,de,Se,we,he;const r=(de=le.value[(ke=(D=G)==null?void 0:D.value)==null?void 0:ke.address])==null?void 0:de.price,T=(he=le.value[(we=(Se=W)==null?void 0:Se.value)==null?void 0:we.address])==null?void 0:he.price;return!!(r&&T)});se(()=>[H,d.value.tokensObj],([r,T])=>{var D;T&&!ve(T)&&(W.value||(W.value=d.value.tokensObj[(D=r==null?void 0:r.query)==null?void 0:D.toCoin]))},{immediate:!0,deep:!0});const _i=y(!0),$i=y(!1);return{lever:C(()=>{const r=Number(J.value),T=Number(z.value);if(J.value=="0"&&z.value=="âˆž"||ce.value=="full range")return"1x";if(J.value==z.value||ce.value=="full range")return"--";if(J.value&&z.value&&J.value!=="0"&&z.value!=="âˆž"){const D=it(1/(1-Number((r/T)**.25)),2);return Number(D)>0?D+"x":"--"}else return 1}),isAddCardTopPadding:_i,isAddCardBottomPadding:$i,positionError:bi,decimalUi:M,poolInfo:s,fromCoinAmount:ie,toCoinAmount:te,fromCoin:G,toCoin:W,theme:U,showFromCoinLock:N,showToCoinLock:L,fromCoinBlance:j,toCoinBlance:c,fixedFromCoin:Fe,openCoinSelect:B,currentCoinKey:t,existingCoins:b,lastSelectCoin:p,showCoinSelect:F,onCoinSelect:K,liquidityTotalAmount:O,toggle:xi,onInput:ue,isInputTotalAmount:Ge,isViewDetail:di,addLiquidityBtnDisabled:V,addLiquidityBtnText:v,isShowTokenWarning:fe,chainName:$,closeTokenWarning:ti,warningFromCoin:oe,warningToCoin:ae,isShowLiquidityModal:ne,currentPrice:yi,currentPriceReverse:qi,currentPriceTab:ce,minPrice:J,maxPrice:z,toAdd:_,direction:Ie,wallet:f,getAddLiquidityType:li,clickRefresh:wi,isShowtotalAmount:Ti,isAutoStakeFarming:ze,farmPoolInfo:Qe,getFarmsPoolInfo:Ne,positionInfoDetail:Ze,getTokenSource:si}}});const Xa={class:"sui-liquidity-right-box"},Wa={class:"sui-liquidity-right"},Za={class:"deposit-title"},Ga={key:0,class:"create-pool-lock"},Ka=o("img",{src:Mt,alt:""},null,-1),Ja=[Ka],Ya={key:0,class:"from-lock"},Qa={key:1,class:"to-lock"},Va=o("div",{class:"exchange-new"},[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_add1"})])],-1),xa=[Va],es={class:"show-info"},is={key:0,class:"total-amount"},ts=o("span",null,"Total Amount",-1);function ns(e,u,A,w,$,R){const d=ge("SuiLiquidityTitle"),P=ge("TokenInputBlock"),f=ge("InputLock"),H=ge("SuiLiquidityDepositRatio"),s=ge("SuiLiquidityLever"),N=Mi,L=wt,U=ge("SuiViewDetail"),Z=ge("SuiAddOrCreate"),j=ge("SuiFarmsAutoStake");return a(),l("div",Xa,[o("div",Wa,[o("div",Za,[ee(d,{"pool-info":e.poolInfo,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClickRefresh"])]),e.positionError?(a(),l("div",Ga,Ja)):g("",!0),o("div",{class:ei(["card-container",[e.isAddCardTopPadding?"input-block-add-top":"",e.isAddCardBottomPadding?"input-block-add-bottom":""]])},[ee(P,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":u[0]||(u[0]=c=>e.fromCoinAmount=c),"input-value":e.fromCoinAmount,"token-info":e.fromCoin||null,"has-arrow":!1,onOnInput:u[1]||(u[1]=c=>{e.fromCoinAmount=c,e.fixedFromCoin=!0,e.isInputTotalAmount=!1}),onOnFocus:u[2]||(u[2]=()=>{e.isAddCardTopPadding=!0,e.isAddCardBottomPadding=!1})},null,8,["modelValue","input-value","token-info"]),ee(P,{modelValue:e.toCoinAmount,"onUpdate:modelValue":u[3]||(u[3]=c=>e.toCoinAmount=c),"input-value":e.toCoinAmount,"token-info":e.toCoin||null,"has-arrow":!1,onOnInput:u[4]||(u[4]=c=>{e.toCoinAmount=c,e.fixedFromCoin=!1,e.isInputTotalAmount=!1}),onOnFocus:u[5]||(u[5]=()=>{e.isAddCardTopPadding=!1,e.isAddCardBottomPadding=!0})},null,8,["modelValue","input-value","token-info"]),e.showFromCoinLock&&!e.positionError?(a(),l("div",Ya,[ee(f,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo},null,8,["from-coin","to-coin","pool-info"])])):g("",!0),e.showToCoinLock&&!e.positionError?(a(),l("div",Qa,[ee(f,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo},null,8,["from-coin","to-coin","pool-info"])])):g("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.theme!=="default"?(a(),l("div",{key:2,class:"new-sui-exchange to-add-logo",onClick:u[6]||(u[6]=(...c)=>e.toggle&&e.toggle(...c))},xa)):g("",!0)],2),o("div",es,[e.isShowtotalAmount?(a(),l("div",is,[ts,o("span",null,n(e.liquidityTotalAmount),1)])):g("",!0),ee(H,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"fixed-from-coin":e.fixedFromCoin,"is-input-total-amount":e.isInputTotalAmount,"min-price":e.minPrice,"max-price":e.maxPrice,"current-price-tab":e.currentPriceTab,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","fixed-from-coin","is-input-total-amount","min-price","max-price","current-price-tab","current-price","current-price-reverse"]),ee(s,{lever:e.lever},null,8,["lever"])]),ee(N,{class:"big-btn",disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,onClick:u[7]||(u[7]=c=>e.wallet.connected?e.isShowLiquidityModal=!0:e.wallet.setIsShowWalletModal(!0))},{default:Be(()=>[ci(n(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),e.showCoinSelect?(a(),Ke(L,{key:1,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:u[8]||(u[8]=c=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):g("",!0),e.isViewDetail?(a(),Ke(U,{key:2,"pool-info":e.poolInfo,"farm-pool-info":e.farmPoolInfo,"position-info":e.positionInfoDetail,"is-auto-stake-farming":e.isAutoStakeFarming,onOnClose:u[9]||(u[9]=c=>e.isViewDetail=!1)},null,8,["pool-info","farm-pool-info","position-info","is-auto-stake-farming"])):g("",!0),e.isShowLiquidityModal?(a(),Ke(Z,{key:3,"pool-info":e.poolInfo,title:e.$t("button.addLiquidity"),"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"current-price-tab":e.currentPriceTab,"min-price":e.minPrice,"max-price":e.maxPrice,"show-from-coin-lock":e.showFromCoinLock,"show-to-coin-lock":e.showToCoinLock,"current-direct":e.direction,"is-increase":!1,onToAdd:e.getAddLiquidityType,onOnClose:u[10]||(u[10]=c=>e.isShowLiquidityModal=!1)},null,8,["pool-info","title","from-coin-amount","to-coin-amount","from-coin","to-coin","fixed-from-coin","current-price","current-price-reverse","current-price-tab","min-price","max-price","show-from-coin-lock","show-to-coin-lock","current-direct","onToAdd"])):g("",!0)]),ee(j,{"pool-info":e.poolInfo,"is-active":!e.showFromCoinLock&&!e.showToCoinLock,"is-auto-stake-farming":e.isAutoStakeFarming,onSendFarmsPoolInfo:e.getFarmsPoolInfo},null,8,["pool-info","is-active","is-auto-stake-farming","onSendFarmsPoolInfo"])])}const os=De(Ha,[["render",ns]]),rs=je({components:{SuiLiquidityLeft:Kn,SuiLiquidityRight:os},setup(){const e=Ri(),u=C(()=>e),A=C(()=>u.value.farmsPoolObj);Ei(()=>{gt(),R.setPoolsLoading(!0)}),se(()=>A.value,d=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: deposit.vue:41 ~ watch ~ newVal:",d),d&&ve(d)&&e.getFarmsPoolList(!0)},{immediate:!0});const w=fi(),$=Je();C(()=>$);const R=pi();return{tickList:gi,route:w}}});const as={key:0,class:"loading-spin-liquidity loading-global"},ss={class:"privide-liquidity"};function ls(e,u,A,w,$,R){var H,s;const d=Ji,P=ge("SuiLiquidityLeft"),f=ge("SuiLiquidityRight");return a(),l(xe,null,[!e.tickList&&((s=(H=e.route)==null?void 0:H.query)!=null&&s.poolAddress)?(a(),l("div",as,[ee(d)])):g("",!0),o("div",ss,[ee(P),ee(f)])],64)}const Gs=De(rs,[["render",ls],["__scopeId","data-v-d32d60da"]]);export{Gs as default};
