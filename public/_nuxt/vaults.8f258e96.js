import{s as Vs,a as R,u as _s,d as K,c as z}from"./pool.b1ddb447.js";import{a as x,l as p,r as P,e as ss,o as t,f as n,h as o,i as _,v as h,u as m,S as Es,p as as,k as is,j as D,F as M,E as ds,M as Rs,b as ps,Q as hs,s as Os,w as cs,t as E,B as vs,y as Ns,z as us,A as Z,x as q,H as Bs,q as X,K as zs,c as Hs}from"./entry.833e9675.js";/* empty css              */import{a as os,u as gs}from"./sha256.5af084c7.js";import{_ as Ts}from"./auto-pool-apy-tips.43cac89b.js";/* empty css              */import{u as Js}from"./farms.6dae0d5e.js";import{_ as Ks}from"./upgrade-loading.f94c13a2.js";import{_ as js}from"./token-warning.ae1d5a27.js";import{i as ls}from"./import-icon.de3e6c66.js";import{u as rs}from"./autoPool.5f311b09.js";import{R as Ds}from"./farms-range.a1e95871.js";import{_ as Us}from"./img-connect-wallet_2x.256ebac0.js";import{_ as Qs}from"./img-no-Positions_2x.238c00cc.js";import"./decimal.0bdeb344.js";/* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";const Gs=x({props:{list:{type:Array,default:()=>[]},listLoading:{type:Boolean,default:!1},totalTVL:{type:Number,default:0}},setup(s){const l=os(),b=p(()=>l),k=P(!1);return{wallet:b,sFixD:Vs,loading:k,addCommom:R}}});const ms=s=>(as("data-v-eb77f56f"),s=s(),is(),s),Xs={class:"farms-banner-bg"},Zs={class:"vaults-banner"},xs={class:"vaults-banner-center"},so=ms(()=>o("div",{class:"title"},"Vaults",-1)),oo=ms(()=>o("div",{class:"desc"},"Harvesting, compounding & rebalancing is automated.Stake your tokens to earn.",-1)),eo={class:"claim-rewards"},to={class:"claim-title"},no=ms(()=>o("span",null,"Total Value Locked",-1)),lo={key:0,class:"loading-spin"},ao={key:1};function io(s,l,b,k,L,f){const r=Es;return t(),n("div",Xs,[o("div",Zs,[o("div",xs,[so,oo,o("div",eo,[o("div",to,[no,s.listLoading?(t(),n("span",lo,[_(r)])):(t(),n("span",ao,"$"+h(("addCommom"in s?s.addCommom:m(R))(("sFixD"in s?s.sFixD:m(Vs))(s.totalTVL||0,2))),1))])])])])])}const co=ss(Gs,[["render",io],["__scopeId","data-v-eb77f56f"]]),ro=x({setup(){const s=P(!1),l=os(),b=p(()=>l),k=Js(),L=p(()=>k),f=p(()=>L.value.farmsPoolList);return{isShowMore:s,wallet:b,walletStore:l,farmsPoolList:f}}});const es=s=>(as("data-v-6c925870"),s=s(),is(),s),uo={class:"vaults-table"},_o=es(()=>o("th",null,"Vaults",-1)),po=es(()=>o("th",null,"TVL",-1)),ho=es(()=>o("th",null,"Your Deposit",-1)),vo=es(()=>o("th",null,"Actions",-1)),go=es(()=>o("tr",{style:{height:"4px",background:"unset"}},null,-1)),mo={class:"pool"},ko={class:"staked-tvl"},$o={class:"apr"},yo={class:"my-staked"},bo={class:"actions"},fo=es(()=>o("tr",{style:{height:"8px",background:"unset !important"}},null,-1));function wo(s,l,b,k,L,f){const r=Ts,v=Rs;return t(),n("div",uo,[o("table",null,[o("thead",null,[o("tr",null,[_o,po,o("th",null,[o("span",null,[D("APY "),_(r)])]),ho,vo]),go]),o("tbody",null,[(t(),n(M,null,ds(4,(w,V)=>(t(),n(M,{key:V},[o("tr",null,[o("td",null,[o("div",mo,[_(v,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1}),_(v,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),o("td",null,[o("div",ko,[_(v,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),o("td",null,[o("div",$o,[o("span",null,[_(v,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])]),o("td",null,[o("div",yo,[_(v,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),o("td",null,[o("div",bo,[_(v,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])]),fo],64))),64))])])])}const So=ss(ro,[["render",wo],["__scopeId","data-v-6c925870"]]),Co=x({components:{Range:Ds},props:{pItem:{type:Object,default:()=>({})}},setup(s){const l=gs(),b=p(()=>l),k=_s(),L=p(()=>k),f=d=>{var i;return(d==null?void 0:d.logoURI)||(d==null?void 0:d.logo_url)||((i=L.value.tokensObj[d==null?void 0:d.address])==null?void 0:i.logo_url)||(b.value.theme==="default"?ls("/image/coins/unknown.png"):ls("/image/coins/sui-unknown.png"))},r=P(!0),v=rs(),w=p(()=>v),V=p(()=>w.value.positionInfoObj[s.pItem.id]),A=ps(),S=(d,i)=>{A.push(`/vaults-detail/${d.id}?action=${i}`)},g=d=>{const i=d.needReverse,I=i?d.token_b.address:d.token_a.address,U=i?d.token_a.address:d.token_b.address;A.push(`/swap?from=${I}&to=${U}`)},e=os(),y=p(()=>e);return console.log(s.pItem,"pItem##"),{getCoinIcon:f,direct:r,decimalUi:K,addCommom:R,autoPool:w,positionInfo:V,toAutoPoolDetail:S,toSwap:g,wallet:y}}});const Q=s=>(as("data-v-5e97b53e"),s=s(),is(),s),Lo={class:"vaults-position-card"},Po={class:"auto-position-card-conetent"},Ao={key:0,class:"no-vaults-data no-data"},Io=Q(()=>o("img",{src:Us},null,-1)),Vo={key:1,class:"auto-position-card"},Ro={class:"position-range"},Oo={class:"right"},No={class:"top"},Bo=Q(()=>o("p",null,"Position Range",-1)),To={key:0},jo={key:1},Do={class:"item lp-tokens"},Uo=Q(()=>o("div",{class:"top"},"Your LP Tokens",-1)),qo={class:"bottom"},Mo={key:0,class:"lp-num"},Yo={key:1,class:"lp-num"},Wo={class:"item share"},Fo=Q(()=>o("div",{class:"top"},"Share",-1)),Eo={class:"bottom"},zo={key:0},Ho={key:1},Jo={class:"item yourBanlance"},Ko=Q(()=>o("div",{class:"top"},"Your Balance",-1)),Qo={class:"bottom"},Go={class:"token-info"},Xo={class:"token-num"},Zo={alt:""},xo={key:0},se={key:1},oe=Q(()=>o("p",null,"--",-1)),ee=[oe],te={class:"token-num"},ne={alt:""},le={key:0},ae={key:1},ie=Q(()=>o("p",null,"--",-1)),de=[ie],ce={class:"action"};function re(s,l,b,k,L,f){var V,A,S,g,e,y,d,i;const r=vs,v=hs("Range"),w=Os("image");return t(),n("div",Lo,[o("div",Po,[s.wallet.address?(t(),n("div",Vo,[o("div",Ro,[o("div",Oo,[o("div",No,[Bo,s.direct?(t(),n("span",To,h(("addCommom"in s?s.addCommom:m(R))(("decimalUi"in s?s.decimalUi:m(K))(s.pItem.price,6)))+" Current",1)):(t(),n("span",jo,h(("addCommom"in s?s.addCommom:m(R))(("decimalUi"in s?s.decimalUi:m(K))(1/s.pItem.price,6)))+" Current",1))]),_(v,{"pool-info":s.positionInfo,"prop-direct":s.direct,"use-props-direct":!0,onClickChange:l[1]||(l[1]=I=>s.direct=!s.direct)},null,8,["pool-info","prop-direct"])])]),o("div",Do,[Uo,o("div",qo,[(V=s.wallet)!=null&&V.connected?(t(),n("div",Mo,h(("addCommom"in s?s.addCommom:m(R))(("decimalUi"in s?s.decimalUi:m(K))((A=s.positionInfo)==null?void 0:A.myLiquidity),4))+" LP",1)):(t(),n("div",Yo,"--"))])]),o("div",Wo,[Fo,o("div",Eo,[(S=s.wallet)!=null&&S.connected?(t(),n("span",zo,h((g=s.positionInfo)==null?void 0:g.myShare)+"%",1)):(t(),n("span",Ho,"--%"))])]),o("div",Jo,[Ko,o("div",Qo,[o("div",Go,[o("div",Xo,[E(o("img",Zo,null,512),[[w,s.pItem.needReverse?s.pItem.coinB.logo_url:s.pItem.coinA.logo_url]]),(e=s.wallet)!=null&&e.connected?(t(),n("div",xo,[o("span",null,h(("addCommom"in s?s.addCommom:m(R))((y=s.positionInfo)==null?void 0:y.amountA)),1)])):(t(),n("div",se,ee))]),o("div",te,[E(o("img",ne,null,512),[[w,s.pItem.needReverse?s.pItem.coinA.logo_url:s.pItem.coinB.logo_url]]),(d=s.wallet)!=null&&d.connected?(t(),n("div",le,[o("span",null,h(("addCommom"in s?s.addCommom:m(R))((i=s.positionInfo)==null?void 0:i.amountB)),1)])):(t(),n("div",ae,de))])])])]),o("div",ce,[o("div",null,[o("div",{class:"remove-btn",onClick:l[2]||(l[2]=I=>s.toAutoPoolDetail(s.pItem,"remove"))},"Withdraw")])])])):(t(),n("div",Ao,[Io,_(r,{class:"add-liquidity-btn",onClick:l[0]||(l[0]=I=>s.wallet.setIsShowWalletModal(!0))},{default:cs(()=>[D("Connect Wallet")]),_:1})]))])])}const ue=ss(Co,[["render",re],["__scopeId","data-v-5e97b53e"]]),_e=x({components:{TokenWarning:js,Range:Ds},props:{list:{type:Array,default:()=>[]}},setup(){const{t:s}=Ns(),l=gs(),b=p(()=>l),k=_s(),L=p(()=>k),f=a=>{var N;return(a==null?void 0:a.logoURI)||(a==null?void 0:a.logo_url)||((N=L.value.tokensObj[a==null?void 0:a.address])==null?void 0:N.logo_url)||(b.value.theme==="default"?ls("/image/coins/unknown.png"):ls("/image/coins/sui-unknown.png"))},r=p(()=>L.value.tokensObj),v=p(()=>b.value.statsData),w=p(()=>b.value.theme),V=rs(),A=p(()=>V),S=P({}),g=a=>{S.value[a]?S.value[a]=!1:S.value[a]=!0,console.log(S.value,"##isShowPosition.value")},e=p(()=>A.value.positionInfoObj),y=os(),d=p(()=>y),i=P(!1),I=ps(),U=(a,N)=>{I.push(`/vaults-detail/${a.id}?action=${N}`)},T=a=>{const N=a.needReverse,Y=N?a.token_b.address:a.token_a.address,W=N?a.token_a.address:a.token_b.address;I.push(`/swap?from=${Y}&to=${W}`)},j=P(!0);return{router:I,getCoinIcon:f,tokensObj:r,t:s,statsData:v,checkNullObj:z,addCommom:R,importIcon:ls,theme:w,isShowPosition:S,togglePosition:g,positionInfo:e,wallet:d,isShowDetail:i,toAutoPoolDetail:U,toSwap:T,direct:j}}});const O=s=>(as("data-v-68a55711"),s=s(),is(),s),pe={class:"vaults-table-contianer"},he={class:"table pc-pool-item"},ve={class:"table-header"},ge={class:"table-tr"},me=O(()=>o("th",null,"Vaults",-1)),ke=O(()=>o("th",null,"TVL",-1)),$e=O(()=>o("th",null,"Your Deposit",-1)),ye=O(()=>o("th",null,"Actions",-1)),be=O(()=>o("tr",{style:{height:"4px",background:"unset"}},null,-1)),fe={class:"table-body"},we=["onClick"],Se={class:"token"},Ce={class:"img-box"},Le={class:"img-box img-last-box"},Pe={class:"name"},Ae={class:"top"},Ie={class:"token-name"},Ve={class:"tokena"},Re={class:"tokenb"},Oe={class:"fee-warning"},Ne={class:"fee-tier-top"},Be={key:0},Te={class:"skeleton-box"},je={key:1},De={key:2},Ue={class:"skeleton-box"},qe={key:3},Me={key:4},Ye={class:"skeleton-box"},We={key:5},Fe={class:"show-position"},Ee={class:"svg-icon"},ze=O(()=>o("use",{"xlink:href":"#icon-icon_on"},null,-1)),He=[ze],Je={key:0,class:"table-tr view-table-tr"},Ke={colspan:"5"},Qe=O(()=>o("td",null,null,-1)),Ge=O(()=>o("tr",{style:{height:"8px",background:"unset"}},null,-1)),Xe={class:"h5-pool-item"},Ze={class:"token"},xe={class:"img-box"},st={key:0,class:"pool-warning"},ot={class:"img-box img-last-box"},et={key:0,class:"pool-warning"},tt={class:"name"},nt={class:"top"},lt={class:"token-name"},at={class:"tokena"},it={class:"tokenb"},dt={class:"fee-warning"},ct={class:"fee-tier-top"},rt={class:"bottom"},ut={class:"row"},_t=O(()=>o("div",{class:"left"},"TVL",-1)),pt={key:0,class:"right"},ht={key:1,class:"right"},vt={class:"row"},gt=O(()=>o("div",{class:"left"},"APY",-1)),mt={key:0,class:"right"},kt={key:1,class:"right theme-right"},$t={class:"row"},yt=O(()=>o("div",{class:"left"},"Your Deposit",-1)),bt={key:0,class:"right"},ft={key:1,class:"right"},wt=["onClick"],St=O(()=>o("use",{"xlink:href":"#icon-icon_on"},null,-1)),Ct=[St],Lt={key:0,class:"h5-auto-pool-details"},Pt={class:"position-range"},At={class:"right"},It={class:"top"},Vt=O(()=>o("p",null,"Position Range",-1)),Rt={key:0},Ot={key:1},Nt={class:"h5-item lp-tokens"},Bt=O(()=>o("div",{class:"top"},"Your LP Tokens",-1)),Tt={class:"bottom"},jt={key:0,class:"lp-num"},Dt={key:1,class:"lp-num"},Ut={class:"h5-item share"},qt=O(()=>o("div",{class:"top"},"Share",-1)),Mt={class:"bottom"},Yt={key:0},Wt={key:1},Ft={class:"h5-item yourBanlance"},Et=O(()=>o("div",{class:"top"},"Your Balance",-1)),zt={class:"bottom"},Ht={class:"token-info"},Jt={class:"token-num"},Kt={alt:""},Qt={key:0},Gt={key:1},Xt=O(()=>o("p",null,"--",-1)),Zt=[Xt],xt={class:"token-num"},sn={alt:""},on={key:0},en={key:1},tn=O(()=>o("p",null,"--",-1)),nn=[tn],ln={class:"action"};function an(s,l,b,k,L,f){const r=Ts,v=js,w=Rs,V=vs,A=ue,S=hs("Range"),g=Os("image");return t(),n("div",pe,[o("table",he,[o("thead",ve,[o("tr",ge,[me,ke,o("th",null,[o("span",null,[D("APY "),_(r)])]),$e,ye]),be]),o("tbody",fe,[(t(!0),n(M,null,ds(s.list,(e,y)=>{var d,i,I,U,T,j,a,N,Y,W,H;return t(),n(M,{key:y},[o("tr",{class:"table-tr",onClick:J=>s.togglePosition(y)},[o("td",null,[o("div",Se,[o("div",Ce,[E(o("img",null,null,512),[[g,s.getCoinIcon(e.needReverse?e.coinB:e.coinA)]]),_(v,{address:e.needReverse?(i=e==null?void 0:e.coinB)==null?void 0:i.address:(d=e==null?void 0:e.coinA)==null?void 0:d.address,"style-params":{right:0,bottom:0,width:"12px",height:"12px"}},null,8,["address"])]),o("div",Le,[E(o("img",null,null,512),[[g,s.getCoinIcon(e.needReverse?e.coinA:e.coinB)]]),_(v,{address:e.needReverse?(U=e.coinA)==null?void 0:U.address:(I=e==null?void 0:e.coinB)==null?void 0:I.address,"style-params":{right:0,bottom:0,width:"12px",height:"12px"}},null,8,["address"])]),o("div",Pe,[o("div",Ae,[o("p",Ie,[o("span",Ve,h(e.needReverse?(j=e==null?void 0:e.coinB)==null?void 0:j.symbol:(T=e==null?void 0:e.coinA)==null?void 0:T.symbol),1),D(" - "),o("span",Re,h(e.needReverse?(a=e==null?void 0:e.coinA)==null?void 0:a.symbol:(N=e==null?void 0:e.coinB)==null?void 0:N.symbol),1)]),o("div",Oe,[o("div",Ne,h((e==null?void 0:e.fee)*100)+"%",1)])])])])]),("checkNullObj"in s?s.checkNullObj:m(z))(s.statsData)?(t(),n("td",Be,[o("div",Te,[_(w,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])])):(t(),n("td",je," $"+h(Number(e.poolUSD)!==0&&Number(e.poolUSD)<.01?"<0.01":("addCommom"in s?s.addCommom:m(R))(e.poolUSD,2)),1)),("checkNullObj"in s?s.checkNullObj:m(z))(s.statsData)?(t(),n("td",De,[o("div",Ue,[_(w,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])])):(t(),n("td",qe,h(e.apy),1)),(Y=s.wallet)!=null&&Y.connected&&!s.positionInfo[e.id].myLiquidityUSD?(t(),n("td",Me,[o("div",Ye,[_(w,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])])):(t(),n("td",We,[s.wallet.connected?(t(),n(M,{key:0},[D(h(((W=s.positionInfo[e.id])==null?void 0:W.myLiquidityUSD)!=="<0.01"?`$${("addCommom"in s?s.addCommom:m(R))((H=s.positionInfo[e.id])==null?void 0:H.myLiquidityUSD)}`:"<$0.01"),1)],64)):(t(),n(M,{key:1},[D("--")],64))])),o("td",null,[o("div",Fe,[_(V,{class:"add-liquidity-btn",onClick:us(J=>s.router.push(`/vaults-detail/${e.id}?action=deposit`),["stop"])},{default:cs(()=>[D("Deposit")]),_:2},1032,["onClick"]),o("div",Ee,[(t(),n("svg",{"aria-hidden":"true",class:Z(["icon",s.isShowPosition&&s.isShowPosition[y]?"icon-open":""])},He,2))])])])],8,we),s.isShowPosition&&s.isShowPosition[y]?(t(),n("tr",Je,[o("td",Ke,[_(A,{"p-item":e},null,8,["p-item"])]),Qe])):q("",!0),Ge],64)}),128))])]),o("div",Xe,[(t(!0),n(M,null,ds(s.list,(e,y)=>{var d,i,I,U,T,j,a,N,Y,W,H,J;return t(),n("div",{key:e.address,class:"item"},[o("div",Ze,[o("div",xe,[E(o("img",null,null,512),[[g,s.getCoinIcon(e.needReverse?e.coinB:e.coinA)]]),(e.needReverse?(i=s.tokensObj[e.coinB.address])!=null&&i.isSelfBuilt:(d=s.tokensObj[e.coinA.address])!=null&&d.isSelfBuilt)?(t(),n("div",st)):q("",!0)]),o("div",ot,[E(o("img",null,null,512),[[g,s.getCoinIcon(e.needReverse?e.coinA:e.coinB)]]),(e.needReverse?(I=s.tokensObj[e.coinA.address])!=null&&I.isSelfBuilt:(U=s.tokensObj[e.coinB.address])!=null&&U.isSelfBuilt)?(t(),n("div",et)):q("",!0)]),o("div",tt,[o("div",nt,[o("p",lt,[o("span",at,h(e.needReverse?e.coinB.symbol:e.coinA.symbol),1),D(" - "),o("span",it,h(e.needReverse?e.coinA.symbol:e.coinB.symbol),1)]),o("div",dt,[o("div",ct,h((e==null?void 0:e.fee)*100)+"%",1)])])])]),o("div",rt,[o("div",ut,[_t,("checkNullObj"in s?s.checkNullObj:m(z))(s.statsData)?(t(),n("div",pt,[_(w,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])):(t(),n("div",ht," $"+h(Number(e.poolUSD)!==0&&Number(e.poolUSD)<.01?"<0.01":("addCommom"in s?s.addCommom:m(R))(e.poolUSD,2)),1))]),o("div",vt,[gt,("checkNullObj"in s?s.checkNullObj:m(z))(s.statsData)?(t(),n("div",mt,[_(w,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])):(t(),n("div",kt,[o("i",null,h(e.apy),1),_(r)]))]),o("div",$t,[yt,("checkNullObj"in s?s.checkNullObj:m(z))(s.positionInfo)&&((T=s.wallet)!=null&&T.connected)?(t(),n("div",bt,[_(w,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])):(t(),n("div",ft,[(j=s.wallet)!=null&&j.connected?(t(),n(M,{key:0},[D(h(((a=s.positionInfo[e.id])==null?void 0:a.myLiquidityUSD)!=="<0.01"?`$${("addCommom"in s?s.addCommom:m(R))((N=s.positionInfo[e.id])==null?void 0:N.myLiquidityUSD)}`:"<$0.01"),1)],64)):(t(),n(M,{key:1},[D("--")],64))]))])]),_(V,{class:"h5-add-liquidity-btn",onClick:us(ns=>s.router.push(`/vaults-detail/${e.id}?action=deposit`),["stop"])},{default:cs(()=>[D("Deposit")]),_:2},1032,["onClick"]),o("div",{class:Z(["details-btn",s.isShowPosition&&s.isShowPosition[y]?"details-btn-text-active":""]),onClick:ns=>s.togglePosition(y)},[(t(),n("svg",{"aria-hidden":"true",class:Z(["icon",s.isShowPosition&&s.isShowPosition[y]?"icon-active":""])},Ct,2))],10,wt),s.isShowPosition&&s.isShowPosition[y]?(t(),n("div",Lt,[o("div",Pt,[o("div",At,[o("div",It,[Vt,s.direct?(t(),n("span",Rt,h(("addCommom"in s?s.addCommom:m(R))(("decimalUi"in s?s.decimalUi:m(K))(e.price,6)))+" Current",1)):(t(),n("span",Ot,h(("addCommom"in s?s.addCommom:m(R))(("decimalUi"in s?s.decimalUi:m(K))(1/e.price,6)))+" Current",1))]),_(S,{"pool-info":e,"prop-direct":s.direct,"use-props-direct":!0,onClickChange:l[0]||(l[0]=ns=>s.direct=!s.direct)},null,8,["pool-info","prop-direct"])])]),o("div",Nt,[Bt,o("div",Tt,[(Y=s.wallet)!=null&&Y.connected?(t(),n("div",jt,h(("addCommom"in s?s.addCommom:m(R))(("decimalUi"in s?s.decimalUi:m(K))(e==null?void 0:e.myLiquidity,4)))+" LP",1)):(t(),n("div",Dt,"--"))])]),o("div",Ut,[qt,o("div",Mt,[(W=s.wallet)!=null&&W.connected?(t(),n("span",Yt,h(e==null?void 0:e.myShare)+"%",1)):(t(),n("span",Wt,"--%"))])]),o("div",Ft,[Et,o("div",zt,[o("div",Ht,[o("div",Jt,[E(o("img",Kt,null,512),[[g,e.needReverse?e.coinB.logo_url:e.coinA.logo_url]]),(H=s.wallet)!=null&&H.connected?(t(),n("div",Qt,[o("span",null,h(("addCommom"in s?s.addCommom:m(R))(e==null?void 0:e.amountA)),1)])):(t(),n("div",Gt,Zt))]),o("div",xt,[E(o("img",sn,null,512),[[g,e.needReverse?e.coinA.logo_url:e.coinB.logo_url]]),(J=s.wallet)!=null&&J.connected?(t(),n("div",on,[o("span",null,h(("addCommom"in s?s.addCommom:m(R))(e==null?void 0:e.amountB)),1)])):(t(),n("div",en,nn))])])])]),o("div",ln,[o("div",null,[o("div",{class:"remove-btn",onClick:l[1]||(l[1]=ns=>s.toAutoPoolDetail(s.pItem,"remove"))},"Withdraw")])])])):q("",!0)])}),128))])])}const dn=ss(_e,[["render",an],["__scopeId","data-v-68a55711"]]),cn=x({props:{selectValue:{type:String,default:""},showList:{type:Object,default:()=>({})}},setup(s,l){const b=["All Vaults","My Vaults"],k=P("All Vaults"),L=P(s.selectValue),f=P(!1),r=P(!1),v=os(),w=p(()=>v),V=rs(),A=p(()=>V),S=p(()=>A.value.autoPoolList),g=()=>s.showList.length,e=()=>{l.emit("clickRefresh")},y=i=>{L.value=i,l.emit("changeSort",i)},d=i=>{k.value=i,console.log(i,"itemitem"),i=="My Vaults"?l.emit("changeTab",!0):l.emit("changeTab",!1)};return Bs(()=>{document.addEventListener("click",()=>{r.value=!1})}),{isOpenList:r,wallet:w,changeSort:y,tabList:b,currentTab:k,sortValue:L,clickRefresh:e,isRefresh:f,vaultsPoolList:S,getListNum:g,changeTab:d}}});const ts=s=>(as("data-v-1d1eae2e"),s=s(),is(),s),rn={class:"vaults-tab"},un={class:"tab-left"},_n=["onClick"],pn={key:0},hn={class:"tab-right"},vn={class:"sort-select"},gn=ts(()=>o("div",null,"Sort by",-1)),mn={class:"showSort"},kn=ts(()=>o("svg",{class:"sort-icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),$n=ts(()=>o("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),yn=[$n],bn={key:0,class:"sort-list"},fn=ts(()=>o("svg",{class:"sort-icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),wn=ts(()=>o("svg",{class:"sort-icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),Sn={class:"refresh"},Cn=ts(()=>o("use",{"xlink:href":"#icon-icon-refresh2"},null,-1)),Ln=[Cn];function Pn(s,l,b,k,L,f){return t(),n("div",rn,[o("div",un,[(t(!0),n(M,null,ds(s.tabList,r=>(t(),n("div",{key:r,class:Z(["tab-item",s.currentTab==r?"tab-item-active":""]),onClick:v=>s.changeTab(r)},[o("span",null,h(r),1),s.currentTab==r&&s.getListNum()?(t(),n("p",pn,h(s.currentTab=="My Vaults"&&!s.wallet.address?0:s.getListNum()),1)):q("",!0)],10,_n))),128))]),o("div",hn,[o("div",vn,[o("div",{class:"sort-select-box",onClick:l[0]||(l[0]=us(r=>s.isOpenList=!s.isOpenList,["stop"]))},[gn,o("div",mn,[o("span",null,h(s.sortValue),1),kn,(t(),n("svg",{class:Z(["arrow-icon",s.isOpenList?"arrow-icon-active":""]),"aria-hidden":"true"},yn,2))])]),s.isOpenList?(t(),n("div",bn,[o("div",{class:"sort-item",onClick:l[1]||(l[1]=r=>s.changeSort("APY"))},[D(" APY "),fn]),o("div",{class:"sort-item",onClick:l[2]||(l[2]=r=>s.changeSort("TVL"))},[D(" TVL "),wn])])):q("",!0)]),o("div",Sn,[(t(),n("svg",{"aria-hidden":"true",class:Z(["refresh-icon",s.isRefresh?"refreshing":""]),onClick:l[3]||(l[3]=(...r)=>s.clickRefresh&&s.clickRefresh(...r))},Ln,2))])])])}const An=ss(cn,[["render",Pn],["__scopeId","data-v-1d1eae2e"]]),In=x({components:{VaultsTabs:An},setup(){Ns();const s=gs(),l=p(()=>s),b=_s(),k=p(()=>b),L=rs(),f=p(()=>L),r=os(),v=p(()=>r),w=p(()=>f.value.positionInfoObj),V=p(()=>l.value.chainName),A=P(!1),S=P(!1),g=P("TVL"),e=P(["APY"]),y=P(!1),d=u=>{console.log(u,"w121");const B=[];B.push(g.value),e.value.forEach((C,c)=>{C!=u&&B.push(C)}),e.value=B,g.value=u,U(f.value.positionInfoList)};Bs(()=>{document.addEventListener("click",()=>{J("")})});const i=P([]),I=P(!0),U=u=>{console.log(u,g.value,"##poolListselectValue.valueselectValue.value");const B=[];u.filter(c=>!c.is_pause).forEach(c=>{var $s,ys,bs,fs,ws,Ss,Cs,Ls,Ps,As,Is;const $=l.value.addressLpTokens[c.address],F=k.value.poolsObj[c.address];console.log(f.value.apyObj,"##autoPool.value.apyObj");const G=(($s=f.value.apyObj[c.id])==null?void 0:$s.apr)||"0%",qs=((ys=f.value.apyObj[c.id])==null?void 0:ys.resultApr)||"0",Ms=((bs=f.value.apyObj[c.id])==null?void 0:bs.tvl)||0;console.log(c.autoPoolPositionInfo.id,"###watchPools 246"),console.log($,"##statsObj");const Ys=c.needReverse?((Cs=k.value.tokensObj[(Ss=c.coinB)==null?void 0:Ss.address])==null?void 0:Cs.labels)||[]:((ws=k.value.tokensObj[(fs=c.coinA)==null?void 0:fs.address])==null?void 0:ws.labels)||[],Ws=c.needReverse?((Ps=k.value.tokensObj[(Ls=c.coinA)==null?void 0:Ls.address])==null?void 0:Ps.labels)||[]:((Is=k.value.tokensObj[(As=c.coinB)==null?void 0:As.address])==null?void 0:Is.labels)||[],Fs=[...new Set(Ys.concat(Ws))];B.push({...c,liqidity:Ms,vol:$?$.vol_in_usd_24h:"0",fee:c.fee?c.fee:F!=null&&F.fee?F.fee:"--",labels:Fs,isFarming:c==null?void 0:c.isFarming,fee_24_h:$&&$.fee_24_h,apy:G,resultApr:qs})});let C=[];g.value=="APY"?(console.log(g.value,"selectValue.valueselectValue.value"),C=B.sort((c,$)=>Number($.resultApr)-Number(c.resultApr))):C=B.sort((c,$)=>Number($.liqidity)-Number(c.liqidity)),i.value=C,I.value=!1,console.log(i.value.length,"##list.value.length"),b.setAutoPoolNum(i.value.length),console.log(i.value,"##list.value")};X(()=>[f.value.positionInfoList,f.value.apyObj,k.value.poolConfigObj],([u,B,C])=>{console.log("执行次数###",C),u&&u.length>0&&C&&!z(C)&&(console.log(u,"###autoPoolList"),U(u))},{immediate:!0,deep:!0}),X(()=>[v.value.address,f.value.autoPoolList,k.value.poolConfigObj],([u,B,C])=>{u&&B&&B.length>0&&C&&!z(C)&&L.getMyAutoPoolPosition()},{immediate:!0});const T=P(null),j=p(()=>T.value&&T.value.firstToken?T.value.firstToken:null),a=p(()=>T.value&&T.value.lastToken?T.value.lastToken:null),N=P(),Y=P(0),W=()=>{let u=[];u=i.value,console.log(u,"##pageList"),Y.value=u.reduce(($,F)=>Number($)+Number(F.poolUSD),0);const B=u.filter(($,F)=>j.value&&a.value?$.coinA.address==j.value.address&&$.coinB.address==a.value.address||$.coinA.address==a.value.address&&$.coinB.address==j.value.address:j.value?$.coinA.address.toLowerCase().includes(j.value.address.toLowerCase())||$.coinB.address.toLowerCase().includes(j.value.address.toLowerCase()):a.value?$.coinA.address.toLowerCase().includes(a.value.address.toLowerCase())||$.coinB.address.toLowerCase().includes(a.value.address.toLowerCase()):u);let C=[],c=[];console.log(B,"##filterArr"),B.forEach(($,F)=>{console.log($,"irem##");const G=w.value&&w.value[$.id];console.log(G,"##positionInfo"),A.value&&Number(G==null?void 0:G.myLiquidity)>0&&v.value.connected?c.push($):C.push({...$})}),console.log(C,"121arrnewValnewValnewVal"),N.value=A.value&&v.value.connected?c:C,console.log(N.value,"##showList.value "),I.value||(A.value&&v.value.connected?b.setAutoPoolNum(c.length):b.setAutoPoolNum(C.length))};X(()=>[j.value,a.value,i.value,A.value,v.value.address],([u,B,C,c])=>{(u||B||C||c)&&(console.log("newValnewValnewVal",u,B,C,JSON.stringify(C)),W())},{immediate:!0}),zs(()=>{b.setAutoPoolNum("--")});const H=p(()=>k.value.autoPoolNum),J=u=>{u=="label"?(s.setIsSelect("pools"),y.value=!y.value,S.value=!1,l.value.setIsShowMore(!1)):u=="select"?(s.setIsSelect("pools"),S.value=!S.value,y.value=!1,l.value.setIsShowMore(!1)):(S.value=!1,y.value=!1)};X(()=>l.value.isSelect,u=>{u!=="pools"&&J("")},{immediate:!0});const ns=ps(),ks=()=>{I.value=!0,L.getAutoPoolList(),L.getAutoPoolAPY()};return X(()=>l.value.isRefresh,u=>{ks()},{immediate:!0}),X(()=>V.value,u=>{u=="Aptos"&&ns.push("/pools")},{immediate:!0}),{totalTVL:Y,clickRefresh:ks,isMyLiquidity:A,chainName:V,store:l,select:S,selectValue:g,selectList:e,label:y,changeSort:d,list:i,listLoading:I,showList:N,childTokenSelectRef:T,wallet:v,autoPoolNum:H}}});const Vn={class:"vaults-container-new"},Rn={class:"vaults-container-center"},On={class:"auto-pool"},Nn={key:0,class:"no-vaults-data no-data"},Bn=o("img",{src:Us},null,-1),Tn={key:0,class:"upgrade-loading pc-loading"},jn={key:1,class:"upgrade-loading h5-loading"},Dn={key:3,class:"no-vaults-data"},Un=o("img",{src:Qs},null,-1),qn=o("span",{class:"no-vaults"},"No vaults found",-1),Mn=[Un,qn];function Yn(s,l,b,k,L,f){const r=co,v=hs("VaultsTabs"),w=vs,V=So,A=Ks,S=dn;return t(),n("div",Vn,[_(r,{list:s.showList,"total-t-v-l":s.totalTVL,"list-loading":s.listLoading},null,8,["list","total-t-v-l","list-loading"]),o("div",Rn,[_(v,{"select-value":s.selectValue,"show-list":s.showList,onChangeSort:l[0]||(l[0]=g=>s.changeSort(g)),onChangeTab:l[1]||(l[1]=g=>{s.isMyLiquidity=g}),onClickRefresh:s.clickRefresh},null,8,["select-value","show-list","onClickRefresh"]),o("div",On,[s.isMyLiquidity&&!s.wallet.address?(t(),n("div",Nn,[Bn,_(w,{class:"add-liquidity-btn",onClick:l[2]||(l[2]=g=>s.wallet.setIsShowWalletModal(!0))},{default:cs(()=>[D("Connect Wallet")]),_:1})])):q("",!0),s.isMyLiquidity&&s.wallet.address&&s.listLoading||!s.isMyLiquidity&&s.listLoading?(t(),n(M,{key:1},[s.listLoading?(t(),n("div",Tn,[_(V)])):q("",!0),s.listLoading?(t(),n("div",jn,[_(A,{type:"poolsCard",loading:!0})])):q("",!0)],64)):q("",!0),s.isMyLiquidity&&s.wallet.address&&!s.listLoading||!s.isMyLiquidity&&!s.listLoading?(t(),Hs(S,{key:2,list:s.showList},null,8,["list"])):q("",!0),s.autoPoolNum!=="--"&&Number(s.autoPoolNum)<=0&&!s.listLoading?(t(),n("div",Dn,Mn)):q("",!0)])])])}const ll=ss(In,[["render",Yn]]);export{ll as default};
