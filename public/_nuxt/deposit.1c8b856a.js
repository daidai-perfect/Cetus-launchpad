import{_ as co}from"./back.88aef0f2.js";import{_ as fo}from"./refresh-icon.938ce1c3.js";import{a as vt,i as fn,b as gt,o as $,e as x,f as h,h as j,t as A,p as dn,j as hn,D as G,r as _,w as le,k as ut,l as ue,m as ye,q as Me,I as ho,S as rr,s as St,v as ce,x as Yn,y as Ie,B as Wn,z as Wt,A as Ze,C as mo,E as po,M as vo,F as or,G as ar,H as sr,J as go,K as yo,c as He,L as wo,N as bo,O as ko,P as _o,Q as Co,R as je,T as yi,U as wi,V as bi,W as at,X as ki,Y as _i,Z as Xt,$ as Ci,a0 as Ao,a1 as kt,a2 as Vt,a3 as lr,a4 as So,a5 as Io}from"./entry.e6bb9b7a.js";import{_ as Mo,a as $o}from"./coin-select.cfe32616.js";import{_ as Po}from"./network-tips.d4fef45d.js";import{_ as No}from"./swap-setting.795b57c7.js";import{_ as ur,a as To}from"./img-lock_2x.089ad6f1.js";import{_ as xo}from"./status-block.9cf9d126.js";import{_ as cr,a as fr}from"./icon-arrow_2x.db44c7c5.js";import{_ as Eo,a as Ro}from"./checked.667d8670.js";import"./img-no-Positions_2x.3a4bda32.js";import"./coin-pair-name.b6fa8a8b.js";const Lo=vt({props:{coinName:{type:String,default:""},coinIcon:{type:String,default:""},coin:{type:Object,default:()=>({})}},setup(){return{importIcon:fn}}}),Fo=e=>(dn("data-v-5befbffc"),e=e(),hn(),e),Bo={class:"coin-block"},Uo=["src"],Oo={class:"coin-info"},qo={class:"symbol"},Do={class:"name"},Xo=Fo(()=>h("div",null,[h("svg",{class:"icon","aria-hidden":"true"},[h("use",{"xlink:href":"#icon-icon_on"})])],-1));function Vo(e,t,n,i,r,o){var a;return $(),x("div",Bo,[h("div",null,[e.coinIcon?($(),x("img",{key:0,src:e.coinIcon||e.importIcon(`/image/coins/${e.coinName.toLowerCase()}.png`)},null,8,Uo)):j("",!0),h("div",Oo,[h("div",qo,A(e.coinName?e.coinName:e.$t("modal.selectTokenModalTitle")),1),h("div",Do,A((a=e.coin)==null?void 0:a.name),1)])]),Xo])}const zo=gt(Lo,[["render",Vo],["__scopeId","data-v-5befbffc"]]),Ho=-443630;function Ai(e,t){const n=Ko(e),i=(n-Ho)%t;return i>t/2?n-i+t:n-i}const dr=new G("1.0001");function Ko(e){return e.log(dr).toDP(0,G.ROUND_HALF_UP).toNumber()}function Si(e){return dr.pow(e)}const Yo=vt({props:{inputValue:{type:String,default:""},pType:{type:String,required:!0},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},defaultMaxPrice:{type:String,default:""},defaultMinPrice:{type:String,default:""},poolInfo:{type:Object},currentPriceTab:{type:String},loading:{type:Boolean,default:!1}},emits:["onInput"],setup(e,t){const n=_(""),i=_("");let r=_(""),o=_("");const a=()=>{if(Number.isNaN(n.value)||!n.value)return;console.log(n.value,"===>pValue.value add "),console.log(new G(n.value.toString()),"==>new Decimal(pValue.value.toString())");const f=Ai(new G(n.value),u.value.tickSpacing),d=Si(f+u.value.tickSpacing);if(console.log(d,"price===>"),e.pType=="Min"&&Number(d)>=Number(o.value))return;const p=d;t.emit("onInput",p)},s=()=>{if(Number.isNaN(n.value)||!n.value)return;console.log(n.value,"===>pValue.value minus");const f=Ai(new G(n.value),u.value.tickSpacing),d=Si(f-u.value.tickSpacing),p=d;e.pType=="Max"&&Number(d)<=Number(r.value)||(console.log(p,"==value"),t.emit("onInput",p))},l=f=>{let d=f.replace(/[^\d.]/g,"");const p=/^\d+(\.\d+)?$/;d.split(".").length>2&&!p.exec(d)&&(d=d.substr(0,d.length-1)),i.value=d,ut(d,6)>0&&t.emit("onInput",String(d))};le(()=>e.defaultMinPrice,(f,d)=>{f!==d&&(r.value=e.defaultMinPrice)},{immediate:!0}),le(()=>e.defaultMaxPrice,(f,d)=>{f!==d&&(o.value=e.defaultMaxPrice)},{immediate:!0}),le(()=>e.inputValue,f=>{if(f&&f!=="0"&&f!=="\u221E"){n.value=f;const p=f.toString().split(".")[1];i.value=f!=="0"&&f!=="\u221E"&&p&&p.length>6?ut(f,6):f}else(f=="0"||f=="\u221E")&&(i.value=f)},{immediate:!0});const u=_({});le(()=>e.poolInfo,(f,d)=>{f&&(u.value=f)},{immediate:!0});const c=_("");return le(()=>e.currentPriceTab,f=>{c.value=f},{immediate:!0}),{addPrice:a,minusPrice:s,oValue:i,changeValue:l,isDisabled:c}}});const Wo={class:"set-price-item"},Go={class:"title"},Qo={class:"input-box"},Jo={key:0,class:"minus-btn"},jo=["disabled"],Zo={key:1,class:"plus-btn"};function ea(e,t,n,i,r,o){const a=ho,s=rr;return $(),x("div",Wo,[h("div",Go,A(e.pType=="Max"?e.$t("common.maxPrice"):e.pType=="Min"?e.$t("common.minPrice"):""),1),ue(s,{loading:e.loading,active:"",paragraph:!1},{default:ye(()=>[h("div",Qo,[e.isDisabled=="Custom"?($(),x("a",Jo,[h("div",{class:Me(!e.fromCoin&&!e.toCoin?"reductionDis":"reduction"),disabled:e.isDisabled!=="Custom",onClick:t[0]||(t[0]=(...l)=>e.minusPrice&&e.minusPrice(...l))},null,10,jo)])):j("",!0),ue(a,{id:"pValu",value:e.oValue,"onUpdate:value":t[1]||(t[1]=l=>e.oValue=l),disabled:e.isDisabled!=="Custom",autocomplete:"off",onChange:t[2]||(t[2]=l=>e.changeValue(l.target.value))},null,8,["value","disabled"]),e.isDisabled=="Custom"?($(),x("a",Zo,[h("div",{class:Me(!e.fromCoin&&!e.toCoin?"addDis":"add"),onClick:t[3]||(t[3]=(...l)=>e.addPrice&&e.addPrice(...l))},null,2)])):j("",!0)])]),_:1},8,["loading"]),h("p",{class:Me(["per-text",!e.toCoin&&!e.fromCoin?"per-text-disabled":""])},A(e.toCoin&&e.toCoin.symbol)+" per "+A(e.fromCoin&&e.fromCoin.symbol),3)])}const Ii=gt(Yo,[["render",ea],["__scopeId","data-v-a39f5669"]]),ta=vt({props:{min:{type:String,default:""},max:{type:String,default:""},defaultMinPrice:{type:String,default:""},defaultMaxPrice:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},invalidPriceRange:{type:Boolean,default:!1},poolInfo:{type:Object},currentPriceTab:{type:String},loading:{type:Boolean,default:!1}},setup(e,t){let n=_(""),i=_(""),r=_(),o=_(!1),a=_(!1);const s=_({}),l=St(),u=ce(()=>l);Yn(()=>{n.value=e.min,i.value=e.max}),le(()=>e.currentPriceTab,(b,m)=>{b!==m&&(r.value=e.currentPriceTab)},{immediate:!0}),le(()=>e.min,(b,m)=>{b!==m&&(n.value=b,console.log(e.min,"===> props.min"))}),le(()=>e.max,(b,m)=>{b!==m&&(i.value=b)}),le(()=>e.poolInfo,(b,m)=>{b&&(s.value=b)},{immediate:!0});const c=b=>{console.log(b,"val===>"),n.value=b,t.emit("onChangeMinPrice",b)},f=b=>{i.value=b,t.emit("onChangeMaxPrice",b)};le(o,(b,m)=>{b!==m&&t.emit("onChangeFullRange",b)});const d=()=>{n.value=e.defaultMinPrice,i.value=e.defaultMaxPrice,a.value=!1,o.value=!1},p=()=>{a.value=!1,n.value="0",i.value="\u221E"};return le(o,(b,m)=>{b!==m&&t.emit("onChangeFullRange",b)}),{store:u,changeMinPrice:c,changeMaxPrice:f,importIcon:fn,resetPrice:d,changeShowUnderStand:()=>{o.value=!o.value,o.value?a.value=!0:d(),a.value||(n.value=e.defaultMinPrice,i.value=e.defaultMaxPrice)},showUnderStand:a,minPrice:n,maxPrice:i,understand:p,isRadio:o,poolInfo:s,currentPriceTab:r}}});const na={class:"set-price"},ia={class:"card-container"},ra={key:0,class:"card"},oa=["src"],aa={key:1,class:"understand"},sa={class:"left"},la={class:"right"};function ua(e,t,n,i,r,o){const a=Ii,s=Ii,l=Wn;return $(),x("div",na,[h("div",ia,[e.showUnderStand?($(),x("div",aa,[h("div",sa,[h("p",null,A(e.$t("common.lowerEfficiency")),1),h("p",null,A(e.$t("common.lowerEfficiencyTips")),1)]),h("div",la,[ue(l,{onClick:e.understand},{default:ye(()=>[Ie(A(e.$t("common.understand")),1)]),_:1},8,["onClick"])])])):($(),x("div",ra,[ue(a,{value:e.minPrice,"onUpdate:value":t[0]||(t[0]=u=>e.minPrice=u),"input-value":e.minPrice,"p-type":"Min","default-max-price":e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"current-price-tab":e.currentPriceTab,onOnInput:e.changeMinPrice,onAddValue:e.changeMinPrice,onDelValue:e.changeMinPrice},null,8,["value","input-value","default-max-price","from-coin","to-coin","dirction","pool-info","loading","current-price-tab","onOnInput","onAddValue","onDelValue"]),ue(s,{value:e.maxPrice,"onUpdate:value":t[1]||(t[1]=u=>e.maxPrice=u),"input-value":e.maxPrice,"p-type":"Max","default-min-price":e.minPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"current-price-tab":e.currentPriceTab,onOnInput:e.changeMaxPrice,onAddValue:e.changeMaxPrice,onDelValue:e.changeMaxPrice},null,8,["value","input-value","default-min-price","from-coin","to-coin","dirction","pool-info","loading","current-price-tab","onOnInput","onAddValue","onDelValue"]),h("img",{src:e.importIcon("/image/lmg-line@2x.png"),alt:""},null,8,oa)]))])])}const ca=gt(ta,[["render",ua],["__scopeId","data-v-61d59451"]]);function Gt(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function fa(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function hr(e){let t,n,i;e.length!==2?(t=Gt,n=(s,l)=>Gt(e(s),l),i=(s,l)=>e(s)-l):(t=e===Gt||e===fa?e:da,n=e,i=e);function r(s,l,u=0,c=s.length){if(u<c){if(t(l,l)!==0)return c;do{const f=u+c>>>1;n(s[f],l)<0?u=f+1:c=f}while(u<c)}return u}function o(s,l,u=0,c=s.length){if(u<c){if(t(l,l)!==0)return c;do{const f=u+c>>>1;n(s[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function a(s,l,u=0,c=s.length){const f=r(s,l,u,c-1);return f>u&&i(s[f-1],l)>-i(s[f],l)?f-1:f}return{left:r,center:a,right:o}}function da(){return 0}function ha(e){return e===null?NaN:+e}const ma=hr(Gt),pa=ma.right;hr(ha).center;const va=pa;class Mi extends Map{constructor(t,n=wa){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get($i(this,t))}has(t){return super.has($i(this,t))}set(t,n){return super.set(ga(this,t),n)}delete(t){return super.delete(ya(this,t))}}function $i({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function ga({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function ya({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function wa(e){return e!==null&&typeof e=="object"?e.valueOf():e}var En=Math.sqrt(50),Rn=Math.sqrt(10),Ln=Math.sqrt(2);function ba(e,t,n){var i,r=-1,o,a,s;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((i=t<e)&&(o=e,e=t,t=o),(s=mr(e,t,n))===0||!isFinite(s))return[];if(s>0){let l=Math.round(e/s),u=Math.round(t/s);for(l*s<e&&++l,u*s>t&&--u,a=new Array(o=u-l+1);++r<o;)a[r]=(l+r)*s}else{s=-s;let l=Math.round(e*s),u=Math.round(t*s);for(l/s<e&&++l,u/s>t&&--u,a=new Array(o=u-l+1);++r<o;)a[r]=(l+r)/s}return i&&a.reverse(),a}function mr(e,t,n){var i=(t-e)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),o=i/Math.pow(10,r);return r>=0?(o>=En?10:o>=Rn?5:o>=Ln?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(o>=En?10:o>=Rn?5:o>=Ln?2:1)}function ka(e,t,n){var i=Math.abs(t-e)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),o=i/r;return o>=En?r*=10:o>=Rn?r*=5:o>=Ln&&(r*=2),t<e?-r:r}function _a(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function Ca(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(r);++i<r;)o[i]=e+i*n;return o}var Aa={value:()=>{}};function Gn(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Qt(n)}function Qt(e){this._=e}function Sa(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Qt.prototype=Gn.prototype={constructor:Qt,on:function(e,t){var n=this._,i=Sa(e+"",n),r,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((r=(e=i[o]).type)&&(r=Ia(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(r=(e=i[o]).type)n[r]=Pi(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Pi(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Qt(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)}};function Ia(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function Pi(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=Aa,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Fn="http://www.w3.org/1999/xhtml";const Ni={svg:"http://www.w3.org/2000/svg",xhtml:Fn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function mn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Ni.hasOwnProperty(t)?{space:Ni[t],local:e}:e}function Ma(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Fn&&t.documentElement.namespaceURI===Fn?t.createElement(e):t.createElementNS(n,e)}}function $a(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function pr(e){var t=mn(e);return(t.local?$a:Ma)(t)}function Pa(){}function Qn(e){return e==null?Pa:function(){return this.querySelector(e)}}function Na(e){typeof e!="function"&&(e=Qn(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],a=o.length,s=i[r]=new Array(a),l,u,c=0;c<a;++c)(l=o[c])&&(u=e.call(l,l.__data__,c,o))&&("__data__"in l&&(u.__data__=l.__data__),s[c]=u);return new $e(i,this._parents)}function Ta(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function xa(){return[]}function vr(e){return e==null?xa:function(){return this.querySelectorAll(e)}}function Ea(e){return function(){return Ta(e.apply(this,arguments))}}function Ra(e){typeof e=="function"?e=Ea(e):e=vr(e);for(var t=this._groups,n=t.length,i=[],r=[],o=0;o<n;++o)for(var a=t[o],s=a.length,l,u=0;u<s;++u)(l=a[u])&&(i.push(e.call(l,l.__data__,u,a)),r.push(l));return new $e(i,r)}function gr(e){return function(){return this.matches(e)}}function yr(e){return function(t){return t.matches(e)}}var La=Array.prototype.find;function Fa(e){return function(){return La.call(this.children,e)}}function Ba(){return this.firstElementChild}function Ua(e){return this.select(e==null?Ba:Fa(typeof e=="function"?e:yr(e)))}var Oa=Array.prototype.filter;function qa(){return Array.from(this.children)}function Da(e){return function(){return Oa.call(this.children,e)}}function Xa(e){return this.selectAll(e==null?qa:Da(typeof e=="function"?e:yr(e)))}function Va(e){typeof e!="function"&&(e=gr(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],a=o.length,s=i[r]=[],l,u=0;u<a;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&s.push(l);return new $e(i,this._parents)}function wr(e){return new Array(e.length)}function za(){return new $e(this._enter||this._groups.map(wr),this._parents)}function en(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}en.prototype={constructor:en,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ha(e){return function(){return e}}function Ka(e,t,n,i,r,o){for(var a=0,s,l=t.length,u=o.length;a<u;++a)(s=t[a])?(s.__data__=o[a],i[a]=s):n[a]=new en(e,o[a]);for(;a<l;++a)(s=t[a])&&(r[a]=s)}function Ya(e,t,n,i,r,o,a){var s,l,u=new Map,c=t.length,f=o.length,d=new Array(c),p;for(s=0;s<c;++s)(l=t[s])&&(d[s]=p=a.call(l,l.__data__,s,t)+"",u.has(p)?r[s]=l:u.set(p,l));for(s=0;s<f;++s)p=a.call(e,o[s],s,o)+"",(l=u.get(p))?(i[s]=l,l.__data__=o[s],u.delete(p)):n[s]=new en(e,o[s]);for(s=0;s<c;++s)(l=t[s])&&u.get(d[s])===l&&(r[s]=l)}function Wa(e){return e.__data__}function Ga(e,t){if(!arguments.length)return Array.from(this,Wa);var n=t?Ya:Ka,i=this._parents,r=this._groups;typeof e!="function"&&(e=Ha(e));for(var o=r.length,a=new Array(o),s=new Array(o),l=new Array(o),u=0;u<o;++u){var c=i[u],f=r[u],d=f.length,p=Qa(e.call(c,c&&c.__data__,u,i)),P=p.length,b=s[u]=new Array(P),m=a[u]=new Array(P),k=l[u]=new Array(d);n(c,f,b,m,k,p,t);for(var I=0,v=0,E,y;I<P;++I)if(E=b[I]){for(I>=v&&(v=I+1);!(y=m[v])&&++v<P;);E._next=y||null}}return a=new $e(a,i),a._enter=s,a._exit=l,a}function Qa(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ja(){return new $e(this._exit||this._groups.map(wr),this._parents)}function ja(e,t,n){var i=this.enter(),r=this,o=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function Za(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,o=i.length,a=Math.min(r,o),s=new Array(r),l=0;l<a;++l)for(var u=n[l],c=i[l],f=u.length,d=s[l]=new Array(f),p,P=0;P<f;++P)(p=u[P]||c[P])&&(d[P]=p);for(;l<r;++l)s[l]=n[l];return new $e(s,this._parents)}function es(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,o=i[r],a;--r>=0;)(a=i[r])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function ts(e){e||(e=ns);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var a=n[o],s=a.length,l=r[o]=new Array(s),u,c=0;c<s;++c)(u=a[c])&&(l[c]=u);l.sort(t)}return new $e(r,this._parents).order()}function ns(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function is(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function rs(){return Array.from(this)}function os(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null}function as(){let e=0;for(const t of this)++e;return e}function ss(){return!this.node()}function ls(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],o=0,a=r.length,s;o<a;++o)(s=r[o])&&e.call(s,s.__data__,o,r);return this}function us(e){return function(){this.removeAttribute(e)}}function cs(e){return function(){this.removeAttributeNS(e.space,e.local)}}function fs(e,t){return function(){this.setAttribute(e,t)}}function ds(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function hs(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function ms(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ps(e,t){var n=mn(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?cs:us:typeof t=="function"?n.local?ms:hs:n.local?ds:fs)(n,t))}function br(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function vs(e){return function(){this.style.removeProperty(e)}}function gs(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ys(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function ws(e,t,n){return arguments.length>1?this.each((t==null?vs:typeof t=="function"?ys:gs)(e,t,n==null?"":n)):ht(this.node(),e)}function ht(e,t){return e.style.getPropertyValue(t)||br(e).getComputedStyle(e,null).getPropertyValue(t)}function bs(e){return function(){delete this[e]}}function ks(e,t){return function(){this[e]=t}}function _s(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Cs(e,t){return arguments.length>1?this.each((t==null?bs:typeof t=="function"?_s:ks)(e,t)):this.node()[e]}function kr(e){return e.trim().split(/^|\s+/)}function Jn(e){return e.classList||new _r(e)}function _r(e){this._node=e,this._names=kr(e.getAttribute("class")||"")}_r.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Cr(e,t){for(var n=Jn(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function Ar(e,t){for(var n=Jn(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function As(e){return function(){Cr(this,e)}}function Ss(e){return function(){Ar(this,e)}}function Is(e,t){return function(){(t.apply(this,arguments)?Cr:Ar)(this,e)}}function Ms(e,t){var n=kr(e+"");if(arguments.length<2){for(var i=Jn(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Is:t?As:Ss)(n,t))}function $s(){this.textContent=""}function Ps(e){return function(){this.textContent=e}}function Ns(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function Ts(e){return arguments.length?this.each(e==null?$s:(typeof e=="function"?Ns:Ps)(e)):this.node().textContent}function xs(){this.innerHTML=""}function Es(e){return function(){this.innerHTML=e}}function Rs(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function Ls(e){return arguments.length?this.each(e==null?xs:(typeof e=="function"?Rs:Es)(e)):this.node().innerHTML}function Fs(){this.nextSibling&&this.parentNode.appendChild(this)}function Bs(){return this.each(Fs)}function Us(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Os(){return this.each(Us)}function qs(e){var t=typeof e=="function"?e:pr(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Ds(){return null}function Xs(e,t){var n=typeof e=="function"?e:pr(e),i=t==null?Ds:typeof t=="function"?t:Qn(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Vs(){var e=this.parentNode;e&&e.removeChild(this)}function zs(){return this.each(Vs)}function Hs(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ks(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ys(e){return this.select(e?Ks:Hs)}function Ws(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Gs(e){return function(t){e.call(this,t,this.__data__)}}function Qs(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function Js(e){return function(){var t=this.__on;if(!!t){for(var n=0,i=-1,r=t.length,o;n<r;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++i]=o;++i?t.length=i:delete this.__on}}}function js(e,t,n){return function(){var i=this.__on,r,o=Gs(t);if(i){for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=t;return}}this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Zs(e,t,n){var i=Qs(e+""),r,o=i.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,c;l<u;++l)for(r=0,c=s[l];r<o;++r)if((a=i[r]).type===c.type&&a.name===c.name)return c.value}return}for(s=t?js:Js,r=0;r<o;++r)this.each(s(i[r],t,n));return this}function Sr(e,t,n){var i=br(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function el(e,t){return function(){return Sr(this,e,t)}}function tl(e,t){return function(){return Sr(this,e,t.apply(this,arguments))}}function nl(e,t){return this.each((typeof t=="function"?tl:el)(e,t))}function*il(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length,a;r<o;++r)(a=i[r])&&(yield a)}var Ir=[null];function $e(e,t){this._groups=e,this._parents=t}function Pt(){return new $e([[document.documentElement]],Ir)}function rl(){return this}$e.prototype=Pt.prototype={constructor:$e,select:Na,selectAll:Ra,selectChild:Ua,selectChildren:Xa,filter:Va,data:Ga,enter:za,exit:Ja,join:ja,merge:Za,selection:rl,order:es,sort:ts,call:is,nodes:rs,node:os,size:as,empty:ss,each:ls,attr:ps,style:ws,property:Cs,classed:Ms,text:Ts,html:Ls,raise:Bs,lower:Os,append:qs,insert:Xs,remove:zs,clone:Ys,datum:Ws,on:Zs,dispatch:nl,[Symbol.iterator]:il};function Be(e){return typeof e=="string"?new $e([[document.querySelector(e)]],[document.documentElement]):new $e([[e]],Ir)}function ol(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ti(e,t){if(e=ol(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const Bn={capture:!0,passive:!1};function Un(e){e.preventDefault(),e.stopImmediatePropagation()}function al(e){var t=e.document.documentElement,n=Be(e).on("dragstart.drag",Un,Bn);"onselectstart"in t?n.on("selectstart.drag",Un,Bn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function sl(e,t){var n=e.document.documentElement,i=Be(e).on("dragstart.drag",null);t&&(i.on("click.drag",Un,Bn),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function jn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Mr(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Nt(){}var It=.7,tn=1/It,dt="\\s*([+-]?\\d+)\\s*",Mt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ue="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ll=/^#([0-9a-f]{3,8})$/,ul=new RegExp(`^rgb\\(${dt},${dt},${dt}\\)$`),cl=new RegExp(`^rgb\\(${Ue},${Ue},${Ue}\\)$`),fl=new RegExp(`^rgba\\(${dt},${dt},${dt},${Mt}\\)$`),dl=new RegExp(`^rgba\\(${Ue},${Ue},${Ue},${Mt}\\)$`),hl=new RegExp(`^hsl\\(${Mt},${Ue},${Ue}\\)$`),ml=new RegExp(`^hsla\\(${Mt},${Ue},${Ue},${Mt}\\)$`),xi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};jn(Nt,nt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ei,formatHex:Ei,formatHex8:pl,formatHsl:vl,formatRgb:Ri,toString:Ri});function Ei(){return this.rgb().formatHex()}function pl(){return this.rgb().formatHex8()}function vl(){return $r(this).formatHsl()}function Ri(){return this.rgb().formatRgb()}function nt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ll.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Li(t):n===3?new Se(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?zt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?zt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ul.exec(e))?new Se(t[1],t[2],t[3],1):(t=cl.exec(e))?new Se(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=fl.exec(e))?zt(t[1],t[2],t[3],t[4]):(t=dl.exec(e))?zt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=hl.exec(e))?Ui(t[1],t[2]/100,t[3]/100,1):(t=ml.exec(e))?Ui(t[1],t[2]/100,t[3]/100,t[4]):xi.hasOwnProperty(e)?Li(xi[e]):e==="transparent"?new Se(NaN,NaN,NaN,0):null}function Li(e){return new Se(e>>16&255,e>>8&255,e&255,1)}function zt(e,t,n,i){return i<=0&&(e=t=n=NaN),new Se(e,t,n,i)}function gl(e){return e instanceof Nt||(e=nt(e)),e?(e=e.rgb(),new Se(e.r,e.g,e.b,e.opacity)):new Se}function On(e,t,n,i){return arguments.length===1?gl(e):new Se(e,t,n,i==null?1:i)}function Se(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}jn(Se,On,Mr(Nt,{brighter(e){return e=e==null?tn:Math.pow(tn,e),new Se(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?It:Math.pow(It,e),new Se(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Se(tt(this.r),tt(this.g),tt(this.b),nn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Fi,formatHex:Fi,formatHex8:yl,formatRgb:Bi,toString:Bi}));function Fi(){return`#${et(this.r)}${et(this.g)}${et(this.b)}`}function yl(){return`#${et(this.r)}${et(this.g)}${et(this.b)}${et((isNaN(this.opacity)?1:this.opacity)*255)}`}function Bi(){const e=nn(this.opacity);return`${e===1?"rgb(":"rgba("}${tt(this.r)}, ${tt(this.g)}, ${tt(this.b)}${e===1?")":`, ${e})`}`}function nn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function tt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function et(e){return e=tt(e),(e<16?"0":"")+e.toString(16)}function Ui(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Re(e,t,n,i)}function $r(e){if(e instanceof Re)return new Re(e.h,e.s,e.l,e.opacity);if(e instanceof Nt||(e=nt(e)),!e)return new Re;if(e instanceof Re)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),o=Math.max(t,n,i),a=NaN,s=o-r,l=(o+r)/2;return s?(t===o?a=(n-i)/s+(n<i)*6:n===o?a=(i-t)/s+2:a=(t-n)/s+4,s/=l<.5?o+r:2-o-r,a*=60):s=l>0&&l<1?0:a,new Re(a,s,l,e.opacity)}function wl(e,t,n,i){return arguments.length===1?$r(e):new Re(e,t,n,i==null?1:i)}function Re(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}jn(Re,wl,Mr(Nt,{brighter(e){return e=e==null?tn:Math.pow(tn,e),new Re(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?It:Math.pow(It,e),new Re(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Se(Sn(e>=240?e-240:e+120,r,i),Sn(e,r,i),Sn(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new Re(Oi(this.h),Ht(this.s),Ht(this.l),nn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=nn(this.opacity);return`${e===1?"hsl(":"hsla("}${Oi(this.h)}, ${Ht(this.s)*100}%, ${Ht(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Oi(e){return e=(e||0)%360,e<0?e+360:e}function Ht(e){return Math.max(0,Math.min(1,e||0))}function Sn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Zn=e=>()=>e;function bl(e,t){return function(n){return e+n*t}}function kl(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function _l(e){return(e=+e)==1?Pr:function(t,n){return n-t?kl(t,n,e):Zn(isNaN(t)?n:t)}}function Pr(e,t){var n=t-e;return n?bl(e,n):Zn(isNaN(e)?t:e)}const rn=function e(t){var n=_l(t);function i(r,o){var a=n((r=On(r)).r,(o=On(o)).r),s=n(r.g,o.g),l=n(r.b,o.b),u=Pr(r.opacity,o.opacity);return function(c){return r.r=a(c),r.g=s(c),r.b=l(c),r.opacity=u(c),r+""}}return i.gamma=e,i}(1);function Cl(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(o){for(r=0;r<n;++r)i[r]=e[r]*(1-o)+t[r]*o;return i}}function Al(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Sl(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),o=new Array(n),a;for(a=0;a<i;++a)r[a]=pn(e[a],t[a]);for(;a<n;++a)o[a]=t[a];return function(s){for(a=0;a<i;++a)o[a]=r[a](s);return o}}function Il(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function Ee(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Ml(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=pn(e[r],t[r]):i[r]=t[r];return function(o){for(r in n)i[r]=n[r](o);return i}}var qn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,In=new RegExp(qn.source,"g");function $l(e){return function(){return e}}function Pl(e){return function(t){return e(t)+""}}function Nr(e,t){var n=qn.lastIndex=In.lastIndex=0,i,r,o,a=-1,s=[],l=[];for(e=e+"",t=t+"";(i=qn.exec(e))&&(r=In.exec(t));)(o=r.index)>n&&(o=t.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(i=i[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:Ee(i,r)})),n=In.lastIndex;return n<t.length&&(o=t.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?Pl(l[0].x):$l(t):(t=l.length,function(u){for(var c=0,f;c<t;++c)s[(f=l[c]).i]=f.x(u);return s.join("")})}function pn(e,t){var n=typeof t,i;return t==null||n==="boolean"?Zn(t):(n==="number"?Ee:n==="string"?(i=nt(t))?(t=i,rn):Nr:t instanceof nt?rn:t instanceof Date?Il:Al(t)?Cl:Array.isArray(t)?Sl:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Ml:Ee)(e,t)}function Nl(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var qi=180/Math.PI,Dn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Tr(e,t,n,i,r,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,l/=s),e*i<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(t,e)*qi,skewX:Math.atan(l)*qi,scaleX:a,scaleY:s}}var Kt;function Tl(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Dn:Tr(t.a,t.b,t.c,t.d,t.e,t.f)}function xl(e){return e==null||(Kt||(Kt=document.createElementNS("http://www.w3.org/2000/svg","g")),Kt.setAttribute("transform",e),!(e=Kt.transform.baseVal.consolidate()))?Dn:(e=e.matrix,Tr(e.a,e.b,e.c,e.d,e.e,e.f))}function xr(e,t,n,i){function r(u){return u.length?u.pop()+" ":""}function o(u,c,f,d,p,P){if(u!==f||c!==d){var b=p.push("translate(",null,t,null,n);P.push({i:b-4,x:Ee(u,f)},{i:b-2,x:Ee(c,d)})}else(f||d)&&p.push("translate("+f+t+d+n)}function a(u,c,f,d){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),d.push({i:f.push(r(f)+"rotate(",null,i)-2,x:Ee(u,c)})):c&&f.push(r(f)+"rotate("+c+i)}function s(u,c,f,d){u!==c?d.push({i:f.push(r(f)+"skewX(",null,i)-2,x:Ee(u,c)}):c&&f.push(r(f)+"skewX("+c+i)}function l(u,c,f,d,p,P){if(u!==f||c!==d){var b=p.push(r(p)+"scale(",null,",",null,")");P.push({i:b-4,x:Ee(u,f)},{i:b-2,x:Ee(c,d)})}else(f!==1||d!==1)&&p.push(r(p)+"scale("+f+","+d+")")}return function(u,c){var f=[],d=[];return u=e(u),c=e(c),o(u.translateX,u.translateY,c.translateX,c.translateY,f,d),a(u.rotate,c.rotate,f,d),s(u.skewX,c.skewX,f,d),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,d),u=c=null,function(p){for(var P=-1,b=d.length,m;++P<b;)f[(m=d[P]).i]=m.x(p);return f.join("")}}}var El=xr(Tl,"px, ","px)","deg)"),Rl=xr(xl,", ",")",")"),mt=0,Ct=0,_t=0,Er=1e3,on,At,an=0,it=0,vn=0,$t=typeof performance=="object"&&performance.now?performance:Date,Rr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ei(){return it||(Rr(Ll),it=$t.now()+vn)}function Ll(){it=0}function sn(){this._call=this._time=this._next=null}sn.prototype=Lr.prototype={constructor:sn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ei():+n)+(t==null?0:+t),!this._next&&At!==this&&(At?At._next=this:on=this,At=this),this._call=e,this._time=n,Xn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Xn())}};function Lr(e,t,n){var i=new sn;return i.restart(e,t,n),i}function Fl(){ei(),++mt;for(var e=on,t;e;)(t=it-e._time)>=0&&e._call.call(void 0,t),e=e._next;--mt}function Di(){it=(an=$t.now())+vn,mt=Ct=0;try{Fl()}finally{mt=0,Ul(),it=0}}function Bl(){var e=$t.now(),t=e-an;t>Er&&(vn-=t,an=e)}function Ul(){for(var e,t=on,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:on=n);At=e,Xn(i)}function Xn(e){if(!mt){Ct&&(Ct=clearTimeout(Ct));var t=e-it;t>24?(e<1/0&&(Ct=setTimeout(Di,e-$t.now()-vn)),_t&&(_t=clearInterval(_t))):(_t||(an=$t.now(),_t=setInterval(Bl,Er)),mt=1,Rr(Di))}}function Xi(e,t,n){var i=new sn;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var Ol=Gn("start","end","cancel","interrupt"),ql=[],Fr=0,Vi=1,Vn=2,Jt=3,zi=4,zn=5,jt=6;function gn(e,t,n,i,r,o){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;Dl(e,n,{name:t,index:i,group:r,on:Ol,tween:ql,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Fr})}function ti(e,t){var n=Le(e,t);if(n.state>Fr)throw new Error("too late; already scheduled");return n}function Oe(e,t){var n=Le(e,t);if(n.state>Jt)throw new Error("too late; already running");return n}function Le(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Dl(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=Lr(o,0,n.time);function o(u){n.state=Vi,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var c,f,d,p;if(n.state!==Vi)return l();for(c in i)if(p=i[c],p.name===n.name){if(p.state===Jt)return Xi(a);p.state===zi?(p.state=jt,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete i[c]):+c<t&&(p.state=jt,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete i[c])}if(Xi(function(){n.state===Jt&&(n.state=zi,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=Vn,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Vn){for(n.state=Jt,r=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=p);r.length=f+1}}function s(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=zn,1),f=-1,d=r.length;++f<d;)r[f].call(e,c);n.state===zn&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=jt,n.timer.stop(),delete i[t];for(var u in i)return;delete e.__transition}}function Hn(e,t){var n=e.__transition,i,r,o=!0,a;if(!!n){t=t==null?null:t+"";for(a in n){if((i=n[a]).name!==t){o=!1;continue}r=i.state>Vn&&i.state<zn,i.state=jt,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[a]}o&&delete e.__transition}}function Xl(e){return this.each(function(){Hn(this,e)})}function Vl(e,t){var n,i;return function(){var r=Oe(this,e),o=r.tween;if(o!==n){i=n=o;for(var a=0,s=i.length;a<s;++a)if(i[a].name===t){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function zl(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var o=Oe(this,e),a=o.tween;if(a!==i){r=(i=a).slice();for(var s={name:t,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===t){r[l]=s;break}l===u&&r.push(s)}o.tween=r}}function Hl(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=Le(this.node(),n).tween,r=0,o=i.length,a;r<o;++r)if((a=i[r]).name===e)return a.value;return null}return this.each((t==null?Vl:zl)(n,e,t))}function ni(e,t,n){var i=e._id;return e.each(function(){var r=Oe(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Le(r,i).value[t]}}function Br(e,t){var n;return(typeof t=="number"?Ee:t instanceof nt?rn:(n=nt(t))?(t=n,rn):Nr)(e,t)}function Kl(e){return function(){this.removeAttribute(e)}}function Yl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Wl(e,t,n){var i,r=n+"",o;return function(){var a=this.getAttribute(e);return a===r?null:a===i?o:o=t(i=a,n)}}function Gl(e,t,n){var i,r=n+"",o;return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===i?o:o=t(i=a,n)}}function Ql(e,t,n){var i,r,o;return function(){var a,s=n(this),l;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=s+"",a===l?null:a===i&&l===r?o:(r=l,o=t(i=a,s)))}}function Jl(e,t,n){var i,r,o;return function(){var a,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=s+"",a===l?null:a===i&&l===r?o:(r=l,o=t(i=a,s)))}}function jl(e,t){var n=mn(e),i=n==="transform"?Rl:Br;return this.attrTween(e,typeof t=="function"?(n.local?Jl:Ql)(n,i,ni(this,"attr."+e,t)):t==null?(n.local?Yl:Kl)(n):(n.local?Gl:Wl)(n,i,t))}function Zl(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function eu(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function tu(e,t){var n,i;function r(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&eu(e,o)),n}return r._value=t,r}function nu(e,t){var n,i;function r(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&Zl(e,o)),n}return r._value=t,r}function iu(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=mn(e);return this.tween(n,(i.local?tu:nu)(i,t))}function ru(e,t){return function(){ti(this,e).delay=+t.apply(this,arguments)}}function ou(e,t){return t=+t,function(){ti(this,e).delay=t}}function au(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ru:ou)(t,e)):Le(this.node(),t).delay}function su(e,t){return function(){Oe(this,e).duration=+t.apply(this,arguments)}}function lu(e,t){return t=+t,function(){Oe(this,e).duration=t}}function uu(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?su:lu)(t,e)):Le(this.node(),t).duration}function cu(e,t){if(typeof t!="function")throw new Error;return function(){Oe(this,e).ease=t}}function fu(e){var t=this._id;return arguments.length?this.each(cu(t,e)):Le(this.node(),t).ease}function du(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Oe(this,e).ease=n}}function hu(e){if(typeof e!="function")throw new Error;return this.each(du(this._id,e))}function mu(e){typeof e!="function"&&(e=gr(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],a=o.length,s=i[r]=[],l,u=0;u<a;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&s.push(l);return new Ke(i,this._parents,this._name,this._id)}function pu(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,o=Math.min(i,r),a=new Array(i),s=0;s<o;++s)for(var l=t[s],u=n[s],c=l.length,f=a[s]=new Array(c),d,p=0;p<c;++p)(d=l[p]||u[p])&&(f[p]=d);for(;s<i;++s)a[s]=t[s];return new Ke(a,this._parents,this._name,this._id)}function vu(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function gu(e,t,n){var i,r,o=vu(t)?ti:Oe;return function(){var a=o(this,e),s=a.on;s!==i&&(r=(i=s).copy()).on(t,n),a.on=r}}function yu(e,t){var n=this._id;return arguments.length<2?Le(this.node(),n).on.on(e):this.each(gu(n,e,t))}function wu(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function bu(){return this.on("end.remove",wu(this._id))}function ku(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Qn(e));for(var i=this._groups,r=i.length,o=new Array(r),a=0;a<r;++a)for(var s=i[a],l=s.length,u=o[a]=new Array(l),c,f,d=0;d<l;++d)(c=s[d])&&(f=e.call(c,c.__data__,d,s))&&("__data__"in c&&(f.__data__=c.__data__),u[d]=f,gn(u[d],t,n,d,u,Le(c,n)));return new Ke(o,this._parents,t,n)}function _u(e){var t=this._name,n=this._id;typeof e!="function"&&(e=vr(e));for(var i=this._groups,r=i.length,o=[],a=[],s=0;s<r;++s)for(var l=i[s],u=l.length,c,f=0;f<u;++f)if(c=l[f]){for(var d=e.call(c,c.__data__,f,l),p,P=Le(c,n),b=0,m=d.length;b<m;++b)(p=d[b])&&gn(p,t,n,b,d,P);o.push(d),a.push(c)}return new Ke(o,a,t,n)}var Cu=Pt.prototype.constructor;function Au(){return new Cu(this._groups,this._parents)}function Su(e,t){var n,i,r;return function(){var o=ht(this,e),a=(this.style.removeProperty(e),ht(this,e));return o===a?null:o===n&&a===i?r:r=t(n=o,i=a)}}function Ur(e){return function(){this.style.removeProperty(e)}}function Iu(e,t,n){var i,r=n+"",o;return function(){var a=ht(this,e);return a===r?null:a===i?o:o=t(i=a,n)}}function Mu(e,t,n){var i,r,o;return function(){var a=ht(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),ht(this,e))),a===l?null:a===i&&l===r?o:(r=l,o=t(i=a,s))}}function $u(e,t){var n,i,r,o="style."+t,a="end."+o,s;return function(){var l=Oe(this,e),u=l.on,c=l.value[o]==null?s||(s=Ur(t)):void 0;(u!==n||r!==c)&&(i=(n=u).copy()).on(a,r=c),l.on=i}}function Pu(e,t,n){var i=(e+="")=="transform"?El:Br;return t==null?this.styleTween(e,Su(e,i)).on("end.style."+e,Ur(e)):typeof t=="function"?this.styleTween(e,Mu(e,i,ni(this,"style."+e,t))).each($u(this._id,e)):this.styleTween(e,Iu(e,i,t),n).on("end.style."+e,null)}function Nu(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function Tu(e,t,n){var i,r;function o(){var a=t.apply(this,arguments);return a!==r&&(i=(r=a)&&Nu(e,a,n)),i}return o._value=t,o}function xu(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,Tu(e,t,n==null?"":n))}function Eu(e){return function(){this.textContent=e}}function Ru(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function Lu(e){return this.tween("text",typeof e=="function"?Ru(ni(this,"text",e)):Eu(e==null?"":e+""))}function Fu(e){return function(t){this.textContent=e.call(this,t)}}function Bu(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Fu(r)),t}return i._value=e,i}function Uu(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Bu(e))}function Ou(){for(var e=this._name,t=this._id,n=Or(),i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],s=a.length,l,u=0;u<s;++u)if(l=a[u]){var c=Le(l,t);gn(l,e,n,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ke(i,this._parents,e,n)}function qu(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(o,a){var s={value:a},l={value:function(){--r===0&&o()}};n.each(function(){var u=Oe(this,i),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),u.on=t}),r===0&&o()})}var Du=0;function Ke(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function Or(){return++Du}var Ve=Pt.prototype;Ke.prototype={constructor:Ke,select:ku,selectAll:_u,selectChild:Ve.selectChild,selectChildren:Ve.selectChildren,filter:mu,merge:pu,selection:Au,transition:Ou,call:Ve.call,nodes:Ve.nodes,node:Ve.node,size:Ve.size,empty:Ve.empty,each:Ve.each,on:yu,attr:jl,attrTween:iu,style:Pu,styleTween:xu,text:Lu,textTween:Uu,remove:bu,tween:Hl,delay:au,duration:uu,ease:fu,easeVarying:hu,end:qu,[Symbol.iterator]:Ve[Symbol.iterator]};function Xu(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Vu={time:null,delay:0,duration:250,ease:Xu};function zu(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Hu(e){var t,n;e instanceof Ke?(t=e._id,e=e._name):(t=Or(),(n=Vu).time=ei(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],s=a.length,l,u=0;u<s;++u)(l=a[u])&&gn(l,e,t,u,a,n||zu(l,t));return new Ke(i,this._parents,e,t)}Pt.prototype.interrupt=Xl;Pt.prototype.transition=Hu;const Mn=e=>()=>e;function Ku(e,{sourceEvent:t,target:n,selection:i,mode:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Yu(e){e.stopImmediatePropagation()}function $n(e){e.preventDefault(),e.stopImmediatePropagation()}var Hi={name:"drag"},Pn={name:"space"},st={name:"handle"},lt={name:"center"};const{abs:Ki,max:ve,min:ge}=Math;function Yi(e){return[+e[0],+e[1]]}function Wi(e){return[Yi(e[0]),Yi(e[1])]}var Zt={name:"x",handles:["w","e"].map(ln),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Nn={name:"y",handles:["n","s"].map(ln),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},ze={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Gi={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Qi={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Wu={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Gu={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function ln(e){return{type:e}}function Qu(e){return!e.ctrlKey&&!e.button}function Ju(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function ju(){return navigator.maxTouchPoints||"ontouchstart"in this}function Tn(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function Zu(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function ec(){return tc(Zt)}function tc(e){var t=Ju,n=Qu,i=ju,r=!0,o=Gn("start","brush","end"),a=6,s;function l(m){var k=m.property("__brush",b).selectAll(".overlay").data([ln("overlay")]);k.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",ze.overlay).merge(k).each(function(){var v=Tn(this).extent;Be(this).attr("x",v[0][0]).attr("y",v[0][1]).attr("width",v[1][0]-v[0][0]).attr("height",v[1][1]-v[0][1])}),m.selectAll(".selection").data([ln("selection")]).enter().append("rect").attr("class","selection").attr("cursor",ze.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var I=m.selectAll(".handle").data(e.handles,function(v){return v.type});I.exit().remove(),I.enter().append("rect").attr("class",function(v){return"handle handle--"+v.type}).attr("cursor",function(v){return ze[v.type]}),m.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(i).on("touchstart.brush",d).on("touchmove.brush",p).on("touchend.brush touchcancel.brush",P).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(m,k,I){m.tween?m.on("start.brush",function(v){c(this,arguments).beforestart().start(v)}).on("interrupt.brush end.brush",function(v){c(this,arguments).end(v)}).tween("brush",function(){var v=this,E=v.__brush,y=c(v,arguments),S=E.selection,F=e.input(typeof k=="function"?k.apply(this,arguments):k,E.extent),C=pn(S,F);function W(L){E.selection=L===1&&F===null?null:C(L),u.call(v),y.brush()}return S!==null&&F!==null?W:W(1)}):m.each(function(){var v=this,E=arguments,y=v.__brush,S=e.input(typeof k=="function"?k.apply(v,E):k,y.extent),F=c(v,E).beforestart();Hn(v),y.selection=S===null?null:S,u.call(v),F.start(I).brush(I).end(I)})},l.clear=function(m,k){l.move(m,null,k)};function u(){var m=Be(this),k=Tn(this).selection;k?(m.selectAll(".selection").style("display",null).attr("x",k[0][0]).attr("y",k[0][1]).attr("width",k[1][0]-k[0][0]).attr("height",k[1][1]-k[0][1]),m.selectAll(".handle").style("display",null).attr("x",function(I){return I.type[I.type.length-1]==="e"?k[1][0]-a/2:k[0][0]-a/2}).attr("y",function(I){return I.type[0]==="s"?k[1][1]-a/2:k[0][1]-a/2}).attr("width",function(I){return I.type==="n"||I.type==="s"?k[1][0]-k[0][0]+a:a}).attr("height",function(I){return I.type==="e"||I.type==="w"?k[1][1]-k[0][1]+a:a})):m.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(m,k,I){var v=m.__brush.emitter;return v&&(!I||!v.clean)?v:new f(m,k,I)}function f(m,k,I){this.that=m,this.args=k,this.state=m.__brush,this.active=0,this.clean=I}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(m,k){return this.starting?(this.starting=!1,this.emit("start",m,k)):this.emit("brush",m),this},brush:function(m,k){return this.emit("brush",m,k),this},end:function(m,k){return--this.active===0&&(delete this.state.emitter,this.emit("end",m,k)),this},emit:function(m,k,I){var v=Be(this.that).datum();o.call(m,this.that,new Ku(m,{sourceEvent:k,target:l,selection:e.output(this.state.selection),mode:I,dispatch:o}),v)}};function d(m){if(s&&!m.touches||!n.apply(this,arguments))return;var k=this,I=m.target.__data__.type,v=(r&&m.metaKey?I="overlay":I)==="selection"?Hi:r&&m.altKey?lt:st,E=e===Nn?null:Wu[I],y=e===Zt?null:Gu[I],S=Tn(k),F=S.extent,C=S.selection,W=F[0][0],L,M,w=F[0][1],O,Q,Ce=F[1][0],J,te,ne=F[1][1],N,ae,ie=0,re=0,qe,K=E&&y&&r&&m.shiftKey,z,we,oe=Array.from(m.touches||[m],D=>{const T=D.identifier;return D=Ti(D,k),D.point0=D.slice(),D.identifier=T,D});Hn(k);var fe=c(k,arguments,!0).beforestart();if(I==="overlay"){C&&(qe=!0);const D=[oe[0],oe[1]||oe[0]];S.selection=C=[[L=e===Nn?W:ge(D[0][0],D[1][0]),O=e===Zt?w:ge(D[0][1],D[1][1])],[J=e===Nn?Ce:ve(D[0][0],D[1][0]),N=e===Zt?ne:ve(D[0][1],D[1][1])]],oe.length>1&&De(m)}else L=C[0][0],O=C[0][1],J=C[1][0],N=C[1][1];M=L,Q=O,te=J,ae=N;var yt=Be(k).attr("pointer-events","none"),Ye=yt.selectAll(".overlay").attr("cursor",ze[I]);if(m.touches)fe.moved=ot,fe.ended=xt;else{var Tt=Be(m.view).on("mousemove.brush",ot,!0).on("mouseup.brush",xt,!0);r&&Tt.on("keydown.brush",wn,!0).on("keyup.brush",bn,!0),al(m.view)}u.call(k),fe.start(m,v.name);function ot(D){for(const T of D.changedTouches||[D])for(const q of oe)q.identifier===T.identifier&&(q.cur=Ti(T,k));if(K&&!z&&!we&&oe.length===1){const T=oe[0];Ki(T.cur[0]-T[0])>Ki(T.cur[1]-T[1])?we=!0:z=!0}for(const T of oe)T.cur&&(T[0]=T.cur[0],T[1]=T.cur[1]);qe=!0,$n(D),De(D)}function De(D){const T=oe[0],q=T.point0;var Fe;switch(ie=T[0]-q[0],re=T[1]-q[1],v){case Pn:case Hi:{E&&(ie=ve(W-L,ge(Ce-J,ie)),M=L+ie,te=J+ie),y&&(re=ve(w-O,ge(ne-N,re)),Q=O+re,ae=N+re);break}case st:{oe[1]?(E&&(M=ve(W,ge(Ce,oe[0][0])),te=ve(W,ge(Ce,oe[1][0])),E=1),y&&(Q=ve(w,ge(ne,oe[0][1])),ae=ve(w,ge(ne,oe[1][1])),y=1)):(E<0?(ie=ve(W-L,ge(Ce-L,ie)),M=L+ie,te=J):E>0&&(ie=ve(W-J,ge(Ce-J,ie)),M=L,te=J+ie),y<0?(re=ve(w-O,ge(ne-O,re)),Q=O+re,ae=N):y>0&&(re=ve(w-N,ge(ne-N,re)),Q=O,ae=N+re));break}case lt:{E&&(M=ve(W,ge(Ce,L-ie*E)),te=ve(W,ge(Ce,J+ie*E))),y&&(Q=ve(w,ge(ne,O-re*y)),ae=ve(w,ge(ne,N+re*y)));break}}te<M&&(E*=-1,Fe=L,L=J,J=Fe,Fe=M,M=te,te=Fe,I in Gi&&Ye.attr("cursor",ze[I=Gi[I]])),ae<Q&&(y*=-1,Fe=O,O=N,N=Fe,Fe=Q,Q=ae,ae=Fe,I in Qi&&Ye.attr("cursor",ze[I=Qi[I]])),S.selection&&(C=S.selection),z&&(M=C[0][0],te=C[1][0]),we&&(Q=C[0][1],ae=C[1][1]),(C[0][0]!==M||C[0][1]!==Q||C[1][0]!==te||C[1][1]!==ae)&&(S.selection=[[M,Q],[te,ae]],u.call(k),fe.brush(D,v.name))}function xt(D){if(Yu(D),D.touches){if(D.touches.length)return;s&&clearTimeout(s),s=setTimeout(function(){s=null},500)}else sl(D.view,qe),Tt.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);yt.attr("pointer-events","all"),Ye.attr("cursor",ze.overlay),S.selection&&(C=S.selection),Zu(C)&&(S.selection=null,u.call(k)),fe.end(D,v.name)}function wn(D){switch(D.keyCode){case 16:{K=E&&y;break}case 18:{v===st&&(E&&(J=te-ie*E,L=M+ie*E),y&&(N=ae-re*y,O=Q+re*y),v=lt,De(D));break}case 32:{(v===st||v===lt)&&(E<0?J=te-ie:E>0&&(L=M-ie),y<0?N=ae-re:y>0&&(O=Q-re),v=Pn,Ye.attr("cursor",ze.selection),De(D));break}default:return}$n(D)}function bn(D){switch(D.keyCode){case 16:{K&&(z=we=K=!1,De(D));break}case 18:{v===lt&&(E<0?J=te:E>0&&(L=M),y<0?N=ae:y>0&&(O=Q),v=st,De(D));break}case 32:{v===Pn&&(D.altKey?(E&&(J=te-ie*E,L=M+ie*E),y&&(N=ae-re*y,O=Q+re*y),v=lt):(E<0?J=te:E>0&&(L=M),y<0?N=ae:y>0&&(O=Q),v=st),Ye.attr("cursor",ze[I]),De(D));break}default:return}$n(D)}}function p(m){c(this,arguments).moved(m)}function P(m){c(this,arguments).ended(m)}function b(){var m=this.__brush||{selection:null};return m.extent=Wi(t.apply(this,arguments)),m.dim=e,m}return l.extent=function(m){return arguments.length?(t=typeof m=="function"?m:Mn(Wi(m)),l):t},l.filter=function(m){return arguments.length?(n=typeof m=="function"?m:Mn(!!m),l):n},l.touchable=function(m){return arguments.length?(i=typeof m=="function"?m:Mn(!!m),l):i},l.handleSize=function(m){return arguments.length?(a=+m,l):a},l.keyModifiers=function(m){return arguments.length?(r=!!m,l):r},l.on=function(){var m=o.on.apply(o,arguments);return m===o?l:m},l}function nc(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function un(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function pt(e){return e=un(Math.abs(e)),e?e[1]:NaN}function ic(e,t){return function(n,i){for(var r=n.length,o=[],a=0,s=e[0],l=0;r>0&&s>0&&(l+s+1>i&&(s=Math.max(1,i-l)),o.push(n.substring(r-=s,r+s)),!((l+=s+1)>i));)s=e[a=(a+1)%e.length];return o.reverse().join(t)}}function rc(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var oc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function cn(e){if(!(t=oc.exec(e)))throw new Error("invalid format: "+e);var t;return new ii({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}cn.prototype=ii.prototype;function ii(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}ii.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ac(e){e:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var qr;function sc(e,t){var n=un(e,t);if(!n)return e+"";var i=n[0],r=n[1],o=r-(qr=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=i.length;return o===a?i:o>a?i+new Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+un(e,Math.max(0,t+o-1))[0]}function Ji(e,t){var n=un(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const ji={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:nc,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Ji(e*100,t),r:Ji,s:sc,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Zi(e){return e}var er=Array.prototype.map,tr=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function lc(e){var t=e.grouping===void 0||e.thousands===void 0?Zi:ic(er.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?Zi:rc(er.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"\u2212":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=cn(f);var d=f.fill,p=f.align,P=f.sign,b=f.symbol,m=f.zero,k=f.width,I=f.comma,v=f.precision,E=f.trim,y=f.type;y==="n"?(I=!0,y="g"):ji[y]||(v===void 0&&(v=12),E=!0,y="g"),(m||d==="0"&&p==="=")&&(m=!0,d="0",p="=");var S=b==="$"?n:b==="#"&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",F=b==="$"?i:/[%p]/.test(y)?a:"",C=ji[y],W=/[defgprs%]/.test(y);v=v===void 0?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function L(M){var w=S,O=F,Q,Ce,J;if(y==="c")O=C(M)+O,M="";else{M=+M;var te=M<0||1/M<0;if(M=isNaN(M)?l:C(Math.abs(M),v),E&&(M=ac(M)),te&&+M==0&&P!=="+"&&(te=!1),w=(te?P==="("?P:s:P==="-"||P==="("?"":P)+w,O=(y==="s"?tr[8+qr/3]:"")+O+(te&&P==="("?")":""),W){for(Q=-1,Ce=M.length;++Q<Ce;)if(J=M.charCodeAt(Q),48>J||J>57){O=(J===46?r+M.slice(Q+1):M.slice(Q))+O,M=M.slice(0,Q);break}}}I&&!m&&(M=t(M,1/0));var ne=w.length+M.length+O.length,N=ne<k?new Array(k-ne+1).join(d):"";switch(I&&m&&(M=t(N+M,N.length?k-O.length:1/0),N=""),p){case"<":M=w+M+O+N;break;case"=":M=w+N+M+O;break;case"^":M=N.slice(0,ne=N.length>>1)+w+M+O+N.slice(ne);break;default:M=N+w+M+O;break}return o(M)}return L.toString=function(){return f+""},L}function c(f,d){var p=u((f=cn(f),f.type="f",f)),P=Math.max(-8,Math.min(8,Math.floor(pt(d)/3)))*3,b=Math.pow(10,-P),m=tr[8+P/3];return function(k){return p(b*k)+m}}return{format:u,formatPrefix:c}}var Yt,Dr,Xr;uc({thousands:",",grouping:[3],currency:["$",""]});function uc(e){return Yt=lc(e),Dr=Yt.format,Xr=Yt.formatPrefix,Yt}function cc(e){return Math.max(0,-pt(Math.abs(e)))}function fc(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(pt(t)/3)))*3-pt(Math.abs(e)))}function dc(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,pt(t)-pt(e))+1}function ri(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const nr=Symbol("implicit");function Vr(){var e=new Mi,t=[],n=[],i=nr;function r(o){let a=e.get(o);if(a===void 0){if(i!==nr)return i;e.set(o,a=t.push(o)-1)}return n[a%n.length]}return r.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new Mi;for(const a of o)e.has(a)||e.set(a,t.push(a)-1);return r},r.range=function(o){return arguments.length?(n=Array.from(o),r):n.slice()},r.unknown=function(o){return arguments.length?(i=o,r):i},r.copy=function(){return Vr(t,n).unknown(i)},ri.apply(r,arguments),r}function zr(){var e=Vr().unknown(void 0),t=e.domain,n=e.range,i=0,r=1,o,a,s=!1,l=0,u=0,c=.5;delete e.unknown;function f(){var d=t().length,p=r<i,P=p?r:i,b=p?i:r;o=(b-P)/Math.max(1,d-l+u*2),s&&(o=Math.floor(o)),P+=(b-P-o*(d-l))*c,a=o*(1-l),s&&(P=Math.round(P),a=Math.round(a));var m=Ca(d).map(function(k){return P+o*k});return n(p?m.reverse():m)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([i,r]=d,i=+i,r=+r,f()):[i,r]},e.rangeRound=function(d){return[i,r]=d,i=+i,r=+r,s=!0,f()},e.bandwidth=function(){return a},e.step=function(){return o},e.round=function(d){return arguments.length?(s=!!d,f()):s},e.padding=function(d){return arguments.length?(l=Math.min(1,u=+d),f()):l},e.paddingInner=function(d){return arguments.length?(l=Math.min(1,d),f()):l},e.paddingOuter=function(d){return arguments.length?(u=+d,f()):u},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return zr(t(),[i,r]).round(s).paddingInner(l).paddingOuter(u).align(c)},ri.apply(f(),arguments)}function hc(e){return function(){return e}}function mc(e){return+e}var ir=[0,1];function ct(e){return e}function Kn(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:hc(isNaN(t)?NaN:.5)}function pc(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function vc(e,t,n){var i=e[0],r=e[1],o=t[0],a=t[1];return r<i?(i=Kn(r,i),o=n(a,o)):(i=Kn(i,r),o=n(o,a)),function(s){return o(i(s))}}function gc(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),o=new Array(i),a=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<i;)r[a]=Kn(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(s){var l=va(e,s,1,i)-1;return o[l](r[l](s))}}function yc(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function wc(){var e=ir,t=ir,n=pn,i,r,o,a=ct,s,l,u;function c(){var d=Math.min(e.length,t.length);return a!==ct&&(a=pc(e[0],e[d-1])),s=d>2?gc:vc,l=u=null,f}function f(d){return d==null||isNaN(d=+d)?o:(l||(l=s(e.map(i),t,n)))(i(a(d)))}return f.invert=function(d){return a(r((u||(u=s(t,e.map(i),Ee)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,mc),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=Nl,c()},f.clamp=function(d){return arguments.length?(a=d?!0:ct,c()):a!==ct},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(o=d,f):o},function(d,p){return i=d,r=p,c()}}function bc(){return wc()(ct,ct)}function kc(e,t,n,i){var r=ka(e,t,n),o;switch(i=cn(i==null?",f":i),i.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(o=fc(r,a))&&(i.precision=o),Xr(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(o=dc(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=o-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(o=cc(r))&&(i.precision=o-(i.type==="%")*2);break}}return Dr(i)}function _c(e){var t=e.domain;return e.ticks=function(n){var i=t();return ba(i[0],i[i.length-1],n==null?10:n)},e.tickFormat=function(n,i){var r=t();return kc(r[0],r[r.length-1],n==null?10:n,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,o=i.length-1,a=i[r],s=i[o],l,u,c=10;for(s<a&&(u=a,a=s,s=u,u=r,r=o,o=u);c-- >0;){if(u=mr(a,s,n),u===l)return i[r]=a,i[o]=s,t(i);if(u>0)a=Math.floor(a/u)*u,s=Math.ceil(s/u)*u;else if(u<0)a=Math.ceil(a*u)/u,s=Math.floor(s*u)/u;else break;l=u}return e},e}function Hr(){var e=bc();return e.copy=function(){return yc(e,Hr())},ri.apply(e,arguments),_c(e)}function ft(e,t,n){this.k=e,this.x=t,this.y=n}ft.prototype={constructor:ft,scale:function(e){return e===1?this:new ft(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ft(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new ft(1,0,0);ft.prototype;function xn(e,t,n){const i=new G(10).pow(t-n);return new G(1.0001).pow(e).mul(i)}const Cc=vt({props:{poolInfo:{type:Object,default:()=>({chartLoading:!1,token_a:{decimal:6},token_b:{decimal:6},currentLiquity:"50000000"})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:()=>[]},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1},currentPriceTab:{type:String}},setup(e,t){const n=_(1),i=St(),r=ce(()=>i),o=Wt(),{TickMath:a}=o,s=()=>{if(n.value<.015625)return;const p=n.value/2;n.value=p,u(e.poolInfo,p)},l=()=>{if(n.value>32)return;const p=n.value*2;n.value=p,u(e.poolInfo,p)},u=(p,P=1)=>{if(p&&p.token_a&&!e.chartLoading&&e.minPrice&&e.maxPrice){const b=Number(e.poolInfo.current_tick_index);console.log("0117###dataProcessing###currentTick###",b),console.log("0117###dataProcessing###minPrice###",e.minPrice),console.log("0117###dataProcessing###maxPrice###",e.maxPrice);let m=b+100*P,k=b-100*P,I,v;e.maxPrice==="\u221E"?v=0:e.direction?v=a.priceToTickIndex(new G(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):v=a.priceToTickIndex(new G(1/Number(e.minPrice)),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals),e.minPrice==="0"?I=0:e.direction?I=a.priceToTickIndex(new G(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):I=a.priceToTickIndex(new G(1/Number(e.maxPrice)),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals);const E=Number(p.liquidity)/Math.pow(10,6),y=e.tickList,S=[],F=[];let C={};for(let w=0;w<y.length;w++)C=y[w],C.index<=b&&C.index>=k?S.unshift(C):C.index>b&&C.index<=m&&F.push(C);let W=Number(E);for(let w=0;w<S.length;w++)S[w].liquityAmount=W-Number(S[w].liquidityGross.toString()/Math.pow(10,6));let L=Number(E);for(let w=0;w<F.length;w++)F[w].liquityAmount=L-Number(F[w].liquidityGross.toString()/Math.pow(10,6));let M=[];M=[...S.reverse(),{index:b,liquityAmount:Number(E)},...F],e.direction||(M=M.reverse()),console.log("0117###dataProcessing###minPriceTick###",I),console.log("0117###dataProcessing###maxPriceTick###",v),console.log("0117###dataProcessing###tickMin###",k),console.log("0117###dataProcessing###tickMax###",m),b>=I&&b<=v?(m=v+100*P,k=I-100*P):b<I?(m=v+100*P,k=b-100*P):(m=b+100*P,k=I-100*P),f(M,k,m,I,v,b)}};let c=_(!1);Yn(()=>{document.body.clientWidth<750?c.value=!1:c.value=!0,window.onresize=()=>{document.body.clientWidth<750?c.value=!1:c.value=!0,u(e.poolInfo,n.value)}});const f=(p,P,b,m,k,I)=>{console.log("0117####drawChart####chartData####",p),console.log("0117####drawChart####tickMin####",P),console.log("0117####drawChart####tickMax####",b),console.log("0117####drawChart####minPriceTick####",m),console.log("0117####drawChart####maxPriceTick####",k),console.log("0117####drawChart####currentTick####",I);const v={top:30,right:35,bottom:20,left:55};let E,y;c.value?(E=460-v.left-v.right,y=205-v.top-v.bottom):(E=340-v.left-v.right,y=205-v.top-v.bottom);let S=[P,I-(I-P)/2,I,I+(b-I)/2,b];console.log("0117####drawChart####xArr####",S);const F=[],C=S[0]-(S[1]-S[0]),W=S[4]+(S[4]-S[3]),L=E/(W-C);Be("#chart").selectAll("*").remove();const M=Be("#chart").attr("width",E+v.left+v.right).attr("height",y+v.top+v.bottom).append("g").attr("transform",`translate(${v.left},${v.right})`),w=_a(p,function(K){return Number(K.liquityAmount)})||0,O=Hr().range([0,y]).domain([w,0]);zr().rangeRound([0,E]).padding(.1),M.append("g").attr("id","barsBox").selectAll("rect").data(p).enter().append("rect").attr("x",function(K,z){return z===0?0:e.direction?Math.abs(p[z-1].index-C)*L:Math.abs(W-p[z-1].index)*L}).attr("y",function(K,z){return z===0?0:e.direction?O(p[z-1].liquityAmount):O(K.liquityAmount)}).attr("width",function(K,z){return z===0?0:e.direction?Math.abs(K.index-p[z-1].index)*L:Math.abs(p[z-1].index-K.index)*L}).attr("height",function(K,z){return z===0?0:e.direction?y-O(p[z-1].liquityAmount):y-O(K.liquityAmount)}).attr("fill","#213F37").attr("class","bars");const J=M.append("g");J.append("line").attr("x1",0).attr("y1",155).attr("x2",420).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D");const te=J.append("g");if(e.direction)for(let K=0;K<S.length;K++){const z=Ze(String(xn(S[K],e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()),xn(S[K],e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()>1e3?4:6)||"0";F.push(z);const we=Math.abs(S[K]-C)*L;let oe=0;for(let fe=0;fe<z.length;fe++)z[fe]==="1"?oe+=4.02:z[fe]==="."?oe+=2.64:z[fe]==="7"?oe+=5.48:oe+=6;te.append("text").text(z).attr("x",we-oe/2).attr("y",170).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}else for(let K=S.length-1;K>=0;K--){const z=Ze(String(1/xn(S[K],e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()),6)||"0";F.push(z);const we=Math.abs(S[K]-W)*L;let oe=0;for(let fe=0;fe<z.length;fe++)z[fe]==="1"?oe+=4.02:z[fe]==="."?oe+=2.64:z[fe]==="7"?oe+=5.48:oe+=6;te.append("text").text(z).attr("x",we-oe/2).attr("y",170).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}console.log("0117####drawChart####xPriceArr####",F);const ne=M.append("g").attr("id","left-handle"),N=M.append("g").attr("id","right-handle");r.value.theme=="default"?(ne.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),ne.append("path").attr("d","M0 0 L36 0 L36 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 20) rotate(180)"),ne.append("text").text("Min").attr("fill","#B5B8C2").attr("x",-24).attr("y",14).attr("font-size","12px"),ne.append("rect").attr("width",1).attr("height",6).attr("x",-32).attr("y",7).attr("fill","#68FFD8"),ne.append("rect").attr("width",1).attr("height",8).attr("x",-30).attr("y",6).attr("fill","#68FFD8"),N.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),N.append("path").attr("d","M0 0 L36 0 L36 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 0)"),N.append("text").text("Max").attr("fill","#B5B8C2").attr("x",3).attr("y",14).attr("font-size","12px"),N.append("rect").attr("width",1).attr("height",6).attr("x",31).attr("y",7).attr("fill","#68FFD8"),N.append("rect").attr("width",1).attr("height",8).attr("x",29).attr("y",6).attr("fill","#68FFD8")):(ne.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),ne.append("path").attr("d","M0 0 L36 0 L36 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 20) rotate(180)"),ne.append("text").text("Min").attr("fill","#B5B8C2").attr("x",-24).attr("y",14).attr("font-size","12px"),ne.append("rect").attr("width",1).attr("height",6).attr("x",-32).attr("y",7).attr("fill","#76C8FF"),ne.append("rect").attr("width",1).attr("height",8).attr("x",-30).attr("y",6).attr("fill","#76C8FF"),N.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),N.append("path").attr("d","M0 0 L36 0 L36 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 0)"),N.append("text").text("Max").attr("fill","#B5B8C2").attr("x",3).attr("y",14).attr("font-size","12px"),N.append("rect").attr("width",1).attr("height",6).attr("x",31).attr("y",7).attr("fill","#76C8FF"),N.append("rect").attr("width",1).attr("height",8).attr("x",29).attr("y",6).attr("fill","#76C8FF"));const ae=ec().extent([[0,0],[E,y]]).handleSize(30).on("end",qe);let ie,re;if(e.direction?(ie=m<C?-100:Math.abs(m-C)*L,re=k<C?-100:Math.abs(k-C)*L):(re=m<C?-100:Math.abs(W-m)*L,ie=k<C?-100:Math.abs(W-k)*L),e.minPrice==="0"&&(ie=0),e.maxPrice==="\u221E"&&(re=E),M.append("g").attr("class","brush").call(ae).call(ae.move,[ie,re]),re-10<=ie&&e.poolInfo.type=="stable"){s();return}ne.attr("transform","translate("+ie+", 0)"),N.attr("transform","translate("+re+", 0)");function qe(K){if(!K.sourceEvent||!K.selection||e.currentPriceTab!=="Custom")return;ne.attr("transform","translate("+K.selection[0]+", 0)"),N.attr("transform","translate("+K.selection[1]+", 0)");let z,we;e.direction?(z=a.tickIndexToPrice(K.selection[0]/L+C,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber(),we=a.tickIndexToPrice(K.selection[1]/L+C,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()):(z=1/a.tickIndexToPrice(W-K.selection[0]/L,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber(),we=1/a.tickIndexToPrice(W-K.selection[1]/L,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()),t.emit("onChangeMinPrice",String(Ze(String(z),6))),t.emit("onChangeMaxPrice",String(Ze(String(we),6)))}Be(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#333")};_(""),le(()=>[e.poolInfo,e.minPrice,e.maxPrice,e.currentPriceTab],([p,P,b,m])=>{p&&P&&b&&(m!=="Custom"&&(n.value=32),u(p,n.value))},{immediate:!0});const d=_(!0);return le(()=>e.chartLoading,(p,P)=>{p!==P&&(d.value=p)},{immediate:!0,deep:!0}),{store:r,loading:d,zoomOut:s,zoomIn:l}}});const Ac=e=>(dn("data-v-990a7fe7"),e=e(),hn(),e),Sc={class:"chart-box"},Ic={class:"chart"},Mc={class:"zoom"},$c=Ac(()=>h("svg",{id:"chart"},null,-1));function Pc(e,t,n,i,r,o){return $(),x("div",Sc,[mo(h("div",Ic,[h("div",Mc,[h("div",{class:"amplification",onClick:t[0]||(t[0]=(...a)=>e.zoomOut&&e.zoomOut(...a))}),h("div",{class:"narrow",onClick:t[1]||(t[1]=(...a)=>e.zoomIn&&e.zoomIn(...a))})]),$c],512),[[po,!e.loading]])])}const Nc=gt(Cc,[["render",Pc],["__scopeId","data-v-990a7fe7"]]),Tc=vt({components:{Modal:vo},props:{},setup(){const e=_({}),t=St(),n=ce(()=>t),i=ce(()=>n.value.chainName),r=ce(()=>go[i.value]);let o=_(!0);const a=or(),s=ce(()=>a),l=ar();return le(()=>s.value.currentPositionInfo,u=>{u&&(e.value=u)}),{addCommom:sr,router:l,pools:s,positionInfo:e,decimalFormat:Ze,rateChange:o,config:r,importIcon:fn,store:n}}});const yn=e=>(dn("data-v-8c4e0879"),e=e(),hn(),e),xc=yn(()=>h("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[h("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Ec={class:"rejected-container"},Rc={class:"coin-pair"},Lc=yn(()=>h("use",{"xlink:href":"#icon-icon-copy"},null,-1)),Fc=[Lc],Bc=["href"],Uc=yn(()=>h("svg",{class:"icon","aria-hidden":"true"},[h("use",{"xlink:href":"#icon-icon-jump"})],-1)),Oc=[Uc],qc={class:"coin-pair"},Dc=["src"],Xc=["src"],Vc={class:"fee"},zc={class:"status"},Hc={class:"min-and-max"},Kc={key:0},Yc={class:"text"},Wc={key:0,src:cr,alt:""},Gc={key:1,src:fr,alt:""},Qc={class:"text"},Jc={key:1},jc={class:"text"},Zc={key:0,src:cr,alt:""},ef={key:1,src:fr,alt:""},tf={class:"text"},nf=yn(()=>h("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),rf=[nf];function of(e,t,n,i,r,o){const a=rr,s=xo,l=Wn,u=yo("Modal");return $(),He(u,{visible:!0,class:"transiaction-rejected",centered:"",title:e.$t("newAdd.openPositionSuccessful"),width:"340px",footer:null,onCancel:t[3]||(t[3]=c=>e.$emit("onClose"))},{closeIcon:ye(()=>[xc]),default:ye(()=>[h("div",Ec,[ue(a,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:ye(()=>[h("div",Rc,[Ie(A(e.positionInfo.tokenName)+" ",1),($(),x("svg",{class:"icon","aria-hidden":"true",onClick:t[0]||(t[0]=c=>e.store.copy(e.positionInfo.nftHash))},Fc)),h("a",{href:`https://explorer.aptoslabs.com/token/${e.positionInfo.nftHash}/0?network=${e.config.network}`,target:"_blank"},Oc,8,Bc)])]),_:1},8,["loading"]),h("div",{class:Me(["left",`position-status-${e.positionInfo&&e.positionInfo.currentStatus&&e.positionInfo.currentStatus.toLowerCase()}`])},[ue(a,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:ye(()=>[h("div",qc,[h("div",null,[h("img",{src:e.fromCoinUrl||e.positionInfo.token_a.logoURI||e.importIcon(`/image/coins/${e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol.toLowerCase()}.png`)},null,8,Dc),h("img",{src:e.toCoinUrl||e.positionInfo.token_b.logoURI||e.importIcon(`/image/coins/${e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol.toLowerCase()}.png`)},null,8,Xc)]),h("span",null,A(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol)+" - "+A(e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol),1)]),h("div",Vc,A(e.$t("common.fee"))+" "+A(e.positionInfo.fee)+"%",1)]),_:1},8,["loading"])],2),h("div",zc,[ue(s,{"current-status":e.positionInfo.currentStatus||""},null,8,["current-status"])]),ue(a,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:ye(()=>[h("div",Hc,[e.rateChange?($(),x("div",Kc,[h("div",Yc,A(e.addCommom(e.decimalFormat(String(e.positionInfo&&e.positionInfo.minPrice),6))),1),e.store.theme=="default"?($(),x("img",Wc)):($(),x("img",Gc)),h("div",Qc,A(e.positionInfo&&e.positionInfo.maxPrice.indexOf("\u221E")>-1||e.positionInfo&&e.positionInfo.maxPrice.indexOf("+")>-1?"\u221E":e.addCommom(e.decimalFormat(String(e.positionInfo&&e.positionInfo.maxPrice),6)))+" "+A(e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol)+" per "+A(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol),1)])):($(),x("div",Jc,[h("div",jc,A(e.addCommom(e.decimalFormat(String(1/Number(e.positionInfo&&e.positionInfo.maxPrice)),6))),1),e.store.theme=="default"?($(),x("img",Zc)):($(),x("img",ef)),h("div",tf,A(e.positionInfo&&e.positionInfo.maxPrice.indexOf("\u221E")>-1||e.positionInfo&&e.positionInfo.maxPrice.indexOf("+")>-1?"\u221E":e.addCommom(e.decimalFormat(String(1/Number(e.positionInfo&&e.positionInfo.minPrice)),6)))+" "+A(e.positionInfo&&e.positionInfo.token_a&&e.positionInfo.token_a.symbol)+" per "+A(e.positionInfo&&e.positionInfo.token_b&&e.positionInfo.token_b.symbol),1)])),($(),x("svg",{class:"icon-change","aria-hidden":"true",onClick:t[1]||(t[1]=c=>e.rateChange=!e.rateChange)},rf))])]),_:1},8,["loading"])]),ue(l,{onClick:t[2]||(t[2]=c=>e.router.push(`/position-detail/1?collect=${e.positionInfo.collectionName}&&token=${e.positionInfo.tokenName}&&address=${e.positionInfo.pool}`))},{default:ye(()=>[Ie(A(e.$t("newAdd.viewDetail")),1)]),_:1})]),_:1},8,["title"])}const af=gt(Tc,[["render",of],["__scopeId","data-v-8c4e0879"]]),sf=vt({setup(){const{t:e,locale:t}=wo(),n=bo(),i=ce(()=>n),r=St(),o=_(20),a=_(0),s=_(null),l=_(!1),u=_(!1),c=_(!1),f=_(!1),d=_("fromCoin"),p=_(""),P=_(""),b=_(!1),m=_(!0),k=_(!1),I=_(!1),v=_(!0),E=_(!1),y=_(""),S=_(""),F=_(""),C=_(""),W=_(""),L=_(""),M=_(!1),w=_(!1),O=_(!1);_(!1);const Q=_("0.01% "+e("common.feeTier")),Ce=_(0),J=_(!0),te=_(!1),ne=_([]),N=_(""),ae=_(7),ie=_("Estimated APR"),re=_([{time:"24H",num:24},{time:"7D",num:7},{time:"30D",num:30}]),qe=_(!0),K=g=>{console.log(g,"====>>>>item",g.num,ae.value),ae.value=g.num},z=()=>{qe.value=!qe.value},we=_([]),oe=()=>{a.value=0,I.value=!0,Rt.updateCurrentPools(U.value.poolAddress),setTimeout(()=>{I.value=!1},1e3),bt()},fe=ce(()=>Number(F.value)>Number(C.value)),yt=g=>{k.value=g,F.value="0",C.value="\u221E"},Ye=g=>{switch(g){case .01:return"Best for very stable pairs.";case .05:return"Best for stable pairs.";case .3:return"Best for most pairs.";case 1:return"Best for exotic pairs."}},Tt=ce(()=>{if(he.value.newTokenObj&&T.value&&q.value){const g=Object.values(he.value.pools).filter(B=>{var X,Y,H,Z;return B.token_a.address.toUpperCase()===((X=T.value.address)==null?void 0:X.toUpperCase())&&B.token_b.address.toUpperCase()===((Y=q.value.address)==null?void 0:Y.toUpperCase())||B.token_b.address.toUpperCase()===((H=T.value.address)==null?void 0:H.toUpperCase())&&B.token_a.address.toUpperCase()===((Z=q.value.address)==null?void 0:Z.toUpperCase())}),R=[];return g.forEach(B=>{R.push({label:B.fee+"% "+e("common.feeTier"),title:B.fee+"% fee",address:B.address,fee:B.fee,text:Ye(B.fee)})}),R}}),ot=ce(()=>r.slippage),De=ce(()=>!T.value||!q.value),xt=ce(()=>U.value&&U.value.is_pause?"Pool Closed":De.value?e("newAdd.invalidPair"):U.value?Number(y.value)>Number(Ge.value)?e("button.insufficientBalance",{name:T.value.symbol}):Number(S.value)>Number(Qe.value)?e("button.insufficientBalance",{name:q.value.symbol}):E.value?e("modal.selectTokenModalTitle"):C.value!=="\u221E"&&Number(F.value)>=Number(C.value)?e("newAdd.invalidRange"):!Number(y.value)&&!Number(S.value)?e("button.enterAmount"):e("button.addLiquidity"):e("button.poolNotFound")),wn=St(),bn=ce(()=>wn),D=ar(),T=_(),q=_();Yn(()=>{oi()}),ko(()=>{clearInterval(s.value)});const Fe=g=>{F.value=g},Kr=g=>{C.value=g},Yr=()=>{J.value=!0;const g=T.value;if(T.value=q.value,q.value=g,m.value=!m.value,y.value=S.value,J.value=!1,F.value!==""&&C.value!==""&&F.value!=="0"&&C.value!=="\u221E"){const R=F.value,B=C.value;(!te.value||!m.value)&&(F.value=String(1/Number(B)),C.value=String(1/Number(R)));const X=W.value,Y=L.value;W.value=String(1/Number(Y)),L.value=String(1/Number(X)),_n({key:N.value,...fi.value[N.value]}),te.value=!1}};le([F,C],([g],[R])=>{console.log(g,"====>newVal580"),bt(),U.value&&C.value!=="\u221E"&&Number(F.value)>=Number(C.value)?O.value=!0:O.value=!1});const Wr=g=>{var R,B,X,Y;d.value=g,g==="fromCoin"?(p.value=((R=q.value)==null?void 0:R.address)||"",P.value=((B=T.value)==null?void 0:B.address)||""):(p.value=((X=T.value)==null?void 0:X.address)||"",P.value=((Y=q.value)==null?void 0:Y.address)||""),b.value=!0},Gr=g=>{E.value=!1,d.value==="fromCoin"?(q.value&&g.address.toLowerCase()===(q==null?void 0:q.value.address.toLowerCase())&&(q.value=null),T.value=g):(T.value&&g.address.toLowerCase()===(T==null?void 0:T.value.address.toLowerCase())&&(T.value=null),q.value=g),b.value=!1},Qr=g=>{g==="fromCoin"?(v.value=!0,y.value=Ge.value>0?T.value.symbol=="APT"?Number(new G(Number(Ge.value)).sub(new G(.2)).toString())>.2?new G(Number(Ge.value)).sub(new G(.2)).toString():Ge.value:String(Ge.value):""):(v.value=!1,S.value=Qe.value>0?q.value.symbol=="APT"?Number(new G(Number(Qe.value)).sub(new G(.2)).toString())>.2?new G(Number(Qe.value)).sub(new G(.2)).toString():Qe.value:String(Qe.value):"")},oi=()=>{s.value=setInterval(()=>{u.value||a.value<o.value&&(a.value+=1,a.value===o.value&&(U.value.poolAddress&&Rt.updateCurrentPools(U.value.poolAddress),a.value=0))},1e3)};le(y,(g,R)=>{g==""&&v.value&&(S.value=""),g&&v.value&&bt()}),le(S,(g,R)=>{g==""&&!v.value&&(y.value=""),g&&!v.value&&bt()});const Jr=()=>{T.value=null,q.value=null,F.value="0",C.value="0",y.value="",S.value="",E.value=!0,Q.value="",M.value=!1,be.value=!0,ke.value=!0,J.value=!1},ai=_(!1);_o();const{setIsShowSuccess:si,setIsShowRejected:li,setIsShowWaiting:Et,setTransactionDesc:jr,setTransactionTxid:ui,setPositiomNum:Zr}=r,Pe=Co(),Rt=or(),he=ce(()=>Rt);le(()=>he.value.newTokenObj,g=>{_i(g)||(Pe&&Pe.query&&Pe.query.tokena?T.value=Xt(g,Pe.query.tokena):T.value=Xt(g,"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDT"),Pe&&Pe.query&&Pe.query.tokenb?q.value=Xt(g,Pe.query.tokenb):q.value=Xt(g,"0xf22bede237a07e121b56d91a491eb7bcdfd1f5907926a9e58338f964a01b17fa::asset::USDC"))},{immediate:!0});const wt=_({}),be=_(!1),ke=_(!1),Lt=_(),Ft=_(),We=Wt(),kn=_(),ci=_(),Bt=_(""),Ut=_(""),bt=async()=>{var Je,Xe;if(!U.value||(console.log("\u6DFB\u52A0\u6D41\u52A8\u6027\u9884\u8BA1\u7B97=====>"),!y.value&&!S.value&&!F.value&&!C.value))return;const{TickUtil:g,TickMath:R,getNearestTickByTick:B}=Wt(),X=U.value.token_a.decimals,Y=U.value.token_b.decimals;let H,Z,ee,V,me,de,Ne,Ae;const Te=U.value.current_tick_index,xe=U.value.priceConfigObj;console.log(U.value,"====>poolInfo.value.current_tick_index;");let se;if(U.value.token_a.address.toLowerCase()===T.value.address.toLowerCase()&&U.value.token_b.address.toLowerCase()===q.value.address.toLowerCase()?se=!0:se=!1,F.value==="0"&&C.value==="\u221E"?(ee=g.getMinIndex(U.value.tickSpacing),V=g.getMaxIndex(U.value.tickSpacing),me=R.tickIndexToSqrtPriceX64(ee),de=R.tickIndexToSqrtPriceX64(V)):N.value=="Custom"?(se?(H=Number(F.value),console.log(H,"min===>747"),Z=Number(C.value)):(H=1/Number(C.value),Z=1/Number(F.value)),Ne=R.priceToTickIndex(new G(H),X,Y),Ae=R.priceToTickIndex(new G(Z),X,Y),ee=B(Ne,U.value.tickSpacing),V=B(Ae,U.value.tickSpacing),console.log(ee,"===>tick_lower"),console.log(V,"===>tick_upper"),me=R.priceToSqrtPriceX64(new G(H),X,Y),de=R.priceToSqrtPriceX64(new G(Z),X,Y)):(console.log(xe[N.value],"===>priceConfigObj[currentPriceTab.value]"),ee=xe[N.value].lower,V=xe[N.value].upper,me=R.tickIndexToSqrtPriceX64(ee),de=R.tickIndexToSqrtPriceX64(V)),C.value!=="\u221E"&&ee>=V){be.value=!0,y.value="",ke.value=!0,S.value="";return}if(console.log(Te,ee,V,"===>currentTickIndex"),C.value==="\u221E"||Te>ee&&Te<V){be.value=!1,ke.value=!1;let pe;if(y.value||S.value){if(v.value){const An=new G(y.value).mul(Math.pow(10,T.value.decimals)).toString();pe=new je(An)}else{const An=new G(S.value).mul(Math.pow(10,q.value.decimals)).toString();pe=new je(An)}console.log(se,"======>directs");const{liquidityAmount:_e,tokenMaxA:qt,tokenMaxB:Dt,tokenMaxAOrigin:lo,tokenMaxBOrigin:uo}=We.estLiquidityAndcoinAmountFromOneAmounts({tokenA:U.value.token_a,tokenB:U.value.token_b,lowerTick:ee,upperTick:V,coinAmount:pe,iscoinA:se?v.value:!v.value,roundUp:!0,slippage:Number(ot.value)/100,curSqrtPrice:new je(U.value.current_sqrt_price)});wt.value={liquidityAmount:_e,tokenMaxA:qt,tokenMaxB:Dt,tokenMaxAOrigin:lo,tokenMaxBOrigin:uo},se?v.value?S.value=Number(Dt)>0?Dt:"":y.value=Number(qt)>0?qt:"":v.value?S.value=qt:y.value=Dt}}else if(Te>=V){if(se?y.value="":S.value="",be.value=se,ke.value=!se,y.value||S.value){let pe;if(se){const _e=new G(S.value).mul(Math.pow(10,(Je=q.value)==null?void 0:Je.decimals)).toString();pe=new je(_e),wt.value={liquidityAmount:yi(me,de,pe),tokenMaxA:0,tokenMaxB:S.value}}else{const _e=new G(y.value).mul(Math.pow(10,(Xe=T.value)==null?void 0:Xe.decimals)).toString();pe=new je(_e),wt.value={liquidityAmount:yi(me,de,pe),tokenMaxA:0,tokenMaxB:y.value}}}}else if(Te<=ee){if(be.value=!se,ke.value=se,se?S.value="":y.value="",y.value||S.value){let pe;if(se){const _e=new G(y.value).mul(Math.pow(10,T.value.decimals)).toString();pe=new je(_e),console.log(me,"minPriceX64===>"),console.log(de,"maxPriceX64===>maxPriceX64"),console.log(_e,"===>amount"),wt.value={liquidityAmount:wi(me,de,pe),tokenMaxA:y.value,tokenMaxB:0}}else{const _e=new G(S.value).mul(Math.pow(10,q.value.decimals)).toString();pe=new je(_e),wt.value={liquidityAmount:wi(me,de,pe),tokenMaxA:S.value,tokenMaxB:0}}}}else be.value=!0,y.value="",ke.value=!0,S.value=""},Ot=_(0);le(()=>Pe.query,g=>{console.log(g,"newValue===>"),g&&g.fee&&(Ot.value=g.fee)},{immediate:!0});const U=ce(()=>{var R,B,X,Y,H;const g=(R=Pe==null?void 0:Pe.query)==null?void 0:R.fee;if(he.value.newTokenObj&&T.value&&q.value&&g){let Z=null;for(const ee in he.value.poolsObj){const V=he.value.poolsObj[ee];(V.token_a.address.toUpperCase()===((B=T.value.address)==null?void 0:B.toUpperCase())&&V.token_b.address.toUpperCase()===((X=q.value.address)==null?void 0:X.toUpperCase())&&V.fee==Ot.value*100||V.token_b.address.toUpperCase()===((Y=T.value.address)==null?void 0:Y.toUpperCase())&&V.token_a.address.toUpperCase()===((H=q.value.address)==null?void 0:H.toUpperCase())&&V.fee==Ot.value*100)&&(Z=V)}return Z&&!_i(Z)?Z:null}return null}),fi=_({}),eo=async(g,R)=>{if(g){const{TickMath:B,getNearestTickByTick:X}=Wt();R&&(J.value=!0),g.token_a.address.toLowerCase()===T.value.address.toLowerCase()&&g.token_b.address.toLowerCase()===q.value.address.toLowerCase()?m.value=!0:m.value=!1,console.log(m.value,"direct.value===>direct.value"),te.value=!0;const Y=g.token_a.decimals,H=g.token_b.decimals;be.value=!1,ke.value=!1,Q.value=g.fee+"% "+e("common.feeTier");const Z=g.current_tick_index;kn.value=Ze(B.sqrtPriceX64ToPrice(g.current_sqrt_price,Y,H).toString(),6),ci.value=Ze(String(1/kn.value),6);const ee=await We.getTicks(g);if(ne.value=We.getTickDataFromUrlData(ee),R){let V=g.priceConfigObj;const me=Z-Number(U.value=="unstable"?U.value.tickSpacing*2:U.value.tickSpacing*3),de=Z+Number(U.value=="unstable"?U.value.tickSpacing*2:U.value.tickSpacing*3);V["Full Range"]={lower:-443630,upper:443630},V.Custom={lower:me,upper:de};const Ne=[];for(let Ae in V)Ne.push({...V[Ae],key:Ae});if(we.value=Ne,g.type=="stable"?N.value="suggested":N.value="passive",fi.value=V,_n({key:N.value,...V[N.value]}),m.value){const Ae=V[N.value].lower,Te=V[N.value].upper,xe=B.tickIndexToPrice(Ae,Y,H).toString(),se=B.tickIndexToPrice(Te,Y,H).toString();W.value=String(xe),F.value=String(xe),L.value=String(se),C.value=String(se)}else{const Ae=V[N.value].lower,Te=V[N.value].upper,xe=B.tickIndexToPrice(Ae,Y,H).toString(),se=B.tickIndexToPrice(Te,Y,H).toString();W.value=String(1/Number(se)),F.value=String(1/Number(se)),L.value=String(1/Number(xe)),C.value=String(1/Number(xe))}}J.value=!1}},di=_();le(()=>he.value.RATES,g=>{g&&(di.value=g)},{immediate:!0}),le(()=>[U.value,y.value,S.value,di.value,N.value],([g,R,B,X])=>{var Y,H;if(g&&(B||R)&&X&&X[g.token_a.name.toUpperCase()]&&X[g.token_b.name.toUpperCase()]){const Z=R?Number(R):0,ee=B?Number(B):0,V=Z*((Y=X[g.token_a.name.toUpperCase()])==null?void 0:Y.price),me=ee*((H=X[g.token_b.name.toUpperCase()])==null?void 0:H.price),de=V+me,Ne=(V/de*100).toFixed(0),Ae=(me/de*100).toFixed(0);Bt.value=Ne,Ut.value=Ae}else g&&X?(Bt.value="--",Ut.value="--"):(Bt.value="",Ut.value="")}),le(()=>U.value,(g,R)=>{g?(!R||g.poolAddress!==R.poolAddress||g.current_sqrt_price!==R.current_sqrt_price)&&(console.log("0116###poolInfoWatch####",g),eo(g,!R||g.poolAddress!==R.poolAddress)):(F.value="0",C.value="0",y.value="",S.value="",Q.value="",M.value=!1,be.value=!1,ke.value=!1)},{immediate:!0,deep:!0});const Ge=ce(()=>i.value.assets&&T.value&&i.value.assets[T.value.address]?Ci(i.value.assets[T.value.address].balance,T.value.decimals):0),Qe=ce(()=>i.value.assets&&q.value&&i.value.assets[q.value.address]?Ci(i.value.assets[q.value.address].balance,q.value.decimals):0),to=async()=>{var de,Ne,Ae,Te,xe,se;ai.value=!1,he.value.currentPositionInfo={},ui(""),jr(e("tips.increaseLiquiditySuccess",{from:be.value?"":`${y.value} ${(de=T.value)==null?void 0:de.symbol}`,and:!be.value&&!ke.value?"and":"",to:ke.value?"":`${S.value} ${(Ne=q.value)==null?void 0:Ne.symbol}`})),Et(!0);const g=m.value?v.value:!v.value;console.log(Lt.value,"tickLower.value1397"),console.log(Ft.value,"tickLower.value1397");const R=U.value.priceConfigObj;let B,X,Y,H,Z,ee;const V=U.value.token_a.decimals,me=U.value.token_b.decimals;F.value==="0"&&C.value==="\u221E"?(Y=bi.getMinIndex(U.value.tickSpacing),H=bi.getMaxIndex(U.value.tickSpacing)):N.value=="Custom"?(m.value?(B=Number(F.value),X=Number(C.value)):(B=1/Number(C.value),X=1/Number(F.value)),Z=at.priceToTickIndex(new G(B),V,me),ee=at.priceToTickIndex(new G(X),V,me),Y=ki(Z,U.value.tickSpacing),H=ki(ee,U.value.tickSpacing)):(Y=R[N.value].lower,H=R[N.value].upper),console.log(Y,"===>tick_lower"),console.log(H,"===>tick_upper"),console.log(U.value.current_tick_index,"===>currentTick1429");try{const Je=await We.getAddLiquidityTransactionPayload({pool:{poolAddress:U.value.poolAddress,token_a:U.value.token_a,token_b:U.value.token_b},amount:v.value?y.value:S.value,fix_amount_a:g,tick_lower:Y,tick_upper:H,index:0,slippage:Number(ot.value)/100,roundUp:!0});console.log(Je,"===>payload");let Xe;if(Xe=await i.value.currentWallet.signAndSubmitTransaction(Je),Xe&&Xe.hash){ui(Xe.hash),Et(!1),si(!0),console.log(Xe,"tx====>");const pe={title:e("button.addLiquidity"),desc:e("tips.addLiquiditySuccessText",{from:be.value?"":`${y.value} ${(Ae=T.value)==null?void 0:Ae.symbol}`,and:!be.value&&!ke.value?"and":"",to:ke.value?"":`${S.value} ${(Te=q.value)==null?void 0:Te.symbol}`}),hash:Xe.hash,tit:`Opened Position: ${U.value.symbol}`,text:`Deopsit ${be.value?"":`${y.value} ${(xe=T.value)==null?void 0:xe.symbol}`} ${!be.value&&!ke.value?"and":""} ${ke.value?"":`${S.value} ${(se=q.value)==null?void 0:se.symbol}`}`};We.showTransitionPending(pe);const _e=await We.watchTransaction(pe,!0);_e.status&&(si(!1),he.value.setCurrentPositionLoading(!0),he.value.setCurrentPositionInfo(_e.nftInfo[0].data.id.creator,_e.nftInfo[0].data.id.collection,_e.nftInfo[0].data.name),l.value=!0,setTimeout(()=>{Rt.updateCurrentPools(U.value.poolAddress),We.getAccount(i.value.address)},1e3)),Zr()}else Et(!1),li(!0);y.value="",S.value=""}catch(Je){y.value="",S.value="",console.log("Swap Error###",Je),Et(!1),li(!0)}},no=g=>{switch(g){case"active":return e("newAdd.activeTips");case"passive":return e("newAdd.passiveTips");case"Full Range":return e("newAdd.fullRangTips");case"suggested":return e("newAdd.suggestedTips");case"Custom":return e("newAdd.customTips")}},io=g=>{switch(g){case"suggested":return e("newAdd.suggested");case"active":return e("newAdd.active");case"passive":return e("newAdd.conservative");case"Full Range":return e("newAdd.fullRange");case"Custom":return e("newAdd.custom")}},_n=g=>{N.value=g.key;const R=U.value.token_a.decimals,B=U.value.token_b.decimals,{lower:X,upper:Y}=g;console.log(g,"===>item");const H=at.tickIndexToPrice(X,R,B).toString(),Z=at.tickIndexToPrice(Y,R,B).toString();if(console.log(H,Z,"min=====>max"),g.key=="Full Range"){Lt.value=X,Ft.value=Y,yt(!0);return}m.value?(W.value=String(H),F.value=String(H),L.value=String(Z),C.value=String(Z),Lt.value=X,Ft.value=Y):(W.value=String(1/Number(Z)),F.value=String(1/Number(Z)),L.value=String(1/Number(H)),C.value=String(1/Number(H)),Lt.value=at.priceToTickIndex(new G(1/Number(Z)),R,B),Ft.value=at.priceToTickIndex(new G(1/Number(H)),R,B)),bt()},hi=_(""),mi=_(""),pi=_(""),ro=ce(()=>r),oo=g=>{console.log(g,"list===>");let R=0;return g&&g.forEach(B=>{console.log(B,"===>ele"),R+=Ao(String(B))}),String(R)},Cn=_([]),vi=_([]),gi=_("");le(()=>[ro.value.newTopPoolsObj,U.value,he.value.newTokenObj],([g,R,B])=>{if(console.log(R,"===>poolInfo"),console.log(g,"newValue========>"),g&&R&&g[R.poolAddress]&&B){const X=g[R.poolAddress];hi.value=X&&X.apr_7day,gi.value=oo(X&&X.rewarder_apr)+"%",mi.value=ut(X.tvl_in_usd,2),pi.value=ut(X.vol_in_usd_24h,2);const Y=R&&R.rewarder_infos||[],H=[];Y.forEach((ee,V)=>{const me=B[ee.coinAddress].decimals,de=ut(ee.emissionsEveryDay/Math.pow(10,me),2),Ne=ut(Number(de)*he.value.RATES[B[ee.coinAddress].name.toUpperCase()].price,2);H.push({...ee,logoUrl:B[ee.coinAddress].logoURI,day:de,dayUSD:Ne,symbol:B[ee.coinAddress].symbol})}),Cn.value=H;const Z=[];H.forEach((ee,V)=>{Z.push({...ee,symbol:B[ee.coinAddress].symbol,rewarderApr:X.rewarder_apr[V]})}),vi.value=Z,console.log(Cn,"===>rewarderInfo")}},{immediate:!0,deep:!0});const ao=ce(()=>he.value.newTokenObj&&T.value.address&&he.value.newTokenObj[T.value.address]&&he.value.newTokenObj[T.value.address].logoURI),so=ce(()=>he.value.newTokenObj&&q.value.address&&he.value.newTokenObj[q.value.address]&&he.value.newTokenObj[q.value.address].logoURI);return{selectFee:g=>{console.log(g,"item==>"),Q.value=g.label,Ot.value=g.fee/100},isViewDetail:l,addCommom:sr,fromCoinUrl:ao,toCoinUrl:so,t:e,wallet:i,toAdd:to,chartLoading:J,currentTick:Ce,tickList:ne,poolInfo:U,storeIndex:bn,importIcon:fn,refresh:I,addLiquidityBtnText:xt,slippage:ot,isShowSwapSetting:c,autoRefreshTime:o,countdown:a,setMarketTimer:oi,marketTimer:s,loading:u,fromCoin:T,toCoin:q,openCoinSelect:Wr,onCoinSelect:Gr,existingCoins:p,lastSelectCoin:P,currentCoinKey:d,showCoinSelect:b,fromCoinAmount:y,toCoinAmount:S,maxBtnSelect:Qr,fixedFromCoin:v,isShowLiquidityModal:ai,direct:m,toggle:Yr,edit:M,inputValue:Q,feeTierList:Tt,minPrice:F,maxPrice:C,invalidPriceRange:fe,defaultMinPrice:W,defaultMaxPrice:L,priceRangeChangeMin:Fe,priceRangeChangeMax:Kr,toFullRange:yt,unilateral:f,clearAll:Jr,clickClear:E,positionError:O,positionTips:w,router:D,clickRefresh:oe,fromCoinBlance:Ge,toCoinBlance:Qe,showToCoinLock:ke,showFromCoinLock:be,currentPriceReverse:ci,currentPrice:kn,getPirceText:no,currentPriceTab:N,currentPriceTabList:we,getPirceKey:io,priceTab:_n,apr:hi,liquidityTvl:mi,vol24:pi,fromCoinRatio:Bt,toCoinRatio:Ut,aprRewardsParameter:ae,aprRewardsDateList:re,aprTab:K,reviseValue:z,label:qe,aprTitle:ie,rewarderInfo:Cn,rewarderArr:vi,rewardApr:gi}}}),lf="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAAJFBMVEVHcEwlW04mW04oXlEmW04SHx4jR0B2/9wQFBMVJyVk17szaV2jJaSaAAAABHRSTlMA8K8m/cUwkQAAAL5JREFUSMdjYMAKmBWFDBgIAUMXF2GCilQy2pyQ+Swu2EBHhyNIkgnIdMCjyCUUCMJgilxDMUFKRpsblBmCU9EUFxdPgooiU9ymElSEBEYVDR1FkaumElYUVp46qmjAFTGruE0lqMgQkaGnpYFAdvk2MJ2JpEgFUTQsL0cGVUiKRKCFDLGKiLKOKIdTGASjSYWWiogqMEYL1lFFWJoRTgYEFU0Bt6QIKEoBt6SwN43QWlJEKSKx4UZ+ExDUmAQAo9rc9CAs4WAAAAAASUVORK5CYII=",uf="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAeUExURUdwTANNcARNcAdKcgEdMQRNcBM8V3bI/2Gq2ihWdudYHvAAAAAEdFJOUwDwryb9xTCRAAAAuklEQVRIx2NgwAqYFYUMGAgBw9BQYYKKVFPcgpD5rKHYgItLIEiSCcgMwKMIiFxcXGGKQlwwQWqKWxiU6YpTEdCEEIKKXFLDXAgrQjJ0VNHQUdRBhCK38pRRRQOuiFk1jLAiQ0SGdksDgczyaWA6BUmRKqJoaC9HBhVIikShhQyxioiyjiiHUxgEo0mFloqIKjBGC9ZRRViaEUEGBBW5gltSBBSFgltS2JtGaC0pohSR2HAjvwkIakwCANqYbmgtLE7YAAAAAElFTkSuQmCC",cf=""+new URL("img-no-data_2x.e925467a.png",import.meta.url).href,ff=""+new URL("img-no-data_2x.8bc9afa2.png",import.meta.url).href;const rt=e=>(dn("data-v-60bd229c"),e=e(),hn(),e),df={class:"pools-container"},hf={class:"title"},mf={class:"left"},pf={class:"right title-right"},vf=rt(()=>h("svg",{class:"icon","aria-hidden":"true"},[h("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),gf={class:"content"},yf={class:"content-left"},wf={class:"content-left-bg"},bf={class:"content-left-title"},kf={class:"coin-select"},_f={class:"pool-fee-header"},Cf={key:0,class:"fee-container"},Af=["onClick"],Sf={key:0,src:Eo,alt:""},If={key:1,src:Ro,alt:""},Mf={class:"deposit-title"},$f={class:"card-container"},Pf={class:"card-item"},Nf={key:0,class:"unilateral"},Tf={key:0,src:lr,alt:""},xf={key:1,src:ur,alt:""},Ef={key:2},Rf={class:"card-item"},Lf={key:0,class:"unilateral"},Ff={key:0,src:lr,alt:""},Bf={key:1,src:ur,alt:""},Uf={key:2},Of={key:0,class:"deposit-ratio"},qf={class:"lebal"},Df=rt(()=>h("svg",{class:"icon","aria-hidden":"true"},[h("use",{"xlink:href":"#icon-icon-information"})],-1)),Xf={class:"text"},Vf=rt(()=>h("svg",{class:"icon","aria-hidden":"true"},[h("use",{"xlink:href":"#icon-icon-add"})],-1)),zf={class:"network"},Hf={class:"content-right"},Kf={class:"content-right-title"},Yf=rt(()=>h("svg",{class:"icon","aria-hidden":"true"},[h("use",{"xlink:href":"#icon-icon-information"})],-1)),Wf={key:0,class:"price-tab"},Gf=["onClick"],Qf={key:1,class:"current-price"},Jf={key:0,class:"coin"},jf={key:1,class:"coin"},Zf={key:2,class:"toggle"},ed=["src"],td=["src"],nd={key:3,class:"position-tips"},id=["src"],rd={class:"tips"},od={key:4,class:"position-tips"},ad=["src"],sd={class:"error"},ld={class:"d3-chart-box"},ud={key:0},cd={key:0,class:"noDataImg",src:cf},fd={key:1,class:"noDataImg",src:ff},dd={key:2,class:"not-select-mask"},hd={key:0,class:"pool-info"},md=rt(()=>h("use",{"xlink:href":"#icon-icon_on"},null,-1)),pd=[md],vd={key:0,class:"info-block-container"},gd={class:"info-block"},yd={class:"leabl"},wd={class:"text"},bd={class:"apr-hover-content"},kd={class:"apr-hover"},_d={class:"apr-hover-top"},Cd={key:0,class:"apr-hover-bottom"},Ad={class:"info-block"},Sd={class:"leabl"},Id={class:"text"},Md={class:"info-block"},$d={class:"leabl"},Pd={class:"text"},Nd={class:"info-block"},Td={class:"leabl"},xd={class:"text"},Ed={key:1,class:"pool-rewards-info"},Rd={class:"rewards-list-all"},Ld=rt(()=>h("div",{class:"icon-sign"},null,-1)),Fd=["src"],Bd={class:"rewards-value"},Ud=rt(()=>h("svg",{class:"icon","aria-hidden":"true"},[h("use",{"xlink:href":"#icon-icon-add"})],-1));function Od(e,t,n,i,r,o){var E,y,S,F,C,W,L,M;const a=co,s=fo,l=zo,u=Mo,c=So,f=Wn,d=Po,p=ca,P=Nc,b=Io,m=$o,k=No,I=To,v=af;return $(),x("div",df,[ue(a),h("div",hf,[h("div",mf,[h("span",null,A(e.$t("common.concentratedLiquidity")),1)]),h("div",pf,[h("span",{class:"clear",onClick:t[0]||(t[0]=(...w)=>e.clearAll&&e.clearAll(...w))},A(e.$t("common.clearAll")),1),h("div",{class:"slippage-icon",onClick:t[1]||(t[1]=w=>e.isShowSwapSetting=!0)},[vf,h("span",null,A(e.slippage)+"%",1)]),ue(s,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:t[2]||(t[2]=w=>e.clickRefresh())},null,8,["loading","auto-refresh-time","countdown"])])]),h("div",gf,[h("div",yf,[h("div",wf,[h("div",bf,A(e.$t("common.selectPool")),1),h("div",kf,[ue(l,{"coin-icon":e.fromCoin?e.fromCoin.logoURI:"","coin-name":e.fromCoin&&e.fromCoin.symbol,coin:e.fromCoin,onClick:t[3]||(t[3]=w=>e.openCoinSelect("fromCoin"))},null,8,["coin-icon","coin-name","coin"]),ue(l,{"coin-icon":e.toCoin?e.toCoin.logoURI:"","coin-name":e.toCoin&&e.toCoin.symbol,coin:e.toCoin,onClick:t[4]||(t[4]=w=>e.openCoinSelect("toCoin"))},null,8,["coin-icon","coin-name","coin"])]),h("div",{class:Me(["pool-fee",e.edit?"pool-fee-edit":""])},[h("div",_f,[h("span",{class:Me(e.clickClear||!e.poolInfo?"fee-span":"")},A(e.clickClear||!e.poolInfo?"Fee tier":e.inputValue),3),j("",!0)]),e.edit?($(),x("div",Cf,[($(!0),x(kt,null,Vt(e.feeTierList,(w,O)=>($(),x("div",{key:O,class:Me(e.inputValue.includes(w.label)?"fee-item fee-item-active":"fee-item"),onClick:Q=>e.selectFee(w)},[h("p",null,A(w.title),1),h("span",null,A(w.text),1),e.storeIndex.theme=="default"?($(),x("img",Sf)):($(),x("img",If))],10,Af))),128))])):j("",!0)],2),h("div",Mf,A(e.$t("newAdd.depositAmounts")),1),h("div",$f,[h("div",Pf,[ue(u,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[6]||(t[6]=w=>e.fromCoinAmount=w),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:t[7]||(t[7]=w=>e.maxBtnSelect("fromCoin")),onOnInput:t[8]||(t[8]=w=>{e.fromCoinAmount=w,e.fixedFromCoin=!0}),onOnSelect:t[9]||(t[9]=w=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon"]),e.showFromCoinLock?($(),x("div",Nf,[h("div",null,[e.storeIndex.theme=="default"?($(),x("img",Tf)):($(),x("img",xf)),e.fromCoin&&e.toCoin?($(),x("p",Ef,A(e.$t("tips.marketprice")),1)):j("",!0)])])):j("",!0)]),h("div",Rf,[ue(u,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[10]||(t[10]=w=>e.toCoinAmount=w),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"","import-page":"deposit","has-arrow":!1,onOnMax:t[11]||(t[11]=w=>e.maxBtnSelect("toCoin")),onOnInput:t[12]||(t[12]=w=>{e.toCoinAmount=w,e.fixedFromCoin=!1}),onOnSelect:t[13]||(t[13]=w=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon"]),e.showToCoinLock?($(),x("div",Lf,[h("div",null,[e.storeIndex.theme=="default"?($(),x("img",Ff)):($(),x("img",Bf)),e.fromCoin&&e.toCoin?($(),x("p",Uf,A(e.$t("tips.marketprice")),1)):j("",!0)])])):j("",!0)]),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme=="default"?($(),x("img",{key:0,class:"add",src:lf,alt:"",onClick:t[14]||(t[14]=(...w)=>e.toggle&&e.toggle(...w))})):j("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme!=="default"?($(),x("img",{key:1,class:"add",src:uf,alt:"",onClick:t[15]||(t[15]=(...w)=>e.toggle&&e.toggle(...w))})):j("",!0)]),e.poolInfo?($(),x("div",Of,[h("div",qf,[Ie(A(e.$t("newAdd.depositRatio"))+" ",1),ue(c,{placement:"bottom","arrow-point-at-center":""},{title:ye(()=>[h("span",null,A(e.$t("newAdd.depositRatioTips")),1)]),default:ye(()=>[Df]),_:1})]),h("div",Xf,A(e.fromCoinRatio!=="--"?e.fromCoinRatio+"%":"--")+" "+A(e.fromCoinRatio!=="--"?e.fromCoin&&e.fromCoin.symbol:"")+" / "+A(e.toCoinRatio!=="--"?e.toCoinRatio+"%":"--")+" "+A(e.toCoinRatio!=="--"?e.toCoin&&e.toCoin.symbol:""),1)])):j("",!0)]),ue(f,{disabled:e.wallet.connected?!e.fromCoinAmount&&!e.toCoinAmount||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||Number(e.toCoinAmount)>Number(e.toCoinBlance)||e.addLiquidityBtnText!==e.$t("button.addLiquidity")||e.poolInfo.is_pause:!1,class:"big-btn",onClick:t[16]||(t[16]=w=>e.wallet.connected?e.isShowLiquidityModal=!0:e.wallet.setIsShowWalletModal(!0))},{default:ye(()=>[Vf,h("span",null,A(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),h("div",zf,[ue(d)])]),h("div",Hf,[h("div",Kf,[Ie(A(e.$t("newAdd.selectRange"))+" ",1),ue(c,{placement:"bottom","arrow-point-at-center":""},{title:ye(()=>[h("span",null,A(e.$t("newAdd.selectRangeTips")),1)]),default:ye(()=>[Yf]),_:1})]),h("div",{class:Me(e.clickClear||!e.fromCoin||!e.toCoin||!e.poolInfo?"content-right-bg content-right-bg-height":"content-right-bg")},[e.poolInfo?($(),x("div",Wf,[($(!0),x(kt,null,Vt(e.currentPriceTabList,w=>($(),x("div",{key:w,class:Me(["price-item",{"price-item-active":w.key==e.currentPriceTab,"price-stable":e.poolInfo.type=="stable"}]),onClick:O=>e.priceTab(w)},[ue(c,{placement:"bottom","arrow-point-at-center":""},{title:ye(()=>[h("span",null,A(e.getPirceText(w.key)),1)]),default:ye(()=>[Ie(" "+A(e.getPirceKey(w.key)),1)]),_:2},1024)],10,Gf))),128))])):j("",!0),e.poolInfo?($(),x("div",Qf,[e.fromCoin&&e.toCoin&&e.direct?($(),x("div",Jf,[h("span",null,A(e.$t("common.currentPrice")),1),Ie(" "+A(e.addCommom(e.currentPrice))+" "+A((E=e.toCoin)==null?void 0:E.symbol)+" per "+A((y=e.fromCoin)==null?void 0:y.symbol),1)])):e.fromCoin&&e.toCoin&&!e.direct?($(),x("div",jf,[h("span",null,A(e.$t("common.currentPrice")),1),Ie(" "+A(e.addCommom(e.currentPriceReverse))+" "+A((S=e.toCoin)==null?void 0:S.symbol)+" per "+A((F=e.fromCoin)==null?void 0:F.symbol),1)])):j("",!0),e.fromCoin&&e.toCoin?($(),x("div",Zf,[h("div",{class:Me(e.direct?"item active-item":"item"),onClick:t[17]||(t[17]=w=>e.direct?"":e.toggle())},[h("img",{src:e.direct?e.fromCoin.logoURI:e.toCoin.logoURI,alt:""},null,8,ed),Ie(" "+A(e.direct?(C=e.fromCoin)==null?void 0:C.symbol:(W=e.toCoin)==null?void 0:W.symbol),1)],2),h("div",{class:Me(e.direct?"item ":"item active-item"),onClick:t[18]||(t[18]=w=>e.direct?e.toggle():"")},[h("img",{src:e.direct?e.toCoin.logoURI:e.fromCoin.logoURI,alt:""},null,8,td),Ie(" "+A(e.direct?(L=e.toCoin)==null?void 0:L.symbol:(M=e.fromCoin)==null?void 0:M.symbol),1)],2)])):j("",!0)])):j("",!0),e.poolInfo?($(),He(p,{key:2,min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direct,"invalid-price-range":e.invalidPriceRange,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax,onOnChangeFullRange:e.toFullRange},null,8,["min","max","from-coin","to-coin","direct","invalid-price-range","default-min-price","default-max-price","pool-info","loading","current-price-tab","onOnChangeMinPrice","onOnChangeMaxPrice","onOnChangeFullRange"])):j("",!0),e.positionTips&&!e.clickClear&&e.poolInfo?($(),x("div",nd,[h("img",{src:e.importIcon("/image/icon-tips@2x.png"),alt:""},null,8,id),h("p",rd,A(e.$t("tips.positionTips")),1)])):j("",!0),e.positionError&&!e.clickClear&&e.poolInfo?($(),x("div",od,[h("img",{src:e.importIcon("/image/icon-tips-error@2x.png"),alt:""},null,8,ad),h("p",sd,A(e.$t("tips.positionError")),1)])):j("",!0),h("div",ld,[(e.clickClear||!e.poolInfo)&&!e.chartLoading?($(),x("div",ud,[e.storeIndex.theme=="default"?($(),x("img",cd)):($(),x("img",fd)),h("p",null,A(e.$t("newAdd.positionAppear")),1)])):j("",!0),e.fromCoin&&e.toCoin&&e.poolInfo?($(),He(P,{key:1,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direct,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","onOnChangeMinPrice","onOnChangeMaxPrice"])):j("",!0),e.currentPriceTab!=="Custom"?($(),x("div",dd)):j("",!0),e.chartLoading?($(),He(b,{key:3})):j("",!0)])],2),e.poolInfo?($(),x("div",hd,[e.apr&&e.liquidityTvl&&e.vol24?($(),x(kt,{key:0},[h("div",{class:Me(e.label?"pool-info-border pool-info-title":"pool-info-title")},[Ie(A(e.$t("newAdd.poolInfo"))+" ",1),($(),x("svg",{class:Me(e.label?"show-icon icon":"icon"),onClick:t[19]||(t[19]=w=>e.reviseValue()),"aria-hidden":"true"},pd,2))],2),e.label?($(),x("div",vd,[h("div",gd,[h("div",yd,A(e.$t("common.apr")),1),h("div",wd,[Ie(A(e.rewardApr)+" ",1),h("div",bd,[h("div",kd,[h("div",_d,A(e.rewarderArr&&e.rewarderArr.length>0?e.$t("tips.aprTips"):e.$t("tips.aprTipsTest")),1),e.rewarderArr&&e.rewarderArr.length>0?($(),x("div",Cd,[h("div",null,[h("p",null,A(e.$t("common.fees")),1),h("p",null,A(e.apr),1)]),($(!0),x(kt,null,Vt(e.rewarderArr,(w,O)=>($(),x("div",{key:O},[h("p",null,A(w.symbol)+" Rewards",1),h("p",null,A(w.rewarderApr),1)]))),128))])):j("",!0)])])])]),h("div",Ad,[h("div",Sd,A(e.$t("common.liquidity")),1),h("div",Id,"$ "+A(e.liquidityTvl),1)]),h("div",Md,[h("div",$d,A(e.$t("common.volume24h")),1),h("div",Pd,"$ "+A(e.vol24),1)]),h("div",Nd,[h("div",Td,A(e.$t("newAdd.tickSpacing")),1),h("div",xd,A(e.poolInfo&&e.poolInfo.tick_spacing),1)])])):j("",!0),e.label&&e.rewarderInfo&&e.rewarderInfo.length>0?($(),x("div",Ed,[Ie(" Rewards "),h("div",Rd,[($(!0),x(kt,null,Vt(e.rewarderInfo,w=>($(),x("div",{class:"rewards-list",key:w},[Ld,h("img",{src:w.logoUrl,alt:""},null,8,Fd),h("div",Bd,[h("p",null,A(w.day)+" "+A(w.symbol),1),h("span",null,"($"+A(w.dayUSD)+") / Day",1)])]))),128))])])):j("",!0)],64)):($(),He(b,{key:1}))])):j("",!0)])]),ue(f,{disabled:e.wallet.connected?!e.fromCoinAmount&&!e.toCoinAmount||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||Number(e.toCoinAmount)>Number(e.toCoinBlance)||e.poolInfo.is_pause:!1,class:"big-btn h5-btn",onClick:t[20]||(t[20]=w=>e.wallet.connected?e.isShowLiquidityModal=!0:e.wallet.setIsShowWalletModal(!0))},{default:ye(()=>[Ud,h("span",null,A(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),e.showCoinSelect?($(),He(m,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:t[21]||(t[21]=w=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):j("",!0),e.isShowSwapSetting?($(),He(k,{key:1,onOnClose:t[22]||(t[22]=w=>e.isShowSwapSetting=!1)})):j("",!0),e.isShowLiquidityModal?($(),He(I,{key:2,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"min-price":e.minPrice,"max-price":e.maxPrice,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"pool-info":e.poolInfo,onToAdd:e.toAdd,onOnClose:t[23]||(t[23]=w=>e.isShowLiquidityModal=!1)},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","min-price","max-price","current-price","current-price-reverse","pool-info","onToAdd"])):j("",!0),e.isViewDetail?($(),He(v,{key:3,onOnClose:t[24]||(t[24]=w=>e.isViewDetail=!1)})):j("",!0)])}const Zd=gt(sf,[["render",Od],["__scopeId","data-v-60bd229c"]]);export{Zd as default};
