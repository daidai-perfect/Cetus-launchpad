import{b as es,s as Is,a as q,u as _s,d as hs,c as K}from"./sha256.91c60824.js";import{a as ts,l as v,r as I,e as ns,o as t,f as n,h as o,i as u,v as g,u as R,S as Fs,p as is,k as ds,j as N,F as U,E as ss,M as Vs,b as ps,s as Rs,w as J,t as F,B as vs,y as Bs,z as rs,A as os,x as M,P as Es,H as us,q as x,K as Ws,Q as Hs,c as zs}from"./entry.a6654d09.js";/* empty css              */import{_ as Os}from"./auto-pool-apy-tips.e77f0674.js";import"./index.43c7dce9.js";import{u as Js}from"./farms.0602fe26.js";import{_ as Ks}from"./upgrade-loading.0a5a88f9.js";import{_ as Ns}from"./token-warning.792e98a7.js";import{u as gs}from"./pool.58e56ed3.js";import{i as as}from"./import-icon.de3e6c66.js";import{u as cs}from"./autoPool.4b886bcb.js";import{_ as js}from"./img-connect-wallet_2x.a172a4d4.js";/* empty css              */import{_ as Qs}from"./img-no-Positions_2x.6abca492.js";import"./decimal.0bdeb344.js";/* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";const Gs=ts({props:{list:{type:Array,default:()=>[]},listLoading:{type:Boolean,default:!1},totalTVL:{type:Number,default:0}},setup(s){const l=es(),$=v(()=>l),m=I(!1);return{wallet:$,sFixD:Is,loading:m,addCommom:q}}});const ms=s=>(is("data-v-77985698"),s=s(),ds(),s),Xs={class:"farms-banner-bg"},Zs={class:"vaults-banner"},xs={class:"vaults-banner-center"},so=ms(()=>o("div",{class:"title"},"Vaults",-1)),oo=ms(()=>o("div",{class:"desc"},"Automate your liquidity to enjoy high yield with ease.",-1)),eo={class:"claim-rewards"},to={class:"claim-title"},no=ms(()=>o("span",null,"Total Value Locked",-1)),lo={key:0,class:"loading-spin"},ao={key:1};function io(s,l,$,m,f,y){const h=Fs;return t(),n("div",Xs,[o("div",Zs,[o("div",xs,[so,oo,o("div",eo,[o("div",to,[no,s.listLoading?(t(),n("span",lo,[u(h)])):(t(),n("span",ao,"$"+g(("addCommom"in s?s.addCommom:R(q))(("sFixD"in s?s.sFixD:R(Is))(s.totalTVL||0,2))),1))])])])])])}const co=ns(Gs,[["render",io],["__scopeId","data-v-77985698"]]),ro=ts({setup(){const s=I(!1),l=es(),$=v(()=>l),m=Js(),f=v(()=>m),y=v(()=>f.value.farmsPoolList);return{isShowMore:s,wallet:$,walletStore:l,farmsPoolList:y}}});const G=s=>(is("data-v-6e4541ed"),s=s(),ds(),s),uo={class:"vaults-table"},_o=G(()=>o("th",null,"Vaults",-1)),ho=G(()=>o("th",null,"TVL",-1)),po=G(()=>o("th",null,"Rewards",-1)),vo=G(()=>o("th",null,"Your Holdings",-1)),go=G(()=>o("th",null,"Actions",-1)),mo=G(()=>o("tr",{style:{height:"4px",background:"unset"}},null,-1)),ko={class:"pool"},yo={class:"staked-tvl"},bo={class:"apr"},$o={class:"my-staked"},fo={class:"my-staked"},wo={class:"actions"},So=G(()=>o("tr",{style:{height:"8px",background:"unset !important"}},null,-1));function Lo(s,l,$,m,f,y){const h=Os,i=Vs;return t(),n("div",uo,[o("table",null,[o("thead",null,[o("tr",null,[_o,ho,o("th",null,[o("span",null,[N("APY "),u(h)])]),po,vo,go]),mo]),o("tbody",null,[(t(),n(U,null,ss(4,(w,B)=>(t(),n(U,{key:B},[o("tr",null,[o("td",null,[o("div",ko,[u(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1}),u(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),o("td",null,[o("div",yo,[u(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),o("td",null,[o("div",bo,[o("span",null,[u(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])]),o("td",null,[o("div",$o,[u(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),o("td",null,[o("div",fo,[u(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),o("td",null,[o("div",wo,[u(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])]),So],64))),64))])])])}const Co=ns(ro,[["render",Lo],["__scopeId","data-v-6e4541ed"]]),Ao=ts({props:{pItem:{type:Object,default:()=>({})}},setup(s){const l=_s(),$=v(()=>l),m=gs(),f=v(()=>m),y=d=>{var c;return(d==null?void 0:d.logoURI)||(d==null?void 0:d.logo_url)||((c=f.value.tokensObj[d==null?void 0:d.address])==null?void 0:c.logo_url)||($.value.theme==="default"?as("/image/coins/unknown.png"):as("/image/coins/sui-unknown.png"))},h=I(!0),i=cs(),w=v(()=>i),B=v(()=>w.value.positionInfoObj[s.pItem.id]),A=ps(),L=(d,c)=>{A.push(`/vaults-detail/${d.id}?action=${c}`)},p=d=>{const c=d.needReverse,V=c?d.token_b.address:d.token_a.address,D=c?d.token_a.address:d.token_b.address;A.push(`/swap?from=${V}&to=${D}`)},e=es(),b=v(()=>e);return{getCoinIcon:y,direct:h,decimalUi:hs,addCommom:q,autoPool:w,positionInfo:B,toAutoPoolDetail:L,toSwap:p,wallet:b}}});const X=s=>(is("data-v-6213bbd1"),s=s(),ds(),s),Po={class:"vaults-position-card"},Io={class:"auto-position-card-conetent"},Vo={key:0,class:"no-vaults-data no-data"},Ro=X(()=>o("img",{src:js},null,-1)),Bo={class:"item lp-tokens"},Oo={alt:""},No={class:"right"},jo=X(()=>o("div",{class:"top"},"Your LP tokens",-1)),To={class:"bottom"},Do={key:0,class:"lp-num"},qo={key:1,class:"lp-num"},Uo={class:"item yourBanlance"},Mo=X(()=>o("div",{class:"top"},"Pooled assets",-1)),Yo={class:"bottom"},Fo={class:"token-info"},Eo={class:"token-num"},Wo={alt:""},Ho={key:0},zo={key:1},Jo=X(()=>o("p",null,"--",-1)),Ko=[Jo],Qo={class:"token-num"},Go={alt:""},Xo={key:0},Zo={key:1},xo=X(()=>o("p",null,"--",-1)),se=[xo],oe={class:"item share"},ee=X(()=>o("div",{class:"top"},"Share of pool",-1)),te={class:"bottom"},ne={key:0},le={key:1},ae=X(()=>o("div",{class:"action"},[o("div",null,[o("div",{class:"remove-btn"}," Details> ")])],-1));function ie(s,l,$,m,f,y){var w,B,A,L,p,e,b,d,c,V;const h=vs,i=Rs("image");return t(),n("div",Po,[o("div",Io,[s.wallet.address?(t(),n("div",{key:1,class:"auto-position-card",onClick:l[1]||(l[1]=D=>s.toAutoPoolDetail(s.pItem,"deposit"))},[o("div",Bo,[F(o("img",Oo,null,512),[[i,(B=(w=s.positionInfo)==null?void 0:w.lpInfo)==null?void 0:B.logo_url]]),o("div",No,[jo,o("div",To,[(A=s.wallet)!=null&&A.connected?(t(),n("div",Do,g(("addCommom"in s?s.addCommom:R(q))(("decimalUi"in s?s.decimalUi:R(hs))((L=s.positionInfo)==null?void 0:L.myLiquidity),4))+" LP",1)):(t(),n("div",qo,"--"))])])]),o("div",Uo,[Mo,o("div",Yo,[o("div",Fo,[o("div",Eo,[F(o("img",Wo,null,512),[[i,s.pItem.needReverse?s.pItem.coinB.logo_url:s.pItem.coinA.logo_url]]),(p=s.wallet)!=null&&p.connected?(t(),n("div",Ho,[o("span",null,g(("addCommom"in s?s.addCommom:R(q))((e=s.positionInfo)==null?void 0:e.amountA)),1),N(" "+g(s.pItem.needReverse?s.pItem.coinB.symbol:s.pItem.coinA.symbol)+" ",1)])):(t(),n("div",zo,Ko))]),o("div",Qo,[F(o("img",Go,null,512),[[i,s.pItem.needReverse?s.pItem.coinA.logo_url:s.pItem.coinB.logo_url]]),(b=s.wallet)!=null&&b.connected?(t(),n("div",Xo,[o("span",null,g(("addCommom"in s?s.addCommom:R(q))((d=s.positionInfo)==null?void 0:d.amountB)),1),N(" "+g(s.pItem.needReverse?s.pItem.coinA.symbol:s.pItem.coinB.symbol)+" ",1)])):(t(),n("div",Zo,se))])])])]),o("div",oe,[ee,o("div",te,[(c=s.wallet)!=null&&c.connected?(t(),n("span",ne,g((V=s.positionInfo)==null?void 0:V.myShare)+"%",1)):(t(),n("span",le,"--%"))])]),ae])):(t(),n("div",Vo,[Ro,u(h,{class:"add-liquidity-btn",onClick:l[0]||(l[0]=D=>s.wallet.setIsShowWalletModal(!0))},{default:J(()=>[N("Connect Wallet")]),_:1})]))])])}const de=ns(Ao,[["render",ie],["__scopeId","data-v-6213bbd1"]]),ce=ts({components:{TokenWarning:Ns},props:{list:{type:Array,default:()=>[]}},setup(){const{t:s}=Bs(),l=_s(),$=v(()=>l),m=gs(),f=v(()=>m),y=a=>{var O;return(a==null?void 0:a.logoURI)||(a==null?void 0:a.logo_url)||((O=f.value.tokensObj[a==null?void 0:a.address])==null?void 0:O.logo_url)||($.value.theme==="default"?as("/image/coins/unknown.png"):as("/image/coins/sui-unknown.png"))},h=v(()=>f.value.tokensObj),i=v(()=>$.value.statsData),w=v(()=>$.value.theme),B=cs(),A=v(()=>B),L=I({}),p=a=>{L.value[a]?L.value[a]=!1:L.value[a]=!0},e=v(()=>A.value.positionInfoObj),b=es(),d=v(()=>b),c=I(!1),V=ps(),D=(a,O)=>{V.push(`/vaults-detail/${a.id}?action=${O}`)},j=a=>{const O=a.needReverse,E=O?a.token_b.address:a.token_a.address,W=O?a.token_a.address:a.token_b.address;V.push(`/swap?from=${E}&to=${W}`)},T=I(!0);return{router:V,getCoinIcon:y,tokensObj:h,t:s,statsData:i,checkNullObj:K,addCommom:q,importIcon:as,theme:w,isShowPosition:L,togglePosition:p,positionInfo:e,wallet:d,isShowDetail:c,toAutoPoolDetail:D,toSwap:j,direct:T}}});const C=s=>(is("data-v-271702cf"),s=s(),ds(),s),re={class:"vaults-table-contianer"},ue={class:"table pc-pool-item"},_e={class:"table-header"},he={class:"table-tr"},pe=C(()=>o("th",null,"Vaults",-1)),ve=C(()=>o("th",null,"TVL",-1)),ge={class:"apy"},me=C(()=>o("span",null,"APY",-1)),ke=C(()=>o("svg",{"aria-hidden":"true",class:"icon"},[o("use",{"xlink:href":"#icon-icon-tips1"})],-1)),ye=C(()=>o("th",null,"Rewards",-1)),be=C(()=>o("th",null,"Your Holdings",-1)),$e=C(()=>o("th",null,"Actions",-1)),fe=C(()=>o("tr",{style:{height:"4px",background:"unset"}},null,-1)),we={class:"table-body"},Se=["onClick"],Le={class:"token"},Ce={class:"img-box"},Ae={class:"img-box img-last-box"},Pe={class:"name"},Ie={class:"top"},Ve={class:"token-name"},Re={class:"tokena"},Be={class:"tokenb"},Oe={class:"fee-warning"},Ne={class:"fee-tier-top"},je={key:0},Te={class:"skeleton-box"},De={key:1},qe={key:2},Ue={class:"skeleton-box"},Me={key:3},Ye={class:"rewards-coin"},Fe={key:4},Ee={class:"skeleton-box"},We={key:5},He={class:"show-position"},ze={class:"svg-icon"},Je=C(()=>o("use",{"xlink:href":"#icon-icon_on"},null,-1)),Ke=[Je],Qe={key:0,class:"table-tr view-table-tr"},Ge={colspan:"6"},Xe=C(()=>o("td",null,null,-1)),Ze=C(()=>o("tr",{style:{height:"8px",background:"unset"}},null,-1)),xe={class:"h5-pool-item"},st={class:"token"},ot={class:"img-box"},et={key:0,class:"pool-warning"},tt={class:"img-box img-last-box"},nt={key:0,class:"pool-warning"},lt={class:"name"},at={class:"top"},it={class:"token-name"},dt={class:"tokena"},ct={class:"tokenb"},rt={class:"fee-warning"},ut={class:"fee-tier-top"},_t={class:"bottom"},ht={class:"row"},pt=C(()=>o("div",{class:"left"},"TVL",-1)),vt={key:0,class:"right"},gt={key:1,class:"right"},mt={class:"row"},kt=C(()=>o("div",{class:"left"},"APY",-1)),yt={key:0,class:"right"},bt={key:1,class:"right theme-right"},$t={class:"row"},ft=C(()=>o("div",{class:"left"},"Rewards",-1)),wt={class:"right"},St={class:"rewards-coin"},Lt={class:"row"},Ct=C(()=>o("div",{class:"left"},"Your Holdings",-1)),At={key:0,class:"right"},Pt={key:1,class:"right"},It=["onClick"],Vt=C(()=>o("use",{"xlink:href":"#icon-icon_on"},null,-1)),Rt=[Vt],Bt={key:0,class:"h5-auto-pool-details"},Ot={class:"h5-item lp-tokens"},Nt=C(()=>o("div",{class:"top"},"Your LP tokens",-1)),jt={class:"bottom"},Tt={key:0,class:"lp-num"},Dt={key:1,class:"lp-num"},qt={class:"h5-item share"},Ut=C(()=>o("div",{class:"top"},"Share",-1)),Mt={class:"bottom"},Yt={key:0},Ft={key:1},Et={class:"h5-item yourBanlance"},Wt=C(()=>o("div",{class:"top"},"Pooled assets",-1)),Ht={class:"bottom"},zt={class:"token-info"},Jt={class:"token-num"},Kt={alt:""},Qt={key:0},Gt={key:1},Xt=C(()=>o("p",null,"--",-1)),Zt=[Xt],xt={class:"token-num"},sn={alt:""},on={key:0},en={key:1},tn=C(()=>o("p",null,"--",-1)),nn=[tn],ln={class:"action"},an=["onClick"];function dn(s,l,$,m,f,y){const h=Os,i=Ns,w=Vs,B=Es,A=vs,L=de,p=Rs("image");return t(),n("div",re,[o("table",ue,[o("thead",_e,[o("tr",he,[pe,ve,o("th",null,[o("div",ge,[me,ke,u(h)])]),ye,be,$e]),fe]),o("tbody",we,[(t(!0),n(U,null,ss(s.list,(e,b)=>{var d,c,V,D,j,T,a,O,E,W,Q;return t(),n(U,{key:b},[o("tr",{class:"table-tr",onClick:Y=>s.togglePosition(b)},[o("td",null,[o("div",Le,[o("div",Ce,[F(o("img",null,null,512),[[p,s.getCoinIcon(e.needReverse?e.coinB:e.coinA)]]),u(i,{address:e.needReverse?(c=e==null?void 0:e.coinB)==null?void 0:c.address:(d=e==null?void 0:e.coinA)==null?void 0:d.address,"style-params":{right:0,bottom:0,width:"14px",height:"14px"}},null,8,["address"])]),o("div",Ae,[F(o("img",null,null,512),[[p,s.getCoinIcon(e.needReverse?e.coinA:e.coinB)]]),u(i,{address:e.needReverse?(D=e.coinA)==null?void 0:D.address:(V=e==null?void 0:e.coinB)==null?void 0:V.address,"style-params":{right:0,bottom:0,width:"14px",height:"14px"}},null,8,["address"])]),o("div",Pe,[o("div",Ie,[o("p",Ve,[o("span",Re,g(e.needReverse?(T=e==null?void 0:e.coinB)==null?void 0:T.symbol:(j=e==null?void 0:e.coinA)==null?void 0:j.symbol),1),N(" - "),o("span",Be,g(e.needReverse?(a=e==null?void 0:e.coinA)==null?void 0:a.symbol:(O=e==null?void 0:e.coinB)==null?void 0:O.symbol),1)]),o("div",Oe,[o("div",Ne,g((e==null?void 0:e.fee)*100)+"%",1)])])])])]),("checkNullObj"in s?s.checkNullObj:R(K))(s.statsData)?(t(),n("td",je,[o("div",Te,[u(w,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])])):(t(),n("td",De," $"+g(Number(e.poolUSD)!==0&&Number(e.poolUSD)<.01?"<0.01":("addCommom"in s?s.addCommom:R(q))(e.poolUSD,2)),1)),("checkNullObj"in s?s.checkNullObj:R(K))(s.statsData)?(t(),n("td",qe,[o("div",Ue,[u(w,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])])):(t(),n("td",Me,g(e.apy),1)),o("td",null,[u(B,{"overlay-class-name":"reward-coin-tips"},{title:J(()=>[N("Rewards will be auto harvested and compounded to your position.")]),default:J(()=>[o("div",Ye,[(t(!0),n(U,null,ss(e.rewardList,Y=>(t(),n("div",{key:Y,class:"img-box"},[F(o("img",null,null,512),[[p,s.getCoinIcon({address:Y})]]),u(i,{address:Y,"style-params":{right:0,bottom:0,width:"8px",height:"8px"}},null,8,["address"])]))),128))])]),_:2},1024)]),(E=s.wallet)!=null&&E.connected&&!s.positionInfo[e.id].myLiquidityUSD?(t(),n("td",Fe,[o("div",Ee,[u(w,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])])):(t(),n("td",We,[s.wallet.connected?(t(),n(U,{key:0},[N(g(((W=s.positionInfo[e.id])==null?void 0:W.myLiquidityUSD)!=="<0.01"?`$${("addCommom"in s?s.addCommom:R(q))((Q=s.positionInfo[e.id])==null?void 0:Q.myLiquidityUSD)}`:"<$0.01"),1)],64)):(t(),n(U,{key:1},[N("--")],64))])),o("td",null,[o("div",He,[u(A,{class:"add-liquidity-btn",onClick:rs(Y=>s.router.push(`/vaults-detail/${e.id}?action=deposit`),["stop"])},{default:J(()=>[N("Deposit")]),_:2},1032,["onClick"]),o("div",ze,[(t(),n("svg",{"aria-hidden":"true",class:os(["icon",s.isShowPosition&&s.isShowPosition[b]?"icon-open":""])},Ke,2))])])])],8,Se),s.isShowPosition&&s.isShowPosition[b]?(t(),n("tr",Qe,[o("td",Ge,[u(L,{"p-item":e},null,8,["p-item"])]),Xe])):M("",!0),Ze],64)}),128))])]),o("div",xe,[(t(!0),n(U,null,ss(s.list,(e,b)=>{var d,c,V,D,j,T,a,O,E,W,Q,Y;return t(),n("div",{key:e.address,class:"item"},[o("div",st,[o("div",ot,[F(o("img",null,null,512),[[p,s.getCoinIcon(e.needReverse?e.coinB:e.coinA)]]),(e.needReverse?(c=s.tokensObj[e.coinB.address])!=null&&c.isSelfBuilt:(d=s.tokensObj[e.coinA.address])!=null&&d.isSelfBuilt)?(t(),n("div",et)):M("",!0)]),o("div",tt,[F(o("img",null,null,512),[[p,s.getCoinIcon(e.needReverse?e.coinA:e.coinB)]]),(e.needReverse?(V=s.tokensObj[e.coinA.address])!=null&&V.isSelfBuilt:(D=s.tokensObj[e.coinB.address])!=null&&D.isSelfBuilt)?(t(),n("div",nt)):M("",!0)]),o("div",lt,[o("div",at,[o("p",it,[o("span",dt,g(e.needReverse?e.coinB.symbol:e.coinA.symbol),1),N(" - "),o("span",ct,g(e.needReverse?e.coinA.symbol:e.coinB.symbol),1)]),o("div",rt,[o("div",ut,g((e==null?void 0:e.fee)*100)+"%",1)])])])]),o("div",_t,[o("div",ht,[pt,("checkNullObj"in s?s.checkNullObj:R(K))(s.statsData)?(t(),n("div",vt,[u(w,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])):(t(),n("div",gt," $"+g(Number(e.poolUSD)!==0&&Number(e.poolUSD)<.01?"<0.01":("addCommom"in s?s.addCommom:R(q))(e.poolUSD,2)),1))]),o("div",mt,[kt,("checkNullObj"in s?s.checkNullObj:R(K))(s.statsData)?(t(),n("div",yt,[u(w,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])):(t(),n("div",bt,[o("span",null,g(e.apy),1),u(h)]))]),o("div",$t,[ft,o("div",wt,[u(B,{"overlay-class-name":"reward-coin-tips"},{title:J(()=>[N("Rewards will be auto harvested and compounded to your position.")]),default:J(()=>[o("div",St,[(t(!0),n(U,null,ss(e.rewardList,H=>(t(),n("div",{key:H,class:"img-box"},[F(o("img",null,null,512),[[p,s.getCoinIcon({address:H})]]),u(i,{address:H,"style-params":{right:0,bottom:0,width:"8px",height:"8px"}},null,8,["address"])]))),128))])]),_:2},1024)])]),o("div",Lt,[Ct,("checkNullObj"in s?s.checkNullObj:R(K))(s.positionInfo)&&((j=s.wallet)!=null&&j.connected)?(t(),n("div",At,[u(w,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])):(t(),n("div",Pt,[(T=s.wallet)!=null&&T.connected?(t(),n(U,{key:0},[N(g(((a=s.positionInfo[e.id])==null?void 0:a.myLiquidityUSD)!=="<0.01"?`$${("addCommom"in s?s.addCommom:R(q))((O=s.positionInfo[e.id])==null?void 0:O.myLiquidityUSD)}`:"<$0.01"),1)],64)):(t(),n(U,{key:1},[N("--")],64))]))])]),u(A,{class:"h5-add-liquidity-btn",onClick:rs(H=>s.router.push(`/vaults-detail/${e.id}?action=deposit`),["stop"])},{default:J(()=>[N("Deposit")]),_:2},1032,["onClick"]),o("div",{class:os(["details-btn",s.isShowPosition&&s.isShowPosition[b]?"details-btn-text-active":""]),onClick:H=>s.togglePosition(b)},[(t(),n("svg",{"aria-hidden":"true",class:os(["icon",s.isShowPosition&&s.isShowPosition[b]?"icon-active":""])},Rt,2))],10,It),s.isShowPosition&&s.isShowPosition[b]?(t(),n("div",Bt,[o("div",Ot,[Nt,o("div",jt,[(E=s.wallet)!=null&&E.connected?(t(),n("div",Tt,g(("addCommom"in s?s.addCommom:R(q))(("decimalUi"in s?s.decimalUi:R(hs))(e==null?void 0:e.myLiquidity,4)))+" LP",1)):(t(),n("div",Dt,"--"))])]),o("div",qt,[Ut,o("div",Mt,[(W=s.wallet)!=null&&W.connected?(t(),n("span",Yt,g(e==null?void 0:e.myShare)+"%",1)):(t(),n("span",Ft,"--%"))])]),o("div",Et,[Wt,o("div",Ht,[o("div",zt,[o("div",Jt,[F(o("img",Kt,null,512),[[p,e.needReverse?e.coinB.logo_url:e.coinA.logo_url]]),(Q=s.wallet)!=null&&Q.connected?(t(),n("div",Qt,[o("span",null,g(("addCommom"in s?s.addCommom:R(q))(e==null?void 0:e.amountA))+" "+g(e.needReverse?e.coinB.symbol:e.coinA.symbol),1)])):(t(),n("div",Gt,Zt))]),o("div",xt,[F(o("img",sn,null,512),[[p,e.needReverse?e.coinA.logo_url:e.coinB.logo_url]]),(Y=s.wallet)!=null&&Y.connected?(t(),n("div",on,[o("span",null,g(("addCommom"in s?s.addCommom:R(q))(e==null?void 0:e.amountB))+" "+g(e.needReverse?e.coinA.symbol:e.coinB.symbol),1)])):(t(),n("div",en,nn))])])])]),o("div",ln,[o("div",null,[o("div",{class:"remove-btn",onClick:H=>s.toAutoPoolDetail(e,"remove")},"Details",8,an)])])])):M("",!0)])}),128))])])}const cn=ns(ce,[["render",dn],["__scopeId","data-v-271702cf"]]),rn=ts({props:{selectValue:{type:String,default:""},showList:{type:Object,default:()=>({})}},setup(s,l){const $=["All Vaults","My Vaults"],m=I("All Vaults"),f=I(s.selectValue),y=I(!1),h=I(!1),i=es(),w=v(()=>i),B=cs(),A=v(()=>B),L=v(()=>A.value.autoPoolList),p=()=>s.showList.length,e=()=>{l.emit("clickRefresh")},b=c=>{f.value=c,l.emit("changeSort",c)},d=c=>{m.value=c,c=="My Vaults"?l.emit("changeTab",!0):l.emit("changeTab",!1)};return us(()=>{document.addEventListener("click",()=>{h.value=!1})}),{isOpenList:h,wallet:w,changeSort:b,tabList:$,currentTab:m,sortValue:f,clickRefresh:e,isRefresh:y,vaultsPoolList:L,getListNum:p,changeTab:d}}});const ls=s=>(is("data-v-7a5b0d7d"),s=s(),ds(),s),un={class:"vaults-tab"},_n={class:"tab-left"},hn=["onClick"],pn={key:0},vn={class:"tab-right"},gn={class:"sort-select"},mn=ls(()=>o("div",null,"Sort by",-1)),kn={class:"showSort"},yn=ls(()=>o("svg",{class:"sort-icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),bn=ls(()=>o("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),$n=[bn],fn={key:0,class:"sort-list"},wn=ls(()=>o("svg",{class:"sort-icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),Sn=ls(()=>o("svg",{class:"sort-icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),Ln={class:"refresh"},Cn=ls(()=>o("use",{"xlink:href":"#icon-icon-refresh2"},null,-1)),An=[Cn];function Pn(s,l,$,m,f,y){return t(),n("div",un,[o("div",_n,[(t(!0),n(U,null,ss(s.tabList,h=>(t(),n("div",{key:h,class:os(["tab-item",s.currentTab==h?"tab-item-active":""]),onClick:i=>s.changeTab(h)},[o("span",null,g(h),1),s.currentTab==h&&s.getListNum()?(t(),n("p",pn,g(s.currentTab=="My Vaults"&&!s.wallet.address?0:s.getListNum()),1)):M("",!0)],10,hn))),128))]),o("div",vn,[o("div",gn,[o("div",{class:"sort-select-box",onClick:l[0]||(l[0]=rs(h=>s.isOpenList=!s.isOpenList,["stop"]))},[mn,o("div",kn,[o("span",null,g(s.sortValue),1),yn,(t(),n("svg",{class:os(["arrow-icon",s.isOpenList?"arrow-icon-active":""]),"aria-hidden":"true"},$n,2))])]),s.isOpenList?(t(),n("div",fn,[o("div",{class:"sort-item",onClick:l[1]||(l[1]=h=>s.changeSort("APY"))},[N(" APY "),wn]),o("div",{class:"sort-item",onClick:l[2]||(l[2]=h=>s.changeSort("TVL"))},[N(" TVL "),Sn])])):M("",!0)]),o("div",Ln,[(t(),n("svg",{"aria-hidden":"true",class:os(["refresh-icon",s.isRefresh?"refreshing":""]),onClick:l[3]||(l[3]=(...h)=>s.clickRefresh&&s.clickRefresh(...h))},An,2))])])])}const In=ns(rn,[["render",Pn],["__scopeId","data-v-7a5b0d7d"]]),Vn=ts({components:{VaultsTabs:In},setup(){Bs();const s=_s(),l=v(()=>s),$=gs(),m=v(()=>$),f=cs(),y=v(()=>f),h=es(),i=v(()=>h),w=v(()=>y.value.positionInfoObj),B=v(()=>l.value.chainName),A=I(!1),L=I(!1),p=I("TVL"),e=I(["APY"]),b=I(!1),d=r=>{console.log(r,"w121");const P=[];P.push(p.value),e.value.forEach((S,_)=>{S!=r&&P.push(S)}),e.value=P,p.value=r,D(y.value.positionInfoList)};us(()=>{document.addEventListener("click",()=>{Y("")})});const c=I([]),V=I(!0),D=r=>{console.log(r,p.value,"##poolListselectValue.valueselectValue.value");const P=[];r.filter(_=>!_.is_pause).forEach(_=>{var ks,ys,bs,$s,fs,ws,Ss,Ls,Cs,As,Ps;const k=l.value.addressLpTokens[_.address],z=m.value.poolsObj[_.address];console.log(y.value.apyObj,"##autoPool.value.apyObj");const Z=((ks=y.value.apyObj[_.id])==null?void 0:ks.apr)||"0%",Ds=((ys=y.value.apyObj[_.id])==null?void 0:ys.resultApr)||"0",qs=((bs=y.value.apyObj[_.id])==null?void 0:bs.tvl)||0;console.log(_.autoPoolPositionInfo.id,"###watchPools 246"),console.log(k,"##statsObj");const Us=_.needReverse?((Ss=m.value.tokensObj[(ws=_.coinB)==null?void 0:ws.address])==null?void 0:Ss.labels)||[]:((fs=m.value.tokensObj[($s=_.coinA)==null?void 0:$s.address])==null?void 0:fs.labels)||[],Ms=_.needReverse?((Cs=m.value.tokensObj[(Ls=_.coinA)==null?void 0:Ls.address])==null?void 0:Cs.labels)||[]:((Ps=m.value.tokensObj[(As=_.coinB)==null?void 0:As.address])==null?void 0:Ps.labels)||[],Ys=[...new Set(Us.concat(Ms))];P.push({..._,liqidity:qs,vol:k?k.vol_in_usd_24h:"0",fee:_.fee?_.fee:z!=null&&z.fee?z.fee:"--",labels:Ys,isFarming:_==null?void 0:_.isFarming,fee_24_h:k&&k.fee_24_h,apy:Z,resultApr:Ds})});let S=[];p.value=="APY"?(console.log(p.value,"selectValue.valueselectValue.value"),S=P.sort((_,k)=>Number(k.resultApr)-Number(_.resultApr))):S=P.sort((_,k)=>Number(k.liqidity)-Number(_.liqidity)),c.value=S,console.log(c.value.length,"##list.value.length"),$.setAutoPoolNum(c.value.length),V.value=!1,console.log(c.value,"##list.value")};x(()=>[y.value.positionInfoList,y.value.apyObj,m.value.poolConfigObj],([r,P,S])=>{console.log("执行次数###",S),r&&r.length>0&&S&&!K(S)&&(console.log(r,"###autoPoolList"),D(r))},{immediate:!0,deep:!0}),x(()=>[i.value.address,y.value.autoPoolList,m.value.poolConfigObj],([r,P,S])=>{r&&P&&P.length>0&&S&&!K(S)&&f.getMyAutoPoolPosition()},{immediate:!0});const j=I(null),T=v(()=>j.value&&j.value.firstToken?j.value.firstToken:null),a=v(()=>j.value&&j.value.lastToken?j.value.lastToken:null),O=I(),E=I(0),W=()=>{let r=[];r=c.value,console.log(r,"##pageList"),E.value=r.reduce((k,z)=>Number(k)+Number(z.poolUSD),0);const P=r.filter((k,z)=>T.value&&a.value?k.coinA.address==T.value.address&&k.coinB.address==a.value.address||k.coinA.address==a.value.address&&k.coinB.address==T.value.address:T.value?k.coinA.address.toLowerCase().includes(T.value.address.toLowerCase())||k.coinB.address.toLowerCase().includes(T.value.address.toLowerCase()):a.value?k.coinA.address.toLowerCase().includes(a.value.address.toLowerCase())||k.coinB.address.toLowerCase().includes(a.value.address.toLowerCase()):r);let S=[],_=[];console.log(P,"##filterArr"),P.forEach((k,z)=>{console.log(k,"irem##");const Z=w.value&&w.value[k.id];console.log(Z,"##positionInfo"),A.value&&Number(Z==null?void 0:Z.myLiquidity)>0&&i.value.connected?_.push(k):S.push({...k})}),console.log(S,"121arrnewValnewValnewVal"),O.value=A.value&&i.value.connected?_:S,console.log(O.value,"##showList.value "),V.value||(A.value&&i.value.connected?$.setAutoPoolNum(_.length):$.setAutoPoolNum(S.length))};x(()=>[T.value,a.value,c.value,A.value,i.value.address],([r,P,S,_])=>{(r||P||S||_)&&(console.log("newValnewValnewVal",r,P,S,JSON.stringify(S)),W())},{immediate:!0}),Ws(()=>{$.setAutoPoolNum("--")});const Q=v(()=>m.value.autoPoolNum),Y=r=>{r=="label"?(s.setIsSelect("pools"),b.value=!b.value,L.value=!1,l.value.setIsShowMore(!1)):r=="select"?(s.setIsSelect("pools"),L.value=!L.value,b.value=!1,l.value.setIsShowMore(!1)):(L.value=!1,b.value=!1)};x(()=>l.value.isSelect,r=>{r!=="pools"&&Y("")},{immediate:!0});const H=ps(),Ts=()=>{V.value=!0,f.getAutoPoolList(),f.getAutoPoolAPY()};return x(()=>B.value,r=>{r=="Aptos"&&H.push("/pools")},{immediate:!0}),x(()=>[m.value.poolConfigList,y.value.autoPoolList],([r,P])=>{r&&r.length>0&&P&&P.length==0&&f.getAutoPoolList()},{immediate:!0}),us(()=>{f.getAutoPoolAPY()}),{totalTVL:E,clickRefresh:Ts,isMyLiquidity:A,chainName:B,store:l,select:L,selectValue:p,selectList:e,label:b,changeSort:d,list:c,listLoading:V,showList:O,childTokenSelectRef:j,wallet:i,autoPoolNum:Q}}});const Rn={class:"vaults-container-new"},Bn={class:"vaults-container-center"},On={class:"auto-pool"},Nn={key:0,class:"no-vaults-data no-data"},jn=o("img",{src:js},null,-1),Tn={key:0,class:"upgrade-loading pc-loading"},Dn={key:1,class:"upgrade-loading h5-loading"},qn={key:3,class:"no-vaults-data"},Un=o("img",{src:Qs},null,-1),Mn=o("span",{class:"no-vaults"},"No vaults found",-1),Yn=[Un,Mn];function Fn(s,l,$,m,f,y){const h=co,i=Hs("VaultsTabs"),w=vs,B=Co,A=Ks,L=cn;return t(),n("div",Rn,[u(h,{list:s.showList,"total-t-v-l":s.totalTVL,"list-loading":s.listLoading},null,8,["list","total-t-v-l","list-loading"]),o("div",Bn,[u(i,{"select-value":s.selectValue,"show-list":s.showList,onChangeSort:l[0]||(l[0]=p=>s.changeSort(p)),onChangeTab:l[1]||(l[1]=p=>{s.isMyLiquidity=p}),onClickRefresh:s.clickRefresh},null,8,["select-value","show-list","onClickRefresh"]),o("div",On,[s.isMyLiquidity&&!s.wallet.address?(t(),n("div",Nn,[jn,u(w,{class:"add-liquidity-btn",onClick:l[2]||(l[2]=p=>s.wallet.setIsShowWalletModal(!0))},{default:J(()=>[N("Connect Wallet")]),_:1})])):M("",!0),s.isMyLiquidity&&s.wallet.address&&s.listLoading||!s.isMyLiquidity&&s.listLoading?(t(),n(U,{key:1},[s.listLoading?(t(),n("div",Tn,[u(B)])):M("",!0),s.listLoading?(t(),n("div",Dn,[u(A,{type:"poolsCard",loading:!0,source:"vaults"})])):M("",!0)],64)):M("",!0),s.isMyLiquidity&&s.wallet.address&&!s.listLoading||!s.isMyLiquidity&&!s.listLoading?(t(),zs(L,{key:2,list:s.showList},null,8,["list"])):M("",!0),s.autoPoolNum!=="--"&&Number(s.autoPoolNum)<=0&&!s.listLoading?(t(),n("div",qn,Yn)):M("",!0)])])])}const al=ns(Vn,[["render",Fn]]);export{al as default};
