import{e as Ge,b as Z,d as ve,c as re,h as Te,Z as po,s as Ie,u as Ke,g as we,q as fo,i as Ee,k as He}from"./index.c6fdb803.js";import{a as le,r as U,e as ue,M as oe,o as c,f as I,h as t,c as K,x as W,j as me,v as M,p as fe,k as he,a6 as Uo,m as o,D as ae,y as no,w as se,L as Ye,i as Y,F as De,s as qe,z as pe,S as Je,u as te,K as jo,Y as Eo,B as to,C as Do,W as qo,l as Xe,a5 as Wo,I as Vo,H as zo,a2 as Ho,b as ho,a8 as Go}from"./entry.dfb1419f.js";import"./index.54d3fe8f.js";import{a as Ce,q as go,u as Re,b as wo,p as So,j as Co}from"./pool.fa6455ae.js";import{C as Ze}from"./coin-img.267f702c.js";import{u as ko}from"./useToken.31209323.js";import{u as bo,R as Ko,e as Yo,c as je,A as Jo,a as Xo,_ as Zo,b as Qo,d as xo}from"./confetti.module.238e4bf5.js";import{D as N}from"./decimal.0bdeb344.js";/* empty css              */import{_ as en}from"./refresh-icon.d17e8c14.js";import{_ as on}from"./swap-setting.2208d21f.js";/* empty css              */import{_ as nn}from"./coin-select.c51f304f.js";import{_ as tn}from"./token-warning-modal.99e2cefe.js";/* empty css              */import{T as _o}from"./token-warning-new.3bf6add7.js";import{u as sn}from"./useDebounceFunction.f0cfbae1.js";import{u as so}from"./token.1f44e042.js";import{i as an}from"./install.951ec643.js";import{_ as rn}from"./limit-beta.fd794229.js";import"./fetchFun.5b245557.js";/* empty css              */import"./icon-error_2x.ffca2391.js";import"./import-icon.de3e6c66.js";/* empty css              */import"./token-warning_2x.9d939222.js";import"./img-no-Positions_2x.eb9fd6a8.js";import"./img-no-Positions_2x.ad9e0c75.js";import"./icon-selected_3x.09e9a6f0.js";const ln=le({components:{CoinImg:Ze},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},oneToAmount:{type:String,default:()=>""},oneFromAmount:{type:String,default:()=>""}},setup(e){return{rateChange:U(!1)}}});const yo=e=>(fe("data-v-bf80ed04"),e=e(),he(),e),un={class:"swap-rate"},cn={key:0},dn={class:"after-amount"},mn={key:1},pn={class:"after-amount"},vn=yo(()=>t("svg",{class:"icon icon-up","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-exchange_up1"})],-1)),fn=yo(()=>t("svg",{class:"icon icon-down","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-exchange_down1"})],-1)),hn=[vn,fn];function gn(e,n,m,a,d,w){var l,r,i,S,h,u,y,C,_,T,P,A;const s=oe("CoinImg");return c(),I("div",un,[e.rateChange?(c(),I("span",mn,[t("span",pn,[(y=e.toCoin)!=null&&y.address?(c(),K(s,{key:0,url:(C=e.toCoin)==null?void 0:C.logoURI,size:"16px"},null,8,["url"])):W("",!0),me(" 1 "+M((_=e.toCoin)==null?void 0:_.symbol)+" â‰ˆ "+M(e.oneFromAmount==1/0?0:e.oneFromAmount)+" "+M((T=e.fromCoin)==null?void 0:T.symbol)+"Â  ",1),(P=e.fromCoin)!=null&&P.address?(c(),K(s,{key:1,url:(A=e.fromCoin)==null?void 0:A.logoURI,size:"16px"},null,8,["url"])):W("",!0)])])):(c(),I("span",cn,[t("span",dn,[(l=e.fromCoin)!=null&&l.address?(c(),K(s,{key:0,url:(r=e.fromCoin)==null?void 0:r.logoURI,size:"16px"},null,8,["url"])):W("",!0),me("Â 1 "+M((i=e.fromCoin)==null?void 0:i.symbol)+" â‰ˆ "+M(e.oneToAmount==1/0?0:e.oneToAmount)+" "+M((S=e.toCoin)==null?void 0:S.symbol)+"Â  ",1),(h=e.toCoin)!=null&&h.address?(c(),K(s,{key:1,url:(u=e.toCoin)==null?void 0:u.logoURI,size:"16px"},null,8,["url"])):W("",!0)])])),t("div",{class:"right",onClick:n[0]||(n[0]=E=>e.rateChange=!e.rateChange)},hn)])}const ao=ue(ln,[["render",gn],["__scopeId","data-v-bf80ed04"]]),de=Uo("useSuiSwapStore",{state:()=>({fromCoin:{},toCoin:{},fromCoinAmount:"",toCoinAmount:"",fixedFromCoin:!0,oneFromAmount:"",oneToAmount:"",minimumReceived:"",maximumSold:"",isSwapping:!1,swapPoolInfo:{},suiPreSwapData:{},swapRouterLoading:!1,notFoundRouter:!1,isRouterProgress:!1,refresh:!0,routerPool:[],routerSwap:[],insufficientLiquidity:!1,countdown:0,isSwapConfirmModal:!1,plusChecked:localStorage.getItem("plusChecked")||"close"}),actions:{setFromCoin(e){this.fromCoin=e},setFromCoinAmount(e){console.log("ðŸš€ ~ setFromCoinAmount ~ data:",e),this.fromCoinAmount=e},setToCoin(e){this.toCoin=e},setToCoinAmount(e){this.toCoinAmount=e},setFixedFromCoin(e){this.fixedFromCoin=e},setPlusChecked(e){this.plusChecked=e},setOneFromAmount(e){this.oneFromAmount=e},setOneToAmount(e){this.oneToAmount=e},setIsSwapping(e){this.isSwapping=e},setSwapPoolInfo(e){this.swapPoolInfo=e},setSuiPreSwapData(e){this.suiPreSwapData=e},setSwapRouterLoading(e){this.swapRouterLoading=e},setNotFoundRouter(e){this.notFoundRouter=e},setIsRouterProgress(e){this.isRouterProgress=e},setRouterPool(e){this.routerPool=e},setRouterSwap(e){this.routerSwap=e},setInsufficientLiquidity(e){this.insufficientLiquidity=e},setCountdown(e){this.countdown=e},setRefresh(e){this.refresh=e},setIsSwapConfirmModal(e){this.isSwapConfirmModal=e},setMinimumReceived(e){this.minimumReceived=e},setMaximumSold(e){this.maximumSold=e}}});function oo(e,n=500){let m=null;return function(...a){clearTimeout(m),m=setTimeout(()=>{e.call(this,...a)},n)}}function $o(){const e=Ce(),n=o(()=>e);console.log(1313);const m=de(),a=o(()=>m),{setIsRouterProgress:d,setInsufficientLiquidity:w,setIsSwapping:s,setOneFromAmount:l,setOneToAmount:r,setSwapRouterLoading:i,setNotFoundRouter:S,setSuiPreSwapData:h,setRouterPool:u,setFromCoinAmount:y,setToCoinAmount:C,setCountdown:_,setMinimumReceived:T,setMaximumSold:P}=m,A=o(()=>a.value.swapPoolInfo),E=o(()=>a.value.fromCoin),g=o(()=>a.value.toCoin),p=o(()=>a.value.fromCoinAmount),b=o(()=>a.value.toCoinAmount),k=o(()=>a.value.fixedFromCoin),O=o(()=>a.value.isRouterProgress),f=o(()=>a.value.routerSwap),B=o(()=>n.value.slippage),D=o(()=>bo()),L=U(0),q=async v=>{var $,F;if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1954 ~ getSuiAmount ~ getSuiAmount:"),d(!0),w(!1),E.value&&g.value&&(Number(p.value)>0&&k.value||Number(b.value)>0&&!k.value)){console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1954 ~ getSuiAmount ~ getSuiAmount:1"),(!p.value&&b.value||p.value&&!b.value)&&s(!0),l(""),r(""),i(!0),S(!1);let j;A.value&&(j=E.value.address===A.value.coinA.address&&g.value.address===A.value.coinB.address?0:1);try{let R;if(k.value){const Se=new N(p.value).mul(Math.pow(10,E.value.decimals)).toString();R=new Ge(Se)}else{const Se=new N(b.value).mul(Math.pow(10,g.value.decimals)).toString();R=new Ge(Se)}const V=Number(B.value)/100,J=A.value?{poolAddresses:f.value,coinTypeA:A.value.coin_a_address,coinTypeB:A.value.coin_b_address,decimalsA:A.value.coinA.decimals,decimalsB:A.value.coinB.decimals,a2b:j==0,byAmountIn:k.value,amount:R.toString()}:"";console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ fromCoin:",E),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ toCoin:",g),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ coinAmount:",R),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ fixedFromCoin.value:",k.value);const H=L.value+1;L.value=H;const z=await(($=D==null?void 0:D.value)==null?void 0:$.getFindRouter(E,g,R.toString(),k.value,V,A.value?J:"",H));if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ swapRouter:",z),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1827 ~ setup ~ swapRouter JSON:",JSON.stringify(z,null,2)),L.value!==(z==null?void 0:z.id)){i(!1),d(!1),s(!1),h({}),u([]),k.value?C(""):y("");return}if(z!=null&&z.insufficientLiquidity){w(!0),i(!1),d(!1),s(!1),h({}),u([]),k.value?C(""):y("");return}if(!z||!(z!=null&&z.routes)||((F=z==null?void 0:z.routes)==null?void 0:F.length)==0){s(!1),S(!0),i(!1),d(!1),h({}),u([]),p.value?C(""):y("");return}if(z.fromCoinAddress!==E.value.address||z.toCoinAddress!==g.value.address){console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1861 ~ getSuiAmount ~",z.fromCoinAddress!==E.value.address||z.toCoinAddress!==g.value.address),h({}),u([]);return}if(z){if(h(z),u(z.routes),w(!1),k.value){if(p.value){const $e=new N(z.amountOut).div(new N(Math.pow(10,g.value.decimals))).toString();C($e)}}else if(b.value){const $e=new N(z.amountIn).div(new N(Math.pow(10,E.value.decimals))).toString();y($e)}console.log(b.value,"###toCoinAmount.value");const Se=Z(ve(new N(p.value).div(new N(b.value).toString()),E.value.decimals));l(Se);const ke=Z(ve(new N(b.value).div(p.value).toString(),g.value.decimals));r(ke),s(!1),S(!1),i(!1)}else s(!1),S(!0),i(!1)}catch(R){console.log("pre swap error2",R),s(!1),i(!1),d(!1)}}else k.value?C(""):y(""),s(!1),i(!1);d(!1),console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1926 ~ getSuiAmount ~ isRouterProgress.value:",O.value)};return ae(p,(v,$)=>{console.log("ðŸš€ ~ newVal123131:",v),v&&Number(v)!==0&&k.value&&(_(0),oo(q(),800)),v==""&&k.value&&C("")}),ae(b,(v,$)=>{v&&Number(v)!==0&&!k.value&&(_(0),oo(q(),800)),v==""&&!k.value&&y("")}),ae(()=>[E.value,g.value],([v,$])=>{!re(v)&&!re($)&&(_(0),oo(q(k.value?p.value:b.value)))},{immediate:!0,deep:!0}),ae(()=>[p.value,b.value,E.value,g.value,k.value,B.value],([v,$,F,j,R,V])=>{if(v&&$&&F&&j&&V)if(R){const J=new N($).mul(new N(V/100));T(new N($).sub(J).toString())}else{const J=new N(v).mul(new N(V/100));P(new N(v).add(J).toString())}},{immediate:!0}),{getSuiAmount:q}}function wn(){const e=de(),{getToken:n}=ko(),{getSuiAmount:m}=$o(),{setCountdown:a}=e,d=U(0),w=U([]),s=o(()=>e),l=o(()=>s.value.fixedFromCoin),r=o(()=>s.value.fromCoinAmount),i=o(()=>s.value.toCoinAmount),S=o(()=>s.value.fromCoin),h=o(()=>s.value.toCoin),u=o(()=>s.value.suiPreSwapData),y=Ce(),C=U(!1),_=go(),T=o(()=>_),P=o(()=>y.isShowRouterModal),A=o(()=>T.value.isInitRouter);no(()=>{window.addEventListener("updateSwapParams",p=>{C.value=!C.value})});const E=U(""),g=async p=>{var b,k,O,f,B,D;if(((b=p==null?void 0:p.routes)==null?void 0:b.length)===1)if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap-info.vue:462 ~ getOnlyOneRouteText ~ suiPreSwapData?.routes:",p==null?void 0:p.routes),((f=(O=(k=p==null?void 0:p.routes)==null?void 0:k[0])==null?void 0:O.path)==null?void 0:f.length)>1){const L=[S==null?void 0:S.value.symbol],q=(D=(B=p==null?void 0:p.routes)==null?void 0:B[0])==null?void 0:D.path;for(let v=0;v<q.length;v++){const $=q[v];console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap-info.vue:467 ~ getOnlyOneRouteText ~ path[i]:",q[v]);const F=await n($==null?void 0:$.target);L.push(F==null?void 0:F.symbol)}E.value=L==null?void 0:L.join(" > ")}else E.value=`${S==null?void 0:S.value.symbol} > ${h==null?void 0:h.value.symbol}`};return ae(()=>u.value,async p=>{var b;if(p&&!re(p)){const k=[];(b=p==null?void 0:p.routes)==null||b.forEach(O=>{O==null||O.path.forEach(async f=>{k.push(f.provider)})}),w.value=Array.from(new Set(k)),d.value=w.value.length,g(p)}},{immediate:!0}),ae(()=>C.value,p=>{(Number(r.value)>0||Number(i.value)>0)&&m(l.value?r.value:i.value)},{immediate:!0}),ae(()=>A.value,p=>{p||(a(0),m(l.value?r.value:i.value))},{immediate:!0}),{onlyOneRouteText:E,sourcesArr:w,refreshSwapRouter:C,isShowRouterModal:P}}const Qe=e=>(fe("data-v-26ab6b7a"),e=e(),he(),e),Sn={class:"price-impact-tips"},Cn=Qe(()=>t("div",{class:"text"}," The difference between the market price and estimated price due to trade size. ",-1)),kn={class:"market-price-rate"},bn=Qe(()=>t("div",null,"Market Price Rate",-1)),_n={key:0},yn={key:1,class:"price-unknown"},$n={key:0,class:"market-price-sources"},In=Qe(()=>t("span",null,"Market price sources:",-1)),An=Qe(()=>t("svg",{class:"icon tips-icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-icon_tips"})],-1)),Tn=le({__name:"swap-price-impact-tooltip",props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},marketPriceSource:{type:Object,default:()=>({})},marketPriceA2B:{type:Object,default:()=>({})},marketPriceA2BReverse:{type:Object,default:()=>({})},impact:{type:String,defualt:"",requires:!0}},setup(e){return(n,m)=>{const a=Ye;return c(),K(a,{"overlay-class-name":"price-impact-tooltip","open(v-model)":!0},{title:se(()=>[t("div",Sn,[Cn,t("div",kn,[bn,e.impact!=="Incalculable"?(c(),I("div",_n,[Y(ao,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"one-to-amount":e.marketPriceA2B,"one-from-amount":e.marketPriceA2BReverse},null,8,["from-coin","to-coin","one-to-amount","one-from-amount"])])):(c(),I("div",yn,"Price is unknown"))]),e.marketPriceSource&&e.marketPriceSource.length>0&&e.impact!=="Incalculable"?(c(),I("div",$n,[In,(c(!0),I(De,null,qe(e.marketPriceSource,d=>(c(),I("span",{key:d==null?void 0:d.name},M(d==null?void 0:d.name),1))),128))])):W("",!0)])]),default:se(()=>[An]),_:1})}}});const Rn=ue(Tn,[["__scopeId","data-v-26ab6b7a"]]);function Io(){const e=Re(),n=o(()=>e),m=U([]),a=U(),d=U(),w=_=>{switch(_){case"pyth":return{name:"Pyth Network",logo:"/image/logo_pyth.png"};case"coingecko":return{name:"CoinGecko",logo:"/image/logo_CoinGecko@2x.png"};case"birdeye":return{name:"Birdeye",logo:"/image/birdeye-logo.png"};case"Cetus":return{name:"Cetus",logo:"/sui-image/logo_cetus@2x.png"}}},s=de(),l=o(()=>s),r=o(()=>l.value.fromCoin),i=o(()=>l.value.toCoin),S=o(()=>l.value.fromCoin),h=o(()=>l.value.toCoin),u=o(()=>l.value.suiPreSwapData),y=o(()=>{var _,T,P,A,E,g,p,b,k,O,f,B,D,L;try{if((_=r==null?void 0:r.value)!=null&&_.address&&((T=i==null?void 0:i.value)!=null&&T.address)&&(u!=null&&u.value)&&!re(u==null?void 0:u.value)){const q=Te((P=u==null?void 0:u.value)==null?void 0:P.amountIn).div(Math.pow(10,(A=r.value)==null?void 0:A.decimals)),v=Te((E=u==null?void 0:u.value)==null?void 0:E.amountOut).div(Math.pow(10,(g=i.value)==null?void 0:g.decimals)),$=Te(v).div(q);console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ currentSwapRate:",$==null?void 0:$.toString());const F=(k=(p=n==null?void 0:n.value)==null?void 0:p.RATES)==null?void 0:k[(b=r==null?void 0:r.value)==null?void 0:b.address];console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ fromCoinRate:",F);const j=(B=(O=n==null?void 0:n.value)==null?void 0:O.RATES)==null?void 0:B[(f=i==null?void 0:i.value)==null?void 0:f.address];if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ toCoinRate:",j),!(F!=null&&F.price)||!(j!=null&&j.price)||Te(F==null?void 0:F.price).lte(0)||Te(j==null?void 0:j.price).lte(0))throw Error("rate invalid");const R=Te(F==null?void 0:F.price).div(j==null?void 0:j.price);if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2259 ~ suiPriceImpact ~ marketRate:",R==null?void 0:R.toString()),$.gt(R)){const V=$.minus(R).div($).mul(100);return po((D=V==null?void 0:V.negated())==null?void 0:D.toString(),2)}else{const V=$.minus(R).div($).mul(100);return po((L=V==null?void 0:V.abs())==null?void 0:L.toString(),2)}}return}catch(q){return console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:2271 ~ suiPriceImpact ~ error:",q),"Incalculable"}}),C=_=>{var g,p,b,k;const T=((g=_[r==null?void 0:r.value.address])==null?void 0:g.price)||0,P=((p=_[i==null?void 0:i.value.address])==null?void 0:p.price)||0,A=(b=_[r==null?void 0:r.value.address])==null?void 0:b.market,E=(k=_[i==null?void 0:i.value.address])==null?void 0:k.market;a.value=ve(new N(T).div(new N(P)).toString(),i==null?void 0:i.value.decimals),d.value=ve(new N(P).div(new N(T)).toString(),r==null?void 0:r.value.decimals),m.value=A==E?[w(A)]:[w(A),w(E)],console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap-info.vue:725 ~ getTokenMarketPrice ~ marketPriceA2B.value:",a.value,d.value,m.value)};return ae(()=>[n.value.RATES,S.value,h.value,r.value,i.value],([_])=>{_&&!re(_)&&C(_)},{immediate:!0}),{getTokenMarketPrice:C,marketPriceSource:m,marketPriceA2B:a,marketPriceA2BReverse:d,suiPriceImpact:y}}const Pn=le({components:{PriceImpactTooltip:Rn},setup(){const{suiPriceImpact:e,marketPriceSource:n,marketPriceA2B:m,marketPriceA2BReverse:a}=Io(),d=de(),w=o(()=>d),s=o(()=>w.value.fromCoin),l=o(()=>w.value.toCoin),r=o(()=>w.value.swapRouterLoading),i=o(()=>{var S;return Number(e.value)>0&&Number(e.value)<.01?"<0.01":Number(e.value)>100?">100":Number(e.value)>0?`-${e.value}`:`+${(S=e.value)==null?void 0:S.replace("-","")}`});return{marketPriceA2B:m,marketPriceA2BReverse:a,showImpact:i,impact:e,marketPriceSource:n,fromCoin:s,toCoin:l,swapRouterLoading:r}}});const Fn=e=>(fe("data-v-a9619c4b"),e=e(),he(),e),Mn={class:"swap-show-info-impact"},Nn={class:"label"},Bn=Fn(()=>t("span",null,"Price Impact",-1)),On={key:0,class:"text impact-w"},Ln=["src"];function Un(e,n,m,a,d,w){const s=oe("PriceImpactTooltip"),l=Je;return c(),I("div",Mn,[t("div",Nn,[Bn,Y(s,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"market-price-source":e.marketPriceSource,"market-price-a2-b":e.marketPriceA2B,"market-price-a2-b-reverse":e.marketPriceA2BReverse,impact:e.impact},null,8,["from-coin","to-coin","market-price-source","market-price-a2-b","market-price-a2-b-reverse","impact"])]),!e.swapRouterLoading&&e.impact==="Incalculable"?(c(),I("div",On,M(e.impact),1)):e.swapRouterLoading?(c(),K(l,{key:2,paragraph:!1,active:""})):(c(),I("div",{key:1,class:pe(["text",e.impact<10?"impact-s":e.impact<30&&e.impact>=10?"impact-w":"impact-e"])},[me(M(e.showImpact)+"% ",1),(c(!0),I(De,null,qe(e.marketPriceSource,r=>(c(),I("img",{key:r,src:r==null?void 0:r.logo},null,8,Ln))),128))],2))])}const Ao=ue(Pn,[["render",Un],["__scopeId","data-v-a9619c4b"]]),jn=le({components:{CurrentPrice:ao,RouterModal:Ko,ShowInfoImpact:Ao},setup(){const e=U(!1),{sourcesArr:n,onlyOneRouteText:m}=wn(),a=Ce(),d=o(()=>a),w=de(),s=o(()=>w),l=o(()=>s.value.fromCoin),r=o(()=>s.value.toCoin),i=o(()=>s.value.fromCoinAmount),S=o(()=>s.value.toCoinAmount),h=o(()=>s.value.oneToAmount),u=o(()=>s.value.oneFromAmount),y=o(()=>s.value.fixedFromCoin),C=o(()=>s.value.swapRouterLoading),_=o(()=>s.value.insufficientLiquidity),T=o(()=>s.value.suiPreSwapData),P=o(()=>d.value.isShowRouterModal),A=o(()=>s.value.minimumReceived),E=o(()=>s.value.maximumSold),g=o(()=>d.value.liquiditySourceObj);return{store:a,onlyOneRouteText:m,liquiditySourceObj:g,sourcesArr:n,minimumReceived:A,maximumSold:E,toCoinAmount:S,fromCoinAmount:i,suiPreSwapData:T,isShowRouterModal:P,indexStore:d,insufficientLiquidity:_,fixedFromCoin:y,isOpen:e,fromCoin:l,toCoin:r,oneToAmount:h,oneFromAmount:u,swapRouterLoading:C}}});const io=e=>(fe("data-v-65c993d3"),e=e(),he(),e),En={key:0,class:"show-info"},Dn={class:"price-box"},qn={class:"price"},Wn=io(()=>t("use",{"xlink:href":"#icon-icon_on"},null,-1)),Vn=[Wn],zn={key:0,class:"impact"},Hn={class:"trade-block"},Gn={class:"label"},Kn={key:0,class:"text"},Yn={key:0,class:"trade-block"},Jn=io(()=>t("div",{class:"label"},"Auto Router",-1)),Xn={key:0,class:"text text-box"},Zn=["src","alt"],Qn={key:1,class:"text text-box"},xn=["src","alt"],et=io(()=>t("svg",{class:"icon route-icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-icon_expand"})],-1));function ot(e,n,m,a,d,w){var S,h;const s=oe("CurrentPrice"),l=oe("ShowInfoImpact"),r=Je,i=oe("RouterModal");return e.fromCoin&&e.toCoin&&e.fromCoinAmount&&e.toCoinAmount?(c(),I("div",En,[t("div",Dn,[t("div",qn,[Y(s,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"one-to-amount":e.oneToAmount,"one-from-amount":e.oneFromAmount},null,8,["from-coin","to-coin","one-to-amount","one-from-amount"]),(c(),I("svg",{"aria-hidden":"true",class:pe(["dropdown-icon",{open:e.isOpen}]),onClick:n[0]||(n[0]=u=>e.isOpen=!e.isOpen)},Vn,2))]),e.isOpen?(c(),I("div",zn,[Y(l)])):W("",!0)]),t("div",Hn,[t("div",Gn,M(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swapRouterLoading?(c(),K(r,{key:1,paragraph:!1,active:""})):(c(),I("div",Kn,M(e.fixedFromCoin?("addCommom"in e?e.addCommom:te(Z))(("sFixD"in e?e.sFixD:te(Ie))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:te(Z))(("sFixD"in e?e.sFixD:te(Ie))(e.maximumSold,e.fromCoin.decimals)))+" "+M(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),e.insufficientLiquidity?W("",!0):(c(),I("div",Yn,[Jn,e.swapRouterLoading?(c(),K(r,{key:1,paragraph:!1,active:""})):(c(),I("div",{key:0,class:"text text-bg",onClick:n[1]||(n[1]=jo(u=>e.store.setIsShowRouterModal(!e.isShowRouterModal),["stop"]))},[!e.swapRouterLoading&&e.suiPreSwapData&&e.suiPreSwapData.routes&&e.suiPreSwapData.routes.length==1?(c(),I("div",Xn,[t("span",null,M(e.onlyOneRouteText),1),(c(!0),I(De,null,qe(e.sourcesArr,u=>{var y,C;return c(),I("img",{key:u,src:(C=(y=e.liquiditySourceObj)==null?void 0:y[u])==null?void 0:C.logo,alt:u},null,8,Zn)}),128))])):e.swapRouterLoading?W("",!0):(c(),I("div",Qn,[me(M((h=(S=e.suiPreSwapData)==null?void 0:S.routes)==null?void 0:h.length)+" Streams ",1),(c(!0),I(De,null,qe(e.sourcesArr,u=>{var y,C;return c(),I("img",{key:u,src:(C=(y=e.liquiditySourceObj)==null?void 0:y[u])==null?void 0:C.logo,alt:u},null,8,xn)}),128))])),et]))])),e.isShowRouterModal?(c(),K(i,{key:1,"sui-pre-swapdata":e.suiPreSwapData,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,onOnClose:n[2]||(n[2]=u=>e.store.setIsShowRouterModal(!1))},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount"])):W("",!0)])):W("",!0)}const To=ue(jn,[["render",ot],["__scopeId","data-v-65c993d3"]]),nt=le({components:{Modal:Eo,CoinImg:Ze,CurrentPrice:ao,ShowInfoImpact:Ao},props:{isShowAccept:{type:Boolean,default:!1}},setup(e,n){const m=Re(),a=o(()=>m),d=Ce(),w=o(()=>d),s=U(!1),l=o(()=>w.value.chainName),r=async()=>{n.emit("to-swap")},i=U(0),{suiPriceImpact:S}=Io(),h=de(),u=o(()=>h),y=o(()=>w.value.slippage),C=o(()=>u.value.minimumReceived),_=o(()=>u.value.maximumSold),T=o(()=>u.value.fromCoin),P=o(()=>u.value.toCoin),A=o(()=>u.value.fromCoinAmount),E=o(()=>u.value.toCoinAmount),g=o(()=>u.value.oneFromAmount),p=o(()=>u.value.oneToAmount),b=o(()=>u.value.fixedFromCoin),k=o(()=>u.value.swapRouterLoading),O=U(""),f=o(()=>{var v,$,F,j,R,V,J,H;return($=(v=a==null?void 0:a.value)==null?void 0:v.tokensObj[T==null?void 0:T.value.address])!=null&&$.pyth_id&&((j=(F=a==null?void 0:a.value)==null?void 0:F.tokensObj[T==null?void 0:T.value.address])==null?void 0:j.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(V=(R=a==null?void 0:a.value)==null?void 0:R.tokensObj[T==null?void 0:T.value.address])!=null&&V.coingecko_id?"coingecko":(H=(J=a==null?void 0:a.value)==null?void 0:J.tokensObj[T==null?void 0:T.value.address])!=null&&H.birdeyeid?"birdeye":null}),B=o(()=>{var v,$,F,j,R,V,J,H;return($=(v=a==null?void 0:a.value)==null?void 0:v.tokensObj[P==null?void 0:P.value.address])!=null&&$.pyth_id&&((j=(F=a==null?void 0:a.value)==null?void 0:F.tokensObj[P==null?void 0:P.value.address])==null?void 0:j.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(V=(R=a==null?void 0:a.value)==null?void 0:R.tokensObj[P==null?void 0:P.value.address])!=null&&V.coingecko_id?"coingecko":(H=(J=a==null?void 0:a.value)==null?void 0:J.tokensObj[P==null?void 0:P.value.address])!=null&&H.birdeyeid?"birdeye":null}),D=async()=>{var F;const v=a.value.tokenExternalPriceObj[T==null?void 0:T.value.address],$=a.value.tokenExternalPriceObj[(F=P.value)==null?void 0:F.valaddress];if(v&&$){const j=new N(v).div(new N($)),R=new N(p.value.replace(new RegExp(/,/g),"")).sub(j).div(j).mul(100);let V=Math.abs(Ie(R,2));j.toNumber()<Number(p.value.replace(new RegExp(/,/g),""))?O.value="":O.value=R>0&&R<=.01?"0.01":V}else O.value=""},L=v=>{if(v<5)return"color-s";if(v>=5&&v<10)return"color-w";if(v>=10)return"color-e"};ae(()=>[p.value,a.value.tokenExternalPriceObj,l.value],([v,$,F])=>{v&&$&&!re($)&&D()},{immediate:!0,deep:!0});const q=U(!1);return{impact:S,fromCoin:T,toCoin:P,fromCoinAmount:A,toCoinAmount:E,oneFromAmount:g,oneToAmount:p,slippage:y,fixedFromCoin:b,swapRouterLoading:k,addCommom:Z,sFixD:Ie,rateChange:s,chainName:l,clickNextBtn:r,pathLength:i,maximumSold:_,minimumReceived:C,decimalUi:ve,getTextColor:L,priceExangeRate:O,formCoinMarket:f,toCoinMarket:B,readWithin:q}}});const Pe=e=>(fe("data-v-ad16b751"),e=e(),he(),e),tt=Pe(()=>t("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),st={class:"new-swap-contnet"},at={class:"coin-info"},it={class:"from-coin-info"},rt={class:"left"},lt={class:"coin-amount"},ut={class:"coin-symbol"},ct={class:"right"},dt={class:"to-coin-info"},mt={class:"left"},pt={class:"coin-amount"},vt={class:"coin-symbol"},ft={class:"right"},ht=Pe(()=>t("div",{class:"to-swap-logo"},null,-1)),gt={class:"coin-rate"},wt={key:0,class:"price-impact"},St=Pe(()=>t("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),Ct=[St],kt=Pe(()=>t("br",null,null,-1)),bt={class:"bottom"},_t={class:"induction"},yt={class:"item"},$t={class:"induction-text"},It={class:"induction-value"},At={class:"item"},Tt={class:"induction-text"},Rt={class:"induction-value"},Pt={class:"item"},Ft={key:0,class:"within-desc"},Mt=Pe(()=>t("div",{class:"within-top"},[t("img",{src:Yo,alt:""}),t("span",null,"The exchange rate of this order deviates from the market price by a large percentage. Are you sure you want to continue the swap?")],-1)),Nt={class:"within-bottom"},Bt={key:0,class:"price-updated"},Ot=Pe(()=>t("span",null,"Price updated",-1));function Lt(e,n,m,a,d,w){const s=oe("CoinImg"),l=oe("CurrentPrice"),r=oe("ShowInfoImpact"),i=to,S=oe("Modal");return c(),K(S,{width:"440px",visible:!0,footer:null,title:e.$t("button.swap"),class:"add-liquidity-modal",onCancel:n[4]||(n[4]=h=>e.$emit("on-close"))},{closeIcon:se(()=>[tt]),default:se(()=>{var h,u,y,C;return[t("div",st,[t("div",at,[t("div",it,[t("div",rt,[t("div",lt,M(e.fromCoinAmount&&("addCommom"in e?e.addCommom:te(Z))(e.fromCoinAmount)),1),t("div",ut,M(e.fromCoin&&e.fromCoin.symbol),1)]),t("div",ct,[(h=e.fromCoin)!=null&&h.address?(c(),K(s,{key:0,url:(u=e.fromCoin)==null?void 0:u.logoURI,size:"28px"},null,8,["url"])):W("",!0)])]),t("div",dt,[t("div",mt,[t("div",pt,M(e.toCoinAmount&&("addCommom"in e?e.addCommom:te(Z))(e.toCoinAmount)),1),t("div",vt,M(e.toCoin&&e.toCoin.symbol),1)]),t("div",ft,[(y=e.toCoin)!=null&&y.address?(c(),K(s,{key:0,url:(C=e.toCoin)==null?void 0:C.logoURI,size:"28px"},null,8,["url"])):W("",!0)]),ht]),t("div",gt,[Y(l,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"one-to-amount":e.oneToAmount,"one-from-amount":e.oneFromAmount},null,8,["from-coin","to-coin","one-to-amount","one-from-amount"]),e.impact>=10&&e.fromCoinAmount&&e.toCoinAmount&&!e.swapLoading?(c(),I("div",wt,[(c(),I("svg",{class:pe(["icon warning-icon",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""]),"ria-hidden":"true"},Ct,2)),t("span",{class:pe(["pc-impact-tips",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""])},"Price Impact Alert. Be cautious before submitting your order.",2),t("span",{class:pe(["h5-impact-tips",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""])},[me("Price Impact Alert."),kt,me(" Be cautious before submitting your order.")],2)])):W("",!0)])]),t("div",bt,[t("div",_t,[t("div",yt,[t("div",$t,M(e.$t("modal.slippageTolerance")),1),t("div",It,M(e.slippage)+"%",1)]),t("div",At,[t("div",Tt,M(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),t("div",Rt,M(e.fixedFromCoin?("addCommom"in e?e.addCommom:te(Z))(("sFixD"in e?e.sFixD:te(Ie))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:te(Z))(("sFixD"in e?e.sFixD:te(Ie))(e.maximumSold,e.fromCoin.decimals)))+" "+M(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1)]),t("div",Pt,[Y(r)])])]),e.priceExangeRate&&Number(e.priceExangeRate)>10?(c(),I("div",Ft,[Mt,t("div",Nt,[t("div",{class:pe(["within-btn",e.readWithin?"within-btn-active":""]),onClick:n[0]||(n[0]=_=>e.readWithin=!0)}," Yes, please continue. ",2),t("div",{class:"within-btn",onClick:n[1]||(n[1]=_=>e.$emit("on-close"))},"No, cancel it.")])])):W("",!0)]),e.isShowAccept?(c(),I("div",Bt,[Ot,Y(i,{class:"accept-btn",loading:e.swapLoading,onClick:n[2]||(n[2]=_=>e.$emit("accept"))},{default:se(()=>[me("Accept")]),_:1},8,["loading"])])):e.chainName=="Sui"?(c(),K(i,{key:1,class:"big-btn swap-confirm-btn",disabled:Number(e.priceExangeRate)>10&&!e.readWithin,onClick:n[3]||(n[3]=_=>e.clickNextBtn())},{default:se(()=>[me(M(e.$t("button.confirmSwap")),1)]),_:1},8,["disabled"])):W("",!0)]}),_:1},8,["title"])}const Ro=ue(nt,[["render",Lt],["__scopeId","data-v-ad16b751"]]);function Ut(){const e=de(),n=o(()=>e),m=Ke(),a=o(()=>m),d=Re(),w=o(()=>d),s=o(()=>f.chainName),{getSuiAmount:l}=$o(),{setToCoinAmount:r,setFromCoinAmount:i}=e,{setCountdown:S,setRefresh:h}=e,u=U(20),y=U(null),C=o(()=>n.value.countdown),_=o(()=>n.value.refresh),T=o(()=>n.value.isRouterProgress),P=o(()=>we&&we[s.value]&&we[s.value].hasRouter),A=o(()=>n.value.swapPoolInfo),E=o(()=>n.value.fixedFromCoin),g=o(()=>n.value.fromCoinAmount),p=o(()=>n.value.toCoinAmount),b=o(()=>n.value.isSwapConfirmModal),k=U(!1),O=o(()=>f.includeRoutes),f=Ce(),B=o(()=>f.liquiditySourceList),D=o(()=>s.value?wo(s.value):{}),L=R=>{R&&R.length>0?R.every(J=>J.name=="Cetus"?!0:J.status==="close")?e.setPlusChecked("close"):e.setPlusChecked("open"):e.setPlusChecked("close"),k.value=!1},q=R=>{e.setPlusChecked(e.plusChecked=="open"?"close":"open"),localStorage.setItem("plusChecked",e.plusChecked);const V=O.value,J=B.value;J.forEach(H=>{R?H.status="open":H.name!=="Cetus"?H.status="close":H.status="open"}),f.setAggregatorSetting(J,V)},v=()=>{const R=window.innerWidth,V=window.innerHeight,J=document.getElementById("plusModeSwitch"),H=J==null?void 0:J.getBoundingClientRect(),z=H==null?void 0:H.left,Se=H==null?void 0:H.top,ke=2,$e=je.shapeFromText({text:"ðŸŸ¢",scalar:ke}),We=je.shapeFromText({text:"ðŸ”µ",scalar:ke}),xe=je.shapeFromText({text:"ðŸ’š",scalar:ke}),be=je.shapeFromText({text:"ðŸ’™",scalar:ke});je({particleCount:40,spread:60,shapes:[$e,We,xe,be],scalar:ke,origin:{x:z/R,y:Se*1.2/V}})},$=R=>{i(""),r(""),R&&v(),q(R),setTimeout(()=>{l()},500)},F=()=>{var R,V,J;_.value||!A.value&&!P.value||(clearInterval(y.value),S(0),h(!0),T.value||l(E.value?g.value:p.value),a.value.address&&D.value.getAccount(a.value.address),setTimeout(()=>{h(!1),j()},1e3),(!((R=w==null?void 0:w.value)!=null&&R.RATES)||re((V=w==null?void 0:w.value)==null?void 0:V.RATES))&&((J=w==null?void 0:w.value)==null||J.setRates("Sui")))},j=()=>{y.value=setInterval(()=>{if(h(!1),C.value<u.value){const R=C.value+1;S(R),C.value===u.value&&(b.value||F(),S(0),h(!0))}},1e3)};return{setMarketTimer:j,clickRefresh:F,marketTimer:y,autoRefreshTime:u,isShowAggregatorModal:k,clickChecked:q,modalConfirm:L,handleSwitchPlusMode:$}}const jt=le({components:{AggregatorSettingModal:Jo},setup(){const e=Ce(),n=de(),m=o(()=>n),{isShowAggregatorModal:a,handleSwitchPlusMode:d,setMarketTimer:w,autoRefreshTime:s,clickRefresh:l,marketTimer:r}=Ut(),i=o(()=>m.value.countdown),S=o(()=>m.value.refresh),h=o(()=>e.slippage);let u=U(!1);return no(()=>{w()}),Do(()=>{clearInterval(r.value)}),{slippage:h,countdown:i,refresh:S,isShowAggregatorModal:a,handleSwitchPlusMode:d,suiSwapStore:n,clickRefresh:l,isShowSwapSetting:u,autoRefreshTime:s,marketTimer:r}}});const Fe=e=>(fe("data-v-1cdd8a36"),e=e(),he(),e),Et={class:"plus-setting-container"},Dt={class:"plus-setting"},qt=Fe(()=>t("div",{class:"price-reference-text"}," The Plus Mode will aggregate external liquidity sources ",-1)),Wt={class:pe("icon-bg plus-switch")},Vt=Fe(()=>t("p",null,[t("span",null,"Plus Mode")],-1)),zt={class:"sui-setting-box"},Ht=Fe(()=>t("div",{class:"new-style-tooltip-text"},"Swap Settings",-1)),Gt=Fe(()=>t("div",{class:"icon-bg"},[t("svg",{"aria-hidden":"true",class:"icon"},[t("use",{"xlink:href":"#icon-icon_set"})])],-1)),Kt=Fe(()=>t("div",{class:"new-style-tooltip-text"},"Slippage Settings",-1)),Yt={class:"icon-bg"},Jt=Fe(()=>t("svg",{class:"icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-icon_verticalslider"})],-1)),Xt={class:"icon-bg"};function Zt(e,n,m,a,d,w){const s=qo,l=Ye,r=en,i=on,S=oe("AggregatorSettingModal");return c(),I("div",Et,[t("div",Dt,[Y(l,{"overlay-class-name":"price-impact-tooltip"},{title:se(()=>[qt]),default:se(()=>[t("div",Wt,[Vt,Y(s,{id:"plusModeSwitch",checked:e.suiSwapStore.plusChecked=="open",onClick:n[0]||(n[0]=h=>{e.handleSwitchPlusMode(h)})},null,8,["checked"])])]),_:1}),t("div",zt,[t("div",{class:"aggregator-setting",onClick:n[1]||(n[1]=h=>e.isShowAggregatorModal=!0)},[Y(l,{"overlay-class-name":"new-style-tooltip"},{title:se(()=>[Ht]),default:se(()=>[Gt]),_:1})]),Y(l,{"overlay-class-name":"new-style-tooltip"},{title:se(()=>[Kt]),default:se(()=>[t("div",{class:"slippage-icon",onClick:n[2]||(n[2]=h=>e.isShowSwapSetting=!0)},[t("div",Yt,[Jt,t("span",null,M(e.slippage)+"%",1)])])]),_:1}),t("div",Xt,[Y(r,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])])]),e.isShowSwapSetting?(c(),K(i,{key:0,onOnClose:n[3]||(n[3]=h=>e.isShowSwapSetting=!1)})):W("",!0),e.isShowAggregatorModal?(c(),K(S,{key:1,onClose:n[4]||(n[4]=h=>e.isShowAggregatorModal=!1),onModalConfirm:n[5]||(n[5]=h=>{e.modalConfirm(h)})})):W("",!0)])}const Qt=ue(jt,[["render",Zt],["__scopeId","data-v-1cdd8a36"]]),xt=le({components:{TokenWarningNew:_o,CoinImg:Ze},props:{tokenInfo:{type:Object,default:null},hasArrow:{type:Boolean,default:!0},hasOpcity:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1}},setup(e,n){const{t:m,locale:a}=Xe(),d=o(()=>{var l,r;return((l=e.tokenInfo)==null?void 0:l.labels)&&((r=e.tokenInfo)==null?void 0:r.labels[0])||""}),w=o(()=>{var l;return(l=e.tokenInfo)==null?void 0:l.decimals});return{currentIcon:o(()=>{var l,r;return((l=e.tokenInfo)==null?void 0:l.logo_url)||((r=e.tokenInfo)==null?void 0:r.logoURI)||""}),coinLabels:d,t:m,coinDecimals:w}}});const es=e=>(fe("data-v-a1d941b3"),e=e(),he(),e),os={key:0,class:"show-token"},ns={class:"name-labels"},ts={class:"name"},ss={key:0,class:"labels"},as={key:1,class:"loading-token"},is={key:2,class:"icon","aria-hidden":"true"},rs=es(()=>t("use",{"xlink:href":"#icon-icon_on"},null,-1)),ls=[rs];function us(e,n,m,a,d,w){var S,h;const s=oe("CoinImg"),l=oe("TokenWarningNew"),r=Wo,i=Je;return c(),I("div",{class:pe(["token-dropdown-select",[e.hasArrow?"":"nohands",e.hasOpcity&&!e.isLoading?"left-opcity":""].join(" ")]),onClick:n[0]||(n[0]=u=>e.hasArrow&&!e.isLoading?e.$emit("onSelect"):"")},[e.isLoading?(c(),I("div",as,[Y(r,{size:"small",paragraph:!1}),Y(i,{loading:!0,class:"loading-token-skeleton",active:"",paragraph:!1})])):(c(),I("div",os,[(S=e.tokenInfo)!=null&&S.address?(c(),K(s,{key:0,url:e.currentIcon,size:"28px"},null,8,["url"])):W("",!0),Y(l,{token:e.tokenInfo,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["token"]),t("div",ns,[t("p",ts,M(e.tokenInfo?(h=e.tokenInfo)==null?void 0:h.symbol:e.$t("modal.selectTokenModalTitle")),1),e.coinLabels?(c(),I("p",ss,M(e.coinLabels),1)):W("",!0)])])),e.hasArrow?(c(),I("svg",is,ls)):W("",!0)],2)}const cs=ue(xt,[["render",us],["__scopeId","data-v-a1d941b3"]]);function vo(e){const n=[];let m=e.indexOf(",");for(;m!==-1;)n.push(m),m=e.indexOf(",",m+1);return n}const ds=le({components:{TokenDropdownSelect:cs},props:{titleText:{type:String,default:""},inputValue:{type:String,default:""},inputDisabled:{type:Boolean,default:!1},tokenInfo:{type:Object,default:null},havemax:{type:Boolean,default:!0},havehalf:{type:Boolean,default:!0},hasArrow:{type:Boolean,default:!0},importPage:{type:String,default:""},isShowAmountPrice:{type:Boolean,default:!0},assetsLoading:{type:Boolean,default:!1},inputLoading:{type:Boolean,default:!1}},setup(e,n){const{t:m,locale:a}=Xe(),d=o(()=>{var g,p,b;return y.value.assets&&e.tokenInfo&&y.value.assets[(g=e.tokenInfo)==null?void 0:g.address]?So(y.value.assets[(p=e.tokenInfo)==null?void 0:p.address].balance,(b=e.tokenInfo)==null?void 0:b.decimals):0}),w=o(()=>new N(Number(d.value)).div(2)),s=U(""),l=()=>{var g;if(d.value){const p=Number(d.value)>0?((g=e.tokenInfo)==null?void 0:g.symbol)=="SUI"?new N(Number(d.value)).sub(new N(.05)).lt(new N(0))?"0":new N(Number(d.value)).sub(new N(.05)).toString():String(d.value):"";s.value=p,i(p)}},r=()=>{var g;if(d.value){const p=Number(d.value)>0?Ie(new N(Number(d.value)).div(2).toString(),(g=e.tokenInfo)==null?void 0:g.decimals).toString():"";s.value=p,i(p)}},i=sn(g=>{n.emit("onInput",g),n.emit("onInputLoading",!1)},500),S=g=>{const p=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(A==null?void 0:A.value)&&(A==null?void 0:A.value)}})?).*$`),b=g.target.value.replace(/,/g,"").replace(p,"$1");b>0&&n.emit("onInputLoading",!0),i(b)},h=g=>{var q;const p=g.target.selectionStart,b=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(A==null?void 0:A.value)&&(A==null?void 0:A.value)}})?).*$`);console.log("ðŸš€ ~ file: assets-card.vue:287 ~ handleInput ~ event.target.value:",g.target.value);let k=g.target.value.replace(/,/g,"").replace(b,"$1");console.log("ðŸš€ ~ file: assets-card.vue:287 ~ handleInput ~ value:",k),console.log("ðŸš€ ~ file: assets-card.vue:287 ~ handleInput ~ event.inputType:",g.inputType);let O=k.includes(".")&&String(Z(k))==="0"?k:String(Z(k));const f=vo(g.target.value),B=vo(O),D=B.length-f.length;let L=p+D;if((q=g==null?void 0:g.inputType)!=null&&q.includes("delete")&&D>0&&p===B[B.length-1]){const v=g.target.value.slice(0,p-1)+g.target.value.slice(p);O=String(Z(v.replace(/,/g,""))),L=L-2}console.log("ðŸš€ ~ file: assets-card.vue:287 ~ handleInput ~ fValue:",O),s.value=O||"",setTimeout(()=>{try{g.target.setSelectionRange(L<0?0:L,L<0?0:L)}catch(v){console.log("ðŸš€ ~ file: assets-card.vue:307 ~ setTimeout ~ error:",v)}},0)};ae(()=>e.inputValue,g=>{const p=String(Z(g));p!==s.value&&(s.value=p)},{immediate:!0});const u=Ke(),y=o(()=>u),C=Re(),_=o(()=>C);let T={};ae(()=>_.value.RATES,g=>{g&&(T=g)},{immediate:!0});const P=o(()=>{var b,k;const g=T&&T[(b=e.tokenInfo)==null?void 0:b.address]&&T[(k=e.tokenInfo)==null?void 0:k.address].price||0,p=new N(e.inputValue||0).mul(g).toNumber();return g<=0?0:p>0&&p<.01?"<$0.01":Ee(p,2)}),A=o(()=>{var g;return(g=e.tokenInfo)==null?void 0:g.decimals}),E=o(()=>_.value.isTokenLoading);return{balance:d,isTokenLoading:E,halfBalance:w,t:m,addCommom:Z,wallet:y,inputChange:S,amountPirce:P,coinDecimals:A,formatNumber:fo,formattedValue:s,handleInput:h,maxBtnSelect:l,halfBtnSelect:r}}});const ms=e=>(fe("data-v-d0260a6b"),e=e(),he(),e),ps={class:"token-input-block"},vs={class:"title"},fs={class:"card-top"},hs={class:"card-bottom"},gs={class:"left"},ws={key:0,class:"amount-price"},Ss={key:1},Cs={class:"right"},ks={class:"balance"},bs=ms(()=>t("svg",{class:"icon icon-down","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-icon_wallet"})],-1)),_s={key:1};function ys(e,n,m,a,d,w){var S,h;const s=Vo,l=Je,r=oe("TokenDropdownSelect"),i=to;return c(),I("div",ps,[t("div",vs,M(e.titleText),1),t("div",fs,[e.inputLoading?(c(),K(l,{key:1,class:"input-loading-skeleton",loading:!0,size:"large",active:"",paragraph:!1})):(c(),K(s,{key:0,value:e.inputValue=="InsufficientLiquidity"?"":e.formattedValue,placeholder:"0.0",disabled:e.inputDisabled,onChange:e.inputChange,onInput:e.handleInput,onFocus:n[0]||(n[0]=u=>e.$emit("onFocus"))},null,8,["value","disabled","onChange","onInput"])),Y(r,{"token-info":e.tokenInfo,"has-opcity":!0,"is-loading":e.isTokenLoading,onOnSelect:n[1]||(n[1]=u=>e.$emit("onSelect"))},null,8,["token-info","is-loading"])]),t("div",hs,[t("div",gs,[e.inputValue&&e.amountPirce!="--"&&(Number(e.amountPirce)>0||e.amountPirce=="<$0.01")&&e.isShowAmountPrice&&!e.inputLoading?(c(),I("div",ws,M(e.amountPirce!=="<$0.01"?`$${("formatNumber"in e?e.formatNumber:te(fo))(e.amountPirce)}`:`${e.amountPirce}`),1)):(c(),I("div",Ss,[e.inputLoading?(c(),K(l,{key:0,class:"rate-loading-skeleton",loading:!0,size:"large",active:"",paragraph:!1})):W("",!0)]))]),t("div",Cs,[t("span",ks,[bs,e.assetsLoading?(c(),K(l,{key:0,class:"token-loading-skeleton",loading:!0,active:"",paragraph:!1})):(c(),I("span",_s,M(e.wallet.connected?("addCommom"in e?e.addCommom:te(Z))(e.balance,e.coinDecimals):"0"),1))]),e.havehalf&&e.wallet.connected?(c(),K(i,{key:0,disabled:!((S=e.tokenInfo)!=null&&S.name)||("addCommom"in e?e.addCommom:te(Z))(e.halfBalance,e.coinDecimals)==0,class:"max-btn half-btn",onClick:n[2]||(n[2]=u=>e.halfBtnSelect())},{default:se(()=>[me("HALF")]),_:1},8,["disabled"])):W("",!0),e.havemax&&e.wallet.connected?(c(),K(i,{key:1,disabled:!((h=e.tokenInfo)!=null&&h.name)||("addCommom"in e?e.addCommom:te(Z))(e.balance,e.coinDecimals)==0,class:"max-btn",onClick:n[3]||(n[3]=u=>e.maxBtnSelect())},{default:se(()=>[me("MAX")]),_:1},8,["disabled"])):W("",!0)])])])}const $s=ue(ds,[["render",ys],["__scopeId","data-v-d0260a6b"]]),Is=le({components:{TokenInputBlock:$s},setup(){const e=U(!0),n=U(!1),m=de(),a=o(()=>m),d=Ce();o(()=>d);const{setFromCoin:w,setToCoin:s,setFixedFromCoin:l,setFromCoinAmount:r,setToCoinAmount:i}=a.value,S=U("fromCoin"),h=U(""),u=U(""),y=U(!1),C=o(()=>a.value.fromCoin),_=o(()=>a.value.toCoin),T=o(()=>a.value.fromCoinAmount),P=o(()=>a.value.toCoinAmount),A=o(()=>a.value.fixedFromCoin),E=o(()=>a.value.swapRouterLoading),g=o(()=>a.value.plusChecked);let p=U(!1);function b(){const v=C.value;w(_.value),s(v),p.value=!0,g.value=="open"?l(!0):l(!A.value),A.value?(r(P.value),i("")):(i(T.value),r("")),setTimeout(()=>{p.value=!1},300)}const k=v=>{var $,F,j,R;S.value=v,v==="fromCoin"?(h.value=(($=_.value)==null?void 0:$.address)||"",u.value=((F=C.value)==null?void 0:F.address)||""):(h.value=((j=C.value)==null?void 0:j.address)||"",u.value=((R=_.value)==null?void 0:R.address)||""),y.value=!0},O=U({}),f=U({}),B=v=>{S.value==="fromCoin"?(O.value=v,q(v)):(f.value=v,q(v))},D=U(!1),L=()=>{f.value={},O.value={},D.value=!1},q=v=>{const $=d.importTokenListObj;if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1499 ~ getTokenSource ~ !importTokenListObj?.hasOwnProperty(token?.address):",!($!=null&&$.hasOwnProperty(v==null?void 0:v.address))),v!=null&&v.isSelfBuilt&&!($!=null&&$.hasOwnProperty(v==null?void 0:v.address)))D.value=!0;else{if(S.value==="fromCoin"){_.value&&v.address.toLowerCase()===(_==null?void 0:_.value.address.toLowerCase())&&s(null),w(v);const F=Number(T.value)>0?ve(T.value,v==null?void 0:v.decimals):"";r(F)}else{C.value&&v.address.toLowerCase()===(C==null?void 0:C.value.address.toLowerCase())&&w(null),s(v);const F=Number(P.value)>0?ve(P.value,v==null?void 0:v.decimals):"";i(F)}L()}};return{fixedFromCoin:A,swapRouterLoading:E,onCoinSelect:B,existingCoins:h,lastSelectCoin:u,currentCoinKey:S,showCoinSelect:y,openCoinSelect:k,warningToCoin:f,warningFromCoin:O,isAddCardTopPadding:e,isAddCardBottomPadding:n,suiSwapStore:m,clickExchange:b,closeTokenWarning:L,isShowTokenWarning:D,getTokenSource:q,change:p,fromCoin:C,toCoin:_,fromCoinAmount:T,toCoinAmount:P}}});const Po=e=>(fe("data-v-ce82e847"),e=e(),he(),e),As={class:"input-block-container"},Ts=Po(()=>t("svg",{class:"icon icon-down","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-icon_swap1"})],-1)),Rs=Po(()=>t("svg",{class:"icon icon-swap","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-tx_swap1"})],-1)),Ps=[Ts,Rs];function Fs(e,n,m,a,d,w){const s=oe("TokenInputBlock"),l=nn,r=tn;return c(),I("div",As,[t("div",{class:pe(["asset-card-box",[e.suiSwapStore.plusChecked=="open"?"toInputBlockDisabled input-block-add-top":"",e.isAddCardTopPadding?"input-block-add-top":"",e.isAddCardBottomPadding&&e.suiSwapStore.plusChecked!=="open"?"input-block-add-bottom":""]])},[Y(s,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[0]||(n[0]=i=>e.fromCoinAmount=i),"title-text":"You pay","input-value":e.fromCoinAmount,"token-info":e.fromCoin||null,"input-loading":!e.fixedFromCoin&&e.swapRouterLoading,onOnInput:n[1]||(n[1]=i=>{e.suiSwapStore.setFromCoinAmount(i),e.suiSwapStore.setFixedFromCoin(!0)}),onOnFocus:n[2]||(n[2]=()=>{e.suiSwapStore.setFixedFromCoin(!0),e.isAddCardTopPadding=!0,e.isAddCardBottomPadding=!1}),onOnSelect:n[3]||(n[3]=i=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","token-info","input-loading"]),Y(s,{modelValue:e.toCoinAmount,"onUpdate:modelValue":n[4]||(n[4]=i=>e.toCoinAmount=i),"title-text":"You receive","input-value":e.toCoinAmount,"token-info":e.toCoin||null,"input-disabled":e.suiSwapStore.plusChecked=="open",havemax:!1,havehalf:!1,"input-loading":!e.fixedFromCoin&&e.swapRouterLoading,onOnInput:n[5]||(n[5]=i=>{e.suiSwapStore.setToCoinAmount(i),e.suiSwapStore.setFixedFromCoin(!1)}),onOnFocus:n[6]||(n[6]=()=>{e.suiSwapStore.setFixedFromCoin(!1),e.isAddCardTopPadding=!1,e.isAddCardBottomPadding=!0}),onOnSelect:n[7]||(n[7]=i=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","token-info","input-disabled","input-loading"]),t("div",{class:"exchange",onClick:n[8]||(n[8]=(...i)=>e.clickExchange&&e.clickExchange(...i))},Ps)],2),e.showCoinSelect?(c(),K(l,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,"have-import-btn":!0,onOnSelect:e.onCoinSelect,onOnClose:n[9]||(n[9]=i=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):W("",!0),e.isShowTokenWarning?(c(),K(r,{key:1,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,"is-import-modal":!0,onClose:e.closeTokenWarning,onClickContinue:e.getTokenSource},null,8,["from-coin","to-coin","onClose","onClickContinue"])):W("",!0)])}const Ms=ue(Is,[["render",Fs],["__scopeId","data-v-ce82e847"]]);function Ns(){const e=de(),n=o(()=>e),m=o(()=>n.value.fromCoin),a=o(()=>n.value.toCoin),{allTokensObj:d}=so(),w=o(()=>m.value.logoURI),s=o(()=>a.value.logoURI),l=o(()=>m.value&&m.value.address||null),r=o(()=>a.value&&a.value.address||null),i=o(()=>{var h,u,y,C,_,T,P,A;return console.log("ðŸš€ðŸš€ðŸš€ ~ file: swap.vue:1222 ~ formCoinMarket ~ allTokensObj:",d),(u=d[(h=m==null?void 0:m.value)==null?void 0:h.address])!=null&&u.pyth_id&&((C=d[(y=m==null?void 0:m.value)==null?void 0:y.address])==null?void 0:C.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(T=d[(_=m==null?void 0:m.value)==null?void 0:_.address])!=null&&T.coingecko_id?"coingecko":(A=d[(P=m==null?void 0:m.value)==null?void 0:P.address])!=null&&A.birdeyeid?"birdeye":null}),S=o(()=>{var h,u,y,C,_,T,P,A;return(u=d[(h=a==null?void 0:a.value)==null?void 0:h.address])!=null&&u.pyth_id&&((C=d[(y=a==null?void 0:a.value)==null?void 0:y.address])==null?void 0:C.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(T=d[(_=a==null?void 0:a.value)==null?void 0:_.address])!=null&&T.coingecko_id?"coingecko":(A=d[(P=a==null?void 0:a.value)==null?void 0:P.address])!=null&&A.birdeyeid?"birdeye":null});return{formCoinId:l,toCoinId:r,formCoinMarket:i,toCoinMarket:S,fromCoinUrl:w,toCoinUrl:s}}const Bs=le({components:{TokenWarningNew:_o,CoinImg:Ze},props:{tokenInfo:{type:Object,default:null},isHaveLabel:{type:Boolean,default:!1},justifyContent:{type:String,default:"flex-end"}},setup(e,n){const{t:m,locale:a}=Xe(),d=o(()=>{var s;return(s=e.tokenInfo)==null?void 0:s.decimals});return{currentIcon:o(()=>{var s,l;return((s=e.tokenInfo)==null?void 0:s.logo_url)||((l=e.tokenInfo)==null?void 0:l.logoURI)||""}),t:m,coinDecimals:d}}});const Os={class:"coin-pair-container"},Ls={class:"logo-token-warning"},Us={class:"symbol-label-name"},js={class:"symbol-label"},Es={class:"symbol"},Ds={class:"name"};function qs(e,n,m,a,d,w){var r,i,S,h,u,y,C;const s=oe("CoinImg"),l=oe("TokenWarningNew");return c(),I("div",Os,[t("div",{class:"show-token",style:zo({justifyContent:e.justifyContent})},[t("div",Ls,[(r=e.tokenInfo)!=null&&r.address?(c(),K(s,{key:0,url:e.currentIcon,size:"36px"},null,8,["url"])):W("",!0),Y(l,{token:e.tokenInfo,"style-params":{width:"16px",height:"16px"}},null,8,["token"])]),t("div",Us,[t("div",js,[t("p",Es,M(e.tokenInfo?(i=e.tokenInfo)==null?void 0:i.symbol:e.$t("modal.selectTokenModalTitle")),1),e.isHaveLabel&&((S=e.tokenInfo)!=null&&S.labels)&&((h=e.tokenInfo)!=null&&h.labels[0])?(c(),I("div",{key:0,class:pe(["label",(u=e.tokenInfo)==null?void 0:u.labels[0]])},M((y=e.tokenInfo)==null?void 0:y.labels[0]),3)):W("",!0)]),t("p",Ds,M((C=e.tokenInfo)==null?void 0:C.name),1)])],4)])}const Ws=ue(Bs,[["render",qs],["__scopeId","data-v-d90e2ce2"]]),Vs=le({components:{CoinSingle:Ws},props:{coin:{type:Object,default:()=>({})},refresh:{type:Boolean,default:!1},id:{type:String,default:""},market:{type:String,default:""}},setup(e){const n=o(()=>r.value.currentExplorer),{$echarts:m}=Ho(),a=go();let d=null,w;const s=U(!0),l=Ce(),r=o(()=>l),i=o(()=>r.value.chainName),S=o(()=>we[i.value]),h=Re();o(()=>h);const{allTokensObj:u}=so(),y=(b,k,O)=>{w={xAxis:{type:"category",boundaryGap:!1,show:!1,data:k},yAxis:{type:"value",show:!1,min:function(f){return f.min-f.min*.1},max:function(f){return f.max+f.max*.1}},grid:{top:1,right:1,bottom:1,left:1},tooltip:{trigger:"axis",borderWidth:0,padding:0,backgroundColor:"transparent",axisPointer:{lineStyle:{color:r.value.chainName=="Aptos"?"#68FFD8":"#76C8FF"}},formatter:function(f){return`<div class="chart-tip">
              <div>${f&&f[0]&&f[0].name}</div>
              <div>$${ve(f&&f[0]&&f[0].value,4)}</div>
            </chart-tip>`}},color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:r.value.chainName=="Aptos"?"#0C4535":"#2E546D"},{offset:1,color:r.value.chainName=="Aptos"?"#151817":"#1B1B1B"}]},series:[{data:b,type:"line",showSymbol:!1,areaStyle:{},lineStyle:{color:r.value.chainName=="Aptos"?"#68FFD8":"#76C8FF",width:2,type:"solid"}}]},w&&d.clear(),w&&d.setOption(w,!0),d.resize(),s.value=!1},C=U(""),_=U(""),T=async b=>{var q,v,$;const k=[],O=[],{price:f,daily_rate:B}=await Xo(b,e.market);h.setTokenExternalPrice(e.coin.address,(q=f[f.length-1])==null?void 0:q.price),C.value=B;const D=f&&f.length>=1&&f[f.length-1].price;_.value=D,a.setCurrentCoinPairRate({[b]:D}),i.value==="Aptos"?f.forEach(F=>{k.push(F.price);const j=He(Number(F.timestamp),"MD"),R=He(Number(F.timestamp),"HM");O.push(j+" "+R)}):f.forEach(F=>{k.push(F.price);const j=He(new N(F.timestamp).mul(1e3).toNumber(),"MD"),R=He(new N(F.timestamp).mul(1e3).toNumber(),"HM");O.push(j+" "+R)});let L=document.getElementById(`main${(v=e.coin)==null?void 0:v.name}`);d=m.init(L),m.use([an]),y(k,O,($=e.coin)==null?void 0:$.name)};ae(()=>e.id,(b,k)=>{b&&(C.value="",_.value="",setTimeout(()=>{T(b)},1e3))},{immediate:!0});const P=U(""),A=U(""),E=U(""),g=U("");ae(()=>[u,e.coin],([b,k])=>{var O,f;b&&k&&b[k.address]&&(A.value=((O=b[k.address])==null?void 0:O.labels)&&((f=b[k.address])==null?void 0:f.labels[0]),P.value=b[k.address].name,E.value=b[k.address].symbol,g.value=b[k.address].address)},{immediate:!0,deep:!0}),ae(()=>e.refresh,b=>{b&&T(e.id)});const p=o(()=>r.value.theme);return{currentExplorer:n,getExplorerUrl:Co,theme:p,store:l,fixD:Ee,config:S,price_rate_24h:C,nowPrice:_,coinName:P,coinLabels:A,coinSymbol:E,address:g,decimalUi:ve,addCommom:Z}}});const Fo=e=>(fe("data-v-ef936e22"),e=e(),he(),e),zs={class:"price-token-chart"},Hs={class:"top"},Gs={class:"right"},Ks={class:"price-info"},Ys={key:0,src:Zo,alt:""},Js={key:1,src:Qo,alt:""},Xs={key:2,src:xo,alt:""},Zs={class:"bottom"},Qs={class:"left"},xs={class:"address"},ea={key:0,class:"pc-address"},oa={key:1,class:"pc-address"},na={class:"h5-address"},ta=Fo(()=>t("use",{"xlink:href":"#icon-icon_copy2"},null,-1)),sa=[ta],aa=["href"],ia=Fo(()=>t("svg",{class:"icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-icon_link"})],-1)),ra=[ia],la={class:"right"},ua=["id"];function ca(e,n,m,a,d,w){var r;const s=oe("CoinSingle"),l=Ye;return c(),I("div",zs,[t("div",Hs,[Y(s,{"token-info":e.coin},null,8,["token-info"]),t("div",Gs,[Y(l,{placement:"top","arrow-point-at-center":""},{title:se(()=>[me(M(e.market==="pyth"?"Data source: Pyth Network":e.market==="coingecko"?"Data source: CoinGecko":"Data source: Birdeye"),1)]),default:se(()=>[t("div",Ks,[e.market==="pyth"?(c(),I("img",Ys)):e.market==="coingecko"?(c(),I("img",Js)):e.market==="birdeye"?(c(),I("img",Xs)):W("",!0),t("span",null,"$"+M(e.nowPrice?Number(e.nowPrice)<1?("decimalUi"in e?e.decimalUi:te(ve))(e.nowPrice,4):("addCommom"in e?e.addCommom:te(Z))(("fixD"in e?e.fixD:te(Ee))(e.nowPrice,2)):"--"),1),e.price_rate_24h?(c(),I("i",{key:3,class:pe(e.price_rate_24h>0?"up":e.price_rate_24h<0?"down":"up")},M(e.price_rate_24h<0?+`${("fixD"in e?e.fixD:te(Ee))(e.price_rate_24h,2)}`:`+ ${("fixD"in e?e.fixD:te(Ee))(e.price_rate_24h,2)}`)+"%",3)):W("",!0)])]),_:1})])]),t("div",Zs,[t("div",Qs,[t("div",xs,[e.coin&&e.address!=="0x2::sui::SUI"?(c(),I("span",ea,M(e.coin&&e.coin.address.substr(0,8))+" ... "+M(e.coin&&e.coin.address.substr(e.coin.address.length-8,8)),1)):(c(),I("span",oa,M(e.coin&&e.coin.address),1)),t("span",na,M(e.coin&&e.coin.address.substr(0,4))+" ... "+M(e.coin&&e.coin.address.substr(e.coin.address.length-4,4)),1),(c(),I("svg",{class:"icon","aria-hidden":"true",onClick:n[0]||(n[0]=i=>e.store.copy(e.coin&&e.coin.address))},sa)),t("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:te(Co))(e.currentExplorer,"coin",e.coin&&e.coin.address),target:"_blank"},ra,8,aa)])]),t("div",la,[t("div",{id:`main${(r=e.coin)==null?void 0:r.name}`,class:"main"},null,8,ua)])])])}const da=ue(Vs,[["render",ca],["__scopeId","data-v-ef936e22"]]),ma=le({components:{PriceTokenChart:da},setup(){const{formCoinId:e,toCoinId:n,formCoinMarket:m,toCoinMarket:a,fromCoinUrl:d,toCoinUrl:w}=Ns(),s=de(),l=o(()=>s),r=o(()=>l.value.fromCoin),i=o(()=>l.value.toCoin);return{refresh:o(()=>l.value.refresh),fromCoin:r,toCoin:i,formCoinId:e,toCoinId:n,formCoinMarket:m,toCoinMarket:a,fromCoinUrl:d,toCoinUrl:w}}});const ro=e=>(fe("data-v-e3fbe02e"),e=e(),he(),e),pa={class:"price-reference-container"},va={class:"info-title"},fa=ro(()=>t("span",{class:"coingecko"},"Price Reference",-1)),ha=ro(()=>t("div",{class:"price-reference-text"}," The following price is only an external reference from 3rd party data providers, which does not reflect actual data on Cetus. ",-1)),ga=ro(()=>t("svg",{class:"icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-icon_tips"})],-1));function wa(e,n,m,a,d,w){const s=Ye,l=oe("PriceTokenChart");return c(),I("div",pa,[t("div",va,[fa,Y(s,{"overlay-class-name":"price-impact-tooltip",placement:"top","arrow-point-at-center":""},{title:se(()=>[ha]),default:se(()=>[ga]),_:1})]),e.fromCoin&&e.formCoinMarket?(c(),K(l,{key:0,id:e.formCoinId,coin:e.fromCoin,market:e.formCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):W("",!0),e.toCoin&&e.toCoinMarket?(c(),K(l,{key:1,id:e.toCoinId,coin:e.toCoin,market:e.toCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):W("",!0)])}const Sa=ue(ma,[["render",wa],["__scopeId","data-v-e3fbe02e"]]),Ca=le({props:{tabList:{type:Object,default:()=>null},currentTab:{type:String,default:()=>""},numValue:{type:Number,default:()=>null}},setup(){return{}}});const ka={class:"underline-tab"},ba=["onClick"],_a={key:0,src:rn,class:"beta",alt:""},ya={key:1,class:"text"};function $a(e,n,m,a,d,w){return c(),I("div",ka,[(c(!0),I(De,null,qe(e.tabList,s=>(c(),I("div",{key:s.link,class:pe(e.currentTab==s.value?"tab-active tab":"tab"),onClick:l=>e.$emit("clickTab",s)},[me(M(s.label)+" ",1),s!=null&&s.isHaveBeta?(c(),I("img",_a)):W("",!0),s!=null&&s.numValue?(c(),I("div",ya,M(s==null?void 0:s.numValue),1)):W("",!0)],10,ba))),128))])}const Ia=ue(Ca,[["render",$a],["__scopeId","data-v-ca79569c"]]);function Aa(){const{getToken:e,getTokenList:n}=ko(),m=ho(),{t:a,locale:d}=Xe(),w=Ce(),s=o(()=>bo()),{allTokensObj:l}=so(),r=de(),i=o(()=>(console.log(r,"#suiSwapStore"),r)),{setIsSwapping:S,setIsSwapConfirmModal:h,setFromCoinAmount:u,setToCoinAmount:y,setOneFromAmount:C,setOneToAmount:_,setInsufficientLiquidity:T,setRouterPool:P,setSuiPreSwapData:A,setCountdown:E,setFromCoin:g,setToCoin:p,setFixedFromCoin:b,setRouterSwap:k,setSwapPoolInfo:O}=r;no(()=>{n()});const f=o(()=>i.value.fromCoin),B=o(()=>i.value.toCoin),D=o(()=>i.value.fromCoinAmount),L=o(()=>i.value.toCoinAmount),q=o(()=>i.value.fixedFromCoin),v=o(()=>i.value.isSwapping),$=o(()=>i.value.swapPoolInfo),F=o(()=>i.value.swapRouterLoading),j=o(()=>i.value.notFoundRouter),R=o(()=>i.value.insufficientLiquidity),V=o(()=>i.value.isSwapConfirmModal),J=o(()=>i.value.suiPreSwapData),H=o(()=>w.chainName),z=o(()=>w.slippage),Se=o(()=>we&&we[H.value]&&we[H.value].hasRouter),ke=o(()=>$e.getPoolInfoSuccess),$e=Re(),We=o(()=>$e),xe=Ke(),be=o(()=>xe),Me=o(()=>H.value?wo(H.value):{}),lo=o(()=>be.value.assets&&f.value&&be.value.assets[f.value.address]?So(be.value.assets[f.value.address].balance,f.value.decimals):0),eo=o(()=>{var G;return be.value.connected?$.value&&((G=$.value)!=null&&G.is_pause)?"Pool Closed":!f.value||!B.value?a("modal.selectTokenModalTitle"):!Number(D.value)&&!Number(L.value)?a("button.enterAmount"):!Se.value&&!$.value&&ke.value?"Pool Not Found":Se.value&&j.value?"No Available Route":R.value?a("button.insufficientLiquidity"):Number(D.value)>Number(lo.value)?a("button.insufficientBalance",{name:f.value.symbol}):a("button.swap"):a("button.connectWallet")}),Mo=o(()=>{var G;return be.value.connected?!!(v.value||!f.value||!B.value||!Number(D.value)||!Number(L.value)||Number(D.value)>Number(lo.value)||eo.value==a("button.poolNotFound")||eo.value!==a("button.swap")||(G=$==null?void 0:$.value)!=null&&G.is_pause||F.value):!1});ae(()=>l,async G=>{if(G&&!re(G)){const X=m?m.currentRoute.value.query.to:"",Q=m?m.currentRoute.value.query.from:"";if(console.log(Q,re(f.value),"!routerCoinFrom && checkNullObj(fromCoin)"),Q&&Q!=="undefined"){console.log("ðŸš€ ~ routerCoinFrom:",Q);const ie=await e(Q);g(ie)}else if(!Q&&re(f.value)){const ie=we[H.value].swapDefaultPair.fromCoin,x=await e(ie);console.log(x,ie,"#coin"),g(x)}if(X&&X!=="undefined"){const ie=await e(X);p(ie)}else if(!X&&re(B.value)){const ie=we[H.value].swapDefaultPair.toCoin,x=await e(ie);p(x)}!Q&&X&&g("")}},{immediate:!0}),ae(()=>[f.value,B.value,We.value.poolConfigList],([G,X,Q])=>{var ie;if(!re(G)&&!re(X)){console.log("ðŸš€ ~ fromCoin:",X,G);let x=null;const ne={};Object.values(We.value.poolConfigList).forEach(ee=>{var ce,_e,ze,Oe,Le,ye,Ae,Ue;(ee.coinA.address.toUpperCase()===((_e=(ce=G.value)==null?void 0:ce.address)==null?void 0:_e.toUpperCase())&&ee.coinB.address.toUpperCase()===((Oe=(ze=X.value)==null?void 0:ze.address)==null?void 0:Oe.toUpperCase())||ee.coinB.address.toUpperCase()===((ye=(Le=G.value)==null?void 0:Le.address)==null?void 0:ye.toUpperCase())&&ee.coinA.address.toUpperCase()===((Ue=(Ae=X.value)==null?void 0:Ae.address)==null?void 0:Ue.toUpperCase()))&&(ne[ee.address]={...ee})});const ge=Object.values(ne).sort((ee,ce)=>ee.fee-ce.fee);for(let ee=0;ee<ge.length;ee++)if(!((ie=ge[ee])!=null&&ie.is_pause)){x=ge[ee];break}x&&!re(x)&&(console.log("ðŸš€ ~ info:",x),O(x)),O(null)}if(O(null),Q&&Q.length>0&&G&&X){const x=[];Q.forEach(ne=>{var ge,ee,ce,_e;(ne.coinA.address.toUpperCase()===((ge=G.address)==null?void 0:ge.toUpperCase())&&ne.coinB.address.toUpperCase()===((ee=X.address)==null?void 0:ee.toUpperCase())||ne.coinB.address.toUpperCase()===((ce=G.address)==null?void 0:ce.toUpperCase())&&ne.coinA.address.toUpperCase()===((_e=X.address)==null?void 0:_e.toUpperCase()))&&(ne!=null&&ne.is_pause||x.push(ne.address))}),k(x)}},{immediate:!0}),ae(q,Go((G,X)=>{b(G)},500),{immediate:!0}),ae(()=>[f.value,B.value],([G,X])=>{if(!re(G)||!re(X)){const Q=`/swap?from=${G==null?void 0:G.address}&to=${X==null?void 0:X.address}`;m.push(Q)}},{immediate:!0,deep:!0});const Ne=U(!1),uo=async G=>{var X;try{let Q;if(q.value){const ne=new N(D.value).mul(Math.pow(10,f.value.decimals)).toString();Q=new Ge(ne)}else{const ne=new N(L.value).mul(Math.pow(10,B.value.decimals)).toString();Q=new Ge(ne)}const ie=Number(z.value)/100,x=await((X=s==null?void 0:s.value)==null?void 0:X.getFindRouter(f,B,Q.toString(),q.value,ie,""));if(x){A(x),P(x.routes),T(!1);const ne=Z(ve(new N(D.value).div(new N(L.value).toString()),f.value.decimals));C(ne);const ge=Z(ve(new N(L.value).div(D.value).toString(),B.value.decimals));_(ge);const ee=new N(x.amountOut).div(new N(Math.pow(10,B.value.decimals))).toString(),ce=new N(x.amountIn).div(new N(Math.pow(10,f.value.decimals))).toString();q.value?L.value!==ee&&(Ne.value=!0,y(ee)):D.value!==ce&&(Ne.value=!0,u(ce))}}catch(Q){console.log("pre swap error3",Q)}},Be=U(null);ae(()=>V.value,G=>{G?Be.value=setInterval(()=>{uo(q.value)},3e3):(clearInterval(Be.value),window.clearInterval(Be.value))},{immediate:!0});const No=()=>{Ne.value=!1},Bo=()=>{h(!1),Ne.value=!1},{setIsShowSuccess:Oo,setIsShowRejected:co,setIsShowWaiting:Ve,setTransactionDesc:Lo,setTransactionTxid:mo}=w;return{isShowAccept:Ne,toSwap:async()=>{var G,X,Q,ie,x,ne,ge,ee,ce;h(!1),S(!0),clearInterval(Be),window.clearInterval(Be),mo(""),Lo(a("tips.swapping",{from:`${Z(D.value)} ${(G=f.value)==null?void 0:G.symbol}`,to:`${Z(L.value)} ${(X=B.value)==null?void 0:X.symbol}`})),Ve(!0);try{const _e=q.value,ze=Number(z.value)/100,Oe=await((Q=s==null?void 0:s.value)==null?void 0:Q.getRouterSwapPayload(J.value,_e,ze,f,B));console.log("0221####swap###swapPayload###",Oe);const Le=await Me.value.signAndExecuteTransactionBlock(be.value.currentWallet,Oe);console.log("0221###sui swap res###",Le);const ye=Me.value.handleTx(Le);if(console.log("0221###swap###sui##tx###",ye),ye&&ye.hash){mo(ye.hash),Ve(!1),Oo(!0);const Ae={title:a("tips.swap"),desc:a("tips.swapSuccessText",{from:`${Z(D.value)} ${(ie=f.value)==null?void 0:ie.symbol}`,to:`${Z(L.value)} ${(x=B.value)==null?void 0:x.symbol}`}),hash:ye.hash,tit:"Swap",type:"liquidity",action:"swap",isHaveSui:f.value.address==we[H.value].currentChainTokenAddress||B.value.address==we[H.value].currentChainTokenAddress,icon:"icon-icon-swap1",tokenInfo:{tokena:`${(ne=f.value)==null?void 0:ne.address}`,numa:`- ${D.value}`,logoa:l&&f.value&&f.value.address&&l[f.value.address]&&l[f.value.address].logoURI,tokenb:`${(ge=B.value)==null?void 0:ge.address}`,numb:`+ ${L.value}`,logob:l&&B.value&&B.value.address&&l[B.value.address]&&l[B.value.address].logoURI},text:`Pay ${D.value} ${(ee=f.value)==null?void 0:ee.symbol} to receive ${L.value} ${(ce=B.value)==null?void 0:ce.symbol}`};Ae.res=ye.res,Me.value.showTransitionPending(Ae);const Ue=await Me.value.watchTransaction(Ae);console.log("0221###swap###transitionStatus####",Ue),Ue&&setTimeout(()=>{Me.value.getAccount(be.value.address)},1e3)}else Ve(!1),co(!0);u(""),y(""),S(!1)}catch(_e){u(""),y(""),S(!1),console.log("Swap Error###",_e),Ve(!1),co(!0)}},updateAccept:No,getSuiAmountAccept:uo,closeSwapConfirmModal:Bo,slippage:z,swapBtnText:eo,isSwapBtnDisabled:Mo}}const Ta=le({components:{SwapShowInfo:To,UnderlineTab:Ia,PlusSetting:Qt,TokenInputBox:Ms,PriceReference:Sa,SwapSuiConfirm:Ro},setup(){const{closeSwapConfirmModal:e,isShowAccept:n,updateAccept:m,toSwap:a,swapBtnText:d,isSwapBtnDisabled:w}=Aa(),s=de(),l=o(()=>s),r=Ce(),i=o(()=>r.slippage),S=o(()=>l.value.isSwapping),h=o(()=>l.value.isSwapConfirmModal),{setIsSwapConfirmModal:u}=l.value,y=ho(),C=Ke(),_=o(()=>C);return{isShowAccept:n,slippage:i,updateAccept:m,closeSwapConfirmModal:e,toSwap:a,isSwapping:S,swapBtnText:d,isSwapBtnDisabled:w,isSwapConfirmModal:h,clickSwapBtn:()=>{_.value.connected?u(!0):_.value.setIsShowWalletModal(!0)},router:y,tradeTabList:[{label:"Swap",value:"swap",link:"/swap"},{label:"Limit",value:"limit",link:"/limit"},{label:"DCA",value:"dca",link:"/dca",isHaveBeta:!0}]}}});const Ra=e=>(fe("data-v-db6681ae"),e=e(),he(),e),Pa={class:"swap-sui-container"},Fa=Ra(()=>t("div",{class:"bg"},null,-1));function Ma(e,n,m,a,d,w){const s=oe("UnderlineTab"),l=oe("PlusSetting"),r=oe("TokenInputBox"),i=to,S=To,h=oe("PriceReference"),u=Ro;return c(),I("div",Pa,[Fa,Y(s,{"tab-list":e.tradeTabList,"current-tab":"swap",onClickTab:n[0]||(n[0]=y=>e.$router.push(y.link))},null,8,["tab-list"]),Y(l),Y(r),Y(i,{disabled:e.isSwapBtnDisabled,class:"big-btn new-big-btn",loading:e.isSwapping,onClick:n[1]||(n[1]=y=>e.clickSwapBtn())},{default:se(()=>[t("span",null,M(e.swapBtnText),1)]),_:1},8,["disabled","loading"]),Y(S),Y(h),e.isSwapConfirmModal?(c(),K(u,{key:0,"is-show-accept":e.isShowAccept,onOnClose:e.closeSwapConfirmModal,onToSwap:e.toSwap,onAccept:e.updateAccept},null,8,["is-show-accept","onOnClose","onToSwap","onAccept"])):W("",!0)])}const ui=ue(Ta,[["render",Ma],["__scopeId","data-v-db6681ae"]]);export{ui as default};
