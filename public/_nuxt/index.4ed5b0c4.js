import{a8 as Is,a5 as Bh,a7 as Ih,m as In,a1 as On,a2 as Z,a9 as ut,t as pc,aa as Zr,ab as Oh}from"./entry.8e75b3ab.js";import{A as Os,S as Uh,T as Ht,B as Rh,C as sn,D as Lh,k as Ia,j as Oa,o as Or,E as qh,p as ke,m as Xe,l as es,e as Ie,g as os,F as $h,G as jh,H as Fh,I as Ur,c as Rr,s as zn,d as Dn,J as wn,K as Dh}from"./common.26dbc61a.js";import{r as Nh,c as j,u as ai,b as ce,h as zh,s as Mh,i as gc,F as yc,j as Ct,k as ks,T as gt,l as Hh,m as Ch,n as Wh,o as Ne,p as yt,q as Gh,C as bn,t as Kh,v as Jh,w as Vh,x as Xh,f as Qh}from"./index.91fc242d.js";import"./decimal.a2826370.js";import{D as ne}from"./decimal.765d8738.js";function Wn(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Zh(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function ci(e,...t){if(!Zh(e))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function mc(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Wn(e.outputLen),Wn(e.blockLen)}function ds(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function wc(e,t){ci(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Yh=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));function bc(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}const gr=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Wt=(e,t)=>e<<32-t|e>>>t,ef=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!ef)throw new Error("Non little-endian hardware is not supported");const tf=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Tc(e){if(!bc(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=tf[e[n]];return t}const rn={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Ua(e){if(e>=rn._0&&e<=rn._9)return e-rn._0;if(e>=rn._A&&e<=rn._F)return e-(rn._A-10);if(e>=rn._a&&e<=rn._f)return e-(rn._a-10)}function vc(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const s=new Uint8Array(n);for(let r=0,o=0;r<n;r++,o+=2){const i=Ua(e.charCodeAt(o)),a=Ua(e.charCodeAt(o+1));if(i===void 0||a===void 0){const c=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}s[r]=i*16+a}return s}function nf(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function ls(e){if(typeof e=="string"&&(e=nf(e)),!bc(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}class di{clone(){return this._cloneInto()}}const sf={}.toString;function rf(e,t){if(t!==void 0&&sf.call(t)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(e,t)}function li(e){const t=s=>e().update(ls(s)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}class Ac extends di{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,mc(t);const s=ls(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,o=new Uint8Array(r);o.set(s.length>r?t.create().update(s).digest():s);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=t.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),o.fill(0)}update(t){return ds(this),this.iHash.update(t),this}digestInto(t){ds(this),ci(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:s,finished:r,destroyed:o,blockLen:i,outputLen:a}=this;return t=t,t.finished=r,t.destroyed=o,t.blockLen=i,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=s._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Yr=(e,t,n)=>new Ac(e,t).update(n).digest();Yr.create=(e,t)=>new Ac(e,t);function of(e,t,n,s){mc(e);const r=rf({dkLen:32,asyncTick:10},s),{c:o,dkLen:i,asyncTick:a}=r;if(Wn(o),Wn(i),Wn(a),o<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=ls(t),d=ls(n),l=new Uint8Array(i),u=Yr.create(e,c),h=u._cloneInto().update(d);return{c:o,dkLen:i,asyncTick:a,DK:l,PRF:u,PRFSalt:h}}function af(e,t,n,s,r){return e.destroy(),t.destroy(),s&&s.destroy(),r.fill(0),n}function cf(e,t,n,s){const{c:r,dkLen:o,DK:i,PRF:a,PRFSalt:c}=of(e,t,n,s);let d;const l=new Uint8Array(4),u=gr(l),h=new Uint8Array(a.outputLen);for(let p=1,g=0;g<o;p++,g+=a.outputLen){const b=i.subarray(g,g+a.outputLen);u.setInt32(0,p,!1),(d=c._cloneInto(d)).update(l).digestInto(h),b.set(h.subarray(0,b.length));for(let y=1;y<r;y++){a._cloneInto(d).update(h).digestInto(h);for(let E=0;E<b.length;E++)b[E]^=h[E]}}return af(a,c,i,d,h)}function df(e,t,n,s){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,s);const r=BigInt(32),o=BigInt(4294967295),i=Number(n>>r&o),a=Number(n&o),c=s?4:0,d=s?0:4;e.setUint32(t+c,i,s),e.setUint32(t+d,a,s)}class Sc extends di{constructor(t,n,s,r){super(),this.blockLen=t,this.outputLen=n,this.padOffset=s,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=gr(this.buffer)}update(t){ds(this);const{view:n,buffer:s,blockLen:r}=this;t=ls(t);const o=t.length;for(let i=0;i<o;){const a=Math.min(r-this.pos,o-i);if(a===r){const c=gr(t);for(;r<=o-i;i+=r)this.process(c,i);continue}s.set(t.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===r&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ds(this),wc(t,this),this.finished=!0;const{buffer:n,view:s,blockLen:r,isLE:o}=this;let{pos:i}=this;n[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(s,0),i=0);for(let u=i;u<r;u++)n[u]=0;df(s,r-8,BigInt(this.length*8),o),this.process(s,0);const a=gr(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=c/4,l=this.get();if(d>l.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<d;u++)a.setUint32(4*u,l[u],o)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const s=t.slice(0,n);return this.destroy(),s}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:s,length:r,finished:o,destroyed:i,pos:a}=this;return t.length=r,t.pos=a,t.finished=o,t.destroyed=i,r%n&&t.buffer.set(s),t}}const lf=(e,t,n)=>e&t^~e&n,uf=(e,t,n)=>e&t^e&n^t&n,hf=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Tn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),vn=new Uint32Array(64);class ff extends Sc{constructor(){super(64,32,8,!1),this.A=Tn[0]|0,this.B=Tn[1]|0,this.C=Tn[2]|0,this.D=Tn[3]|0,this.E=Tn[4]|0,this.F=Tn[5]|0,this.G=Tn[6]|0,this.H=Tn[7]|0}get(){const{A:t,B:n,C:s,D:r,E:o,F:i,G:a,H:c}=this;return[t,n,s,r,o,i,a,c]}set(t,n,s,r,o,i,a,c){this.A=t|0,this.B=n|0,this.C=s|0,this.D=r|0,this.E=o|0,this.F=i|0,this.G=a|0,this.H=c|0}process(t,n){for(let u=0;u<16;u++,n+=4)vn[u]=t.getUint32(n,!1);for(let u=16;u<64;u++){const h=vn[u-15],p=vn[u-2],g=Wt(h,7)^Wt(h,18)^h>>>3,b=Wt(p,17)^Wt(p,19)^p>>>10;vn[u]=b+vn[u-7]+g+vn[u-16]|0}let{A:s,B:r,C:o,D:i,E:a,F:c,G:d,H:l}=this;for(let u=0;u<64;u++){const h=Wt(a,6)^Wt(a,11)^Wt(a,25),p=l+h+lf(a,c,d)+hf[u]+vn[u]|0,b=(Wt(s,2)^Wt(s,13)^Wt(s,22))+uf(s,r,o)|0;l=d,d=c,c=a,a=i+p|0,i=o,o=r,r=s,s=p+b|0}s=s+this.A|0,r=r+this.B|0,o=o+this.C|0,i=i+this.D|0,a=a+this.E|0,c=c+this.F|0,d=d+this.G|0,l=l+this.H|0,this.set(s,r,o,i,a,c,d,l)}roundClean(){vn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const pf=li(()=>new ff),cr=BigInt(2**32-1),Uo=BigInt(32);function xc(e,t=!1){return t?{h:Number(e&cr),l:Number(e>>Uo&cr)}:{h:Number(e>>Uo&cr)|0,l:Number(e&cr)|0}}function kc(e,t=!1){let n=new Uint32Array(e.length),s=new Uint32Array(e.length);for(let r=0;r<e.length;r++){const{h:o,l:i}=xc(e[r],t);[n[r],s[r]]=[o,i]}return[n,s]}const gf=(e,t)=>BigInt(e>>>0)<<Uo|BigInt(t>>>0),yf=(e,t,n)=>e>>>n,mf=(e,t,n)=>e<<32-n|t>>>n,wf=(e,t,n)=>e>>>n|t<<32-n,bf=(e,t,n)=>e<<32-n|t>>>n,Tf=(e,t,n)=>e<<64-n|t>>>n-32,vf=(e,t,n)=>e>>>n-32|t<<64-n,Af=(e,t)=>t,Sf=(e,t)=>e,_c=(e,t,n)=>e<<n|t>>>32-n,Ec=(e,t,n)=>t<<n|e>>>32-n,Pc=(e,t,n)=>t<<n-32|e>>>64-n,Bc=(e,t,n)=>e<<n-32|t>>>64-n;function xf(e,t,n,s){const r=(t>>>0)+(s>>>0);return{h:e+n+(r/2**32|0)|0,l:r|0}}const kf=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),_f=(e,t,n,s)=>t+n+s+(e/2**32|0)|0,Ef=(e,t,n,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0),Pf=(e,t,n,s,r)=>t+n+s+r+(e/2**32|0)|0,Bf=(e,t,n,s,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0)+(r>>>0),If=(e,t,n,s,r,o)=>t+n+s+r+o+(e/2**32|0)|0,Of={fromBig:xc,split:kc,toBig:gf,shrSH:yf,shrSL:mf,rotrSH:wf,rotrSL:bf,rotrBH:Tf,rotrBL:vf,rotr32H:Af,rotr32L:Sf,rotlSH:_c,rotlSL:Ec,rotlBH:Pc,rotlBL:Bc,add:xf,add3L:kf,add3H:_f,add4L:Ef,add4H:Pf,add5H:If,add5L:Bf},oe=Of,[Uf,Rf]=(()=>oe.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))))(),An=new Uint32Array(80),Sn=new Uint32Array(80);class Lf extends Sc{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:s,Bl:r,Ch:o,Cl:i,Dh:a,Dl:c,Eh:d,El:l,Fh:u,Fl:h,Gh:p,Gl:g,Hh:b,Hl:y}=this;return[t,n,s,r,o,i,a,c,d,l,u,h,p,g,b,y]}set(t,n,s,r,o,i,a,c,d,l,u,h,p,g,b,y){this.Ah=t|0,this.Al=n|0,this.Bh=s|0,this.Bl=r|0,this.Ch=o|0,this.Cl=i|0,this.Dh=a|0,this.Dl=c|0,this.Eh=d|0,this.El=l|0,this.Fh=u|0,this.Fl=h|0,this.Gh=p|0,this.Gl=g|0,this.Hh=b|0,this.Hl=y|0}process(t,n){for(let m=0;m<16;m++,n+=4)An[m]=t.getUint32(n),Sn[m]=t.getUint32(n+=4);for(let m=16;m<80;m++){const _=An[m-15]|0,I=Sn[m-15]|0,H=oe.rotrSH(_,I,1)^oe.rotrSH(_,I,8)^oe.shrSH(_,I,7),D=oe.rotrSL(_,I,1)^oe.rotrSL(_,I,8)^oe.shrSL(_,I,7),V=An[m-2]|0,ee=Sn[m-2]|0,me=oe.rotrSH(V,ee,19)^oe.rotrBH(V,ee,61)^oe.shrSH(V,ee,6),we=oe.rotrSL(V,ee,19)^oe.rotrBL(V,ee,61)^oe.shrSL(V,ee,6),Se=oe.add4L(D,we,Sn[m-7],Sn[m-16]),He=oe.add4H(Se,H,me,An[m-7],An[m-16]);An[m]=He|0,Sn[m]=Se|0}let{Ah:s,Al:r,Bh:o,Bl:i,Ch:a,Cl:c,Dh:d,Dl:l,Eh:u,El:h,Fh:p,Fl:g,Gh:b,Gl:y,Hh:E,Hl:v}=this;for(let m=0;m<80;m++){const _=oe.rotrSH(u,h,14)^oe.rotrSH(u,h,18)^oe.rotrBH(u,h,41),I=oe.rotrSL(u,h,14)^oe.rotrSL(u,h,18)^oe.rotrBL(u,h,41),H=u&p^~u&b,D=h&g^~h&y,V=oe.add5L(v,I,D,Rf[m],Sn[m]),ee=oe.add5H(V,E,_,H,Uf[m],An[m]),me=V|0,we=oe.rotrSH(s,r,28)^oe.rotrBH(s,r,34)^oe.rotrBH(s,r,39),Se=oe.rotrSL(s,r,28)^oe.rotrBL(s,r,34)^oe.rotrBL(s,r,39),He=s&o^s&a^o&a,De=r&i^r&c^i&c;E=b|0,v=y|0,b=p|0,y=g|0,p=u|0,g=h|0,{h:u,l:h}=oe.add(d|0,l|0,ee|0,me|0),d=a|0,l=c|0,a=o|0,c=i|0,o=s|0,i=r|0;const Je=oe.add3L(me,Se,De);s=oe.add3H(Je,ee,we,He),r=Je|0}({h:s,l:r}=oe.add(this.Ah|0,this.Al|0,s|0,r|0)),{h:o,l:i}=oe.add(this.Bh|0,this.Bl|0,o|0,i|0),{h:a,l:c}=oe.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:d,l}=oe.add(this.Dh|0,this.Dl|0,d|0,l|0),{h:u,l:h}=oe.add(this.Eh|0,this.El|0,u|0,h|0),{h:p,l:g}=oe.add(this.Fh|0,this.Fl|0,p|0,g|0),{h:b,l:y}=oe.add(this.Gh|0,this.Gl|0,b|0,y|0),{h:E,l:v}=oe.add(this.Hh|0,this.Hl|0,E|0,v|0),this.set(s,r,o,i,a,c,d,l,u,h,p,g,b,y,E,v)}roundClean(){An.fill(0),Sn.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const ui=li(()=>new Lf);function Ic(e){if(typeof e!="string")throw new TypeError(`Invalid mnemonic type: ${typeof e}`);return e.normalize("NFKD")}function qf(e){const t=Ic(e),n=t.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:n}}const $f=e=>Ic(`mnemonic${e}`);function jf(e,t=""){return cf(ui,qf(e).nfkd,$f(t),{c:2048,dkLen:64})}const[Oc,Uc,Rc]=[[],[],[]],Ff=BigInt(0),_s=BigInt(1),Df=BigInt(2),Nf=BigInt(7),zf=BigInt(256),Mf=BigInt(113);for(let e=0,t=_s,n=1,s=0;e<24;e++){[n,s]=[s,(2*n+3*s)%5],Oc.push(2*(5*s+n)),Uc.push((e+1)*(e+2)/2%64);let r=Ff;for(let o=0;o<7;o++)t=(t<<_s^(t>>Nf)*Mf)%zf,t&Df&&(r^=_s<<(_s<<BigInt(o))-_s);Rc.push(r)}const[Hf,Cf]=kc(Rc,!0),Ra=(e,t,n)=>n>32?Pc(e,t,n):_c(e,t,n),La=(e,t,n)=>n>32?Bc(e,t,n):Ec(e,t,n);function Wf(e,t=24){const n=new Uint32Array(10);for(let s=24-t;s<24;s++){for(let i=0;i<10;i++)n[i]=e[i]^e[i+10]^e[i+20]^e[i+30]^e[i+40];for(let i=0;i<10;i+=2){const a=(i+8)%10,c=(i+2)%10,d=n[c],l=n[c+1],u=Ra(d,l,1)^n[a],h=La(d,l,1)^n[a+1];for(let p=0;p<50;p+=10)e[i+p]^=u,e[i+p+1]^=h}let r=e[2],o=e[3];for(let i=0;i<24;i++){const a=Uc[i],c=Ra(r,o,a),d=La(r,o,a),l=Oc[i];r=e[l],o=e[l+1],e[l]=c,e[l+1]=d}for(let i=0;i<50;i+=10){for(let a=0;a<10;a++)n[a]=e[i+a];for(let a=0;a<10;a++)e[i+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=Hf[s],e[1]^=Cf[s]}n.fill(0)}class hi extends di{constructor(t,n,s,r=!1,o=24){if(super(),this.blockLen=t,this.suffix=n,this.outputLen=s,this.enableXOF=r,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Wn(s),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Yh(this.state)}keccak(){Wf(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){ds(this);const{blockLen:n,state:s}=this;t=ls(t);const r=t.length;for(let o=0;o<r;){const i=Math.min(n-this.pos,r-o);for(let a=0;a<i;a++)s[this.pos++]^=t[o++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:s,blockLen:r}=this;t[s]^=n,n&128&&s===r-1&&this.keccak(),t[r-1]^=128,this.keccak()}writeInto(t){ds(this,!1),ci(t),this.finish();const n=this.state,{blockLen:s}=this;for(let r=0,o=t.length;r<o;){this.posOut>=s&&this.keccak();const i=Math.min(s-this.posOut,o-r);t.set(n.subarray(this.posOut,this.posOut+i),r),this.posOut+=i,r+=i}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Wn(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(wc(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:n,suffix:s,outputLen:r,rounds:o,enableXOF:i}=this;return t||(t=new hi(n,s,r,i,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=s,t.outputLen=r,t.enableXOF=i,t.destroyed=this.destroyed,t}}const Gf=(e,t,n)=>li(()=>new hi(t,e,n)),us=Gf(6,136,256/8);function Lc(e,t){return function(){return e.apply(t,arguments)}}const{toString:Kf}=Object.prototype,{getPrototypeOf:fi}=Object,eo=(e=>t=>{const n=Kf.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Dt=e=>(e=e.toLowerCase(),t=>eo(t)===e),to=e=>t=>typeof t===e,{isArray:hs}=Array,zs=to("undefined");function Jf(e){return e!==null&&!zs(e)&&e.constructor!==null&&!zs(e.constructor)&&bt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const qc=Dt("ArrayBuffer");function Vf(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&qc(e.buffer),t}const Xf=to("string"),bt=to("function"),$c=to("number"),no=e=>e!==null&&typeof e=="object",Qf=e=>e===!0||e===!1,yr=e=>{if(eo(e)!=="object")return!1;const t=fi(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Zf=Dt("Date"),Yf=Dt("File"),ep=Dt("Blob"),tp=Dt("FileList"),np=e=>no(e)&&bt(e.pipe),sp=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||bt(e.append)&&((t=eo(e))==="formdata"||t==="object"&&bt(e.toString)&&e.toString()==="[object FormData]"))},rp=Dt("URLSearchParams"),[op,ip,ap,cp]=["ReadableStream","Request","Response","Headers"].map(Dt),dp=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Xs(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let s,r;if(typeof e!="object"&&(e=[e]),hs(e))for(s=0,r=e.length;s<r;s++)t.call(null,e[s],s,e);else{const o=n?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let a;for(s=0;s<i;s++)a=o[s],t.call(null,e[a],a,e)}}function jc(e,t){t=t.toLowerCase();const n=Object.keys(e);let s=n.length,r;for(;s-- >0;)if(r=n[s],t===r.toLowerCase())return r;return null}const Mn=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Fc=e=>!zs(e)&&e!==Mn;function Ro(){const{caseless:e}=Fc(this)&&this||{},t={},n=(s,r)=>{const o=e&&jc(t,r)||r;yr(t[o])&&yr(s)?t[o]=Ro(t[o],s):yr(s)?t[o]=Ro({},s):hs(s)?t[o]=s.slice():t[o]=s};for(let s=0,r=arguments.length;s<r;s++)arguments[s]&&Xs(arguments[s],n);return t}const lp=(e,t,n,{allOwnKeys:s}={})=>(Xs(t,(r,o)=>{n&&bt(r)?e[o]=Lc(r,n):e[o]=r},{allOwnKeys:s}),e),up=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),hp=(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},fp=(e,t,n,s)=>{let r,o,i;const a={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),o=r.length;o-- >0;)i=r[o],(!s||s(i,e,t))&&!a[i]&&(t[i]=e[i],a[i]=!0);e=n!==!1&&fi(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},pp=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return s!==-1&&s===n},gp=e=>{if(!e)return null;if(hs(e))return e;let t=e.length;if(!$c(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},yp=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&fi(Uint8Array)),mp=(e,t)=>{const s=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=s.next())&&!r.done;){const o=r.value;t.call(e,o[0],o[1])}},wp=(e,t)=>{let n;const s=[];for(;(n=e.exec(t))!==null;)s.push(n);return s},bp=Dt("HTMLFormElement"),Tp=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,r){return s.toUpperCase()+r}),qa=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),vp=Dt("RegExp"),Dc=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};Xs(n,(r,o)=>{let i;(i=t(r,o,e))!==!1&&(s[o]=i||r)}),Object.defineProperties(e,s)},Ap=e=>{Dc(e,(t,n)=>{if(bt(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=e[n];if(bt(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Sp=(e,t)=>{const n={},s=r=>{r.forEach(o=>{n[o]=!0})};return hs(e)?s(e):s(String(e).split(t)),n},xp=()=>{},kp=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,To="abcdefghijklmnopqrstuvwxyz",$a="0123456789",Nc={DIGIT:$a,ALPHA:To,ALPHA_DIGIT:To+To.toUpperCase()+$a},_p=(e=16,t=Nc.ALPHA_DIGIT)=>{let n="";const{length:s}=t;for(;e--;)n+=t[Math.random()*s|0];return n};function Ep(e){return!!(e&&bt(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Pp=e=>{const t=new Array(10),n=(s,r)=>{if(no(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[r]=s;const o=hs(s)?[]:{};return Xs(s,(i,a)=>{const c=n(i,r+1);!zs(c)&&(o[a]=c)}),t[r]=void 0,o}}return s};return n(e,0)},Bp=Dt("AsyncFunction"),Ip=e=>e&&(no(e)||bt(e))&&bt(e.then)&&bt(e.catch),zc=((e,t)=>e?setImmediate:t?((n,s)=>(Mn.addEventListener("message",({source:r,data:o})=>{r===Mn&&o===n&&s.length&&s.shift()()},!1),r=>{s.push(r),Mn.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",bt(Mn.postMessage)),Op=typeof queueMicrotask<"u"?queueMicrotask.bind(Mn):typeof process<"u"&&process.nextTick||zc,k={isArray:hs,isArrayBuffer:qc,isBuffer:Jf,isFormData:sp,isArrayBufferView:Vf,isString:Xf,isNumber:$c,isBoolean:Qf,isObject:no,isPlainObject:yr,isReadableStream:op,isRequest:ip,isResponse:ap,isHeaders:cp,isUndefined:zs,isDate:Zf,isFile:Yf,isBlob:ep,isRegExp:vp,isFunction:bt,isStream:np,isURLSearchParams:rp,isTypedArray:yp,isFileList:tp,forEach:Xs,merge:Ro,extend:lp,trim:dp,stripBOM:up,inherits:hp,toFlatObject:fp,kindOf:eo,kindOfTest:Dt,endsWith:pp,toArray:gp,forEachEntry:mp,matchAll:wp,isHTMLForm:bp,hasOwnProperty:qa,hasOwnProp:qa,reduceDescriptors:Dc,freezeMethods:Ap,toObjectSet:Sp,toCamelCase:Tp,noop:xp,toFiniteNumber:kp,findKey:jc,global:Mn,isContextDefined:Fc,ALPHABET:Nc,generateString:_p,isSpecCompliantForm:Ep,toJSONObject:Pp,isAsyncFn:Bp,isThenable:Ip,setImmediate:zc,asap:Op};function se(e,t,n,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),r&&(this.response=r)}k.inherits(se,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:k.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Mc=se.prototype,Hc={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Hc[e]={value:e}});Object.defineProperties(se,Hc);Object.defineProperty(Mc,"isAxiosError",{value:!0});se.from=(e,t,n,s,r,o)=>{const i=Object.create(Mc);return k.toFlatObject(e,i,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),se.call(i,e.message,t,n,s,r),i.cause=e,i.name=e.name,o&&Object.assign(i,o),i};const Up=null;function Lo(e){return k.isPlainObject(e)||k.isArray(e)}function Cc(e){return k.endsWith(e,"[]")?e.slice(0,-2):e}function ja(e,t,n){return e?e.concat(t).map(function(r,o){return r=Cc(r),!n&&o?"["+r+"]":r}).join(n?".":""):t}function Rp(e){return k.isArray(e)&&!e.some(Lo)}const Lp=k.toFlatObject(k,{},null,function(t){return/^is[A-Z]/.test(t)});function so(e,t,n){if(!k.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=k.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,y){return!k.isUndefined(y[b])});const s=n.metaTokens,r=n.visitor||l,o=n.dots,i=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&k.isSpecCompliantForm(t);if(!k.isFunction(r))throw new TypeError("visitor must be a function");function d(g){if(g===null)return"";if(k.isDate(g))return g.toISOString();if(!c&&k.isBlob(g))throw new se("Blob is not supported. Use a Buffer instead.");return k.isArrayBuffer(g)||k.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function l(g,b,y){let E=g;if(g&&!y&&typeof g=="object"){if(k.endsWith(b,"{}"))b=s?b:b.slice(0,-2),g=JSON.stringify(g);else if(k.isArray(g)&&Rp(g)||(k.isFileList(g)||k.endsWith(b,"[]"))&&(E=k.toArray(g)))return b=Cc(b),E.forEach(function(m,_){!(k.isUndefined(m)||m===null)&&t.append(i===!0?ja([b],_,o):i===null?b:b+"[]",d(m))}),!1}return Lo(g)?!0:(t.append(ja(y,b,o),d(g)),!1)}const u=[],h=Object.assign(Lp,{defaultVisitor:l,convertValue:d,isVisitable:Lo});function p(g,b){if(!k.isUndefined(g)){if(u.indexOf(g)!==-1)throw Error("Circular reference detected in "+b.join("."));u.push(g),k.forEach(g,function(E,v){(!(k.isUndefined(E)||E===null)&&r.call(t,E,k.isString(v)?v.trim():v,b,h))===!0&&p(E,b?b.concat(v):[v])}),u.pop()}}if(!k.isObject(e))throw new TypeError("data must be an object");return p(e),t}function Fa(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function pi(e,t){this._pairs=[],e&&so(e,this,t)}const Wc=pi.prototype;Wc.append=function(t,n){this._pairs.push([t,n])};Wc.toString=function(t){const n=t?function(s){return t.call(this,s,Fa)}:Fa;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function qp(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Gc(e,t,n){if(!t)return e;const s=n&&n.encode||qp,r=n&&n.serialize;let o;if(r?o=r(t,n):o=k.isURLSearchParams(t)?t.toString():new pi(t,n).toString(s),o){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class $p{constructor(){this.handlers=[]}use(t,n,s){return this.handlers.push({fulfilled:t,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){k.forEach(this.handlers,function(s){s!==null&&t(s)})}}const Da=$p,Kc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},jp=typeof URLSearchParams<"u"?URLSearchParams:pi,Fp=typeof FormData<"u"?FormData:null,Dp=typeof Blob<"u"?Blob:null,Np={isBrowser:!0,classes:{URLSearchParams:jp,FormData:Fp,Blob:Dp},protocols:["http","https","file","blob","url","data"]},gi=typeof window<"u"&&typeof document<"u",zp=(e=>gi&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),Mp=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Hp=gi&&window.location.href||"http://localhost",Cp=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:gi,hasStandardBrowserEnv:zp,hasStandardBrowserWebWorkerEnv:Mp,origin:Hp},Symbol.toStringTag,{value:"Module"})),Lt={...Cp,...Np};function Wp(e,t){return so(e,new Lt.classes.URLSearchParams,Object.assign({visitor:function(n,s,r,o){return Lt.isNode&&k.isBuffer(n)?(this.append(s,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function Gp(e){return k.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Kp(e){const t={},n=Object.keys(e);let s;const r=n.length;let o;for(s=0;s<r;s++)o=n[s],t[o]=e[o];return t}function Jc(e){function t(n,s,r,o){let i=n[o++];if(i==="__proto__")return!0;const a=Number.isFinite(+i),c=o>=n.length;return i=!i&&k.isArray(r)?r.length:i,c?(k.hasOwnProp(r,i)?r[i]=[r[i],s]:r[i]=s,!a):((!r[i]||!k.isObject(r[i]))&&(r[i]=[]),t(n,s,r[i],o)&&k.isArray(r[i])&&(r[i]=Kp(r[i])),!a)}if(k.isFormData(e)&&k.isFunction(e.entries)){const n={};return k.forEachEntry(e,(s,r)=>{t(Gp(s),r,n,0)}),n}return null}function Jp(e,t,n){if(k.isString(e))try{return(t||JSON.parse)(e),k.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(e)}const yi={transitional:Kc,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const s=n.getContentType()||"",r=s.indexOf("application/json")>-1,o=k.isObject(t);if(o&&k.isHTMLForm(t)&&(t=new FormData(t)),k.isFormData(t))return r?JSON.stringify(Jc(t)):t;if(k.isArrayBuffer(t)||k.isBuffer(t)||k.isStream(t)||k.isFile(t)||k.isBlob(t)||k.isReadableStream(t))return t;if(k.isArrayBufferView(t))return t.buffer;if(k.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(o){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Wp(t,this.formSerializer).toString();if((a=k.isFileList(t))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return so(a?{"files[]":t}:t,c&&new c,this.formSerializer)}}return o||r?(n.setContentType("application/json",!1),Jp(t)):t}],transformResponse:[function(t){const n=this.transitional||yi.transitional,s=n&&n.forcedJSONParsing,r=this.responseType==="json";if(k.isResponse(t)||k.isReadableStream(t))return t;if(t&&k.isString(t)&&(s&&!this.responseType||r)){const i=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(a){if(i)throw a.name==="SyntaxError"?se.from(a,se.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Lt.classes.FormData,Blob:Lt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};k.forEach(["delete","get","head","post","put","patch"],e=>{yi.headers[e]={}});const mi=yi,Vp=k.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Xp=e=>{const t={};let n,s,r;return e&&e.split(`
`).forEach(function(i){r=i.indexOf(":"),n=i.substring(0,r).trim().toLowerCase(),s=i.substring(r+1).trim(),!(!n||t[n]&&Vp[n])&&(n==="set-cookie"?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)}),t},Na=Symbol("internals");function Es(e){return e&&String(e).trim().toLowerCase()}function mr(e){return e===!1||e==null?e:k.isArray(e)?e.map(mr):String(e)}function Qp(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}const Zp=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function vo(e,t,n,s,r){if(k.isFunction(s))return s.call(this,t,n);if(r&&(t=n),!!k.isString(t)){if(k.isString(s))return t.indexOf(s)!==-1;if(k.isRegExp(s))return s.test(t)}}function Yp(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,s)=>n.toUpperCase()+s)}function eg(e,t){const n=k.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+n,{value:function(r,o,i){return this[s].call(this,t,r,o,i)},configurable:!0})})}class ro{constructor(t){t&&this.set(t)}set(t,n,s){const r=this;function o(a,c,d){const l=Es(c);if(!l)throw new Error("header name must be a non-empty string");const u=k.findKey(r,l);(!u||r[u]===void 0||d===!0||d===void 0&&r[u]!==!1)&&(r[u||c]=mr(a))}const i=(a,c)=>k.forEach(a,(d,l)=>o(d,l,c));if(k.isPlainObject(t)||t instanceof this.constructor)i(t,n);else if(k.isString(t)&&(t=t.trim())&&!Zp(t))i(Xp(t),n);else if(k.isHeaders(t))for(const[a,c]of t.entries())o(c,a,s);else t!=null&&o(n,t,s);return this}get(t,n){if(t=Es(t),t){const s=k.findKey(this,t);if(s){const r=this[s];if(!n)return r;if(n===!0)return Qp(r);if(k.isFunction(n))return n.call(this,r,s);if(k.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Es(t),t){const s=k.findKey(this,t);return!!(s&&this[s]!==void 0&&(!n||vo(this,this[s],s,n)))}return!1}delete(t,n){const s=this;let r=!1;function o(i){if(i=Es(i),i){const a=k.findKey(s,i);a&&(!n||vo(s,s[a],a,n))&&(delete s[a],r=!0)}}return k.isArray(t)?t.forEach(o):o(t),r}clear(t){const n=Object.keys(this);let s=n.length,r=!1;for(;s--;){const o=n[s];(!t||vo(this,this[o],o,t,!0))&&(delete this[o],r=!0)}return r}normalize(t){const n=this,s={};return k.forEach(this,(r,o)=>{const i=k.findKey(s,o);if(i){n[i]=mr(r),delete n[o];return}const a=t?Yp(o):String(o).trim();a!==o&&delete n[o],n[a]=mr(r),s[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return k.forEach(this,(s,r)=>{s!=null&&s!==!1&&(n[r]=t&&k.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const s=new this(t);return n.forEach(r=>s.set(r)),s}static accessor(t){const s=(this[Na]=this[Na]={accessors:{}}).accessors,r=this.prototype;function o(i){const a=Es(i);s[a]||(eg(r,i),s[a]=!0)}return k.isArray(t)?t.forEach(o):o(t),this}}ro.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);k.reduceDescriptors(ro.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[n]=s}}});k.freezeMethods(ro);const qt=ro;function Ao(e,t){const n=this||mi,s=t||n,r=qt.from(s.headers);let o=s.data;return k.forEach(e,function(a){o=a.call(n,o,r.normalize(),t?t.status:void 0)}),r.normalize(),o}function Vc(e){return!!(e&&e.__CANCEL__)}function fs(e,t,n){se.call(this,e??"canceled",se.ERR_CANCELED,t,n),this.name="CanceledError"}k.inherits(fs,se,{__CANCEL__:!0});function Xc(e,t,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?e(n):t(new se("Request failed with status code "+n.status,[se.ERR_BAD_REQUEST,se.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function tg(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function ng(e,t){e=e||10;const n=new Array(e),s=new Array(e);let r=0,o=0,i;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),l=s[o];i||(i=d),n[r]=c,s[r]=d;let u=o,h=0;for(;u!==r;)h+=n[u++],u=u%e;if(r=(r+1)%e,r===o&&(o=(o+1)%e),d-i<t)return;const p=l&&d-l;return p?Math.round(h*1e3/p):void 0}}function sg(e,t){let n=0,s=1e3/t,r,o;const i=(d,l=Date.now())=>{n=l,r=null,o&&(clearTimeout(o),o=null),e.apply(null,d)};return[(...d)=>{const l=Date.now(),u=l-n;u>=s?i(d,l):(r=d,o||(o=setTimeout(()=>{o=null,i(r)},s-u)))},()=>r&&i(r)]}const Lr=(e,t,n=3)=>{let s=0;const r=ng(50,250);return sg(o=>{const i=o.loaded,a=o.lengthComputable?o.total:void 0,c=i-s,d=r(c),l=i<=a;s=i;const u={loaded:i,total:a,progress:a?i/a:void 0,bytes:c,rate:d||void 0,estimated:d&&a&&l?(a-i)/d:void 0,event:o,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(u)},n)},za=(e,t)=>{const n=e!=null;return[s=>t[0]({lengthComputable:n,total:e,loaded:s}),t[1]]},Ma=e=>(...t)=>k.asap(()=>e(...t)),rg=Lt.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let s;function r(o){let i=o;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return s=r(window.location.href),function(i){const a=k.isString(i)?r(i):i;return a.protocol===s.protocol&&a.host===s.host}}():function(){return function(){return!0}}(),og=Lt.hasStandardBrowserEnv?{write(e,t,n,s,r,o){const i=[e+"="+encodeURIComponent(t)];k.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),k.isString(s)&&i.push("path="+s),k.isString(r)&&i.push("domain="+r),o===!0&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function ig(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function ag(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Qc(e,t){return e&&!ig(t)?ag(e,t):t}const Ha=e=>e instanceof qt?{...e}:e;function Jn(e,t){t=t||{};const n={};function s(d,l,u){return k.isPlainObject(d)&&k.isPlainObject(l)?k.merge.call({caseless:u},d,l):k.isPlainObject(l)?k.merge({},l):k.isArray(l)?l.slice():l}function r(d,l,u){if(k.isUndefined(l)){if(!k.isUndefined(d))return s(void 0,d,u)}else return s(d,l,u)}function o(d,l){if(!k.isUndefined(l))return s(void 0,l)}function i(d,l){if(k.isUndefined(l)){if(!k.isUndefined(d))return s(void 0,d)}else return s(void 0,l)}function a(d,l,u){if(u in t)return s(d,l);if(u in e)return s(void 0,d)}const c={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(d,l)=>r(Ha(d),Ha(l),!0)};return k.forEach(Object.keys(Object.assign({},e,t)),function(l){const u=c[l]||r,h=u(e[l],t[l],l);k.isUndefined(h)&&u!==a||(n[l]=h)}),n}const Zc=e=>{const t=Jn({},e);let{data:n,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:o,headers:i,auth:a}=t;t.headers=i=qt.from(i),t.url=Gc(Qc(t.baseURL,t.url),e.params,e.paramsSerializer),a&&i.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let c;if(k.isFormData(n)){if(Lt.hasStandardBrowserEnv||Lt.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((c=i.getContentType())!==!1){const[d,...l]=c?c.split(";").map(u=>u.trim()).filter(Boolean):[];i.setContentType([d||"multipart/form-data",...l].join("; "))}}if(Lt.hasStandardBrowserEnv&&(s&&k.isFunction(s)&&(s=s(t)),s||s!==!1&&rg(t.url))){const d=r&&o&&og.read(o);d&&i.set(r,d)}return t},cg=typeof XMLHttpRequest<"u",dg=cg&&function(e){return new Promise(function(n,s){const r=Zc(e);let o=r.data;const i=qt.from(r.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:d}=r,l,u,h,p,g;function b(){p&&p(),g&&g(),r.cancelToken&&r.cancelToken.unsubscribe(l),r.signal&&r.signal.removeEventListener("abort",l)}let y=new XMLHttpRequest;y.open(r.method.toUpperCase(),r.url,!0),y.timeout=r.timeout;function E(){if(!y)return;const m=qt.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),I={data:!a||a==="text"||a==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:m,config:e,request:y};Xc(function(D){n(D),b()},function(D){s(D),b()},I),y=null}"onloadend"in y?y.onloadend=E:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(E)},y.onabort=function(){y&&(s(new se("Request aborted",se.ECONNABORTED,e,y)),y=null)},y.onerror=function(){s(new se("Network Error",se.ERR_NETWORK,e,y)),y=null},y.ontimeout=function(){let _=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const I=r.transitional||Kc;r.timeoutErrorMessage&&(_=r.timeoutErrorMessage),s(new se(_,I.clarifyTimeoutError?se.ETIMEDOUT:se.ECONNABORTED,e,y)),y=null},o===void 0&&i.setContentType(null),"setRequestHeader"in y&&k.forEach(i.toJSON(),function(_,I){y.setRequestHeader(I,_)}),k.isUndefined(r.withCredentials)||(y.withCredentials=!!r.withCredentials),a&&a!=="json"&&(y.responseType=r.responseType),d&&([h,g]=Lr(d,!0),y.addEventListener("progress",h)),c&&y.upload&&([u,p]=Lr(c),y.upload.addEventListener("progress",u),y.upload.addEventListener("loadend",p)),(r.cancelToken||r.signal)&&(l=m=>{y&&(s(!m||m.type?new fs(null,e,y):m),y.abort(),y=null)},r.cancelToken&&r.cancelToken.subscribe(l),r.signal&&(r.signal.aborted?l():r.signal.addEventListener("abort",l)));const v=tg(r.url);if(v&&Lt.protocols.indexOf(v)===-1){s(new se("Unsupported protocol "+v+":",se.ERR_BAD_REQUEST,e));return}y.send(o||null)})},lg=(e,t)=>{let n=new AbortController,s;const r=function(c){if(!s){s=!0,i();const d=c instanceof Error?c:this.reason;n.abort(d instanceof se?d:new fs(d instanceof Error?d.message:d))}};let o=t&&setTimeout(()=>{r(new se(`timeout ${t} of ms exceeded`,se.ETIMEDOUT))},t);const i=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(c=>{c&&(c.removeEventListener?c.removeEventListener("abort",r):c.unsubscribe(r))}),e=null)};e.forEach(c=>c&&c.addEventListener&&c.addEventListener("abort",r));const{signal:a}=n;return a.unsubscribe=i,[a,()=>{o&&clearTimeout(o),o=null}]},ug=lg,hg=function*(e,t){let n=e.byteLength;if(!t||n<t){yield e;return}let s=0,r;for(;s<n;)r=s+t,yield e.slice(s,r),s=r},fg=async function*(e,t,n){for await(const s of e)yield*hg(ArrayBuffer.isView(s)?s:await n(String(s)),t)},Ca=(e,t,n,s,r)=>{const o=fg(e,t,r);let i=0,a,c=d=>{a||(a=!0,s&&s(d))};return new ReadableStream({async pull(d){try{const{done:l,value:u}=await o.next();if(l){c(),d.close();return}let h=u.byteLength;if(n){let p=i+=h;n(p)}d.enqueue(new Uint8Array(u))}catch(l){throw c(l),l}},cancel(d){return c(d),o.return()}},{highWaterMark:2})},oo=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Yc=oo&&typeof ReadableStream=="function",qo=oo&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),ed=(e,...t)=>{try{return!!e(...t)}catch{return!1}},pg=Yc&&ed(()=>{let e=!1;const t=new Request(Lt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Wa=64*1024,$o=Yc&&ed(()=>k.isReadableStream(new Response("").body)),qr={stream:$o&&(e=>e.body)};oo&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!qr[t]&&(qr[t]=k.isFunction(e[t])?n=>n[t]():(n,s)=>{throw new se(`Response type '${t}' is not supported`,se.ERR_NOT_SUPPORT,s)})})})(new Response);const gg=async e=>{if(e==null)return 0;if(k.isBlob(e))return e.size;if(k.isSpecCompliantForm(e))return(await new Request(e).arrayBuffer()).byteLength;if(k.isArrayBufferView(e)||k.isArrayBuffer(e))return e.byteLength;if(k.isURLSearchParams(e)&&(e=e+""),k.isString(e))return(await qo(e)).byteLength},yg=async(e,t)=>{const n=k.toFiniteNumber(e.getContentLength());return n??gg(t)},mg=oo&&(async e=>{let{url:t,method:n,data:s,signal:r,cancelToken:o,timeout:i,onDownloadProgress:a,onUploadProgress:c,responseType:d,headers:l,withCredentials:u="same-origin",fetchOptions:h}=Zc(e);d=d?(d+"").toLowerCase():"text";let[p,g]=r||o||i?ug([r,o],i):[],b,y;const E=()=>{!b&&setTimeout(()=>{p&&p.unsubscribe()}),b=!0};let v;try{if(c&&pg&&n!=="get"&&n!=="head"&&(v=await yg(l,s))!==0){let H=new Request(t,{method:"POST",body:s,duplex:"half"}),D;if(k.isFormData(s)&&(D=H.headers.get("content-type"))&&l.setContentType(D),H.body){const[V,ee]=za(v,Lr(Ma(c)));s=Ca(H.body,Wa,V,ee,qo)}}k.isString(u)||(u=u?"include":"omit"),y=new Request(t,{...h,signal:p,method:n.toUpperCase(),headers:l.normalize().toJSON(),body:s,duplex:"half",credentials:u});let m=await fetch(y);const _=$o&&(d==="stream"||d==="response");if($o&&(a||_)){const H={};["status","statusText","headers"].forEach(me=>{H[me]=m[me]});const D=k.toFiniteNumber(m.headers.get("content-length")),[V,ee]=a&&za(D,Lr(Ma(a),!0))||[];m=new Response(Ca(m.body,Wa,V,()=>{ee&&ee(),_&&E()},qo),H)}d=d||"text";let I=await qr[k.findKey(qr,d)||"text"](m,e);return!_&&E(),g&&g(),await new Promise((H,D)=>{Xc(H,D,{data:I,headers:qt.from(m.headers),status:m.status,statusText:m.statusText,config:e,request:y})})}catch(m){throw E(),m&&m.name==="TypeError"&&/fetch/i.test(m.message)?Object.assign(new se("Network Error",se.ERR_NETWORK,e,y),{cause:m.cause||m}):se.from(m,m&&m.code,e,y)}}),jo={http:Up,xhr:dg,fetch:mg};k.forEach(jo,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Ga=e=>`- ${e}`,wg=e=>k.isFunction(e)||e===null||e===!1,td={getAdapter:e=>{e=k.isArray(e)?e:[e];const{length:t}=e;let n,s;const r={};for(let o=0;o<t;o++){n=e[o];let i;if(s=n,!wg(n)&&(s=jo[(i=String(n)).toLowerCase()],s===void 0))throw new se(`Unknown adapter '${i}'`);if(s)break;r[i||"#"+o]=s}if(!s){const o=Object.entries(r).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let i=t?o.length>1?`since :
`+o.map(Ga).join(`
`):" "+Ga(o[0]):"as no adapter specified";throw new se("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return s},adapters:jo};function So(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new fs(null,e)}function Ka(e){return So(e),e.headers=qt.from(e.headers),e.data=Ao.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),td.getAdapter(e.adapter||mi.adapter)(e).then(function(s){return So(e),s.data=Ao.call(e,e.transformResponse,s),s.headers=qt.from(s.headers),s},function(s){return Vc(s)||(So(e),s&&s.response&&(s.response.data=Ao.call(e,e.transformResponse,s.response),s.response.headers=qt.from(s.response.headers))),Promise.reject(s)})}const nd="1.7.4",wi={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{wi[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const Ja={};wi.transitional=function(t,n,s){function r(o,i){return"[Axios v"+nd+"] Transitional option '"+o+"'"+i+(s?". "+s:"")}return(o,i,a)=>{if(t===!1)throw new se(r(i," has been removed"+(n?" in "+n:"")),se.ERR_DEPRECATED);return n&&!Ja[i]&&(Ja[i]=!0,console.warn(r(i," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,i,a):!0}};function bg(e,t,n){if(typeof e!="object")throw new se("options must be an object",se.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let r=s.length;for(;r-- >0;){const o=s[r],i=t[o];if(i){const a=e[o],c=a===void 0||i(a,o,e);if(c!==!0)throw new se("option "+o+" must be "+c,se.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new se("Unknown option "+o,se.ERR_BAD_OPTION)}}const Fo={assertOptions:bg,validators:wi},xn=Fo.validators;class $r{constructor(t){this.defaults=t,this.interceptors={request:new Da,response:new Da}}async request(t,n){try{return await this._request(t,n)}catch(s){if(s instanceof Error){let r;Error.captureStackTrace?Error.captureStackTrace(r={}):r=new Error;const o=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?o&&!String(s.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+o):s.stack=o}catch{}}throw s}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Jn(this.defaults,n);const{transitional:s,paramsSerializer:r,headers:o}=n;s!==void 0&&Fo.assertOptions(s,{silentJSONParsing:xn.transitional(xn.boolean),forcedJSONParsing:xn.transitional(xn.boolean),clarifyTimeoutError:xn.transitional(xn.boolean)},!1),r!=null&&(k.isFunction(r)?n.paramsSerializer={serialize:r}:Fo.assertOptions(r,{encode:xn.function,serialize:xn.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=o&&k.merge(o.common,o[n.method]);o&&k.forEach(["delete","get","head","post","put","patch","common"],g=>{delete o[g]}),n.headers=qt.concat(i,o);const a=[];let c=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(n)===!1||(c=c&&b.synchronous,a.unshift(b.fulfilled,b.rejected))});const d=[];this.interceptors.response.forEach(function(b){d.push(b.fulfilled,b.rejected)});let l,u=0,h;if(!c){const g=[Ka.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,d),h=g.length,l=Promise.resolve(n);u<h;)l=l.then(g[u++],g[u++]);return l}h=a.length;let p=n;for(u=0;u<h;){const g=a[u++],b=a[u++];try{p=g(p)}catch(y){b.call(this,y);break}}try{l=Ka.call(this,p)}catch(g){return Promise.reject(g)}for(u=0,h=d.length;u<h;)l=l.then(d[u++],d[u++]);return l}getUri(t){t=Jn(this.defaults,t);const n=Qc(t.baseURL,t.url);return Gc(n,t.params,t.paramsSerializer)}}k.forEach(["delete","get","head","options"],function(t){$r.prototype[t]=function(n,s){return this.request(Jn(s||{},{method:t,url:n,data:(s||{}).data}))}});k.forEach(["post","put","patch"],function(t){function n(s){return function(o,i,a){return this.request(Jn(a||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}$r.prototype[t]=n(),$r.prototype[t+"Form"]=n(!0)});const wr=$r;class bi{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const s=this;this.promise.then(r=>{if(!s._listeners)return;let o=s._listeners.length;for(;o-- >0;)s._listeners[o](r);s._listeners=null}),this.promise.then=r=>{let o;const i=new Promise(a=>{s.subscribe(a),o=a}).then(r);return i.cancel=function(){s.unsubscribe(o)},i},t(function(o,i,a){s.reason||(s.reason=new fs(o,i,a),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new bi(function(r){t=r}),cancel:t}}}const Tg=bi;function vg(e){return function(n){return e.apply(null,n)}}function Ag(e){return k.isObject(e)&&e.isAxiosError===!0}const Do={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Do).forEach(([e,t])=>{Do[t]=e});const Sg=Do;function sd(e){const t=new wr(e),n=Lc(wr.prototype.request,t);return k.extend(n,wr.prototype,t,{allOwnKeys:!0}),k.extend(n,t,null,{allOwnKeys:!0}),n.create=function(r){return sd(Jn(e,r))},n}const ze=sd(mi);ze.Axios=wr;ze.CanceledError=fs;ze.CancelToken=Tg;ze.isCancel=Vc;ze.VERSION=nd;ze.toFormData=so;ze.AxiosError=se;ze.Cancel=ze.CanceledError;ze.all=function(t){return Promise.all(t)};ze.spread=vg;ze.isAxiosError=Ag;ze.mergeConfig=Jn;ze.AxiosHeaders=qt;ze.formToJSON=e=>Jc(k.isHTMLForm(e)?new FormData(e):e);ze.getAdapter=td.getAdapter;ze.HttpStatusCode=Sg;ze.default=ze;const xg=ze;async function kg(e){var t;const{params:n,method:s,url:r,headers:o,body:i,overrides:a}=e,c={headers:o,method:s,url:r,params:n,data:i,withCredentials:(t=a==null?void 0:a.WITH_CREDENTIALS)!=null?t:!0};try{const d=await xg(c);return{status:d.status,statusText:d.statusText,data:d.data,headers:d.headers,config:d.config}}catch(d){const l=d;if(l.response)return l.response;throw d}}var No={},_g={get exports(){return No},set exports(e){No=e}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function r(c,d,l){this.fn=c,this.context=d,this.once=l||!1}function o(c,d,l,u,h){if(typeof l!="function")throw new TypeError("The listener must be a function");var p=new r(l,u||c,h),g=n?n+d:d;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],p]:c._events[g].push(p):(c._events[g]=p,c._eventsCount++),c}function i(c,d){--c._eventsCount===0?c._events=new s:delete c._events[d]}function a(){this._events=new s,this._eventsCount=0}a.prototype.eventNames=function(){var d=[],l,u;if(this._eventsCount===0)return d;for(u in l=this._events)t.call(l,u)&&d.push(n?u.slice(1):u);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(l)):d},a.prototype.listeners=function(d){var l=n?n+d:d,u=this._events[l];if(!u)return[];if(u.fn)return[u.fn];for(var h=0,p=u.length,g=new Array(p);h<p;h++)g[h]=u[h].fn;return g},a.prototype.listenerCount=function(d){var l=n?n+d:d,u=this._events[l];return u?u.fn?1:u.length:0},a.prototype.emit=function(d,l,u,h,p,g){var b=n?n+d:d;if(!this._events[b])return!1;var y=this._events[b],E=arguments.length,v,m;if(y.fn){switch(y.once&&this.removeListener(d,y.fn,void 0,!0),E){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,l),!0;case 3:return y.fn.call(y.context,l,u),!0;case 4:return y.fn.call(y.context,l,u,h),!0;case 5:return y.fn.call(y.context,l,u,h,p),!0;case 6:return y.fn.call(y.context,l,u,h,p,g),!0}for(m=1,v=new Array(E-1);m<E;m++)v[m-1]=arguments[m];y.fn.apply(y.context,v)}else{var _=y.length,I;for(m=0;m<_;m++)switch(y[m].once&&this.removeListener(d,y[m].fn,void 0,!0),E){case 1:y[m].fn.call(y[m].context);break;case 2:y[m].fn.call(y[m].context,l);break;case 3:y[m].fn.call(y[m].context,l,u);break;case 4:y[m].fn.call(y[m].context,l,u,h);break;default:if(!v)for(I=1,v=new Array(E-1);I<E;I++)v[I-1]=arguments[I];y[m].fn.apply(y[m].context,v)}}return!0},a.prototype.on=function(d,l,u){return o(this,d,l,u,!1)},a.prototype.once=function(d,l,u){return o(this,d,l,u,!0)},a.prototype.removeListener=function(d,l,u,h){var p=n?n+d:d;if(!this._events[p])return this;if(!l)return i(this,p),this;var g=this._events[p];if(g.fn)g.fn===l&&(!h||g.once)&&(!u||g.context===u)&&i(this,p);else{for(var b=0,y=[],E=g.length;b<E;b++)(g[b].fn!==l||h&&!g[b].once||u&&g[b].context!==u)&&y.push(g[b]);y.length?this._events[p]=y.length===1?y[0]:y:i(this,p)}return this},a.prototype.removeAllListeners=function(d){var l;return d?(l=n?n+d:d,this._events[l]&&i(this,l)):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a})(_g);var rd=Object.defineProperty,Eg=Object.getOwnPropertyDescriptor,io=(e,t)=>{for(var n in t)rd(e,n,{get:t[n],enumerable:!0})},ye=(e,t,n,s)=>{for(var r=s>1?void 0:s?Eg(t,n):t,o=e.length-1,i;o>=0;o--)(i=e[o])&&(r=(s?i(t,n,r):i(r))||r);return s&&r&&rd(t,n,r),r},Pg=/^m(\/[0-9]+')+$/,od=e=>e.replace("'",""),Bg="ed25519 seed",Ig=2147483648,id=e=>{const n=Yr.create(ui,Bg).update(vc(e)).digest(),s=n.slice(0,32),r=n.slice(32);return{key:s,chainCode:r}},ad=({key:e,chainCode:t},n)=>{const s=new ArrayBuffer(4);new DataView(s).setUint32(0,n);const r=new Uint8Array(s),o=new Uint8Array([0]),i=new Uint8Array([...o,...e,...r]),a=Yr.create(ui,t).update(i).digest(),c=a.slice(0,32),d=a.slice(32);return{key:c,chainCode:d}},Og=(e,t=!0)=>{const s=Os.sign.keyPair.fromSeed(e).secretKey.subarray(32),r=new Uint8Array([0]);return t?new Uint8Array([...r,...s]):s},cd=e=>Pg.test(e)?!e.split("/").slice(1).map(od).some(Number.isNaN):!1,dd=(e,t,n=Ig)=>{if(!cd(e))throw new Error("Invalid derivation path");const{key:s,chainCode:r}=id(t);return e.split("/").slice(1).map(od).map(i=>parseInt(i,10)).reduce((i,a)=>ad(i,a+n),{key:s,chainCode:r})},Ug="1.21.0";async function Us(e){return new Promise(t=>{setTimeout(t,e)})}var Va="/v1";function Rg(e){let t=`${e}`;return t.endsWith("/")&&(t=t.substring(0,t.length-1)),t.endsWith(Va)||(t=`${t}${Va}`),t}var ld=2e5,ud=20,hd=20,jr="0x1::aptos_coin::AptosCoin";function ao(e){let t,n,s;return typeof e=="object"?(t=e.hashFunction,n=e.ttlMs,s=e.tags):t=e,(r,o,i)=>{if(i.value!=null)i.value=Xa(i.value,t,n,s);else if(i.get!=null)i.get=Xa(i.get,t,n,s);else throw new Error("Only put a Memoize() decorator on a method or get accessor.")}}function fd(e,t){return ao({ttlMs:e,hashFunction:t})}var br=new Map;function Lg(e){const t=new Set;for(const n of e){const s=br.get(n);if(s)for(const r of s)t.has(r)||(r.clear(),t.add(r))}return t.size}function Xa(e,t,n=0,s){const r=Symbol("__memoized_map__");return function(...o){let i;const a=this;a.hasOwnProperty(r)||Object.defineProperty(a,r,{configurable:!1,enumerable:!1,writable:!1,value:new Map});const c=a[r];if(Array.isArray(s))for(const d of s)br.has(d)?br.get(d).push(c):br.set(d,[c]);if(t||o.length>0||n>0){let d;t===!0?d=o.map(h=>h.toString()).join("!"):t?d=t.apply(a,o):d=o[0];const l=`${d}__timestamp`;let u=!1;if(n>0)if(!c.has(l))u=!0;else{const h=c.get(l);u=Date.now()-h>n}c.has(d)&&!u?i=c.get(d):(i=e.apply(a,o),c.set(d,i),n>0&&c.set(l,Date.now()))}else{const d=a;c.has(d)?i=c.get(d):(i=e.apply(a,o),c.set(d,i))}return i}}var Ti=class extends Error{constructor(e,t,n){super(n),this.name="AptosApiError",this.url=t.url,this.status=t.status,this.statusText=t.statusText,this.data=t.data,this.request=e}},qg={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",429:"Too Many Requests",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable"};async function $g(e,t,n,s,r,o){const i={...o==null?void 0:o.HEADERS,"x-aptos-client":`aptos-ts-sdk/${Ug}`,"content-type":s??"application/json"};return o!=null&&o.TOKEN&&(i.Authorization=`Bearer ${o==null?void 0:o.TOKEN}`),await kg({url:e,method:t,body:n,params:r,headers:i,overrides:o})}async function vi(e){const{url:t,endpoint:n,method:s,body:r,contentType:o,params:i,overrides:a}=e,c=`${t}/${n??""}`,d=await $g(c,s,r,o,i,a),l={status:d.status,statusText:d.statusText,data:d.data,headers:d.headers,config:d.config,url:c};if(l.status>=200&&l.status<300)return l;const u=qg[l.status];throw new Ti(e,l,u??"Generic Error")}async function dt(e){return await vi({...e,method:"GET"})}async function Hn(e){return await vi({...e,method:"POST"})}async function Qa(e){const t=[];let n;const s=e.params;for(;;){s.start=n;const r=await dt({url:e.url,endpoint:e.endpoint,params:s,originMethod:e.originMethod,overrides:e.overrides});if(n=r.headers["x-aptos-cursor"],delete r.headers,t.push(...r.data),n==null)break}return t}var Fr={mainnet:"https://indexer.mainnet.aptoslabs.com/v1/graphql",testnet:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",devnet:"https://indexer-devnet.staging.gcp.aptosdev.com/v1/graphql",local:"http://127.0.0.1:8090/v1/graphql"},pd={mainnet:"https://fullnode.mainnet.aptoslabs.com/v1",testnet:"https://fullnode.testnet.aptoslabs.com/v1",devnet:"https://fullnode.devnet.aptoslabs.com/v1",local:"http://127.0.0.1:8080/v1"},zo={"https://fullnode.mainnet.aptoslabs.com/v1":"mainnet","https://fullnode.testnet.aptoslabs.com/v1":"testnet","https://fullnode.devnet.aptoslabs.com/v1":"devnet","http://127.0.0.1:8080/v1":"local"},gd=(e=>(e.MAINNET="mainnet",e.TESTNET="testnet",e.DEVNET="devnet",e.LOCAL="local",e))(gd||{}),N=class Tr{static fromBuffer(t){return Tr.fromUint8Array(t)}static fromUint8Array(t){return new Tr(Tc(t))}static ensure(t){return typeof t=="string"?new Tr(t):t}constructor(t){t.startsWith("0x")?this.hexString=t:this.hexString=`0x${t}`}hex(){return this.hexString}noPrefix(){return this.hexString.slice(2)}toString(){return this.hex()}toShortString(){return`0x${this.hexString.replace(/^0x0*/,"")}`}toUint8Array(){return Uint8Array.from(vc(this.noPrefix()))}},J={};io(J,{AccountAddress:()=>he,AccountAuthenticator:()=>Un,AccountAuthenticatorEd25519:()=>Pd,AccountAuthenticatorMultiEd25519:()=>Id,ArgumentABI:()=>fo,AuthenticationKey:()=>Go,ChainId:()=>Ri,ChangeSet:()=>ty,Ed25519PublicKey:()=>Pt,Ed25519Signature:()=>cn,EntryFunction:()=>lo,EntryFunctionABI:()=>Cs,FeePayerRawTransaction:()=>Ii,Identifier:()=>st,Module:()=>ey,ModuleId:()=>Hs,MultiAgentRawTransaction:()=>Bi,MultiEd25519PublicKey:()=>co,MultiEd25519Signature:()=>Si,MultiSig:()=>Qd,MultiSigTransactionPayload:()=>Vd,RawTransaction:()=>Ts,RawTransactionWithData:()=>Pi,RotationProofChallenge:()=>sy,Script:()=>Ei,ScriptABI:()=>po,SignedTransaction:()=>uo,StructTag:()=>ws,Transaction:()=>ml,TransactionArgument:()=>Nt,TransactionArgumentAddress:()=>Ni,TransactionArgumentBool:()=>Mi,TransactionArgumentU128:()=>Fi,TransactionArgumentU16:()=>qi,TransactionArgumentU256:()=>Di,TransactionArgumentU32:()=>$i,TransactionArgumentU64:()=>ji,TransactionArgumentU8:()=>Li,TransactionArgumentU8Vector:()=>zi,TransactionAuthenticator:()=>ps,TransactionAuthenticatorEd25519:()=>xi,TransactionAuthenticatorFeePayer:()=>_d,TransactionAuthenticatorMultiAgent:()=>xd,TransactionAuthenticatorMultiEd25519:()=>ki,TransactionPayload:()=>tr,TransactionPayloadEntryFunction:()=>Ui,TransactionPayloadMultisig:()=>ol,TransactionPayloadScript:()=>Oi,TransactionScriptABI:()=>Hi,TypeArgumentABI:()=>ho,TypeTag:()=>et,TypeTagAddress:()=>Vn,TypeTagBool:()=>gs,TypeTagParser:()=>bs,TypeTagParserError:()=>Gd,TypeTagSigner:()=>zd,TypeTagStruct:()=>Xn,TypeTagU128:()=>ms,TypeTagU16:()=>Qs,TypeTagU256:()=>Ys,TypeTagU32:()=>Zs,TypeTagU64:()=>ys,TypeTagU8:()=>Rn,TypeTagVector:()=>er,UserTransaction:()=>wl,WriteSet:()=>ny,objectStructTag:()=>Xg,optionStructTag:()=>Vg,stringStructTag:()=>_i});var yd={};io(yd,{Deserializer:()=>Ai,Serializer:()=>Be,bcsSerializeBool:()=>Gg,bcsSerializeBytes:()=>_n,bcsSerializeFixedBytes:()=>Jg,bcsSerializeStr:()=>Kg,bcsSerializeU128:()=>Cg,bcsSerializeU16:()=>Mg,bcsSerializeU256:()=>Wg,bcsSerializeU32:()=>Hg,bcsSerializeU8:()=>Mo,bcsSerializeUint64:()=>zg,bcsToBytes:()=>jt,deserializeVector:()=>ht,serializeVector:()=>Ye,serializeVectorWithFunc:()=>Ng});var jg=2**8-1,Fg=2**16-1,Ms=2**32-1,is=BigInt(2**64)-BigInt(1),md=BigInt(2**128)-BigInt(1),Dg=BigInt(2**256)-BigInt(1),Be=class{constructor(){this.buffer=new ArrayBuffer(64),this.offset=0}ensureBufferWillHandleSize(e){for(;this.buffer.byteLength<this.offset+e;){const t=new ArrayBuffer(this.buffer.byteLength*2);new Uint8Array(t).set(new Uint8Array(this.buffer)),this.buffer=t}}serialize(e){this.ensureBufferWillHandleSize(e.length),new Uint8Array(this.buffer,this.offset).set(e),this.offset+=e.length}serializeWithFunction(e,t,n){this.ensureBufferWillHandleSize(t);const s=new DataView(this.buffer,this.offset);e.apply(s,[0,n,!0]),this.offset+=t}serializeStr(e){const t=new TextEncoder;this.serializeBytes(t.encode(e))}serializeBytes(e){this.serializeU32AsUleb128(e.length),this.serialize(e)}serializeFixedBytes(e){this.serialize(e)}serializeBool(e){if(typeof e!="boolean")throw new Error("Value needs to be a boolean");const t=e?1:0;this.serialize(new Uint8Array([t]))}serializeU8(e){this.serialize(new Uint8Array([e]))}serializeU16(e){this.serializeWithFunction(DataView.prototype.setUint16,2,e)}serializeU32(e){this.serializeWithFunction(DataView.prototype.setUint32,4,e)}serializeU64(e){const t=BigInt(e.toString())&BigInt(Ms),n=BigInt(e.toString())>>BigInt(32);this.serializeU32(Number(t)),this.serializeU32(Number(n))}serializeU128(e){const t=BigInt(e.toString())&is,n=BigInt(e.toString())>>BigInt(64);this.serializeU64(t),this.serializeU64(n)}serializeU256(e){const t=BigInt(e.toString())&md,n=BigInt(e.toString())>>BigInt(128);this.serializeU128(t),this.serializeU128(n)}serializeU32AsUleb128(e){let t=e;const n=[];for(;t>>>7;)n.push(t&127|128),t>>>=7;n.push(t),this.serialize(new Uint8Array(n))}getBytes(){return new Uint8Array(this.buffer).slice(0,this.offset)}};ye([Zn(0,jg)],Be.prototype,"serializeU8",1);ye([Zn(0,Fg)],Be.prototype,"serializeU16",1);ye([Zn(0,Ms)],Be.prototype,"serializeU32",1);ye([Zn(BigInt(0),is)],Be.prototype,"serializeU64",1);ye([Zn(BigInt(0),md)],Be.prototype,"serializeU128",1);ye([Zn(BigInt(0),Dg)],Be.prototype,"serializeU256",1);ye([Zn(0,Ms)],Be.prototype,"serializeU32AsUleb128",1);function Zn(e,t,n){return(s,r,o)=>{const i=o.value;return o.value=function(c){const d=BigInt(c.toString());if(d>BigInt(t.toString())||d<BigInt(e.toString()))throw new Error(n||"Value is out of range");i.apply(this,[c])},o}}var Ai=class{constructor(e){this.buffer=new ArrayBuffer(e.length),new Uint8Array(this.buffer).set(e,0),this.offset=0}read(e){if(this.offset+e>this.buffer.byteLength)throw new Error("Reached to the end of buffer");const t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}deserializeStr(){const e=this.deserializeBytes();return new TextDecoder().decode(e)}deserializeBytes(){const e=this.deserializeUleb128AsU32();return new Uint8Array(this.read(e))}deserializeFixedBytes(e){return new Uint8Array(this.read(e))}deserializeBool(){const e=new Uint8Array(this.read(1))[0];if(e!==1&&e!==0)throw new Error("Invalid boolean value");return e===1}deserializeU8(){return new DataView(this.read(1)).getUint8(0)}deserializeU16(){return new DataView(this.read(2)).getUint16(0,!0)}deserializeU32(){return new DataView(this.read(4)).getUint32(0,!0)}deserializeU64(){const e=this.deserializeU32(),t=this.deserializeU32();return BigInt(BigInt(t)<<BigInt(32)|BigInt(e))}deserializeU128(){const e=this.deserializeU64(),t=this.deserializeU64();return BigInt(t<<BigInt(64)|e)}deserializeU256(){const e=this.deserializeU128(),t=this.deserializeU128();return BigInt(t<<BigInt(128)|e)}deserializeUleb128AsU32(){let e=BigInt(0),t=0;for(;e<Ms;){const n=this.deserializeU8();if(e|=BigInt(n&127)<<BigInt(t),!(n&128))break;t+=7}if(e>Ms)throw new Error("Overflow while parsing uleb128-encoded uint32 value");return Number(e)}};function Ye(e,t){t.serializeU32AsUleb128(e.length),e.forEach(n=>{n.serialize(t)})}function Ng(e,t){const n=new Be;n.serializeU32AsUleb128(e.length);const s=n[t];return e.forEach(r=>{s.call(n,r)}),n.getBytes()}function ht(e,t){const n=e.deserializeUleb128AsU32(),s=[];for(let r=0;r<n;r+=1)s.push(t.deserialize(e));return s}function jt(e){const t=new Be;return e.serialize(t),t.getBytes()}function zg(e){const t=new Be;return t.serializeU64(e),t.getBytes()}function Mo(e){const t=new Be;return t.serializeU8(e),t.getBytes()}function Mg(e){const t=new Be;return t.serializeU16(e),t.getBytes()}function Hg(e){const t=new Be;return t.serializeU32(e),t.getBytes()}function Cg(e){const t=new Be;return t.serializeU128(e),t.getBytes()}function Wg(e){const t=new Be;return t.serializeU256(e),t.getBytes()}function Gg(e){const t=new Be;return t.serializeBool(e),t.getBytes()}function Kg(e){const t=new Be;return t.serializeStr(e),t.getBytes()}function _n(e){const t=new Be;return t.serializeBytes(e),t.getBytes()}function Jg(e){const t=new Be;return t.serializeFixedBytes(e),t.getBytes()}var Dr=class _t{constructor(t){if(t.length!==_t.LENGTH)throw new Error("Expected address of length 32");this.address=t}static fromHex(t){let n=N.ensure(t);n.noPrefix().length%2!==0&&(n=new N(`0${n.noPrefix()}`));const s=n.toUint8Array();if(s.length>_t.LENGTH)throw new Error("Hex string is too long. Address's length is 32 bytes.");if(s.length===_t.LENGTH)return new _t(s);const r=new Uint8Array(_t.LENGTH);return r.set(s,_t.LENGTH-s.length),new _t(r)}static isValid(t){if(t==="")return!1;let n=N.ensure(t);return n.noPrefix().length%2!==0&&(n=new N(`0${n.noPrefix()}`)),n.toUint8Array().length<=_t.LENGTH}toHexString(){return N.fromUint8Array(this.address).hex()}serialize(t){t.serializeFixedBytes(this.address)}static deserialize(t){return new _t(t.deserializeFixedBytes(_t.LENGTH))}static standardizeAddress(t){const n=t.toLowerCase();return`0x${(n.startsWith("0x")?n.slice(2):n).padStart(64,"0")}`}};Dr.LENGTH=32;Dr.CORE_CODE_ADDRESS=Dr.fromHex("0x1");var he=Dr,wd=class vr{constructor(t){if(t.length!==vr.LENGTH)throw new Error(`Ed25519PublicKey length should be ${vr.LENGTH}`);this.value=t}toBytes(){return this.value}serialize(t){t.serializeBytes(this.value)}static deserialize(t){const n=t.deserializeBytes();return new vr(n)}};wd.LENGTH=32;var Pt=wd,bd=class Ar{constructor(t){if(this.value=t,t.length!==Ar.LENGTH)throw new Error(`Ed25519Signature length should be ${Ar.LENGTH}`)}serialize(t){t.serializeBytes(this.value)}static deserialize(t){const n=t.deserializeBytes();return new Ar(n)}};bd.LENGTH=64;var cn=bd,Ho=32,co=class Td{constructor(t,n){if(this.public_keys=t,this.threshold=n,n>Ho)throw new Error(`"threshold" cannot be larger than ${Ho}`)}toBytes(){const t=new Uint8Array(this.public_keys.length*Pt.LENGTH+1);return this.public_keys.forEach((n,s)=>{t.set(n.value,s*Pt.LENGTH)}),t[this.public_keys.length*Pt.LENGTH]=this.threshold,t}serialize(t){t.serializeBytes(this.toBytes())}static deserialize(t){const n=t.deserializeBytes(),s=n[n.length-1],r=[];for(let o=0;o<n.length-1;o+=Pt.LENGTH){const i=o;r.push(new Pt(n.subarray(i,i+Pt.LENGTH)))}return new Td(r,s)}},vd=class Rs{constructor(t,n){if(this.signatures=t,this.bitmap=n,n.length!==Rs.BITMAP_LEN)throw new Error(`"bitmap" length should be ${Rs.BITMAP_LEN}`)}toBytes(){const t=new Uint8Array(this.signatures.length*cn.LENGTH+Rs.BITMAP_LEN);return this.signatures.forEach((n,s)=>{t.set(n.value,s*cn.LENGTH)}),t.set(this.bitmap,this.signatures.length*cn.LENGTH),t}static createBitmap(t){const s=new Uint8Array([0,0,0,0]),r=new Set;return t.forEach(o=>{if(o>=Ho)throw new Error(`Invalid bit value ${o}.`);if(r.has(o))throw new Error("Duplicated bits detected.");r.add(o);const i=Math.floor(o/8);let a=s[i];a|=128>>o%8,s[i]=a}),s}serialize(t){t.serializeBytes(this.toBytes())}static deserialize(t){const n=t.deserializeBytes(),s=n.subarray(n.length-4),r=[];for(let o=0;o<n.length-s.length;o+=cn.LENGTH){const i=o;r.push(new cn(n.subarray(i,i+cn.LENGTH)))}return new Rs(r,s)}};vd.BITMAP_LEN=4;var Si=vd,ps=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return xi.load(e);case 1:return ki.load(e);case 2:return xd.load(e);case 3:return _d.load(e);default:throw new Error(`Unknown variant index for TransactionAuthenticator: ${t}`)}}},xi=class Ad extends ps{constructor(t,n){super(),this.public_key=t,this.signature=n}serialize(t){t.serializeU32AsUleb128(0),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const n=Pt.deserialize(t),s=cn.deserialize(t);return new Ad(n,s)}},ki=class Sd extends ps{constructor(t,n){super(),this.public_key=t,this.signature=n}serialize(t){t.serializeU32AsUleb128(1),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const n=co.deserialize(t),s=Si.deserialize(t);return new Sd(n,s)}},xd=class kd extends ps{constructor(t,n,s){super(),this.sender=t,this.secondary_signer_addresses=n,this.secondary_signers=s}serialize(t){t.serializeU32AsUleb128(2),this.sender.serialize(t),Ye(this.secondary_signer_addresses,t),Ye(this.secondary_signers,t)}static load(t){const n=Un.deserialize(t),s=ht(t,he),r=ht(t,Un);return new kd(n,s,r)}},_d=class Ed extends ps{constructor(t,n,s,r){super(),this.sender=t,this.secondary_signer_addresses=n,this.secondary_signers=s,this.fee_payer=r}serialize(t){t.serializeU32AsUleb128(3),this.sender.serialize(t),Ye(this.secondary_signer_addresses,t),Ye(this.secondary_signers,t),this.fee_payer.address.serialize(t),this.fee_payer.authenticator.serialize(t)}static load(t){const n=Un.deserialize(t),s=ht(t,he),r=ht(t,Un),o=he.deserialize(t),i=Un.deserialize(t),a={address:o,authenticator:i};return new Ed(n,s,r,a)}},Un=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return Pd.load(e);case 1:return Id.load(e);default:throw new Error(`Unknown variant index for AccountAuthenticator: ${t}`)}}},Pd=class Bd extends Un{constructor(t,n){super(),this.public_key=t,this.signature=n}serialize(t){t.serializeU32AsUleb128(0),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const n=Pt.deserialize(t),s=cn.deserialize(t);return new Bd(n,s)}},Id=class Od extends Un{constructor(t,n){super(),this.public_key=t,this.signature=n}serialize(t){t.serializeU32AsUleb128(1),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const n=co.deserialize(t),s=Si.deserialize(t);return new Od(n,s)}},st=class Ud{constructor(t){this.value=t}serialize(t){t.serializeStr(this.value)}static deserialize(t){const n=t.deserializeStr();return new Ud(n)}},et=class{static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return gs.load(t);case 1:return Rn.load(t);case 2:return ys.load(t);case 3:return ms.load(t);case 4:return Vn.load(t);case 5:return zd.load(t);case 6:return er.load(t);case 7:return Xn.load(t);case 8:return Qs.load(t);case 9:return Zs.load(t);case 10:return Ys.load(t);default:throw new Error(`Unknown variant index for TypeTag: ${n}`)}}},gs=class Rd extends et{serialize(t){t.serializeU32AsUleb128(0)}static load(t){return new Rd}},Rn=class Ld extends et{serialize(t){t.serializeU32AsUleb128(1)}static load(t){return new Ld}},Qs=class qd extends et{serialize(t){t.serializeU32AsUleb128(8)}static load(t){return new qd}},Zs=class $d extends et{serialize(t){t.serializeU32AsUleb128(9)}static load(t){return new $d}},ys=class jd extends et{serialize(t){t.serializeU32AsUleb128(2)}static load(t){return new jd}},ms=class Fd extends et{serialize(t){t.serializeU32AsUleb128(3)}static load(t){return new Fd}},Ys=class Dd extends et{serialize(t){t.serializeU32AsUleb128(10)}static load(t){return new Dd}},Vn=class Nd extends et{serialize(t){t.serializeU32AsUleb128(4)}static load(t){return new Nd}},zd=class Md extends et{serialize(t){t.serializeU32AsUleb128(5)}static load(t){return new Md}},er=class Hd extends et{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(6),this.value.serialize(t)}static load(t){const n=et.deserialize(t);return new Hd(n)}},Xn=class Cd extends et{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(7),this.value.serialize(t)}static load(t){const n=ws.deserialize(t);return new Cd(n)}isStringTypeTag(){return this.value.module_name.value==="string"&&this.value.name.value==="String"&&this.value.address.toHexString()===he.CORE_CODE_ADDRESS.toHexString()}},ws=class Co{constructor(t,n,s,r){this.address=t,this.module_name=n,this.name=s,this.type_args=r}static fromString(t){const n=new bs(t).parseTypeTag();return new Co(n.value.address,n.value.module_name,n.value.name,n.value.type_args)}serialize(t){this.address.serialize(t),this.module_name.serialize(t),this.name.serialize(t),Ye(this.type_args,t)}static deserialize(t){const n=he.deserialize(t),s=st.deserialize(t),r=st.deserialize(t),o=ht(t,et);return new Co(n,s,r,o)}},_i=new ws(he.fromHex("0x1"),new st("string"),new st("String"),[]);function Vg(e){return new ws(he.fromHex("0x1"),new st("option"),new st("Option"),[e])}function Xg(e){return new ws(he.fromHex("0x1"),new st("object"),new st("Object"),[e])}function En(e){throw new Gd(e)}function Za(e){return!!e.match(/\s/)}function Ya(e){return!!e.match(/[_A-Za-z0-9]/g)}function Qg(e){return!!e.match(/T\d+/g)}function Zg(e,t){const n=e[t];if(n===":"){if(e.slice(t,t+2)==="::")return[["COLON","::"],2];En("Unrecognized token.")}else{if(n==="<")return[["LT","<"],1];if(n===">")return[["GT",">"],1];if(n===",")return[["COMMA",","],1];if(Za(n)){let s="";for(let r=t;r<e.length;r+=1){const o=e[r];if(Za(o))s=`${s}${o}`;else break}return[["SPACE",s],s.length]}else if(Ya(n)){let s="";for(let r=t;r<e.length;r+=1){const o=e[r];if(Ya(o))s=`${s}${o}`;else break}return Qg(s)?[["GENERIC",s],s.length]:[["IDENT",s],s.length]}}throw new Error("Unrecognized token.")}function Yg(e){let t=0;const n=[];for(;t<e.length;){const[s,r]=Zg(e,t);s[0]!=="SPACE"&&n.push(s),t+=r}return n}var bs=class Wd{constructor(t,n){this.typeTags=[],this.tokens=Yg(t),this.typeTags=n||[]}consume(t){const n=this.tokens.shift();(!n||n[1]!==t)&&En("Invalid type tag.")}consumeWholeGeneric(){for(this.consume("<");this.tokens[0][1]!==">";)this.tokens[0][1]==="<"?this.consumeWholeGeneric():this.tokens.shift();this.consume(">")}parseCommaList(t,n){const s=[];for(this.tokens.length<=0&&En("Invalid type tag.");this.tokens[0][1]!==t&&(s.push(this.parseTypeTag()),!(this.tokens.length>0&&this.tokens[0][1]===t||(this.consume(","),this.tokens.length>0&&this.tokens[0][1]===t&&n)));)this.tokens.length<=0&&En("Invalid type tag.");return s}parseTypeTag(){this.tokens.length===0&&En("Invalid type tag.");const[t,n]=this.tokens.shift();if(n==="u8")return new Rn;if(n==="u16")return new Qs;if(n==="u32")return new Zs;if(n==="u64")return new ys;if(n==="u128")return new ms;if(n==="u256")return new Ys;if(n==="bool")return new gs;if(n==="address")return new Vn;if(n==="vector"){this.consume("<");const s=this.parseTypeTag();return this.consume(">"),new er(s)}if(n==="string")return new Xn(_i);if(t==="IDENT"&&(n.startsWith("0x")||n.startsWith("0X"))){const s=he.fromHex(n);this.consume("::");const[r,o]=this.tokens.shift();r!=="IDENT"&&En("Invalid type tag."),this.consume("::");const[i,a]=this.tokens.shift();if(i!=="IDENT"&&En("Invalid type tag."),he.CORE_CODE_ADDRESS.toHexString()===s.toHexString()&&o==="object"&&a==="Object")return this.consumeWholeGeneric(),new Vn;let c=[];this.tokens.length>0&&this.tokens[0][1]==="<"&&(this.consume("<"),c=this.parseCommaList(">",!0),this.consume(">"));const d=new ws(s,new st(o),new st(a),c);return new Xn(d)}if(t==="GENERIC"){this.typeTags.length===0&&En("Can't convert generic type since no typeTags were specified.");const s=parseInt(n.substring(1),10);return new Wd(this.typeTags[s]).parseTypeTag()}throw new Error("Invalid type tag.")}},Gd=class extends Error{constructor(e){super(e),this.name="TypeTagParserError"}},Ts=class Kd{constructor(t,n,s,r,o,i,a){this.sender=t,this.sequence_number=n,this.payload=s,this.max_gas_amount=r,this.gas_unit_price=o,this.expiration_timestamp_secs=i,this.chain_id=a}serialize(t){this.sender.serialize(t),t.serializeU64(this.sequence_number),this.payload.serialize(t),t.serializeU64(this.max_gas_amount),t.serializeU64(this.gas_unit_price),t.serializeU64(this.expiration_timestamp_secs),this.chain_id.serialize(t)}static deserialize(t){const n=he.deserialize(t),s=t.deserializeU64(),r=tr.deserialize(t),o=t.deserializeU64(),i=t.deserializeU64(),a=t.deserializeU64(),c=Ri.deserialize(t);return new Kd(n,s,r,o,i,a,c)}},Ei=class Jd{constructor(t,n,s){this.code=t,this.ty_args=n,this.args=s}serialize(t){t.serializeBytes(this.code),Ye(this.ty_args,t),Ye(this.args,t)}static deserialize(t){const n=t.deserializeBytes(),s=ht(t,et),r=ht(t,Nt);return new Jd(n,s,r)}},lo=class Sr{constructor(t,n,s,r){this.module_name=t,this.function_name=n,this.ty_args=s,this.args=r}static natural(t,n,s,r){return new Sr(Hs.fromStr(t),new st(n),s,r)}static natual(t,n,s,r){return Sr.natural(t,n,s,r)}serialize(t){this.module_name.serialize(t),this.function_name.serialize(t),Ye(this.ty_args,t),t.serializeU32AsUleb128(this.args.length),this.args.forEach(n=>{t.serializeBytes(n)})}static deserialize(t){const n=Hs.deserialize(t),s=st.deserialize(t),r=ht(t,et),o=t.deserializeUleb128AsU32(),i=[];for(let c=0;c<o;c+=1)i.push(t.deserializeBytes());const a=i;return new Sr(n,s,r,a)}},Vd=class Xd{constructor(t){this.transaction_payload=t}serialize(t){t.serializeU32AsUleb128(0),this.transaction_payload.serialize(t)}static deserialize(t){return t.deserializeUleb128AsU32(),new Xd(lo.deserialize(t))}},Qd=class Zd{constructor(t,n){this.multisig_address=t,this.transaction_payload=n}serialize(t){this.multisig_address.serialize(t),this.transaction_payload===void 0?t.serializeBool(!1):(t.serializeBool(!0),this.transaction_payload.serialize(t))}static deserialize(t){const n=he.deserialize(t),s=t.deserializeBool();let r;return s&&(r=Vd.deserialize(t)),new Zd(n,r)}},ey=class Yd{constructor(t){this.code=t}serialize(t){t.serializeBytes(this.code)}static deserialize(t){const n=t.deserializeBytes();return new Yd(n)}},Hs=class Wo{constructor(t,n){this.address=t,this.name=n}static fromStr(t){const n=t.split("::");if(n.length!==2)throw new Error("Invalid module id.");return new Wo(he.fromHex(new N(n[0])),new st(n[1]))}serialize(t){this.address.serialize(t),this.name.serialize(t)}static deserialize(t){const n=he.deserialize(t),s=st.deserialize(t);return new Wo(n,s)}},ty=class{serialize(e){throw new Error("Not implemented.")}static deserialize(e){throw new Error("Not implemented.")}},ny=class{serialize(e){throw new Error("Not implmented.")}static deserialize(e){throw new Error("Not implmented.")}},uo=class el{constructor(t,n){this.raw_txn=t,this.authenticator=n}serialize(t){this.raw_txn.serialize(t),this.authenticator.serialize(t)}static deserialize(t){const n=Ts.deserialize(t),s=ps.deserialize(t);return new el(n,s)}},Pi=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return Bi.load(e);case 1:return Ii.load(e);default:throw new Error(`Unknown variant index for RawTransactionWithData: ${t}`)}}},Bi=class tl extends Pi{constructor(t,n){super(),this.raw_txn=t,this.secondary_signer_addresses=n}serialize(t){t.serializeU32AsUleb128(0),this.raw_txn.serialize(t),Ye(this.secondary_signer_addresses,t)}static load(t){const n=Ts.deserialize(t),s=ht(t,he);return new tl(n,s)}},Ii=class nl extends Pi{constructor(t,n,s){super(),this.raw_txn=t,this.secondary_signer_addresses=n,this.fee_payer_address=s}serialize(t){t.serializeU32AsUleb128(1),this.raw_txn.serialize(t),Ye(this.secondary_signer_addresses,t),this.fee_payer_address.serialize(t)}static load(t){const n=Ts.deserialize(t),s=ht(t,he),r=he.deserialize(t);return new nl(n,s,r)}},tr=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return Oi.load(e);case 2:return Ui.load(e);case 3:return ol.load(e);default:throw new Error(`Unknown variant index for TransactionPayload: ${t}`)}}},Oi=class sl extends tr{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(0),this.value.serialize(t)}static load(t){const n=Ei.deserialize(t);return new sl(n)}},Ui=class rl extends tr{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(2),this.value.serialize(t)}static load(t){const n=lo.deserialize(t);return new rl(n)}},ol=class il extends tr{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(3),this.value.serialize(t)}static load(t){const n=Qd.deserialize(t);return new il(n)}},Ri=class al{constructor(t){this.value=t}serialize(t){t.serializeU8(this.value)}static deserialize(t){const n=t.deserializeU8();return new al(n)}},Nt=class{static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return Li.load(t);case 1:return ji.load(t);case 2:return Fi.load(t);case 3:return Ni.load(t);case 4:return zi.load(t);case 5:return Mi.load(t);case 6:return qi.load(t);case 7:return $i.load(t);case 8:return Di.load(t);default:throw new Error(`Unknown variant index for TransactionArgument: ${n}`)}}},Li=class cl extends Nt{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(0),t.serializeU8(this.value)}static load(t){const n=t.deserializeU8();return new cl(n)}},qi=class dl extends Nt{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(6),t.serializeU16(this.value)}static load(t){const n=t.deserializeU16();return new dl(n)}},$i=class ll extends Nt{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(7),t.serializeU32(this.value)}static load(t){const n=t.deserializeU32();return new ll(n)}},ji=class ul extends Nt{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(1),t.serializeU64(this.value)}static load(t){const n=t.deserializeU64();return new ul(n)}},Fi=class hl extends Nt{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(2),t.serializeU128(this.value)}static load(t){const n=t.deserializeU128();return new hl(n)}},Di=class fl extends Nt{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(8),t.serializeU256(this.value)}static load(t){const n=t.deserializeU256();return new fl(n)}},Ni=class pl extends Nt{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(3),this.value.serialize(t)}static load(t){const n=he.deserialize(t);return new pl(n)}},zi=class gl extends Nt{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(4),t.serializeBytes(this.value)}static load(t){const n=t.deserializeBytes();return new gl(n)}},Mi=class yl extends Nt{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(5),t.serializeBool(this.value)}static load(t){const n=t.deserializeBool();return new yl(n)}},ml=class{getHashSalt(){const t=us.create();return t.update("APTOS::Transaction"),t.digest()}static deserialize(t){const n=t.deserializeUleb128AsU32();switch(n){case 0:return wl.load(t);default:throw new Error(`Unknown variant index for Transaction: ${n}`)}}},wl=class bl extends ml{constructor(t){super(),this.value=t}hash(){const t=us.create();return t.update(this.getHashSalt()),t.update(jt(this)),t.digest()}serialize(t){t.serializeU32AsUleb128(0),this.value.serialize(t)}static load(t){return new bl(uo.deserialize(t))}},ho=class Tl{constructor(t){this.name=t}serialize(t){t.serializeStr(this.name)}static deserialize(t){const n=t.deserializeStr();return new Tl(n)}},fo=class vl{constructor(t,n){this.name=t,this.type_tag=n}serialize(t){t.serializeStr(this.name),this.type_tag.serialize(t)}static deserialize(t){const n=t.deserializeStr(),s=et.deserialize(t);return new vl(n,s)}},po=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return Hi.load(e);case 1:return Cs.load(e);default:throw new Error(`Unknown variant index for TransactionPayload: ${t}`)}}},Hi=class Al extends po{constructor(t,n,s,r,o){super(),this.name=t,this.doc=n,this.code=s,this.ty_args=r,this.args=o}serialize(t){t.serializeU32AsUleb128(0),t.serializeStr(this.name),t.serializeStr(this.doc),t.serializeBytes(this.code),Ye(this.ty_args,t),Ye(this.args,t)}static load(t){const n=t.deserializeStr(),s=t.deserializeStr(),r=t.deserializeBytes(),o=ht(t,ho),i=ht(t,fo);return new Al(n,s,r,o,i)}},Cs=class Sl extends po{constructor(t,n,s,r,o){super(),this.name=t,this.module_name=n,this.doc=s,this.ty_args=r,this.args=o}serialize(t){t.serializeU32AsUleb128(1),t.serializeStr(this.name),this.module_name.serialize(t),t.serializeStr(this.doc),Ye(this.ty_args,t),Ye(this.args,t)}static load(t){const n=t.deserializeStr(),s=Hs.deserialize(t),r=t.deserializeStr(),o=ht(t,ho),i=ht(t,fo);return new Sl(n,s,r,o,i)}},nr=class ns{constructor(t){if(t.length!==ns.LENGTH)throw new Error("Expected a byte array of length 32");this.bytes=t}static fromMultiEd25519PublicKey(t){const n=t.toBytes(),s=new Uint8Array(n.length+1);s.set(n),s.set([ns.MULTI_ED25519_SCHEME],n.length);const r=us.create();return r.update(s),new ns(r.digest())}static fromEd25519PublicKey(t){const n=t.value,s=new Uint8Array(n.length+1);s.set(n),s.set([ns.ED25519_SCHEME],n.length);const r=us.create();return r.update(s),new ns(r.digest())}derivedAddress(){return N.fromUint8Array(this.bytes)}};nr.LENGTH=32;nr.MULTI_ED25519_SCHEME=1;nr.ED25519_SCHEME=0;nr.DERIVE_RESOURCE_ACCOUNT_SCHEME=255;var Go=nr,sy=class{constructor(e,t,n,s,r,o,i){this.accountAddress=e,this.moduleName=t,this.structName=n,this.sequenceNumber=s,this.originator=r,this.currentAuthKey=o,this.newPublicKey=i}serialize(e){this.accountAddress.serialize(e),e.serializeStr(this.moduleName),e.serializeStr(this.structName),e.serializeU64(this.sequenceNumber),this.originator.serialize(e),this.currentAuthKey.serialize(e),e.serializeBytes(this.newPublicKey)}},xl=class xr{static fromAptosAccountObject(t){return new xr(N.ensure(t.privateKeyHex).toUint8Array(),t.address)}static isValidPath(t){return/^m\/44'\/637'\/[0-9]+'\/[0-9]+'\/[0-9]+'+$/.test(t)}static fromDerivePath(t,n){if(!xr.isValidPath(t))throw new Error("Invalid derivation path");const s=n.trim().split(/\s+/).map(o=>o.toLowerCase()).join(" "),{key:r}=dd(t,Tc(jf(s)));return new xr(r)}constructor(t,n){t?this.signingKey=Os.sign.keyPair.fromSeed(t.slice(0,32)):this.signingKey=Os.sign.keyPair(),this.accountAddress=N.ensure(n||this.authKey().hex())}address(){return this.accountAddress}authKey(){const t=new Pt(this.signingKey.publicKey);return Go.fromEd25519PublicKey(t).derivedAddress()}static getResourceAccountAddress(t,n){const s=jt(he.fromHex(t)),r=new Uint8Array([...s,...n,Go.DERIVE_RESOURCE_ACCOUNT_SCHEME]),o=us.create();return o.update(r),N.fromUint8Array(o.digest())}static getCollectionID(t,n){const s=new TextEncoder().encode(`${t}::${n}`),r=pf.create();return r.update(s),N.fromUint8Array(r.digest())}pubKey(){return N.fromUint8Array(this.signingKey.publicKey)}signBuffer(t){const n=Os.sign.detached(t,this.signingKey.secretKey);return N.fromUint8Array(n)}signHexString(t){const n=N.ensure(t).toUint8Array();return this.signBuffer(n)}verifySignature(t,n){const s=N.ensure(t).toUint8Array(),r=N.ensure(n).toUint8Array();return Os.sign.detached.verify(s,r,this.signingKey.publicKey)}toPrivateKeyObject(){return{address:this.address().hex(),publicKeyHex:this.pubKey().hex(),privateKeyHex:N.fromUint8Array(this.signingKey.secretKey.slice(0,32)).hex()}}};ye([ao()],xl.prototype,"authKey",1);var Nr=xl;function Bt(e){return e instanceof Nr?e.address():N.ensure(e)}var sr=`
    fragment CurrentTokenOwnershipFields on current_token_ownerships_v2 {
  token_standard
  token_properties_mutated_v1
  token_data_id
  table_type_v1
  storage_id
  property_version_v1
  owner_address
  last_transaction_version
  last_transaction_timestamp
  is_soulbound_v2
  is_fungible_v2
  amount
  current_token_data {
    collection_id
    description
    is_fungible_v2
    largest_property_version_v1
    last_transaction_timestamp
    last_transaction_version
    maximum
    supply
    token_data_id
    token_name
    token_properties
    token_standard
    token_uri
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      max_supply
      mutable_description
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
  }
}
    `,ry=`
    fragment TokenDataFields on current_token_datas {
  creator_address
  collection_name
  description
  metadata_uri
  name
  token_data_id_hash
  collection_data_id_hash
}
    `,oy=`
    fragment CollectionDataFields on current_collection_datas {
  metadata_uri
  supply
  description
  collection_name
  collection_data_id_hash
  table_handle
  creator_address
}
    `,kl=`
    fragment TokenActivitiesFields on token_activities_v2 {
  after_value
  before_value
  entry_function_id_str
  event_account_address
  event_index
  from_address
  is_fungible_v2
  property_version_v1
  to_address
  token_amount
  token_data_id
  token_standard
  transaction_timestamp
  transaction_version
  type
}
    `,iy=`
    query getAccountCoinsDataCount($address: String) {
  current_fungible_asset_balances_aggregate(
    where: {owner_address: {_eq: $address}}
  ) {
    aggregate {
      count
    }
  }
}
    `,ay=`
    query getAccountCoinsData($where_condition: current_fungible_asset_balances_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_fungible_asset_balances_order_by!]) {
  current_fungible_asset_balances(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    amount
    asset_type
    is_frozen
    is_primary
    last_transaction_timestamp
    last_transaction_version
    owner_address
    storage_id
    token_standard
    metadata {
      token_standard
      symbol
      supply_aggregator_table_key_v1
      supply_aggregator_table_handle_v1
      project_uri
      name
      last_transaction_version
      last_transaction_timestamp
      icon_uri
      decimals
      creator_address
      asset_type
    }
  }
}
    `,cy=`
    query getAccountCurrentTokens($address: String!, $offset: Int, $limit: Int) {
  current_token_ownerships(
    where: {owner_address: {_eq: $address}, amount: {_gt: 0}}
    order_by: [{last_transaction_version: desc}, {creator_address: asc}, {collection_name: asc}, {name: asc}]
    offset: $offset
    limit: $limit
  ) {
    amount
    current_token_data {
      ...TokenDataFields
    }
    current_collection_data {
      ...CollectionDataFields
    }
    last_transaction_version
    property_version
  }
}
    ${ry}
${oy}`,dy=`
    query getAccountTokensCount($where_condition: current_token_ownerships_v2_bool_exp, $offset: Int, $limit: Int) {
  current_token_ownerships_v2_aggregate(
    where: $where_condition
    offset: $offset
    limit: $limit
  ) {
    aggregate {
      count
    }
  }
}
    `,ly=`
    query getAccountTransactionsCount($address: String) {
  account_transactions_aggregate(where: {account_address: {_eq: $address}}) {
    aggregate {
      count
    }
  }
}
    `,uy=`
    query getAccountTransactionsData($where_condition: account_transactions_bool_exp!, $offset: Int, $limit: Int, $order_by: [account_transactions_order_by!]) {
  account_transactions(
    where: $where_condition
    order_by: $order_by
    limit: $limit
    offset: $offset
  ) {
    token_activities_v2 {
      ...TokenActivitiesFields
    }
    transaction_version
    account_address
  }
}
    ${kl}`,hy=`
    query getCollectionData($where_condition: current_collections_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_collections_v2_order_by!]) {
  current_collections_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    collection_id
    collection_name
    creator_address
    current_supply
    description
    last_transaction_timestamp
    last_transaction_version
    max_supply
    mutable_description
    mutable_uri
    table_handle_v1
    token_standard
    total_minted_v2
    uri
  }
}
    `,fy=`
    query getCollectionsWithOwnedTokens($where_condition: current_collection_ownership_v2_view_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_collection_ownership_v2_view_order_by!]) {
  current_collection_ownership_v2_view(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      mutable_description
      max_supply
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
    collection_id
    collection_name
    collection_uri
    creator_address
    distinct_tokens
    last_transaction_version
    owner_address
    single_token_uri
  }
}
    `,py=`
    query getCurrentObjects($where_condition: current_objects_bool_exp, $offset: Int, $limit: Int, $order_by: [current_objects_order_by!]) {
  current_objects(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    allow_ungated_transfer
    state_key_hash
    owner_address
    object_address
    last_transaction_version
    last_guid_creation_num
    is_deleted
  }
}
    `,gy=`
    query getDelegatedStakingActivities($delegatorAddress: String, $poolAddress: String) {
  delegated_staking_activities(
    where: {delegator_address: {_eq: $delegatorAddress}, pool_address: {_eq: $poolAddress}}
  ) {
    amount
    delegator_address
    event_index
    event_type
    pool_address
    transaction_version
  }
}
    `,yy=`
    query getIndexerLedgerInfo {
  ledger_infos {
    chain_id
  }
}
    `,my=`
    query getNumberOfDelegators($poolAddress: String) {
  num_active_delegator_per_pool(
    where: {pool_address: {_eq: $poolAddress}, num_active_delegator: {_gt: "0"}}
    distinct_on: pool_address
  ) {
    num_active_delegator
    pool_address
  }
}
    `,wy=`
    query getOwnedTokens($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${sr}`,by=`
    query getOwnedTokensByTokenData($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${sr}`,Ty=`
    query getTokenActivities($where_condition: token_activities_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [token_activities_v2_order_by!]) {
  token_activities_v2(
    where: $where_condition
    order_by: $order_by
    offset: $offset
    limit: $limit
  ) {
    ...TokenActivitiesFields
  }
}
    ${kl}`,vy=`
    query getTokenActivitiesCount($token_id: String) {
  token_activities_v2_aggregate(where: {token_data_id: {_eq: $token_id}}) {
    aggregate {
      count
    }
  }
}
    `,Ay=`
    query getTokenCurrentOwnerData($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${sr}`,Sy=`
    query getTokenData($where_condition: current_token_datas_v2_bool_exp, $offset: Int, $limit: Int, $order_by: [current_token_datas_v2_order_by!]) {
  current_token_datas_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    collection_id
    description
    is_fungible_v2
    largest_property_version_v1
    last_transaction_timestamp
    last_transaction_version
    maximum
    supply
    token_data_id
    token_name
    token_properties
    token_standard
    token_uri
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      max_supply
      mutable_description
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
  }
}
    `,xy=`
    query getTokenOwnedFromCollection($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${sr}`,ky=`
    query getTokenOwnersData($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${sr}`,_y=`
    query getTopUserTransactions($limit: Int) {
  user_transactions(limit: $limit, order_by: {version: desc}) {
    version
  }
}
    `,Ey=`
    query getUserTransactions($where_condition: user_transactions_bool_exp!, $offset: Int, $limit: Int, $order_by: [user_transactions_order_by!]) {
  user_transactions(
    order_by: $order_by
    where: $where_condition
    limit: $limit
    offset: $offset
  ) {
    version
  }
}
    `;function go(e,t,n){if(!(t!=null&&t.includes(typeof e)))throw new Error(n||`Invalid arg: ${e} type should be ${t instanceof Array?t.join(" or "):t}`)}function Ci(e){if(go(e,["boolean","string"]),typeof e=="boolean")return e;if(e==="true")return!0;if(e==="false")return!1;throw new Error("Invalid boolean string.")}function Gn(e){if(go(e,["number","string"]),typeof e=="number")return e;const t=Number.parseInt(e,10);if(Number.isNaN(t))throw new Error("Invalid number string.");return t}function Kn(e){return go(e,["number","bigint","string"]),BigInt(e)}function yo(e,t,n){Wi(e,t,n)}function Wi(e,t,n,s){if(t instanceof gs)n.serializeBool(Ci(e));else if(t instanceof Rn)n.serializeU8(Gn(e));else if(t instanceof Qs)n.serializeU16(Gn(e));else if(t instanceof Zs)n.serializeU32(Gn(e));else if(t instanceof ys)n.serializeU64(Kn(e));else if(t instanceof ms)n.serializeU128(Kn(e));else if(t instanceof Ys)n.serializeU256(Kn(e));else if(t instanceof Vn)_l(e,n);else if(t instanceof er)Py(e,t,n);else if(t instanceof Xn)By(e,t,n);else throw new Error("Unsupported arg type.")}function _l(e,t){let n;if(typeof e=="string"||e instanceof N)n=he.fromHex(e);else if(e instanceof he)n=e;else throw new Error("Invalid account address.");n.serialize(t)}function Py(e,t,n,s){if(t.value instanceof Rn){if(e instanceof Uint8Array){n.serializeBytes(e);return}if(e instanceof N){n.serializeBytes(e.toUint8Array());return}if(typeof e=="string"){n.serializeStr(e);return}}if(!Array.isArray(e))throw new Error("Invalid vector args.");n.serializeU32AsUleb128(e.length),e.forEach(r=>Wi(r,t.value,n))}function By(e,t,n,s){const{address:r,module_name:o,name:i,type_args:a}=t.value,c=`${N.fromUint8Array(r.address).toShortString()}::${o.value}::${i.value}`;if(c==="0x1::string::String")go(e,["string"]),n.serializeStr(e);else if(c==="0x1::object::Object")_l(e,n);else if(c==="0x1::option::Option"){if(a.length!==1)throw new Error(`Option has the wrong number of type arguments ${a.length}`);Iy(e,a[0],n)}else throw new Error("Unsupported struct type in function argument")}function Iy(e,t,n,s){e==null?n.serializeU32AsUleb128(0):(n.serializeU32AsUleb128(1),Wi(e,t,n))}function El(e,t){if(t instanceof gs)return new Mi(Ci(e));if(t instanceof Rn)return new Li(Gn(e));if(t instanceof Qs)return new qi(Gn(e));if(t instanceof Zs)return new $i(Gn(e));if(t instanceof ys)return new ji(Kn(e));if(t instanceof ms)return new Fi(Kn(e));if(t instanceof Ys)return new Di(Kn(e));if(t instanceof Vn){let n;if(typeof e=="string"||e instanceof N)n=he.fromHex(e);else if(e instanceof he)n=e;else throw new Error("Invalid account address.");return new Ni(n)}if(t instanceof er&&t.value instanceof Rn){if(!(e instanceof Uint8Array))throw new Error(`${e} should be an instance of Uint8Array`);return new zi(e)}throw new Error("Unknown type for TransactionArgument.")}var Oy="APTOS::RawTransaction",ec="APTOS::RawTransactionWithData",Ut=class{constructor(e,t){this.rawTxnBuilder=t,this.signingFunction=e}build(e,t,n){if(!this.rawTxnBuilder)throw new Error("this.rawTxnBuilder doesn't exist.");return this.rawTxnBuilder.build(e,t,n)}static getSigningMessage(e){const t=us.create();if(e instanceof Ts)t.update(Oy);else if(e instanceof Bi)t.update(ec);else if(e instanceof Ii)t.update(ec);else throw new Error("Unknown transaction type.");const n=t.digest(),s=jt(e),r=new Uint8Array(n.length+s.length);return r.set(n),r.set(s,n.length),r}},kr=class extends Ut{constructor(e,t,n){super(e,n),this.publicKey=t}rawToSigned(e){const t=Ut.getSigningMessage(e),n=this.signingFunction(t),s=new xi(new Pt(this.publicKey),n);return new uo(e,s)}sign(e){return jt(this.rawToSigned(e))}},Pl=class extends Ut{constructor(e,t){super(e),this.publicKey=t}rawToSigned(e){const t=Ut.getSigningMessage(e),n=this.signingFunction(t),s=new ki(this.publicKey,n);return new uo(e,s)}sign(e){return jt(this.rawToSigned(e))}},Bl=class Ko{constructor(t,n){this.abiMap=new Map,t.forEach(s=>{const r=new Ai(s),o=po.deserialize(r);let i;if(o instanceof Cs){const a=o,{address:c,name:d}=a.module_name;i=`${N.fromUint8Array(c.address).toShortString()}::${d.value}::${a.name}`}else i=o.name;if(this.abiMap.has(i))throw new Error("Found conflicting ABI interfaces");this.abiMap.set(i,o)}),this.builderConfig={maxGasAmount:BigInt(ld),expSecFromNow:ud,...n}}static toBCSArgs(t,n){if(t.length!==n.length)throw new Error("Wrong number of args provided.");return n.map((s,r)=>{const o=new Be;return yo(s,t[r].type_tag,o),o.getBytes()})}static toTransactionArguments(t,n){if(t.length!==n.length)throw new Error("Wrong number of args provided.");return n.map((s,r)=>El(s,t[r].type_tag))}setSequenceNumber(t){this.builderConfig.sequenceNumber=BigInt(t)}buildTransactionPayload(t,n,s){const r=n.map(a=>new bs(a).parseTypeTag());let o;if(!this.abiMap.has(t))throw new Error(`Cannot find function: ${t}`);const i=this.abiMap.get(t);if(i instanceof Cs){const a=i,c=Ko.toBCSArgs(a.args,s);o=new Ui(new lo(a.module_name,new st(a.name),r,c))}else if(i instanceof Hi){const a=i,c=Ko.toTransactionArguments(a.args,s);o=new Oi(new Ei(a.code,r,c))}else throw new Error("Unknown ABI format.");return o}build(t,n,s){const{sender:r,sequenceNumber:o,gasUnitPrice:i,maxGasAmount:a,expSecFromNow:c,chainId:d}=this.builderConfig;if(!i)throw new Error("No gasUnitPrice provided.");const l=r instanceof he?r:he.fromHex(r),u=BigInt(Math.floor(Date.now()/1e3)+Number(c)),h=this.buildTransactionPayload(t,n,s);if(h)return new Ts(l,BigInt(o),h,BigInt(a),BigInt(i),u,new Ri(Number(d)));throw new Error("Invalid ABI.")}},_e=class{constructor(e,t){this.aptosClient=e,this.builderConfig=t}async fetchABI(e){const n=(await this.aptosClient.getAccountModules(e)).map(r=>r.abi).flatMap(r=>r.exposed_functions.filter(o=>o.is_entry).map(o=>({fullName:`${r.address}::${r.name}::${o.name}`,...o}))),s=new Map;return n.forEach(r=>{s.set(r.fullName,r)}),s}async build(e,t,n){if(e=(m=>m.replace(/^0[xX]0*/g,"0x"))(e),e.split("::").length!==3)throw new Error("'func' needs to be a fully qualified function name in format <address>::<module>::<function>, e.g. 0x1::coin::transfer");const[o,i]=e.split("::"),a=await this.fetchABI(o);if(!a.has(e))throw new Error(`${e} doesn't exist.`);const c=a.get(e),l=c.params.filter(m=>m!=="signer"&&m!=="&signer").map((m,_)=>new fo(`var${_}`,new bs(m,t).parseTypeTag())),u=new Cs(c.name,Hs.fromStr(`${o}::${i}`),"",c.generic_type_params.map((m,_)=>new ho(`${_}`)),l),{sender:h,...p}=this.builderConfig,g=h instanceof he?N.fromUint8Array(h.address):h,[{sequence_number:b},y,{gas_estimate:E}]=await Promise.all([p!=null&&p.sequenceNumber?Promise.resolve({sequence_number:p==null?void 0:p.sequenceNumber}):this.aptosClient.getAccount(g),p!=null&&p.chainId?Promise.resolve(p==null?void 0:p.chainId):this.aptosClient.getChainId(),p!=null&&p.gasUnitPrice?Promise.resolve({gas_estimate:p==null?void 0:p.gasUnitPrice}):this.aptosClient.estimateGasPrice()]);return new Bl([jt(u)],{sender:h,sequenceNumber:b,chainId:y,gasUnitPrice:BigInt(E),...p}).build(e,t,n)}};ye([fd(10*60*1e3)],_e.prototype,"fetchABI",1);var Le=class ss{constructor(t,n,s=!1){if(!t)throw new Error("Node URL cannot be empty.");s?this.nodeUrl=t:this.nodeUrl=Rg(t),this.config=n==null?{}:{...n}}async getAccount(t){const{data:n}=await dt({url:this.nodeUrl,endpoint:`accounts/${N.ensure(t).hex()}`,originMethod:"getAccount",overrides:{...this.config}});return n}async getAccountTransactions(t,n){const{data:s}=await dt({url:this.nodeUrl,endpoint:`accounts/${N.ensure(t).hex()}/transactions`,originMethod:"getAccountTransactions",params:{start:n==null?void 0:n.start,limit:n==null?void 0:n.limit},overrides:{...this.config}});return s}async getAccountModules(t,n){return await Qa({url:this.nodeUrl,endpoint:`accounts/${t}/modules`,params:{ledger_version:n==null?void 0:n.ledgerVersion,limit:1e3},originMethod:"getAccountModules",overrides:{...this.config}})}async getAccountModule(t,n,s){const{data:r}=await dt({url:this.nodeUrl,endpoint:`accounts/${N.ensure(t).hex()}/module/${n}`,originMethod:"getAccountModule",params:{ledger_version:s==null?void 0:s.ledgerVersion},overrides:{...this.config}});return r}async getAccountResources(t,n){return await Qa({url:this.nodeUrl,endpoint:`accounts/${t}/resources`,params:{ledger_version:n==null?void 0:n.ledgerVersion,limit:9999},originMethod:"getAccountResources",overrides:{...this.config}})}async getAccountResource(t,n,s){const{data:r}=await dt({url:this.nodeUrl,endpoint:`accounts/${N.ensure(t).hex()}/resource/${n}`,originMethod:"getAccountResource",params:{ledger_version:s==null?void 0:s.ledgerVersion},overrides:{...this.config}});return r}static generateBCSTransaction(t,n){return new kr(r=>{const o=t.signBuffer(r);return new J.Ed25519Signature(o.toUint8Array())},t.pubKey().toUint8Array()).sign(n)}static generateBCSSimulation(t,n){return new kr(r=>{const o=new Uint8Array(64);return new J.Ed25519Signature(o)},t.pubKey().toUint8Array()).sign(n)}async generateTransaction(t,n,s){const r={sender:t};if(s!=null&&s.sequence_number&&(r.sequenceNumber=s.sequence_number),s!=null&&s.gas_unit_price&&(r.gasUnitPrice=s.gas_unit_price),s!=null&&s.max_gas_amount&&(r.maxGasAmount=s.max_gas_amount),s!=null&&s.expiration_timestamp_secs){const i=Number.parseInt(s.expiration_timestamp_secs,10);r.expSecFromNow=i-Math.floor(Date.now()/1e3)}return new _e(this,r).build(n.function,n.type_arguments,n.arguments)}async generateFeePayerTransaction(t,n,s,r=[],o){const i=await this.generateTransaction(t,n,o),a=r.map(d=>he.fromHex(d));return new J.FeePayerRawTransaction(i,a,he.fromHex(s))}async submitFeePayerTransaction(t,n,s,r=[]){const o=new J.TransactionAuthenticatorFeePayer(n,t.secondary_signer_addresses,r,{address:t.fee_payer_address,authenticator:s}),i=jt(new J.SignedTransaction(t.raw_txn,o));return await this.submitSignedBCSTransaction(i)}async signMultiTransaction(t,n){const s=new J.Ed25519Signature(t.signBuffer(Ut.getSigningMessage(n)).toUint8Array()),r=new J.AccountAuthenticatorEd25519(new J.Ed25519PublicKey(t.signingKey.publicKey),s);return Promise.resolve(r)}async signTransaction(t,n){return Promise.resolve(ss.generateBCSTransaction(t,n))}async getEventsByCreationNumber(t,n,s){const{data:r}=await dt({url:this.nodeUrl,endpoint:`accounts/${N.ensure(t).hex()}/events/${n}`,originMethod:"getEventsByCreationNumber",params:{start:s==null?void 0:s.start,limit:s==null?void 0:s.limit},overrides:{...this.config}});return r}async getEventsByEventHandle(t,n,s,r){const{data:o}=await dt({url:this.nodeUrl,endpoint:`accounts/${N.ensure(t).hex()}/events/${n}/${s}`,originMethod:"getEventsByEventHandle",params:{start:r==null?void 0:r.start,limit:r==null?void 0:r.limit},overrides:{...this.config}});return o}async submitTransaction(t){return this.submitSignedBCSTransaction(t)}async simulateTransaction(t,n,s){let r;return t instanceof Nr?r=ss.generateBCSSimulation(t,n):t instanceof co?r=new Pl(()=>{const{threshold:i}=t,a=[],c=[];for(let l=0;l<i;l+=1)a.push(l),c.push(new J.Ed25519Signature(new Uint8Array(64)));const d=J.MultiEd25519Signature.createBitmap(a);return new J.MultiEd25519Signature(c,d)},t).sign(n):r=new kr(()=>{const i=new Uint8Array(64);return new J.Ed25519Signature(i)},t.toBytes()).sign(n),this.submitBCSSimulation(r,s)}async submitSignedBCSTransaction(t){const{data:n}=await Hn({url:this.nodeUrl,body:t,endpoint:"transactions",originMethod:"submitSignedBCSTransaction",contentType:"application/x.aptos.signed_transaction+bcs",overrides:{...this.config}});return n}async submitBCSSimulation(t,n){var s,r,o;const i={estimate_gas_unit_price:(s=n==null?void 0:n.estimateGasUnitPrice)!=null?s:!1,estimate_max_gas_amount:(r=n==null?void 0:n.estimateMaxGasAmount)!=null?r:!1,estimate_prioritized_gas_unit_price:(o=n==null?void 0:n.estimatePrioritizedGasUnitPrice)!=null?o:!1},{data:a}=await Hn({url:this.nodeUrl,body:t,endpoint:"transactions/simulate",params:i,originMethod:"submitBCSSimulation",contentType:"application/x.aptos.signed_transaction+bcs",overrides:{...this.config}});return a}async getTransactions(t){var n;const{data:s}=await dt({url:this.nodeUrl,endpoint:"transactions",originMethod:"getTransactions",params:{start:(n=t==null?void 0:t.start)==null?void 0:n.toString(),limit:t==null?void 0:t.limit},overrides:{...this.config}});return s}async getTransactionByHash(t){const{data:n}=await dt({url:this.nodeUrl,endpoint:`transactions/by_hash/${t}`,originMethod:"getTransactionByHash",overrides:{...this.config}});return n}async getTransactionByVersion(t){const{data:n}=await dt({url:this.nodeUrl,endpoint:`transactions/by_version/${t}`,originMethod:"getTransactionByVersion",overrides:{...this.config}});return n}async transactionPending(t){try{return(await this.getTransactionByHash(t)).type==="pending_transaction"}catch(n){if((n==null?void 0:n.status)===404)return!0;throw n}}async waitForTransactionWithResult(t,n){var s,r;const o=(s=n==null?void 0:n.timeoutSecs)!=null?s:hd,i=(r=n==null?void 0:n.checkSuccess)!=null?r:!1;let a=!0,c=0,d;for(;a&&!(c>=o);){try{if(d=await this.getTransactionByHash(t),a=d.type==="pending_transaction",!a)break}catch(l){const u=l instanceof pt,h=u&&l.status!==404&&l.status>=400&&l.status<500;if(!u||h)throw l}await Us(1e3),c+=1}if(d===void 0)throw new Error(`Waiting for transaction ${t} failed`);if(a)throw new Il(`Waiting for transaction ${t} timed out after ${o} seconds`,d);if(!i)return d;if(!(d!=null&&d.success))throw new Ol(`Transaction ${t} failed with an error: ${d.vm_status}`,d);return d}async waitForTransaction(t,n){await this.waitForTransactionWithResult(t,n)}async getLedgerInfo(){const{data:t}=await dt({url:this.nodeUrl,originMethod:"getLedgerInfo",overrides:{...this.config}});return t}async getChainId(){return(await this.getLedgerInfo()).chain_id}async getTableItem(t,n,s){var r;return(await Hn({url:this.nodeUrl,body:n,endpoint:`tables/${t}/item`,originMethod:"getTableItem",params:{ledger_version:(r=s==null?void 0:s.ledgerVersion)==null?void 0:r.toString()},overrides:{...this.config}})).data}async generateRawTransaction(t,n,s){const[{sequence_number:r},o,{gas_estimate:i}]=await Promise.all([s!=null&&s.providedSequenceNumber?Promise.resolve({sequence_number:s.providedSequenceNumber}):this.getAccount(t),this.getChainId(),s!=null&&s.gasUnitPrice?Promise.resolve({gas_estimate:s.gasUnitPrice}):this.estimateGasPrice()]),{maxGasAmount:a,gasUnitPrice:c,expireTimestamp:d}={maxGasAmount:BigInt(ld),gasUnitPrice:BigInt(i),expireTimestamp:BigInt(Math.floor(Date.now()/1e3)+ud),...s};return new J.RawTransaction(J.AccountAddress.fromHex(t),BigInt(r),n,a,c,d,new J.ChainId(o))}async generateSignSubmitTransaction(t,n,s){const r=await this.generateRawTransaction(t.address(),n,s),o=ss.generateBCSTransaction(t,r);return(await this.submitSignedBCSTransaction(o)).hash}async signAndSubmitTransaction(t,n){const s=ss.generateBCSTransaction(t,n);return(await this.submitSignedBCSTransaction(s)).hash}async publishPackage(t,n,s,r){const o=new Be;Ye(s,o);const i=new J.TransactionPayloadEntryFunction(J.EntryFunction.natural("0x1::code","publish_package_txn",[],[_n(n),o.getBytes()]));return this.generateSignSubmitTransaction(t,i,r)}async createResourceAccountAndPublishPackage(t,n,s,r,o){const i=new Be;Ye(r,i);const a=new J.TransactionPayloadEntryFunction(J.EntryFunction.natural("0x1::resource_account","create_resource_account_and_publish_package",[],[_n(n),_n(s),i.getBytes()]));return this.generateSignSubmitTransaction(t,a,o)}async generateSignSubmitWaitForTransaction(t,n,s){const r=await this.generateSignSubmitTransaction(t,n,s);return this.waitForTransactionWithResult(r,s)}async estimateGasPrice(){const{data:t}=await dt({url:this.nodeUrl,endpoint:"estimate_gas_price",originMethod:"estimateGasPrice",overrides:{...this.config}});return t}async estimateMaxGasAmount(t){const n=`0x1::coin::CoinStore<${jr}>`,[{gas_estimate:s},r]=await Promise.all([this.estimateGasPrice(),this.getAccountResources(t)]),o=r.find(a=>a.type===n);return BigInt(o.data.coin.value)/BigInt(s)}async rotateAuthKeyEd25519(t,n,s){const{sequence_number:r,authentication_key:o}=await this.getAccount(t.address()),i=new Nr(n),a=new J.RotationProofChallenge(J.AccountAddress.CORE_CODE_ADDRESS,"account","RotationProofChallenge",BigInt(r),J.AccountAddress.fromHex(t.address()),new J.AccountAddress(new N(o).toUint8Array()),i.pubKey().toUint8Array()),c=N.fromUint8Array(jt(a)),d=t.signHexString(c),l=i.signHexString(c),u=new J.TransactionPayloadEntryFunction(J.EntryFunction.natural("0x1::account","rotate_authentication_key",[],[Mo(0),_n(t.pubKey().toUint8Array()),Mo(0),_n(i.pubKey().toUint8Array()),_n(d.toUint8Array()),_n(l.toUint8Array())])),h=await this.generateRawTransaction(t.address(),u,s),p=ss.generateBCSTransaction(t,h);return this.submitSignedBCSTransaction(p)}async lookupOriginalAddress(t){const n=await this.getAccountResource("0x1","0x1::account::OriginatingAddress"),{address_map:{handle:s}}=n.data,r=await this.getTableItem(s,{key_type:"address",value_type:"address",key:N.ensure(t).hex()});return new N(r)}async getBlockByHeight(t,n){const{data:s}=await dt({url:this.nodeUrl,endpoint:`blocks/by_height/${t}`,originMethod:"getBlockByHeight",params:{with_transactions:n},overrides:{...this.config}});return s}async getBlockByVersion(t,n){const{data:s}=await dt({url:this.nodeUrl,endpoint:`blocks/by_version/${t}`,originMethod:"getBlockByVersion",params:{with_transactions:n},overrides:{...this.config}});return s}async view(t,n){const{data:s}=await Hn({url:this.nodeUrl,body:t,endpoint:"view",originMethod:"getTableItem",params:{ledger_version:n},overrides:{...this.config}});return s}clearCache(t){Lg(t)}};ye([Me],Le.prototype,"getAccount",1);ye([Me],Le.prototype,"getAccountTransactions",1);ye([Me,fd(10*60*1e3)],Le.prototype,"getAccountModules",1);ye([Me],Le.prototype,"getAccountModule",1);ye([Me],Le.prototype,"getAccountResources",1);ye([Me],Le.prototype,"getAccountResource",1);ye([Me],Le.prototype,"getEventsByCreationNumber",1);ye([Me],Le.prototype,"getEventsByEventHandle",1);ye([Me],Le.prototype,"submitSignedBCSTransaction",1);ye([Me],Le.prototype,"submitBCSSimulation",1);ye([Me],Le.prototype,"getTransactions",1);ye([Me],Le.prototype,"getTransactionByHash",1);ye([Me],Le.prototype,"getTransactionByVersion",1);ye([Me],Le.prototype,"getLedgerInfo",1);ye([ao()],Le.prototype,"getChainId",1);ye([Me],Le.prototype,"getTableItem",1);ye([Me,ao({ttlMs:5*60*1e3,tags:["gas_estimates"]})],Le.prototype,"estimateGasPrice",1);ye([Me],Le.prototype,"estimateMaxGasAmount",1);ye([Me],Le.prototype,"getBlockByHeight",1);ye([Me],Le.prototype,"getBlockByVersion",1);ye([Me],Le.prototype,"view",1);var Oe=Le,Il=class extends Error{constructor(e,t){super(e),this.lastSubmittedTransaction=t}},Ol=class extends Error{constructor(e,t){super(e),this.transaction=t}},pt=class extends Error{constructor(e,t,n,s){super(t),this.status=e,this.message=t,this.errorCode=n,this.vmErrorCode=s}};function Me(e,t,n){const s=n.value;return n.value=async function(...o){var i,a;try{return await s.apply(this,[...o])}catch(c){throw c instanceof Ti?new pt(c.status,JSON.stringify({message:c.message,...c.data}),(i=c.data)==null?void 0:i.error_code,(a=c.data)==null?void 0:a.vm_error_code):c}},n}var Gi=class Fe{constructor(t,n){this.endpoint=t,this.config=n}static validateAddress(t){if(t.length<66)throw new Error(`${t} is less than 66 chars long.`)}async queryIndexer(t){const n=await Hn({url:this.endpoint,body:t,overrides:{WITH_CREDENTIALS:!1,...this.config}});if(n.data.errors)throw new pt(n.data.errors[0].extensions.code,JSON.stringify({message:n.data.errors[0].message,error_code:n.data.errors[0].extensions.code}));return n.data.data}async getIndexerLedgerInfo(){const t={query:yy};return this.queryIndexer(t)}async getAccountNFTs(t,n){const s=N.ensure(t).hex();Fe.validateAddress(s);const r={query:cy,variables:{address:s,offset:n==null?void 0:n.offset,limit:n==null?void 0:n.limit}};return this.queryIndexer(r)}async getTokenActivities(t,n){var s,r;const o=N.ensure(t).hex();Fe.validateAddress(o);const i={token_data_id:{_eq:o}};n!=null&&n.tokenStandard&&(i.token_standard={_eq:n==null?void 0:n.tokenStandard});const a={query:Ty,variables:{where_condition:i,offset:(s=n==null?void 0:n.options)==null?void 0:s.offset,limit:(r=n==null?void 0:n.options)==null?void 0:r.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}async getTokenActivitiesCount(t){const n={query:vy,variables:{token_id:t}};return this.queryIndexer(n)}async getAccountTokensCount(t,n){var s,r;const o={owner_address:{_eq:t},amount:{_gt:"0"}};n!=null&&n.tokenStandard&&(o.token_standard={_eq:n==null?void 0:n.tokenStandard});const i=N.ensure(t).hex();Fe.validateAddress(i);const a={query:dy,variables:{where_condition:o,offset:(s=n==null?void 0:n.options)==null?void 0:s.offset,limit:(r=n==null?void 0:n.options)==null?void 0:r.limit}};return this.queryIndexer(a)}async getTokenData(t,n){var s,r;const o=N.ensure(t).hex();Fe.validateAddress(o);const i={token_data_id:{_eq:o}};n!=null&&n.tokenStandard&&(i.token_standard={_eq:n==null?void 0:n.tokenStandard});const a={query:Sy,variables:{where_condition:i,offset:(s=n==null?void 0:n.options)==null?void 0:s.offset,limit:(r=n==null?void 0:n.options)==null?void 0:r.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}async getTokenOwnersData(t,n,s){var r,o;const i=N.ensure(t).hex();Fe.validateAddress(i);const a={token_data_id:{_eq:i},amount:{_gt:"0"}};n&&(a.property_version_v1={_eq:n}),s!=null&&s.tokenStandard&&(a.token_standard={_eq:s==null?void 0:s.tokenStandard});const c={query:ky,variables:{where_condition:a,offset:(r=s==null?void 0:s.options)==null?void 0:r.offset,limit:(o=s==null?void 0:s.options)==null?void 0:o.limit,order_by:s==null?void 0:s.orderBy}};return this.queryIndexer(c)}async getTokenCurrentOwnerData(t,n,s){var r,o;const i=N.ensure(t).hex();Fe.validateAddress(i);const a={token_data_id:{_eq:i},amount:{_gt:"0"}};n&&(a.property_version_v1={_eq:n}),s!=null&&s.tokenStandard&&(a.token_standard={_eq:s==null?void 0:s.tokenStandard});const c={query:Ay,variables:{where_condition:a,offset:(r=s==null?void 0:s.options)==null?void 0:r.offset,limit:(o=s==null?void 0:s.options)==null?void 0:o.limit,order_by:s==null?void 0:s.orderBy}};return this.queryIndexer(c)}async getOwnedTokens(t,n){var s,r;const o=N.ensure(t).hex();Fe.validateAddress(o);const i={owner_address:{_eq:o},amount:{_gt:0}};n!=null&&n.tokenStandard&&(i.token_standard={_eq:n==null?void 0:n.tokenStandard});const a={query:wy,variables:{where_condition:i,offset:(s=n==null?void 0:n.options)==null?void 0:s.offset,limit:(r=n==null?void 0:n.options)==null?void 0:r.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}async getOwnedTokensByTokenData(t,n){var s,r;const o=N.ensure(t).hex();Fe.validateAddress(o);const i={token_data_id:{_eq:o},amount:{_gt:0}};n!=null&&n.tokenStandard&&(i.token_standard={_eq:n==null?void 0:n.tokenStandard});const a={query:by,variables:{where_condition:i,offset:(s=n==null?void 0:n.options)==null?void 0:s.offset,limit:(r=n==null?void 0:n.options)==null?void 0:r.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}async getTokenOwnedFromCollectionAddress(t,n,s){var r,o;const i=N.ensure(t).hex();Fe.validateAddress(i);const a=N.ensure(n).hex();Fe.validateAddress(a);const c={owner_address:{_eq:i},current_token_data:{collection_id:{_eq:a}},amount:{_gt:0}};s!=null&&s.tokenStandard&&(c.token_standard={_eq:s==null?void 0:s.tokenStandard});const d={query:xy,variables:{where_condition:c,offset:(r=s==null?void 0:s.options)==null?void 0:r.offset,limit:(o=s==null?void 0:s.options)==null?void 0:o.limit,order_by:s==null?void 0:s.orderBy}};return this.queryIndexer(d)}async getTokenOwnedFromCollectionNameAndCreatorAddress(t,n,s,r){const o=await this.getCollectionAddress(s,n,r);return await this.getTokenOwnedFromCollectionAddress(t,o,r)}async getCollectionData(t,n,s){var r,o;const i=N.ensure(t).hex();Fe.validateAddress(i);const a={collection_name:{_eq:n},creator_address:{_eq:i}};s!=null&&s.tokenStandard&&(a.token_standard={_eq:s==null?void 0:s.tokenStandard});const c={query:hy,variables:{where_condition:a,offset:(r=s==null?void 0:s.options)==null?void 0:r.offset,limit:(o=s==null?void 0:s.options)==null?void 0:o.limit,order_by:s==null?void 0:s.orderBy}};return this.queryIndexer(c)}async getCollectionAddress(t,n,s){return(await this.getCollectionData(t,n,s)).current_collections_v2[0].collection_id}async getCollectionsWithOwnedTokens(t,n){var s,r;const o=N.ensure(t).hex();Fe.validateAddress(o);const i={owner_address:{_eq:o}};n!=null&&n.tokenStandard&&(i.current_collection={token_standard:{_eq:n==null?void 0:n.tokenStandard}});const a={query:fy,variables:{where_condition:i,offset:(s=n==null?void 0:n.options)==null?void 0:s.offset,limit:(r=n==null?void 0:n.options)==null?void 0:r.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}async getAccountTransactionsCount(t){const n=N.ensure(t).hex();Fe.validateAddress(n);const s={query:ly,variables:{address:n}};return this.queryIndexer(s)}async getAccountTransactionsData(t,n){var s,r;const o=N.ensure(t).hex();Fe.validateAddress(o);const a={query:uy,variables:{where_condition:{account_address:{_eq:o}},offset:(s=n==null?void 0:n.options)==null?void 0:s.offset,limit:(r=n==null?void 0:n.options)==null?void 0:r.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}async getTopUserTransactions(t){const n={query:_y,variables:{limit:t}};return this.queryIndexer(n)}async getUserTransactions(t){var n,s;const r={version:{_lte:t==null?void 0:t.startVersion}},o={query:Ey,variables:{where_condition:r,offset:(n=t==null?void 0:t.options)==null?void 0:n.offset,limit:(s=t==null?void 0:t.options)==null?void 0:s.limit,order_by:t==null?void 0:t.orderBy}};return this.queryIndexer(o)}async getDelegatedStakingActivities(t,n){const s=N.ensure(t).hex(),r=N.ensure(n).hex();Fe.validateAddress(s),Fe.validateAddress(r);const o={query:gy,variables:{delegatorAddress:s,poolAddress:r}};return this.queryIndexer(o)}async getNumberOfDelegators(t){const n=N.ensure(t).hex();Fe.validateAddress(n);const s={query:my,variables:{poolAddress:n}};return this.queryIndexer(s)}async getAccountCoinsData(t,n){var s,r;const o=N.ensure(t).hex();Fe.validateAddress(o);const a={query:ay,variables:{where_condition:{owner_address:{_eq:o}},offset:(s=n==null?void 0:n.options)==null?void 0:s.offset,limit:(r=n==null?void 0:n.options)==null?void 0:r.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}async getAccountCoinsDataCount(t){const n=N.ensure(t).hex();Fe.validateAddress(n);const s={query:iy,variables:{address:n}};return this.queryIndexer(s)}async getAccountOwnedObjects(t,n){var s,r;const o=N.ensure(t).hex();Fe.validateAddress(o);const a={query:py,variables:{where_condition:{owner_address:{_eq:o}},offset:(s=n==null?void 0:n.options)==null?void 0:s.offset,limit:(r=n==null?void 0:n.options)==null?void 0:r.limit,order_by:n==null?void 0:n.orderBy}};return this.queryIndexer(a)}},Ws=class{constructor(e,t,n=!1){let s=null,r=null;if(typeof e=="object"&&Uy(e)?(s=e.fullnodeUrl,r=e.indexerUrl,this.network="CUSTOM"):(s=pd[e],r=Fr[e],this.network=e),this.network==="CUSTOM"&&!s)throw new Error("fullnode url is not provided");r&&(this.indexerClient=new Gi(r,t)),this.aptosClient=new Oe(s,t,n)}};function Ul(e,t,n){Object.getOwnPropertyNames(t.prototype).forEach(s=>{const r=Object.getOwnPropertyDescriptor(t.prototype,s);r&&(r.value=function(...o){return this[n][s](...o)},Object.defineProperty(e.prototype,s,r))}),Object.getOwnPropertyNames(t).forEach(s=>{const r=Object.getOwnPropertyDescriptor(t,s);r&&(r.value=function(...o){return this[n][s](...o)},!e.hasOwnProperty.call(e,s)&&Object.defineProperty(e,s,r))})}Ul(Ws,Oe,"aptosClient");Ul(Ws,Gi,"indexerClient");function Uy(e){return e.fullnodeUrl!==void 0&&typeof e.fullnodeUrl=="string"}var Ki=class{constructor(e,t){this.type=e,this.value=t}},mo=class{constructor(){this.data={}}setProperty(e,t){this.data[e]=t}};function wo(e){let t;return e==="string"||e==="String"?t=new Xn(_i):t=new bs(e).parseTypeTag(),t}function zr(e,t){if(e.length!==t.length)throw new Error("Length of property values and types not match");const n=new Array;return t.forEach((s,r)=>{try{const o=wo(s),i=new Be;yo(e[r],o,i),n.push(i.getBytes())}catch{n.push(new TextEncoder().encode(e[r]))}}),n}function Jo(e,t){if(!e||!t)throw new Error("value or type can not be empty");try{const n=wo(t),s=new Be;return yo(e,n,s),s.getBytes()}catch{return new TextEncoder().encode(e)}}function Ji(e){const t=e.map.data,n=new mo;return t.forEach(s=>{const{key:r}=s,o=s.value.value,i=s.value.type,a=wo(i),c=Rl(a,o),d=new Ki(i,c);n.setProperty(r,d)}),n}function Rl(e,t){const n=new Ai(new N(t).toUint8Array());let s="";return e instanceof Rn?s=n.deserializeU8().toString():e instanceof ys?s=n.deserializeU64().toString():e instanceof ms?s=n.deserializeU128().toString():e instanceof gs?s=n.deserializeBool()?"true":"false":e instanceof Vn?s=N.fromUint8Array(n.deserializeFixedBytes(32)).hex():e instanceof Xn&&e.isStringTypeTag()?s=n.deserializeStr():s=t,s}var Ll={};io(Ll,{PropertyMap:()=>mo,PropertyValue:()=>Ki,Token:()=>$l,TokenData:()=>ql});var ql=class{constructor(e,t,n,s,r,o,i,a){this.collection=e,this.description=t,this.name=n,this.maximum=s,this.supply=r,this.uri=o,this.default_properties=Ji(i),this.mutability_config=a}},$l=class{constructor(e,t,n){this.id=e,this.amount=t,this.token_properties=Ji(n)}},Ry=class{constructor(e){this.aptosClient=e}async createCollection(e,t,n,s,r=is,o){const a=await new _e(this.aptosClient,{sender:e.address(),...o}).build("0x3::token::create_collection_script",[],[t,n,s,r,[!1,!1,!1]]),c=Oe.generateBCSTransaction(e,a);return(await this.aptosClient.submitSignedBCSTransaction(c)).hash}async createToken(e,t,n,s,r,o,i=is,a=e.address(),c=0,d=0,l=[],u=[],h=[],p){const b=await new _e(this.aptosClient,{sender:e.address(),...p}).build("0x3::token::create_token_script",[],[t,n,s,r,i,o,a,c,d,[!1,!1,!1,!1,!1],l,zr(u,h),h]),y=Oe.generateBCSTransaction(e,b);return(await this.aptosClient.submitSignedBCSTransaction(y)).hash}async createTokenWithMutabilityConfig(e,t,n,s,r,o,i=is,a=e.address(),c=0,d=0,l=[],u=[],h=[],p=[!1,!1,!1,!1,!1],g){const y=await new _e(this.aptosClient,{sender:e.address(),...g}).build("0x3::token::create_token_script",[],[t,n,s,r,i,o,a,c,d,p,l,u,h]),E=Oe.generateBCSTransaction(e,y);return(await this.aptosClient.submitSignedBCSTransaction(E)).hash}async offerToken(e,t,n,s,r,o,i=0,a){const d=await new _e(this.aptosClient,{sender:e.address(),...a}).build("0x3::token_transfers::offer_script",[],[t,n,s,r,i,o]),l=Oe.generateBCSTransaction(e,d);return(await this.aptosClient.submitSignedBCSTransaction(l)).hash}async claimToken(e,t,n,s,r,o=0,i){const c=await new _e(this.aptosClient,{sender:e.address(),...i}).build("0x3::token_transfers::claim_script",[],[t,n,s,r,o]),d=Oe.generateBCSTransaction(e,c);return(await this.aptosClient.submitSignedBCSTransaction(d)).hash}async cancelTokenOffer(e,t,n,s,r,o=0,i){const c=await new _e(this.aptosClient,{sender:e.address(),...i}).build("0x3::token_transfers::cancel_offer_script",[],[t,n,s,r,o]),d=Oe.generateBCSTransaction(e,c);return(await this.aptosClient.submitSignedBCSTransaction(d)).hash}async directTransferToken(e,t,n,s,r,o,i=0,a){const d=await new _e(this.aptosClient,{sender:e.address(),...a}).build("0x3::token::direct_transfer_script",[],[n,s,r,i,o]),l=new J.MultiAgentRawTransaction(d,[J.AccountAddress.fromHex(t.address())]),u=new J.Ed25519Signature(e.signBuffer(Ut.getSigningMessage(l)).toUint8Array()),h=new J.AccountAuthenticatorEd25519(new J.Ed25519PublicKey(e.signingKey.publicKey),u),p=new J.Ed25519Signature(t.signBuffer(Ut.getSigningMessage(l)).toUint8Array()),g=new J.AccountAuthenticatorEd25519(new J.Ed25519PublicKey(t.signingKey.publicKey),p),b=new J.TransactionAuthenticatorMultiAgent(h,[J.AccountAddress.fromHex(t.address())],[g]),y=jt(new J.SignedTransaction(d,b));return(await this.aptosClient.submitSignedBCSTransaction(y)).hash}async directTransferTokenWithFeePayer(e,t,n,s,r,o,i,a=0,c){const l=await new _e(this.aptosClient,{sender:e.address(),...c}).build("0x3::token::direct_transfer_script",[],[n,s,r,a,o]),u=new J.FeePayerRawTransaction(l,[J.AccountAddress.fromHex(t.address())],J.AccountAddress.fromHex(i.address())),h=new J.Ed25519Signature(e.signBuffer(Ut.getSigningMessage(u)).toUint8Array()),p=new J.AccountAuthenticatorEd25519(new J.Ed25519PublicKey(e.signingKey.publicKey),h),g=new J.Ed25519Signature(t.signBuffer(Ut.getSigningMessage(u)).toUint8Array()),b=new J.AccountAuthenticatorEd25519(new J.Ed25519PublicKey(t.signingKey.publicKey),g),y=new J.Ed25519Signature(i.signBuffer(Ut.getSigningMessage(u)).toUint8Array()),E=new J.AccountAuthenticatorEd25519(new J.Ed25519PublicKey(i.signingKey.publicKey),y),v=new J.TransactionAuthenticatorFeePayer(p,[J.AccountAddress.fromHex(t.address())],[b],{address:J.AccountAddress.fromHex(i.address()),authenticator:E}),m=jt(new J.SignedTransaction(l,v));return(await this.aptosClient.submitSignedBCSTransaction(m)).hash}async optInTokenTransfer(e,t,n){const r=await new _e(this.aptosClient,{sender:e.address(),...n}).build("0x3::token::opt_in_direct_transfer",[],[t]),o=Oe.generateBCSTransaction(e,r);return(await this.aptosClient.submitSignedBCSTransaction(o)).hash}async transferWithOptIn(e,t,n,s,r,o,i,a){const d=await new _e(this.aptosClient,{sender:e.address(),...a}).build("0x3::token::transfer_with_opt_in",[],[t,n,s,r,o,i]),l=Oe.generateBCSTransaction(e,d);return(await this.aptosClient.submitSignedBCSTransaction(l)).hash}async burnByCreator(e,t,n,s,r,o,i){const c=await new _e(this.aptosClient,{sender:e.address(),...i}).build("0x3::token::burn_by_creator",[],[t,n,s,r,o]),d=Oe.generateBCSTransaction(e,c);return(await this.aptosClient.submitSignedBCSTransaction(d)).hash}async burnByOwner(e,t,n,s,r,o,i){const c=await new _e(this.aptosClient,{sender:e.address(),...i}).build("0x3::token::burn",[],[t,n,s,r,o]),d=Oe.generateBCSTransaction(e,c);return(await this.aptosClient.submitSignedBCSTransaction(d)).hash}async mutateTokenProperties(e,t,n,s,r,o,i,a,c,d,l){const h=await new _e(this.aptosClient,{sender:e.address(),...l}).build("0x3::token::mutate_token_properties",[],[t,n,s,r,o,i,a,c,d]),p=Oe.generateBCSTransaction(e,h);return(await this.aptosClient.submitSignedBCSTransaction(p)).hash}async getCollectionData(e,t){const s=(await this.aptosClient.getAccountResources(e)).find(a=>a.type==="0x3::token::Collections"),{handle:r}=s.data.collection_data,o={key_type:"0x1::string::String",value_type:"0x3::token::CollectionData",key:t};return await this.aptosClient.getTableItem(r,o)}async getTokenData(e,t,n){const s=e instanceof N?e.hex():e,r=await this.aptosClient.getAccountResource(s,"0x3::token::Collections"),{handle:o}=r.data.token_data,a={key_type:"0x3::token::TokenDataId",value_type:"0x3::token::TokenData",key:{creator:s,collection:t,name:n}},c=await this.aptosClient.getTableItem(o,a);return new ql(c.collection,c.description,c.name,c.maximum,c.supply,c.uri,c.default_properties,c.mutability_config)}async getToken(e,t,n,s="0"){const r={creator:e instanceof N?e.hex():e,collection:t,name:n};return this.getTokenForAccount(e,{token_data_id:r,property_version:s})}async getTokenForAccount(e,t){const n=await this.aptosClient.getAccountResource(e instanceof N?e.hex():e,"0x3::token::TokenStore"),{handle:s}=n.data.tokens,r={key_type:"0x3::token::TokenId",value_type:"0x3::token::Token",key:t};try{const o=await this.aptosClient.getTableItem(s,r);return new $l(o.id,o.amount,o.token_properties)}catch(o){return(o==null?void 0:o.status)===404?{id:t,amount:"0",token_properties:new mo}:o}}},Mr=class{constructor(e){this.assetType="0x1::fungible_asset::Metadata",this.provider=e}async transfer(e,t,n,s,r){const o=await this.generateTransfer(e,t,n,s,r);return await this.provider.signAndSubmitTransaction(e,o)}async getPrimaryBalance(e,t){const n={function:"0x1::primary_fungible_store::balance",type_arguments:[this.assetType],arguments:[N.ensure(e).hex(),N.ensure(t).hex()]},s=await this.provider.view(n);return BigInt(s[0])}async generateTransfer(e,t,n,s,r){return await new _e(this.provider,{sender:e.address(),...r}).build("0x1::primary_fungible_store::transfer",[this.assetType],[N.ensure(t).hex(),N.ensure(n).hex(),s])}},ts={BOOLEAN:"bool",U8:"u8",U16:"u16",U32:"u32",U64:"u64",U128:"u128",U256:"u256",ADDRESS:"address",VECTOR:"vector<u8>",STRING:"string"},Ly=class{constructor(e){this.tokenType="0x4::token::Token",this.provider=e}async submitTransaction(e,t,n,s,r){const i=await new _e(this.provider,{sender:e.address(),...r}).build(`0x4::aptos_token::${t}`,n,s),a=Oe.generateBCSTransaction(e,i);return(await this.provider.submitSignedBCSTransaction(a)).hash}async createCollection(e,t,n,s,r=is,o,i){var a,c,d,l,u,h,p,g,b,y,E;return this.submitTransaction(e,"create_collection",[],[t,r,n,s,(a=o==null?void 0:o.mutableDescription)!=null?a:!0,(c=o==null?void 0:o.mutableRoyalty)!=null?c:!0,(d=o==null?void 0:o.mutableURI)!=null?d:!0,(l=o==null?void 0:o.mutableTokenDescription)!=null?l:!0,(u=o==null?void 0:o.mutableTokenName)!=null?u:!0,(h=o==null?void 0:o.mutableTokenProperties)!=null?h:!0,(p=o==null?void 0:o.mutableTokenURI)!=null?p:!0,(g=o==null?void 0:o.tokensBurnableByCreator)!=null?g:!0,(b=o==null?void 0:o.tokensFreezableByCreator)!=null?b:!0,(y=o==null?void 0:o.royaltyNumerator)!=null?y:0,(E=o==null?void 0:o.royaltyDenominator)!=null?E:1],i)}async mint(e,t,n,s,r,o=[],i=[],a=[],c){return this.submitTransaction(e,"mint",[],[t,n,s,r,o,i,zr(a,i)],c)}async mintSoulBound(e,t,n,s,r,o,i=[],a=[],c=[],d){return this.submitTransaction(e,"mint_soul_bound",[],[t,n,s,r,i,a,zr(c,a),o.address().hex()],d)}async burnToken(e,t,n,s){return this.submitTransaction(e,"burn",[n||this.tokenType],[N.ensure(t).hex()],s)}async freezeTokenTransafer(e,t,n,s){return this.submitTransaction(e,"freeze_transfer",[n||this.tokenType],[N.ensure(t).hex()],s)}async unfreezeTokenTransafer(e,t,n,s){return this.submitTransaction(e,"unfreeze_transfer",[n||this.tokenType],[N.ensure(t).hex()],s)}async setTokenDescription(e,t,n,s,r){return this.submitTransaction(e,"set_description",[s||this.tokenType],[N.ensure(t).hex(),n],r)}async setTokenName(e,t,n,s,r){return this.submitTransaction(e,"set_name",[s||this.tokenType],[N.ensure(t).hex(),n],r)}async setTokenURI(e,t,n,s,r){return this.submitTransaction(e,"set_uri",[s||this.tokenType],[N.ensure(t).hex(),n],r)}async addTokenProperty(e,t,n,s,r,o,i){return this.submitTransaction(e,"add_property",[o||this.tokenType],[N.ensure(t).hex(),n,ts[s],Jo(r,ts[s])],i)}async removeTokenProperty(e,t,n,s,r){return this.submitTransaction(e,"remove_property",[s||this.tokenType],[N.ensure(t).hex(),n],r)}async updateTokenProperty(e,t,n,s,r,o,i){return this.submitTransaction(e,"update_property",[o||this.tokenType],[N.ensure(t).hex(),n,ts[s],Jo(r,ts[s])],i)}async addTypedProperty(e,t,n,s,r,o,i){return this.submitTransaction(e,"add_typed_property",[o||this.tokenType,ts[s]],[N.ensure(t).hex(),n,r],i)}async updateTypedProperty(e,t,n,s,r,o,i){return this.submitTransaction(e,"update_typed_property",[o||this.tokenType,ts[s]],[N.ensure(t).hex(),n,r],i)}async transferTokenOwnership(e,t,n,s,r){const i=await new _e(this.provider,{sender:e.address(),...r}).build("0x1::object::transfer",[s||this.tokenType],[N.ensure(t).hex(),N.ensure(n).hex()]),a=Oe.generateBCSTransaction(e,i);return(await this.provider.submitSignedBCSTransaction(a)).hash}async transfer(e,t){let n=t;if(n==null&&(n=(await this.provider.getTokenData(N.ensure(e.tokenAddress).hex())).current_token_datas_v2[0].is_fungible_v2),n){const o=e;return await new Mr(this.provider).transfer(o.owner,o.tokenAddress,o.recipient,o.amount,o.extraArgs)}const s=e;return await this.transferTokenOwnership(s.owner,s.tokenAddress,s.recipient,s.tokenType,s.extraArgs)}async burnObject(e,t,n,s){const o=await new _e(this.provider,{sender:e.address(),...s}).build("0x1::object::burn",[n||"0x1::object::ObjectCore"],[N.ensure(t).hex()]),i=Oe.generateBCSTransaction(e,o);return(await this.provider.submitSignedBCSTransaction(i)).hash}},Vo="0x1::aptos_account::transfer_coins",jl="0x1::coin::transfer",qy=class{constructor(e){this.aptosClient=e}async transfer(e,t,n,s){var r,o,i;const a=((r=s==null?void 0:s.coinType)!=null?r:"").toString().includes("::");if(s!=null&&s.coinType&&!a&&he.isValid(s.coinType)){console.warn("to transfer a fungible asset, use `FungibleAssetClient()` class for better support");const b=new Ws({fullnodeUrl:this.aptosClient.nodeUrl,indexerUrl:(o=Fr[zo[this.aptosClient.nodeUrl]])!=null?o:this.aptosClient.nodeUrl});return await new Mr(b).transfer(e,s==null?void 0:s.coinType,Bt(t),n)}const c=(i=s==null?void 0:s.coinType)!=null?i:jr;let d;(s==null?void 0:s.createReceiverIfMissing)===void 0?d=Vo:d=s!=null&&s.createReceiverIfMissing?Vo:jl;const l=Bt(t),h=await new _e(this.aptosClient,{sender:e.address(),...s}).build(d,[c],[l,n]),p=Oe.generateBCSTransaction(e,h);return(await this.aptosClient.submitSignedBCSTransaction(p)).hash}async checkBalance(e,t){var n,s,r;const o=((n=t==null?void 0:t.coinType)!=null?n:"").toString().includes("::");if(t!=null&&t.coinType&&!o&&he.isValid(t.coinType)){console.warn("to check balance of a fungible asset, use `FungibleAssetClient()` class for better support");const l=new Ws({fullnodeUrl:this.aptosClient.nodeUrl,indexerUrl:(s=Fr[zo[this.aptosClient.nodeUrl]])!=null?s:this.aptosClient.nodeUrl});return await new Mr(l).getPrimaryBalance(Bt(e),t==null?void 0:t.coinType)}const a=`0x1::coin::CoinStore<${(r=t==null?void 0:t.coinType)!=null?r:jr}>`,c=Bt(e),d=await this.aptosClient.getAccountResource(c,a);return BigInt(d.data.coin.value)}},$y=class extends Oe{constructor(e,t,n){if(super(e,n),!t)throw new Error("Faucet URL cannot be empty.");this.faucetUrl=t,this.config=n}async fundAccount(e,t,n=hd){const{data:s}=await Hn({url:this.faucetUrl,endpoint:"mint",body:null,params:{address:N.ensure(e).noPrefix(),amount:t},overrides:{...this.config},originMethod:"fundAccount"}),r=[];for(let o=0;o<s.length;o+=1){const i=s[o];r.push(this.waitForTransaction(i,{timeoutSecs:n}))}return await Promise.all(r),s}},Xo={testnet:"0x5f8fd2347449685cf41d4db97926ec3a096eaf381332be4f1318ad4d16a8497c",mainnet:"0x867ed1f6bf916171b1de3ee92849b8978b7d1b9e0a8cc982a3d19d535dfd9c0c"},an=/^[a-z\d][a-z\d-]{1,61}[a-z\d]$/,Fl=new RegExp("^(?:(?<subdomain>[^.]+)\\.(?!apt$))?(?<domain>[^.]+)(?:\\.apt)?$"),jy=class{constructor(e,t){var n;if(this.provider=e,!Xo[this.provider.network]&&!t)throw new Error("Error: For custom providers, you must pass in a contract address");this.contractAddress=(n=Xo[this.provider.network])!=null?n:t}async getPrimaryNameByAddress(e){const n=(await this.provider.getAccountResource(this.contractAddress,`${this.contractAddress}::domains::ReverseLookupRegistryV1`)).data,{handle:s}=n.registry,r={key_type:"address",value_type:`${this.contractAddress}::domains::NameRecordKeyV1`,key:e};try{const o=await this.provider.getTableItem(s,r);return o.subdomain_name.vec[0]?`${o.subdomain_name.vec[0]}.${o.domain_name}`:o.domain_name}catch(o){if(o.status===404)return null;throw new Error(o)}}async getAddressByName(e){var t,n;const{domain:s,subdomain:r}=(n=(t=e.match(Fl))==null?void 0:t.groups)!=null?n:{};if(!s)return null;const o=r?await this.getRegistrationForSubdomainName(s,r):await this.getRegistrationForDomainName(s);return o===null?null:o.target}async mintAptosName(e,t,n=1,s){if(t.match(an)===null)throw new pt(400,`Name ${t} is not valid`);const r=await this.getRegistrationForDomainName(t);if(r&&Math.ceil(Date.now()/1e3)<r.expirationTimestampSeconds)throw new pt(400,`Name ${t} is not available`);const i=await new _e(this.provider.aptosClient,{sender:e.address(),...s}).build(`${this.contractAddress}::domains::register_domain`,[],[t,n]),a=Oe.generateBCSTransaction(e,i);return(await this.provider.submitSignedBCSTransaction(a)).hash}async mintAptosSubdomain(e,t,n,s,r){if(n.match(an)===null)throw new pt(400,`Domain name ${n} is not valid`);if(t.match(an)===null)throw new pt(400,`Subdomain name ${t} is not valid`);const o=await this.getRegistrationForSubdomainName(n,t);if(o&&Math.ceil(Date.now()/1e3)<o.expirationTimestampSeconds)throw new pt(400,`Name ${t}.${n} is not available`);const i=await this.getRegistrationForDomainName(n);if(i===null)throw new pt(400,`Domain name ${n} does not exist`);const a=Math.ceil(Date.now()/1e3);if(i.expirationTimestampSeconds<a)throw new pt(400,`Domain name ${n} expired`);const c=s||i.expirationTimestampSeconds;if(c<a)throw new pt(400,`Expiration for ${t}.${n} is before now`);const l=await new _e(this.provider.aptosClient,{sender:e.address(),...r}).build(`${this.contractAddress}::domains::register_subdomain`,[],[t,n,c]),u=Oe.generateBCSTransaction(e,l);return(await this.provider.submitSignedBCSTransaction(u)).hash}async setSubdomainAddress(e,t,n,s,r){const o=he.standardizeAddress(s);if(n.match(an)===null)throw new pt(400,`Name ${n} is not valid`);if(t.match(an)===null)throw new pt(400,`Name ${t} is not valid`);const a=await new _e(this.provider.aptosClient,{sender:e.address(),...r}).build(`${this.contractAddress}::domains::set_subdomain_address`,[],[t,n,o]),c=Oe.generateBCSTransaction(e,a);return(await this.provider.submitSignedBCSTransaction(c)).hash}async initReverseLookupRegistry(e,t){const s=await new _e(this.provider.aptosClient,{sender:e.address(),...t}).build(`${this.contractAddress}::domains::init_reverse_lookup_registry_v1`,[],[]),r=Oe.generateBCSTransaction(e,s);return(await this.provider.submitSignedBCSTransaction(r)).hash}async getRegistrationForDomainName(e){if(e.match(an)===null)return null;const n=(await this.provider.getAccountResource(this.contractAddress,`${this.contractAddress}::domains::NameRegistryV1`)).data,{handle:s}=n.registry,r={key_type:`${this.contractAddress}::domains::NameRecordKeyV1`,value_type:`${this.contractAddress}::domains::NameRecordV1`,key:{subdomain_name:{vec:[]},domain_name:e}};try{const o=await this.provider.getTableItem(s,r);return{target:o.target_address.vec.length===1?o.target_address.vec[0]:null,expirationTimestampSeconds:o.expiration_time_sec}}catch(o){if(o.status===404)return null;throw new Error(o)}}async getRegistrationForSubdomainName(e,t){if(e.match(an)===null||t.match(an)===null)return null;const s=(await this.provider.getAccountResource(this.contractAddress,`${this.contractAddress}::domains::NameRegistryV1`)).data,{handle:r}=s.registry,o={key_type:`${this.contractAddress}::domains::NameRecordKeyV1`,value_type:`${this.contractAddress}::domains::NameRecordV1`,key:{subdomain_name:{vec:[t]},domain_name:e}};try{const i=await this.provider.getTableItem(r,o);return{target:i.target_address.vec.length===1?i.target_address.vec[0]:null,expirationTimestampSeconds:i.expiration_time_sec}}catch(i){if(i.status===404)return null;throw new Error(i)}}},dr=()=>Math.floor(Date.now()/1e3),Dl=class{constructor(e,t,n,s,r){this.lastUncommintedNumber=null,this.currentNumber=null,this.lock=!1,this.provider=e,this.account=t,this.maxWaitTime=n,this.maximumInFlight=s,this.sleepTime=r}async nextSequenceNumber(){for(;this.lock;)await Us(this.sleepTime);this.lock=!0;let e=BigInt(0);try{if((this.lastUncommintedNumber===null||this.currentNumber===null)&&await this.initialize(),this.currentNumber-this.lastUncommintedNumber>=this.maximumInFlight){await this.update();const t=dr();for(;this.currentNumber-this.lastUncommintedNumber>=this.maximumInFlight;)await Us(this.sleepTime),dr()-t>this.maxWaitTime?(console.warn(`Waited over 30 seconds for a transaction to commit, resyncing ${this.account.address()}`),await this.initialize()):await this.update()}e=this.currentNumber,this.currentNumber+=BigInt(1)}catch(t){console.error("error in getting next sequence number for this account",t)}finally{this.lock=!1}return e}async initialize(){const{sequence_number:e}=await this.provider.getAccount(this.account.address());this.currentNumber=BigInt(e),this.lastUncommintedNumber=BigInt(e)}async update(){const{sequence_number:e}=await this.provider.getAccount(this.account.address());return this.lastUncommintedNumber=BigInt(e),this.lastUncommintedNumber}async synchronize(){if(this.lastUncommintedNumber!==this.currentNumber){for(;this.lock;)await Us(this.sleepTime);this.lock=!0;try{await this.update();const e=dr();for(;this.lastUncommintedNumber!==this.currentNumber;)dr()-e>this.maxWaitTime?(console.warn(`Waited over 30 seconds for a transaction to commit, resyncing ${this.account.address()}`),await this.initialize()):(await Us(this.sleepTime),await this.update())}catch(e){console.error("error in synchronizing this account sequence number with the one on chain",e)}finally{this.lock=!1}}}},xo=class{constructor(){this.queue=[],this.pendingDequeue=[],this.cancelled=!1}enqueue(e){if(this.cancelled=!1,this.pendingDequeue.length>0){const t=this.pendingDequeue.shift();t==null||t.resolve(e);return}this.queue.push(e)}async dequeue(){return this.queue.length>0?Promise.resolve(this.queue.shift()):new Promise((e,t)=>{this.pendingDequeue.push({resolve:e,reject:t})})}isEmpty(){return this.queue.length===0}cancel(){this.cancelled=!0,this.pendingDequeue.forEach(async({reject:e})=>{e(new Qo("Task cancelled"))}),this.pendingDequeue=[],this.queue.length=0}isCancelled(){return this.cancelled}pendingDequeueLength(){return this.pendingDequeue.length}},Qo=class extends Error{},tc="fulfilled",Nl=(e=>(e.TransactionSent="transactionSent",e.TransactionSendFailed="transactionsendFailed",e.TransactionExecuted="transactionExecuted",e.TransactionExecutionFailed="transactionexecutionFailed",e))(Nl||{}),Fy=class extends No{constructor(e,t,n=30,s=100,r=10){super(),this.taskQueue=new xo,this.transactionsQueue=new xo,this.outstandingTransactions=new xo,this.sentTransactions=[],this.executedTransactions=[],this.provider=e,this.account=t,this.started=!1,this.accountSequnceNumber=new Dl(e,t,n,s,r)}async submitNextTransaction(){try{for(;;){if(this.transactionsQueue.isEmpty())return;const e=await this.accountSequnceNumber.nextSequenceNumber();if(e===null)return;const t=await this.generateNextTransaction(this.account,e);if(!t)return;const n=this.provider.submitSignedBCSTransaction(t);await this.outstandingTransactions.enqueue([n,e])}}catch(e){if(e instanceof Qo)return;console.log(e)}}async processTransactions(){try{for(;;){const e=[],t=[];let[n,s]=await this.outstandingTransactions.dequeue();for(e.push(n),t.push(s);!this.outstandingTransactions.isEmpty();)[n,s]=await this.outstandingTransactions.dequeue(),e.push(n),t.push(s);const r=await Promise.allSettled(e);for(let o=0;o<r.length&&o<t.length;o+=1){const i=r[o];s=t[o],i.status===tc?(this.sentTransactions.push([i.value.hash,s,null]),this.emit("transactionSent",[this.sentTransactions.length,i.value.hash]),await this.checkTransaction(i,s)):(this.sentTransactions.push([i.status,s,i.reason]),this.emit("transactionsendFailed",[this.sentTransactions.length,i.reason]))}}}catch(e){if(e instanceof Qo)return;console.log(e)}}async checkTransaction(e,t){const n=[];n.push(this.provider.waitForTransactionWithResult(e.value.hash,{checkSuccess:!0}));const s=await Promise.allSettled(n);for(let r=0;r<s.length;r+=1){const o=s[r];o.status===tc?(this.executedTransactions.push([o.value.hash,t,null]),this.emit("transactionExecuted",[this.executedTransactions.length,o.value.hash])):(this.executedTransactions.push([o.status,t,o.reason]),this.emit("transactionexecutionFailed",[this.executedTransactions.length,o.reason]))}}async push(e){await this.transactionsQueue.enqueue(e)}async generateNextTransaction(e,t){if(this.transactionsQueue.isEmpty())return;const n=await this.transactionsQueue.dequeue(),s=await this.provider.generateRawTransaction(e.address(),n,{providedSequenceNumber:t});return Oe.generateBCSTransaction(e,s)}async run(){try{for(;!this.taskQueue.isCancelled();)await(await this.taskQueue.dequeue())()}catch(e){throw new Error(e)}}start(){if(this.started)throw new Error("worker has already started");this.started=!0,this.taskQueue.enqueue(()=>this.submitNextTransaction()),this.taskQueue.enqueue(()=>this.processTransactions()),this.run()}stop(){if(this.taskQueue.isCancelled())throw new Error("worker has already stopped");this.started=!1,this.taskQueue.cancel()}},zl={};io(zl,{AptosErrorCode:()=>Ml,MoveFunctionVisibility:()=>Hl,RoleType:()=>Cl});var Ml=(e=>(e.ACCOUNT_NOT_FOUND="account_not_found",e.RESOURCE_NOT_FOUND="resource_not_found",e.MODULE_NOT_FOUND="module_not_found",e.STRUCT_FIELD_NOT_FOUND="struct_field_not_found",e.VERSION_NOT_FOUND="version_not_found",e.TRANSACTION_NOT_FOUND="transaction_not_found",e.TABLE_ITEM_NOT_FOUND="table_item_not_found",e.BLOCK_NOT_FOUND="block_not_found",e.STATE_VALUE_NOT_FOUND="state_value_not_found",e.VERSION_PRUNED="version_pruned",e.BLOCK_PRUNED="block_pruned",e.INVALID_INPUT="invalid_input",e.INVALID_TRANSACTION_UPDATE="invalid_transaction_update",e.SEQUENCE_NUMBER_TOO_OLD="sequence_number_too_old",e.VM_ERROR="vm_error",e.HEALTH_CHECK_FAILED="health_check_failed",e.MEMPOOL_IS_FULL="mempool_is_full",e.INTERNAL_ERROR="internal_error",e.WEB_FRAMEWORK_ERROR="web_framework_error",e.BCS_NOT_SUPPORTED="bcs_not_supported",e.API_DISABLED="api_disabled",e))(Ml||{}),Hl=(e=>(e.PRIVATE="private",e.PUBLIC="public",e.FRIEND="friend",e))(Hl||{}),Cl=(e=>(e.VALIDATOR="validator",e.FULL_NODE="full_node",e))(Cl||{}),Wl=(e=>(e.AccountAddress="account_address",e.TransactionVersion="transaction_version",e))(Wl||{}),Gl=(e=>(e.AccountAddress="account_address",e.MinBlockHeight="min_block_height",e.NumDistinctVersions="num_distinct_versions",e))(Gl||{}),Kl=(e=>(e.AccountAddress="account_address",e.TransactionVersion="transaction_version",e))(Kl||{}),Jl=(e=>(e.Address="address",e.TransactionVersion="transaction_version",e))(Jl||{}),Vl=(e=>(e.BlockHeight="block_height",e.Epoch="epoch",e.FailedProposerIndices="failed_proposer_indices",e.Id="id",e.PreviousBlockVotesBitvec="previous_block_votes_bitvec",e.Proposer="proposer",e.Round="round",e.Timestamp="timestamp",e.Version="version",e))(Vl||{}),Xl=(e=>(e.ActivityType="activity_type",e.Amount="amount",e.BlockHeight="block_height",e.CoinType="coin_type",e.EntryFunctionIdStr="entry_function_id_str",e.EventAccountAddress="event_account_address",e.EventCreationNumber="event_creation_number",e.EventIndex="event_index",e.EventSequenceNumber="event_sequence_number",e.IsGasFee="is_gas_fee",e.IsTransactionSuccess="is_transaction_success",e.OwnerAddress="owner_address",e.StorageRefundAmount="storage_refund_amount",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e))(Xl||{}),Ql=(e=>(e.Amount="amount",e.CoinType="coin_type",e.CoinTypeHash="coin_type_hash",e.OwnerAddress="owner_address",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e))(Ql||{}),Zl=(e=>(e.CoinType="coin_type",e.CoinTypeHash="coin_type_hash",e.CreatorAddress="creator_address",e.Decimals="decimals",e.Name="name",e.SupplyAggregatorTableHandle="supply_aggregator_table_handle",e.SupplyAggregatorTableKey="supply_aggregator_table_key",e.Symbol="symbol",e.TransactionCreatedTimestamp="transaction_created_timestamp",e.TransactionVersionCreated="transaction_version_created",e))(Zl||{}),Yl=(e=>(e.CoinType="coin_type",e.CoinTypeHash="coin_type_hash",e.Supply="supply",e.TransactionEpoch="transaction_epoch",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e))(Yl||{}),eu=(e=>(e.CollectionDataIdHash="collection_data_id_hash",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.Description="description",e.DescriptionMutable="description_mutable",e.Maximum="maximum",e.MaximumMutable="maximum_mutable",e.MetadataUri="metadata_uri",e.Supply="supply",e.TableHandle="table_handle",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e.UriMutable="uri_mutable",e))(eu||{}),tu=(e=>(e.Domain="domain",e.ExpirationTimestamp="expiration_timestamp",e.IsDeleted="is_deleted",e.LastTransactionVersion="last_transaction_version",e.RegisteredAddress="registered_address",e.Subdomain="subdomain",e.TokenName="token_name",e))(tu||{}),nu=(e=>(e.Domain="domain",e.ExpirationTimestamp="expiration_timestamp",e.IsDeleted="is_deleted",e.LastTransactionVersion="last_transaction_version",e.RegisteredAddress="registered_address",e.Subdomain="subdomain",e.TokenName="token_name",e.TokenStandard="token_standard",e))(nu||{}),su=(e=>(e.Domain="domain",e.DomainWithSuffix="domain_with_suffix",e.ExpirationTimestamp="expiration_timestamp",e.IsActive="is_active",e.IsPrimary="is_primary",e.LastTransactionVersion="last_transaction_version",e.OwnerAddress="owner_address",e.RegisteredAddress="registered_address",e.Subdomain="subdomain",e.TokenName="token_name",e.TokenStandard="token_standard",e))(su||{}),ru=(e=>(e.Amount="amount",e.CoinType="coin_type",e.CoinTypeHash="coin_type_hash",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.OwnerAddress="owner_address",e))(ru||{}),ou=(e=>(e.CollectionDataIdHash="collection_data_id_hash",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.Description="description",e.DescriptionMutable="description_mutable",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.Maximum="maximum",e.MaximumMutable="maximum_mutable",e.MetadataUri="metadata_uri",e.Supply="supply",e.TableHandle="table_handle",e.UriMutable="uri_mutable",e))(ou||{}),iu=(e=>(e.CollectionId="collection_id",e.CollectionName="collection_name",e.CollectionUri="collection_uri",e.CreatorAddress="creator_address",e.DistinctTokens="distinct_tokens",e.LastTransactionVersion="last_transaction_version",e.OwnerAddress="owner_address",e.SingleTokenUri="single_token_uri",e))(iu||{}),au=(e=>(e.CollectionId="collection_id",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.CurrentSupply="current_supply",e.Description="description",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.MaxSupply="max_supply",e.MutableDescription="mutable_description",e.MutableUri="mutable_uri",e.TableHandleV1="table_handle_v1",e.TokenStandard="token_standard",e.TotalMintedV2="total_minted_v2",e.Uri="uri",e))(au||{}),cu=(e=>(e.ActiveTableHandle="active_table_handle",e.InactiveTableHandle="inactive_table_handle",e.LastTransactionVersion="last_transaction_version",e.OperatorCommissionPercentage="operator_commission_percentage",e.StakingPoolAddress="staking_pool_address",e.TotalCoins="total_coins",e.TotalShares="total_shares",e))(cu||{}),du=(e=>(e.DelegationPoolAddress="delegation_pool_address",e.DelegatorAddress="delegator_address",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.PendingVoter="pending_voter",e.TableHandle="table_handle",e.Voter="voter",e))(du||{}),lu=(e=>(e.DelegatorAddress="delegator_address",e.LastTransactionVersion="last_transaction_version",e.ParentTableHandle="parent_table_handle",e.PoolAddress="pool_address",e.PoolType="pool_type",e.Shares="shares",e.TableHandle="table_handle",e))(lu||{}),uu=(e=>(e.Amount="amount",e.AssetType="asset_type",e.IsFrozen="is_frozen",e.IsPrimary="is_primary",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.OwnerAddress="owner_address",e.StorageId="storage_id",e.TokenStandard="token_standard",e))(uu||{}),hu=(e=>(e.AllowUngatedTransfer="allow_ungated_transfer",e.IsDeleted="is_deleted",e.LastGuidCreationNum="last_guid_creation_num",e.LastTransactionVersion="last_transaction_version",e.ObjectAddress="object_address",e.OwnerAddress="owner_address",e.StateKeyHash="state_key_hash",e))(hu||{}),fu=(e=>(e.LastTransactionVersion="last_transaction_version",e.OperatorAddress="operator_address",e.StakingPoolAddress="staking_pool_address",e.VoterAddress="voter_address",e))(fu||{}),pu=(e=>(e.DecodedKey="decoded_key",e.DecodedValue="decoded_value",e.IsDeleted="is_deleted",e.Key="key",e.KeyHash="key_hash",e.LastTransactionVersion="last_transaction_version",e.TableHandle="table_handle",e))(pu||{}),gu=(e=>(e.CollectionDataIdHash="collection_data_id_hash",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.DefaultProperties="default_properties",e.Description="description",e.DescriptionMutable="description_mutable",e.LargestPropertyVersion="largest_property_version",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.Maximum="maximum",e.MaximumMutable="maximum_mutable",e.MetadataUri="metadata_uri",e.Name="name",e.PayeeAddress="payee_address",e.PropertiesMutable="properties_mutable",e.RoyaltyMutable="royalty_mutable",e.RoyaltyPointsDenominator="royalty_points_denominator",e.RoyaltyPointsNumerator="royalty_points_numerator",e.Supply="supply",e.TokenDataIdHash="token_data_id_hash",e.UriMutable="uri_mutable",e))(gu||{}),yu=(e=>(e.CollectionId="collection_id",e.Description="description",e.IsFungibleV2="is_fungible_v2",e.LargestPropertyVersionV1="largest_property_version_v1",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.Maximum="maximum",e.Supply="supply",e.TokenDataId="token_data_id",e.TokenName="token_name",e.TokenProperties="token_properties",e.TokenStandard="token_standard",e.TokenUri="token_uri",e))(yu||{}),mu=(e=>(e.Amount="amount",e.CollectionDataIdHash="collection_data_id_hash",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.Name="name",e.OwnerAddress="owner_address",e.PropertyVersion="property_version",e.TableType="table_type",e.TokenDataIdHash="token_data_id_hash",e.TokenProperties="token_properties",e))(mu||{}),wu=(e=>(e.Amount="amount",e.IsFungibleV2="is_fungible_v2",e.IsSoulboundV2="is_soulbound_v2",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.OwnerAddress="owner_address",e.PropertyVersionV1="property_version_v1",e.StorageId="storage_id",e.TableTypeV1="table_type_v1",e.TokenDataId="token_data_id",e.TokenPropertiesMutatedV1="token_properties_mutated_v1",e.TokenStandard="token_standard",e))(wu||{}),bu=(e=>(e.Amount="amount",e.CollectionDataIdHash="collection_data_id_hash",e.CollectionId="collection_id",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.FromAddress="from_address",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.Name="name",e.PropertyVersion="property_version",e.TableHandle="table_handle",e.ToAddress="to_address",e.TokenDataId="token_data_id",e.TokenDataIdHash="token_data_id_hash",e))(bu||{}),Tu=(e=>(e.Asc="ASC",e.Desc="DESC",e))(Tu||{}),vu=(e=>(e.Amount="amount",e.DelegatorAddress="delegator_address",e.EventIndex="event_index",e.EventType="event_type",e.PoolAddress="pool_address",e.TransactionVersion="transaction_version",e))(vu||{}),Au=(e=>(e.FirstTransactionVersion="first_transaction_version",e.StakingPoolAddress="staking_pool_address",e))(Au||{}),Su=(e=>(e.DelegatorAddress="delegator_address",e.PoolAddress="pool_address",e))(Su||{}),xu=(e=>(e.AccountAddress="account_address",e.CreationNumber="creation_number",e.Data="data",e.EventIndex="event_index",e.IndexedType="indexed_type",e.SequenceNumber="sequence_number",e.TransactionBlockHeight="transaction_block_height",e.TransactionVersion="transaction_version",e.Type="type",e))(xu||{}),ku=(e=>(e.Amount="amount",e.AssetType="asset_type",e.BlockHeight="block_height",e.EntryFunctionIdStr="entry_function_id_str",e.EventIndex="event_index",e.GasFeePayerAddress="gas_fee_payer_address",e.IsFrozen="is_frozen",e.IsGasFee="is_gas_fee",e.IsTransactionSuccess="is_transaction_success",e.OwnerAddress="owner_address",e.StorageId="storage_id",e.StorageRefundAmount="storage_refund_amount",e.TokenStandard="token_standard",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e.Type="type",e))(ku||{}),_u=(e=>(e.AssetType="asset_type",e.CreatorAddress="creator_address",e.Decimals="decimals",e.IconUri="icon_uri",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.Name="name",e.ProjectUri="project_uri",e.SupplyAggregatorTableHandleV1="supply_aggregator_table_handle_v1",e.SupplyAggregatorTableKeyV1="supply_aggregator_table_key_v1",e.Symbol="symbol",e.TokenStandard="token_standard",e))(_u||{}),Eu=(e=>(e.Db="db",e.IsIndexerUp="is_indexer_up",e))(Eu||{}),Pu=(e=>(e.ChainId="chain_id",e))(Pu||{}),Bu=(e=>(e.Address="address",e.TransactionVersion="transaction_version",e))(Bu||{}),Iu=(e=>(e.BuyItNowPrice="buy_it_now_price",e.CoinType="coin_type",e.CollectionId="collection_id",e.ContractAddress="contract_address",e.CurrentBidPrice="current_bid_price",e.CurrentBidder="current_bidder",e.EntryFunctionIdStr="entry_function_id_str",e.ExpirationTime="expiration_time",e.FeeScheduleId="fee_schedule_id",e.IsDeleted="is_deleted",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.ListingId="listing_id",e.Marketplace="marketplace",e.Seller="seller",e.StartingBidPrice="starting_bid_price",e.TokenAmount="token_amount",e.TokenDataId="token_data_id",e.TokenStandard="token_standard",e))(Iu||{}),Ou=(e=>(e.Buyer="buyer",e.CoinType="coin_type",e.CollectionId="collection_id",e.CollectionOfferId="collection_offer_id",e.ContractAddress="contract_address",e.EntryFunctionIdStr="entry_function_id_str",e.ExpirationTime="expiration_time",e.FeeScheduleId="fee_schedule_id",e.IsDeleted="is_deleted",e.ItemPrice="item_price",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.Marketplace="marketplace",e.RemainingTokenAmount="remaining_token_amount",e.TokenStandard="token_standard",e))(Ou||{}),Uu=(e=>(e.CoinType="coin_type",e.CollectionId="collection_id",e.ContractAddress="contract_address",e.EntryFunctionIdStr="entry_function_id_str",e.FeeScheduleId="fee_schedule_id",e.IsDeleted="is_deleted",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.ListingId="listing_id",e.Marketplace="marketplace",e.Price="price",e.Seller="seller",e.TokenAmount="token_amount",e.TokenDataId="token_data_id",e.TokenStandard="token_standard",e))(Uu||{}),Ru=(e=>(e.Buyer="buyer",e.CoinType="coin_type",e.CollectionId="collection_id",e.ContractAddress="contract_address",e.EntryFunctionIdStr="entry_function_id_str",e.ExpirationTime="expiration_time",e.FeeScheduleId="fee_schedule_id",e.IsDeleted="is_deleted",e.LastTransactionTimestamp="last_transaction_timestamp",e.LastTransactionVersion="last_transaction_version",e.Marketplace="marketplace",e.OfferId="offer_id",e.Price="price",e.TokenAmount="token_amount",e.TokenDataId="token_data_id",e.TokenStandard="token_standard",e))(Ru||{}),Lu=(e=>(e.Buyer="buyer",e.CoinType="coin_type",e.CollectionId="collection_id",e.CollectionName="collection_name",e.ContractAddress="contract_address",e.CreatorAddress="creator_address",e.EntryFunctionIdStr="entry_function_id_str",e.EventIndex="event_index",e.EventType="event_type",e.FeeScheduleId="fee_schedule_id",e.Marketplace="marketplace",e.OfferOrListingId="offer_or_listing_id",e.Price="price",e.PropertyVersion="property_version",e.Seller="seller",e.TokenAmount="token_amount",e.TokenDataId="token_data_id",e.TokenName="token_name",e.TokenStandard="token_standard",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e))(Lu||{}),qu=(e=>(e.AnimationOptimizerRetryCount="animation_optimizer_retry_count",e.AssetUri="asset_uri",e.CdnAnimationUri="cdn_animation_uri",e.CdnImageUri="cdn_image_uri",e.CdnJsonUri="cdn_json_uri",e.ImageOptimizerRetryCount="image_optimizer_retry_count",e.JsonParserRetryCount="json_parser_retry_count",e.RawAnimationUri="raw_animation_uri",e.RawImageUri="raw_image_uri",e))(qu||{}),$u=(e=>(e.NumActiveDelegator="num_active_delegator",e.PoolAddress="pool_address",e))($u||{}),ju=(e=>(e.Asc="asc",e.AscNullsFirst="asc_nulls_first",e.AscNullsLast="asc_nulls_last",e.Desc="desc",e.DescNullsFirst="desc_nulls_first",e.DescNullsLast="desc_nulls_last",e))(ju||{}),Fu=(e=>(e.LastSuccessVersion="last_success_version",e.LastUpdated="last_updated",e.Processor="processor",e))(Fu||{}),Du=(e=>(e.NumVotes="num_votes",e.ProposalId="proposal_id",e.ShouldPass="should_pass",e.StakingPoolAddress="staking_pool_address",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e.VoterAddress="voter_address",e))(Du||{}),Nu=(e=>(e.DecodedKey="decoded_key",e.DecodedValue="decoded_value",e.Key="key",e.TableHandle="table_handle",e.TransactionVersion="transaction_version",e.WriteSetChangeIndex="write_set_change_index",e))(Nu||{}),zu=(e=>(e.Handle="handle",e.KeyType="key_type",e.ValueType="value_type",e))(zu||{}),Mu=(e=>(e.CoinAmount="coin_amount",e.CoinType="coin_type",e.CollectionDataIdHash="collection_data_id_hash",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.EventAccountAddress="event_account_address",e.EventCreationNumber="event_creation_number",e.EventIndex="event_index",e.EventSequenceNumber="event_sequence_number",e.FromAddress="from_address",e.Name="name",e.PropertyVersion="property_version",e.ToAddress="to_address",e.TokenAmount="token_amount",e.TokenDataIdHash="token_data_id_hash",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e.TransferType="transfer_type",e))(Mu||{}),Hu=(e=>(e.AfterValue="after_value",e.BeforeValue="before_value",e.EntryFunctionIdStr="entry_function_id_str",e.EventAccountAddress="event_account_address",e.EventIndex="event_index",e.FromAddress="from_address",e.IsFungibleV2="is_fungible_v2",e.PropertyVersionV1="property_version_v1",e.ToAddress="to_address",e.TokenAmount="token_amount",e.TokenDataId="token_data_id",e.TokenStandard="token_standard",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e.Type="type",e))(Hu||{}),Cu=(e=>(e.CollectionDataIdHash="collection_data_id_hash",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.DefaultProperties="default_properties",e.Description="description",e.DescriptionMutable="description_mutable",e.LargestPropertyVersion="largest_property_version",e.Maximum="maximum",e.MaximumMutable="maximum_mutable",e.MetadataUri="metadata_uri",e.Name="name",e.PayeeAddress="payee_address",e.PropertiesMutable="properties_mutable",e.RoyaltyMutable="royalty_mutable",e.RoyaltyPointsDenominator="royalty_points_denominator",e.RoyaltyPointsNumerator="royalty_points_numerator",e.Supply="supply",e.TokenDataIdHash="token_data_id_hash",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e.UriMutable="uri_mutable",e))(Cu||{}),Wu=(e=>(e.Amount="amount",e.CollectionDataIdHash="collection_data_id_hash",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.Name="name",e.OwnerAddress="owner_address",e.PropertyVersion="property_version",e.TableHandle="table_handle",e.TableType="table_type",e.TokenDataIdHash="token_data_id_hash",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e))(Wu||{}),Gu=(e=>(e.CollectionDataIdHash="collection_data_id_hash",e.CollectionName="collection_name",e.CreatorAddress="creator_address",e.Name="name",e.PropertyVersion="property_version",e.TokenDataIdHash="token_data_id_hash",e.TokenProperties="token_properties",e.TransactionTimestamp="transaction_timestamp",e.TransactionVersion="transaction_version",e))(Gu||{}),Ku=(e=>(e.BlockHeight="block_height",e.EntryFunctionIdStr="entry_function_id_str",e.Epoch="epoch",e.ExpirationTimestampSecs="expiration_timestamp_secs",e.GasUnitPrice="gas_unit_price",e.MaxGasAmount="max_gas_amount",e.ParentSignatureType="parent_signature_type",e.Sender="sender",e.SequenceNumber="sequence_number",e.Timestamp="timestamp",e.Version="version",e))(Ku||{});const Hw=Object.freeze(Object.defineProperty({__proto__:null,APTOS_COIN:jr,AccountSequenceNumber:Dl,Account_Transactions_Select_Column:Wl,Address_Events_Summary_Select_Column:Gl,Address_Version_From_Events_Select_Column:Kl,Address_Version_From_Move_Resources_Select_Column:Jl,AnsClient:jy,ApiError:pt,AptosAccount:Nr,AptosApiError:Ti,AptosClient:Oe,AptosToken:Ly,BCS:yd,Block_Metadata_Transactions_Select_Column:Vl,CKDPriv:ad,COIN_TRANSFER:jl,CoinClient:qy,Coin_Activities_Select_Column:Xl,Coin_Balances_Select_Column:Ql,Coin_Infos_Select_Column:Zl,Coin_Supply_Select_Column:Yl,Collection_Datas_Select_Column:eu,Current_Ans_Lookup_Select_Column:tu,Current_Ans_Lookup_V2_Select_Column:nu,Current_Aptos_Names_Select_Column:su,Current_Coin_Balances_Select_Column:ru,Current_Collection_Datas_Select_Column:ou,Current_Collection_Ownership_V2_View_Select_Column:iu,Current_Collections_V2_Select_Column:au,Current_Delegated_Staking_Pool_Balances_Select_Column:cu,Current_Delegated_Voter_Select_Column:du,Current_Delegator_Balances_Select_Column:lu,Current_Fungible_Asset_Balances_Select_Column:uu,Current_Objects_Select_Column:hu,Current_Staking_Pool_Voter_Select_Column:fu,Current_Table_Items_Select_Column:pu,Current_Token_Datas_Select_Column:gu,Current_Token_Datas_V2_Select_Column:yu,Current_Token_Ownerships_Select_Column:mu,Current_Token_Ownerships_V2_Select_Column:wu,Current_Token_Pending_Claims_Select_Column:bu,Cursor_Ordering:Tu,Delegated_Staking_Activities_Select_Column:vu,Delegated_Staking_Pools_Select_Column:Au,Delegator_Distinct_Pool_Select_Column:Su,Events_Select_Column:xu,FailedTransactionError:Ol,FaucetClient:$y,FungibleAssetClient:Mr,Fungible_Asset_Activities_Select_Column:ku,Fungible_Asset_Metadata_Select_Column:_u,HexString:N,IndexerClient:Gi,Indexer_Status_Select_Column:Eu,Ledger_Infos_Select_Column:Pu,Move_Resources_Select_Column:Bu,Network:gd,NetworkToIndexerAPI:Fr,NetworkToNodeAPI:pd,Nft_Marketplace_V2_Current_Nft_Marketplace_Auctions_Select_Column:Iu,Nft_Marketplace_V2_Current_Nft_Marketplace_Collection_Offers_Select_Column:Ou,Nft_Marketplace_V2_Current_Nft_Marketplace_Listings_Select_Column:Uu,Nft_Marketplace_V2_Current_Nft_Marketplace_Token_Offers_Select_Column:Ru,Nft_Marketplace_V2_Nft_Marketplace_Activities_Select_Column:Lu,Nft_Metadata_Crawler_Parsed_Asset_Uris_Select_Column:qu,NodeAPIToNetwork:zo,Num_Active_Delegator_Per_Pool_Select_Column:$u,Order_By:ju,Processor_Status_Select_Column:Fu,PropertyMap:mo,PropertyValue:Ki,Proposal_Votes_Select_Column:Du,Provider:Ws,TRANSFER_COINS:Vo,Table_Items_Select_Column:Nu,Table_Metadatas_Select_Column:zu,TokenClient:Ry,TokenTypes:Ll,Token_Activities_Select_Column:Mu,Token_Activities_V2_Select_Column:Hu,Token_Datas_Select_Column:Cu,Token_Ownerships_Select_Column:Wu,Tokens_Select_Column:Gu,TransactionBuilder:Ut,TransactionBuilderABI:Bl,TransactionBuilderEd25519:kr,TransactionBuilderMultiEd25519:Pl,TransactionBuilderRemoteABI:_e,TransactionWorker:Fy,TransactionWorkerEvents:Nl,TxnBuilderTypes:J,TypeTagParser:bs,Types:zl,User_Transactions_Select_Column:Ku,WaitForTransactionError:Il,ansContractsMap:Xo,aptosRequest:vi,argToTransactionArgument:El,derivePath:dd,deserializePropertyMap:Ji,deserializeValueBasedOnTypeTag:Rl,ensureBigInt:Kn,ensureBoolean:Ci,ensureNumber:Gn,get:dt,getAddressFromAccountOrAddress:Bt,getMasterKeyFromSeed:id,getPropertyType:wo,getPropertyValueRaw:zr,getPublicKey:Og,getSinglePropertyValueRaw:Jo,isValidPath:cd,nameComponentPattern:an,namePattern:Fl,post:Hn,serializeArg:yo},Symbol.toStringTag,{value:"Module"}));var Hr={},Dy={get exports(){return Hr},set exports(e){Hr=e}},Cr={},Ny={get exports(){return Cr},set exports(e){Cr=e}},nc;function zy(){return nc||(nc=1,function(e,t){(function(n,s){e.exports=s()})(Is,function(){var n=n||function(s,r){var o;if(typeof window<"u"&&window.crypto&&(o=window.crypto),typeof self<"u"&&self.crypto&&(o=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(o=globalThis.crypto),!o&&typeof window<"u"&&window.msCrypto&&(o=window.msCrypto),!o&&typeof Is<"u"&&Is.crypto&&(o=Is.crypto),!o&&typeof Bh=="function")try{o=Nh}catch{}var i=function(){if(o){if(typeof o.getRandomValues=="function")try{return o.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof o.randomBytes=="function")try{return o.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function v(){}return function(m){var _;return v.prototype=m,_=new v,v.prototype=null,_}}(),c={},d=c.lib={},l=d.Base=function(){return{extend:function(v){var m=a(this);return v&&m.mixIn(v),(!m.hasOwnProperty("init")||this.init===m.init)&&(m.init=function(){m.$super.init.apply(this,arguments)}),m.init.prototype=m,m.$super=this,m},create:function(){var v=this.extend();return v.init.apply(v,arguments),v},init:function(){},mixIn:function(v){for(var m in v)v.hasOwnProperty(m)&&(this[m]=v[m]);v.hasOwnProperty("toString")&&(this.toString=v.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),u=d.WordArray=l.extend({init:function(v,m){v=this.words=v||[],m!=r?this.sigBytes=m:this.sigBytes=v.length*4},toString:function(v){return(v||p).stringify(this)},concat:function(v){var m=this.words,_=v.words,I=this.sigBytes,H=v.sigBytes;if(this.clamp(),I%4)for(var D=0;D<H;D++){var V=_[D>>>2]>>>24-D%4*8&255;m[I+D>>>2]|=V<<24-(I+D)%4*8}else for(var ee=0;ee<H;ee+=4)m[I+ee>>>2]=_[ee>>>2];return this.sigBytes+=H,this},clamp:function(){var v=this.words,m=this.sigBytes;v[m>>>2]&=4294967295<<32-m%4*8,v.length=s.ceil(m/4)},clone:function(){var v=l.clone.call(this);return v.words=this.words.slice(0),v},random:function(v){for(var m=[],_=0;_<v;_+=4)m.push(i());return new u.init(m,v)}}),h=c.enc={},p=h.Hex={stringify:function(v){for(var m=v.words,_=v.sigBytes,I=[],H=0;H<_;H++){var D=m[H>>>2]>>>24-H%4*8&255;I.push((D>>>4).toString(16)),I.push((D&15).toString(16))}return I.join("")},parse:function(v){for(var m=v.length,_=[],I=0;I<m;I+=2)_[I>>>3]|=parseInt(v.substr(I,2),16)<<24-I%8*4;return new u.init(_,m/2)}},g=h.Latin1={stringify:function(v){for(var m=v.words,_=v.sigBytes,I=[],H=0;H<_;H++){var D=m[H>>>2]>>>24-H%4*8&255;I.push(String.fromCharCode(D))}return I.join("")},parse:function(v){for(var m=v.length,_=[],I=0;I<m;I++)_[I>>>2]|=(v.charCodeAt(I)&255)<<24-I%4*8;return new u.init(_,m)}},b=h.Utf8={stringify:function(v){try{return decodeURIComponent(escape(g.stringify(v)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(v){return g.parse(unescape(encodeURIComponent(v)))}},y=d.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(v){typeof v=="string"&&(v=b.parse(v)),this._data.concat(v),this._nDataBytes+=v.sigBytes},_process:function(v){var m,_=this._data,I=_.words,H=_.sigBytes,D=this.blockSize,V=D*4,ee=H/V;v?ee=s.ceil(ee):ee=s.max((ee|0)-this._minBufferSize,0);var me=ee*D,we=s.min(me*4,H);if(me){for(var Se=0;Se<me;Se+=D)this._doProcessBlock(I,Se);m=I.splice(0,me),_.sigBytes-=we}return new u.init(m,we)},clone:function(){var v=l.clone.call(this);return v._data=this._data.clone(),v},_minBufferSize:0});d.Hasher=y.extend({cfg:l.extend(),init:function(v){this.cfg=this.cfg.extend(v),this.reset()},reset:function(){y.reset.call(this),this._doReset()},update:function(v){return this._append(v),this._process(),this},finalize:function(v){v&&this._append(v);var m=this._doFinalize();return m},blockSize:16,_createHelper:function(v){return function(m,_){return new v.init(_).finalize(m)}},_createHmacHelper:function(v){return function(m,_){return new E.HMAC.init(v,_).finalize(m)}}});var E=c.algo={};return c}(Math);return n})}(Ny)),Cr}var sc;function My(){return sc||(sc=1,function(e,t){(function(n,s){e.exports=s(zy())})(Is,function(n){return function(s){var r=n,o=r.lib,i=o.WordArray,a=o.Hasher,c=r.algo,d=[],l=[];(function(){function p(E){for(var v=s.sqrt(E),m=2;m<=v;m++)if(!(E%m))return!1;return!0}function g(E){return(E-(E|0))*4294967296|0}for(var b=2,y=0;y<64;)p(b)&&(y<8&&(d[y]=g(s.pow(b,1/2))),l[y]=g(s.pow(b,1/3)),y++),b++})();var u=[],h=c.SHA256=a.extend({_doReset:function(){this._hash=new i.init(d.slice(0))},_doProcessBlock:function(p,g){for(var b=this._hash.words,y=b[0],E=b[1],v=b[2],m=b[3],_=b[4],I=b[5],H=b[6],D=b[7],V=0;V<64;V++){if(V<16)u[V]=p[g+V]|0;else{var ee=u[V-15],me=(ee<<25|ee>>>7)^(ee<<14|ee>>>18)^ee>>>3,we=u[V-2],Se=(we<<15|we>>>17)^(we<<13|we>>>19)^we>>>10;u[V]=me+u[V-7]+Se+u[V-16]}var He=_&I^~_&H,De=y&E^y&v^E&v,Je=(y<<30|y>>>2)^(y<<19|y>>>13)^(y<<10|y>>>22),Xt=(_<<26|_>>>6)^(_<<21|_>>>11)^(_<<7|_>>>25),rt=D+Xt+He+l[V]+u[V],ft=Je+De;D=H,H=I,I=_,_=m+rt|0,m=v,v=E,E=y,y=rt+ft|0}b[0]=b[0]+y|0,b[1]=b[1]+E|0,b[2]=b[2]+v|0,b[3]=b[3]+m|0,b[4]=b[4]+_|0,b[5]=b[5]+I|0,b[6]=b[6]+H|0,b[7]=b[7]+D|0},_doFinalize:function(){var p=this._data,g=p.words,b=this._nDataBytes*8,y=p.sigBytes*8;return g[y>>>5]|=128<<24-y%32,g[(y+64>>>9<<4)+14]=s.floor(b/4294967296),g[(y+64>>>9<<4)+15]=b,p.sigBytes=g.length*4,this._process(),this._hash},clone:function(){var p=a.clone.call(this);return p._hash=this._hash.clone(),p}});r.SHA256=a._createHelper(h),r.HmacSHA256=a._createHmacHelper(h)}(Math),n.SHA256})}(Dy)),Hr}var Hy=My();const Cy=Ih(Hy),Wy=-443636;function Cw(e,t){const n=Gy(e),s=(n-Wy)%t;return s>t/2?n-s+t:n-s}const Ju=new ne("1.0001");function Gy(e){return e.log(Ju).toDP(0,ne.ROUND_HALF_UP).toNumber()}function Ww(e){return Ju.pow(e)}function _r(e,t,n){const s=Math.abs(e)%t;return e>0?s>t/2||n&&t<=2?e+t-s:e-s:s>t/2?e-t+s:e+s}function Ky(){const e=j.Aptos.liquidswapDeployer,t={rpcUrl:localStorage.getItem("Aptos-currentRpclocal4")||j.Aptos.rpcUrl,fraphQLUrl:j.Aptos.fraphQLUrl,networkOptions:{nativeToken:"0x1::aptos_coin::AptosCoin",launchpad:{cetusLaunchpad:j.Aptos.Launchpad,crowdCoin:j.Aptos.LaunchpadCrowdCoin},simulationAccount:{pubkey:j.Aptos.accountPublicKey,address:j.Aptos.accountAddress},modules:{LiquidswapDeployer:e,ClmmIntegrate:j.Aptos.clmmIntegrate,FetcherDeployer:j.Aptos.fetcher,TokenDeployer:j.Aptos.TokenDeployer,IntegerMate:j.Aptos.IntegerMate}}},n=new Uh(t),s=ai(),r=Ph(),o=In(()=>r),i=In(()=>o.value.currentExplorer),{$notify:a}=On(),c=P=>{const{$notify:R}=On();R.success({key:P.hash+"loading",icon:Z("img",{class:{"notify-icon":!0,"loading-animate":!0},src:o.value.theme=="default"?"/image/img-loading@2x.png":"/sui-image/img-loading.png"}),message:Z("div",{class:"notification-title"},[Z("span",{innerHTML:P.title},null)]),description:Z("div",{class:"notification-title"},[Z("div",{class:"notification-text",innerHTML:ut.global.t("newAdd.confirmingTransaction")},null),Z("a",{href:Or(i.value,"tx",P.hash),target:"_blank",innerHTML:ut.global.t("common.viewTransaction")},null)]),duration:0,class:"ant-notification-copy ant-notification-swap"})},d=P=>{a.success({icon:Z("svg",{class:{icon:!0},"aria-hidden":!0},[Z("use",{"xlink:href":"#icon-icon-change1"})]),message:Z("div",{class:"notification-title"},[Z("span",{innerHTML:`${P.title} `+ut.global.t("newAdd.success")},null)]),description:Z("div",{class:"notification-title"},[Z("div",{class:"notification-text",innerHTML:P.desc},null),Z("a",{href:Or(i.value,"tx",P.hash),target:"_blank",innerHTML:ut.global.t("common.viewTransaction")},null)]),duration:4.5,class:"ant-notification-copy ant-notification-swap"})},l=P=>{a.error({icon:Z("svg",{class:{icon:!0},"aria-hidden":!0},[Z("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:Z("div",{class:"notification-title"},[Z("span",{innerHTML:`${P} `+ut.global.t("newAdd.failed")},null)]),description:ut.global.t("newAdd.somethingWrong"),duration:4.5,class:"ant-notification-copy ant-notification-error"})},u=async(P,R=!1)=>{const F=await n.client.waitForTransactionWithResult(P.hash);if(console.log("watchTransaction###res###",F),F&&F.success){a.close(P.hash+"loading"),console.log("watchTransaction#####success"),d(P);const z={walletAddress:s.address,chainName:"Aptos",...P,...F,date:new Date().getTime()+6048e5};return r.setTransactionList(z),R?{status:!0,nftInfo:F.events.filter(te=>te.type.includes("CreateTokenDataEvent"))}:!0}else{if(F&&!F.success)return a.close(P.hash+"loading"),console.log("watchTransaction#####error"),l(P.title),!1;console.log("watchTransaction#####one more"),setTimeout(()=>u(P,R),3e3)}},h=async(P,R=!1)=>{const F=await n.client.waitForTransactionWithResult(P.hash);if(console.log("watchTransaction###res###",F),F&&F.success){console.log("watchTransaction#####success");const z={walletAddress:s.address,chainName:"Aptos",...P,...F,date:new Date().getTime()+6048e5};r.setTransactionList(z)}},p=async P=>{try{const R=await n.Resources.getCoinStores(P),F=[];return R.forEach(z=>{let W="";z.coinAddress.includes("0x0000000000000000000000000000000000000000000000000000000000000001")?W=z.coinAddress.replace(/0x0000000000000000000000000000000000000000000000000000000000000001/,"0x1"):W=z.coinAddress,F.push({...z,coinAddress:W})}),F}catch{return[]}},g=async P=>{try{s.setLoading(!0);const R=await p(P),F={};R.forEach(z=>{const W=z?z.coin.value:"0";F[z.coinAddress]={...z,balance:W}}),console.log("1212###assets####",F),s.setAssets(F),s.setLoading(!1)}catch(R){console.log("getAccount##error###",R),s.setLoading(!1),s.setAssets({})}},b=async()=>{const P={pubkey:Bt(j.Aptos.accountPublicKey),address:Bt(j.Aptos.accountAddress)},R=await n.Token.getAllRegisteredTokenList(P);return console.log("0215####tokenList####",R),R},y=async(P,R,F)=>n.Resources.getPoolState(P,R,F),E=async P=>{const R={pubkey:Bt(j.Aptos.accountPublicKey),address:Bt(j.Aptos.accountAddress)};return await n.Token.getOwnerWarpPoolList(j.Aptos.TokenDeployer,R)},v=async P=>await n.Resources.getPool(P);return{setTransations:h,showTransitionPending:c,showTransitionSuccess:d,showTransitionError:l,watchTransaction:u,getAccount:g,getPoolState:y,getPools:async P=>await n.Resources.getPools(P),getPool:v,registerCoin:P=>({function:"0x1::managed_coin::register",type_arguments:[P],arguments:[],type:"entry_function_payload"}),estLiquidityAndcoinAmountFromOneAmounts:P=>{console.log("estLiquidityAndcoinAmountFromOneAmounts###params####",P);const{tokenA:R,tokenB:F,lowerTick:z,upperTick:W,coinAmount:Y,iscoinA:te,roundUp:ie,slippage:fe,curSqrtPrice:ge}=P,le=sn.estLiquidityAndcoinAmountFromOneAmounts(z,W,Y,te,ie,fe,ge),ue=R.decimals,qe=F.decimals,{tokenMaxA:$e,tokenMaxB:Ce,liquidityAmount:We}=le;return{tokenMaxAOrigin:$e.toString(),tokenMaxBOrigin:Ce.toString(),tokenMaxA:ke($e.toString(),ue),tokenMaxB:ke(Ce.toString(),qe),liquidityAmount:We}},getCoinAmountFromLiquidity:P=>{const{pool:R,position:F,roundUp:z}=P,W=Number(F.tick_lower_index),Y=Number(F.tick_upper_index),te=Ht.tickIndexToSqrtPriceX64(W),ie=Ht.tickIndexToSqrtPriceX64(Y),fe=sn.getCoinAmountFromLiquidity(new ce(F.liquidity),new ce(R.current_sqrt_price),te,ie,z),ge=ke(fe.coinA.toString(),R.coinA.decimals),le=ke(fe.coinB.toString(),R.coinB.decimals);return{coinaAmount:ge,coinbAmount:le}},getAddLiquidityTransactionPayload:async P=>{const{pool:R,amount:F,fix_amount_a:z,roundUp:W,tick_lower:Y,tick_upper:te,index:ie,slippage:fe}=P;console.log(P,"===>params411");const ge=await v(R.poolAddress),le=z?Xe(F,R.token_a.decimals):Xe(F,R.token_b.decimals),ue=Ht.sqrtPriceX64ToTickIndex(new ce(ge.current_sqrt_price));let qe,$e;if(ue>=Y&&ue<=te){const We=sn.estLiquidityAndcoinAmountFromOneAmounts(Y,te,new ce(le.toString()),z,W,fe,new ce(ge.current_sqrt_price));qe=z?le.toNumber():We.tokenMaxA.toNumber(),$e=z?We.tokenMaxB.toNumber():le.toNumber()}else ue>te?(qe=0,$e=le.toNumber()):ue<Y&&(qe=le.toNumber(),$e=0);return n.Position.createAddLiquidityTransactionPayload({pool:R.poolAddress,coinTypeA:R.token_a.address,coinTypeB:R.token_b.address,amount_a:qe,amount_b:$e,fix_amount_a:z,tick_lower:Y,tick_upper:te,is_open:!ie,index:ie})},getRemoveLiquidityTransactionPayload:async P=>{const{pool:R,coinTypeA:F,coinTypeB:z,coinTypeC:W,coinTypeD:Y,coinTypeE:te,position:ie,delta_liquidity:fe,rewards_num:ge}=P;console.log("getRemoveLiquidityTransactionPayload####delta_liquidity#####",fe.toString());const le=await v(R.poolAddress),ue={...R,...le},qe=Number(ie.tick_lower_index),$e=Number(ie.tick_upper_index),Ce=Ht.tickIndexToSqrtPriceX64(qe),We=Ht.tickIndexToSqrtPriceX64($e),Mt=sn.getCoinAmountFromLiquidity(fe,new ce(ue.current_sqrt_price),Ce,We,!0),nn=es(Mt.coinA.toString()).mul(es(1-P.slippage/100)),mn=es(Mt.coinB.toString()).mul(es(1-P.slippage/100));return await n.Position.removeLiquidityTransactionPayload({pool:R.poolAddress,coinTypeA:F,coinTypeB:z,coinTypeC:W,coinTypeD:Y,coinTypeE:te,delta_liquidity:fe,min_amount_a:Number(Ie(nn.toString(),0)),min_amount_b:Number(Ie(mn.toString(),0)),pos_index:P.position.index,is_close:!1,rewards_num:ge})},getCollectFeeTransactionPayload:async P=>{console.log("1130###getCollectFeeTransactionPayload###params",{pool:P.pool.poolAddress,coinTypeA:P.pool.token_a.address,coinTypeB:P.pool.token_b.address,pos_index:P.position.index});const R=await n.Position.collectFeeTransactionPayload({pool:P.pool.poolAddress,coinTypeA:P.pool.token_a.address,coinTypeB:P.pool.token_b.address,pos_index:P.position.index});return console.log("1130###getCollectFeeTransactionPayload###result##",R),R},getPositionList:async(P,R)=>{let F=0;if(j.Aptos.network==="mainnet"){let z,W=[];do{const te={operationName:"AccountTokensData",variables:{owner_address:P,limit:100,offset:F},query:`query AccountTokensData($owner_address: String, $limit: Int, $offset: Int) {
  current_token_ownerships(
    where: {owner_address: {_eq: $owner_address}, amount: {_gt: "0"}}
    limit: $limit
    offset: $offset
  ) {
    token_data_id_hash
 creator_address
 name
    collection_name
  table_type
    property_version
    amount
    __typename
  }
}`},ie=await $fetch("https://indexer.mainnet.aptoslabs.com/v1/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(te)});z=ie&&ie.data&&ie.data.current_token_ownerships||[],W=[...W,...z],F+=z.length,console.log(" ~ file: useAptos.ts:413 ~ getPositionList ~ current_token_ownerships:",z.length)}while(z&&z.length==100);console.log("###list",W);const Y=[];for(let te=0;te<W.length;te++){const ie=W[te],fe=R[qh(ie.creator_address)];if(console.log(fe,"##pool"),fe){const ge=ie.name.split("-")[1],le=fe.positions_handle;console.log(" ~ file: useAptos.ts:424 ~ getPositionList ~ positionsHandle:",le),console.log(" ~ file: useAptos.ts:425 ~ getPositionList ~ positinIndex:",ge);const ue=await n.Resources.getPositionInfoByIndex(le,ge);Y.push({...ue,tokenName:ie.name})}}return console.log("0221###aptos###getPositionList###",Y),Y}else{const z=Object.values(R);console.log(z,"###poolList");const W=await n.Resources.getPositionList(P,z);return console.log("0221###aptos###getPositionList###list###",W),W}},getPositionInfo:async(P,R,F,z="")=>({...await n.Resources.getPositionInfo(P,F),tokenName:F,collectionName:R}),getSwapTransactionPayload:async P=>{const{pool:R,a2b:F,byAmountIn:z,amount:W,slippage:Y}=P,te=R.poolAddress||R.address,ie=R.token_a.decimals,fe=R.token_b.decimals,ge=await v(R.address);let le;F&&z||!F&&!z?le=Xe(W,ie):le=Xe(W,fe);const ue=await n.Swap.preswap({pool:ge,decimalsA:ie,decimalsB:fe,a2b:F,by_amount_in:z,amount:le.toString()});console.log("1130###getSwapTransactionPayload###preSwapRes###",ue),console.log("1130###getSwapTransactionPayload###preSwapRes.estimatedAmountOut###",ue.estimatedAmountOut.toString()),console.log("1130###getSwapTransactionPayload###preSwapRes.estimatedAmountIn###",ue.estimatedAmountIn.toString());const qe=es(ue.estimatedAmountOut.toString()),$e=es(ue.estimatedAmountIn.toString()),Ce=z?qe.sub(qe.mul(Y)):$e.add($e.mul(Y));console.log("1130###amountLimit####",Ce.toString()),console.log("1130###swap##params###",{pool_addr:te,coinTypeA:R.token_a.address,coinTypeB:R.token_b.address,a_to_b:ue.aToB,by_amount_in:ue.byAmountIn,amount:ue.amount.toString(),amount_limit:Ie(Ce.toString(),0)||""});const We=n.Swap.createSwapTransactionPayload({pool_addr:te,coinTypeA:R.token_a.address,coinTypeB:R.token_b.address,a_to_b:ue.aToB,by_amount_in:ue.byAmountIn,amount:ue.amount.toString(),amount_limit:Ie(Ce.toString(),0)||"",partner:""});return console.log("1130###swap##result###",We),We},getCoin:P=>({type:"entry_function_payload",function:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet",arguments:[],type_arguments:[]}),preSwap:async P=>{const{pool:R,a2b:F,byAmountIn:z,amount:W}=P;console.log(P,"===>params");const Y=R.coinA.decimals,te=R.coinB.decimals;let ie=R;R.coinTypeA||(ie={...R,poolAddress:R.address,coinTypeA:R.coinA.address,coinTypeB:R.coinB.address});let fe;F&&z||!F&&!z?fe=Xe(W,Y):fe=Xe(W,te);const ge=await n.Swap.preswap({pool:ie,decimalsA:Y,decimalsB:te,a2b:F,by_amount_in:z,amount:fe.toString()});return{...ge,estimatedAmountIn:os(ke(ge.estimatedAmountIn.toString(),F?Y:te),F?Y:te),estimatedAmountOut:os(ke(ge.estimatedAmountOut.toString(),F?te:Y),F?te:Y),priceImpactPct:Ie(ge.priceImpactPct,2)}},getTicks:async P=>{try{return{list:await n.Fetcher.fetchTicks({pool:P.poolAddress,coinTypeA:P.coinTypeA,coinTypeB:P.coinTypeB}),address:P.poolAddress}}catch(R){console.log("getTicks Error###",R)}},TickMath:Ht,TickUtil:Rh,ClmmPoolUtil:sn,getNearestTickByTick:_r,getTickDataFromUrlData:Lh,getCollectFeesQuote:async P=>{console.log(P,"params====>");const{pool:R,position:F,tickLowerData:z,tickUpperData:W}=P,Y=$h({clmmpool:R,position:F,tickLower:z,tickUpper:W}),te=ke(Y.feeOwedA.toString(),R.token_a.decimals),ie=ke(Y.feeOwedB.toString(),R.token_b.decimals);return console.log("0118###useApots###result.feeOwedA.toString()###",Y.feeOwedA.toString()),console.log("0118###useApots###result.feeOwedB.toString()###",Y.feeOwedB.toString()),console.log("0118###useApots###feeOwedA###",te),console.log("0118###useApots###feeOwedB###",ie),{feeOwedA:Number(te)>99999999999||Number(te)<0?"0":te,feeOwedB:Number(ie)>99999999999||Number(ie)<0?"0":ie}},mintCoin:P=>({function:`${j.Aptos.faucetObjectId}::coin::mint`,type_arguments:[`${j.Aptos.faucetObjectId}::coin::${P.name}`],arguments:[P.amount],type:"entry_function_payload"}),getNftHash:P=>{const R=`${P.creator}::${P.collection}::${P.name}`;return Cy(R).toString()},getCollectRewarderTransactionPayload:P=>n.Rewarder.collectPoolRewarderTransactionPayload(P),getPosRewardersAmount:async P=>{console.log(JSON.stringify(P),"=====>params792");const{poolAddress:R,positionName:F,tickLowerData:z,tickUpperData:W}=P;return await n.Rewarder.posRewardersAmount(R,F,z,W)},getTokenList:b,getTickDataByIndex:async(P,R)=>(console.log(P,R,"getTickDataByIndex"),await n.Resources.getTickDataByIndex(P,R)),initSwapRouter:async P=>{n.Router.addPathProvider(P),await n.Router.setCoinList({pubkey:Bt(j.Aptos.accountPublicKey),address:Bt(j.Aptos.accountAddress)}),await n.Router.loadGraph()},getSwapRouter:async(P,R)=>await n.Router.price(P,R),getEstPositionAPRWithDelta:async(P,R,F,z,W,Y,te,ie,fe,ge,le,ue,qe,$e,Ce,We,Mt,nn,mn,jn,xt,Ea,Pa,f)=>await jh(P,R,F,z,W,Y,te,ie,fe,ge,le,ue,qe,$e,Ce,We,Mt,nn,mn,jn,xt,Ea,Pa,f),getPriceImpactPct:(P,R,F)=>{const z=Ht.sqrtPriceX64ToPrice(new ce(P.current_sqrt_price),P.coinA.decimals,P.coinB.decimals).toNumber(),W=F?z:1/z,Y=Math.abs(W-Number(R))/Number(W)*100;return Number(Ie(Y,2))},getLpList:E,getEstPositionAPRWithMulti:async(P,R,F,z)=>await Fh(P,R,F,z),getCreatPoolTransactionPayload:async P=>{const{coinTypeA:R,coinTypeB:F,tick_lower:z,tick_upper:W,tick_spacing:Y,initialize_sqrt_price:te,max_amount_a:ie,max_amount_b:fe,slippage:ge,fix_amount_a:le,decimalsA:ue,decimalsB:qe,liquidityInput:$e}=P;console.log(P,"params===>");const Ce=le?Xe(ie,ue):Xe(fe,qe);console.log(Ce,"===>coinAmount");const We=Ht.sqrtPriceX64ToTickIndex(new ce(te));let Mt,nn;const mn=Ht.tickIndexToSqrtPriceX64(z),jn=Ht.tickIndexToSqrtPriceX64(W);console.log(mn,"===>minPriceX64"),console.log(jn,"===>maxPriceX64");let xt;return We>z&&We<W?(xt=sn.estLiquidityAndcoinAmountFromOneAmounts(z,W,new ce(Ce.toString()),le,!0,ge,new ce(te)),Mt=le?Ce.toNumber():xt.tokenMaxA.toNumber(),nn=le?xt.tokenMaxB.toNumber():Ce.toNumber()):We>=W?(xt=Oa(mn,jn,new ce(Ce.toString())),Mt=new ce($e.tokenMaxA*Math.pow(10,ue)),nn=new ce($e.tokenMaxB*Math.pow(10,qe))):We<=z&&(xt=Ia(mn,jn,new ce(Ce.toString())),Mt=new ce($e.tokenMaxA*Math.pow(10,ue)),nn=new ce($e.tokenMaxB*Math.pow(10,qe))),console.log(xt,"===>preAddResult"),await n.Pool.creatPoolTransactionPayload({coinTypeA:R,coinTypeB:F,tick_spacing:Y,initialize_sqrt_price:new ce(te),uri:"",delta_liquidity:We>z&&We<W?xt.liquidityAmount:xt,max_amount_a:Mt,max_amount_b:nn,tick_lower:z,tick_upper:W},!0)},getTokenListByCoinType:async()=>await n.Token.getTokenListByCoinType("",0,99999),getPoolImmutables:async()=>await n.Resources.getPoolImmutables(),estimateLiquidityForCoinA:Ia,estimateLiquidityForCoinB:Oa,getTokenBySymbol:async(P,R)=>{if(!R)return null;let F=null;for(const z in P){const W=P[z];if(W.address.toUpperCase()===R.toUpperCase()){F=W;break}}return F},estCoinAmountsFromTotalAmount:P=>{const{lowerTick:R,upperTick:F,decimalsA:z,decimalsB:W,curSqrtPrice:Y,totalAmount:te,tokenPriceA:ie,tokenPriceB:fe}=P;console.log(JSON.stringify({...P,curSqrtPrice:Y.toString()}),"params===>");const ge=sn.estCoinAmountsFromTotalAmount(R,F,Y,te,ie,fe);console.log("coinAmounts: ",ge);const le=Ur(ge.amountA.toFixed(z,ne.ROUND_UP).toString(),z),ue=Ur(ge.amountB.toFixed(W,ne.ROUND_UP).toString(),W),qe={coinA:new ce(le),coinB:new ce(ue)};return{amountA:ke(le.toString(),z),amountB:ke(ue.toString(),W),tokenAmountsInfo:qe}},getCreateAddLiquidityPayload:async P=>{const{curSqrtPrice:R,tickLower:F,tickUpper:z,tokenAmounts:W,pool:Y,slippage:te}=P;console.log(JSON.stringify(P),"####getCreateAddLiquidityPayload 1593");const ie=sn.estimateLiquidityFromcoinAmounts(R,F,z,W),fe=new ne(W.coinA.toString()).mul(1+te),ge=new ne(W.coinB.toString()).mul(1+te),le={coinTypeA:Y.coinTypeA,coinTypeB:Y.coinTypeB,tick_lower:F,tick_upper:z,pool:Y.address,delta_liquidity:ie,max_amount_a:ne.ceil(fe).toString(),max_amount_b:ne.ceil(ge).toString(),is_open:!0,index:0};return console.log(JSON.stringify(le),"==>addLiquidityPayloadParams"),await n.Position.createAddLiquidityTransactionPayload(le)},calculateDepositRatioFixTokenA:(P,R,F)=>sn.calculateDepositRatioFixTokenA(P,R,F)}}function Jy(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var s=0;s<e.length;s++){var r=e.charAt(s),o=r.charCodeAt(0);if(t[o]!==255)throw new TypeError(r+" is ambiguous");t[o]=s}var i=e.length,a=e.charAt(0),c=Math.log(i)/Math.log(256),d=Math.log(256)/Math.log(i);function l(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,b=0,y=0,E=p.length;y!==E&&p[y]===0;)y++,g++;for(var v=(E-y)*d+1>>>0,m=new Uint8Array(v);y!==E;){for(var _=p[y],I=0,H=v-1;(_!==0||I<b)&&H!==-1;H--,I++)_+=256*m[H]>>>0,m[H]=_%i>>>0,_=_/i>>>0;if(_!==0)throw new Error("Non-zero carry");b=I,y++}for(var D=v-b;D!==v&&m[D]===0;)D++;for(var V=a.repeat(g);D<v;++D)V+=e.charAt(m[D]);return V}function u(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;for(var g=0,b=0,y=0;p[g]===a;)b++,g++;for(var E=(p.length-g)*c+1>>>0,v=new Uint8Array(E);p[g];){var m=t[p.charCodeAt(g)];if(m===255)return;for(var _=0,I=E-1;(m!==0||_<y)&&I!==-1;I--,_++)m+=i*v[I]>>>0,v[I]=m%256>>>0,m=m/256>>>0;if(m!==0)throw new Error("Non-zero carry");y=_,g++}for(var H=E-y;H!==E&&v[H]===0;)H++;for(var D=new Uint8Array(b+(E-H)),V=b;H!==E;)D[V++]=v[H++];return D}function h(p){var g=u(p);if(g)return g;throw new Error("Non-base"+i+" character")}return{encode:l,decodeUnsafe:u,decode:h}}var Vy=Jy;const Xy=Vy,Qy="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var Vu=Xy(Qy);const rr=e=>Vu.encode(e),or=e=>Vu.decode(e);function Ln(e){return Uint8Array.from(atob(e),t=>t.charCodeAt(0))}const ko=8192;function un(e){if(e.length<ko)return btoa(String.fromCharCode(...e));let t="";for(var n=0;n<e.length;n+=ko){const s=e.slice(n,n+ko);t+=String.fromCharCode(...s)}return btoa(t)}function bo(e){var r;const t=e.startsWith("0x")?e.slice(2):e,s=((r=(t.length%2===0?t:`0${t}}`).match(/.{2}/g))==null?void 0:r.map(o=>parseInt(o,16)))??[];return Uint8Array.from(s)}function vs(e){return e.reduce((t,n)=>t+n.toString(16).padStart(2,"0"),"")}function Vi(e){let t=[],n=0;if(e===0)return[0];for(;e>0;)t[n]=e&127,(e>>=7)&&(t[n]|=128),n+=1;return t}function Zy(e){let t=0,n=0,s=0;for(;;){let r=e[s];if(s+=1,t|=(r&127)<<n,!(r&128))break;n+=7}return{value:t,length:s}}class Xu{constructor(t){this.bytePosition=0,this.dataView=new DataView(t.buffer)}shift(t){return this.bytePosition+=t,this}read8(){let t=this.dataView.getUint8(this.bytePosition);return this.shift(1),t}read16(){let t=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),t}read32(){let t=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),t}read64(){let t=this.read32(),s=this.read32().toString(16)+t.toString(16).padStart(8,"0");return BigInt("0x"+s).toString(10)}read128(){let t=BigInt(this.read64()),s=BigInt(this.read64()).toString(16)+t.toString(16).padStart(16,"0");return BigInt("0x"+s).toString(10)}read256(){let t=BigInt(this.read128()),s=BigInt(this.read128()).toString(16)+t.toString(16).padStart(32,"0");return BigInt("0x"+s).toString(10)}readBytes(t){let n=this.bytePosition+this.dataView.byteOffset,s=new Uint8Array(this.dataView.buffer,n,t);return this.shift(t),s}readULEB(){let t=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,t),{value:s,length:r}=Zy(n);return this.shift(r),s}readVec(t){let n=this.readULEB(),s=[];for(let r=0;r<n;r++)s.push(t(this,r,n));return s}}function Yy(e,t){switch(t){case"base58":return rr(e);case"base64":return un(e);case"hex":return vs(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function em(e,t){switch(t){case"base58":return or(e);case"base64":return Ln(e);case"hex":return bo(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function Xi(e,t=["<",">"]){const[n,s]=t,r=[];let o="",i=0;for(let a=0;a<e.length;a++){const c=e[a];if(c===n&&i++,c===s&&i--,i===0&&c===","){r.push(o.trim()),o="";continue}o+=c}return r.push(o.trim()),r}class Qu{constructor({size:t=1024,maxSize:n,allocateSize:s=1024}={}){this.bytePosition=0,this.size=t,this.maxSize=n||t,this.allocateSize=s,this.dataView=new DataView(new ArrayBuffer(t))}ensureSizeOrGrow(t){const n=this.bytePosition+t;if(n>this.size){const s=Math.min(this.maxSize,this.size+this.allocateSize);if(n>s)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${n}`);this.size=s;const r=new ArrayBuffer(this.size);new Uint8Array(r).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(r)}}shift(t){return this.bytePosition+=t,this}write8(t){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(t)),this.shift(1)}write16(t){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(t),!0),this.shift(2)}write32(t){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(t),!0),this.shift(4)}write64(t){return _o(BigInt(t),8).forEach(n=>this.write8(n)),this}write128(t){return _o(BigInt(t),16).forEach(n=>this.write8(n)),this}write256(t){return _o(BigInt(t),32).forEach(n=>this.write8(n)),this}writeULEB(t){return Vi(t).forEach(n=>this.write8(n)),this}writeVec(t,n){return this.writeULEB(t.length),Array.from(t).forEach((s,r)=>n(this,s,r,t.length)),this}*[Symbol.iterator](){for(let t=0;t<this.bytePosition;t++)yield this.dataView.getUint8(t);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(t){return Yy(this.toBytes(),t)}}function _o(e,t){let n=new Uint8Array(t),s=0;for(;e>0;)n[s]=Number(e%BigInt(256)),e=e/BigInt(256),s+=1;return n}var Zu=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},It=(e,t,n)=>(Zu(e,t,"read from private field"),n?n.call(e):t.get(e)),Wr=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Gr=(e,t,n,s)=>(Zu(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),rs,Ls,Er,Pn;const Yu=class{constructor(e){Wr(this,rs,void 0),Wr(this,Ls,void 0),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),Gr(this,rs,e.write),Gr(this,Ls,e.serialize??((t,n)=>{const s=new Qu({size:this.serializedSize(t)??void 0,...n});return It(this,rs).call(this,t,s),s.toBytes()})),this.validate=e.validate??(()=>{})}write(e,t){this.validate(e),It(this,rs).call(this,e,t)}serialize(e,t){return this.validate(e),new tm(this,It(this,Ls).call(this,e,t))}parse(e){const t=new Xu(e);return this.read(t)}transform({name:e,input:t,output:n}){return new Yu({name:e??this.name,read:s=>n(this.read(s)),write:(s,r)=>It(this,rs).call(this,t(s),r),serializedSize:s=>this.serializedSize(t(s)),serialize:(s,r)=>It(this,Ls).call(this,t(s),r),validate:s=>this.validate(t(s))})}};let Rt=Yu;rs=new WeakMap;Ls=new WeakMap;const eh=Symbol.for("@mysten/serialized-bcs");function Qi(e){return!!e&&typeof e=="object"&&e[eh]===!0}class tm{constructor(t,n){Wr(this,Er,void 0),Wr(this,Pn,void 0),Gr(this,Er,t),Gr(this,Pn,n)}get[eh](){return!0}toBytes(){return It(this,Pn)}toHex(){return vs(It(this,Pn))}toBase64(){return un(It(this,Pn))}toBase58(){return rr(It(this,Pn))}parse(){return It(this,Er).parse(It(this,Pn))}}Er=new WeakMap;Pn=new WeakMap;function Kr({size:e,...t}){return new Rt({...t,serializedSize:()=>e})}function Eo({readMethod:e,writeMethod:t,...n}){return Kr({...n,read:s=>s[e](),write:(s,r)=>r[t](s),validate:s=>{var r;if(s<0||s>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${s}. Expected value in range 0-${n.maxValue}`);(r=n.validate)==null||r.call(n,s)}})}function Po({readMethod:e,writeMethod:t,...n}){return Kr({...n,read:s=>s[e](),write:(s,r)=>r[t](BigInt(s)),validate:s=>{var o;const r=BigInt(s);if(r<0||r>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${r}. Expected value in range 0-${n.maxValue}`);(o=n.validate)==null||o.call(n,r)}})}function nm({serialize:e,...t}){const n=new Rt({...t,serialize:e,write:(s,r)=>{for(const o of n.serialize(s).toBytes())r.write8(o)}});return n}function sm({toBytes:e,fromBytes:t,...n}){return new Rt({...n,read:s=>{const r=s.readULEB(),o=s.readBytes(r);return t(o)},write:(s,r)=>{const o=e(s);r.writeULEB(o.length);for(let i=0;i<o.length;i++)r.write8(o[i])},serialize:s=>{const r=e(s),o=Vi(r.length),i=new Uint8Array(o.length+r.length);return i.set(o,0),i.set(r,o.length),i},validate:s=>{var r;if(typeof s!="string")throw new TypeError(`Invalid ${n.name} value: ${s}. Expected string`);(r=n.validate)==null||r.call(n,s)}})}function rm(e){let t=null;function n(){return t||(t=e()),t}return new Rt({name:"lazy",read:s=>n().read(s),serializedSize:s=>n().serializedSize(s),write:(s,r)=>n().write(s,r),serialize:(s,r)=>n().serialize(s,r).toBytes()})}const O={u8(e){return Eo({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...e})},u16(e){return Eo({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...e})},u32(e){return Eo({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...e})},u64(e){return Po({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...e})},u128(e){return Po({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...e})},u256(e){return Po({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...e})},bool(e){return Kr({name:"bool",size:1,read:t=>t.read8()===1,write:(t,n)=>n.write8(t?1:0),...e,validate:t=>{var n;if((n=e==null?void 0:e.validate)==null||n.call(e,t),typeof t!="boolean")throw new TypeError(`Expected boolean, found ${typeof t}`)}})},uleb128(e){return nm({name:"uleb128",read:t=>t.readULEB(),serialize:t=>Uint8Array.from(Vi(t)),...e})},bytes(e,t){return Kr({name:`bytes[${e}]`,size:e,read:n=>n.readBytes(e),write:(n,s)=>{for(let r=0;r<e;r++)s.write8(n[r]??0)},...t,validate:n=>{var s;if((s=t==null?void 0:t.validate)==null||s.call(t,n),!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==e)throw new TypeError(`Expected array of length ${e}, found ${n.length}`)}})},string(e){return sm({name:"string",toBytes:t=>new TextEncoder().encode(t),fromBytes:t=>new TextDecoder().decode(t),...e})},fixedArray(e,t,n){return new Rt({name:`${t.name}[${e}]`,read:s=>{const r=new Array(e);for(let o=0;o<e;o++)r[o]=t.read(s);return r},write:(s,r)=>{for(const o of s)t.write(o,r)},...n,validate:s=>{var r;if((r=n==null?void 0:n.validate)==null||r.call(n,s),!("length"in s))throw new TypeError(`Expected array, found ${typeof s}`);if(s.length!==e)throw new TypeError(`Expected array of length ${e}, found ${s.length}`)}})},option(e){return O.enum(`Option<${e.name}>`,{None:null,Some:e}).transform({input:t=>t==null?{None:!0}:{Some:t},output:t=>"Some"in t?t.Some:null})},vector(e,t){return new Rt({name:`vector<${e.name}>`,read:n=>{const s=n.readULEB(),r=new Array(s);for(let o=0;o<s;o++)r[o]=e.read(n);return r},write:(n,s)=>{s.writeULEB(n.length);for(const r of n)e.write(r,s)},...t,validate:n=>{var s;if((s=t==null?void 0:t.validate)==null||s.call(t,n),!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`)}})},tuple(e,t){return new Rt({name:`(${e.map(n=>n.name).join(", ")})`,serializedSize:n=>{let s=0;for(let r=0;r<e.length;r++){const o=e[r].serializedSize(n[r]);if(o==null)return null;s+=o}return s},read:n=>{const s=[];for(const r of e)s.push(r.read(n));return s},write:(n,s)=>{for(let r=0;r<e.length;r++)e[r].write(n[r],s)},...t,validate:n=>{var s;if((s=t==null?void 0:t.validate)==null||s.call(t,n),!Array.isArray(n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==e.length)throw new TypeError(`Expected array of length ${e.length}, found ${n.length}`)}})},struct(e,t,n){const s=Object.entries(t);return new Rt({name:e,serializedSize:r=>{let o=0;for(const[i,a]of s){const c=a.serializedSize(r[i]);if(c==null)return null;o+=c}return o},read:r=>{const o={};for(const[i,a]of s)o[i]=a.read(r);return o},write:(r,o)=>{for(const[i,a]of s)a.write(r[i],o)},...n,validate:r=>{var o;if((o=n==null?void 0:n.validate)==null||o.call(n,r),typeof r!="object"||r==null)throw new TypeError(`Expected object, found ${typeof r}`)}})},enum(e,t,n){const s=Object.entries(t);return new Rt({name:e,read:r=>{const o=r.readULEB(),[i,a]=s[o];return{[i]:(a==null?void 0:a.read(r))??!0}},write:(r,o)=>{const[i,a]=Object.entries(r)[0];for(let c=0;c<s.length;c++){const[d,l]=s[c];if(d===i){o.writeULEB(c),l==null||l.write(a,o);return}}},...n,validate:r=>{var a;if((a=n==null?void 0:n.validate)==null||a.call(n,r),typeof r!="object"||r==null)throw new TypeError(`Expected object, found ${typeof r}`);const o=Object.keys(r);if(o.length!==1)throw new TypeError(`Expected object with one key, found ${o.length}`);const[i]=o;if(!Object.hasOwn(t,i))throw new TypeError(`Invalid enum variant ${i}`)}})},map(e,t){return O.vector(O.tuple([e,t])).transform({name:`Map<${e.name}, ${t.name}>`,input:n=>[...n.entries()],output:n=>{const s=new Map;for(const[r,o]of n)s.set(r,o);return s}})},generic(e,t){return(...n)=>t(...n).transform({name:`${t.name}<${n.map(s=>s.name).join(", ")}>`,input:s=>s,output:s=>s})},lazy(e){return rm(e)}},om=32,qs=class{constructor(e){if(this.types=new Map,this.counter=0,e instanceof qs){this.schema=e.schema,this.types=new Map(e.types);return}if(this.schema=e,this.registerAddressType(qs.ADDRESS,e.addressLength,e.addressEncoding),this.registerVectorType(e.vectorType),e.types&&e.types.structs)for(let t of Object.keys(e.types.structs))this.registerStructType(t,e.types.structs[t]);if(e.types&&e.types.enums)for(let t of Object.keys(e.types.enums))this.registerEnumType(t,e.types.enums[t]);if(e.types&&e.types.aliases)for(let t of Object.keys(e.types.aliases))this.registerAlias(t,e.types.aliases[t]);e.withPrimitives!==!1&&im(this)}tempKey(){return`bcs-struct-${++this.counter}`}ser(e,t,n){if(typeof e=="string"||Array.isArray(e)){const{name:s,params:r}=this.parseTypeName(e);return this.getTypeInterface(s).encode(this,t,n,r)}if(typeof e=="object"){const s=this.tempKey();return new qs(this).registerStructType(s,e).ser(s,t,n)}throw new Error(`Incorrect type passed into the '.ser()' function. 
${JSON.stringify(e)}`)}de(e,t,n){if(typeof t=="string")if(n)t=em(t,n);else throw new Error("To pass a string to `bcs.de`, specify encoding");if(typeof e=="string"||Array.isArray(e)){const{name:s,params:r}=this.parseTypeName(e);return this.getTypeInterface(s).decode(this,t,r)}if(typeof e=="object"){const s=new qs(this),r=this.tempKey();return s.registerStructType(r,e).de(r,t,n)}throw new Error(`Incorrect type passed into the '.de()' function. 
${JSON.stringify(e)}`)}hasType(e){return this.types.has(e)}registerAlias(e,t){return this.types.set(e,t),this}registerType(e,t,n,s=()=>!0){const{name:r,params:o}=this.parseTypeName(e);return this.types.set(r,{encode(i,a,c,d){const l=o.reduce((u,h,p)=>Object.assign(u,{[h]:d[p]}),{});return this._encodeRaw.call(i,new Qu(c),a,d,l)},decode(i,a,c){const d=o.reduce((l,u,h)=>Object.assign(l,{[u]:c[h]}),{});return this._decodeRaw.call(i,new Xu(a),c,d)},_encodeRaw(i,a,c,d){if(s(a))return t.call(this,i,a,c,d);throw new Error(`Validation failed for type ${r}, data: ${a}`)},_decodeRaw(i,a,c){return n.call(this,i,a,c)}}),this}registerBcsType(e,t){return this.registerType(e,(n,s,r)=>{const o=r.map(i=>new Rt({name:String(i),write:(a,c)=>{const{name:d,params:l}=this.parseTypeName(i),u=this.getTypeInterface(d),h=l.reduce((p,g,b)=>Object.assign(p,{[g]:r[b]}),{});return u._encodeRaw.call(this,c,a,l,h)},read:()=>{throw new Error("Not implemented")}}));return t(...o).write(s,n),n},(n,s)=>{const r=s.map(o=>new Rt({name:String(o),write:(i,a)=>{throw new Error("Not implemented")},read:i=>{const{name:a,params:c}=this.parseTypeName(o),d=this.getTypeInterface(a),l=c.reduce((u,h,p)=>Object.assign(u,{[h]:s[p]}),{});return d._decodeRaw.call(this,i,c,l)}}));return t(...r).read(n)}),this}registerAddressType(e,t,n="hex"){switch(n){case"base64":return this.registerType(e,function(r,o){return Ln(o).reduce((i,a)=>i.write8(a),r)},function(r){return un(r.readBytes(t))});case"hex":return this.registerType(e,function(r,o){return bo(o).reduce((i,a)=>i.write8(a),r)},function(r){return vs(r.readBytes(t))});default:throw new Error("Unsupported encoding! Use either hex or base64")}}registerVectorType(e){let{name:t,params:n}=this.parseTypeName(e);if(n.length>1)throw new Error("Vector can have only one type parameter; got "+t);return this.registerType(e,function(r,o,i,a){return r.writeVec(o,(c,d)=>{let l=i[0];if(!l)throw new Error(`Incorrect number of type parameters passed a to vector '${e}'`);let{name:u,params:h}=this.parseTypeName(l);if(this.hasType(u))return this.getTypeInterface(u)._encodeRaw.call(this,c,d,h,a);if(!(u in a))throw new Error(`Unable to find a matching type definition for ${u} in vector; make sure you passed a generic`);let{name:p,params:g}=this.parseTypeName(a[u]);return this.getTypeInterface(p)._encodeRaw.call(this,c,d,g,a)})},function(r,o,i){return r.readVec(a=>{let c=o[0];if(!c)throw new Error(`Incorrect number of type parameters passed to a vector '${e}'`);let{name:d,params:l}=this.parseTypeName(c);if(this.hasType(d))return this.getTypeInterface(d)._decodeRaw.call(this,a,l,i);if(!(d in i))throw new Error(`Unable to find a matching type definition for ${d} in vector; make sure you passed a generic`);let{name:u,params:h}=this.parseTypeName(i[d]);return this.getTypeInterface(u)._decodeRaw.call(this,a,h,i)})})}registerStructType(e,t){for(let i in t){let a=this.tempKey(),c=t[i];!Array.isArray(c)&&typeof c!="string"&&(t[i]=a,this.registerStructType(a,c))}let n=Object.freeze(t),s=Object.keys(n),{name:r,params:o}=this.parseTypeName(e);return this.registerType(e,function(a,c,d,l){if(!c||c.constructor!==Object)throw new Error(`Expected ${r} to be an Object, got: ${c}`);if(d.length!==o.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${o.length}, got: ${d.length}`);for(let u of s){if(!(u in c))throw new Error(`Struct ${r} requires field ${u}:${n[u]}`);const{name:h,params:p}=this.parseTypeName(n[u]);if(!o.includes(h))this.getTypeInterface(h)._encodeRaw.call(this,a,c[u],p,l);else{const g=o.indexOf(h);let{name:b,params:y}=this.parseTypeName(d[g]);if(this.hasType(b)){this.getTypeInterface(b)._encodeRaw.call(this,a,c[u],y,l);continue}if(!(b in l))throw new Error(`Unable to find a matching type definition for ${b} in ${r}; make sure you passed a generic`);let{name:E,params:v}=this.parseTypeName(l[b]);this.getTypeInterface(E)._encodeRaw.call(this,a,c[u],v,l)}}return a},function(a,c,d){if(c.length!==o.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${o.length}, got: ${c.length}`);let l={};for(let u of s){const{name:h,params:p}=this.parseTypeName(n[u]);if(!o.includes(h))l[u]=this.getTypeInterface(h)._decodeRaw.call(this,a,p,d);else{const g=o.indexOf(h);let{name:b,params:y}=this.parseTypeName(c[g]);if(this.hasType(b)){l[u]=this.getTypeInterface(b)._decodeRaw.call(this,a,y,d);continue}if(!(b in d))throw new Error(`Unable to find a matching type definition for ${b} in ${r}; make sure you passed a generic`);let{name:E,params:v}=this.parseTypeName(d[b]);l[u]=this.getTypeInterface(E)._decodeRaw.call(this,a,v,d)}}return l})}registerEnumType(e,t){for(let i in t){let a=this.tempKey(),c=t[i];c!==null&&!Array.isArray(c)&&typeof c!="string"&&(t[i]=a,this.registerStructType(a,c))}let n=Object.freeze(t),s=Object.keys(n),{name:r,params:o}=this.parseTypeName(e);return this.registerType(e,function(a,c,d,l){if(!c)throw new Error(`Unable to write enum "${r}", missing data.
Received: "${c}"`);if(typeof c!="object")throw new Error(`Incorrect data passed into enum "${r}", expected object with properties: "${s.join(" | ")}".
Received: "${JSON.stringify(c)}"`);let u=Object.keys(c)[0];if(u===void 0)throw new Error(`Empty object passed as invariant of the enum "${r}"`);let h=s.indexOf(u);if(h===-1)throw new Error(`Unknown invariant of the enum "${r}", allowed values: "${s.join(" | ")}"; received "${u}"`);let p=s[h],g=n[p];if(a.write8(h),g===null)return a;let b=o.indexOf(g),y=b===-1?g:d[b];{let{name:E,params:v}=this.parseTypeName(y);return this.getTypeInterface(E)._encodeRaw.call(this,a,c[u],v,l)}},function(a,c,d){let l=a.readULEB(),u=s[l],h=n[u];if(l===-1)throw new Error(`Decoding type mismatch, expected enum "${r}" invariant index, received "${l}"`);if(h===null)return{[u]:!0};let p=o.indexOf(h),g=p===-1?h:c[p];{let{name:b,params:y}=this.parseTypeName(g);return{[u]:this.getTypeInterface(b)._decodeRaw.call(this,a,y,d)}}})}getTypeInterface(e){let t=this.types.get(e);if(typeof t=="string"){let n=[];for(;typeof t=="string";){if(n.includes(t))throw new Error(`Recursive definition found: ${n.join(" -> ")} -> ${t}`);n.push(t),t=this.types.get(t)}}if(t===void 0)throw new Error(`Type ${e} is not registered`);return t}parseTypeName(e){if(Array.isArray(e)){let[a,...c]=e;return{name:a,params:c}}if(typeof e!="string")throw new Error(`Illegal type passed as a name of the type: ${e}`);let[t,n]=this.schema.genericSeparators||["<",">"],s=e.indexOf(t),r=Array.from(e).reverse().indexOf(n);if(s===-1&&r===-1)return{name:e,params:[]};if(s===-1||r===-1)throw new Error(`Unclosed generic in name '${e}'`);let o=e.slice(0,s),i=Xi(e.slice(s+1,e.length-r-1),this.schema.genericSeparators);return{name:o,params:i}}};let Ee=qs;Ee.U8="u8";Ee.U16="u16";Ee.U32="u32";Ee.U64="u64";Ee.U128="u128";Ee.U256="u256";Ee.BOOL="bool";Ee.VECTOR="vector";Ee.ADDRESS="address";Ee.STRING="string";Ee.HEX="hex-string";Ee.BASE58="base58-string";Ee.BASE64="base64-string";function im(e){e.registerType(Ee.U8,function(t,n){return t.write8(n)},function(t){return t.read8()},t=>t<256),e.registerType(Ee.U16,function(t,n){return t.write16(n)},function(t){return t.read16()},t=>t<65536),e.registerType(Ee.U32,function(t,n){return t.write32(n)},function(t){return t.read32()},t=>t<=4294967296n),e.registerType(Ee.U64,function(t,n){return t.write64(n)},function(t){return t.read64()}),e.registerType(Ee.U128,function(t,n){return t.write128(n)},function(t){return t.read128()}),e.registerType(Ee.U256,function(t,n){return t.write256(n)},function(t){return t.read256()}),e.registerType(Ee.BOOL,function(t,n){return t.write8(n)},function(t){return t.read8().toString(10)==="1"}),e.registerType(Ee.STRING,function(t,n){return t.writeVec(Array.from(n),(s,r)=>s.write8(r.charCodeAt(0)))},function(t){return t.readVec(n=>n.read8()).map(n=>String.fromCharCode(Number(n))).join("")},t=>!0),e.registerType(Ee.HEX,function(t,n){return t.writeVec(Array.from(bo(n)),(s,r)=>s.write8(r))},function(t){let n=t.readVec(s=>s.read8());return vs(new Uint8Array(n))}),e.registerType(Ee.BASE58,function(t,n){return t.writeVec(Array.from(or(n)),(s,r)=>s.write8(r))},function(t){let n=t.readVec(s=>s.read8());return rr(new Uint8Array(n))}),e.registerType(Ee.BASE64,function(t,n){return t.writeVec(Array.from(Ln(n)),(s,r)=>s.write8(r))},function(t){let n=t.readVec(s=>s.read8());return un(new Uint8Array(n))})}function am(){return{genericSeparators:["<",">"],vectorType:"vector",addressLength:om,addressEncoding:"hex"}}const cm=32;function rc(e){try{return or(e).length===cm}catch{return!1}}const Zi=32;function Bn(e){return um(e)&&hm(e)===Zi}function lr(e){return Bn(e)}function dm(e){return e.includes("::")?th(e):e}function th(e){const[t,n]=e.split("::"),s=e.slice(t.length+n.length+4),r=s.includes("<")?s.slice(0,s.indexOf("<")):s,o=s.includes("<")?Xi(s.slice(s.indexOf("<")+1,s.lastIndexOf(">"))).map(i=>dm(i.trim())):[];return{address:Ue(t),module:n,name:r,typeParams:o}}function lm(e){const{address:t,module:n,name:s,typeParams:r}=typeof e=="string"?th(e):e,o=(r==null?void 0:r.length)>0?`<${r.map(i=>typeof i=="string"?i:lm(i)).join(",")}>`:"";return`${t}::${n}::${s}${o}`}function Ue(e,t=!1){let n=e.toLowerCase();return!t&&n.startsWith("0x")&&(n=n.slice(2)),`0x${n.padStart(Zi*2,"0")}`}function hn(e,t=!1){return Ue(e,t)}function um(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2===0}function hm(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}class fm extends TypeError{constructor(t,n){let s;const{message:r,explanation:o,...i}=t,{path:a}=t,c=a.length===0?r:`At path: ${a.join(".")} -- ${r}`;super(o??c),o!=null&&(this.cause=c),Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>s??(s=[t,...n()])}}function pm(e){return pn(e)&&typeof e[Symbol.iterator]=="function"}function pn(e){return typeof e=="object"&&e!=null}function Jt(e){return typeof e=="symbol"?e.toString():typeof e=="string"?JSON.stringify(e):`${e}`}function gm(e){const{done:t,value:n}=e.next();return t?void 0:n}function ym(e,t,n,s){if(e===!0)return;e===!1?e={}:typeof e=="string"&&(e={message:e});const{path:r,branch:o}=t,{type:i}=n,{refinement:a,message:c=`Expected a value of type \`${i}\`${a?` with refinement \`${a}\``:""}, but received: \`${Jt(s)}\``}=e;return{value:s,type:i,refinement:a,key:r[r.length-1],path:r,branch:o,...e,message:c}}function*oc(e,t,n,s){pm(e)||(e=[e]);for(const r of e){const o=ym(r,t,n,s);o&&(yield o)}}function*Yi(e,t,n={}){const{path:s=[],branch:r=[e],coerce:o=!1,mask:i=!1}=n,a={path:s,branch:r};if(o&&(e=t.coercer(e,a),i&&t.type!=="type"&&pn(t.schema)&&pn(e)&&!Array.isArray(e)))for(const d in e)t.schema[d]===void 0&&delete e[d];let c="valid";for(const d of t.validator(e,a))d.explanation=n.message,c="not_valid",yield[d,void 0];for(let[d,l,u]of t.entries(e,a)){const h=Yi(l,u,{path:d===void 0?s:[...s,d],branch:d===void 0?r:[...r,l],coerce:o,mask:i,message:n.message});for(const p of h)p[0]?(c=p[0].refinement!=null?"not_refined":"not_valid",yield[p[0],void 0]):o&&(l=p[1],d===void 0?e=l:e instanceof Map?e.set(d,l):e instanceof Set?e.add(l):pn(e)&&(l!==void 0||d in e)&&(e[d]=l))}if(c!=="not_valid")for(const d of t.refiner(e,a))d.explanation=n.message,c="not_refined",yield[d,void 0];c==="valid"&&(yield[void 0,e])}class $n{constructor(t){const{type:n,schema:s,validator:r,refiner:o,coercer:i=c=>c,entries:a=function*(){}}=t;this.type=n,this.schema=s,this.entries=a,this.coercer=i,r?this.validator=(c,d)=>{const l=r(c,d);return oc(l,d,this,c)}:this.validator=()=>[],o?this.refiner=(c,d)=>{const l=o(c,d);return oc(l,d,this,c)}:this.refiner=()=>[]}assert(t,n){return Zo(t,this,n)}create(t,n){return nh(t,this,n)}is(t){return gn(t,this)}mask(t,n){return sh(t,this,n)}validate(t,n={}){return ir(t,this,n)}}function Zo(e,t,n){const s=ir(e,t,{message:n});if(s[0])throw s[0]}function nh(e,t,n){const s=ir(e,t,{coerce:!0,message:n});if(s[0])throw s[0];return s[1]}function sh(e,t,n){const s=ir(e,t,{coerce:!0,mask:!0,message:n});if(s[0])throw s[0];return s[1]}function gn(e,t){return!ir(e,t)[0]}function ir(e,t,n={}){const s=Yi(e,t,n),r=gm(s);return r[0]?[new fm(r[0],function*(){for(const i of s)i[0]&&(yield i[0])}),void 0]:[void 0,r[1]]}function Vt(e,t){return new $n({type:e,schema:null,validator:t})}function ic(){return Vt("any",()=>!0)}function nt(e){return new $n({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[n,s]of t.entries())yield[n,s,e]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${Jt(t)}`}})}function mm(){return Vt("bigint",e=>typeof e=="bigint")}function wm(){return Vt("boolean",e=>typeof e=="boolean")}function Kt(){return Vt("integer",e=>typeof e=="number"&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${Jt(e)}`)}function Ke(e){const t=Jt(e),n=typeof e;return new $n({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?e:null,validator(s){return s===e||`Expected the literal \`${t}\`, but received: ${Jt(s)}`}})}function bm(){return Vt("never",()=>!1)}function Tm(e){return new $n({...e,validator:(t,n)=>t===null||e.validator(t,n),refiner:(t,n)=>t===null||e.refiner(t,n)})}function vm(){return Vt("number",e=>typeof e=="number"&&!isNaN(e)||`Expected a number, but received: ${Jt(e)}`)}function Pe(e){const t=e?Object.keys(e):[],n=bm();return new $n({type:"object",schema:e||null,*entries(s){if(e&&pn(s)){const r=new Set(Object.keys(s));for(const o of t)r.delete(o),yield[o,s[o],e[o]];for(const o of r)yield[o,s[o],n]}},validator(s){return pn(s)||`Expected an object, but received: ${Jt(s)}`},coercer(s){return pn(s)?{...s}:s}})}function Gt(e){return new $n({...e,validator:(t,n)=>t===void 0||e.validator(t,n),refiner:(t,n)=>t===void 0||e.refiner(t,n)})}function Am(e,t){return new $n({type:"record",schema:null,*entries(n){if(pn(n))for(const s in n){const r=n[s];yield[s,s,e],yield[s,r,t]}},validator(n){return pn(n)||`Expected an object, but received: ${Jt(n)}`}})}function Tt(){return Vt("string",e=>typeof e=="string"||`Expected a string, but received: ${Jt(e)}`)}function Ft(e){const t=e.map(n=>n.type).join(" | ");return new $n({type:"union",schema:null,coercer(n){for(const s of e){const[r,o]=s.validate(n,{coerce:!0});if(!r)return o}return n},validator(n,s){const r=[];for(const o of e){const[...i]=Yi(n,o,s),[a]=i;if(a[0])for(const[c]of i)c&&r.push(c);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${Jt(n)}`,...r]}})}function Sm(){return Vt("unknown",()=>!0)}const xm=/^(?:[a-z0-9][a-z0-9-]{0,62}(?:\.[a-z0-9][a-z0-9-]{0,62})*)?@[a-z0-9][a-z0-9-]{0,62}$/i,km=/^(?:[a-z0-9][a-z0-9-]{0,62}\.)+sui$/i;function _m(e,t="at"){const n=e.toLowerCase();let s;if(n.includes("@")){if(!xm.test(n))throw new Error(`Invalid SuiNS name ${e}`);const[r,o]=n.split("@");s=[...r?r.split("."):[],o]}else{if(!km.test(n))throw new Error(`Invalid SuiNS name ${e}`);s=n.split(".").slice(0,-1)}return t==="dot"?`${s.join(".")}.sui`:`${s.slice(0,-1).join(".")}@${s[s.length-1]}`}BigInt(1e9);const ea="0x1",rh="0x2",Gw=hn("0x6"),Em=`${rh}::sui::SUI`;hn("0x5");function mt(e,t){return nh(e,t)}function Yo(e){return typeof e=="object"&&"MutableReference"in e?e.MutableReference:void 0}function oh(e){return typeof e=="object"&&"Reference"in e?e.Reference:void 0}function ta(e){if(typeof e=="object"&&"Struct"in e)return e;const t=oh(e),n=Yo(e);if(typeof t=="object"&&"Struct"in t)return t;if(typeof n=="object"&&"Struct"in n)return n}const Pm="object",Bm="ID",Im="ascii",Om="String",Um="string",Rm="String",Lm="option",qm="Option",$m={address:rh,module:Pm,name:Bm},jm={address:ea,module:Im,name:Om},Fm={address:ea,module:Um,name:Rm},Dm={address:ea,module:Lm,name:qm},ur=(e,t)=>e.address===t.address&&e.module===t.module&&e.name===t.name;function Nm(e){var n;const t=(n=ta(e))==null?void 0:n.Struct;return(t==null?void 0:t.address)==="0x2"&&(t==null?void 0:t.module)==="tx_context"&&(t==null?void 0:t.name)==="TxContext"}function Bo(e,t){if(!(typeof t>"u")&&typeof t!==e)throw new Error(`Expect ${t} to be ${e}, received ${typeof t}`)}const zm=["Address","Bool","U8","U16","U32","U64","U128","U256"];function ei(e,t){if(typeof e=="string"&&zm.includes(e)){if(e in["U8","U16","U32","U64","U128","U256"])Bo("number",t);else if(e==="Bool")Bo("boolean",t);else if(e==="Address"&&(Bo("string",t),t&&!Bn(t)))throw new Error("Invalid Sui Address");return e.toLowerCase()}else if(typeof e=="string")throw new Error(`Unknown pure normalized type ${JSON.stringify(e,null,2)}`);if("Vector"in e){if((t===void 0||typeof t=="string")&&e.Vector==="U8")return"string";if(t!==void 0&&!Array.isArray(t))throw new Error(`Expect ${t} to be a array, received ${typeof t}`);const n=ei(e.Vector,t?t[0]:void 0);return n===void 0?void 0:`vector<${n}>`}if("Struct"in e){if(ur(e.Struct,jm))return"string";if(ur(e.Struct,Fm))return"utf8string";if(ur(e.Struct,$m))return"address";if(ur(e.Struct,Dm)){const n={Vector:e.Struct.typeArguments[0]};return ei(n,t)}}}const Mm=/^vector<(.+)>$/,Hm=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class ln{static parseFromStr(t,n=!1){if(t==="address")return{address:null};if(t==="bool")return{bool:null};if(t==="u8")return{u8:null};if(t==="u16")return{u16:null};if(t==="u32")return{u32:null};if(t==="u64")return{u64:null};if(t==="u128")return{u128:null};if(t==="u256")return{u256:null};if(t==="signer")return{signer:null};const s=t.match(Mm);if(s)return{vector:ln.parseFromStr(s[1],n)};const r=t.match(Hm);if(r)return{struct:{address:n?Ue(r[1]):r[1],module:r[2],name:r[3],typeParams:r[5]===void 0?[]:ln.parseStructTypeArgs(r[5],n)}};throw new Error(`Encountered unexpected token when parsing type args for ${t}`)}static parseStructTypeArgs(t,n=!1){return Xi(t).map(s=>ln.parseFromStr(s,n))}static tagToString(t){if("bool"in t)return"bool";if("u8"in t)return"u8";if("u16"in t)return"u16";if("u32"in t)return"u32";if("u64"in t)return"u64";if("u128"in t)return"u128";if("u256"in t)return"u256";if("address"in t)return"address";if("signer"in t)return"signer";if("vector"in t)return`vector<${ln.tagToString(t.vector)}>`;if("struct"in t){const n=t.struct,s=n.typeParams.map(ln.tagToString).join(", ");return`${n.address}::${n.module}::${n.name}${s?`<${s}>`:""}`}throw new Error("Invalid TypeTag")}}const Ae=new Ee({...am(),types:{enums:{"Option<T>":{None:null,Some:"T"}}}});function ih(e){return O.u64({name:"unsafe_u64",...e}).transform({input:t=>t,output:t=>Number(t)})}function Cm(e){return O.enum("Option",{None:null,Some:e})}function na(e){return e.transform({input:t=>({[t.kind]:t}),output:t=>{const n=Object.keys(t)[0];return{kind:n,...t[n]}}})}const $t=O.bytes(Zi).transform({input:e=>typeof e=="string"?bo(Ue(e)):e,output:e=>Ue(vs(e))}),sa=O.vector(O.u8()).transform({name:"ObjectDigest",input:e=>or(e),output:e=>rr(new Uint8Array(e))}),Gs=O.struct("SuiObjectRef",{objectId:$t,version:O.u64(),digest:sa}),ra=O.struct("SharedObjectRef",{objectId:$t,initialSharedVersion:O.u64(),mutable:O.bool()}),Jr=O.enum("ObjectArg",{ImmOrOwned:Gs,Shared:ra,Receiving:Gs}),oa=O.enum("CallArg",{Pure:O.vector(O.u8()),Object:Jr,ObjVec:O.vector(Jr)}),As=O.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:O.lazy(()=>As),struct:O.lazy(()=>ua),u16:null,u32:null,u256:null}),Et=na(O.enum("Argument",{GasCoin:null,Input:O.struct("Input",{index:O.u16()}),Result:O.struct("Result",{index:O.u16()}),NestedResult:O.struct("NestedResult",{index:O.u16(),resultIndex:O.u16()})})),ia=O.struct("ProgrammableMoveCall",{package:$t,module:O.string(),function:O.string(),type_arguments:O.vector(As),arguments:O.vector(Et)}).transform({input:e=>{const[t,n,s]=e.target.split("::"),r=e.typeArguments.map(o=>ln.parseFromStr(o,!0));return{package:Ue(t),module:n,function:s,type_arguments:r,arguments:e.arguments}},output:e=>({target:[e.package,e.module,e.function].join("::"),arguments:e.arguments,typeArguments:e.type_arguments.map(ln.tagToString)})}),aa=na(O.enum("Transaction",{MoveCall:ia,TransferObjects:O.struct("TransferObjects",{objects:O.vector(Et),address:Et}),SplitCoins:O.struct("SplitCoins",{coin:Et,amounts:O.vector(Et)}),MergeCoins:O.struct("MergeCoins",{destination:Et,sources:O.vector(Et)}),Publish:O.struct("Publish",{modules:O.vector(O.vector(O.u8())),dependencies:O.vector($t)}),MakeMoveVec:O.struct("MakeMoveVec",{type:Cm(As),objects:O.vector(Et)}),Upgrade:O.struct("Upgrade",{modules:O.vector(O.vector(O.u8())),dependencies:O.vector($t),packageId:$t,ticket:Et})})),ca=O.struct("ProgrammableTransaction",{inputs:O.vector(oa),transactions:O.vector(aa)}),da=O.enum("TransactionKind",{ProgrammableTransaction:ca,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),la=O.enum("TransactionExpiration",{None:null,Epoch:ih()}),ua=O.struct("StructTag",{address:$t,module:O.string(),name:O.string(),typeParams:O.vector(As)}),ha=O.struct("GasData",{payment:O.vector(Gs),owner:$t,price:O.u64(),budget:O.u64()}),fa=O.struct("TransactionDataV1",{kind:da,sender:$t,gasData:ha,expiration:la}),pa=O.enum("TransactionData",{V1:fa}),Wm=O.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),Gm=O.enum("IntentVersion",{V0:null}),Km=O.enum("AppId",{Sui:null}),Jm=O.struct("Intent",{scope:Wm,version:Gm,appId:Km}),Vm=O.generic(["T"],e=>O.struct("IntentMessage<T>",{intent:Jm,value:e})),ga=O.enum("CompressedSignature",{ED25519:O.fixedArray(64,O.u8()),Secp256k1:O.fixedArray(64,O.u8()),Secp256r1:O.fixedArray(64,O.u8()),ZkLogin:O.vector(O.u8())}),ya=O.enum("PublicKey",{ED25519:O.fixedArray(32,O.u8()),Secp256k1:O.fixedArray(33,O.u8()),Secp256r1:O.fixedArray(33,O.u8()),ZkLogin:O.vector(O.u8())}),ma=O.struct("MultiSigPkMap",{pubKey:ya,weight:O.u8()}),wa=O.struct("MultiSigPublicKey",{pk_map:O.vector(ma),threshold:O.u16()}),ah=O.struct("MultiSig",{sigs:O.vector(ga),bitmap:O.u16(),multisig_pk:wa}),Xm=O.vector(O.u8()).transform({input:e=>typeof e=="string"?Ln(e):e,output:e=>un(new Uint8Array(e))}),ch=O.struct("SenderSignedTransaction",{intentMessage:Vm(pa),txSignatures:O.vector(Xm)}),dh=O.vector(ch,{name:"SenderSignedData"}),Qe={...O,U8:O.u8(),U16:O.u16(),U32:O.u32(),U64:O.u64(),U128:O.u128(),U256:O.u256(),ULEB128:O.uleb128(),Bool:O.bool(),String:O.string(),Address:$t,Argument:Et,CallArg:oa,CompressedSignature:ga,GasData:ha,MultiSig:ah,MultiSigPkMap:ma,MultiSigPublicKey:wa,ObjectArg:Jr,ObjectDigest:sa,ProgrammableMoveCall:ia,ProgrammableTransaction:ca,PublicKey:ya,SenderSignedData:dh,SenderSignedTransaction:ch,SharedObjectRef:ra,StructTag:ua,SuiObjectRef:Gs,Transaction:aa,TransactionData:pa,TransactionDataV1:fa,TransactionExpiration:la,TransactionKind:da,TypeTag:As,ser:Ae.ser.bind(Ae),de:Ae.de.bind(Ae),getTypeInterface:Ae.getTypeInterface.bind(Ae),hasType:Ae.hasType.bind(Ae),parseTypeName:Ae.parseTypeName.bind(Ae),registerAddressType:Ae.registerAddressType.bind(Ae),registerAlias:Ae.registerAlias.bind(Ae),registerBcsType:Ae.registerBcsType.bind(Ae),registerEnumType:Ae.registerEnumType.bind(Ae),registerStructType:Ae.registerStructType.bind(Ae),registerType:Ae.registerType.bind(Ae),types:Ae.types};Ae.registerBcsType("utf8string",()=>O.string({name:"utf8string"}));Ae.registerBcsType("unsafe_u64",()=>ih());Ae.registerBcsType("enumKind",e=>na(e));[$t,Et,oa,ga,ha,ah,ma,wa,Jr,sa,ia,ca,ya,dh,ra,ua,Gs,aa,pa,fa,la,da,As].forEach(e=>{Ae.registerBcsType(e.name,()=>e)});const Vr=Pe({digest:Tt(),objectId:Tt(),version:Ft([vm(),Tt(),mm()])}),Qm=Ft([Pe({ImmOrOwned:Vr}),Pe({Shared:Pe({objectId:Tt(),initialSharedVersion:Ft([Kt(),Tt()]),mutable:wm()})}),Pe({Receiving:Vr})]),Xr=Pe({Pure:nt(Kt())}),ti=Pe({Object:Qm}),Qr=Ft([Xr,ti]);function Zm(e,t){return{Pure:Array.from(e instanceof Uint8Array?e:Qi(e)?e.toBytes():Qe.ser(t,e,{maxSize:1/0}).toBytes())}}const wt={Pure:Zm,ObjectRef({objectId:e,digest:t,version:n}){return{Object:{ImmOrOwned:{digest:t,version:n,objectId:Ue(e)}}}},SharedObjectRef({objectId:e,mutable:t,initialSharedVersion:n}){return{Object:{Shared:{mutable:t,initialSharedVersion:n,objectId:Ue(e)}}}},ReceivingRef({objectId:e,digest:t,version:n}){return{Object:{Receiving:{digest:t,version:n,objectId:Ue(e)}}}}};function ac(e){return typeof e=="string"?Ue(e):"ImmOrOwned"in e.Object?Ue(e.Object.ImmOrOwned.objectId):"Receiving"in e.Object?Ue(e.Object.Receiving.objectId):Ue(e.Object.Shared.objectId)}function Ym(e){return typeof e=="object"&&"Object"in e&&"Shared"in e.Object?e.Object.Shared:void 0}function ew(e){var t;return((t=Ym(e))==null?void 0:t.mutable)??!1}const tw=e=>Ft([Pe({None:Ft([Ke(!0),Ke(null)])}),Pe({Some:e})]),Ks=Ft([Pe({kind:Ke("Input"),index:Kt(),value:Gt(ic()),type:Gt(Ke("object"))}),Pe({kind:Ke("Input"),index:Kt(),value:Gt(ic()),type:Ke("pure")})]),nw=[Ks,Pe({kind:Ke("GasCoin")}),Pe({kind:Ke("Result"),index:Kt()}),Pe({kind:Ke("NestedResult"),index:Kt(),resultIndex:Kt()})],yn=Ft([...nw]),lh=Pe({kind:Ke("MoveCall"),target:Vt("target",Tt().validator),typeArguments:nt(Tt()),arguments:nt(yn)}),uh=Pe({kind:Ke("TransferObjects"),objects:nt(yn),address:yn}),hh=Pe({kind:Ke("SplitCoins"),coin:yn,amounts:nt(yn)}),fh=Pe({kind:Ke("MergeCoins"),destination:yn,sources:nt(yn)}),ph=Pe({kind:Ke("MakeMoveVec"),type:Gt(tw(Am(Tt(),Sm()))),objects:nt(yn)}),gh=Pe({kind:Ke("Publish"),modules:nt(nt(Kt())),dependencies:nt(Tt())}),yh=Pe({kind:Ke("Upgrade"),modules:nt(nt(Kt())),dependencies:nt(Tt()),packageId:Tt(),ticket:yn}),sw=[lh,uh,hh,fh,gh,yh,ph],rw=Ft([...sw]),Fn={MoveCall(e){return mt({kind:"MoveCall",target:e.target,arguments:e.arguments??[],typeArguments:e.typeArguments??[]},lh)},TransferObjects(e,t){return t.kind==="Input"&&t.type==="pure"&&typeof t.value!="object"&&(t.value=wt.Pure(Qe.Address.serialize(t.value))),mt({kind:"TransferObjects",objects:e,address:t},uh)},SplitCoins(e,t){return t.forEach(n=>{n.kind==="Input"&&n.type==="pure"&&typeof n.value!="object"&&(n.value=wt.Pure(Qe.U64.serialize(n.value)))}),mt({kind:"SplitCoins",coin:e,amounts:t},hh)},MergeCoins(e,t){return mt({kind:"MergeCoins",destination:e,sources:t},fh)},Publish({modules:e,dependencies:t}){return mt({kind:"Publish",modules:e.map(n=>typeof n=="string"?Array.from(Ln(n)):n),dependencies:t.map(n=>hn(n))},gh)},Upgrade({modules:e,dependencies:t,packageId:n,ticket:s}){return mt({kind:"Upgrade",modules:e.map(r=>typeof r=="string"?Array.from(Ln(r)):r),dependencies:t.map(r=>hn(r)),packageId:n,ticket:s},yh)},MakeMoveVec({type:e,objects:t}){return mt({kind:"MakeMoveVec",type:e?{Some:ln.parseFromStr(e)}:{None:null},objects:t},ph)}};function ow(e){function t(n,s){return e(n,s)}return t.u8=n=>e(Qe.U8.serialize(n)),t.u16=n=>e(Qe.U16.serialize(n)),t.u32=n=>e(Qe.U32.serialize(n)),t.u64=n=>e(Qe.U64.serialize(n)),t.u128=n=>e(Qe.U128.serialize(n)),t.u256=n=>e(Qe.U256.serialize(n)),t.bool=n=>e(Qe.Bool.serialize(n)),t.string=n=>e(Qe.String.serialize(n)),t.address=n=>e(Qe.Address.serialize(n)),t.id=t.address,t}function iw(e,t){const n=Array.from(`${e}::`).map(r=>r.charCodeAt(0)),s=new Uint8Array(n.length+t.length);return s.set(n),s.set(t,n.length),zh(s,{dkLen:32})}const aw=Gt(Tm(Ft([Pe({Epoch:Kt()}),Pe({None:Ft([Ke(!0),Ke(null)])})]))),cc=Vt("StringEncodedBigint",e=>{if(!["string","number","bigint"].includes(typeof e))return!1;try{return BigInt(e),!0}catch{return!1}}),cw=Pe({budget:Gt(cc),price:Gt(cc),payment:Gt(nt(Vr)),owner:Gt(Tt())}),hr=Pe({version:Ke(1),sender:Gt(Tt()),expiration:aw,gasConfig:cw,inputs:nt(Ks),transactions:nt(rw)});function dc(e){return Ue(e).replace("0x","")}class fn{constructor(t){this.version=1,this.sender=t==null?void 0:t.sender,this.expiration=t==null?void 0:t.expiration,this.gasConfig=(t==null?void 0:t.gasConfig)??{},this.inputs=(t==null?void 0:t.inputs)??[],this.transactions=(t==null?void 0:t.transactions)??[]}static fromKindBytes(t){const n=Qe.TransactionKind.parse(t),s="ProgrammableTransaction"in n?n.ProgrammableTransaction:null;if(!s)throw new Error("Unable to deserialize from bytes.");const r=mt({version:1,gasConfig:{},inputs:s.inputs.map((o,i)=>mt({kind:"Input",value:o,index:i,type:gn(o,Xr)?"pure":"object"},Ks)),transactions:s.transactions},hr);return fn.restore(r)}static fromBytes(t){var i;const n=Qe.TransactionData.parse(t),s=n==null?void 0:n.V1,r="ProgrammableTransaction"in s.kind?(i=s==null?void 0:s.kind)==null?void 0:i.ProgrammableTransaction:null;if(!s||!r)throw new Error("Unable to deserialize from bytes.");const o=mt({version:1,sender:s.sender,expiration:s.expiration,gasConfig:s.gasData,inputs:r.inputs.map((a,c)=>mt({kind:"Input",value:a,index:c,type:gn(a,Xr)?"pure":"object"},Ks)),transactions:r.transactions},hr);return fn.restore(o)}static restore(t){Zo(t,hr);const n=new fn;return Object.assign(n,t),n}static getDigestFromBytes(t){const n=iw("TransactionData",t);return rr(n)}build({maxSizeBytes:t=1/0,overrides:n,onlyTransactionKind:s}={}){const r=this.inputs.map(l=>(Zo(l.value,Qr),l.value)),o={ProgrammableTransaction:{inputs:r,transactions:this.transactions}};if(s)return Qe.TransactionKind.serialize(o,{maxSize:t}).toBytes();const i=(n==null?void 0:n.expiration)??this.expiration,a=(n==null?void 0:n.sender)??this.sender,c={...this.gasConfig,...n==null?void 0:n.gasConfig};if(!a)throw new Error("Missing transaction sender");if(!c.budget)throw new Error("Missing gas budget");if(!c.payment)throw new Error("Missing gas payment");if(!c.price)throw new Error("Missing gas price");const d={sender:dc(a),expiration:i||{None:!0},gasData:{payment:c.payment,owner:dc(this.gasConfig.owner??a),price:BigInt(c.price),budget:BigInt(c.budget)},kind:{ProgrammableTransaction:{inputs:r,transactions:this.transactions}}};return Qe.TransactionData.serialize({V1:d},{maxSize:t}).toBytes()}getDigest(){const t=this.build({onlyTransactionKind:!1});return fn.getDigestFromBytes(t)}snapshot(){return mt(this,hr)}}var ba=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Te=(e,t,n)=>(ba(e,t,"read from private field"),n?n.call(e):t.get(e)),on=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},fr=(e,t,n,s)=>(ba(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),Ze=(e,t,n)=>(ba(e,t,"access private method"),n),de,$s,Pr,js,Br,qn,Qn,Ta,mh,va,wh,Aa,bh,Sa,Th,Ir,ni;const dw={maxPureArgumentSize:16*1024,maxTxGas:5e10,maxGasObjects:256,maxTxSizeBytes:128*1024};function lw(e){const t={kind:"Result",index:e},n=[],s=r=>n[r]??(n[r]={kind:"NestedResult",index:e,resultIndex:r});return new Proxy(t,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(r,o){if(o in r)return Reflect.get(r,o);if(o===Symbol.iterator)return function*(){let a=0;for(;;)yield s(a),a++};if(typeof o=="symbol")return;const i=parseInt(o,10);if(!(Number.isNaN(i)||i<0))return s(i)}})}function uw(e){const t=ta(e);return t?t.Struct.address==="0x2"&&t.Struct.module==="transfer"&&t.Struct.name==="Receiving":!1}function Js(e){if(!e.client)throw new Error("No provider passed to Transaction#build, but transaction data was not sufficient to build offline.");return e.client}const vh=Symbol.for("@mysten/transaction"),Io={maxTxGas:"max_tx_gas",maxGasObjects:"max_gas_payment_objects",maxTxSizeBytes:"max_tx_size_bytes",maxPureArgumentSize:"max_pure_argument_size"},hw=1000n,fw=50,pw=(e,t)=>Array.from({length:Math.ceil(e.length/t)},(n,s)=>e.slice(s*t,s*t+t));function gw(e){return!!e&&typeof e=="object"&&e[vh]===!0}const si=class{constructor(e){on(this,$s),on(this,js),on(this,qn),on(this,Ta),on(this,va),on(this,Aa),on(this,Sa),on(this,Ir),on(this,de,void 0),fr(this,de,new fn(e?e.blockData:void 0))}static fromKind(e){const t=new si;return fr(t,de,fn.fromKindBytes(typeof e=="string"?Ln(e):e)),t}static from(e){const t=new si;return typeof e!="string"||!e.startsWith("{")?fr(t,de,fn.fromBytes(typeof e=="string"?Ln(e):e)):fr(t,de,fn.restore(JSON.parse(e))),t}setSender(e){Te(this,de).sender=e}setSenderIfNotSet(e){Te(this,de).sender||(Te(this,de).sender=e)}setExpiration(e){Te(this,de).expiration=e}setGasPrice(e){Te(this,de).gasConfig.price=String(e)}setGasBudget(e){Te(this,de).gasConfig.budget=String(e)}setGasOwner(e){Te(this,de).gasConfig.owner=e}setGasPayment(e){Te(this,de).gasConfig.payment=e.map(t=>sh(t,Vr))}get blockData(){return Te(this,de).snapshot()}get[vh](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:ow((e,t)=>Qi(e)?Ze(this,$s,Pr).call(this,"pure",{Pure:Array.from(e.toBytes())}):Ze(this,$s,Pr).call(this,"pure",e instanceof Uint8Array?wt.Pure(e):t?wt.Pure(e,t):e))}),this.pure}get gas(){return{kind:"GasCoin"}}object(e){if(typeof e=="object"&&"kind"in e)return e;const t=ac(e),n=Te(this,de).inputs.find(s=>s.type==="object"&&t===ac(s.value));return n&&gn(n.value,ti)&&"Shared"in n.value.Object&&gn(e,ti)&&"Shared"in e.Object&&(n.value.Object.Shared.mutable=n.value.Object.Shared.mutable||e.Object.Shared.mutable),n??Ze(this,$s,Pr).call(this,"object",typeof e=="string"?Ue(e):e)}objectRef(...e){return this.object(wt.ObjectRef(...e))}receivingRef(...e){return this.object(wt.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(wt.SharedObjectRef(...e))}add(e){const t=Te(this,de).transactions.push(e);return lw(t-1)}splitCoins(e,t){return this.add(Fn.SplitCoins(typeof e=="string"?this.object(e):e,t.map(n=>typeof n=="number"||typeof n=="bigint"||typeof n=="string"?this.pure.u64(n):Ze(this,js,Br).call(this,n))))}mergeCoins(e,t){return this.add(Fn.MergeCoins(typeof e=="string"?this.object(e):e,t.map(n=>typeof n=="string"?this.object(n):n)))}publish({modules:e,dependencies:t}){return this.add(Fn.Publish({modules:e,dependencies:t}))}upgrade({modules:e,dependencies:t,packageId:n,ticket:s}){return this.add(Fn.Upgrade({modules:e,dependencies:t,packageId:n,ticket:typeof s=="string"?this.object(s):s}))}moveCall({arguments:e,typeArguments:t,target:n}){return this.add(Fn.MoveCall({arguments:e==null?void 0:e.map(s=>Ze(this,js,Br).call(this,s)),typeArguments:t,target:n}))}transferObjects(e,t){return this.add(Fn.TransferObjects(e.map(n=>typeof n=="string"?this.object(n):n),typeof t=="string"?this.pure.address(t):Ze(this,js,Br).call(this,t)))}makeMoveVec({type:e,objects:t}){return this.add(Fn.MakeMoveVec({type:e,objects:t.map(n=>typeof n=="string"?this.object(n):n)}))}serialize(){return JSON.stringify(Te(this,de).snapshot())}async sign(e){const{signer:t,...n}=e,s=await this.build(n);return t.signTransactionBlock(s)}async build(e={}){return await Ze(this,Ir,ni).call(this,e),Te(this,de).build({maxSizeBytes:Ze(this,qn,Qn).call(this,"maxTxSizeBytes",e),onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await Ze(this,Ir,ni).call(this,e),Te(this,de).getDigest()}};let lc=si;de=new WeakMap;$s=new WeakSet;Pr=function(e,t){const n=Te(this,de).inputs.length,s=mt({kind:"Input",value:typeof t=="bigint"?String(t):t,index:n,type:e},Ks);return Te(this,de).inputs.push(s),s};js=new WeakSet;Br=function(e){return Qi(e)?this.pure(e):e};qn=new WeakSet;Qn=function(e,{protocolConfig:t,limits:n}){if(n&&typeof n[e]=="number")return n[e];if(!t)return dw[e];const s=t==null?void 0:t.attributes[Io[e]];if(!s)throw new Error(`Missing expected protocol config: "${Io[e]}"`);const r="u64"in s?s.u64:"u32"in s?s.u32:s.f64;if(!r)throw new Error(`Unexpected protocol config value found for: "${Io[e]}"`);return Number(r)};Ta=new WeakSet;mh=function(e){const t=Ze(this,qn,Qn).call(this,"maxPureArgumentSize",e);Te(this,de).inputs.forEach((n,s)=>{if(gn(n.value,Xr)&&n.value.Pure.length>t)throw new Error(`Input at index ${s} is too large, max pure input size is ${t} bytes, got ${n.value.Pure.length} bytes`)})};va=new WeakSet;wh=async function(e){if(Te(this,de).gasConfig.payment){const r=Ze(this,qn,Qn).call(this,"maxGasObjects",e);if(Te(this,de).gasConfig.payment.length>r)throw new Error(`Payment objects exceed maximum amount: ${r}`)}if(e.onlyTransactionKind||Te(this,de).gasConfig.payment)return;const t=Te(this,de).gasConfig.owner??Te(this,de).sender,s=(await Js(e).getCoins({owner:t,coinType:Em})).data.filter(r=>!Te(this,de).inputs.find(i=>gn(i.value,Qr)&&"Object"in i.value&&"ImmOrOwned"in i.value.Object?r.coinObjectId===i.value.Object.ImmOrOwned.objectId:!1)).slice(0,Ze(this,qn,Qn).call(this,"maxGasObjects",e)-1).map(r=>({objectId:r.coinObjectId,digest:r.digest,version:r.version}));if(!s.length)throw new Error("No valid gas coins found for the transaction.");this.setGasPayment(s)};Aa=new WeakSet;bh=async function(e){e.onlyTransactionKind||Te(this,de).gasConfig.price||this.setGasPrice(await Js(e).getReferenceGasPrice())};Sa=new WeakSet;Th=async function(e){const{inputs:t,transactions:n}=Te(this,de),s=[],r=[];if(t.forEach(o=>{if(o.type==="object"&&typeof o.value=="string"){r.push({id:Ue(o.value),input:o});return}}),n.forEach(o=>{if(o.kind==="MoveCall"&&o.arguments.some(a=>a.kind==="Input"&&!gn(t[a.index].value,Qr))&&s.push(o),o.kind==="SplitCoins"&&o.amounts.forEach(i=>{if(i.kind==="Input"){const a=t[i.index];typeof a.value!="object"&&(a.value=wt.Pure(Qe.U64.serialize(a.value)))}}),o.kind==="TransferObjects"&&o.address.kind==="Input"){const i=t[o.address.index];typeof i.value!="object"&&(i.value=wt.Pure(Qe.Address.serialize(i.value)))}}),s.length&&await Promise.all(s.map(async o=>{const[i,a,c]=o.target.split("::"),d=await Js(e).getNormalizedMoveFunction({package:hn(i),module:a,function:c}),u=d.parameters.length>0&&Nm(d.parameters.at(-1))?d.parameters.slice(0,d.parameters.length-1):d.parameters;if(u.length!==o.arguments.length)throw new Error("Incorrect number of arguments.");u.forEach((h,p)=>{const g=o.arguments[p];if(g.kind!=="Input")return;const b=t[g.index];if(gn(b.value,Qr))return;const y=b.value,E=ei(h,y);if(E){b.value=wt.Pure(y,E);return}if(ta(h)!=null||typeof h=="object"&&"TypeParameter"in h){if(typeof y!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(y,null,2)}`);r.push({id:y,input:b,normalizedType:h});return}throw new Error(`Unknown call arg type ${JSON.stringify(h,null,2)} for value ${JSON.stringify(y,null,2)}`)})})),r.length){const o=[...new Set(r.map(({id:l})=>l))],i=pw(o,fw),a=(await Promise.all(i.map(l=>Js(e).multiGetObjects({ids:l,options:{showOwner:!0}})))).flat();let c=new Map(o.map((l,u)=>[l,a[u]]));const d=Array.from(c).filter(([l,u])=>u.error).map(([l,u])=>l);if(d.length)throw new Error(`The following input objects are invalid: ${d.join(", ")}`);r.forEach(({id:l,input:u,normalizedType:h})=>{var y;const p=c.get(l),g=(y=p.data)==null?void 0:y.owner,b=g&&typeof g=="object"&&"Shared"in g?g.Shared.initial_shared_version:void 0;if(b){const E=h!=null&&Yo(h)==null&&oh(h)==null,v=ew(u.value)||E||h!=null&&Yo(h)!=null;u.value=wt.SharedObjectRef({objectId:l,initialSharedVersion:b,mutable:v})}else h&&uw(h)?u.value=wt.ReceivingRef(p.data):u.value=wt.ObjectRef(p.data)})}};Ir=new WeakSet;ni=async function(e){if(!e.onlyTransactionKind&&!Te(this,de).sender)throw new Error("Missing transaction sender");if(!e.protocolConfig&&!e.limits&&e.client&&(e.protocolConfig=await e.client.getProtocolConfig()),await Promise.all([Ze(this,Aa,bh).call(this,e),Ze(this,Sa,Th).call(this,e)]),!e.onlyTransactionKind&&(await Ze(this,va,wh).call(this,e),!Te(this,de).gasConfig.budget)){const t=await Js(e).dryRunTransactionBlock({transactionBlock:Te(this,de).build({maxSizeBytes:Ze(this,qn,Qn).call(this,"maxTxSizeBytes",e),overrides:{gasConfig:{budget:String(Ze(this,qn,Qn).call(this,"maxTxGas",e)),payment:[]}}})});if(t.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${t.effects.status.error}`,{cause:t});const n=hw*BigInt(this.blockData.gasConfig.price||1n),s=BigInt(t.effects.gasUsed.computationCost)+n,r=s+BigInt(t.effects.gasUsed.storageCost)-BigInt(t.effects.gasUsed.storageRebate);this.setGasBudget(r>s?r:s)}Ze(this,Ta,mh).call(this,e)};function uc(e){const t={launchpad:j[e||"Sui"].launchpad,ido:j[e||"Sui"].ido,xcetus:j[e||"Sui"].xcetus,xcetus_dividends:j[e||"Sui"].xcetus_dividends,cetus_faucet:j[e||"Sui"].cetus_faucet,xtoken:j[e||"Sui"].xtoken,xtoken_dividends:j[e||"Sui"].xtoken_dividends,token_faucet:j[e||"Sui"].token_faucet,booster:j[e||"Sui"].booster,maker_bonus:j[e||"Sui"].maker_bonus,liquidity_stratefy:j[e||"Sui"].liquidity_stratefy,vaults:j[e||"Sui"].vaults,frams:j[e||"Sui"].frams},n={fullRpcUrl:localStorage.getItem(`${e}-currentRpclocal4`)||j[e||"Sui"].fullRpcUrl,simulationAccount:j[e||"Sui"].simulationAccount,cetus_config:j[e||"Sui"].cetus_config,clmm_pool:j[e||"Sui"].clmm_pool,integrate:j[e||"Sui"].integrate,deepbook:j[e||"Sui"].deepbook,deepbook_endpoint_v2:j[e||"Sui"].deepbook_endpoint_v2,aggregatorUrl:j[e||"Sui"].aggregatorUrl},s=new Mh(n),r=new gc(t,s),o=ai(),i=In(()=>o);pc(()=>{i.value.address&&(s.senderAddress=i.value.address)});const a=m=>({transactionBlock:m,options:{showEffects:!0,showEvents:!0,showInput:!0,showRawInput:!0,showObjectChanges:!0,showBalanceChanges:!0}}),c=async()=>{try{return(await r.Farms.getFramsPoolList()).data}catch(m){console.log(" ~ file: useFarms.ts:70 ~ getFramsPoolList ~ error:",m)}},d=async(m,_)=>{const I=await r.Farms.getOwnedFramsPositionNFTList(r.ClmmSDK.senderAddress,m,_);return I&&!Rr(I)?I.data?I.data:Object.values(I)[0]:[]},l=async(m,_)=>{const I={pool_id:_,clmm_position_id:m.clmm_position_id},H=await r.Farms.depositPayload(I),D={action:"FarmingStake",txbParams:I};return{txb:a(H),payloadParams:D}},u=async(m,_)=>{const I={pool_id:m,position_nft_id:_},H=await r.Farms.withdrawPayload(I),D={action:"FarmingUnstake",txbParams:I};return{txb:a(H),payloadParams:D}},h=async m=>await r.Farms.calculateFarmingRewards(m,!0),p=async m=>{const _=await r.Farms.harvestPayload(m),I={action:"FarmingHarvest",txbParams:m};return{txb:a(_),payloadParams:I}},g=async m=>{const _=await r.Farms.batchHarvestPayload(m),I={action:"FarmingBatchHarvest",txbParams:m};return{txb:a(_),payloadParams:I}},b=(m,_,I)=>{const H=m.tick_lower_index,D=m.tick_upper_index,{liquidity:V}=m,{price:ee,effective_tick_lower:me,effective_tick_upper:we,total_wrapped_amount:Se}=_,He=yc.calculatePositionShare(H,D,V,ee,me,we,I);return new ne(He).div(new ne(Se)).mul(100).toString()},y=async m=>(await s.Position.fetchPosFeeAmount(m)).map((H,D)=>({positionId:m[D].positionId,pool:m[D].poolAddress,feeOwedA:new ne(H.feeOwedA.toString()).div(Math.pow(10,m[D].decimalA)).toString(),feeOwedB:new ne(H.feeOwedB.toString()).div(Math.pow(10,m[D].decimalB)).toString()})),E=async m=>{const _=await r.Farms.getFramsPositionNFT(m,!0);if(_===void 0)setTimeout(()=>{E(m)},5e3);else return _};return{getFramsPoolList:c,getOwnedFramsPositionNFTList:d,farmsDeposit:l,farmsWithdraw:u,calculateFarmingRewards:h,harvestFarms:p,batchHarvest:g,calculatePositionShare:b,fetchPosFeeAmount:y,getFramsPositionNFT:E,batchHarvestAndClmmFee:async(m,_)=>{const I={action:"batchHarvestAndClmmFee",txbParams:{framsListParams:m,clmmListParams:_}},H=await r.Farms.batchHarvestAndClmmFeePayload(m,_);return{txb:a(H),payloadParams:I}}}}const yw=Zr("pool",{state:()=>({tokens:[],tokensObj:{},pools:[],poolsObj:{},myPositions:[],addressLpTokens:{},addressTokens:{},currentPositionLoading:!1,myPositionsLoading:!0,poolsLoading:!0,RATES:{},currentPositionInfo:{},poolConfigList:[],feeOwedObj:{},rewarderObj:{},chinaTokens:[],chinaTokensObj:{},getPoolInfoSuccess:!1,recommendRangesObj:{},allTokenObj:{},isTokenLoading:!0,poolPriceConfigObj:{},defaultPoolInfo:{},poolConfigObj:{},openPool:[],routerPoolConfigObj:{},tokensWarningObj:{},currentChain:"",liquidityCurrentPoolInfo:{},positionDetailCurrentTab:"increase",positionActionAmount:{fromCoinAmount:"",toCoinAmount:""},currentPoolTab:"All",currentPoolMoreInfo:{},poolPositions:[],autoPoolNum:"--",tokenExternalPriceObj:{},positionShowList:[],getPendingFeeSuccess:!1,getRewardSuccess:!1,coinMetaData:JSON.parse(localStorage.getItem("SuiTokenObj")||"{}"),notTrustedObj:{},poolListPageSize:20,poolListLoading:!1,isContractTokenLoaing:!0}),actions:{async setPageSize(e){this.poolListLoading=!0,await zn(1e3),this.poolListPageSize=e,this.poolListLoading=!1},async setLiquidityCurrentPoolInfo(e){this.liquidityCurrentPoolInfo=e},async setPoolPositions(e){this.poolPositions=e},async setCurrentPoolMoreInfo(e){this.currentPoolMoreInfo=e},async setChainPoolConfigList(e){this.poolConfigList=e,this.pools=e},async setCurrentPoolTab(e){this.currentPoolTab=e},async setPoolConfigList(e,t,n=!0){const r=await lt(e).getLpList(t,n);console.log(" ~ file: pool.ts:77 ~ setPoolConfigList ~ res:",r);const o=[],i=[],a=[];r.forEach(d=>{var u,h,p;const l={...d,token_a:{...d==null?void 0:d.coinA,logoURI:(u=d==null?void 0:d.coinA)==null?void 0:u.logo_url},token_b:{...d==null?void 0:d.coinB,logoURI:(h=d==null?void 0:d.coinB)==null?void 0:h.logo_url},isFarming:d.is_display_rewarder&&(d.rewarder_display1||d.rewarder_display2||d.rewarder_display3),chain:e==="Aptos"?"aptos":"sui",fee_rate:d.fee*1e4,routerSymbol:[d.coin_a_address,d.coin_b_address].sort(function(g,b){return b.localeCompare(g)}).join("-")};d.is_closed||o.push(l),e=="Sui"&&(!((p=d.object)!=null&&p.is_pause)||!d.is_pause)&&i.push(l),a.push(l)}),console.log("0509###setPoolConfigList###",i),this.poolConfigList=e=="Aptos"?o:i,console.log(" ~ file: pool.ts:108 ~ setPoolConfigList ~ list:",o),this.poolConfigObj=e=="Aptos"?Object.fromEntries(o.map((d,l)=>[d.address,d])):Object.fromEntries(i.map((d,l)=>[d.address,d]));const c=a.filter(d=>!d.is_pause);this.openPool=c,this.routerPoolConfigObj=Object.fromEntries(c.map((d,l)=>[d.address,d]))},async getRecommendRanges(e){var t;try{let n=null;if(e&&e.includes("Sui")?n=await $fetch(`${j[e].api}/v2/sui/liquidity/recommend_ranges`):n=await $fetch(`${j.Aptos.api}/v2/liquidity/recommend_ranges`),(t=n==null?void 0:n.data)!=null&&t.list){const s=Object.fromEntries(n.data.list.map((r,o)=>[r.address,r]));this.recommendRangesObj=s,this.poolPriceConfigObj=s}else this.recommendRangesObj={},this.poolPriceConfigObj={}}catch(n){console.info(" ~ file: pool.ts:134 ~ getRecommendRanges ~ error:",n),this.recommendRangesObj={},this.poolPriceConfigObj={}}},async setPools(e,t){this.poolsLoading=!0,this.getPoolInfoSuccess=!1,this.currentChain=t;const n=lt(t);if((t==null?void 0:t.toLowerCase())==="aptos"){if(e&&e.length>0){for(let s=0;s<e.length&&t===this.currentChain;s++){const r=e[s],o=await n.getPools([r.address]);this.defaultPoolInfo[o[0].poolAddress]=o[0],this.poolsObj[o[0].poolAddress]={...r,...o[0],fee:Number(o[0].fee_rate)/1e6},this.addressLpTokens=this.poolsObj,this.poolsLoading=!1,await zn(500)}this.getPoolInfoSuccess=!0}}else if(e&&e.length>0){e.map(r=>r.address);const s={};for(let r=0;r<e.length;r++){const o=e[r];s[o.address]={...o}}console.log("0605###setPools###result###",s),this.poolsObj=s,this.addressLpTokens=s,this.poolsLoading=!1,this.getPoolInfoSuccess=!0}},async setSinglePool(e,t,n){const r=await lt(n).getPool(e.address);console.log(t,"recommendRangesInfo");const o={...e,...r,fee:r.fee_rate/1e6,type:(t==null?void 0:t.type)||""};console.log("0506###setSinglePool###result###",o),this.poolsObj[e.address]=o,console.log(this.poolsObj,"===>173"),this.addressLpTokens[e.address]=o},async updateCurrentPools(e,t){const n=lt(t),s=this.poolsObj[e];if(console.log(s,"===>currentPool"),s){let r={};t&&t.includes("Sui")?r=await n.getPool((s==null?void 0:s.poolAddress)||(s==null?void 0:s.address)):r=await n.getPoolState(s.poolAddress,s.poolType,!1),console.log("0411###debug###newInfo####",r);const o={...this.poolsObj},i={...o[e],...r};console.log("0411###debug###newCurrentInfo####",i),o[e]={...i},console.log("0411###debug###newPoolsObj####",o),this.poolsObj=o}},async setTokens(e){this.isContractTokenLoaing=!0;const t=[];console.log("0613###setTokens####111111###",e);const n=lt(e);console.log("0613###setTokens####22222###contract###",n);const s=await n.getTokenList();console.log("0613###setTokens####22222###res###",s),s.forEach(r=>{t.push({...r,logoURI:r.logo_url,chain:e.toLowerCase()})}),this.tokens=t,this.isContractTokenLoaing=!1},setCurrentPositionLoading(e){this.currentPositionLoading=e},setMyPositionsLoading(e){this.myPositionsLoading=e},async setRates(e){var r;let t={};if(e&&e.includes("Sui"))try{t=await $fetch(`${j.Sui.api}/v2/sui/market_price`)}catch(o){console.log("sui pric api error ###",o),t={}}else t=await $fetch(`${j.Aptos.api}/v2/price`);const n=((r=t==null?void 0:t.data)==null?void 0:r.prices)||[],s=[];n.forEach(o=>{o.base_symbol=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?s.push({...o},{...o,base_symbol:"0x2::sui::SUI"}):s.push(o)}),this.RATES=Object.fromEntries(s.map(o=>[o.base_symbol,o]))},async getMyPositons(e,t,n){console.log("0507###getMyPositons###start###",t),this.setMyPositionsLoading(!0);const s=lt(n);let r=[],o=[];this.getRewardSuccess=!1,this.getPendingFeeSuccess=!1;let i={};if(n=="Sui"){const{clmmPosition:u,farmsPosition:h}=await s.getAllPosition(e,t);r=u,o=h;const p=r==null?void 0:r.map(y=>y==null?void 0:y.pool),g=o==null?void 0:o.map(y=>y==null?void 0:y.clmm_pool_id),b=[...new Set([...p,...g])];if(b&&b.length>0){const y=await(s==null?void 0:s.getPools(b));i=Object.fromEntries(y==null?void 0:y.map(E=>[E==null?void 0:E.poolAddress,E]))}}else r=await s.getPositionList(e,t)||[],console.log(" ~ file: pool.ts:343 ~ getMyPositons ~ positionList:",r);let a=[];n=="Sui"&&(a=o.map(u=>{const h=[];let p=new ne(0);return u.rewards.forEach(g=>{var _;const b=g.rewarder_type,y=this.tokensObj[b],E=((_=this.RATES[b])==null?void 0:_.price)||0,v=new ne(g.rewarder_amount).div(new ne(Math.pow(10,y.decimals))),m=v.mul(new ne(E));p=p.add(m),v.toNumber()>0&&h.push({...g,amount:v,rewarderAmountUsd:m.toString(),address:b,symbol:y.symbol})}),{...u,rewards:h,farmingRewardTotalUsd:p.toNumber(),positionSource:"farming"}}),console.log("farmingPositionList:",a)),console.log("0507###getMyPositons###positionList###",r),r.length<1&&(this.setMyPositionsLoading(!1),this.getRewardSuccess=!0,this.getPendingFeeSuccess=!0);const c=a.concat(r);console.log(c,"##allPositionList");const d=[];c.forEach(u=>{var H,D,V,ee,me,we,Se,He,De,Je,Xt,rt,ft,ot,it,at,Qt,Zt;const h={...t[u.pool||u.clmm_pool_id],...i[u.pool||u.clmm_pool_id]};let p,g,b,y,E="",v,m,_,I;if(console.log("allPositionList item:",u),u.liquidity&&u.liquidity!=="0"&&h){const zt={creator:u.creator,collection:u.collection,name:u.name};n==="Aptos"?I=s.getNftHash(zt):I=s.getNftHash(u);const At=(H=h.token_a)==null?void 0:H.decimals,St=(D=h.token_b)==null?void 0:D.decimals;console.log(h,"poolInf=====>"),h!=null&&h.current_sqrt_price&&(b=s.TickMath.sqrtPriceX64ToPrice(h==null?void 0:h.current_sqrt_price,At,St).toString(),y=new ne(1).div(s.TickMath.sqrtPriceX64ToPrice(h==null?void 0:h.current_sqrt_price,At,St)).toString()),u.tick_lower_index==s.TickUtil.getMinIndex(Number(h.tickSpacing))?p="0":p=s.TickMath.tickIndexToPrice(Number(u.tick_lower_index),At,St).toString(),u.tick_upper_index==s.TickUtil.getMaxIndex(Number(h.tickSpacing))?g="":(g=s.TickMath.tickIndexToPrice(Number(u.tick_upper_index),At,St).toString(),console.log("0523###maxPrice###2222###",g));let Yt,ct;g!==""?ct=new ne(1).div(new ne(g)).toString():ct="",p!==0?Yt=new ne(1).div(new ne(p)).toString():Yt="0";const en=h.needReverse?((we=this.tokensObj[(me=h==null?void 0:h.coinB)==null?void 0:me.address])==null?void 0:we.labels)||[]:((ee=this.tokensObj[(V=h==null?void 0:h.coinA)==null?void 0:V.address])==null?void 0:ee.labels)||[],tn=h.needReverse?((He=this.tokensObj[(Se=h==null?void 0:h.coinA)==null?void 0:Se.address])==null?void 0:He.labels)||[]:((Je=this.tokensObj[(De=h==null?void 0:h.coinB)==null?void 0:De.address])==null?void 0:Je.labels)||[],ar=[...new Set(en.concat(tn))],Ss=s.getCoinAmountFromLiquidity({pool:h,position:u,roundUp:n!="Sui"}),Yn=Ss.coinaAmount,P=Ss.coinbAmount;console.log(b,"===>currentPrice");const R=Number(P)+Number(Yn)*Number(b);let F=(Number(Yn)*Number(b)/R*100).toFixed(0),z=(P/R*100).toFixed(0);p=="0"&&g==""&&(F="50",z="50"),h.isPause?E="Closed":Number(b)>=Number(p)&&(g===""||Number(b)<=Number(g))?E="Active":(Number(b)>Number(g)||Number(b)<Number(p))&&(E="Inactive"),console.log("0323###this.tokensObj####",this.tokensObj),console.log("0323###this.tokensObj[poolInfo.token_a.address]####",this.tokensObj[(Xt=h==null?void 0:h.token_a)==null?void 0:Xt.address]),console.log("0323###poolInfo.token_a.address####",(rt=h==null?void 0:h.token_a)==null?void 0:rt.address),console.log("0323###poolInfo.token_b.address####",(ft=h==null?void 0:h.token_b)==null?void 0:ft.address);let W={},Y={};n==="Aptos"?(W={...h.token_a,...this.tokensObj[(ot=h==null?void 0:h.token_a)==null?void 0:ot.address],logoURI:(at=this.tokensObj[(it=h==null?void 0:h.token_a)==null?void 0:it.address])==null?void 0:at.logo_url},Y={...h.token_b,...this.tokensObj[(Qt=h==null?void 0:h.token_b)==null?void 0:Qt.address],logoURI:this.tokensObj[(Zt=h==null?void 0:h.token_b)==null?void 0:Zt.address].logo_url}):(W=h==null?void 0:h.token_a,Y=h==null?void 0:h.token_b),d.push({poolInfoOrigin:i[u.pool||u.clmm_pool_id],...h,...u,labels:ar,totalAmount:R,token_a:W,token_b:Y,tokenARates:v,tokenBRates:m,amountA:Yn,amountB:P,fromPercent:F,toPercent:z,amountUSD:_,tokenName:u.tokenName||u.name,currentStatus:E,positionLiquidity:u.liquidity,nftHash:I,currentPrice:b,currentPriceReverse:y,minPrice:Dn(p,12),maxPrice:Dn(g,12),positionSource:u.id?"farming":"clmm",farmingRewardTotalUsd:u.id?u.farmingRewardTotalUsd:0,minPriceResever:Yt,maxPriceResever:ct})}});const l=d.sort((u,h)=>h.amountUSD-u.amountUSD);this.myPositions=l,this.setMyPositionsLoading(!1),this.getPendingFees(l,n),this.getRewarderV2(l,n),console.log(l,"===>this.myPositions")},setMyPositions(){this.myPositions=[],this.feeOwedObj={},this.rewarderObj={}},async setCurrentPositionInfo(e,t,n,s,r="",o=""){var p,g,b,y,E,v;const i=lt(s);let a;s=="Sui"&&(a=uc(s));let c=null,d=null,l=null,u=null,h=null;if(e&&r||s==="Aptos"?(c=this.addressLpTokens&&this.addressLpTokens[e],d=await i.getPool(e),h=this.poolConfigObj[e],console.log(h,"===>poolConfig"),l={...c,...d,...h},console.log(l,"423"),u=await i.getPositionInfo(l,t,n,r)):s!=="Aptos"&&(console.log("0414###setCurrentPositionInfo###",r),u=o=="farming"?await a.getFramsPositionNFT(r):await i.getPositionById(r),console.log(" ~ file: pool.ts:562 ~ setCurrentPositionInfo ~ positionInfo:",u),console.log(u,"setCurrentPositionInfo:positionInfo"),d=o=="farming"?await i.getPool(u.clmm_pool_id):await i.getPool(u.pool),c=this.addressLpTokens&&this.addressLpTokens[u.pool||this.addressLpTokens.poolAddress],h=this.poolConfigObj[u.clmm_pool_id||u.pool],console.log(this.poolConfigObj[u.clmm_pool_id],"##this.poolConfigObj[poolAddress]"),l={...c,...d,...h},console.log("poolInfoNew:",c,d),console.log("0414###setCurrentPositionInfo###positionInfo###",u),console.log("0414###setCurrentPositionInfo###poolInfo###",l)),console.log("setCurrentPositionInfo:",l),u&&l){let m,_,I,H,D="",V,ee,me,we,Se,He=0,De=0,Je;const Xt={creator:u.pool,collection:u.collectionName,name:u.name};s==="Aptos"?Je=i.getNftHash(Xt):Je=i.getNftHash(u),console.log("0329###setCurrentPositionInfo###poolInfo###",l),console.log("0329###setCurrentPositionInfo###positionInfo###",u);let rt=0,ft=0;if(l!=null&&l.token_a&&(l!=null&&l.token_b))rt=(p=l==null?void 0:l.token_a)==null?void 0:p.decimals,ft=(g=l==null?void 0:l.token_b)==null?void 0:g.decimals;else{const ot=(await i.getTokenListByCoinType(l==null?void 0:l.coinTypeA))[0],it=(await i.getTokenListByCoinType(l==null?void 0:l.coinTypeB))[0];rt=ot==null?void 0:ot.decimals,ft=it==null?void 0:it.decimals,l.coinA=ot,l.coinB=it,l.token_a=ot,l.token_b=it}if(l){try{let ct;if(o!=="farming"){const en=await i.getTickDataByIndex(l.ticks_handle,Number(u.tick_lower_index)),tn=await i.getTickDataByIndex(l.ticks_handle,Number(u.tick_upper_index));ct=await i.getCollectFeesQuote({pool:l,position:u,tickLowerData:en,tickUpperData:tn},d)}else{console.log(l,l.token_a,"setCurrentPositionInfo:poolInfo");const en=[{poolAddress:l.poolAddress,positionId:u.clmm_position_id,coinTypeA:l.coinTypeA,coinTypeB:l.coinTypeB,decimalA:l.token_a.decimals,decimalB:l.token_b.decimals}];console.log(en,"params###");const tn=await a.fetchPosFeeAmount(en);console.log(tn,"##farmingPositionFee"),ct=tn[0]}console.log(ct,"setCurrentPositionInfo feeOwn:"),ct&&(He=Number(ct.feeOwedA),De=Number(ct.feeOwedB))}catch(ct){console.log("0314###getCollectFeesQuote###error####",ct)}console.log("0413####setCurrentPositionInfo###poolInfo###",l),I=i.TickMath.sqrtPriceX64ToPrice(l.current_sqrt_price,rt,ft).toString(),H=new ne(1).div(i.TickMath.sqrtPriceX64ToPrice(l==null?void 0:l.current_sqrt_price,rt,ft)).toString(),u.tick_lower_index==i.TickUtil.getMinIndex(Number(l.tickSpacing))?m="0":m=i.TickMath.tickIndexToPrice(Number(u.tick_lower_index),rt,ft).toString(),u.tick_upper_index==i.TickUtil.getMaxIndex(Number(l.tickSpacing))?_="":_=i.TickMath.tickIndexToPrice(Number(u.tick_upper_index),rt,ft).toString();let ot,it;_!==""?it=new ne(1).div(new ne(_)).toString():it="",m!==0?ot=new ne(1).div(new ne(m)).toString():ot="0",V=u.tick_lower_index,ee=u.tick_upper_index;const at=i.getCoinAmountFromLiquidity({pool:l,position:u,roundUp:s!="Sui"});let Qt,Zt,zt;console.log(I,"===>currentPrice522"),I&&I>0&&(we=at==null?void 0:at.coinaAmount,Se=at==null?void 0:at.coinbAmount,console.log(at,"===>amountInfo"),console.log(I,"===>currentPrice"),zt=Number(Se)+Number(we)*Number(I),console.log(zt,"===>totalAmount"),Qt=(Number(we)*Number(I)/zt*100).toFixed(0),console.log(Qt,"===>fromPercent"),Zt=(Number(Se/Number(zt))*100).toFixed(0),console.log(Zt,"==>toPercent"));let At;const St=at.coinaAmount*((b=this.RATES[l==null?void 0:l.token_a.address])==null?void 0:b.price),Yt=at.coinbAmount*((y=this.RATES[l==null?void 0:l.token_b.address])==null?void 0:y.price);(E=this.RATES[l==null?void 0:l.token_a.address])!=null&&E.price&&((v=this.RATES[l==null?void 0:l.token_b.address])!=null&&v.price)&&(At=St+Yt),console.log(At,"==>totalAmountUSD"),l.isPause?D="Closed":Number(I)>=Number(m)&&(_===""||Number(I)<=Number(_))?D="Active":(Number(I)>Number(_)||Number(I)<Number(m))&&(D="Inactive"),this.currentPositionInfo={...u,poolInfo:l,token_a:{...l.token_a,...this.tokensObj[l.token_a.address]},token_b:{...l.token_b,...this.tokensObj[l.token_b.address]},current_tick_index:l.current_tick_index,current_sqrt_price:l.current_sqrt_price,tickSpacing:l.tickSpacing,fee:l.fee,poolAddress:l.poolAddress,address:l.address,is_display_rewarder:l.is_display_rewarder,nftHash:Je,feeOwedA:He,feeOwedB:De,currentStatus:D,amountA:we,amountB:Se,tokenARates:St,tokenBRates:Yt,amountUSD:me,totalAmount:zt,totalAmountUSD:At,currentPrice:I,currentPriceReverse:H,minPrice:Dn(m,12),minTick:V,maxTick:ee,maxPrice:Dn(_,12),fromPercent:Qt||"--",toPercent:Zt||"--",tokenName:u.tokenName||u.name,positionSource:u.id?"farming":"clmm",minPriceResever:ot,maxPriceResever:it},this.currentPositionLoading=!1,console.log("positionInfo.value",this.currentPositionInfo)}}},async getPendingFees(e,t){var i,a;const n=this.RATES,s=lt(t);let r,o=[];if(t=="Sui"){r=uc("Sui");const c=e.filter(d=>d.positionSource==="farming").map(d=>({poolAddress:d.poolAddress,positionId:d.clmm_position_id,coinTypeA:d.coinTypeA,coinTypeB:d.coinTypeB,decimalA:d.token_a.decimals,decimalB:d.token_b.decimals}));c.length>0&&(console.log(" ~ file: pool.ts:860 ~ getPendingFees ~ farmsPosFeeParams:",c),o=await r.fetchPosFeeAmount(c),console.log(" ~ file: pool.ts:860 ~ getPendingFees ~ farmingPositionFeeList:",o))}console.log("0302###getPendingFees####result###",e);for(let c=0;c<e.length;c++){const d=e[c];let l=e[c].poolInfoOrigin;l||(l=await s.getPool(d.poolAddress));const u={...l,token_a:(d==null?void 0:d.token_a)||this.tokensObj&&this.tokensObj[l.coinTypeA]||this.chinaTokensObj&&this.chinaTokensObj[l.coinTypeA],token_b:(d==null?void 0:d.token_b)||this.tokensObj&&this.tokensObj[l.coinTypeB]||this.chinaTokensObj&&this.chinaTokensObj[l.coinTypeB]};let h;if(e[c].positionSource=="farming"){console.log("result[i]:",e[c]);let _;try{_=o.filter(I=>I.positionId===d.clmm_position_id),console.log(_,"##farmingPositionFee"),h=_[0]}catch(I){console.log(" ~ file: pool.ts:831 ~ getPendingFees ~ error:",I)}}else if(l){const _=await s.getTickDataByIndex(l.ticks_handle,Number(d.tick_lower_index)),I=await s.getTickDataByIndex(l.ticks_handle,Number(d.tick_upper_index));console.log("0323####getPendingFees###pool###",l),console.log("0323####getPendingFees###positionItem.collection###",d.collection),console.log("0323####getPendingFees###positionItem.tokenName###",d.tokenName),console.log("0323####getPendingFees###positionItem###",d);const H=t==="Aptos"?"":d.pos_object_id,D=await s.getPositionInfo(l,d.collection,d.tokenName,H);console.log("0302###positionInfo",D),console.log("0302###resultPool###",u),console.log(l,"pool====>654");try{h=await s.getCollectFeesQuote({pool:u,position:D,tickLowerData:_,tickUpperData:I},l)}catch(V){console.log(" ~ file: pool.ts:852 ~ getPendingFees ~ error:",V)}}console.log("0330###getPendingFees###feeOwn###",h);const p=[],g=Number(h==null?void 0:h.feeOwedA),b=Number(h==null?void 0:h.feeOwedB);let y,E,v;n&&n[u.token_a.address]&&n[u.token_b.address]?(E=g*((i=n[u.token_a.address])==null?void 0:i.price),v=b*((a=n[u.token_b.address])==null?void 0:a.price),y=E+v):y="--",p.push({amount:g,amountUSD:E,...u.token_a,logoURI:u.token_a.logo_url},{amount:b,amountUSD:v,...u.token_b,logoURI:u.token_b.logo_url});const m=this.poolConfigObj&&this.poolConfigObj[l==null?void 0:l.poolAddress];console.log(m,"poolConfigInfo===>710"),this.feeOwedObj[d.tokenName]={feesResult:m!=null&&m.needReverse?p.reverse():p,feeOwed:y},console.log(this.feeOwedObj,"===>this.feeOwedObj"),await zn(1e3)}this.getPendingFeeSuccess=!0},async getRewarder(e,t){const n=lt(t),s=this;console.log(e,"===>results");for(let r=0;r<e.length;r++)if(e[r].rewarder_infos&&e[r].rewarder_infos.length>0){const o=e[r];console.log(r,"i===>"),console.log(o,"===>positionItem"),console.log(o.ticks_handle,"===>positionItem.ticks_handle"),console.log(o.tick_lower_index,"===>positionItem.tick_lower_index"),console.log(o.tick_upper_index,"===>positionItem.tick_upper_index");const i=await n.getTickDataByIndex(o.ticks_handle,Number(o.tick_lower_index)),a=await n.getTickDataByIndex(o.ticks_handle,Number(o.tick_upper_index));let c=[];t==="Aptos"?c=await n.getPosRewardersAmount({poolAddress:o.poolAddress,positionName:o.tokenName,tickLowerData:i,tickUpperData:a}):c=await n.getPosRewardersAmount({poolAddress:o.poolAddress,pos:o.pos_object_id,positionHandle:o.position_manager.positions_handle}),console.log(c,"rewarderInfo===>");const d=[];let l=0;c.forEach((u,h)=>{var y;const p=s.tokensObj[u.coin_address].decimals,g=u.amount_owed.toString(),b=Ie(new ne(g).div(Math.pow(10,p)).toString(),p);if(o[`rewarder_display${h+1}`]||Number(b)>0){const E=s.tokensObj[u.coin_address];console.log(u.amount_owed.toString(),"===>element.amount_owed.toString()");const v=(y=s.RATES[u.coin_address])==null?void 0:y.price;console.log(v,"price===>"),console.log(b,"==>amount");const m=Number(b)*v;l+=m,d.push({...u,...E,amount:b,amountUSD:m,amount_owed:u.amount_owed.toString()}),s.rewarderObj[o.tokenName]={pendingRewarderArr:d,pendingRewarderView:Number(Ie(l,2)),pendingRewarder:l}}}),console.log(s.rewarderObj,"===>_this.rewarderObj"),await zn(1e3)}},async getRewarderV2(e,t){var i,a;const n=lt(t),s=this;console.log(e,"===>results");let r=[];t!=="Aptos"&&(r=e==null?void 0:e.map(c=>({poolAddress:c.poolAddress,positionId:c.positionSource=="clmm"?c.pos_object_id:c.clmm_position_id,coinTypeA:c.coinTypeA,coinTypeB:c.coinTypeB,rewarderInfo:c.rewarder_infos})));const o=await n.batchFetchPosRewardersAmount(r);console.log(" ~ file: pool.ts:1074 ~ getRewarderV2 ~ batchFetchPosRewardersAmountRes:",o);for(let c=0;c<e.length;c++){const d=e[c];if(e[c].rewarder_infos&&e[c].rewarder_infos.length>0){console.log(d,"===>positionItem");let l=[];if(t==="Aptos"){const p=await n.getTickDataByIndex(d.ticks_handle,Number(d.tick_lower_index)),g=await n.getTickDataByIndex(d.ticks_handle,Number(d.tick_upper_index));l=await n.getPosRewardersAmount({poolAddress:d.poolAddress,positionName:d.tokenName,tickLowerData:p,tickUpperData:g})}else{const p=d.positionSource=="clmm"?d.pos_object_id:d.clmm_position_id;l=((a=(i=o.filter(g=>g.positionId===p))==null?void 0:i[0])==null?void 0:a.rewarderAmountOwed)||{}}const u=[];let h=0;l.forEach((p,g)=>{var v;const b=s.tokensObj[p.coin_address].decimals,y=p.amount_owed.toString(),E=Ie(new ne(y).div(Math.pow(10,b)).toString(),b);if(d[`rewarder_display${g+1}`]||Number(E)>0){const m=s.tokensObj[p.coin_address],_=((v=s.RATES[p.coin_address])==null?void 0:v.price)||0;console.log(_,"price===>"),console.log(E,"==>amount");const I=Number(E)*_;h+=I,u.push({...p,...m,amount:E,amountUSD:I,amount_owed:p.amount_owed.toString()}),s.rewarderObj[d.tokenName]={pendingRewarderArr:u,pendingRewarderView:Number(Ie(h,2)),pendingRewarder:h}}}),await zn(1e3)}console.log(s.rewarderObj,"===>_this.rewarderObj")}this.getRewardSuccess=!0},setAllTokenObj(e){console.log(e,"===>allTokenObj"),this.allTokenObj=e},async getTokensObj(e,t){if(this.isTokenLoading=!0,console.log(" ~ file: pool.ts:1130 ~ getTokensObj ~ pools, chainName:",e,t),t=="Sui")this.getCoinMetaData(!0);else{const n=lt("Aptos"),s=await n.getTokenList(),r=[];s.forEach(c=>{r.push({...c,logoURI:c.logo_url,chain:t.toLowerCase()})});const o=Object.fromEntries(r.map((c,d)=>[c.address,c]));console.log(" ~ file: pool.ts:1145 ~ getTokensObj ~ aptosTokensObj:",o);const i={};e.forEach(c=>{!o[c.coinA.address]&&!i[c.coinA.address]&&(i[c.coinA.address]=c),!o[c.coinB.address]&&!i[c.coinB.address]&&(i[c.coinB.address]=c)});const a=Object.keys(i);if(console.log(" ~ file: pool.ts:1158 ~ getTokensObj ~ params:",a),a.length>0){const c=await n.getTokenListByCoinType(a),d={};c.forEach(l=>{d[l.address]={...l,isSelfBuilt:!0}}),this.tokensObj={...this.tokensObj,...d}}else this.tokensObj=o;this.isTokenLoading=!1}console.log(" ~ file: pool.ts:1167 ~ getTokensObj ~ this.tokensObj :",this.tokensObj)},setNewTokens(e){this.tokensObj={...this.tokensObj,...e},console.log("setNewTokens###this.tokensObj####",this.tokensObj)},setPositionDetailCurrentTab(e){e!=this.positionDetailCurrentTab&&(this.positionActionAmount={},this.positionDetailCurrentTab=e)},setPositionActionAmount(e){this.positionActionAmount=e},async getMyPositonsByPool(e,t,n){console.log("0507###getMyPositons###start###",t),this.myPositionsLoading=!0;let s={};const r=lt(n);if(!t.current_sqrt_price){const h=await r.getPool(t.address)||{};s={...t,...h}}let o=[],i=[],a=[],c=[];if(n=="Sui"){const{clmmPosition:h,farmsPosition:p}=await r.getAllPosition(e,[t.address]);a=h,c=p,i=c.filter(g=>{if(g.clmm_pool_id==s.address)return g}),o=i.map(g=>{const b=[];let y=new ne(0);return g.rewards.forEach(E=>{var D;const v=E.rewarder_type,m=this.tokensObj[v],_=((D=this.RATES[v])==null?void 0:D.price)||0,I=new ne(E.rewarder_amount).div(new ne(Math.pow(10,m.decimals))),H=I.mul(new ne(_));y=y.add(H),I.toNumber()>0&&b.push({...E,amount:I,rewarderAmountUsd:H.toString(),address:v,symbol:m.symbol})}),{...g,rewards:b,farmingRewardTotalUsd:y.toNumber()}}),console.log("farmingPositionList:",o)}else a=await r.getPositionList(e,{[t.address]:s})||[];console.log(o,"###farmingPositionList"),console.log("0507###getMyPositons###positionList###",a),console.log("###poolInfo",s),a.length<1&&this.setMyPositionsLoading(!1);const d=o.concat(a);console.log("allPositionList:",d);const l=[];d.forEach(h=>{let p,g,b,y="",E,v,m,_;if(h.liquidity&&h.liquidity!=="0"&&s){const I={creator:h.creator,collection:h.collection,name:h.name};n==="Aptos"?_=r.getNftHash(I):_=r.getNftHash(h);const H=s.token_a.decimals,D=s.token_b.decimals;console.log(s,"poolInf=====>"),b=r.TickMath.sqrtPriceX64ToPrice(s.current_sqrt_price,H,D).toString(),h.tick_lower_index==r.TickUtil.getMinIndex(Number(s.tickSpacing))?p="0":p=r.TickMath.tickIndexToPrice(Number(h.tick_lower_index),H,D).toString(),h.tick_upper_index==r.TickUtil.getMaxIndex(Number(s.tickSpacing))?g="":(g=r.TickMath.tickIndexToPrice(Number(h.tick_upper_index),H,D).toString(),console.log("0523###maxPrice###2222###",g));const V=r.getCoinAmountFromLiquidity({pool:s,position:h,roundUp:n!="Sui"}),ee=V.coinaAmount,me=V.coinbAmount;console.log(b,"===>currentPrice");const we=Number(me)+Number(ee)*Number(b);let Se=(Number(ee)*Number(b)/we*100).toFixed(0),He=(me/we*100).toFixed(0);p=="0"&&g==""&&(Se="50",He="50"),s.isPause?y="Closed":Number(b)>=Number(p)&&(g===""||Number(b)<=Number(g))?y="Active":(Number(b)>Number(g)||Number(b)<Number(p))&&(y="Inactive"),console.log("0323###this.tokensObj####",this.tokensObj),console.log("0323###this.tokensObj[poolInfo.token_a.address]####",this.tokensObj[s.token_a.address]),console.log("0323###poolInfo.token_a.address####",s.token_a.address),console.log("0323###poolInfo.token_b.address####",s.token_b.address);let De={},Je={};n==="Aptos"?(De={...s.token_a,...this.tokensObj[s.token_a.address],logoURI:this.tokensObj[s.token_a.address].logo_url},Je={...s.token_b,...this.tokensObj[s.token_b.address],logoURI:this.tokensObj[s.token_b.address].logo_url}):(De=s==null?void 0:s.token_a,Je=s==null?void 0:s.token_b),l.push({poolInfoOrigin:s,...s,...h,totalAmount:we,token_a:De,token_b:Je,tokenARates:E,tokenBRates:v,amountA:ee,amountB:me,fromPercent:Se,toPercent:He,amountUSD:m,tokenName:h.tokenName||h.name,currentStatus:y,positionLiquidity:h.liquidity,nftHash:_,currentPrice:b,minPrice:Dn(p,12),maxPrice:Dn(g,12),positionSource:h.id?"farming":"clmm",farmingRewardTotalUsd:h.id?h.farmingRewardTotalUsd:0})}});const u=l.sort((h,p)=>p.liquidity-h.liquidity);console.log(u,"==>myPositionsByPool"),this.poolPositions=u,this.setMyPositionsLoading(!1),this.getPendingFees(u,n),this.getRewarderV2(u,n),console.log(u,"===>this.myPositions")},setAutoPoolNum(e){this.autoPoolNum=e},setTokenExternalPrice(e,t){this.tokenExternalPriceObj[e]=t},clearCurrentPositionInfo(){this.currentPositionInfo={}},setPositionShowList(e){this.positionShowList=e},async getCoinMetaData(e){const n=await lt("Sui").getSuiTokenObj(e),s=[],r=[],o=JSON.parse(JSON.stringify(Object.values(n)));for(let i=0;i<o.length;i++){const a=o[i];a.is_trusted?s.push({...a,chain:"sui",isSelfBuilt:!1,logo_url:a.icon_url||a.icon_url,logoURI:a.icon_url||a.icon_url}):r.push({...a,chain:"sui",isSelfBuilt:!0,logo_url:a.icon_url||a.icon_url,logoURI:a.icon_url||a.icon_url})}console.log(" ~ file: pool.ts:1437 ~ getCoinMetaData ~ trustedList:",s),console.log(" ~ file: pool.ts:1437 ~ getCoinMetaData ~ this.tokens:",this.tokens),this.tokensObj=n,console.log(" ~ file: pool.ts:1454 ~ getCoinMetaData ~ this.tokensObj:",this.tokensObj),this.notTrustedObj=Object.fromEntries(r.map((i,a)=>[i.address,i])),console.log(" ~ file: pool.ts:1464 ~ getCoinMetaData ~ notTrustedObj:",this.notTrustedObj),this.isTokenLoading=!1},setPoolsLoading(e){this.poolsLoading=e}}}),mw=Zr("swapRouter",{state:()=>({swapRouterContract:{},isInitRouter:!0,poolListGroupByTokenAB:[],currentCoinPairRate:{}}),actions:{initSwapRouter(e,t,n){this.swapRouterContract=lt(e),this.swapRouterContract.initSwapRouter(t,n),this.isInitRouter=!1,console.log(this.swapRouterContract,"===>this.swapRouterContract")},setPoolListGroupByTokenAB(e){this.poolListGroupByTokenAB=e},setCurrentCoinPairRate(e){e&&(this.currentCoinPairRate={...this.currentCoinPairRate,...e})}}}),ww=Zr("SuiCommonStore",{state:()=>({tokensObj:{}}),actions:{setTokensObj(e){console.log(" ~ file: common.ts:11 ~ setTokensObj ~ data:",e),e&&(this.tokensObj={...this.tokensObj,...e})}}});function bw(e){const t={fullRpcUrl:localStorage.getItem(`${e}-currentRpclocal4`)||j[e||"Sui"].fullRpcUrl,simulationAccount:j[e||"Sui"].simulationAccount,cetus_config:j[e||"Sui"].cetus_config,clmm_pool:j[e||"Sui"].clmm_pool,integrate:j[e||"Sui"].integrate,deepbook:j[e||"Sui"].deepbook,deepbook_endpoint_v2:j[e||"Sui"].deepbook_endpoint_v2,aggregatorUrl:j[e||"Sui"].aggregatorUrl,swapCountUrl:j[e||"Sui"].swapCountUrl},n={launchpad:j[e||"Sui"].launchpad,ido:j[e||"Sui"].ido,xcetus:j[e||"Sui"].xcetus,xcetus_dividends:j[e||"Sui"].xcetus_dividends,cetus_faucet:j[e||"Sui"].cetus_faucet,xtoken:j[e||"Sui"].xtoken,xtoken_dividends:j[e||"Sui"].xtoken_dividends,token_faucet:j[e||"Sui"].token_faucet,booster:j[e||"Sui"].booster,maker_bonus:j[e||"Sui"].maker_bonus,liquidity_stratefy:j[e||"Sui"].liquidity_stratefy,vaults:j[e||"Sui"].vaults,frams:j[e||"Sui"].frams};let s=new Ct(t);const r=new gc(n,s),o=ai(),i=In(()=>o),a=Ph(),c=In(()=>a),d=yw();In(()=>d);const l=ww();pc(()=>{i.value.address&&(s.senderAddress=i.value.address)});const u=In(()=>i.value.walletName),{$notify:h}=On(),p=f=>{const{$notify:w}=On();w.success({key:f.hash+"loading",icon:Z("img",{class:{"notify-icon":!0,"loading-animate":!0},src:c.value.theme=="default"?"/image/img-loading@2x.png":"/sui-image/img-loading.png"}),message:Z("div",{class:"notification-title"},[Z("span",{innerHTML:f.title},null)]),description:Z("div",{class:"notification-title"},[Z("div",{class:"notification-text",innerHTML:ut.global.t("newAdd.confirmingTransaction")},null),Z("a",{href:Or(c.value.currentExplorer,"tx",window.encodeURIComponent(f.hash)),target:"_blank",innerHTML:ut.global.t("common.viewTransaction")},null)]),duration:0,class:"ant-notification-copy ant-notification-swap"})},g=f=>{console.log(" ~ file: useSui.ts:133 ~ showTransitionSuccess ~ params:",f);let w;if(f!=null&&f.excecuteTime){const A=Number(Dn((f==null?void 0:f.excecuteTime)/1e3,2));w=A>1?"":`Txn finalized in ${A}s! `}else w="";const{$notify:T}=On();T.success({icon:Z("svg",{class:{icon:!0},"aria-hidden":!0},[Z("use",{"xlink:href":"#icon-icon-change1"})]),message:Z("div",{class:"notification-title"},[Z("span",{innerHTML:`${f.title} `+ut.global.t("newAdd.success")},null)]),description:Z("div",{class:"notification-title"},[Z("div",{class:"notification-text",innerHTML:f.desc},null),Z("div",{class:"notification-text"},[Z("span",{innerHTML:w},null),Z("a",{href:Or(c.value.currentExplorer,"tx",window.encodeURIComponent(f.hash)),target:"_blank",innerHTML:ut.global.t("common.viewTransaction")},null)])]),duration:4.5,class:"ant-notification-copy ant-notification-swap"})},b=(f,w)=>{const{$notify:T}=On();T.error({icon:Z("svg",{class:{icon:!0},"aria-hidden":!0},[Z("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:Z("div",{class:"notification-title"},[Z("span",{innerHTML:`${f} `+ut.global.t("newAdd.failed")},null)]),description:w||ut.global.t("newAdd.somethingWrong"),duration:4.5,class:"ant-notification-copy ant-notification-error"})},y=async(f,w=!1)=>{var A,S,x,U,q,M;const{$notify:T}=On();try{let L={};if(console.log("watchTransaction params: ",f),!f.res||!((A=f==null?void 0:f.res)!=null&&A.digest)||!((S=f==null?void 0:f.res)!=null&&S.effects)||w&&!((x=f==null?void 0:f.res)!=null&&x.events)){const B=await zn(2e3);L=await s.Pool.getSuiTransactionResponse(f.hash),console.log("0503###watchTransaction###res###",L)}else L=f.res;if(console.log("0411###watchTransaction###res###",L),console.log(f,"====>params"),((q=(U=L==null?void 0:L.effects)==null?void 0:U.status)==null?void 0:q.status)==="success"){T.close(f.hash+"loading"),f.isOnlyToken?L.balanceChanges.forEach(C=>{var G,$,X;C.coinType==((G=f==null?void 0:f.isOnlyTokenInfo)==null?void 0:G.address)&&g({...f,desc:`Deposit ${new ne(C.amount.replace("-","")).div(new ne(Math.pow(10,($=f==null?void 0:f.isOnlyTokenInfo)==null?void 0:$.decimals)))} ${(X=f==null?void 0:f.isOnlyTokenInfo)==null?void 0:X.symbol}`})}):g(f);const B={walletAddress:o.address,chainName:"Sui",...f,...L,date:new Date().getTime()+6048e5};if(w)if(console.log("0222###watchTransaction###isGetNftInfo true###res####",L),L.events){const G=L.events.filter($=>$.type.includes("OpenPositionEvent"));return{status:!0,nftInfo:G[0]&&((M=G[0])==null?void 0:M.parsedJson),res:L}}else return{status:!0,nftInfo:L.effects.events,res:L};return!0}else{if(L&&L.effects&&L.effects.status&&L.effects.status.status!=="success")return T.close(f.hash+"loading"),b(f.title),!1;setTimeout(()=>y(f),3e3)}}catch(L){return console.log("watchTransaction###error###",L),T.close(f.hash+"loading"),T.error({icon:Z("svg",{class:{icon:!0},"aria-hidden":!0},[Z("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:Z("div",{class:"notification-title"},[Z("span",{innerHTML:`${f.title} Failed`},null)]),duration:4.5,description:"Something went wrong",class:"ant-notification-copy ant-notification-error"}),!0}},E=async f=>{var A,S,x,U,q,M;f.setSenderIfNotSet(i.value.address);const w=await f.build({client:s.fullClient}),T=await s.fullClient.dryRunTransactionBlock({transactionBlock:w});if(console.log("0503###simulate###simulateRes###",T),((S=(A=T==null?void 0:T.effects)==null?void 0:A.status)==null?void 0:S.status)==="failure"){console.log("0424###simulateRes###error###",(U=(x=T==null?void 0:T.effects)==null?void 0:x.status)==null?void 0:U.error);const L=(M=(q=T==null?void 0:T.effects)==null?void 0:q.status)==null?void 0:M.error,B=/\("(.+?)"\)/g,C=L.match(B),G=C&&C[0]&&C[0].match(/\w+/g)||"",$=C&&C[1]&&C[1].match(/\w+/g)||"",X=L.substr(L.lastIndexOf("}, ")+3),Q=X&&X.split(")"),K=Q&&Q[0]||"";throw G&&G[0]==="factory"&&$&&$[0]=="create_pool_internal"&&K==="1"?(h.error({icon:Z("svg",{class:{icon:!0},"aria-hidden":!0},[Z("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:Z("div",{class:"notification-title"},[Z("span",{innerHTML:"Transaction "+ut.global.t("newAdd.failed")},null)]),description:"Pool is existed",duration:4.5,class:"ant-notification-copy ant-notification-error"}),new Error("pool is existed")):(h.error({icon:Z("svg",{class:{icon:!0},"aria-hidden":!0},[Z("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:Z("div",{class:"notification-title"},[Z("span",{innerHTML:"Transaction "+ut.global.t("newAdd.failed")},null)]),description:L,duration:4.5,class:"ant-notification-copy ant-notification-error"}),new Error(L))}else return T},v=f=>({transactionBlock:f,options:{showEffects:!0,showEvents:!0,showInput:!0,showRawInput:!0,showObjectChanges:!0,showBalanceChanges:!0}}),m=async(f,w=!1)=>{var A,S;await zn(2e3);const T=await s.Pool.getSuiTransactionResponse(f.hash);if(((S=(A=T==null?void 0:T.effects)==null?void 0:A.status)==null?void 0:S.status)==="success"){h.close(f.hash+"loading"),g(f);const x={walletAddress:o.address,chainName:"Sui",...f,...T,date:new Date().getTime()+6048e5};a.setTransactionList(x)}},_=async(f,w)=>{try{o.setLoading(!0),w&&o.setFirstGetAssetLoading(!0);const T=await s.getOwnerCoinBalances(f);console.log(" ~ file: useSui.ts:383 ~ getAccount ~ ownerCoinBalance:",T);const A=Object.fromEntries(T.map(S=>[yt(S.coinType).full_address,{coinType:yt(S.coinType).full_address,balance:S.totalBalance}]));return console.log(" ~ file: useSui.ts:390 ~ getAccount ~ assets:",A),o.setAssets(A),o.setLoading(!1),o.setFirstGetAssetLoading(!1),A}catch(T){console.log(" ~ file: useSui.ts:373 ~ getAccount ~ error:",T),o.setLoading(!1),o.setFirstGetAssetLoading(!1)}},I=async()=>{try{console.log("getTokenList sdk: ",s);const f=await s.CetusConfig.getCoinConfigs();console.log("0907###tokenList###",f);let w=[],T=[],A=[];return f.forEach(S=>{let x=S;if(S.address.includes("::sui::SUI")){const U=yt(S.address).full_address;x={...x,address:U}}x.coin_priority?T.push(x):A.push({...x,coin_priority:"0"})}),T=T.sort((S,x)=>Number(S==null?void 0:S.coin_priority)<Number(x==null?void 0:x.coin_priority)?1:-1),A=A.sort((S,x)=>S.symbol.charCodeAt(0)-x.symbol.charCodeAt(0)),w=[...T,...A],console.log("0517###haveCoinPriority###",T),console.log("0517###notHaveCoinPriority###",A),console.log("0517###tokenList###",w),w}catch(f){return console.log("0517###getTokenList###error###",f),[]}},H=async()=>{var f,w,T,A;try{const S=await $fetch("/data/coins_info.json");if((f=S==null?void 0:S.data)!=null&&f.list&&((T=(w=S==null?void 0:S.data)==null?void 0:w.list)==null?void 0:T.length)>0){const x=Object.fromEntries((A=S==null?void 0:S.data)==null?void 0:A.list.map((U,q)=>[U.coin_type,{...U,address:U.coin_type,isSelfBuilt:!U.is_trusted,logoURI:U.logo_url}]));return x["0x2::sui::SUI"]={...x["0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],address:"0x2::sui::SUI"},console.log(" ~ file: useSui.ts:437 ~ getHardcodeTokenList ~ tokenObj:",x),x}}catch(S){console.log(" ~ file: useSui.ts:440 ~ getHardcodeTokenList ~ e:",S);const x=await I();return Object.fromEntries(x.map((q,M)=>[q.address,q]))}},D=async f=>{var T,A,S,x;if(console.log(" ~ file: useSui.ts:419 ~ getSuiTokenObj ~ isForcerefresh:",f),!f){console.log(" ~ file: useSui.ts:419 ~ getSuiTokenObj ~ ");let U;try{if(U=JSON.parse(localStorage.getItem("SuiTokenObj")||"{}"),console.log(" ~ file: useSui.ts:425 ~ getSuiTokenObj ~ getLocalTokenObj:",U),U&&!Rr(U)){const q=await H()||{};return Object.values(U).length>=Object.values(q).length?U:q}}catch(q){console.log(" ~ file: useSui.ts:2225 ~ getSuiTokenObj ~ error:",q)}}let w={};try{const U=await $fetch(`${j.Sui.api}/v2/sui/coins_info`);(T=U==null?void 0:U.data)!=null&&T.list&&((S=(A=U==null?void 0:U.data)==null?void 0:A.list)==null?void 0:S.length)>0&&(w=Object.fromEntries((x=U==null?void 0:U.data)==null?void 0:x.list.map((q,M)=>[q.coin_type,{...q,address:q.coin_type,isSelfBuilt:!q.is_trusted,logoURI:q.logo_url}])),w["0x2::sui::SUI"]={...w["0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],address:"0x2::sui::SUI"},console.log(" ~ file: useSui.ts:437 ~ getLpList ~ tokenObj:",w),V(w))}catch{w=await H()||{},console.log(" ~ file: useSui.ts:496 ~ getSuiTokenObj ~ tokenObj:",w)}return w},V=f=>{try{console.log(" ~ file: useSui.ts:612 ~ //lpList.forEach ~ tokenObj:",f),l.setTokensObj(f),localStorage.setItem("SuiTokenObj",JSON.stringify(f))}catch(w){console.log(" ~ file: useSui.ts:602 ~ //lpList.forEach ~ error:",w)}},ee=async(f,w=!1)=>{var A;const T=[];e=="Sui"&&(t.fullRpcUrl=j.Sui.officialRpcUrl,s=new Ct(t));try{const S=await s.Pool.getPools([],0,9999);console.log(" ~ file: useSui.ts:497 ~ getLpListFromContract ~ poolImmutables:",S);let x=await D();if(console.log(" ~ file: useSui.ts:498 ~ getLpListFromContract ~ tokenObj:",x),Rr(x)){const L=await I();x={},L.forEach(B=>{x[B.address]=B})}const U=await s.CetusConfig.getClmmPoolConfigs();console.log(" ~ file: useSui.ts:508 ~ getLpListFromContract ~ lpList:",U);const q={};U.forEach(L=>{q[L.pool_address]=L,console.log(" ~ file: useSui.ts:511 ~ lpList.forEach ~ lpObj:",q)});let M={};try{const B=(e=="Aptos"?await fetch(`${j.Aptos.api}/v2/sui/swap/count`).then(C=>C.json()):await fetch(`${j.Sui.api}/v2/sui/swap/count/v3`).then(C=>C.json())).data;M=Object.fromEntries(B.pools.map(C=>[C.swap_account,{...C,apr_7day:e=="Aptos"?C.apr_7day:C.apr_24h}]))}catch{}for(let L=0;L<S.length;L++){const B=S[L];if(q[B.poolAddress]||!q[B.poolAddress]){let C=x[B.coinTypeA],G=x[B.coinTypeB];C||(C=(await s.CetusConfig.getTokenListByCoinTypes([B.coinTypeA]))[B.coinTypeA]),G||(G=(await s.CetusConfig.getTokenListByCoinTypes([B.coinTypeB]))[B.coinTypeB]);let $=!1;F(C.address,G.address)&&($=!0);const X=M[B.poolAddress]?((A=M[B.poolAddress])==null?void 0:A.is_forward)===!1:$;let Q={};Q={...Q,...q[B.poolAddress],address:B.poolAddress,coinA:C,coinB:G,coin_a_address:B.coinTypeA,coin_b_address:B.coinTypeB,decimals:6,fee:Number(B.fee_rate)/1e6,tickSpacing:B.tickSpacing,symbol:`${C==null?void 0:C.symbol}-${G==null?void 0:G.symbol}`,name:`${C==null?void 0:C.symbol}-${G==null?void 0:G.symbol}`,needReverse:X,is_pause:B.is_pause,isPoolsInfoError:!0,current_sqrt_price:B.current_sqrt_price,liquidity:B.liquidity,poolAddress:B.poolAddress,current_tick_index:B.current_tick_index},(!f||!f[B.coinTypeA]&&!f[B.coinTypeB])&&T.push(Q)}}return console.log("0426###getLpListFromContract###result###",T),T}catch(S){console.log("getLpListFromContract###err##",S)}},me=async f=>{var U,q,M,L,B,C;let w=await D();const T=[],A=await fetch("/data/pools_info.json").then(G=>(console.log(" ~ file: useSui.ts:604 ~ constres:any=awaitfetch ~ rsp:",G),G.json()));if(console.log(" ~ file: useSui.ts:595 ~ constres:any=awaitfetch ~ res:",A),!((U=A==null?void 0:A.data)!=null&&U.lp_list)){const G=await ee(f);if(G)return G}console.log(f,"===>newFilterCoinsObj");const S=((q=A==null?void 0:A.data)==null?void 0:q.lp_list)||[];console.log("0420getLpList###lpList###",S),console.log("0420getLpList###res###",A);let x=!1;for(let G=0;G<S.length;G++){const $=S[G],X=($==null?void 0:$.is_forward)===!1,Q=[];if($.is_display_rewarder){const be=(B=(L=(M=$==null?void 0:$.object)==null?void 0:M.rewarder_manager)==null?void 0:L.fields)==null?void 0:B.rewarders;be&&be.forEach(re=>{var Ge,pe,Ve,tt,xe,ve;const je=new ne((Ge=re==null?void 0:re.fields)==null?void 0:Ge.emissions_per_second).mul(ne.pow(2,-64));Q.push({coinAddress:yt((tt=(Ve=(pe=re==null?void 0:re.fields)==null?void 0:pe.reward_coin)==null?void 0:Ve.fields)==null?void 0:tt.name).source_address,emissionsEveryDay:Math.floor(je.toNumber()*60*60*24),emissions_per_second:(xe=re==null?void 0:re.fields)==null?void 0:xe.emissions_per_second,growth_global:(ve=re==null?void 0:re.fields)==null?void 0:ve.growth_global})})}let K=w[$.coin_a_address];K||(K=(await s.CetusConfig.getTokenListByCoinTypes([$.coin_a_address]))[$.coin_a_address],w={...w,[$.coin_a_address]:K},x=!0);let ae=w[$.coin_b_address];ae||(ae=(await s.CetusConfig.getTokenListByCoinTypes([$.coin_b_address]))[$.coin_b_address],w={...w,[$.coin_b_address]:ae},x=!0),(!f||!f[$.coin_a_address]&&!f[$.coin_b_address]&&!f[yt($.coin_a_address).full_address]&&!f[yt($.coin_b_address).full_address])&&T.push({...$,coinA:{...K,address:wn(K.address)},coinB:{...ae,address:wn(ae.address)},token_a:{...K,address:wn(K.address)},token_b:{...ae,address:wn(ae.address)},rewarderInfo:Q,needReverse:X,is_pause:(C=$==null?void 0:$.object)==null?void 0:C.is_pause,poolAddress:$.address,tickSpacing:$.object.tick_spacing})}return x&&V(w),console.log("0420getLpList result:",T),T},we=async(f,w)=>{var T,A,S,x,U,q,M,L;try{if(!w){const Q=localStorage.getItem("SuiLpList"),K=new Date().getTime(),ae=Q?JSON.parse(Q):null;if(ae&&Number(ae==null?void 0:ae.expiration)>K&&(ae!=null&&ae.data)&&((T=ae==null?void 0:ae.data)==null?void 0:T.length)>0)return ae==null?void 0:ae.data}let B=await D();const C=[],G=await fetch(`${j[e||"Sui"].api}/v2/sui/pools_info/v3`).then(Q=>(console.log(" ~ file: useSui.ts:604 ~ constres:any=awaitfetch ~ rsp:",Q),Q.json()));if(!((A=G==null?void 0:G.data)!=null&&A.lp_list)){const Q=await me(f);if(Q)return Q}console.log(f,"===>newFilterCoinsObj");const $=((S=G==null?void 0:G.data)==null?void 0:S.lp_list)||[];console.log("0420getLpList###lpList###",$),console.log("0420getLpList###res###",G);let X=!1;for(let Q=0;Q<$.length;Q++){const K=$[Q],ae=(K==null?void 0:K.is_forward)===!1,be=[];if(K.is_display_rewarder){const Ge=(q=(U=(x=K==null?void 0:K.object)==null?void 0:x.rewarder_manager)==null?void 0:U.fields)==null?void 0:q.rewarders;Ge&&Ge.forEach(pe=>{var tt,xe,ve,kt,xs,Ba;const Ve=new ne((tt=pe==null?void 0:pe.fields)==null?void 0:tt.emissions_per_second).mul(ne.pow(2,-64));be.push({coinAddress:yt((kt=(ve=(xe=pe==null?void 0:pe.fields)==null?void 0:xe.reward_coin)==null?void 0:ve.fields)==null?void 0:kt.name).source_address,emissionsEveryDay:Math.floor(Ve.toNumber()*60*60*24),emissions_per_second:(xs=pe==null?void 0:pe.fields)==null?void 0:xs.emissions_per_second,growth_global:(Ba=pe==null?void 0:pe.fields)==null?void 0:Ba.growth_global})})}let re=B[K.coin_a_address];re||(re=(await s.CetusConfig.getTokenListByCoinTypes([K.coin_a_address]))[K.coin_a_address],B={...B,[K.coin_a_address]:re},X=!0);let je=B[K.coin_b_address];je||(je=(await s.CetusConfig.getTokenListByCoinTypes([K.coin_b_address]))[K.coin_b_address],B={...B,[K.coin_b_address]:je},X=!0),(!f||!f[K.coin_a_address]&&!f[K.coin_b_address]&&!f[yt(K.coin_a_address).full_address]&&!f[yt(K.coin_b_address).full_address])&&C.push({...K,coinA:{...re,address:wn(re.address)},coinB:{...je,address:wn(je.address)},token_a:{...re,address:wn(re.address)},token_b:{...je,address:wn(je.address)},rewarderInfo:be,needReverse:ae,is_pause:(M=K==null?void 0:K.object)==null?void 0:M.is_pause,poolAddress:K.address,tickSpacing:K.object.tick_spacing})}X&&V(B),console.log("0420getLpList result: ",C);try{const Q={expiration:new Date().getTime()+3e5,data:C};localStorage.setItem("SuiLpList",JSON.stringify(Q))}catch(Q){console.log("0420getLpList localStorage setItem Error: ",Q)}return console.log("0420getLpList return result: ",C),C}catch(B){console.log("0420getLpList Error: ",B);try{const G=localStorage.getItem("SuiLpList"),$=G?JSON.parse(G):null;if($&&($!=null&&$.data)&&((L=$==null?void 0:$.data)==null?void 0:L.length)>0)return $==null?void 0:$.data}catch(G){console.log(" ~ file: useSui.ts:676 ~ getLpList ~ err get local data error:",G)}const C=await me(f);if(console.log(C,"result===>"),C)return C}},Se=async(f=[])=>{const T=await new Ct(t).Pool.getPools(f,0,1e3);if(f.length===0){const A={};return T.forEach(S=>{A[S.poolAddress]={...S,rate:Ne(S.fee_rate).div(Math.pow(10,6)).toString()}}),A}else return T},He=async(f=[])=>{console.log(f,"getPoolslist##");const T=await new Ct(t).Pool.getPools(f,0,1e3);console.log("0330###getPools###pools###",T);const A={};return T.forEach(S=>{A[S.poolAddress]={...S,rate:Ne(S.fee_rate).div(Math.pow(10,6)).toString()}}),A},De=async f=>await new Ct(t).Pool.getPool(f),Je=f=>{const w=new lc;return w.moveCall({target:`${j[e||"Sui"].faucet.faucet_display}::${f.transactionModule}::faucet`,typeArguments:[],arguments:[w.pure(f.suplyID)]}),v(w)},Xt=f=>{var T,A,S,x,U;let w;return f!=null&&f.digest?w={hash:f==null?void 0:f.digest,status:(A=(T=f==null?void 0:f.effects)==null?void 0:T.status)==null?void 0:A.status,res:f}:f!=null&&f.effects&&(w={hash:(S=f==null?void 0:f.effects)==null?void 0:S.transactionDigest,status:(U=(x=f==null?void 0:f.effects)==null?void 0:x.status)==null?void 0:U.status,res:f}),w},rt=async f=>{try{const{data:w}=await fetch(`${j.Sui.api}/v2/sui/ticks?address=${f.poolAddress}&limit=512&orderBy=index`).then(T=>T.json());if(w&&w.list&&w.list.length>0)return{list:w.list.map(A=>({objectId:A.object_id,index:A.index,sqrtPrice:new ce(A.sqrt_price),liquidityNet:new ce(A.liquidity_net),liquidityGross:new ce(A.liquidity_gross),feeGrowthOutsideA:new ce(A.fee_growth_outside_a),feeGrowthOutsideB:new ce(A.fee_growth_outside_b),rewardersGrowthOutside:A.rewards_growth_outside})),address:w.address};{const T=await s.Pool.fetchTicks({pool_id:f.poolAddress,coinTypeA:f.coinTypeA,coinTypeB:f.coinTypeB});return console.log("0330###getTicks####sui####",T),{list:T,address:f.poolAddress}}}catch(w){console.log("0330###getTicks Error###",w);const T=await s.Pool.fetchTicks({pool_id:f.poolAddress,coinTypeA:f.coinTypeA,coinTypeB:f.coinTypeB});return console.log("0330###getTicks####sui####",T),{list:T,address:f.poolAddress}}},ft=async(f,w,T,A)=>await Gh(f,w,T,A),ot=f=>{var C,G;const{pool:w,position:T,roundUp:A}=f,S=Number(T.tick_lower_index),x=Number(T.tick_upper_index),U=gt.tickIndexToSqrtPriceX64(S),q=gt.tickIndexToSqrtPriceX64(x),M=bn.getCoinAmountFromLiquidity(new ce(T.liquidity),new ce(w.current_sqrt_price),U,q,A),L=ke(M.coinA.toString(),(C=w==null?void 0:w.coinA)==null?void 0:C.decimals),B=ke(M.coinB.toString(),(G=w==null?void 0:w.coinB)==null?void 0:G.decimals);return{coinaAmount:L,coinbAmount:B}},it=f=>{const{tokenA:w,tokenB:T,lowerTick:A,upperTick:S,coinAmount:x,iscoinA:U,roundUp:q,slippage:M,curSqrtPrice:L}=f;console.log(L.toString(),f,"==>params");const B=bn.estLiquidityAndcoinAmountFromOneAmounts(A,S,x,U,q,M,L),C=w.decimals,G=T.decimals,{tokenMaxA:$,tokenMaxB:X,liquidityAmount:Q,coinAmountA:K,coinAmountB:ae}=B;return console.log($.toString(),"===>tokenMaxA.toString()"),console.log(X.toString(),"===>tokenMaxB.toString()"),console.log(K.toString(),"===>coinAmountA.toString()"),console.log(ae.toString(),"===>coinAmountB.toString()"),console.log(B,"result===>"),console.log(B.liquidityAmount.toString(),"liquidityAmount===>"),console.log(C,"===>coinaDecimals"),{tokenMaxAOrigin:$.toString(),tokenMaxBOrigin:X.toString(),tokenMaxA:ke(K.toString(),C),tokenMaxB:ke(ae.toString(),G),liquidityAmount:Q}},at=async f=>{var pe,Ve,tt,xe;const{pool:w,amount:T,fix_amount_a:A,roundUp:S,tick_lower:x,tick_upper:U,index:q,slippage:M,coinTypeC:L,coinTypeD:B,coinTypeE:C,curSqrtPrice:G,positionInfo:$,farmPoolInfo:X}=f,Q=await De(w.poolAddress);console.log(f.curSqrtPrice.toString(),"###getAddLiquidityTransactionPayload 732 params"),console.log(Q,"###newPool");const K=A?Xe(T,w.token_a.decimals):Xe(T,w.token_b.decimals),ae=gt.sqrtPriceX64ToTickIndex(new ce(Q.current_sqrt_price));console.log(Q.current_sqrt_price.toString(),f.curSqrtPrice.toString(),"curSqrtPrice##610");let be,re;if(ae>=x&&ae<=U){const ve=bn.estLiquidityAndcoinAmountFromOneAmounts(x,U,new ce(K.toString()),A,S,M,new ce(Q.current_sqrt_price));console.log(ve,ve.tokenMaxA.toNumber(),ve.tokenMaxB.toNumber(),"===>preAddResult.coinAmountA.toNumber()"),be=A?K.toNumber():ve.tokenMaxA.toNumber(),re=A?ve.tokenMaxB.toNumber():K.toNumber()}else ae>U?(be=0,re=K.toNumber()):ae<x&&(be=K.toNumber(),re=0);console.log(f,"===>params742"),console.log("0330###createAddLiquidityTransactionPayload###params###",{coinTypeA:w.token_a.address,coinTypeB:w.token_b.address,pool_id:w.poolAddress,tick_lower:x<-443636?-443636:x,tick_upper:U>443636?443636:U,fix_amount_a:A,amount_a:be,amount_b:re,is_open:!q,pos_id:q});let je,Ge;if(((pe=$==null?void 0:$.value)==null?void 0:pe.positionSource)==="farming"){console.log("0103 getAddLiquidityTransactionPayload positionInfo: ",$);const ve=[];L&&ve.push(L),B&&ve.push(B),C&&ve.push(C);const kt={pool_id:(Ve=$==null?void 0:$.value)==null?void 0:Ve.pool_id,coinTypeA:w.token_a.address,coinTypeB:w.token_b.address,position_nft_id:(tt=$==null?void 0:$.value)==null?void 0:tt.id,clmm_pool_id:(xe=$==null?void 0:$.value)==null?void 0:xe.clmm_pool_id,amount_a:be,amount_b:re,collect_fee:!0,collect_rewarder:!1,fix_amount_a:A,clmm_rewarder_types:ve};je=await r.Farms.addLiquidityFixCoinPayload(kt),Ge={action:"FarmingIncreaseLiquidity",txbParams:kt}}else if(q){const ve=[];L&&ve.push(L),B&&ve.push(B),C&&ve.push(C);const kt={coinTypeA:w.token_a.address,coinTypeB:w.token_b.address,pool_id:w.poolAddress,tick_lower:x<-443636?-443636:x,tick_upper:U>443636?443636:U,fix_amount_a:A,amount_a:be,amount_b:re,is_open:!q,pos_id:q,collect_fee:f.collect_fee,rewarder_coin_types:[...ve],slippage:M},xs={slippage:M,curSqrtPrice:G};je=await s.Position.createAddLiquidityFixTokenPayload(kt,xs),Ge={action:"IncreaseLiquidity",txbParams:{parameter:kt,gasEstimateArg:xs}}}else if(console.log(X,"farmPoolInfo##"),X){const ve={pool_id:X.id,coinTypeA:w.token_a.address,coinTypeB:w.token_b.address,clmm_pool_id:X.clmm_pool_id,amount_a:be.toString(),amount_b:re.toString(),fix_amount_a:A,tick_lower:x,tick_upper:U};je=await r.Farms.openPositionAddLiquidityStakePaylod(ve),Ge={action:"FarmingOpenAndAddLiquidity",txbParams:ve}}else{const ve={coinTypeA:w.token_a.address,coinTypeB:w.token_b.address,pool_id:w.poolAddress,tick_lower:x<-443636?-443636:x,tick_upper:U>443636?443636:U,fix_amount_a:A,amount_a:be,amount_b:re,is_open:!q,pos_id:"",collect_fee:!1,rewarder_coin_types:[],slippage:M},kt={slippage:M,curSqrtPrice:G};je=await s.Position.createAddLiquidityFixTokenPayload(ve,kt),Ge={action:"OpenAndAddLiquidity",txbParams:{parameter:ve,gasEstimateArg:kt}}}return console.log("0330###sui##getAddLiquidityTransactionPayload###",je),{txb:v(je),payloadParams:Ge}},Qt=(f,w,T)=>{const A=gt.sqrtPriceX64ToPrice(new ce(f.current_sqrt_price),f.coinA.decimals,f.coinB.decimals).toNumber(),S=T?A:1/A,x=Ne(S).minus(Ne(w)).div(Ne(S)).mul(100);return x.gt(100)?100:(console.log(x.toString(),"1143"),Number(Ie(x.abs().toString(),2)))},Zt=async f=>{const{pool:w,a2b:T,byAmountIn:A,amount:S}=f;console.log("0221###sui###preSwap###",f);const x=w.coinA.decimals,U=w.coinB.decimals,q=w!=null&&w.current_sqrt_price?w:await De(w.address);let M;T&&A||!T&&!A?M=Xe(S,x):M=Xe(S,U);const L=await s.Swap.preswap({pool:q,current_sqrt_price:q.current_sqrt_price,coinTypeA:q.coinTypeA,coinTypeB:q.coinTypeB,decimalsA:x,decimalsB:U,a2b:T,byAmountIn:A,amount:M.toString()});return console.log("0221###sui###preSwap###result###",L),{...L,estimatedAmountIn:os(ke(L.estimatedAmountIn.toString(),T?x:U),T?x:U),estimatedAmountOut:os(ke(L.estimatedAmountOut.toString(),T?U:x),T?U:x),priceImpactPct:Ie(L.priceImpactPct,2)}},zt=async f=>{console.log("0412###getSwapTransactionPayload###params###",f);const{pool:w,a2b:T,byAmountIn:A,amount:S,slippage:x}=f,U=w.poolAddress,q=w.token_a.decimals,M=w.token_b.decimals;let L;T&&A||!T&&!A?L=Xe(S,q):L=Xe(S,M);const B=await s.Swap.preswap({pool:w,current_sqrt_price:w.current_sqrt_price,coinTypeA:w.coinTypeA,coinTypeB:w.coinTypeB,decimalsA:q,decimalsB:M,a2b:T,by_amount_in:A,amount:L.toString()}),C=Ne(B.estimatedAmountOut.toString()),G=Ne(B.estimatedAmountIn.toString()),$=A?C.sub(C.mul(x)):G.add(G.mul(x));console.log("0221###sui###swap##params123456###",{pool_id:U,a2b:B.aToB,by_amount_in:B.byAmountIn,amount:B.amount.toString(),amount_limit:Ie($.toString(),0)||"",coinTypeA:w.token_a.address,coinTypeB:w.token_b.address});const X=await s.Swap.createSwapTransactionPayload({pool_id:U,a2b:B.aToB,by_amount_in:B.byAmountIn,amount:B.amount.toString(),amount_limit:Ie($.toString(),0)||"",coinTypeA:w.token_a.address,coinTypeB:w.token_b.address});return console.log("0221###sui###swap##tx###",X),v(X)},At=async(f,w)=>{const T=new Ct(t);console.log(w,"pools982");const A=Object.values(w).map(x=>(x==null?void 0:x.address)||(x==null?void 0:x.poolAddress));return console.log(A,"#poolList"),await T.Position.getPositionList(f,A)},St=async(f,w,T,A="")=>{var x;console.log(" ~ file: useSui.ts:1141 ~ getPositionInfo ~ pool:",f);let S;try{return S=await new Ct(t).Position.getPosition((x=f==null?void 0:f.position_manager)==null?void 0:x.positions_handle,A),{...S,tokenName:T,collectionName:w}}catch(U){String(U).indexOf("Position not exists. Get Position error")>-1&&setTimeout(()=>{console.log(" ~ file: useSui.ts:1158 ~ setTimeout ~ pool:",f),St(f,w,T,A)},5e3)}},Yt=async f=>{const T=await new Ct(t).Position.getPositionById(f);return console.log("0503###getPositionById###result###",T),T},ct=async(f,w)=>(console.log(f,w,"getTickDataByIndex"),await s.Pool.getTickDataByIndex(f,w)),en=async(f,w)=>{const{pool:T,position:A,tickLowerData:S,tickUpperData:x}=f,U=w||await De(T.poolAddress),q=Kh({clmmpool:U,position:A,tickLower:S,tickUpper:x}),M=ke(q.feeOwedA.toString(),T.token_a.decimals),L=ke(q.feeOwedB.toString(),T.token_b.decimals);return{feeOwedA:Number(M)>99999999999||Number(M)<0?"0":M,feeOwedB:Number(L)>99999999999||Number(L)<0?"0":L}},tn=async f=>{const{poolAddress:w,pos:T,positionHandle:A}=f;return await s.Rewarder.posRewardersAmount(w,A,T)},ar=f=>f.pos_object_id,Ss=async f=>{const{pool:w,coinTypeA:T,coinTypeB:A,coinTypeC:S,coinTypeD:x,coinTypeE:U,position:q,delta_liquidity:M,rewards_num:L,positionInfo:B}=f;console.log("getRemoveLiquidityTransactionPayload params##",f);const C=await De(w.poolAddress),G={...w,...C},$=Number(q.tick_lower_index),X=Number(q.tick_upper_index),Q=gt.tickIndexToSqrtPriceX64($),K=gt.tickIndexToSqrtPriceX64(X),ae=bn.getCoinAmountFromLiquidity(M,new ce(G.current_sqrt_price),Q,K,!0),be=Ne(ae.coinA.toString()).mul(Ne(1-f.slippage)),re=Ne(ae.coinB.toString()).mul(Ne(1-f.slippage)),Ge=[T,A,S,x,U].filter(xe=>!!xe);let pe;console.log("0331###remove###params###",{coin_types:Ge,min_amount_a:Ie(be.toString(),0),min_amount_b:Ie(re.toString(),0),pool_id:w.poolAddress,pos_id:f.position.pos_object_id}),console.log("0331###delta_liquidity.toString()###",M.toString()),console.log("0331###position.liquidity###",q.liquidity);const Ve=[];S&&Ve.push(S),x&&Ve.push(x),U&&Ve.push(U);let tt;if((B==null?void 0:B.positionSource)==="farming")if(M.toString()===q.liquidity){const xe={pool_id:B==null?void 0:B.pool_id,coinTypeA:T,coinTypeB:A,position_nft_id:B==null?void 0:B.id,clmm_pool_id:B==null?void 0:B.clmm_pool_id,min_amount_a:Ie(be.toString(),0)||"",min_amount_b:Ie(re.toString(),0)||"",collect_fee:!0,collect_rewarder:!0,clmm_rewarder_types:[...Ve],delta_liquidity:B==null?void 0:B.liquidity,unstake:!0,close_position:!0,clmm_position_id:f.position.clmm_position_id};console.log("getRemoveLiquidityTransactionPayload FarmingRemoveLiquidity parameter: ",xe),pe=await r.Farms.removeLiquidityPayload(xe),tt={action:"FarmingRemoveLiquidity",txbParams:xe},console.log("getRemoveLiquidityTransactionPayload FarmingRemoveLiquidity result: ",pe)}else{const xe={pool_id:B==null?void 0:B.pool_id,coinTypeA:T,coinTypeB:A,position_nft_id:B==null?void 0:B.id,clmm_pool_id:B==null?void 0:B.clmm_pool_id,min_amount_a:Ie(be.toString(),0)||"",min_amount_b:Ie(re.toString(),0)||"",collect_rewarder:!1,clmm_rewarder_types:[...Ve],delta_liquidity:M.toString(),unstake:!1,close_position:!1};console.log("getRemoveLiquidityTransactionPayload FarmingDecreaseLiquidity parameter: ",xe),pe=await r.Farms.removeLiquidityPayload(xe),tt={action:"FarmingDecreaseLiquidity",txbParams:xe},console.log("getRemoveLiquidityTransactionPayload FarmingDecreaseLiquidity result: ",pe)}else if(M.toString()===q.liquidity){const xe={coinTypeA:T,coinTypeB:A,min_amount_a:Ie(be.toString(),0)||"",min_amount_b:Ie(re.toString(),0)||"",rewarder_coin_types:[...Ve],pool_id:w.poolAddress,pos_id:f.position.pos_object_id,collect_fee:!0};console.log("getRemoveLiquidityTransactionPayload RemoveLiquidity parameter: ",xe),pe=await s.Position.closePositionTransactionPayload(xe),tt={action:"RemoveLiquidity",txbParams:xe},console.log("getRemoveLiquidityTransactionPayload RemoveLiquidity result: ",pe)}else{console.log(Ve,"==>rewarder_coin_types");const xe={coinTypeA:T,coinTypeB:A,delta_liquidity:M.toString(),min_amount_a:Ie(be.toString(),0)||"",min_amount_b:Ie(re.toString(),0)||"",pool_id:w.poolAddress,pos_id:f.position.pos_object_id,collect_fee:!0,rewarder_coin_types:[...Ve]};console.log("getRemoveLiquidityTransactionPayload DecreaseLiquidity parameter: ",xe),pe=await s.Position.removeLiquidityTransactionPayload(xe),tt={action:"DecreaseLiquidity",txbParams:xe},console.log("getRemoveLiquidityTransactionPayload DecreaseLiquidity result: ",pe)}return console.log("0331###remove###result####",pe),{txb:v(pe),payloadParams:tt}},Yn=async(f,w)=>{const T=[];f.coinTypeC&&T.push(f.coinTypeC),f.coinTypeD&&T.push(f.coinTypeD),f.coinTypeE&&T.push(f.coinTypeE),console.log("0423###getCollectRewarderTransactionPayload###params###",{pool_id:f.pool_address,pos_id:f.pos_index,rewarder_coin_types:[...T],coinTypeA:f.coinTypeA,coinTypeB:f.coinTypeB,collect_fee:!1}),console.log(w,"##getCollectRewarderTransactionPayload");let A,S;if(w.positionSource=="farming"){const x={coinTypeA:w.coinTypeA,coinTypeB:w.coinTypeB,clmm_pool_id:w.clmm_pool_id,position_nft_id:w.id,clmm_rewarder_types:T,collect_fee:!0};A=await r.Farms.claimFeeAndClmmReward(x),S={action:"FarmingClaimFeeAndReward",txbParams:x}}else{const x={pool_id:f.pool_address,pos_id:f.pos_index,rewarder_coin_types:[...T],coinTypeA:f.coinTypeA,coinTypeB:f.coinTypeB,collect_fee:f.collect_fee};A=await s.Rewarder.collectRewarderTransactionPayload(x),S={action:"ClaimFeeAndMining",txbParams:x}}return{txb:v(A),payloadParams:S}},P=async f=>{console.log("1130###getCollectFeeTransactionPayload###params",{pool:f.pool.poolAddress,coinTypeA:f.pool.token_a.address,coinTypeB:f.pool.token_b.address,pos_index:f.position.index});const w=await s.Position.collectFeeTransactionPayload({coinTypeA:f.pool.token_a.address,coinTypeB:f.pool.token_b.address,pool_id:f.pool.poolAddress,pos_id:f.position.pos_object_id});return console.log("1130###getCollectFeeTransactionPayload###result##",w),v(w)},R=async()=>await s.Pool.getPoolImmutables(),F=(f,w)=>!!Jh(Ue(f),Ue(w)),z=async f=>{const{coinTypeA:w,coinTypeB:T,decimalsA:A,decimalsB:S,amountA:x,amountB:U,minPrice:q,maxPrice:M,fix_amount_a:L,tick_spacing:B,slippage:C,price:G}=f;console.log(f,"###getCreatPoolTransactionPayload 1201");const $=gt.priceToSqrtPriceX64(Ne(G),A,S);console.log("0407###getCreatPoolTransactionPayload###currentSqrtPrice###",$);const X=gt.priceToTickIndex(Ne(G),A,S);console.log("0407###getCreatPoolTransactionPayload###currentTickIndex###",X);let Q,K;if(q==="0"&&M==="")Q=ks.getMinIndex(Number(B)),K=ks.getMaxIndex(Number(B));else{const Ve=Number(q)==0?-443636:gt.priceToTickIndex(Ne(q),A,S),tt=gt.priceToTickIndex(Ne(M),A,S);Q=_r(Ve,Number(B)),K=_r(tt,Number(B))}console.log("0407###getCreatPoolTransactionPayload###tick_lower###",Q),console.log("0407###getCreatPoolTransactionPayload###tick_upper###",K);const ae=L?Xe(x,A):Xe(U,S);let be,re;gt.tickIndexToSqrtPriceX64(Q),gt.tickIndexToSqrtPriceX64(K);let je;X>=Q&&X<=K?(je=bn.estLiquidityAndcoinAmountFromOneAmounts(Q,K,new ce(ae.toString()),L,!0,C,$),be=L?ae.toString():je.tokenMaxA.toString(),re=L?je.tokenMaxB.toString():ae.toString()):X>K?(be="0",re=Ne(U).mul(Ne(Math.pow(10,S))).toString()):X<Q&&(be=Ne(x).mul(Ne(Math.pow(10,A))).toString(),re="0"),Q<-443636&&(Q=ks.getMinIndex(Number(B))),K>443636&&(K=Q=ks.getMaxIndex(Number(B))),console.log("0407####create pool params###",JSON.stringify({tick_spacing:B,initialize_sqrt_price:$.toString(),uri:"",fix_amount_a:L,amount_a:be,amount_b:re,tick_lower:Q,tick_upper:K,coinTypeA:w,coinTypeB:T}));const Ge=await s.Pool.creatPoolTransactionPayload({tick_spacing:B,initialize_sqrt_price:$.toString(),uri:"",fix_amount_a:L,amount_a:be,amount_b:re,slippage:C,tick_lower:Q,tick_upper:K,coinTypeA:w,coinTypeB:T});console.log("0412####result###",Ge);const pe=await E(Ge);return console.log("0412####simulateRes###",pe),v(Ge)},W=f=>{const w=f.split("0x");return"0x"+(w[1][0]==="0"?w[1].substring(1):w[1])},Y=async f=>{try{const w=localStorage.getItem("coinMatedataLocal"),T=w?JSON.parse(w):{};let A=[];const S=[];if(f&&typeof f=="string"){if(T[W(f)])return[T[W(f)]];A=[W(f)]}else{const M=[];if(f.forEach(L=>{T[W(L)]?S.push(T[W(L)]):M.push(W(L))}),M.length===0)return S;A=[...M]}const x=await s.CetusConfig.getTokenListByCoinTypes(A),U=[],q={};return Object.values(x).forEach(M=>{const L={...M,address:yt(M.address).full_address};U.push(L),q[M.address]=L}),console.log("0714###getTokenListByCoinType###formatResult###",U),localStorage.setItem("coinMatedataLocal",JSON.stringify({...T,...q})),[...U,...S]}catch{return[]}},te=async(f,w)=>{if(!w||w=="undefined")return null;let T=null;console.log("getTokenBySymbol###tokensObj###",f,w);for(const A in f){const S=f[A];console.log(" ~ file: useSui.ts:1714 ~ getTokenBySymbol ~ tokensObj:",f),console.log(" ~ file: useSui.ts:1713 ~ getTokenBySymbol ~ item:",S),console.log(" ~ file: useSui.ts:1714 ~ getTokenBySymbol ~ key:",A),((S==null?void 0:S.address)||(S==null?void 0:S.coin_type)).toUpperCase()===String(yt(w).full_address).toUpperCase()&&(T=S);break}if(!T){const A=w.split("0x");console.log(" ~ getTokenBySymbol ~ address:",w);const S="0x"+(A[1][0]==="0"?A[1].substring(1):A[1]),x=await s.CetusConfig.getTokenListByCoinTypes([S]);x&&x[S]&&(T={...x[S],isSelfBuilt:!0,address:yt(w).full_address})}return T},ie=async f=>{const{a2b:w,byAmountIn:T,amount:A,decimalsA:S,decimalsB:x}=f;let U;w&&T||!w&&!T?U=Xe(A,S):U=Xe(A,x);const q=await s.Swap.preSwapWithMultiPool({poolAddresses:f.poolAddresses,coinTypeA:f.coinTypeA,coinTypeB:f.coinTypeB,a2b:w,byAmountIn:T,amount:U});return{...q,estimatedAmountIn:os(ke(q.estimatedAmountIn.toString(),w?S:x),w?S:x),estimatedAmountOut:os(ke(q.estimatedAmountOut.toString(),w?x:S),w?x:S)}},fe=async(f,w)=>{console.log(f,"===>paths"),console.log(w,"===>coins"),s.Router.loadGraph(w,f),console.log(s,"sdk===>1826")},ge=async(f,w)=>{const T=new Ct(t);T.senderAddress=i.value.address,console.log(f,"===>createTxParams");const A=await T.getOwnerCoinAssets((T==null?void 0:T.senderAddress)||i.value.address);console.log(A,"===>allCoinAsset");const S=await Vh.buildAggregatorSwapTransaction(T,f,A,"",w),x={action:"Swap",txbParams:{createTxParams:f,slippage:w}};return{txb:v(S),payloadParams:x}},le=async f=>{const w=await s.Rewarder.fetchPosRewardersAmount([f]),T=w&&w[0];return T&&T.rewarderAmountOwed},ue=async f=>(console.log("batchFetchPosRewardersAmount"),await s.Rewarder.fetchPosRewardersAmount(f)),qe=mw(),$e=In(()=>qe);return{setTransations:m,showTransitionPending:p,showTransitionSuccess:g,showTransitionError:b,watchTransaction:y,getAccount:_,getTokenList:I,getLpList:we,getPools:Se,getPool:De,mintCoin:Je,handleTx:Xt,TickUtil:ks,TickMath:gt,getNearestTickByTick:_r,getTicks:rt,getEstPositionAPRWithMulti:ft,getCoinAmountFromLiquidity:ot,estLiquidityAndcoinAmountFromOneAmounts:it,getAddLiquidityTransactionPayload:at,getTickDataFromUrlData:Hh,getPriceImpactPct:Qt,preSwap:Zt,getSwapTransactionPayload:zt,getPositionList:At,getTickDataByIndex:ct,getCollectFeesQuote:en,getPosRewardersAmount:tn,getNftHash:ar,getPositionInfo:St,getRemoveLiquidityTransactionPayload:Ss,getCollectRewarderTransactionPayload:Yn,getCollectFeeTransactionPayload:P,getPoolImmutables:R,estimateLiquidityForCoinA:Ch,estimateLiquidityForCoinB:Wh,getCreatPoolTransactionPayload:z,getTokenListByCoinType:Y,getIsSortedSymbols:F,getPositionById:Yt,d:Ne,getTokenBySymbol:te,preSwapWithMultiPool:ie,initSwapRouter:fe,getSwapRouter:async(f,w,T,A,S,x="",U,q)=>{const M=f.value.decimals;console.log(" ~ file: useSui.ts:1847 ~ getSwapRouter ~ fromCoin:",f.value.decimals);const L=w.value.decimals,B=localStorage.getItem("swapOrderSplit"),C=localStorage.getItem("includeRoutes"),G=B=="open"||!B,$=C=="open";let X;console.log(JSON.stringify({fromCoin:f.value.adress,toCoin:w.value.adress,amount:T,senderAddress:s.senderAddress,orderSplit:G,externalRouter:$,lpChanges:q}),"######### ~ file: useSui.ts:1906");try{if(X=await s.RouterV2.getBestRouterByServer(f.value.address,w.value.address,T,A,s.senderAddress,G,$,q),console.log(" ~ file: useSui.ts:1878 ~ getSwapRouter ~ res:",X.isTimeout),X!=null&&X.isTimeout)throw console.log(" ~ file: useSui.ts:1881 ~ getSwapRouter ~ res?.isTimeout:",X==null?void 0:X.isTimeout),new Error("router timeout")}catch(Q){console.log(" ~ file: useSui.ts:1885 ~ getSwapRouter ~ error:",Q);try{console.log(" ~ file: useSui.ts:2014 ~ getSwapRouter ~ byAmountIn:",A),console.log(" ~ file: useSui.ts:2014 ~ getSwapRouter ~ amount:",T),console.log(" ~ file: useSui.ts:2014 ~ getSwapRouter ~ toCoin:",w),console.log(" ~ file: useSui.ts:2014 ~ getSwapRouter ~ fromCoin:",f),console.log(" ~ file: useSui.ts:2018 ~ getTokenList ~ swapWithMultiPool:",U),X=await $e.value.swapRouterContract.getBestRouterByRpc(f,w,T,A,S,x,U),console.log(" ~ file: useSui.ts:2014 ~ getSwapRouter ~ res:",X)}catch(K){console.log(" ~ file: useSui.ts:1864 ~ getSwapRouter ~ error:",K)}}return{amountIn:ke(X.inputAmount.toString(),M),amountOut:ke(X.outputAmount.toString(),L),...X}},getSwapRouterPayload:ge,fetchPosRewardersAmount:le,estCoinAmountsFromTotalAmount:f=>{const{lowerTick:w,upperTick:T,decimalsA:A,decimalsB:S,curSqrtPrice:x,totalAmount:U,tokenPriceA:q,tokenPriceB:M}=f;console.log(JSON.stringify({...f,curSqrtPrice:x.toString()}),"params===>");const L=bn.estCoinAmountsFromTotalAmount(w,T,x,U,q,M);console.log("coinAmounts: ",L);const B=Ur(L.amountA.toFixed(A,ne.ROUND_UP).toString(),A),C=Ur(L.amountB.toFixed(S,ne.ROUND_UP).toString(),S),G={coinA:new ce(B),coinB:new ce(C)};return{amountA:ke(B.toString(),A),amountB:ke(C.toString(),S),tokenAmountsInfo:G}},getCreateAddLiquidityPayload:async f=>{const{curSqrtPrice:w,tickLower:T,tickUpper:A,tokenAmounts:S,pool:x,slippage:U}=f;console.log(JSON.stringify(f),"####getCreateAddLiquidityPayload 1593");const q=bn.estimateLiquidityFromcoinAmounts(w,T,A,S),M=new ne(S.coinA.toString()).mul(1+U),L=new ne(S.coinB.toString()).mul(1+U),B={coinTypeA:x.coinTypeA,coinTypeB:x.coinTypeB,pool_id:x.address,tick_lower:T,tick_upper:A,delta_liquidity:q.toString(),max_amount_a:ne.ceil(M).toString(),max_amount_b:ne.ceil(L).toString(),pos_id:"",rewarder_coin_types:[],collect_fee:!1};console.log(JSON.stringify(B),"==>addLiquidityPayloadParams");const C=await s.Position.createAddLiquidityPayload(B);return v(C)},calculateDepositRatioFixTokenA:(f,w,T)=>bn.calculateDepositRatioFixTokenA(f,w,T),signAndExecuteTransactionBlock:async(f,w,T)=>{var S;if(((f==null?void 0:f.name)==="MSafe Wallet"||u.value==="MSafe Wallet")&&!T)throw a.setIsNotSupportMsafeError(!0),Error("The current operation does not support msafe wallet");a.setIsNotSupportMsafeError(!1),console.log("0319 signAndExecuteTransactionBlock###wallet###",f),console.log("0327 signAndExecuteTransactionBlock###payload###",w),console.log("0327 signAndExecuteTransactionBlock###payloadParams###",T),console.log("0319 signAndExecuteTransactionBlock###sdk.senderAddress###",s.senderAddress);let A;try{w.transactionBlock.setSender(s.senderAddress),console.log("0321 signAndExecuteTransactionBlock start build: ",new Date().getTime());const U=await w.transactionBlock.build({client:s.fullClient});console.log("0321 signAndExecuteTransactionBlock buildTxb: ",U),A=lc.from(U),console.log("0321 signAndExecuteTransactionBlock start end: ",new Date().getTime()),console.log("0327 signAndExecuteTransactionBlock###newTxb###",A)}catch(x){if(console.log("0319 signAndExecuteTransactionBlock error: ",x),(T==null?void 0:T.action)==="AggregatorSwap"&&(String(x).indexOf("check_coin_threshold")||String(x).indexOf('Identifier("balance")')))return b("Transaction","Exceeded price slippage."),"errorIsReturned"}if(console.log("signAndExecuteTransactionBlock wallet?.name: ",f==null?void 0:f.name),console.log("signAndExecuteTransactionBlock currentWalletName.value: ",u.value),(f==null?void 0:f.name)==="MSafe Wallet"||u.value==="MSafe Wallet"){console.log("signAndExecuteTransactionBlock MSafe Wallet Start");const x=(S=f.getState())==null?void 0:S.currentAccount;console.log("signAndExecuteTransactionBlock MSafe Wallet account: ",x);const U=w.transactionBlock;return U.setSender(s.senderAddress),console.log("signAndExecuteTransactionBlock MSafe Wallet txb: ",U),await f.signAndExecuteTransactionBlock({transactionBlock:U,account:x,chain:"sui:mainnet",action:T==null?void 0:T.action,txbParams:T==null?void 0:T.txbParams})}else{if(u.value==="Fox")return await f.signAndExecuteTransactionBlock(w);if(u.value==="Fewcha")return await f.signAndExecuteTransactionBlock(w);const{transactionBlockBytes:x,signature:U}=await f.signTransactionBlock({transactionBlock:A||w.transactionBlock});if((T==null?void 0:T.action)==="AggregatorSwap"){const q=new Date().getTime(),M=await s.fullClient.executeTransactionBlock({transactionBlock:x,signature:U,options:w.options}),L=new Date().getTime();let B=0,C={};try{C=await s.fullClient.getTransactionBlock({digest:M==null?void 0:M.digest,options:w.options}),B=C==null?void 0:C.timestampMs}catch($){console.log(" ~ file: useSui.ts:2402 ~ signAndExecuteTransactionBlock ~ error:",$)}const G=B?Math.min(L,Number(B)):L;return{...M,...C,excecuteTime:G-q}}else return await s.fullClient.executeTransactionBlock({transactionBlock:x,signature:U,options:w.options})}},getAllPosition:async(f,w=[])=>{const T=await s.fullClient.getOwnedObjectsByPage(f,{options:{showType:!0,showContent:!0,showOwner:!0,showDisplay:!0},filter:{MatchAny:[{Package:s.sdkOptions.clmm_pool.package_id},{StructType:`${j[e||"Sui"].frams.package_id}::pool::WrappedPositionNFT`}]}});console.log(T,"ownerRes:");const A=()=>`${s.sdkOptions.clmm_pool.package_id}::position::Position`,S=()=>`${j[e||"Sui"].frams.package_id}::pool::WrappedPositionNFT`,x=[],U=[],q=w.length>0;for(const M of T.data){const L=yt(M.data.type);if(L.full_address===A()){const B=Xh(M);q?w.includes(B.pool)&&x.push(B):x.push(B)}if(L.full_address===S()){const B=yc.buildFramsPositionNFT(M);q?w.includes(B.clmm_pool_id)&&U.push(B):U.push(B)}}return console.log("farmsPosition",U),console.log("clmmPosition:",JSON.stringify(x)),{clmmPosition:x,farmsPosition:U}},getFullClient:()=>{const f=new Ct(t);return console.log("getFullClient defaultNetworkOptions: ",t),console.log("getFullClient sdk: ",f),f.fullClient},getPoolsObj:He,getBestRouterByServer:async(f,w,T,A,S,x="",U,q)=>{const M=f.value.decimals,L=w.value.decimals,B=localStorage.getItem("swapOrderSplit"),C=localStorage.getItem("includeRoutes"),G=B=="open"||!B,$=C=="open";let X;try{return X=await s.RouterV2.getBestRouterByServer(f.value.address,w.value.address,T,A,s.senderAddress,G,$,q),console.log(" ~ file: useSui.ts:1947 ~ getLpListFromContract ~ res:",X),{...X,amountIn:ke(X.inputAmount.toString(),M),amountOut:ke(X.outputAmount.toString(),L)}}catch(Q){console.log(" ~ file: useSui.ts:1960 ~ getLpListFromContract ~ e:",Q)}},getBestRouterByRpc:async(f,w,T,A,S,x="",U,q)=>{let M;try{return M=await s.RouterV2.getBestRouterByRpc(f.value.address,w.value.address,T,A,S,x,U),M}catch(L){console.log(L)}},getSuiTokenObj:D,batchFetchPosRewardersAmount:ue}}function lt(e){let t={};return!e||e==="Aptos"?t=Ky():t=bw(e),{...t}}const hc="aggregatorLocal",Ps=[{name:"Cetus",logo:"/source-image/cetus.png",status:"open",type:"dex"},{name:"DeepBook",logo:"https://res.cetus.zone/icon/deepbook.png",status:"close",type:"dex"},{name:"Kriya V2",logo:"https://res.cetus.zone/icon/kriya.png",status:"close",type:"dex"},{name:"Kriya V3",logo:"https://res.cetus.zone/icon/kriya.png",status:"close",type:"dex"},{name:"FlowX V2",logo:"https://res.cetus.zone/icon/flowx.png",status:"close",type:"dex"},{name:"FlowX V3",logo:"https://res.cetus.zone/icon/flowx.png",status:"close",type:"dex"},{name:"Aftermath",logo:"/source-image/aftermath.png",status:"close",type:"dex"},{name:"Turbos",logo:"/source-image/turbos.png",status:"close",type:"dex"},{name:"Haedal",logo:"/source-image/haedal.png",status:"close",type:"other"},{name:"Volo",logo:"/source-image/volo.png",status:"close",type:"other"},{name:"Aftermath LSD",logo:"/source-image/aftermath.png",status:"close",type:"other"}],Kw={CETUS:"/source-image/cetus.png",DEEPBOOK:"https://res.cetus.zone/icon/deepbook.png",KRIYA:"https://res.cetus.zone/icon/kriya.png",FLOWX:"https://res.cetus.zone/icon/flowx.png",AFTERMATH:"/source-image/aftermath.png",TURBOS:"/source-image/turbos.png",HAEDAL:"/source-image/haedal.png",VOLO:"/source-image/volo.png",AFSUI:"/source-image/aftermath.png"},Oo=e=>{try{const t=localStorage.getItem(e);return t&&JSON.parse(t)}catch(t){return console.log(" ~ file: localStorage.ts:6 ~ getLocalStorage ~ error:",t),null}},Bs=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(n){console.log(" ~ file: localStorage.ts:14 ~ setLocalStorage ~ error:",n)}},Tw={pro:{Aptos:[{name:"Default",link:"https://fullnode.mainnet.aptoslabs.com"},{name:"Custom",link:""}],Sui:[{name:"Sui Official",link:"https://fullnode.mainnet.sui.io"},{name:"BlockVision",link:"https://sui-mainnet-endpoint.blockvision.org"},{name:"Suiscan",link:"https://rpc-mainnet.suiscan.xyz:443"},{name:"BlockVision 2",link:"https://cetus-mainnet-endpoint.blockvision.org"},{name:"Custom",link:""}]},pre:{Aptos:[{name:"Default",link:"https://fullnode.mainnet.aptoslabs.com"},{name:"Custom",link:""}],Sui:[{name:"Sui Official",link:"https://fullnode.mainnet.sui.io"},{name:"BlockVision",link:"https://sui-mainnet-endpoint.blockvision.org"},{name:"Suiscan",link:"https://rpc-mainnet.suiscan.xyz:443"},{name:"BlockVision 2",link:"https://cetus-mainnet-endpoint.blockvision.org"},{name:"Custom",link:""}]},preRoute:{Aptos:[{name:"Default",link:"https://fullnode.mainnet.aptoslabs.com"},{name:"Custom",link:""}],Sui:[{name:"Suiscan",link:"https://rpc-mainnet.suiscan.xyz:443"},{name:"Sui Official",link:"https://fullnode.mainnet.sui.io"},{name:"BlockVision",link:"https://sui-mainnet-endpoint.blockvision.org"},{name:"Custom",link:""}]},test:{Aptos:[{name:"Default",link:"https://fullnode.testnet.aptoslabs.com"},{name:"Custom",link:""}],Sui:[{name:"Sui Official",link:"https://fullnode.testnet.sui.io"},{name:"Suiscan",link:"https://rpc-testnet.suiscan.xyz:443"},{name:"Artifact",link:"https://testnet.artifact.systems/sui"},{name:"Custom",link:""}]}},Jw={...Tw[Qh]},vw="0.54.1",Aw="1.25.0",Sw={"-32700":"ParseError","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError"};class Ah extends Error{}class Sh extends Ah{constructor(t,n){super(t),this.code=n,this.type=Sw[n]??"ServerError"}}class xw extends Ah{constructor(t,n,s){super(t),this.status=n,this.statusText=s}}var xa=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Re=(e,t,n)=>(xa(e,t,"read from private field"),n?n.call(e):t.get(e)),kn=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},as=(e,t,n,s)=>(xa(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),kw=(e,t,n,s)=>({set _(r){as(e,t,r,n)},get _(){return Re(e,t,s)}}),xh=(e,t,n)=>(xa(e,t,"access private method"),n),Nn,Ds,dn,Cn,Vs,cs,ri,kh,ka,_h;function _w(e){const t=new URL(e);return t.protocol=t.protocol.replace("http","ws"),t.toString()}const Ew={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};class Pw{constructor(t,n={}){if(kn(this,ri),kn(this,ka),kn(this,Nn,0),kn(this,Ds,0),kn(this,dn,null),kn(this,Cn,null),kn(this,Vs,new Set),kn(this,cs,new Map),this.endpoint=t,this.options={...Ew,...n},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=_w(this.endpoint))}async makeRequest(t,n){const s=await xh(this,ri,kh).call(this);return new Promise((r,o)=>{as(this,Nn,Re(this,Nn)+1),Re(this,cs).set(Re(this,Nn),{resolve:r,reject:o,timeout:setTimeout(()=>{Re(this,cs).delete(Re(this,Nn)),o(new Error(`Request timeout: ${t}`))},this.options.callTimeout)}),s.send(JSON.stringify({jsonrpc:"2.0",id:Re(this,Nn),method:t,params:n}))}).then(({error:r,result:o})=>{if(r)throw new Sh(r.message,r.code);return o})}async subscribe(t){const n=new Bw(t);return Re(this,Vs).add(n),await n.subscribe(this),()=>n.unsubscribe(this)}}Nn=new WeakMap;Ds=new WeakMap;dn=new WeakMap;Cn=new WeakMap;Vs=new WeakMap;cs=new WeakMap;ri=new WeakSet;kh=function(){return Re(this,Cn)?Re(this,Cn):(as(this,Cn,new Promise(e=>{var t;(t=Re(this,dn))==null||t.close(),as(this,dn,new this.options.WebSocketConstructor(this.endpoint)),Re(this,dn).addEventListener("open",()=>{as(this,Ds,0),e(Re(this,dn))}),Re(this,dn).addEventListener("close",()=>{kw(this,Ds)._++,Re(this,Ds)<=this.options.maxReconnects&&setTimeout(()=>{xh(this,ka,_h).call(this)},this.options.reconnectTimeout)}),Re(this,dn).addEventListener("message",({data:n})=>{let s;try{s=JSON.parse(n)}catch(r){console.error(new Error(`Failed to parse RPC message: ${n}`,{cause:r}));return}if("id"in s&&s.id!=null&&Re(this,cs).has(s.id)){const{resolve:r,timeout:o}=Re(this,cs).get(s.id);clearTimeout(o),r(s)}else if("params"in s){const{params:r}=s;Re(this,Vs).forEach(o=>{o.subscriptionId===r.subscription&&r.subscription===o.subscriptionId&&o.onMessage(r.result)})}})})),Re(this,Cn))};ka=new WeakSet;_h=async function(){var e;return(e=Re(this,dn))==null||e.close(),as(this,Cn,null),Promise.allSettled([...Re(this,Vs)].map(t=>t.subscribe(this)))};class Bw{constructor(t){this.subscriptionId=null,this.subscribed=!1,this.input=t}onMessage(t){this.subscribed&&this.input.onMessage(t)}async unsubscribe(t){const{subscriptionId:n}=this;return this.subscribed=!1,n==null?!1:(this.subscriptionId=null,t.makeRequest(this.input.unsubscribe,[n]))}async subscribe(t){this.subscriptionId=null,this.subscribed=!0;const n=await t.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=n)}}var _a=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},vt=(e,t,n)=>(_a(e,t,"read from private field"),n?n.call(e):t.get(e)),pr=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},oi=(e,t,n,s)=>(_a(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),Iw=(e,t,n)=>(_a(e,t,"access private method"),n),Fs,Ot,Ns,ii,Eh;class Ow{constructor(t){pr(this,ii),pr(this,Fs,0),pr(this,Ot,void 0),pr(this,Ns,void 0),oi(this,Ot,t)}fetch(t,n){const s=vt(this,Ot).fetch??globalThis.fetch;if(!s)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return s(t,n)}async request(t){var r,o;oi(this,Fs,vt(this,Fs)+1);const n=await this.fetch(((r=vt(this,Ot).rpc)==null?void 0:r.url)??vt(this,Ot).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":vw,"Client-Target-Api-Version":Aw,...(o=vt(this,Ot).rpc)==null?void 0:o.headers},body:JSON.stringify({jsonrpc:"2.0",id:vt(this,Fs),method:t.method,params:t.params})});if(!n.ok)throw new xw(`Unexpected status code: ${n.status}`,n.status,n.statusText);const s=await n.json();if("error"in s&&s.error!=null)throw new Sh(s.error.message,s.error.code);return s.result}async subscribe(t){const n=await Iw(this,ii,Eh).call(this).subscribe(t);return async()=>!!await n()}}Fs=new WeakMap;Ot=new WeakMap;Ns=new WeakMap;ii=new WeakSet;Eh=function(){var e;if(!vt(this,Ns)){const t=vt(this,Ot).WebSocketConstructor??globalThis.WebSocket;if(!t)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");oi(this,Ns,new Pw(((e=vt(this,Ot).websocket)==null?void 0:e.url)??vt(this,Ot).url,{WebSocketConstructor:t,...vt(this,Ot).websocket}))}return vt(this,Ns)};const Uw=Symbol.for("@mysten/SuiClient");class Rw{get[Uw](){return!0}constructor(t){this.transport=t.transport??new Ow({url:t.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(t){if(!t.owner||!Bn(Ue(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[t.owner,t.coinType,t.cursor,t.limit]})}async getAllCoins(t){if(!t.owner||!Bn(Ue(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[t.owner,t.cursor,t.limit]})}async getBalance(t){if(!t.owner||!Bn(Ue(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[t.owner,t.coinType]})}async getAllBalances(t){if(!t.owner||!Bn(Ue(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[t.owner]})}async getCoinMetadata(t){return await this.transport.request({method:"suix_getCoinMetadata",params:[t.coinType]})}async getTotalSupply(t){return await this.transport.request({method:"suix_getTotalSupply",params:[t.coinType]})}async call(t,n){return await this.transport.request({method:t,params:n})}async getMoveFunctionArgTypes(t){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[t.package,t.module,t.function]})}async getNormalizedMoveModulesByPackage(t){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[t.package]})}async getNormalizedMoveModule(t){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[t.package,t.module]})}async getNormalizedMoveFunction(t){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[t.package,t.module,t.function]})}async getNormalizedMoveStruct(t){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[t.package,t.module,t.struct]})}async getOwnedObjects(t){if(!t.owner||!Bn(Ue(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[t.owner,{filter:t.filter,options:t.options},t.cursor,t.limit]})}async getObject(t){if(!t.id||!lr(hn(t.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[t.id,t.options]})}async tryGetPastObject(t){return await this.transport.request({method:"sui_tryGetPastObject",params:[t.id,t.version,t.options]})}async multiGetObjects(t){if(t.ids.forEach(s=>{if(!s||!lr(hn(s)))throw new Error(`Invalid Sui Object id ${s}`)}),t.ids.length!==new Set(t.ids).size)throw new Error(`Duplicate object ids in batch call ${t.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[t.ids,t.options]})}async queryTransactionBlocks(t){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:t.filter,options:t.options},t.cursor,t.limit,(t.order||"descending")==="descending"]})}async getTransactionBlock(t){if(!rc(t.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[t.digest,t.options]})}async multiGetTransactionBlocks(t){if(t.digests.forEach(s=>{if(!rc(s))throw new Error(`Invalid Transaction digest ${s}`)}),t.digests.length!==new Set(t.digests).size)throw new Error(`Duplicate digests in batch call ${t.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[t.digests,t.options]})}async executeTransactionBlock(t){return await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof t.transactionBlock=="string"?t.transactionBlock:un(t.transactionBlock),Array.isArray(t.signature)?t.signature:[t.signature],t.options,t.requestType]})}async signAndExecuteTransactionBlock({transactionBlock:t,signer:n,...s}){let r;t instanceof Uint8Array?r=t:(t.setSenderIfNotSet(n.toSuiAddress()),r=await t.build({client:this}));const{signature:o,bytes:i}=await n.signTransactionBlock(r);return this.executeTransactionBlock({transactionBlock:i,signature:o,...s})}async getTotalTransactionBlocks(){const t=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(t)}async getReferenceGasPrice(){const t=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(t)}async getStakes(t){if(!t.owner||!Bn(Ue(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[t.owner]})}async getStakesByIds(t){return t.stakedSuiIds.forEach(n=>{if(!n||!lr(hn(n)))throw new Error(`Invalid Sui Stake id ${n}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[t.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(t){return await this.transport.request({method:"suix_queryEvents",params:[t.query,t.cursor,t.limit,(t.order||"descending")==="descending"]})}async subscribeEvent(t){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[t.filter],onMessage:t.onMessage})}async subscribeTransaction(t){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[t.filter],onMessage:t.onMessage})}async devInspectTransactionBlock(t){var s;let n;if(gw(t.transactionBlock))t.transactionBlock.setSenderIfNotSet(t.sender),n=un(await t.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof t.transactionBlock=="string")n=t.transactionBlock;else if(t.transactionBlock instanceof Uint8Array)n=un(t.transactionBlock);else throw new Error("Unknown transaction block format.");return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[t.sender,n,(s=t.gasPrice)==null?void 0:s.toString(),t.epoch]})}async dryRunTransactionBlock(t){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof t.transactionBlock=="string"?t.transactionBlock:un(t.transactionBlock)]})}async getDynamicFields(t){if(!t.parentId||!lr(hn(t.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[t.parentId,t.cursor,t.limit]})}async getDynamicFieldObject(t){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[t.parentId,t.name]})}async getLatestCheckpointSequenceNumber(){const t=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(t)}async getCheckpoint(t){return await this.transport.request({method:"sui_getCheckpoint",params:[t.id]})}async getCheckpoints(t){return await this.transport.request({method:"sui_getCheckpoints",params:[t.cursor,t==null?void 0:t.limit,t.descendingOrder]})}async getCommitteeInfo(t){return await this.transport.request({method:"suix_getCommitteeInfo",params:[t==null?void 0:t.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(t){return await this.transport.request({method:"suix_getEpochMetrics",params:[t==null?void 0:t.cursor,t==null?void 0:t.limit,t==null?void 0:t.descendingOrder]})}async getAllEpochAddressMetrics(t){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[t==null?void 0:t.descendingOrder]})}async getEpochs(t){return await this.transport.request({method:"suix_getEpochs",params:[t==null?void 0:t.cursor,t==null?void 0:t.limit,t==null?void 0:t.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){const t=await this.getCheckpoint({id:"0"}),n=or(t.digest);return vs(n.slice(0,4))}async resolveNameServiceAddress(t){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[t.name]})}async resolveNameServiceNames({format:t="dot",...n}){const{nextCursor:s,hasNextPage:r,data:o}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[n.address,n.cursor,n.limit]});return{hasNextPage:r,nextCursor:s,data:o.map(i=>_m(i,t))}}async getProtocolConfig(t){return await this.transport.request({method:"sui_getProtocolConfig",params:[t==null?void 0:t.version]})}async waitForTransactionBlock({signal:t,timeout:n=60*1e3,pollInterval:s=2*1e3,...r}){const o=AbortSignal.timeout(n),i=new Promise((a,c)=>{o.addEventListener("abort",()=>c(o.reason))});for(i.catch(()=>{});!o.aborted;){t==null||t.throwIfAborted();try{return await this.getTransactionBlock(r)}catch{await Promise.race([new Promise(c=>setTimeout(c,s)),i])}}throw o.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}}const Lw=async e=>new Promise(async(t,n)=>{try{if(e.link.includes("cetus")&&window.location.host!=="app.cetus.zone")throw new Error("403");const s=new Rw({url:e.link}),r=new Date().getTime();if(await s.getRpcApiVersion()){const i=new Date().getTime();t({[e.name]:parseInt(String((i-r)/2))})}else n({[e.name]:0})}catch(s){console.log("0726###testRpc###err###",s),n({[e.name]:0})}}),fc=new Oh,Ph=Zr("index",{state:()=>({slippage:localStorage.getItem("cetus-slippage")||"0.5",isShowSuccess:!1,isShowRejected:!1,isShowWaiting:!1,isNotSupportMsafeError:!1,currentTransactionDesc:"",currentTransactionDescText:"",currentTransactionTxid:"",next_timestamp_ms:"",theme:"",chainName:"",positionNum:0,positionAmount:"",poolAmount:"",isRefresh:0,statsData:{},topPoolsList:[],topPoolsObj:{},newTopPoolsObj:{},topTokensList:[],topTokenObj:{},newtopTokenObj:{},lang:fc.get("lang")||"en",addressLpTokens:{},addressHistTokens:{},transactionList:JSON.parse(localStorage.getItem("transactionList")||"[]")||[],newtransactionList:JSON.parse(localStorage.getItem("newtransactionList")||"[]")||[],newAddtransactionList:[],liquiditytransactionList:null,isSelect:"",openMore:!1,openSwitchChain:!1,openSwitchLang:!1,openExplorer:!1,openH5Icon:!1,isShowMore:!1,isShowNotifi:!1,isShowSetting:!1,isShowSettingH5:!1,isIdoOpenTerm:!1,isShowRouterModal:!1,isShowRpcH5:!1,isShowExplorerH5:!1,isShowHeaderMore:!1,isShowHeaderEarn:!1,isShowBuyCrypto:!1,isShowBuyCryptoConfirm:!1,isShowBuyCryptoSelect:!1,isShowLoadMore:!0,aptosRpcs:[],suiRpcs:[],filterCoinsObj:null,filterCreatePoolCoin:{"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS":"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS","0x2::sui::SUI":"0x2::sui::SUI","0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc::cetus::CETUS":"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc::cetus::CETUS"},suiRpcTimeDelayObj:null,currentCrypto:"",currentExplorer:"",isShowBuyCryptoKODO:!1,isShowHeaderTrade:!1,getStatsError:!1,liquiditySourceList:[],liquiditySourceObj:{},includeRoutes:"",supportDepth3:"",collectTokenListSui:[],collectTokenListAptos:[],importTokenList:[],importTokenListObj:{}}),actions:{copy(e){if(navigator.clipboard)navigator.clipboard.writeText(e);else{const n=document.createElement("input");n.readOnly=!0,document.body.appendChild(n),n.value=e,n.select(),document.execCommand("Copy"),document.body.removeChild(n)}const{$notify:t}=On();t.success({icon:Z("svg",{class:{icon:!0},"aria-hidden":!0},[Z("use",{"xlink:href":"#icon-icon-change1"})]),duration:4.5,message:Z("div",{class:"notification-title"},[Z("span",{innerHTML:ut.global.t("tips.copySuccess")},null)]),class:"ant-notification-copy"})},setImportTokenList(e){this.importTokenList=e,this.importTokenListObj=Object.fromEntries(e==null?void 0:e.map(t=>[t.address,t])),localStorage.setItem("importTokenList",JSON.stringify(e))},setOpenMore(e){this.openMore=e},setIsShowHeaderMore(e){this.isShowHeaderMore=e},setIsShowHeaderEarn(e){this.isShowHeaderEarn=e},setOpenSwitchChain(e){this.openSwitchChain=e},setOpenSwitchLang(e){this.openSwitchLang=e},setOpenH5Icon(e){this.openH5Icon=e},setIsShowMore(e){this.isShowMore=e},setSlippage(e){console.log(e,"slippage##"),this.slippage=e,localStorage.setItem("cetus-slippage",e)},setPositiomNum(){this.positionNum=this.positionNum+1},setTheme(e){console.log(e,"theme##"),this.theme=e,e=="default"?(this.chainName="Aptos",localStorage.setItem("chainName","Aptos")):e=="sui"?(this.chainName="Sui",localStorage.setItem("chainName","Sui")):e=="sui2"&&(this.chainName="Sui2",localStorage.setItem("chainName","Sui2"));const t=e=="default"?"Aptos":"Sui";this.currentExplorer=localStorage.getItem(`${t}-currentExplorerUrl`)||Dh[t][0].link},setIsShowSuccess(e){this.isShowSuccess=e},setIsNotSupportMsafeError(e){this.isNotSupportMsafeError=e},setIsShowRejected(e){this.isShowRejected=e},setIsShowWaiting(e){this.isShowWaiting=e},setTransactionDesc(e){this.currentTransactionDesc=e},setTransactionDescText(e){console.log(e,"====>status"),this.currentTransactionDescText=e},setTransactionTxid(e){this.currentTransactionTxid=e},async getStatsData(e,t){var n,s;try{let r=[],o=[];console.log("0216###getStatsData###this.chainName####",e);const{data:i}=e=="Aptos"?await fetch(`${j[e||"Aptos"].api}/v2/swap/count`).then(h=>h.json()):await fetch(`${j[e||"Sui"].api}/v2/sui/swap/count/v3`).then(h=>h.json()),a=e=="Aptos"?await fetch(`${j[e||"Aptos"].api}/v2/contract/price`).then(h=>h.json()):await fetch(`${j[e||"Sui"].api}/v2/sui/contract/price`).then(h=>h.json());o=Object.fromEntries(a.data.list.map(h=>[h.swap_account,h])),this.addressHistTokens=o,this.statsData=i||{};const c=[];let d=!1,l,u={};if(e=="Sui"&&(u=lt("Sui").getSuiTokenObj()),i&&i.pools){for(let h=0;h<i.pools.length;h++){d=!1;const p=i.pools[h],g=p.rewarder_apr[0]?Number(p.rewarder_apr[0].substring(0,p.rewarder_apr[0].length-1)):0,b=p.rewarder_apr[1]?Number(p.rewarder_apr[1].substring(0,p.rewarder_apr[1].length-1)):0,y=p.rewarder_apr[2]?Number(p.rewarder_apr[2].substring(0,p.rewarder_apr[2].length-1)):0,E=g+b+y;p.stable_farming&&p.stable_farming.stable_rewarder.map(v=>{v.amount_second>0&&(d=!0)}),l=p.stable_farming&&p.stable_farming.apr*100,c.push({...p,pure_tvl_in_usd:e=="Aptos"?(p==null?void 0:p.pure_tvl_in_usd)||p.tvl_in_usd:p==null?void 0:p.pure_tvl_in_usd,aprNum:p?e=="Aptos"?String(Number(p.apr_7day.substring(0,p.apr_7day.length-1))+E):String(Number(p.apr_24h.substring(0,p.apr_24h.length-1))+E):"0",token_a_address:p.token_a_reserves=="SUI"?"0x2::sui::SUI":p.token_a_address,token_b_address:p.token_b_reserves=="SUI"?"0x2::sui::SUI":p.token_b_address,apr_7day:e=="Aptos"?p.apr_7day:p.apr_24h,fee_24_h:p.fee_24_h?p.fee_24_h:"",isStableFarming:d,stableFarmingApr:l,coin_a:{...u[p.token_a_address],logo_url:(n=u[p.token_a_address])==null?void 0:n.icon_url},coin_b:{...u[p.token_b_address],logo_url:(s=u[p.token_b_address])==null?void 0:s.icon_url}})}this.topPoolsList=c,console.log(" ~ file: index.ts:245 ~ getStatsData ~ this.topPoolsList:",this.topPoolsList),r=Object.fromEntries(i.pools.map(h=>[h.swap_account,{...h,apr_7day:e=="Aptos"?h.apr_7day:h.apr_24h}])),this.topPoolsObj=Object.fromEntries(i.pools.map(h=>[h.name,{...h,apr_7day:e=="Aptos"?h.apr_7day:h.apr_24h}])),this.newTopPoolsObj=Object.fromEntries(i.pools.map(h=>[h.swap_account,{...h,apr_7day:e=="Aptos"?h.apr_7day:h.apr_24h}]))}if(i&&i.tokens){const p=i.tokens.filter(g=>!t||!t[g.address]).map(g=>({...g,pure_tvl_in_usd:e==="Aptos"?(g==null?void 0:g.pure_tvl_in_usd)||(g==null?void 0:g.tvl_in_usd):g==null?void 0:g.pure_tvl_in_usd}));this.topTokensList=p,this.addressLpTokens=r,this.topTokenObj=Object.fromEntries(p.map(g=>[g.name,g])),this.newtopTokenObj=Object.fromEntries(p.map(g=>[g.address,g]))}this.getStatsError=!1}catch(r){console.log(" ~ file: index.ts:245 ~ getStatsData ~ error:",r),this.getStatsError=!0}},setLang(e){fc.set("lang",e),this.lang=e},setTransactionList(e){console.log(this.newAddtransactionList,"====>newAddtransactionLists")},clearTransactionList(){const e=this.newAddtransactionList.filter(t=>t.chainName!==this.chainName);this.newAddtransactionList=e,localStorage.setItem("newAddtransactionList",e.length>0?JSON.stringify(e):"")},setIsSelect(e){console.log(e,"status===>"),this.isSelect=e},setIsShowNotifi(e){this.isShowNotifi=e},setIsShowSetting(e){this.isShowSetting=e},setIsShowSettingH5(e){this.isShowSettingH5=e},setIsIdoOpenTerm(e){this.isIdoOpenTerm=e},setIsShowRouterModal(e){this.isShowRouterModal=e},setIsOpenExplorer(e){this.openExplorer=e},setIsShowExplorerH5(e){this.isShowExplorerH5=e},setIsShowRpcH5(e){this.isShowRpcH5=e},setPositiomAmount(e){this.positionAmount=e},setPoolAmount(e){this.poolAmount=e},setisRefresh(){this.isRefresh=this.isRefresh+1},async getFrontConfig(){var e;this.getAggregatorSetting();try{let t;const n=localStorage.getItem("SuiFrontConfig"),s=new Date().getTime(),r=n?JSON.parse(n):null;if(r&&Number(r==null?void 0:r.expiration)>s&&(r!=null&&r.data)&&!Rr(r==null?void 0:r.data))t=r==null?void 0:r.data;else{const o=await fetch(`${j.Sui.api}/v2/sui/front_config`).then(i=>i.json());if((o==null?void 0:o.code)===200){t=o==null?void 0:o.data;try{const i={expiration:new Date().getTime()+3e5,data:o==null?void 0:o.data};localStorage.setItem("SuiFrontConfig",JSON.stringify(i))}catch(i){console.log("getFrontConfig localStorage setItem Error: ",i)}}}if(t){this.aptosRpcs=(t==null?void 0:t.aptos_nodes)||[],this.suiRpcs=(t==null?void 0:t.sui_nodes)||[];const o=(t==null?void 0:t.filter_coins)||[],i=Object.fromEntries(o.map(a=>[a,a]));this.filterCoinsObj=i,((e=t==null?void 0:t.sui_nodes)==null?void 0:e.length)>0&&this.setRpcTimedelay(t==null?void 0:t.sui_nodes)}}catch(t){console.log("getFrontConfig###error###",t),this.filterCoinsObj={}}},async getTransactionList(e,t,n){this.isShowLoadMore=!0;let s;n==0?s=new Date().getTime():s=this.next_timestamp_ms,console.log(s,this.next_timestamp_ms,"this.next_timestamp_ms");try{const r=e=="Aptos"?await fetch(`${j[e||"Aptos"].api}/v2/aptos/pool/history?limit=10&offset=${n}&timestamp_ms=${s}&address=${t}`).then(o=>o.json()):await fetch(`${j[e||"Sui"].api}/v2/sui/pool/history?limit=10&offset=${n}&timestamp_ms=${s}&address=${t}`).then(o=>o.json());r!=null&&r.data?(r.data.list.length<10&&(this.isShowLoadMore=!1),n==0?(this.liquiditytransactionList=r.data.list,this.next_timestamp_ms=r.data.next_timestamp_ms):(this.next_timestamp_ms=r.data.next_timestamp_ms,this.liquiditytransactionList=this.liquiditytransactionList.concat(r.data.list))):(this.isShowLoadMore=!1,n==0&&(this.liquiditytransactionList=[])),console.log(r,this.isShowLoadMore,"2132131")}catch(r){this.isShowLoadMore=!1,this.liquiditytransactionList=[],console.log("getFrontConfig###error###",r)}},setClearLiquiditytransactionList(){this.liquiditytransactionList=null},async setRpcTimedelay(e){try{console.log("setRpcTimedelay###rpcList###",e);const t=[];e.forEach(s=>{s.name!=="Custom"&&t.push(Lw(s))});const n=await Promise.allSettled(t);if(console.log("0726###setRpcTimedelay###res###",n),(n==null?void 0:n.length)>0){let s={};n.forEach(r=>{s={...s,...r==null?void 0:r.value}}),console.log("suiRpcTimeDelayObj###",s),this.suiRpcTimeDelayObj=s}}catch(t){console.log("setRpcTimedelay###err###",t)}},setIsShowBuyCrypto(e){this.isShowBuyCrypto=e},setIsShowBuyCryptoConfirm(e){this.isShowBuyCryptoConfirm=e},setIsShowBuyCryptoSelect(e){this.isShowBuyCryptoSelect=e},setIsShowBuyCryptoKODO(e){this.isShowBuyCryptoKODO=e},setCurrentCrypto(e){this.currentCrypto=e},setCurrentExplorer(e){this.currentExplorer=e,console.log(e,"value360##")},setIsShowHeaderTrade(e){this.isShowHeaderTrade=e},getAggregatorSetting(){var r;const e=Oo(hc);if(console.log(" ~ file: index.ts:469 ~ getAggregatorSetting ~ aggregatorLocal:",e),e&&e.length===Ps.length&&((r=e[0])!=null&&r.type))this.liquiditySourceList=e;else{const o=Ps.map(i=>{var d,l,u;const a=e&&(e==null?void 0:e.filter(h=>i.name.indexOf(h.name)>-1));let c;return a&&(a!=null&&a[0])?i.name.indexOf("Kriya")>-1?c={...i,status:(d=a==null?void 0:a[0])==null?void 0:d.status}:i.name==="Aftermath LSD"&&((l=a==null?void 0:a[0])==null?void 0:l.name)==="Aftermath"?c={...i}:i.name.indexOf("FlowX")>-1?c={...i,status:(u=a==null?void 0:a[0])==null?void 0:u.status}:c={...i,...a==null?void 0:a[0]}:c={...i},c});this.liquiditySourceList=o}const t=Object.fromEntries(Ps==null?void 0:Ps.map(o=>[o.name.toUpperCase(),o]));this.liquiditySourceObj={...t,CETUS:{name:"CETUS",logo:"/sui-image/logo_cetus@2x.png"}};let n,s;try{n=Oo("includeRoutes")||"open",s=Oo("supportDepth3")||""}catch{n="open",s=""}this.includeRoutes=n,this.supportDepth3=s},setAggregatorSetting(e,t,n){this.liquiditySourceList=e,this.includeRoutes=t,Bs(hc,e),Bs("includeRoutes",t),n!==void 0&&(this.supportDepth3=n,Bs("supportDepth3",n))},setSupportDepth3(e){this.supportDepth3=e},setCollectTokenList(e,t){t=="Aptos"?(this.collectTokenListAptos=JSON.parse(JSON.stringify(e)),Bs("collectTokenListAptos",e)):(this.collectTokenListSui=JSON.parse(JSON.stringify(e)),Bs("collectTokenListSui",e))}}});export{Kw as A,Ln as B,vs as C,bo as D,lm as E,hn as F,lr as G,N as H,Rw as I,wt as J,Gw as K,Em as L,Fn as M,th as N,Zi as S,lc as T,yw as a,lt as b,uc as c,Ky as d,mw as e,ww as f,Cw as g,bw as h,My as i,Oo as j,Hw as k,nt as l,Gt as m,Ue as n,Pe as o,wm as p,Ft as q,zy as r,Tt as s,Ww as t,Ph as u,Ke as v,Jw as w,un as x,Qe as y,O as z};
