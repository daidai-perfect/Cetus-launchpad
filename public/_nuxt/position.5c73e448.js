import{_ as H}from"./upgrade-loading.0c1dc335.js";import{_ as Q}from"./upgrade-position-item.d67d41a4.js";import{a as X,r as w,l as Y,b as Z,E as M,m as a,y as x,N as oo,D as C,T as eo,e as so,o as r,f as l,i as O,x as B,F as to,s as no,h as ao,v as U,w as ro,B as lo,c as io,j as uo}from"./entry.0caab9e0.js";import{a as co,u as po}from"./pool.e34b56ac.js";import{u as mo}from"./notifi.ff7ec4d6.js";import{u as vo,g as go}from"./index.98582d64.js";import{i as D}from"./import-icon.de3e6c66.js";import{_ as _o}from"./img-no-Positions_2x.c0c7e203.js";import{_ as fo}from"./img-no-Positions_2x.fcf627ba.js";import{_ as ho}from"./img-connect-wallet_2x.9d91c2fb.js";import{_ as yo}from"./img-connect-wallet_2x.b6d7505d.js";/* empty css              */import"./index.d2b47555.js";import"./icon-Amount-for-Sale_2x.b2e65df2.js";import"./status-block.95cf1d0a.js";/* empty css              */import"./farms-valid-range.fc07863e.js";import"./decimal.0bdeb344.js";import"./farms.cb506725.js";import"./icon_farms_2x.e2b5c79d.js";import"./icon_rewards_2x.f4af5f96.js";import"./icon-arrow_2x.948aedb2.js";import"./icon-arrow_2x.4ffddb8e.js";import"./farms.325a2823.js";import"./useWhale.5c8f7203.js";const bo=X({setup(){const s=w(!1),{t:S}=Y(),R=w(["position"]),G=Z(),E=M(),$=w(""),y=co(),c=a(()=>y),A=a(()=>{const o=E.query.poolAddress,e=n.value.poolConfigObj[o];return console.log(e,"infoinfoinfo"),e}),P=a(()=>c.value.chainName?go[c.value.chainName]:{});let i=w([]);const f=po(),n=a(()=>f),V=vo(),b=a(()=>V),q=()=>{s.value=!0,i.value=[],b.value.address&&f.getMyPositons(b.value.address,n.value.poolsObj,c.value.chainName),setTimeout(()=>{s.value=!1},1e3)};x(()=>{i.value=[],f.setMyPositionsLoading(!0)}),oo(()=>{b.value.connected||(i.value=[])});const F=()=>{s.value=!0;let o=[];n.value.poolPositions.forEach(e=>{var L,h,T,N;let t,u;const m=e.amountA*((L=n.value.RATES[e.token_a.address])==null?void 0:L.price),d=e.amountB*((h=n.value.RATES[e.token_b.address])==null?void 0:h.price);(T=n.value.RATES[e.token_a.address])!=null&&T.price&&((N=n.value.RATES[e.token_b.address])!=null&&N.price)?(t=m+d,u=m+d):(t=" --",u=0),o.push({...e,amountUSD:t,amountUSDOrigin:u,tokenARates:m,tokenBRates:d})}),i.value=o,console.log(i.value,"list.value========>")};C(()=>[n.value.poolPositions,n.value.RATES,A.value],([o,e,t])=>{o&&e&&t&&(console.log("0605==>updateLpList9099999"),F())},{immediate:!0}),C(()=>[b.value.address,A.value,c.value.chainName],([o,e,t])=>{o||f.setPoolPositions([]),o&&e&&t&&f.getMyPositonsByPool(o,e,t)},{immediate:!0,deep:!0});const k=mo(),p=a(()=>k),j=a(()=>f),J=async o=>{await k.getSourceGroups();const e=p.value.sourceGroups&&p.value.sourceGroups.length>0&&p.value.sourceGroups[0]&&p.value.sourceGroups[0].sources||[];for(let t=0;t<e.length;t++){const{pool_address:u,position_index:m}=JSON.parse(e[t].blockchainAddress);let d=!1,L;for(let h=0;h<o.length;h++){const{poolAddress:T,index:N}=o[h];u==T&&Number(N)==Number(m)&&(d=!0),L={pool_address:u,position_index:m}}d||await k.subscribePosition(L,"",!1,!1)}},I=async()=>{await k.getSourceGroups();const o=p.value.sourceGroups&&p.value.sourceGroups.length>0&&p.value.sourceGroups[0]&&p.value.sourceGroups[0].sources||[];for(let e=0;e<o.length;e++){const{pool_address:t,position_index:u}=JSON.parse(o[e].blockchainAddress),{name:m}=o[e],d={pool_address:t,position_index:u};await k.subscribePosition(d,m,!1,!1)}},K=a(()=>j.value.myPositionsLoading);C(()=>j.value.poolPositions,(o,e)=>{P.value.hasNotifi&&(o&&o.length>0&&e&&e.length!==o.length?J(o):o&&o.length==0&&!K.value&&I())},{immediate:!0});const W=o=>{var e;return(o==null?void 0:o.logoURI)||(o==null?void 0:o.logo_url)||((e=n.value.tokensObj[o==null?void 0:o.address])==null?void 0:e.logo_url)||(c.value.theme==="default"?D("/image/coins/unknown.png"):D("/image/coins/sui-unknown.png"))},v=w(null),g=a(()=>v.value&&v.value.firstToken?v.value.firstToken:null),_=a(()=>v.value&&v.value.lastToken?v.value.lastToken:null),z=a(()=>{let o=[];o=i.value;const e=o.filter((t,u)=>g.value&&_.value?t.coinA.symbol==g.value.symbol&&t.coinB.symbol==_.value.symbol||t.coinA.symbol==_.value.symbol&&t.coinB.symbol==g.value.symbol:g.value?t.coinA.symbol.toLowerCase().includes(g.value.symbol.toLowerCase())||t.coinB.symbol.toLowerCase().includes(g.value.symbol.toLowerCase()):_.value?t.coinA.symbol.toLowerCase().includes(_.value.symbol.toLowerCase())||t.coinB.symbol.toLowerCase().includes(_.value.symbol.toLowerCase()):o);return n.value.myPositionsLoading||y.setPositiomAmount(e.length),e});return eo(()=>{y.setPositiomAmount("--")}),{showList:z,childTokenSelectRef:v,firstToken:g,lastToken:_,getCoinIcon:W,t:S,pools:n,store:c,wallet:b,list:i,clickRefresh:q,refresh:s,current:R,router:G,searchKey:$}}});const ko={class:"your-liquidity-container"},Lo={key:0,class:"upgrade-loading"},wo={key:1,class:"position-list"},So={key:2,class:"no-data"},Ao={key:0,src:_o,alt:""},Po={key:1,src:fo,alt:""},To={key:3,class:"no-data"},No={key:0,src:ho,alt:""},Bo={key:1,src:yo,alt:""};function Co(s,S,R,G,E,$){const y=H,c=Q,A=lo;return r(),l("div",ko,[s.pools.myPositionsLoading&&s.wallet.connected?(r(),l("div",Lo,[O(y,{loading:s.pools.myPositionsLoading,type:"position"},null,8,["loading"])])):B("",!0),s.showList&&s.showList.length>0&&s.wallet.connected&&!s.pools.myPositionsLoading?(r(),l("div",wo,[(r(!0),l(to,null,no(s.showList,(P,i)=>(r(),io(c,{key:i,"p-item":P},null,8,["p-item"]))),128))])):B("",!0),s.showList&&s.showList.length<=0&&!s.pools.myPositionsLoading&&s.wallet.connected?(r(),l("div",So,[s.store.theme=="default"?(r(),l("img",Ao)):(r(),l("img",Po)),ao("span",null,U(s.$t("common.noLiquidityPositions")),1)])):B("",!0),s.wallet.connected?B("",!0):(r(),l("div",To,[s.store.theme=="default"?(r(),l("img",No)):(r(),l("img",Bo)),O(A,{class:"connect-wallet",onClick:S[0]||(S[0]=P=>s.wallet.setIsShowWalletModal(!0))},{default:ro(()=>[uo(U(s.$t("button.connectWallet")),1)]),_:1})]))])}const se=so(bo,[["render",Co],["__scopeId","data-v-c7189d46"]]);export{se as default};
