import{a as B,r as f,m as C,D as q,y as J,C as Pt,o as p,f as y,h as n,v as w,F as nt,s as lt,i as c,x as M,a0 as At,d8 as Ht,J as Rt,z as G,e as Y,u as Ut,c as E,S as xt,M as L,w as K,p as rt,k as it,b as Wt}from"./entry.c708ef7e.js";/* empty css              */import"./index.f8566f81.js";import{a as ct}from"./pool.961328c5.js";import{k as z,g as at,c as tt}from"./index.df8ba82f.js";import{l as zt}from"./lodash.19dc6a9c.js";import{u as Q}from"./stats.67fa0feb.js";import{f as Bt}from"./formatter.455612ce.js";import"./index.199bdb95.js";import{i as Yt}from"./import-icon.de3e6c66.js";import{R as ut,A as Ft,P as Mt}from"./to-add.e9940ee9.js";import{u as et}from"./useToken.4cf43c79.js";import{T as dt,N as pt,H as mt,a as Et}from"./h5-table-card.d5576b6f.js";import{S as Jt}from"./select-tab.3762653f.js";import{u as Ot}from"./useStatsData.6c751e30.js";import"./install.752cf7e6.js";import"./decimal.0bdeb344.js";/* empty css              */import"./coin-img.2456cf91.js";import"./token-warning_2x.0214a736.js";import"./token.5486cb9e.js";import"./token-warning-new.4cb8d70d.js";import"./nuxt-link.afdb70e0.js";import"./icon_farms_2x.7ee2e854.js";import"./farms.f866c6a4.js";import"./icon_autopools_2x.5aca5689.js";import"./icon_autopools_2x.ab91c97b.js";import"./icon_fee_2x.58115c2b.js";import"./icon_rewards_2x.5e9bc2d7.js";import"./pool.9157e4da.js";import"./fetchFun.5e8b91d3.js";const jt={class:"stats-chart-container"},qt={class:"chart-top"},Gt={class:"trading-vol"},Kt={class:"title"},Qt={class:"text"},Xt=["innerHTML"],Zt={class:"time-list"},te=["onClick"],ee={key:0,class:"loading-box"},oe={class:"chart-content"},se=["id"];var Z=(t=>(t.D="day",t.W="wek",t.M="mon",t))(Z||{}),vt=(t=>(t[t.D=40]="D",t[t.W=30]="W",t[t.M=20]="M",t))(vt||{}),x=(t=>(t[t.Jan=1]="Jan",t[t.Feb=2]="Feb",t[t.Mar=3]="Mar",t[t.Apr=4]="Apr",t[t.May=5]="May",t[t.Jun=6]="Jun",t[t.Jul=7]="Jul",t[t.Aug=8]="Aug",t[t.Sep=9]="Sep",t[t.Oct=10]="Oct",t[t.Nov=11]="Nov",t[t.Dec=12]="Dec",t))(x||{}),_t=(t=>(t[t.D=1]="D",t[t.W=4]="W",t[t.M=12]="M",t))(_t||{}),ht=(t=>(t[t.D=1]="D",t[t.W=2]="W",t[t.M=4]="M",t))(ht||{});const ae=B({__name:"stats-sui-chart",props:{chartType:{type:String,default:"tvl"}},setup(t){const i=t,l=f("D"),T=["D","W","M"],h=f(""),k=f("24H"),m=ct();C(()=>m);const v=f(),s=f(),g=f(""),I=f(!1),A=Q(),a=C(()=>A),u=C(()=>a.value.overallStatistics);q(()=>[u.value,i.chartType,g.value],([r,S,V])=>{tt(r)||(g.value=S=="tvl"?r.totalValueLockedDisplay:r.volInUsd24h)},{immediate:!0});const d=async()=>{I.value=!0;try{const r=vt[l.value],{data:S}=i.chartType=="tvl"?await fetch(`${at.Sui.api}/v2/sui/histogram/all?date_type=${Z[l.value]}&typ=pure_tvl`).then(_=>_.json()):await fetch(`${at.Sui.api}/v2/sui/histogram/all?date_type=${Z[l.value]}&typ=vol`).then(_=>_.json());console.log("ðŸš€ ~ getHistogram ~ data:",S);const V=S.list.map(_=>_.num),$=S.list.map(_=>_.date);v.value=V,s.value=$,e(V,$,r),console.log("ðŸš€ðŸš€ðŸš€ ~ file: pool-list-chart.vue:70 ~ getHistogram ~ data:",S)}catch(r){console.info("ðŸš€ðŸš€ðŸš€ ~ file: pool-list-chart.vue:50 ~ getHistogram ~ error:",r)}},b=f(),e=(r,S,V)=>{const $=document.getElementById(`stats-chart-${i.chartType}`),_=At($);b.value=_;let R={tooltip:{trigger:"axis",position:function(P,F,U,W,O){return[P[0]-50,"10%"]},backgroundColor:"#28353F",borderColor:"transparent",formatter:function(P){H(P)},padding:0,axisPointer:{type:"line",lineStyle:{width:l.value=="D"?1:l.value=="W"?2:4,type:"solid",color:"#456D89"}}},xAxis:{type:"category",axisTick:{show:!1},axisLine:{show:!1},splitLine:{show:!1},splitArea:{show:!1},data:S.reverse(),inverse:!0,axisLabel:{interval:parseInt(Number(r.length)/6),formatter:(P,F)=>{const U=z(Date.parse(P)-288e5,"YMD")||"";let W,O=U.slice(5,7),X=x[Number(O)];return l.value=="M"?W=X:W=U.slice(8,10),`${W}`}}},yAxis:{show:!1,max:function(P){return P.max}},series:[{data:r.reverse(),inverse:!0,type:i.chartType=="tvl"?"line":"bar",symbol:"none",itemStyle:{normal:{barBorderRadius:1,color:"#72C1F7"}},areaStyle:{color:new Ht(0,0,0,1,[{offset:0,color:"rgba(0, 128, 255, 0.3)"},{offset:1,color:"rgba(0, 128, 255, 0)"}])},barWidth:o.value?_t[l.value]:ht[l.value]}],grid:{left:20,top:0,bottom:24,right:20}};I.value=!1,R&&_.setOption(R),_&&_.resize(),_.on("globalout",P=>{g.value=i.chartType=="tvl"?u.value.totalValueLockedDisplay:u.value.volInUsd24h,k.value="24H",N()})};q(()=>l.value,(r,S)=>{(!S||r!==S)&&d()},{immediate:!0});const o=f(!0),D=zt.debounce(()=>{document.body.clientWidth>750?o.value=!0:o.value=!1,!v.value&&!s.value?d():b.value&&b.value.resize()},300);J(()=>{window.addEventListener("resize",D),N()}),Pt(()=>{window.removeEventListener("resize",D)});const N=()=>{const r=z(Date.parse(new Date().toUTCString()),"YMD")||"";let S=r.slice(5,7),V=x[Number(S)];const $=r.slice(8,10),_=V,R=r.slice(0,4);h.value=_+"&nbsp;"+$+",&nbsp;"+R+"&nbsp;(UTC)"},H=r=>{g.value=Bt(r[0].value,2),k.value=l.value=="D"?"24H":l.value=="W"?"7D":"30D";const S=Date.parse(r[0].axisValue),V=new Date(S);V.setDate(V.getDate()+7);const $=new Date(S);$.setDate($.getDate()+31);const _=V.toUTCString(),R=$.toUTCString(),P=z(Date.parse(R),"YMD")||"",F=z(Date.parse(new Date().toUTCString()),"YMD")||"",U=Date.parse(_)>Date.parse(new Date().toUTCString())?z(Date.parse(new Date().toUTCString()),"YMD")||"":z(Date.parse(_),"YMD")||"";let W=F.slice(5,7),O=x[Number(W)];const X=F.slice(8,10),yt=O,Tt=F.slice(0,4);let ot=r[0].axisValue.slice(5,7),kt=x[Number(ot)];const st=r[0].axisValue.slice(8,10),j=kt,Dt=r[0].axisValue.slice(0,4);let $t=U.slice(5,7),wt=x[Number($t)];const Ct=U.slice(8,10),Lt=wt,It=U.slice(0,4),Vt=x[Number(ot)+1],Nt=P.slice(0,4);l.value=="D"?h.value=j+"&nbsp;"+st+",&nbsp;"+Dt+"&nbsp;(UTC)":l.value=="W"?h.value=st+"&nbsp;"+j+"-"+Ct+"&nbsp;"+Lt+"&nbsp;,&nbsp;"+It+"&nbsp;(UTC)":h.value=Date.parse(R)>=Date.parse(new Date().toUTCString())?j+"&nbsp;01-"+yt+"&nbsp;"+X+",&nbsp;"+Tt+"&nbsp;(UTC)":j+"&nbsp;01-"+Vt+"&nbsp;01,&nbsp;"+Nt+"&nbsp;(UTC)"};return(r,S)=>{const V=Rt;return p(),y("div",jt,[n("div",qt,[n("div",Gt,[n("div",Kt,w(t.chartType=="tvl"?"Total Value Locked":`Trading Volume  (${k.value})`),1),n("div",Qt," $"+w(g.value===""?"--":Number(g.value)==0?0:g.value),1),n("span",{innerHTML:h.value},null,8,Xt)]),n("div",Zt,[(p(),y(nt,null,lt(T,$=>n("div",{key:$,class:G(["time-item",$==l.value?"time-item-active":""]),onClick:_=>l.value=$},w($),11,te)),64))])]),I.value?(p(),y("div",ee,[c(V)])):M("",!0),n("div",oe,[n("div",{id:`stats-chart-${t.chartType}`,class:"stats-chart"},null,8,se)])])}}});const ft=Y(ae,[["__scopeId","data-v-fdf78ad4"]]),ne=B({setup(){const t=Q(),i=C(()=>t),l=C(()=>i.value.overallStatistics),T=C(()=>[{img_url:"/sui-image/icon_cumulativevolume@2x.png",label:"Cumulative Volume",symbol:"$",value:l.value.cumulativeVolumeDisplay},{img_url:"/sui-image/icon_totalvaluelocked@2x.png",label:"Total Value Locked",symbol:"$",value:l.value.totalValueLockedDisplay},{img_url:"/sui-image/icon_cumulativetransactions@2x.png",label:"Cumulative Transactions",symbol:"",value:l.value.cumulativeTransactionsDisplay},{img_url:"/sui-image/icon_accounts@2x.png",label:"Total Accounts",symbol:"",value:l.value.totalAccountsDisplay}]);return{checkNullObj:tt,overallStatistics:l,statisticsList:T}}});const le={class:"stats-sui-statistics"},re={class:"img-label"},ie=["src"],ce={class:"label"},ue={key:1,class:"value"};function de(t,i,l,T,h,k){const m=xt;return p(),y("div",le,[(p(!0),y(nt,null,lt(t.statisticsList,v=>(p(),y("div",{key:v.label,class:"item"},[n("div",re,[n("img",{src:v.img_url},null,8,ie),n("div",ce,w(v.label),1)]),("checkNullObj"in t?t.checkNullObj:Ut(tt))(t.overallStatistics)?(p(),E(m,{key:0,class:"upgrade-text-skeleton",active:"",paragraph:!1})):(p(),y("div",ue,w(v.symbol)+w(v.value),1))]))),128))])}const gt=Y(ne,[["render",de],["__scopeId","data-v-a6a15f4f"]]),pe=B({components:{RankIcon:ut,StatsAprTips:Ft,TableLoading:dt,StatsNoData:pt,H5TableCard:mt},setup(){const{getToken:t}=et(),i=Q(),l=C(()=>i),T=C(()=>l.value.poolsStatsList),h=f(!0),k=f(null);J(()=>{window.scroller=k.value});const m=f([]),v=C(()=>m.value.map(u=>Object.assign({},{random:Math.random()},u))),s=f({label:"Volume (24H)",sort:"desc"}),g=a=>{s.value=a,I(T.value)},I=async a=>{let u=[];for(let e=0;e<a.length;e++){const o=a[e],D=await t(a[e].displayTokenAAddress),N=await t(a[e].displayTokenBAddress),H=[];D!=null&&D.labels&&H.push(...D.labels),N!=null&&N.labels&&H.push(...N.labels);const r={...o,tokenA:D,tokenB:N,labels:[...new Set(H)]};u.push(r)}let d=u,b=[];s.value.label=="Volume (24H)"&&(b=s.value.sort=="desc"?d.sort((e,o)=>o.volume24-e.volume24):d.sort((e,o)=>e.volume24-o.volume24)),s.value.label=="Volume (7D)"&&(b=s.value.sort=="desc"?d.sort((e,o)=>o.volume7d-e.volume7d):d.sort((e,o)=>e.volume7d-o.volume7d)),s.value.label=="Liquidity"&&(b=s.value.sort=="desc"?d.sort((e,o)=>o.tvl-e.tvl):d.sort((e,o)=>e.tvl-o.tvl)),s.value.label=="Fees (24H)"&&(b=s.value.sort=="desc"?d.sort((e,o)=>o.fees24-e.fees24):d.sort((e,o)=>e.fees24-o.fees24)),s.value.label=="APR (24H)"&&(b=s.value.sort=="desc"?d.sort((e,o)=>o.totalApr-e.totalApr):d.sort((e,o)=>e.totalApr-o.totalApr)),m.value=b,console.log("ðŸš€ ~ buildPoolList ~ pageList:",m.value,b),h.value=!1};return q(()=>T.value,a=>{a&&a.length>0&&I(a)},{immediate:!0}),{pageList:m,tableColumns:[{title:"Pools",hasSort:!1,tdWidth:"330px",isNotShowTitle:!0,component:"pool-name-block"},{title:"Liquidity",hasSort:!0,tdWidth:"200px",value:"tvlDisplay"},{title:"Volume (24H)",hasSort:!0,tdWidth:"200px",value:"volume24Display"},{title:"Volume (7D)",hasSort:!0,tdWidth:"200px",value:"volume7dDisplay"},{title:"Fees (24H)",hasSort:!0,tdWidth:"175px",value:"fees24Display"},{title:"APR (24H)",hasSort:!0,toolTip:"Estimated according to trading activity in the past 24 hours",tdWidth:"175px",component:"apr-tips"}],scroller:k,list:v,isPoolLoading:h,sortInfo:s,changeSort:g}}});const me=t=>(rt("data-v-041d8f3a"),t=t(),it(),t),ve={class:"stats-sui-pools-table"},_e={class:"h5-table"},he={class:"pc-table"},fe={key:1,class:"virtual-table"},ge=me(()=>n("th",null,"Pool",-1));function be(t,i,l,T,h,k){const m=L("H5TableCard"),v=L("TableLoading"),s=L("RankIcon"),g=Mt,I=L("StatsAprTips"),A=L("RecycleScroller"),a=L("StatsNoData");return p(),y("div",ve,[n("div",_e,[c(m,{"h5-title":"Pools","key-field":"poolAddress","sort-info":t.sortInfo,"item-size":258,"data-source-length":10,loading:t.isPoolLoading,columns:t.tableColumns,"data-source":t.pageList,onChangeSort:t.changeSort},null,8,["sort-info","loading","columns","data-source","onChangeSort"])]),n("div",he,[t.isPoolLoading?(p(),E(v,{key:0,columns:t.tableColumns,"data-source-length":10},null,8,["columns"])):(p(),y("table",fe,[c(A,{ref:"scroller",class:G(t.list.length==0?"scroller-no-data scroller":"scroller"),items:t.list,"item-size":86,"key-field":"poolAddress",prerender:20,buffer:200},{before:K(()=>[n("thead",null,[ge,c(s,{label:"Liquidity","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"]),c(s,{label:"Volume (24H)","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"]),c(s,{label:"Volume (7D)","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"]),c(s,{label:"Fees (24H)","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"]),c(s,{label:"APR (24H)","tool-tip":"Estimated according to trading activity in the past 24 hours","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"])])]),default:K(({item:u})=>[(p(),y("tr",{key:u==null?void 0:u.poolAddress},[n("td",null,[c(g,{"pool-info":u},null,8,["pool-info"])]),n("td",null,w(u.tvlDisplay||"--"),1),n("td",null,w(u.volume24Display||"--"),1),n("td",null,w(u.volume7dDisplay||"--"),1),n("td",null,w(u.fees24Display||"--"),1),n("td",null,[c(I,{"pool-info":u},null,8,["pool-info"])])]))]),_:1},8,["class","items"])]))]),!t.isPoolLoading&&t.pageList&&t.pageList.length==0?(p(),E(a,{key:0,url:"/sui-image/img-no-Positions@2x.png",text:"No pools found"})):M("",!0)])}const bt=Y(pe,[["render",be],["__scopeId","data-v-041d8f3a"]]),Se=B({components:{TokenBlock:Et,RankIcon:ut,TableLoading:dt,NoDataStats:pt,H5TableCard:mt},setup(){const{getToken:t}=et(),i=Q(),l=C(()=>i),T=C(()=>l.value.tokensStatsList),h=f(!0),k=f(null);J(()=>{window.scroller=k.value});const m=f([]),v=C(()=>m.value.map(u=>Object.assign({},{random:Math.random()},u))),s=f({label:"Volume (24H)",sort:"desc"}),g=a=>{s.value=a,I(T.value)},I=async a=>{let u=[];for(let e=0;e<a.length;e++){const o=a[e],D=await t(o==null?void 0:o.address),N=[];D!=null&&D.labels&&N.push(...D.labels);const H={...o,logoURI:D==null?void 0:D.logo_url,labels:[...new Set(N)]};u.push(H)}let d=u,b=[];s.value.label=="Price"&&(b=s.value.sort=="desc"?d.sort((e,o)=>o.price-e.price):d.sort((e,o)=>e.price-o.price)),s.value.label=="Price Change"&&(b=s.value.sort=="desc"?d.sort((e,o)=>o.priceChange-e.priceChange):d.sort((e,o)=>e.priceChange-o.priceChange)),s.value.label=="Volume (24H)"&&(b=s.value.sort=="desc"?d.sort((e,o)=>o.volume24-e.volume24):d.sort((e,o)=>e.volume24-o.volume24)),s.value.label=="TVL"&&(b=s.value.sort=="desc"?d.sort((e,o)=>o.tvl-e.tvl):d.sort((e,o)=>e.tvl-o.tvl)),m.value=b,h.value=!1};return q(()=>T.value,a=>{a&&a.length>0&&I(a)},{immediate:!0}),{pageList:m,tableColumns:[{title:"Token",hasSort:!1,tdWidth:"370px",isNotShowTitle:!0,component:"token-block"},{title:"Price",hasSort:!0,tdWidth:"240px",value:"priceDisplay"},{title:"Price Change",hasSort:!0,tdWidth:"215px",value:"priceChangeDisplay"},{title:"Volume (24H)",hasSort:!0,tdWidth:"240px",value:"volume24Display"},{title:"TVL",hasSort:!0,tdWidth:"215px",value:"tvlDisplay"}],scroller:k,list:v,isTokenLoading:h,sortInfo:s,changeSort:g}}});const ye=t=>(rt("data-v-bdfb7b6d"),t=t(),it(),t),Te={class:"aptos-stats-sui-tokens-table"},ke={class:"h5-table"},De={class:"pc-table"},$e={key:1,class:"virtual-table"},we=ye(()=>n("th",null,"Token",-1));function Ce(t,i,l,T,h,k){const m=L("H5TableCard"),v=L("TableLoading"),s=L("RankIcon"),g=L("TokenBlock"),I=L("RecycleScroller"),A=L("NoDataStats");return p(),y("div",Te,[n("div",ke,[c(m,{"h5-title":"Tokens","key-field":"address","sort-info":t.sortInfo,"item-size":218,"data-source-length":10,loading:t.isTokenLoading,columns:t.tableColumns,"data-source":t.pageList,onChangeSort:t.changeSort},null,8,["sort-info","loading","columns","data-source","onChangeSort"])]),n("div",De,[t.isTokenLoading?(p(),E(v,{key:0,columns:t.tableColumns,"data-source-length":10},null,8,["columns"])):(p(),y("table",$e,[c(I,{ref:"scroller",class:G(t.list.length==0?"scroller-no-data scroller":"scroller"),items:t.list,"item-size":86,"key-field":"address",prerender:20,buffer:200},{before:K(()=>[n("thead",null,[we,c(s,{label:"Price","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"]),c(s,{label:"Price Change","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"]),c(s,{label:"Volume (24H)","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"]),c(s,{label:"TVL","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"])])]),default:K(({item:a})=>[(p(),y("tr",{key:a==null?void 0:a.address},[n("td",null,[c(g,{"token-info":a,"justify-content":"flex-start","is-have-label":!0},null,8,["token-info"])]),n("td",null,"$"+w(a.priceDisplay||"--"),1),n("td",null,[n("span",{class:G(a.priceChangeDisplay.includes("-")?"redecue-change-price":"add-change-price")},w(a.priceChangeDisplay||"--"),3)]),n("td",null,w(a.volume24Display||"--"),1),n("td",null,w(a.tvlDisplay||"--"),1)]))]),_:1},8,["class","items"])]))]),!t.isTokenLoading&&t.pageList&&t.pageList.length==0?(p(),E(A,{key:0,url:"/sui-image/img-no-Positions@2x.png",text:"No tokens found"})):M("",!0)])}const St=Y(Se,[["render",Ce],["__scopeId","data-v-bdfb7b6d"]]),Le=B({components:{StatsTab:Jt,StatsPoolsTable:bt,StatsTokensTable:St},setup(){const{getTokenList:t}=et(),i=[{name:"Pools",logo:"/sui-image/icon_pools@2x.png"},{name:"Tokens",logo:"/sui-image/icon_tokens@2x.png"}],l=f("Pools");return J(()=>{t()}),{currentTab:l,tabList:i}}});const Ie={class:"pools-tokens-transitions"},Ve={class:"tab-box"},Ne={key:0,class:"table-box"},Pe={key:1,class:"table-box"};function Ae(t,i,l,T,h,k){const m=L("StatsTab"),v=bt,s=St;return p(),y("div",Ie,[n("div",Ve,[c(m,{"tab-list":t.tabList,"current-tab":t.currentTab,onOnClick:i[0]||(i[0]=g=>{t.currentTab=g.name})},null,8,["tab-list","current-tab"])]),t.currentTab=="Pools"?(p(),y("div",Ne,[c(v)])):M("",!0),t.currentTab=="Tokens"?(p(),y("div",Pe,[c(s)])):M("",!0)])}const He=Y(Le,[["render",Ae],["__scopeId","data-v-3e8025c9"]]),Re=B({components:{StatsSuiChart:ft,StatsSuiStatistics:gt,PoolsTokensTransitions:He},setup(){const t=ct(),i=C(()=>t),l=Wt(),T=C(()=>i.value.chainName),{getStatusData:h}=Ot();J(async()=>{h()});const k=C(()=>i.value.theme);return{chainName:T,theme:k,store:i,importIcon:Yt,router:l}}});const Ue={class:"stats-sui-container"},xe={class:"title"},We={class:"chart-box"};function ze(t,i,l,T,h,k){const m=ft,v=gt,s=L("PoolsTokensTransitions");return p(),y("div",Ue,[n("div",xe,w(t.$t("menu.stats")),1),n("div",We,[c(m,{"chart-type":"tvl"}),c(m,{"chart-type":"vol"})]),c(v),c(s)])}const bo=Y(Re,[["render",ze],["__scopeId","data-v-03e3c28a"]]);export{bo as default};
