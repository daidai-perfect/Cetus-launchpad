import{_ as qe}from"./upgrade-select-input.6e5d733b.js";import{_ as Me}from"./upgrade-loading.4ad93756.js";import{_ as Ve}from"./upgrade-position-item.f3548500.js";import{a as ae,q as Ce,o as n,f as d,F as Q,s as X,x as j,h as s,t as we,v as $,u as D,e as le,r as g,m as S,c as I,w as K,i as B,j as ee,Y as Ae,B as he,p as re,k as de,D as H,z as ye,K as be,W as We,I as xe,L as He,H as ze,S as Ke,l as Ze,b as Je,y as Qe,C as Xe,N as Ie,T as es,M as ss}from"./entry.dc8b6a1f.js";import{a as Re,c as ts,b as os,u as ge}from"./pool.96df1dae.js";import{u as as}from"./notifi.8d480392.js";import{B as G,u as Pe,b as Se,g as ls,c as ns}from"./index.23703e15.js";import{i as $e}from"./import-icon.de3e6c66.js";import"./index.6a8d3b0e.js";/* empty css              *//* empty css              *//* empty css              */import{_ as De}from"./icon-selected_3x.09e9a6f0.js";import{_ as is}from"./coin-pair-name.887a89d7.js";import{D as k}from"./decimal.0bdeb344.js";import{_ as us}from"./no-data.0102c818.js";import{_ as Te}from"./icon_on_2x.5e96733d.js";import{_ as rs}from"./img-no-Positions_2x.f74a8d04.js";import{_ as ds}from"./img-no-Positions_2x.a3bd6c54.js";import{_ as cs}from"./img-connect-wallet_2x.658e29f3.js";import{_ as vs}from"./img-connect-wallet_2x.2cdb6cf5.js";import"./coin-select.82684a26.js";/* empty css              */import"./token-warning_2x.fa99ac5a.js";/* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";import"./status-block.cca232f8.js";import"./farms-valid-range.e480ad79.js";import"./farms.4d37bf43.js";import"./icon_farms_2x.c77387c0.js";import"./icon_rewards_2x.5649c440.js";import"./icon-arrow_2x.948aedb2.js";import"./icon-arrow_2x.4ffddb8e.js";import"./farms.23b41377.js";import"./useWhale.4e1d2461.js";import"./token-warning.dba8d269.js";const ms=""+globalThis.__publicAssetsURL("sui-image/route-view.png"),_s={key:0,class:"claim-list"},ps={class:"left"},fs={alt:""},hs={class:"right"},gs=ae({__name:"claim-list",props:{myClaimList:{type:Object,default:()=>[]}},setup(e){return(h,L)=>{const U=Ce("image");return e.myClaimList&&e.myClaimList.length>0?(n(),d("div",_s,[(n(!0),d(Q,null,X(e.myClaimList,m=>(n(),d("div",{key:m,class:"claim-item"},[s("div",ps,[we(s("img",fs,null,512),[[U,m.logo_url]]),s("span",null,$(m.symbol),1)]),s("div",hs,[s("span",null,$(D(G)(m.amount,m.decimals,!0,!1,!1)),1),s("span",null,$(D(G)(m.amountUSD,2,!1,!1)),1)])]))),128))])):j("",!0)}}});const Oe=le(gs,[["__scopeId","data-v-c3e2798b"]]),oe=g(!1),ue=g(!1),Ye=Re(),{setIsShowSuccess:ws,setIsShowRejected:Le,setIsShowWaiting:pe,setTransactionDesc:ys,setTransactionTxid:Ue}=Ye,bs=ts("Sui"),fe=os("Sui"),Ss=Pe(),Ne=S(()=>Ss),je=ge(),ks=S(()=>je),$s=S(()=>Ye),Ls=async e=>{ue.value=!0;try{const h=[],L=[];e.forEach(v=>{const F=v.rewarderInfo.filter(b=>b.emissionsEveryDay>0).map(b=>b.coinAddress);v.positionSource=="clmm"?h.push({pool_id:v.pool,pos_id:v.pos_object_id,collect_fee:!0,rewarder_coin_types:F,coinTypeA:v.coin_type_a,coinTypeB:v.coin_type_b}):L.push({pool_id:v.pool_id,position_nft_id:v.id,clmm_pool_id:v.clmm_pool_id,collect_fee:!0,collect_frams_rewarder:!1,clmm_rewarder_types:F,coinTypeA:v.coinTypeA,coinTypeB:v.coinTypeB})}),Ue(""),ys("Claim Yield"),pe(!0);const U=await bs.batchHarvestAndClmmFee(L,h),m=await fe.signAndExecuteTransactionBlock(Ne.value.currentWallet,U.txb,U.payloadParams),O=fe.handleTx(m);if(O&&O.hash){Ue(O.hash),pe(!1),ws(!0);const v={title:"Claim",desc:"Claim Yield",hash:O.hash};v.res=O.res,fe.showTransitionPending(v),await fe.watchTransaction(v)&&setTimeout(()=>{je.getMyPositons(Ne.value.address,ks.value.poolsObj,$s.value.chainName)},1e3)}else pe(!1),Le(!0);ue.value=!1,oe.value=!1}catch(h){ue.value=!1,pe(!1),Le(!0),oe.value=!1,console.log("batchHarvestAndClmmFee error:",h)}},ke=e=>(re("data-v-8e7a4ef5"),e=e(),de(),e),Us={class:"claim-yield-content"},Ns={class:"total-claim"},Cs=ke(()=>s("div",null,"Total Claim",-1)),As={class:"total-claim-usd"},Rs=ke(()=>s("svg",{"aria-hidden":"true",class:"back-icon"},[s("use",{"xlink:href":"#icon-icon-back"})],-1)),Ps=ke(()=>s("span",null,"Back",-1)),Ds=[Rs,Ps],Ts=ae({__name:"claim-yield",props:{pendingYield:{type:Number,default:0},myClaimList:{type:Object,default:()=>[]},myClaimPositionList:{type:Object,default:()=>[]}},setup(e){return(h,L)=>{const U=he;return n(),I(D(Ae),{title:"Claim Yield",visible:!0,footer:null,width:"440px",onCancel:L[2]||(L[2]=m=>h.$emit("close"))},{default:K(()=>[s("div",Us,[s("div",Ns,[Cs,s("div",As,$(e.pendingYield>0&&e.pendingYield<.01?"<$0.01":`$${D(Se)(e.pendingYield,2)}`),1)]),B(Oe,{"my-claim-list":e.myClaimList},null,8,["my-claim-list"]),s("div",{class:"choose-amount",onClick:L[0]||(L[0]=m=>h.$emit("chooseAmount"))},Ds),B(U,{class:"confirm-btn",loading:D(ue),onClick:L[1]||(L[1]=m=>D(Ls)(e.myClaimPositionList))},{default:K(()=>[ee("Confirm")]),_:1},8,["loading"])])]),_:1})}}});const Os=le(Ts,[["__scopeId","data-v-8e7a4ef5"]]),Ee=e=>(re("data-v-4237fa3c"),e=e(),de(),e),Ys={class:"fees-and-reward"},js={key:0,class:"fees"},Es={class:"fees-title"},Bs=Ee(()=>s("div",null,"Fees",-1)),Fs={alt:""},Gs={class:"symbol"},qs={class:"amount"},Ms={class:"amount-usd"},Vs={key:1,class:"fees"},Ws={class:"fees-title"},xs=Ee(()=>s("div",null,"Mining rewards",-1)),Hs={alt:""},zs={class:"symbol"},Ks={class:"amount"},Zs={class:"amount-usd"},Js=ae({__name:"fees-and-reward",props:{pendingRewarderList:{type:Object,default:()=>[]},pendingFeesList:{type:Object,default:()=>[]},rewarderUsd:{type:String,default:""},feeOwedUsd:{type:String,default:""}},setup(e){return(h,L)=>{const U=Ce("image");return n(),d("div",Ys,[e.feeOwedUsd&&e.feeOwedUsd>0?(n(),d("div",js,[s("div",Es,[Bs,s("div",null,$(D(G)(e.feeOwedUsd,2,!1,!1)),1)]),(n(!0),d(Q,null,X(e.pendingFeesList,m=>(n(),d("div",{key:m,class:"fees-details"},[s("div",null,[we(s("img",Fs,null,512),[[U,m.logo_url]]),s("span",Gs,$(m.symbol),1)]),s("div",null,[s("span",qs,$(D(G)(m.amount,m.decimals,!0,!1,!1)),1),s("span",Ms,"("+$(D(G)(m.amountUSD,2,!1,!1))+")",1)])]))),128))])):j("",!0),e.rewarderUsd&&e.rewarderUsd>0?(n(),d("div",Vs,[s("div",Ws,[xs,s("div",null,$(D(G)(e.rewarderUsd,2,!1,!1)),1)]),(n(!0),d(Q,null,X(e.pendingRewarderList,m=>(n(),d("div",{key:m,class:"fees-details"},[s("div",null,[we(s("img",Hs,null,512),[[U,m.logo_url]]),s("span",zs,$(m.symbol),1)]),s("div",null,[s("span",Ks,$(D(G)(m.amount,m.decimals,!0,!1,!1)),1),s("span",Zs,"("+$(D(G)(m.amountUSD,2,!1,!1))+")",1)])]))),128))])):j("",!0)])}}});const Qs=le(Js,[["__scopeId","data-v-4237fa3c"]]),ce=e=>(re("data-v-5c834a7c"),e=e(),de(),e),Xs={class:"yield-details-box"},Is={class:"yield-details"},et={class:"total-claim"},st=ce(()=>s("div",null,"Pending Yield",-1)),tt={class:"total-claim-usd"},ot={class:"position-detail"},at={class:"position-detail-top"},lt=ce(()=>s("div",{class:"left"},"Position",-1)),nt={class:"right"},it=ce(()=>s("span",null,"Hide yield < ",-1)),ut={class:"position-detail-bottom"},rt={class:"left"},dt={class:"top"},ct=["onClick"],vt={key:0,src:De},mt={class:"bottom"},_t={class:"right"},pt={key:0,class:"yield-amount"},ft={key:1,class:"yield-amount-zero"},ht={class:"select"},gt={class:"all"},wt=ce(()=>s("span",null,"Select all",-1)),yt={class:"amount-selected"},bt=ce(()=>s("div",null,"Amount selected",-1)),St=ae({__name:"yield-details",props:{positionShowList:{type:Object,default:()=>[]},isShowYiedlDetails:{type:Boolean,default:!1}},emits:["showClaimYiedl"],setup(e,{emit:h}){const L=g(!0),U=g(!0),m=h,O=e,v=g(.01),F=g(),b=g([]),E=ge(),_=S(()=>E),w=S(()=>_.value.rewarderObj),R=S(()=>_.value.feeOwedObj),N=g([]),P=g("all"),V=g([]),W=u=>{const i=[];N.value=[];let a=new k(0);const l=[];u.forEach(f=>{var M,o,t,c,C,Y;const y=((M=w.value[f.tokenName])==null?void 0:M.pendingRewarder)||0,r=((o=R.value[f.tokenName])==null?void 0:o.feeOwed)||0,T=new k(isNaN(y)?0:y).add(new k(isNaN(r)?0:r)).toString();a=a.add(new k(isNaN(y)?0:y)).add(new k(isNaN(r)?0:r)),Number(T)>0&&l.push(f),L.value&&Number(T)>Number(v.value)&&i.push({...f,totalRewardUsd:T,pendingRewarderList:(t=w.value[f.tokenName])==null?void 0:t.pendingRewarderArr,pendingFeesList:(c=R.value[f.tokenName])==null?void 0:c.feesResult,rewarderUsd:y,feeOwedUsd:r}),L.value||i.push({...f,totalRewardUsd:T,pendingRewarderList:(C=w.value[f.tokenName])==null?void 0:C.pendingRewarderArr,pendingFeesList:(Y=R.value[f.tokenName])==null?void 0:Y.feesResult,rewarderUsd:y,feeOwedUsd:r})}),V.value=l,i.forEach(f=>{f.totalRewardUsd>0&&N.value.push(f.tokenName)}),L.value?N.value.length!==i.length?P.value="":P.value="all":N.value.length!==l.length?P.value="":P.value="all",U.value=!1,F.value=a,b.value=i.sort((f,y)=>y.totalRewardUsd-f.totalRewardUsd)},ne=S(()=>_.value.getPendingFeeSuccess),Z=S(()=>_.value.getRewardSuccess);H(()=>[O.positionShowList,v.value,ne.value,Z.value,L.value],([u,i,a,l])=>{u&&u.length>0&&a&&l&&W(u)},{immediate:!0});const se=u=>{const i=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,4})?).*$");u.target.value=u.target.value.replace(i,"$1"),v.value=u.target.value},ie=()=>{(!v.value||v.value<.01)&&(v.value=.01)},z=u=>{const i=u.tokenName,a=N.value.indexOf(i);a>-1?N.value.splice(a,1):N.value.push(i),L.value?N.value.length!==b.value.length?P.value="":P.value="all":N.value.length!==V.value.length?P.value="":P.value="all"},J=()=>{P.value="all",b.value.forEach(u=>{!N.value.includes(u.tokenName)&&u.totalRewardUsd>0&&N.value.push(u.tokenName)})},A=S(()=>{let u=new k(0);return P.value=="all"?b.value.forEach(i=>{var f,y;const a=((f=w.value[i.tokenName])==null?void 0:f.pendingRewarder)||0,l=((y=R.value[i.tokenName])==null?void 0:y.feeOwed)||0;u=u.add(new k(isNaN(a)?0:a)).add(new k(isNaN(l)?0:l))}):N.value.forEach(i=>{var f,y;const a=((f=w.value[i])==null?void 0:f.pendingRewarder)||0,l=((y=R.value[i])==null?void 0:y.feeOwed)||0;u=u.add(new k(isNaN(a)?0:a)).add(new k(isNaN(l)?0:l))}),u.toString()}),p=()=>{const u=[];b.value.forEach(i=>{N.value.includes(i.tokenName)&&u.push(i)}),m("showClaimYiedl",u)};return(u,i)=>{const a=We,l=xe,f=He,y=he;return n(),I(D(Ae),{title:"Details",footer:null,visible:e.isShowYiedlDetails,width:"440px","wrap-class-name":"details-modal",onCancel:i[2]||(i[2]=r=>u.$emit("close"))},{default:K(()=>[s("div",Xs,[s("div",Is,[s("div",et,[st,s("div",tt,[s("span",null,$(D(G)(F.value,2,!1,!1)),1)])]),s("div",ot,[s("div",at,[lt,s("div",nt,[B(a,{class:"range-alerts-switch",checked:L.value,onClick:i[0]||(i[0]=()=>{L.value=!L.value,U.value=!1})},null,8,["checked"]),it,B(l,{value:`$${v.value}`,onChange:se,onBlur:ie},null,8,["value"])])]),s("div",ut,[b.value&&b.value.length>0?(n(!0),d(Q,{key:0},X(b.value,r=>(n(),d("div",{key:r,class:"position-item"},[s("div",rt,[s("div",dt,[s("div",{class:ye(["radio",r.totalRewardUsd<=0?"radio-disable":""]),onClick:T=>r.totalRewardUsd>0?z(r):""},[(P.value=="all"||N.value.includes(r.tokenName))&&r.totalRewardUsd>0?(n(),d("img",vt)):j("",!0)],10,ct),B(is,{"from-coin":r.needReverse?r.token_b:r.token_a,"to-coin":r.needReverse?r.token_a:r.token_b,"fee-tier":r.fee*1e3},null,8,["from-coin","to-coin","fee-tier"])]),s("div",mt,$(r.tokenName),1)]),s("div",_t,[r.totalRewardUsd>0?(n(),d("div",pt,[B(f,{placement:"bottomRight","overlay-class-name":"yield-amount-tooltip"},{title:K(()=>[B(Qs,{"pending-fees-list":r.pendingFeesList,"pending-rewarder-list":r.pendingRewarderList,"rewarder-usd":r.rewarderUsd,"fee-owed-usd":r.feeOwedUsd},null,8,["pending-fees-list","pending-rewarder-list","rewarder-usd","fee-owed-usd"])]),default:K(()=>[ee($(D(G)(r.totalRewardUsd,2,!1,!1))+" ",1)]),_:2},1024)])):(n(),d("div",ft,$(D(G)(r.totalRewardUsd,2,!1,!1)),1))])]))),128)):(n(),I(us,{key:1,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No Position Found"}))])])]),s("div",ht,[s("div",gt,[s("div",{class:"radio",onClick:J},[P.value=="all"?(n(),d("img",{key:0,src:De,onClick:i[1]||(i[1]=be(()=>{N.value=[],P.value=""},["stop"]))})):j("",!0)]),wt]),s("div",yt,[bt,s("div",null,$(D(G)(A.value,2,!1,!1)),1)])]),B(y,{class:"claim-yield-btn",disabled:A.value=="0",onClick:p},{default:K(()=>[ee("Claim Yield")]),_:1},8,["disabled"])])]),_:1},8,["visible"])}}});const kt=le(St,[["__scopeId","data-v-5c834a7c"]]),Be=e=>(re("data-v-826d7f95"),e=e(),de(),e),$t={class:"total-info"},Lt={class:"total-liquidity"},Ut=Be(()=>s("span",null,"Total Liquidity",-1)),Nt={key:0,class:"skeleton-box"},Ct={key:1,class:"total-liquidity-usd"},At={class:"pending-yield"},Rt=Be(()=>s("div",null,"Pending Yield",-1)),Pt={key:0,class:"skeleton-box"},Dt={key:1},Tt={key:0,class:"claim-list-box"},Ot={class:"claim-list-content"},Yt=ae({__name:"total-position",setup(e){const h=g(!1),L=ge(),U=S(()=>L),m=S(()=>U.value.rewarderObj),O=S(()=>U.value.feeOwedObj),v=S(()=>U.value.positionShowList),F=S(()=>U.value.myPositionsLoading),b=S(()=>U.value.getPendingFeeSuccess),E=S(()=>U.value.getRewardSuccess),_=g(0),w=g(0),R=g(!0),N=g([]),P=g([]),V=g([]),W=A=>{let p=new k(0);const u=[];A.forEach(i=>{p=p.add(new k(isNaN(i.amountUSD)?0:i.amountUSD)),u.push(i.tokenName)}),N.value=u,_.value=p.toNumber()},ne=(A,p)=>{let u=new k(0);const i=[];N.value.forEach(l=>{var r,T,M,o;const f=((r=A[l])==null?void 0:r.pendingRewarder)||0,y=((T=p[l])==null?void 0:T.feeOwed)||0;u=u.add(new k(isNaN(f)?0:f)).add(new k(isNaN(y)?0:y)),(M=A[l])!=null&&M.pendingRewarderArr&&i.push(...A[l].pendingRewarderArr),(o=p[l])!=null&&o.feesResult&&i.push(...p[l].feesResult)});const a={};i.forEach(l=>{a[l.address]?a[l.address]={...l,amountUSD:new k(a[l.address].amountUSD).add(isNaN(l.amountUSD)?0:l.amountUSD).toString(),amount:new k(a[l.address].amount).add(isNaN(l.amountUSD)?0:l.amountUSD).toString()}:(a[l.address]={},a[l.address]={...l,amountUSD:new k(0).add(isNaN(l.amountUSD)?0:l.amountUSD).toString(),amount:new k(0).add(l.amount).toString()})}),V.value=Object.values(a).filter(l=>l.amount>0).sort((l,f)=>f.amountUSD-l.amountUSD),w.value=u.toNumber(),R.value=!1};H(()=>v.value,A=>{A&&A.length>0?W(A):W([])},{immediate:!0}),H(()=>[b.value,E.value,N.value,m.value,O.value],([A,p,u,i,a])=>{A&&p?ne(i,a):R.value=!0},{immediate:!0,deep:!0});const Z=g(),se=g(),ie=A=>{h.value=!1,oe.value=!0;let p=new k(0);const u=[],i={};A.forEach(a=>{var r,T,M,o;const l=a.tokenName,f=((r=m.value[l])==null?void 0:r.pendingRewarder)||0,y=((T=O.value[l])==null?void 0:T.feeOwed)||0;p=p.add(new k(f)).add(new k(y)),(M=m.value[l])!=null&&M.pendingRewarderArr&&u.push(...m.value[l].pendingRewarderArr),(o=O.value[l])!=null&&o.feesResult&&u.push(...O.value[l].feesResult)}),u.forEach(a=>{i[a.address]?i[a.address]={...a,amountUSD:new k(i[a.address].amountUSD).add(isNaN(a.amountUSD)?0:a.amountUSD).toString(),amount:new k(i[a.address].amount).add(isNaN(a.amountUSD)?0:a.amountUSD).toString()}:(i[a.address]={},i[a.address]={...a,amountUSD:new k(0).add(isNaN(a.amountUSD)?0:a.amountUSD).toString(),amount:new k(0).add(a.amount).toString()})}),Z.value=p.toNumber(),P.value=Object.values(i).filter(a=>a.amount>0).sort((a,l)=>l.amountUSD-a.amountUSD),se.value=A},z=g(1),J=()=>{w.value>0&&(h.value=!0,z.value=z.value==1?2:1)};return(A,p)=>{const u=Ke,i=he;return n(),d("div",$t,[s("div",Lt,[Ut,!_.value&&F.value?(n(),d("div",Nt,[B(u,{class:"upgrade-text-skeleton",active:"",paragraph:!1})])):(n(),d("span",Ct,$(_.value>0&&_.value<.01?"<$0.01":`$${D(Se)(_.value,2)}`),1))]),s("div",At,[Rt,R.value?(n(),d("div",Pt,[B(u,{class:"upgrade-text-skeleton",active:"",paragraph:!1})])):(n(),d("div",Dt,[s("span",{class:"pending-yield-usd",style:ze(w.value<=0?{border:"none"}:{}),onClick:J},[ee($(w.value>0&&w.value<.01?"<$0.01":`$${D(Se)(w.value,2)}`)+" ",1),w.value>0?(n(),d("div",Tt,[s("div",Ot,[B(Oe,{"my-claim-list":V.value},null,8,["my-claim-list"])])])):j("",!0)],4),w.value>0?(n(),d("img",{key:0,src:ms,alt:"",onClick:J})):j("",!0),B(i,{class:"claim-all-btn",disabled:w.value<=0,loading:D(ue),onClick:J},{default:K(()=>[ee("Claim All")]),_:1},8,["disabled","loading"])]))]),D(oe)?(n(),I(Os,{key:0,"pending-yield":Z.value,"my-claim-list":P.value,"my-claim-position-list":se.value,onClose:p[0]||(p[0]=a=>oe.value=!1),onChooseAmount:p[1]||(p[1]=()=>{oe.value=!1,h.value=!0})},null,8,["pending-yield","my-claim-list","my-claim-position-list"])):j("",!0),(n(),I(kt,{key:z.value,"position-show-list":v.value,"is-show-yiedl-details":h.value,onClose:p[2]||(p[2]=()=>{h.value=!1}),onShowClaimYiedl:ie},null,8,["position-show-list","is-show-yiedl-details"]))])}}});const jt=le(Yt,[["__scopeId","data-v-826d7f95"]]),Et=ae({components:{TotalPosition:jt},setup(){const e=g(!1),{t:h}=Ze(),L=g(["position"]),U=Je(),m=g(""),O=Re(),v=S(()=>O),F=S(()=>v.value.chainName?ls[v.value.chainName]:{});let b=g([]);const E=ge(),_=S(()=>E),w=Pe(),R=S(()=>w),N=g(!1),P=g(h("tab.all")),V=g([h("tab.layerZero"),h("tab.wormhole"),h("tab.celer")]),W=g(!0),ne=g("TVL"),Z=()=>{e.value=!0,b.value=[],R.value.address&&(E.setPools(u.value.poolConfigList,v.value.chainName),E.getMyPositons(R.value.address,_.value.poolsObj,v.value.chainName)),setTimeout(()=>{e.value=!1},1e3)},se=S(()=>{const o=Array.from(new Set(_.value.poolConfigList.flatMap(t=>!(t!=null&&t.category)||(t==null?void 0:t.category)==""?"All":t==null?void 0:t.category)));return console.log(o,"newArr"),o.length<=1?[]:o}),ie=o=>{_.value.setCurrentPoolTab(o)};H(()=>v.value.isRefresh,o=>{var t,c,C,Y;o&&((Y=(C=(c=(t=U==null?void 0:U.currentRoute)==null?void 0:t.value)==null?void 0:c.name)==null?void 0:C.split("-"))==null?void 0:Y[1])=="position"&&Z()}),Qe(()=>{b.value=[],document.addEventListener("click",()=>{N.value=!1}),E.setMyPositionsLoading(!0)}),Xe(()=>{document.addEventListener("click",()=>{N.value=!1})}),Ie(()=>{R.value.connected||(b.value=[])});const z=()=>{e.value=!0;let o=[];_.value.myPositions.forEach(t=>{var te,ve,me,_e;v.value.addressLpTokens[t.address];let c=t.positionSource=="farming",C,Y;const q=t.amountA*((te=_.value.RATES[t.token_a.address])==null?void 0:te.price),x=t.amountB*((ve=_.value.RATES[t.token_b.address])==null?void 0:ve.price);(me=_.value.RATES[t.token_a.address])!=null&&me.price&&((_e=_.value.RATES[t.token_b.address])!=null&&_e.price)?(C=q+x,Y=q+x):(C=" --",Y=0),console.log(_.value.currentPoolTab,"##pools.value.currentPoolTab"),(_.value.currentPoolTab=="All"||_.value.currentPoolTab!=="All"&&t.category==_.value.currentPoolTab)&&o.push({...t,amountUSD:C,amountUSDOrigin:Y,tokenARates:q,tokenBRates:x,isStableFarming:c})}),P.value!="All"?W.value?(b.value=o.sort((t,c)=>Number(c.amountUSDOrigin)-Number(t.amountUSDOrigin)),e.value=!1):(b.value=o.sort((t,c)=>Number(t.amountUSDOrigin)-Number(c.amountUSDOrigin)),e.value=!1):W.value?(b.value=o.sort((t,c)=>c.amountUSDOrigin-t.amountUSDOrigin),e.value=!1):(b.value=o.sort((t,c)=>t.amountUSDOrigin-c.amountUSDOrigin),e.value=!1),console.log(b.value,"list.value========>")};H(()=>[_.value.myPositions,_.value.RATES],([o,t])=>{o&&t&&(console.log("0605==>updateLpList9099999"),z())},{immediate:!0}),H(()=>[R.value.address,_.value.poolConfigList,_.value.poolsObj,v.value.chainName],([o,t,c,C])=>{var Y,q,x;o&&t&&t.length>0&&C&&(C!=null&&C.toLowerCase().includes((Y=t[0])==null?void 0:Y.chain))&&!ns(c)&&(C==="Aptos"?t.length===Object.values(c).length:(x=(q=Object.values(c)[0])==null?void 0:q.chain)!=null&&x.includes("sui"))&&(console.log(c,t,"0605==>getMyPositons9099999"),E.getMyPositons(R.value.address,c,C))},{immediate:!0,deep:!0}),H(()=>R.value.address,o=>{o||E.setMyPositions()},{immediate:!0}),H(()=>[P.value,W.value,_.value.currentPoolTab],([o])=>{z()});const J=o=>{const t=[];V.value.forEach((c,C)=>{c==o?t[C]=P.value:t[C]=c}),V.value=t,P.value=o},A=as(),p=S(()=>A),u=S(()=>E),i=async o=>{await A.getSourceGroups();const t=p.value.sourceGroups&&p.value.sourceGroups.length>0&&p.value.sourceGroups[0]&&p.value.sourceGroups[0].sources||[];console.log(t,"####source"),console.log(o,"###myPositions");for(let c=0;c<t.length;c++){const{pool_address:C,position_index:Y}=JSON.parse(t[c].blockchainAddress);let q=!1,x;for(let te=0;te<o.length;te++){const{poolAddress:ve,index:me,positionSource:_e,name:Ge}=o[te];C==ve&&Number(_e=="clmm"?me:Ge.split("-")[1])==Number(Y)&&(q=!0),x={pool_address:C,position_index:Y}}q||await A.subscribePosition(x,"",!1,!1)}},a=async()=>{await A.getSourceGroups();const o=p.value.sourceGroups&&p.value.sourceGroups.length>0&&p.value.sourceGroups[0]&&p.value.sourceGroups[0].sources||[];for(let t=0;t<o.length;t++){const{pool_address:c,position_index:C}=JSON.parse(o[t].blockchainAddress),{name:Y}=o[t],q={pool_address:c,position_index:C};await A.subscribePosition(q,Y,!1,!1)}},l=S(()=>u.value.myPositionsLoading);H(()=>u.value.myPositions,(o,t)=>{F.value.hasNotifi&&(o&&o.length>0&&t&&t.length!==o.length?i(o):o&&o.length==0&&!l.value&&a())},{immediate:!0});const f=o=>{var t;return(o==null?void 0:o.logoURI)||(o==null?void 0:o.logo_url)||((t=_.value.tokensObj[o==null?void 0:o.address])==null?void 0:t.logo_url)||(v.value.theme==="default"?$e("/image/coins/unknown.png"):$e("/image/coins/sui-unknown.png"))},y=g(null),r=S(()=>y.value&&y.value.firstToken?y.value.firstToken:null),T=S(()=>y.value&&y.value.lastToken?y.value.lastToken:null),M=S(()=>{let o=[];o=b.value;const t=o.filter((c,C)=>r.value&&T.value?c.coinA.symbol==r.value.symbol&&c.coinB.symbol==T.value.symbol||c.coinA.symbol==T.value.symbol&&c.coinB.symbol==r.value.symbol:r.value?c.coinA.symbol.toLowerCase().includes(r.value.symbol.toLowerCase())||c.coinB.symbol.toLowerCase().includes(r.value.symbol.toLowerCase()):T.value?c.coinA.symbol.toLowerCase().includes(T.value.symbol.toLowerCase())||c.coinB.symbol.toLowerCase().includes(T.value.symbol.toLowerCase()):o);return _.value.myPositionsLoading||(O.setPositiomAmount(t.length),E.setPositionShowList(t)),t});return es(()=>{O.setPositiomAmount("--"),E.setPositionShowList([])}),{tabArr:se,changeTab:ie,showList:M,childTokenSelectRef:y,firstToken:r,lastToken:T,getCoinIcon:f,changeSortLabel:J,label:N,labelList:V,labelValue:P,select:W,selectValue:ne,t:h,pools:_,store:v,wallet:R,list:b,clickRefresh:Z,refresh:e,current:L,router:U,searchKey:m}}});const Fe=e=>(re("data-v-0eb16e50"),e=e(),de(),e),Bt={class:"upgrade-position-list-container"},Ft={class:"position-card-top"},Gt={class:"content-top"},qt={class:"content-top-left"},Mt={key:0,class:"tag-list"},Vt=["onClick"],Wt={class:"content-top-right"},xt={class:"value"},Ht=Fe(()=>s("use",{"xlink:href":"#icon-icon_on"},null,-1)),zt=[Ht],Kt={key:0,class:"select-item"},Zt=["onClick"],Jt={class:"search-select-box"},Qt=Fe(()=>s("span",null,"TVL",-1)),Xt={key:0,src:Te,alt:""},It={key:1,class:"fan-img",src:Te,alt:""},eo={key:0,class:"upgrade-loading"},so={key:1,class:"position-list"},to={key:2,class:"no-data"},oo={key:0,src:rs,alt:""},ao={key:1,src:ds,alt:""},lo={key:3,class:"no-data"},no={key:0,src:cs,alt:""},io={key:1,src:vs,alt:""};function uo(e,h,L,U,m,O){const v=ss("TotalPosition"),F=qe,b=Me,E=Ve,_=he;return n(),d("div",Bt,[s("div",Ft,[e.wallet&&e.wallet.address?(n(),I(v,{key:0})):j("",!0),s("div",Gt,[s("div",qt,[e.tabArr.length>1?(n(),d("div",Mt,[(n(!0),d(Q,null,X(e.tabArr,(w,R)=>(n(),d("div",{key:R,class:ye(["tag-item",w==e.pools.currentPoolTab?`tag-active tab-num-${e.tabArr.length}`:`tab-num-${e.tabArr.length}`]),onClick:N=>e.changeTab(w)},$(w),11,Vt))),128))])):j("",!0),B(F,{ref:"childTokenSelectRef"},null,512)]),s("div",Wt,[e.store.theme=="default"?(n(),d("div",{key:0,class:"search-label",onClick:h[0]||(h[0]=be(w=>e.label=!e.label,["stop"]))},[s("span",null,$(e.$t("newAdd.label")),1),s("div",xt,$(e.labelValue),1),(n(),d("svg",{"aria-hidden":"true",class:ye(e.label?"show-icon icon":"icon")},zt,2)),e.label?(n(),d("div",Kt,[(n(!0),d(Q,null,X(e.labelList,(w,R)=>(n(),d("div",{key:R,class:"select-menu-item",onClick:N=>e.changeSortLabel(w)},$(w),9,Zt))),128))])):j("",!0)])):j("",!0),s("div",Jt,[s("div",{class:"search-select",onClick:h[1]||(h[1]=be(w=>e.select=!e.select,["stop"]))},[ee($(e.$t("newAdd.sortBy"))+" ",1),s("div",null,[Qt,e.select?(n(),d("img",Xt)):(n(),d("img",It))])])])])])]),e.pools.myPositionsLoading&&e.wallet.connected?(n(),d("div",eo,[B(b,{loading:e.pools.myPositionsLoading,type:"position"},null,8,["loading"])])):j("",!0),e.showList&&e.showList.length>0&&e.wallet.connected&&!e.pools.myPositionsLoading?(n(),d("div",so,[(n(!0),d(Q,null,X(e.showList,(w,R)=>(n(),I(E,{key:R,"p-item":w},null,8,["p-item"]))),128))])):j("",!0),e.showList&&e.showList.length<=0&&!e.pools.myPositionsLoading&&e.wallet.connected?(n(),d("div",to,[e.store.theme=="default"?(n(),d("img",oo)):(n(),d("img",ao)),s("span",null,$(e.$t("common.noLiquidityPositions")),1)])):j("",!0),e.wallet.connected?j("",!0):(n(),d("div",lo,[e.store.theme=="default"?(n(),d("img",no)):(n(),d("img",io)),B(_,{class:"connect-wallet",onClick:h[2]||(h[2]=w=>e.wallet.setIsShowWalletModal(!0))},{default:K(()=>[ee($(e.$t("button.connectWallet")),1)]),_:1})]))])}const Ho=le(Et,[["render",uo],["__scopeId","data-v-0eb16e50"]]);export{Ho as default};
