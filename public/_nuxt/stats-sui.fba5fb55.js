import{a as B,r as f,m as C,D as q,y as J,C as Pt,o as m,f as y,h as a,v as w,F as at,s as nt,i as u,x as M,a0 as At,d8 as Ht,J as Rt,z as lt,e as Y,u as xt,c as E,S as Ut,M as L,w as G,p as rt,k as it,b as Wt}from"./entry.604b55fb.js";/* empty css              */import"./index.67c1c497.js";import{a as ct}from"./pool.1cf61252.js";import{k as z,g as st,c as Z}from"./index.5d1ebf04.js";import{l as zt}from"./lodash.d02168e2.js";import{u as K}from"./stats.a77ae85b.js";import{f as Bt}from"./formatter.70b97e53.js";import"./index.2e59eebc.js";import{i as Yt}from"./import-icon.de3e6c66.js";import{R as ut,A as Ft,P as Mt}from"./to-add.85650a03.js";import{u as tt}from"./useToken.f4b46c53.js";import{T as pt,N as dt,H as mt,a as Et}from"./h5-table-card.85980108.js";import{S as Jt}from"./select-tab.f44cec1c.js";import{u as Ot}from"./useStatsData.049c75ed.js";import"./install.13601262.js";import"./decimal.0bdeb344.js";/* empty css              */import"./coin-img.ca153c6c.js";import"./token-warning_2x.028473d2.js";import"./token.9935c77f.js";import"./token-warning-new.d2cb1c7a.js";import"./nuxt-link.dd9e618f.js";import"./icon_farms_2x.c40cc98a.js";import"./farms.c4bcf9f1.js";import"./icon_autopools_2x.84d077b6.js";import"./icon_autopools_2x.8a7e51ce.js";import"./icon_fee_2x.3a526b46.js";import"./icon_rewards_2x.24bbbac9.js";import"./pool.83fb7aff.js";import"./fetchFun.cd1ccb8a.js";const jt={class:"stats-chart-container"},qt={class:"chart-top"},Gt={class:"trading-vol"},Kt={class:"title"},Qt={class:"text"},Xt=["innerHTML"],Zt={class:"time-list"},te=["onClick"],ee={key:0,class:"loading-box"},oe={class:"chart-content"},se=["id"];var X=(t=>(t.D="day",t.W="wek",t.M="mon",t))(X||{}),vt=(t=>(t[t.D=40]="D",t[t.W=30]="W",t[t.M=20]="M",t))(vt||{}),U=(t=>(t[t.Jan=1]="Jan",t[t.Feb=2]="Feb",t[t.Mar=3]="Mar",t[t.Apr=4]="Apr",t[t.May=5]="May",t[t.Jun=6]="Jun",t[t.Jul=7]="Jul",t[t.Aug=8]="Aug",t[t.Sep=9]="Sep",t[t.Oct=10]="Oct",t[t.Nov=11]="Nov",t[t.Dec=12]="Dec",t))(U||{}),_t=(t=>(t[t.D=1]="D",t[t.W=4]="W",t[t.M=12]="M",t))(_t||{}),ht=(t=>(t[t.D=1]="D",t[t.W=2]="W",t[t.M=4]="M",t))(ht||{});const ae=B({__name:"stats-sui-chart",props:{chartType:{type:String,default:"tvl"}},setup(t){const i=t,n=f("D"),T=["D","W","M"],g=f(""),k=f("24H"),v=ct();C(()=>v);const _=f(),l=f(),c=f(""),I=f(!1),A=K(),s=C(()=>A),p=C(()=>s.value.overallStatistics);q(()=>[p.value,i.chartType,c.value],([r,S,V])=>{Z(r)||(c.value=S=="tvl"?r.totalValueLockedDisplay:r.volInUsd24h)},{immediate:!0});const d=async()=>{I.value=!0;try{const r=vt[n.value],{data:S}=i.chartType=="tvl"?await fetch(`${st.Sui.api}/v2/sui/histogram/all?date_type=${X[n.value]}&typ=pure_tvl`).then(h=>h.json()):await fetch(`${st.Sui.api}/v2/sui/histogram/all?date_type=${X[n.value]}&typ=vol`).then(h=>h.json());console.log("ðŸš€ ~ getHistogram ~ data:",S);const V=S.list.map(h=>h.num),$=S.list.map(h=>h.date);_.value=V,l.value=$,e(V,$,r),console.log("ðŸš€ðŸš€ðŸš€ ~ file: pool-list-chart.vue:70 ~ getHistogram ~ data:",S)}catch(r){console.info("ðŸš€ðŸš€ðŸš€ ~ file: pool-list-chart.vue:50 ~ getHistogram ~ error:",r)}},b=f(),e=(r,S,V)=>{const $=document.getElementById(`stats-chart-${i.chartType}`),h=At($);b.value=h;let R={tooltip:{trigger:"axis",position:function(P,F,x,W,O){return[P[0]-50,"10%"]},backgroundColor:"#28353F",borderColor:"transparent",formatter:function(P){H(P)},padding:0,axisPointer:{type:"line",lineStyle:{width:n.value=="D"?1:n.value=="W"?2:4,type:"solid",color:"#456D89"}}},xAxis:{type:"category",axisTick:{show:!1},axisLine:{show:!1},splitLine:{show:!1},splitArea:{show:!1},data:S.reverse(),inverse:!0,axisLabel:{interval:parseInt(Number(r.length)/6),formatter:(P,F)=>{const x=z(Date.parse(P)-288e5,"YMD")||"";let W,O=x.slice(5,7),Q=U[Number(O)];return n.value=="M"?W=Q:W=x.slice(8,10),`${W}`}}},yAxis:{show:!1,max:function(P){return P.max}},series:[{data:r.reverse(),inverse:!0,type:i.chartType=="tvl"?"line":"bar",symbol:"none",itemStyle:{normal:{barBorderRadius:1,color:"#72C1F7"}},areaStyle:{color:new Ht(0,0,0,1,[{offset:0,color:"rgba(0, 128, 255, 0.3)"},{offset:1,color:"rgba(0, 128, 255, 0)"}])},barWidth:o.value?_t[n.value]:ht[n.value]}],grid:{left:20,top:0,bottom:24,right:20}};I.value=!1,R&&h.setOption(R),h&&h.resize(),h.on("globalout",P=>{c.value=i.chartType=="tvl"?p.value.totalValueLockedDisplay:p.value.volInUsd24h,k.value="24H",N()})};q(()=>n.value,(r,S)=>{(!S||r!==S)&&d()},{immediate:!0});const o=f(!0),D=zt.debounce(()=>{document.body.clientWidth>750?o.value=!0:o.value=!1,!_.value&&!l.value?d():b.value&&b.value.resize()},300);J(()=>{window.addEventListener("resize",D),N()}),Pt(()=>{window.removeEventListener("resize",D)});const N=()=>{const r=z(Date.parse(new Date().toUTCString()),"YMD")||"";let S=r.slice(5,7),V=U[Number(S)];const $=r.slice(8,10),h=V,R=r.slice(0,4);g.value=h+"&nbsp;"+$+",&nbsp;"+R+"&nbsp;(UTC)"},H=r=>{c.value=Bt(r[0].value,2),k.value=n.value=="D"?"24H":n.value=="W"?"7D":"30D";const S=Date.parse(r[0].axisValue),V=new Date(S);V.setDate(V.getDate()+7);const $=new Date(S);$.setDate($.getDate()+31);const h=V.toUTCString(),R=$.toUTCString(),P=z(Date.parse(R),"YMD")||"",F=z(Date.parse(new Date().toUTCString()),"YMD")||"",x=Date.parse(h)>Date.parse(new Date().toUTCString())?z(Date.parse(new Date().toUTCString()),"YMD")||"":z(Date.parse(h),"YMD")||"";let W=F.slice(5,7),O=U[Number(W)];const Q=F.slice(8,10),yt=O,Tt=F.slice(0,4);let et=r[0].axisValue.slice(5,7),kt=U[Number(et)];const ot=r[0].axisValue.slice(8,10),j=kt,Dt=r[0].axisValue.slice(0,4);let $t=x.slice(5,7),wt=U[Number($t)];const Ct=x.slice(8,10),Lt=wt,It=x.slice(0,4),Vt=U[Number(et)+1],Nt=P.slice(0,4);n.value=="D"?g.value=j+"&nbsp;"+ot+",&nbsp;"+Dt+"&nbsp;(UTC)":n.value=="W"?g.value=ot+"&nbsp;"+j+"-"+Ct+"&nbsp;"+Lt+"&nbsp;,&nbsp;"+It+"&nbsp;(UTC)":g.value=Date.parse(R)>=Date.parse(new Date().toUTCString())?j+"&nbsp;01-"+yt+"&nbsp;"+Q+",&nbsp;"+Tt+"&nbsp;(UTC)":j+"&nbsp;01-"+Vt+"&nbsp;01,&nbsp;"+Nt+"&nbsp;(UTC)"};return(r,S)=>{const V=Rt;return m(),y("div",jt,[a("div",qt,[a("div",Gt,[a("div",Kt,w(t.chartType=="tvl"?"Total Value Locked":`Trading Volume  (${k.value})`),1),a("div",Qt," $"+w(c.value===""?"--":Number(c.value)==0?0:c.value),1),a("span",{innerHTML:g.value},null,8,Xt)]),a("div",Zt,[(m(),y(at,null,nt(T,$=>a("div",{key:$,class:lt(["time-item",$==n.value?"time-item-active":""]),onClick:h=>n.value=$},w($),11,te)),64))])]),I.value?(m(),y("div",ee,[u(V)])):M("",!0),a("div",oe,[a("div",{id:`stats-chart-${t.chartType}`,class:"stats-chart"},null,8,se)])])}}});const gt=Y(ae,[["__scopeId","data-v-7677d781"]]),ne=B({setup(){const t=K(),i=C(()=>t),n=C(()=>i.value.overallStatistics),T=C(()=>[{img_url:"/sui-image/icon_cumulativevolume@2x.png",label:"Cumulative Volume",symbol:"$",value:n.value.cumulativeVolumeDisplay},{img_url:"/sui-image/icon_totalvaluelocked@2x.png",label:"Total Value Locked",symbol:"$",value:n.value.totalValueLockedDisplay},{img_url:"/sui-image/icon_cumulativetransactions@2x.png",label:"Cumulative Transactions",symbol:"",value:n.value.cumulativeTransactionsDisplay},{img_url:"/sui-image/icon_accounts@2x.png",label:"Total Accounts",symbol:"",value:n.value.totalAccountsDisplay}]);return{checkNullObj:Z,overallStatistics:n,statisticsList:T}}});const le={class:"stats-sui-statistics"},re={class:"img-label"},ie=["src"],ce={class:"label"},ue={key:1,class:"value"};function pe(t,i,n,T,g,k){const v=Ut;return m(),y("div",le,[(m(!0),y(at,null,nt(t.statisticsList,_=>(m(),y("div",{key:_.label,class:"item"},[a("div",re,[a("img",{src:_.img_url},null,8,ie),a("div",ce,w(_.label),1)]),("checkNullObj"in t?t.checkNullObj:xt(Z))(t.overallStatistics)?(m(),E(v,{key:0,class:"upgrade-text-skeleton",active:"",paragraph:!1})):(m(),y("div",ue,w(_.symbol)+w(_.value),1))]))),128))])}const ft=Y(ne,[["render",pe],["__scopeId","data-v-73fd22d8"]]),de=B({components:{RankIcon:ut,StatsAprTips:Ft,TableLoading:pt,StatsNoData:dt,H5TableCard:mt},setup(){const{getToken:t}=tt(),i=K(),n=C(()=>i),T=C(()=>n.value.poolsStatsList),g=f(!0),k=f(null);J(()=>{window.scroller=k.value});const v=f([]),_=C(()=>v.value.map(p=>Object.assign({},{random:Math.random()},p))),l=f({label:"Volume (24H)",sort:"desc"}),c=s=>{l.value=s,I(T.value)},I=async s=>{let p=[];for(let e=0;e<s.length;e++){const o=s[e],D=await t(s[e].displayTokenAAddress),N=await t(s[e].displayTokenBAddress),H=[];D!=null&&D.labels&&H.push(...D.labels),N!=null&&N.labels&&H.push(...N.labels);const r={...o,tokenA:D,tokenB:N,labels:[...new Set(H)]};p.push(r)}let d=p,b=[];l.value.label=="Volume (24H)"&&(b=l.value.sort=="desc"?d.sort((e,o)=>o.volume24-e.volume24):d.sort((e,o)=>e.volume24-o.volume24)),l.value.label=="Volume (7D)"&&(b=l.value.sort=="desc"?d.sort((e,o)=>o.volume7d-e.volume7d):d.sort((e,o)=>e.volume7d-o.volume7d)),l.value.label=="Liquidity"&&(b=l.value.sort=="desc"?d.sort((e,o)=>o.tvl-e.tvl):d.sort((e,o)=>e.tvl-o.tvl)),l.value.label=="Fees (24H)"&&(b=l.value.sort=="desc"?d.sort((e,o)=>o.fees24-e.fees24):d.sort((e,o)=>e.fees24-o.fees24)),l.value.label=="APR (24H)"&&(b=l.value.sort=="desc"?d.sort((e,o)=>o.totalApr-e.totalApr):d.sort((e,o)=>e.totalApr-o.totalApr)),v.value=b,console.log("ðŸš€ ~ buildPoolList ~ pageList:",v.value,b),g.value=!1};return q(()=>T.value,s=>{s&&s.length>0&&I(s)},{immediate:!0}),{pageList:v,tableColumns:[{title:"Pools",hasSort:!1,tdWidth:"330px",isNotShowTitle:!0,component:"pool-name-block"},{title:"Liquidity",hasSort:!0,tdWidth:"200px",value:"tvlDisplay"},{title:"Volume (24H)",hasSort:!0,tdWidth:"200px",value:"volume24Display"},{title:"Volume (7D)",hasSort:!0,tdWidth:"200px",value:"volume7dDisplay"},{title:"Fees (24H)",hasSort:!0,tdWidth:"175px",value:"fees24Display"},{title:"APR (24H)",hasSort:!0,toolTip:"Estimated according to trading activity in the past 24 hours",tdWidth:"175px",component:"apr-tips"}],scroller:k,list:_,isPoolLoading:g,sortInfo:l,changeSort:c}}});const me=t=>(rt("data-v-5f99053a"),t=t(),it(),t),ve={class:"stats-sui-pools-table"},_e={class:"h5-table"},he={class:"pc-table"},ge={key:1,class:"virtual-table"},fe=me(()=>a("th",null,"Pool",-1));function be(t,i,n,T,g,k){const v=L("StatsNoData"),_=L("H5TableCard"),l=L("TableLoading"),c=L("RankIcon"),I=Mt,A=L("StatsAprTips"),s=L("RecycleScroller");return m(),y("div",ve,[!t.isPoolLoading&&t.pageList&&t.pageList.length==0?(m(),E(v,{key:0,url:"/sui-image/img-no-Positions@2x.png",text:"No pools found"})):M("",!0),a("div",_e,[u(_,{"h5-title":"Pools","key-field":"poolAddress","sort-info":t.sortInfo,"item-size":278,"data-source-length":10,loading:t.isPoolLoading,columns:t.tableColumns,"data-source":t.pageList,onChangeSort:t.changeSort},null,8,["sort-info","loading","columns","data-source","onChangeSort"])]),a("div",he,[t.isPoolLoading?(m(),E(l,{key:0,columns:t.tableColumns,"data-source-length":10},null,8,["columns"])):(m(),y("table",ge,[u(s,{ref:"scroller",class:"scroller",items:t.list,"item-size":86,"key-field":"poolAddress",prerender:20,buffer:200},{before:G(()=>[a("thead",null,[fe,u(c,{label:"Liquidity","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"]),u(c,{label:"Volume (24H)","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"]),u(c,{label:"Volume (7D)","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"]),u(c,{label:"Fees (24H)","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"]),u(c,{label:"APR (24H)","tool-tip":"Estimated according to trading activity in the past 24 hours","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"])])]),default:G(({item:p})=>[(m(),y("tr",{key:p==null?void 0:p.poolAddress},[a("td",null,[u(I,{"pool-info":p},null,8,["pool-info"])]),a("td",null,w(p.tvlDisplay||"--"),1),a("td",null,w(p.volume24Display||"--"),1),a("td",null,w(p.volume7dDisplay||"--"),1),a("td",null,w(p.fees24Display||"--"),1),a("td",null,[u(A,{"pool-info":p},null,8,["pool-info"])])]))]),_:1},8,["items"])]))])])}const bt=Y(de,[["render",be],["__scopeId","data-v-5f99053a"]]),Se=B({components:{TokenBlock:Et,RankIcon:ut,TableLoading:pt,NoDataStats:dt,H5TableCard:mt},setup(){const{getToken:t}=tt(),i=K(),n=C(()=>i),T=C(()=>n.value.tokensStatsList),g=f(!0),k=f(null);J(()=>{window.scroller=k.value});const v=f([]),_=C(()=>v.value.map(p=>Object.assign({},{random:Math.random()},p))),l=f({label:"Volume (24H)",sort:"desc"}),c=s=>{l.value=s,I(T.value)},I=async s=>{let p=[];for(let e=0;e<s.length;e++){const o=s[e],D=await t(o==null?void 0:o.address),N=[];D!=null&&D.labels&&N.push(...D.labels);const H={...o,logoURI:D==null?void 0:D.logo_url,labels:[...new Set(N)]};p.push(H)}let d=p,b=[];l.value.label=="Price"&&(b=l.value.sort=="desc"?d.sort((e,o)=>o.price-e.price):d.sort((e,o)=>e.price-o.price)),l.value.label=="Price Change"&&(b=l.value.sort=="desc"?d.sort((e,o)=>o.priceChange-e.priceChange):d.sort((e,o)=>e.priceChange-o.priceChange)),l.value.label=="Volume (24H)"&&(b=l.value.sort=="desc"?d.sort((e,o)=>o.volume24-e.volume24):d.sort((e,o)=>e.volume24-o.volume24)),l.value.label=="TVL"&&(b=l.value.sort=="desc"?d.sort((e,o)=>o.tvl-e.tvl):d.sort((e,o)=>e.tvl-o.tvl)),v.value=b,g.value=!1};return q(()=>T.value,s=>{s&&s.length>0&&I(s)},{immediate:!0}),{pageList:v,tableColumns:[{title:"Token",hasSort:!1,tdWidth:"370px",isNotShowTitle:!0,component:"token-block"},{title:"Price",hasSort:!0,tdWidth:"240px",value:"priceDisplay"},{title:"Price Change",hasSort:!0,tdWidth:"215px",value:"priceChangeDisplay"},{title:"Volume (24H)",hasSort:!0,tdWidth:"240px",value:"volume24Display"},{title:"TVL",hasSort:!0,tdWidth:"215px",value:"tvlDisplay"}],scroller:k,list:_,isTokenLoading:g,sortInfo:l,changeSort:c}}});const ye=t=>(rt("data-v-4a483536"),t=t(),it(),t),Te={class:"aptos-stats-sui-tokens-table"},ke={class:"h5-table"},De={class:"pc-table"},$e={key:1,class:"virtual-table"},we=ye(()=>a("th",null,"Token",-1));function Ce(t,i,n,T,g,k){const v=L("NoDataStats"),_=L("H5TableCard"),l=L("TableLoading"),c=L("RankIcon"),I=L("TokenBlock"),A=L("RecycleScroller");return m(),y("div",Te,[!t.isTokenLoading&&t.pageList&&t.pageList.length==0?(m(),E(v,{key:0,url:"/sui-image/img-no-Positions@2x.png",text:"No tokens found"})):M("",!0),a("div",ke,[u(_,{"h5-title":"Tokens","key-field":"address","sort-info":t.sortInfo,"item-size":234,"data-source-length":10,loading:t.isTokenLoading,columns:t.tableColumns,"data-source":t.pageList,onChangeSort:t.changeSort},null,8,["sort-info","loading","columns","data-source","onChangeSort"])]),a("div",De,[t.isTokenLoading?(m(),E(l,{key:0,columns:t.tableColumns,"data-source-length":10},null,8,["columns"])):(m(),y("table",$e,[u(A,{ref:"scroller",class:"scroller",items:t.list,"item-size":86,"key-field":"address",prerender:20,buffer:200},{before:G(()=>[a("thead",null,[we,u(c,{label:"Price","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"]),u(c,{label:"Price Change","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"]),u(c,{label:"Volume (24H)","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"]),u(c,{label:"TVL","sort-info":t.sortInfo,onSort:t.changeSort},null,8,["sort-info","onSort"])])]),default:G(({item:s})=>[(m(),y("tr",{key:s==null?void 0:s.address},[a("td",null,[u(I,{"token-info":s,"justify-content":"flex-start","is-have-label":!0},null,8,["token-info"])]),a("td",null,"$"+w(s.priceDisplay||"--"),1),a("td",null,[a("span",{class:lt(s.priceChangeDisplay.includes("-")?"redecue-change-price":"add-change-price")},w(s.priceChangeDisplay||"--"),3)]),a("td",null,w(s.volume24Display||"--"),1),a("td",null,w(s.tvlDisplay||"--"),1)]))]),_:1},8,["items"])]))])])}const St=Y(Se,[["render",Ce],["__scopeId","data-v-4a483536"]]),Le=B({components:{StatsTab:Jt,StatsPoolsTable:bt,StatsTokensTable:St},setup(){const{getTokenList:t}=tt(),i=[{name:"Pools",logo:"/sui-image/icon_pools@2x.png"},{name:"Tokens",logo:"/sui-image/icon_tokens@2x.png"}],n=f("Pools");return J(()=>{t()}),{currentTab:n,tabList:i}}});const Ie={class:"pools-tokens-transitions"},Ve={class:"tab-box"},Ne={key:0,class:"table-box"},Pe={key:1,class:"table-box"};function Ae(t,i,n,T,g,k){const v=L("StatsTab"),_=bt,l=St;return m(),y("div",Ie,[a("div",Ve,[u(v,{"tab-list":t.tabList,"current-tab":t.currentTab,onOnClick:i[0]||(i[0]=c=>{t.currentTab=c.name})},null,8,["tab-list","current-tab"])]),t.currentTab=="Pools"?(m(),y("div",Ne,[u(_)])):M("",!0),t.currentTab=="Tokens"?(m(),y("div",Pe,[u(l)])):M("",!0)])}const He=Y(Le,[["render",Ae],["__scopeId","data-v-3e8025c9"]]),Re=B({components:{StatsSuiChart:gt,StatsSuiStatistics:ft,PoolsTokensTransitions:He},setup(){const t=ct(),i=C(()=>t),n=Wt(),T=C(()=>i.value.chainName),{getStatusData:g}=Ot();J(async()=>{g()});const k=C(()=>i.value.theme);return{chainName:T,theme:k,store:i,importIcon:Yt,router:n}}});const xe={class:"stats-sui-container"},Ue={class:"title"},We={class:"chart-box"};function ze(t,i,n,T,g,k){const v=gt,_=ft,l=L("PoolsTokensTransitions");return m(),y("div",xe,[a("div",Ue,w(t.$t("menu.stats")),1),a("div",We,[u(v,{"chart-type":"tvl"}),u(v,{"chart-type":"vol"})]),u(_),u(l)])}const bo=Y(Re,[["render",ze],["__scopeId","data-v-03e3c28a"]]);export{bo as default};
