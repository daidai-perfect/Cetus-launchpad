var pd=Object.defineProperty;var _d=(e,t,n)=>t in e?pd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var U=(e,t,n)=>(_d(e,typeof t!="symbol"?t+"":t,n),n);import{a6 as bd,ae as md,ad as gd,af as yd}from"./entry.d2fe8287.js";import{D as L}from"./decimal.0bdeb344.js";const Pr=5,S_=bd("wallet",{state:()=>({loading:!1,autoRefreshTime:Pr,countdown:0,connected:!1,aptosConnected:!1,suiConnected:!1,address:"",aptosAddress:"",suiAddress:"",platform:"",isShowWalletModal:!1,walletName:"",aptosWalletName:"",suiWalletName:"",currentWallet:null,aptosCurrentWallet:null,suiCurrentWallet:null,walletIcon:"",aptosWalletIcon:"",suiWalletIcon:"",switchWallet:!1,assets:{},walletIconName:"",aptosWalletIconName:"",suiWalletIconName:"",walletNetwork:"",isShowWalletCard:"",accountObj:null,firstGetAssetLoading:!1}),actions:{setLoading(e){e&&(this.countdown=Pr),this.loading=e,e||(this.countdown=0)},setCountdown(e){this.countdown=e},setWalletStatus(){this.connected=!0},setSwitchWallet(e){this.switchWallet=e},setIsShowWalletModal(e){this.isShowWalletModal=e},setWalletInfo(e,t){this.connected=e,this.platform=t},setCurrentWallet(e){e.wallet?(this.currentWallet=e.wallet,this.connected=e.isConnected,this.address=e.account,this.walletIcon=e.icon,this.walletName=e.wallet.name,e.platform==="Sui"?(this.suiCurrentWallet=e.wallet,this.suiConnected=e.isConnected,this.suiAddress=e.account,this.suiWalletIcon=e.icon,this.suiWalletName=e.wallet.name,this.walletName=e.walletName,this.accountObj=e.accountObj):(this.aptosCurrentWallet=e.wallet,this.aptosConnected=e.isConnected,this.aptosAddress=e.account,this.aptosWalletIcon=e.icon,this.aptosWalletName=e.wallet.name)):(this.currentWallet=null,this.connected=!1,this.address="",this.walletIcon="",this.walletName="",e.platform==="Sui"?(this.suiCurrentWallet=null,this.suiConnected=!1,this.suiAddress="",this.suiWalletIcon="",this.suiWalletName="",this.accountObj=null):(this.aptosCurrentWallet=null,this.aptosConnected=!1,this.aptosAddress="",this.aptosWalletIcon="",this.aptosWalletName=""))},setAssets(e){this.assets=e},setWalletIconName(e){this.walletIconName=e,localStorage.setItem("walletIconName",e)},setNetwork(e){this.walletNetwork=e,console.log(this.walletNetwork,"====>this.walletNetwork")},setIsShowWalletCard(e){this.isShowWalletCard=e},setFirstGetAssetLoading(e){this.firstGetAssetLoading=e}}}),wd={},vd=Object.freeze(Object.defineProperty({__proto__:null,default:wd},Symbol.toStringTag,{value:"Module"})),kd=md(vd);var g={},Cd={get exports(){return g},set exports(e){g=e}};(function(e){(function(t,n){function i(S,u){if(!S)throw new Error(u||"Assertion failed")}function o(S,u){S.super_=u;var p=function(){};p.prototype=u.prototype,S.prototype=new p,S.prototype.constructor=S}function s(S,u,p){if(s.isBN(S))return S;this.negative=0,this.words=null,this.length=0,this.red=null,S!==null&&((u==="le"||u==="be")&&(p=u,u=10),this._init(S||0,u||10,p||"be"))}typeof t=="object"?t.exports=s:n.BN=s,s.BN=s,s.wordSize=26;var r;try{typeof window<"u"&&typeof window.Buffer<"u"?r=window.Buffer:r=kd.Buffer}catch{}s.isBN=function(u){return u instanceof s?!0:u!==null&&typeof u=="object"&&u.constructor.wordSize===s.wordSize&&Array.isArray(u.words)},s.max=function(u,p){return u.cmp(p)>0?u:p},s.min=function(u,p){return u.cmp(p)<0?u:p},s.prototype._init=function(u,p,m){if(typeof u=="number")return this._initNumber(u,p,m);if(typeof u=="object")return this._initArray(u,p,m);p==="hex"&&(p=16),i(p===(p|0)&&p>=2&&p<=36),u=u.toString().replace(/\s+/g,"");var k=0;u[0]==="-"&&(k++,this.negative=1),k<u.length&&(p===16?this._parseHex(u,k,m):(this._parseBase(u,p,k),m==="le"&&this._initArray(this.toArray(),p,m)))},s.prototype._initNumber=function(u,p,m){u<0&&(this.negative=1,u=-u),u<67108864?(this.words=[u&67108863],this.length=1):u<4503599627370496?(this.words=[u&67108863,u/67108864&67108863],this.length=2):(i(u<9007199254740992),this.words=[u&67108863,u/67108864&67108863,1],this.length=3),m==="le"&&this._initArray(this.toArray(),p,m)},s.prototype._initArray=function(u,p,m){if(i(typeof u.length=="number"),u.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(u.length/3),this.words=new Array(this.length);for(var k=0;k<this.length;k++)this.words[k]=0;var T,P,E=0;if(m==="be")for(k=u.length-1,T=0;k>=0;k-=3)P=u[k]|u[k-1]<<8|u[k-2]<<16,this.words[T]|=P<<E&67108863,this.words[T+1]=P>>>26-E&67108863,E+=24,E>=26&&(E-=26,T++);else if(m==="le")for(k=0,T=0;k<u.length;k+=3)P=u[k]|u[k+1]<<8|u[k+2]<<16,this.words[T]|=P<<E&67108863,this.words[T+1]=P>>>26-E&67108863,E+=24,E>=26&&(E-=26,T++);return this._strip()};function a(S,u){var p=S.charCodeAt(u);if(p>=48&&p<=57)return p-48;if(p>=65&&p<=70)return p-55;if(p>=97&&p<=102)return p-87;i(!1,"Invalid character in "+S)}function c(S,u,p){var m=a(S,p);return p-1>=u&&(m|=a(S,p-1)<<4),m}s.prototype._parseHex=function(u,p,m){this.length=Math.ceil((u.length-p)/6),this.words=new Array(this.length);for(var k=0;k<this.length;k++)this.words[k]=0;var T=0,P=0,E;if(m==="be")for(k=u.length-1;k>=p;k-=2)E=c(u,p,k)<<T,this.words[P]|=E&67108863,T>=18?(T-=18,P+=1,this.words[P]|=E>>>26):T+=8;else{var v=u.length-p;for(k=v%2===0?p+1:p;k<u.length;k+=2)E=c(u,p,k)<<T,this.words[P]|=E&67108863,T>=18?(T-=18,P+=1,this.words[P]|=E>>>26):T+=8}this._strip()};function d(S,u,p,m){for(var k=0,T=0,P=Math.min(S.length,p),E=u;E<P;E++){var v=S.charCodeAt(E)-48;k*=m,v>=49?T=v-49+10:v>=17?T=v-17+10:T=v,i(v>=0&&T<m,"Invalid character"),k+=T}return k}s.prototype._parseBase=function(u,p,m){this.words=[0],this.length=1;for(var k=0,T=1;T<=67108863;T*=p)k++;k--,T=T/p|0;for(var P=u.length-m,E=P%k,v=Math.min(P,P-E)+m,h=0,C=m;C<v;C+=k)h=d(u,C,C+k,p),this.imuln(T),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(E!==0){var te=1;for(h=d(u,C,u.length,p),C=0;C<E;C++)te*=p;this.imuln(te),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this._strip()},s.prototype.copy=function(u){u.words=new Array(this.length);for(var p=0;p<this.length;p++)u.words[p]=this.words[p];u.length=this.length,u.negative=this.negative,u.red=this.red};function l(S,u){S.words=u.words,S.length=u.length,S.negative=u.negative,S.red=u.red}if(s.prototype._move=function(u){l(u,this)},s.prototype.clone=function(){var u=new s(null);return this.copy(u),u},s.prototype._expand=function(u){for(;this.length<u;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=f}catch{s.prototype.inspect=f}else s.prototype.inspect=f;function f(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var _=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],b=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(u,p){u=u||10,p=p|0||1;var m;if(u===16||u==="hex"){m="";for(var k=0,T=0,P=0;P<this.length;P++){var E=this.words[P],v=((E<<k|T)&16777215).toString(16);T=E>>>24-k&16777215,k+=2,k>=26&&(k-=26,P--),T!==0||P!==this.length-1?m=_[6-v.length]+v+m:m=v+m}for(T!==0&&(m=T.toString(16)+m);m.length%p!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}if(u===(u|0)&&u>=2&&u<=36){var h=b[u],C=y[u];m="";var te=this.clone();for(te.negative=0;!te.isZero();){var ee=te.modrn(C).toString(u);te=te.idivn(C),te.isZero()?m=ee+m:m=_[h-ee.length]+ee+m}for(this.isZero()&&(m="0"+m);m.length%p!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}i(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var u=this.words[0];return this.length===2?u+=this.words[1]*67108864:this.length===3&&this.words[2]===1?u+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-u:u},s.prototype.toJSON=function(){return this.toString(16,2)},r&&(s.prototype.toBuffer=function(u,p){return this.toArrayLike(r,u,p)}),s.prototype.toArray=function(u,p){return this.toArrayLike(Array,u,p)};var A=function(u,p){return u.allocUnsafe?u.allocUnsafe(p):new u(p)};s.prototype.toArrayLike=function(u,p,m){this._strip();var k=this.byteLength(),T=m||Math.max(1,k);i(k<=T,"byte array longer than desired length"),i(T>0,"Requested array length <= 0");var P=A(u,T),E=p==="le"?"LE":"BE";return this["_toArrayLike"+E](P,k),P},s.prototype._toArrayLikeLE=function(u,p){for(var m=0,k=0,T=0,P=0;T<this.length;T++){var E=this.words[T]<<P|k;u[m++]=E&255,m<u.length&&(u[m++]=E>>8&255),m<u.length&&(u[m++]=E>>16&255),P===6?(m<u.length&&(u[m++]=E>>24&255),k=0,P=0):(k=E>>>24,P+=2)}if(m<u.length)for(u[m++]=k;m<u.length;)u[m++]=0},s.prototype._toArrayLikeBE=function(u,p){for(var m=u.length-1,k=0,T=0,P=0;T<this.length;T++){var E=this.words[T]<<P|k;u[m--]=E&255,m>=0&&(u[m--]=E>>8&255),m>=0&&(u[m--]=E>>16&255),P===6?(m>=0&&(u[m--]=E>>24&255),k=0,P=0):(k=E>>>24,P+=2)}if(m>=0)for(u[m--]=k;m>=0;)u[m--]=0},Math.clz32?s.prototype._countBits=function(u){return 32-Math.clz32(u)}:s.prototype._countBits=function(u){var p=u,m=0;return p>=4096&&(m+=13,p>>>=13),p>=64&&(m+=7,p>>>=7),p>=8&&(m+=4,p>>>=4),p>=2&&(m+=2,p>>>=2),m+p},s.prototype._zeroBits=function(u){if(u===0)return 26;var p=u,m=0;return p&8191||(m+=13,p>>>=13),p&127||(m+=7,p>>>=7),p&15||(m+=4,p>>>=4),p&3||(m+=2,p>>>=2),p&1||m++,m},s.prototype.bitLength=function(){var u=this.words[this.length-1],p=this._countBits(u);return(this.length-1)*26+p};function O(S){for(var u=new Array(S.bitLength()),p=0;p<u.length;p++){var m=p/26|0,k=p%26;u[p]=S.words[m]>>>k&1}return u}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,p=0;p<this.length;p++){var m=this._zeroBits(this.words[p]);if(u+=m,m!==26)break}return u},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(u){return this.negative!==0?this.abs().inotn(u).iaddn(1):this.clone()},s.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var p=0;p<u.length;p++)this.words[p]=this.words[p]|u.words[p];return this._strip()},s.prototype.ior=function(u){return i((this.negative|u.negative)===0),this.iuor(u)},s.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)},s.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)},s.prototype.iuand=function(u){var p;this.length>u.length?p=u:p=this;for(var m=0;m<p.length;m++)this.words[m]=this.words[m]&u.words[m];return this.length=p.length,this._strip()},s.prototype.iand=function(u){return i((this.negative|u.negative)===0),this.iuand(u)},s.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)},s.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)},s.prototype.iuxor=function(u){var p,m;this.length>u.length?(p=this,m=u):(p=u,m=this);for(var k=0;k<m.length;k++)this.words[k]=p.words[k]^m.words[k];if(this!==p)for(;k<p.length;k++)this.words[k]=p.words[k];return this.length=p.length,this._strip()},s.prototype.ixor=function(u){return i((this.negative|u.negative)===0),this.iuxor(u)},s.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)},s.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)},s.prototype.inotn=function(u){i(typeof u=="number"&&u>=0);var p=Math.ceil(u/26)|0,m=u%26;this._expand(p),m>0&&p--;for(var k=0;k<p;k++)this.words[k]=~this.words[k]&67108863;return m>0&&(this.words[k]=~this.words[k]&67108863>>26-m),this._strip()},s.prototype.notn=function(u){return this.clone().inotn(u)},s.prototype.setn=function(u,p){i(typeof u=="number"&&u>=0);var m=u/26|0,k=u%26;return this._expand(m+1),p?this.words[m]=this.words[m]|1<<k:this.words[m]=this.words[m]&~(1<<k),this._strip()},s.prototype.iadd=function(u){var p;if(this.negative!==0&&u.negative===0)return this.negative=0,p=this.isub(u),this.negative^=1,this._normSign();if(this.negative===0&&u.negative!==0)return u.negative=0,p=this.isub(u),u.negative=1,p._normSign();var m,k;this.length>u.length?(m=this,k=u):(m=u,k=this);for(var T=0,P=0;P<k.length;P++)p=(m.words[P]|0)+(k.words[P]|0)+T,this.words[P]=p&67108863,T=p>>>26;for(;T!==0&&P<m.length;P++)p=(m.words[P]|0)+T,this.words[P]=p&67108863,T=p>>>26;if(this.length=m.length,T!==0)this.words[this.length]=T,this.length++;else if(m!==this)for(;P<m.length;P++)this.words[P]=m.words[P];return this},s.prototype.add=function(u){var p;return u.negative!==0&&this.negative===0?(u.negative=0,p=this.sub(u),u.negative^=1,p):u.negative===0&&this.negative!==0?(this.negative=0,p=u.sub(this),this.negative=1,p):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)},s.prototype.isub=function(u){if(u.negative!==0){u.negative=0;var p=this.iadd(u);return u.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();var m=this.cmp(u);if(m===0)return this.negative=0,this.length=1,this.words[0]=0,this;var k,T;m>0?(k=this,T=u):(k=u,T=this);for(var P=0,E=0;E<T.length;E++)p=(k.words[E]|0)-(T.words[E]|0)+P,P=p>>26,this.words[E]=p&67108863;for(;P!==0&&E<k.length;E++)p=(k.words[E]|0)+P,P=p>>26,this.words[E]=p&67108863;if(P===0&&E<k.length&&k!==this)for(;E<k.length;E++)this.words[E]=k.words[E];return this.length=Math.max(this.length,E),k!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(u){return this.clone().isub(u)};function j(S,u,p){p.negative=u.negative^S.negative;var m=S.length+u.length|0;p.length=m,m=m-1|0;var k=S.words[0]|0,T=u.words[0]|0,P=k*T,E=P&67108863,v=P/67108864|0;p.words[0]=E;for(var h=1;h<m;h++){for(var C=v>>>26,te=v&67108863,ee=Math.min(h,u.length-1),ne=Math.max(0,h-S.length+1);ne<=ee;ne++){var kt=h-ne|0;k=S.words[kt]|0,T=u.words[ne]|0,P=k*T+te,C+=P/67108864|0,te=P&67108863}p.words[h]=te|0,v=C|0}return v!==0?p.words[h]=v|0:p.length--,p._strip()}var M=function(u,p,m){var k=u.words,T=p.words,P=m.words,E=0,v,h,C,te=k[0]|0,ee=te&8191,ne=te>>>13,kt=k[1]|0,ye=kt&8191,ve=kt>>>13,ur=k[2]|0,Te=ur&8191,xe=ur>>>13,fr=k[3]|0,Ie=fr&8191,Pe=fr>>>13,hr=k[4]|0,Oe=hr&8191,je=hr>>>13,pr=k[5]|0,Me=pr&8191,Ee=pr>>>13,_r=k[6]|0,Be=_r&8191,De=_r>>>13,br=k[7]|0,Ne=br&8191,Re=br>>>13,mr=k[8]|0,qe=mr&8191,$e=mr>>>13,gr=k[9]|0,Fe=gr&8191,Le=gr>>>13,yr=T[0]|0,Ue=yr&8191,Ke=yr>>>13,wr=T[1]|0,Ve=wr&8191,ze=wr>>>13,vr=T[2]|0,Ge=vr&8191,We=vr>>>13,kr=T[3]|0,Xe=kr&8191,He=kr>>>13,Cr=T[4]|0,Je=Cr&8191,Ze=Cr>>>13,Ar=T[5]|0,Qe=Ar&8191,Ye=Ar>>>13,Sr=T[6]|0,et=Sr&8191,tt=Sr>>>13,Tr=T[7]|0,nt=Tr&8191,it=Tr>>>13,xr=T[8]|0,ot=xr&8191,st=xr>>>13,Ir=T[9]|0,rt=Ir&8191,at=Ir>>>13;m.negative=u.negative^p.negative,m.length=19,v=Math.imul(ee,Ue),h=Math.imul(ee,Ke),h=h+Math.imul(ne,Ue)|0,C=Math.imul(ne,Ke);var Oo=(E+v|0)+((h&8191)<<13)|0;E=(C+(h>>>13)|0)+(Oo>>>26)|0,Oo&=67108863,v=Math.imul(ye,Ue),h=Math.imul(ye,Ke),h=h+Math.imul(ve,Ue)|0,C=Math.imul(ve,Ke),v=v+Math.imul(ee,Ve)|0,h=h+Math.imul(ee,ze)|0,h=h+Math.imul(ne,Ve)|0,C=C+Math.imul(ne,ze)|0;var jo=(E+v|0)+((h&8191)<<13)|0;E=(C+(h>>>13)|0)+(jo>>>26)|0,jo&=67108863,v=Math.imul(Te,Ue),h=Math.imul(Te,Ke),h=h+Math.imul(xe,Ue)|0,C=Math.imul(xe,Ke),v=v+Math.imul(ye,Ve)|0,h=h+Math.imul(ye,ze)|0,h=h+Math.imul(ve,Ve)|0,C=C+Math.imul(ve,ze)|0,v=v+Math.imul(ee,Ge)|0,h=h+Math.imul(ee,We)|0,h=h+Math.imul(ne,Ge)|0,C=C+Math.imul(ne,We)|0;var Mo=(E+v|0)+((h&8191)<<13)|0;E=(C+(h>>>13)|0)+(Mo>>>26)|0,Mo&=67108863,v=Math.imul(Ie,Ue),h=Math.imul(Ie,Ke),h=h+Math.imul(Pe,Ue)|0,C=Math.imul(Pe,Ke),v=v+Math.imul(Te,Ve)|0,h=h+Math.imul(Te,ze)|0,h=h+Math.imul(xe,Ve)|0,C=C+Math.imul(xe,ze)|0,v=v+Math.imul(ye,Ge)|0,h=h+Math.imul(ye,We)|0,h=h+Math.imul(ve,Ge)|0,C=C+Math.imul(ve,We)|0,v=v+Math.imul(ee,Xe)|0,h=h+Math.imul(ee,He)|0,h=h+Math.imul(ne,Xe)|0,C=C+Math.imul(ne,He)|0;var Eo=(E+v|0)+((h&8191)<<13)|0;E=(C+(h>>>13)|0)+(Eo>>>26)|0,Eo&=67108863,v=Math.imul(Oe,Ue),h=Math.imul(Oe,Ke),h=h+Math.imul(je,Ue)|0,C=Math.imul(je,Ke),v=v+Math.imul(Ie,Ve)|0,h=h+Math.imul(Ie,ze)|0,h=h+Math.imul(Pe,Ve)|0,C=C+Math.imul(Pe,ze)|0,v=v+Math.imul(Te,Ge)|0,h=h+Math.imul(Te,We)|0,h=h+Math.imul(xe,Ge)|0,C=C+Math.imul(xe,We)|0,v=v+Math.imul(ye,Xe)|0,h=h+Math.imul(ye,He)|0,h=h+Math.imul(ve,Xe)|0,C=C+Math.imul(ve,He)|0,v=v+Math.imul(ee,Je)|0,h=h+Math.imul(ee,Ze)|0,h=h+Math.imul(ne,Je)|0,C=C+Math.imul(ne,Ze)|0;var Bo=(E+v|0)+((h&8191)<<13)|0;E=(C+(h>>>13)|0)+(Bo>>>26)|0,Bo&=67108863,v=Math.imul(Me,Ue),h=Math.imul(Me,Ke),h=h+Math.imul(Ee,Ue)|0,C=Math.imul(Ee,Ke),v=v+Math.imul(Oe,Ve)|0,h=h+Math.imul(Oe,ze)|0,h=h+Math.imul(je,Ve)|0,C=C+Math.imul(je,ze)|0,v=v+Math.imul(Ie,Ge)|0,h=h+Math.imul(Ie,We)|0,h=h+Math.imul(Pe,Ge)|0,C=C+Math.imul(Pe,We)|0,v=v+Math.imul(Te,Xe)|0,h=h+Math.imul(Te,He)|0,h=h+Math.imul(xe,Xe)|0,C=C+Math.imul(xe,He)|0,v=v+Math.imul(ye,Je)|0,h=h+Math.imul(ye,Ze)|0,h=h+Math.imul(ve,Je)|0,C=C+Math.imul(ve,Ze)|0,v=v+Math.imul(ee,Qe)|0,h=h+Math.imul(ee,Ye)|0,h=h+Math.imul(ne,Qe)|0,C=C+Math.imul(ne,Ye)|0;var Do=(E+v|0)+((h&8191)<<13)|0;E=(C+(h>>>13)|0)+(Do>>>26)|0,Do&=67108863,v=Math.imul(Be,Ue),h=Math.imul(Be,Ke),h=h+Math.imul(De,Ue)|0,C=Math.imul(De,Ke),v=v+Math.imul(Me,Ve)|0,h=h+Math.imul(Me,ze)|0,h=h+Math.imul(Ee,Ve)|0,C=C+Math.imul(Ee,ze)|0,v=v+Math.imul(Oe,Ge)|0,h=h+Math.imul(Oe,We)|0,h=h+Math.imul(je,Ge)|0,C=C+Math.imul(je,We)|0,v=v+Math.imul(Ie,Xe)|0,h=h+Math.imul(Ie,He)|0,h=h+Math.imul(Pe,Xe)|0,C=C+Math.imul(Pe,He)|0,v=v+Math.imul(Te,Je)|0,h=h+Math.imul(Te,Ze)|0,h=h+Math.imul(xe,Je)|0,C=C+Math.imul(xe,Ze)|0,v=v+Math.imul(ye,Qe)|0,h=h+Math.imul(ye,Ye)|0,h=h+Math.imul(ve,Qe)|0,C=C+Math.imul(ve,Ye)|0,v=v+Math.imul(ee,et)|0,h=h+Math.imul(ee,tt)|0,h=h+Math.imul(ne,et)|0,C=C+Math.imul(ne,tt)|0;var No=(E+v|0)+((h&8191)<<13)|0;E=(C+(h>>>13)|0)+(No>>>26)|0,No&=67108863,v=Math.imul(Ne,Ue),h=Math.imul(Ne,Ke),h=h+Math.imul(Re,Ue)|0,C=Math.imul(Re,Ke),v=v+Math.imul(Be,Ve)|0,h=h+Math.imul(Be,ze)|0,h=h+Math.imul(De,Ve)|0,C=C+Math.imul(De,ze)|0,v=v+Math.imul(Me,Ge)|0,h=h+Math.imul(Me,We)|0,h=h+Math.imul(Ee,Ge)|0,C=C+Math.imul(Ee,We)|0,v=v+Math.imul(Oe,Xe)|0,h=h+Math.imul(Oe,He)|0,h=h+Math.imul(je,Xe)|0,C=C+Math.imul(je,He)|0,v=v+Math.imul(Ie,Je)|0,h=h+Math.imul(Ie,Ze)|0,h=h+Math.imul(Pe,Je)|0,C=C+Math.imul(Pe,Ze)|0,v=v+Math.imul(Te,Qe)|0,h=h+Math.imul(Te,Ye)|0,h=h+Math.imul(xe,Qe)|0,C=C+Math.imul(xe,Ye)|0,v=v+Math.imul(ye,et)|0,h=h+Math.imul(ye,tt)|0,h=h+Math.imul(ve,et)|0,C=C+Math.imul(ve,tt)|0,v=v+Math.imul(ee,nt)|0,h=h+Math.imul(ee,it)|0,h=h+Math.imul(ne,nt)|0,C=C+Math.imul(ne,it)|0;var Ro=(E+v|0)+((h&8191)<<13)|0;E=(C+(h>>>13)|0)+(Ro>>>26)|0,Ro&=67108863,v=Math.imul(qe,Ue),h=Math.imul(qe,Ke),h=h+Math.imul($e,Ue)|0,C=Math.imul($e,Ke),v=v+Math.imul(Ne,Ve)|0,h=h+Math.imul(Ne,ze)|0,h=h+Math.imul(Re,Ve)|0,C=C+Math.imul(Re,ze)|0,v=v+Math.imul(Be,Ge)|0,h=h+Math.imul(Be,We)|0,h=h+Math.imul(De,Ge)|0,C=C+Math.imul(De,We)|0,v=v+Math.imul(Me,Xe)|0,h=h+Math.imul(Me,He)|0,h=h+Math.imul(Ee,Xe)|0,C=C+Math.imul(Ee,He)|0,v=v+Math.imul(Oe,Je)|0,h=h+Math.imul(Oe,Ze)|0,h=h+Math.imul(je,Je)|0,C=C+Math.imul(je,Ze)|0,v=v+Math.imul(Ie,Qe)|0,h=h+Math.imul(Ie,Ye)|0,h=h+Math.imul(Pe,Qe)|0,C=C+Math.imul(Pe,Ye)|0,v=v+Math.imul(Te,et)|0,h=h+Math.imul(Te,tt)|0,h=h+Math.imul(xe,et)|0,C=C+Math.imul(xe,tt)|0,v=v+Math.imul(ye,nt)|0,h=h+Math.imul(ye,it)|0,h=h+Math.imul(ve,nt)|0,C=C+Math.imul(ve,it)|0,v=v+Math.imul(ee,ot)|0,h=h+Math.imul(ee,st)|0,h=h+Math.imul(ne,ot)|0,C=C+Math.imul(ne,st)|0;var qo=(E+v|0)+((h&8191)<<13)|0;E=(C+(h>>>13)|0)+(qo>>>26)|0,qo&=67108863,v=Math.imul(Fe,Ue),h=Math.imul(Fe,Ke),h=h+Math.imul(Le,Ue)|0,C=Math.imul(Le,Ke),v=v+Math.imul(qe,Ve)|0,h=h+Math.imul(qe,ze)|0,h=h+Math.imul($e,Ve)|0,C=C+Math.imul($e,ze)|0,v=v+Math.imul(Ne,Ge)|0,h=h+Math.imul(Ne,We)|0,h=h+Math.imul(Re,Ge)|0,C=C+Math.imul(Re,We)|0,v=v+Math.imul(Be,Xe)|0,h=h+Math.imul(Be,He)|0,h=h+Math.imul(De,Xe)|0,C=C+Math.imul(De,He)|0,v=v+Math.imul(Me,Je)|0,h=h+Math.imul(Me,Ze)|0,h=h+Math.imul(Ee,Je)|0,C=C+Math.imul(Ee,Ze)|0,v=v+Math.imul(Oe,Qe)|0,h=h+Math.imul(Oe,Ye)|0,h=h+Math.imul(je,Qe)|0,C=C+Math.imul(je,Ye)|0,v=v+Math.imul(Ie,et)|0,h=h+Math.imul(Ie,tt)|0,h=h+Math.imul(Pe,et)|0,C=C+Math.imul(Pe,tt)|0,v=v+Math.imul(Te,nt)|0,h=h+Math.imul(Te,it)|0,h=h+Math.imul(xe,nt)|0,C=C+Math.imul(xe,it)|0,v=v+Math.imul(ye,ot)|0,h=h+Math.imul(ye,st)|0,h=h+Math.imul(ve,ot)|0,C=C+Math.imul(ve,st)|0,v=v+Math.imul(ee,rt)|0,h=h+Math.imul(ee,at)|0,h=h+Math.imul(ne,rt)|0,C=C+Math.imul(ne,at)|0;var $o=(E+v|0)+((h&8191)<<13)|0;E=(C+(h>>>13)|0)+($o>>>26)|0,$o&=67108863,v=Math.imul(Fe,Ve),h=Math.imul(Fe,ze),h=h+Math.imul(Le,Ve)|0,C=Math.imul(Le,ze),v=v+Math.imul(qe,Ge)|0,h=h+Math.imul(qe,We)|0,h=h+Math.imul($e,Ge)|0,C=C+Math.imul($e,We)|0,v=v+Math.imul(Ne,Xe)|0,h=h+Math.imul(Ne,He)|0,h=h+Math.imul(Re,Xe)|0,C=C+Math.imul(Re,He)|0,v=v+Math.imul(Be,Je)|0,h=h+Math.imul(Be,Ze)|0,h=h+Math.imul(De,Je)|0,C=C+Math.imul(De,Ze)|0,v=v+Math.imul(Me,Qe)|0,h=h+Math.imul(Me,Ye)|0,h=h+Math.imul(Ee,Qe)|0,C=C+Math.imul(Ee,Ye)|0,v=v+Math.imul(Oe,et)|0,h=h+Math.imul(Oe,tt)|0,h=h+Math.imul(je,et)|0,C=C+Math.imul(je,tt)|0,v=v+Math.imul(Ie,nt)|0,h=h+Math.imul(Ie,it)|0,h=h+Math.imul(Pe,nt)|0,C=C+Math.imul(Pe,it)|0,v=v+Math.imul(Te,ot)|0,h=h+Math.imul(Te,st)|0,h=h+Math.imul(xe,ot)|0,C=C+Math.imul(xe,st)|0,v=v+Math.imul(ye,rt)|0,h=h+Math.imul(ye,at)|0,h=h+Math.imul(ve,rt)|0,C=C+Math.imul(ve,at)|0;var Fo=(E+v|0)+((h&8191)<<13)|0;E=(C+(h>>>13)|0)+(Fo>>>26)|0,Fo&=67108863,v=Math.imul(Fe,Ge),h=Math.imul(Fe,We),h=h+Math.imul(Le,Ge)|0,C=Math.imul(Le,We),v=v+Math.imul(qe,Xe)|0,h=h+Math.imul(qe,He)|0,h=h+Math.imul($e,Xe)|0,C=C+Math.imul($e,He)|0,v=v+Math.imul(Ne,Je)|0,h=h+Math.imul(Ne,Ze)|0,h=h+Math.imul(Re,Je)|0,C=C+Math.imul(Re,Ze)|0,v=v+Math.imul(Be,Qe)|0,h=h+Math.imul(Be,Ye)|0,h=h+Math.imul(De,Qe)|0,C=C+Math.imul(De,Ye)|0,v=v+Math.imul(Me,et)|0,h=h+Math.imul(Me,tt)|0,h=h+Math.imul(Ee,et)|0,C=C+Math.imul(Ee,tt)|0,v=v+Math.imul(Oe,nt)|0,h=h+Math.imul(Oe,it)|0,h=h+Math.imul(je,nt)|0,C=C+Math.imul(je,it)|0,v=v+Math.imul(Ie,ot)|0,h=h+Math.imul(Ie,st)|0,h=h+Math.imul(Pe,ot)|0,C=C+Math.imul(Pe,st)|0,v=v+Math.imul(Te,rt)|0,h=h+Math.imul(Te,at)|0,h=h+Math.imul(xe,rt)|0,C=C+Math.imul(xe,at)|0;var Lo=(E+v|0)+((h&8191)<<13)|0;E=(C+(h>>>13)|0)+(Lo>>>26)|0,Lo&=67108863,v=Math.imul(Fe,Xe),h=Math.imul(Fe,He),h=h+Math.imul(Le,Xe)|0,C=Math.imul(Le,He),v=v+Math.imul(qe,Je)|0,h=h+Math.imul(qe,Ze)|0,h=h+Math.imul($e,Je)|0,C=C+Math.imul($e,Ze)|0,v=v+Math.imul(Ne,Qe)|0,h=h+Math.imul(Ne,Ye)|0,h=h+Math.imul(Re,Qe)|0,C=C+Math.imul(Re,Ye)|0,v=v+Math.imul(Be,et)|0,h=h+Math.imul(Be,tt)|0,h=h+Math.imul(De,et)|0,C=C+Math.imul(De,tt)|0,v=v+Math.imul(Me,nt)|0,h=h+Math.imul(Me,it)|0,h=h+Math.imul(Ee,nt)|0,C=C+Math.imul(Ee,it)|0,v=v+Math.imul(Oe,ot)|0,h=h+Math.imul(Oe,st)|0,h=h+Math.imul(je,ot)|0,C=C+Math.imul(je,st)|0,v=v+Math.imul(Ie,rt)|0,h=h+Math.imul(Ie,at)|0,h=h+Math.imul(Pe,rt)|0,C=C+Math.imul(Pe,at)|0;var Uo=(E+v|0)+((h&8191)<<13)|0;E=(C+(h>>>13)|0)+(Uo>>>26)|0,Uo&=67108863,v=Math.imul(Fe,Je),h=Math.imul(Fe,Ze),h=h+Math.imul(Le,Je)|0,C=Math.imul(Le,Ze),v=v+Math.imul(qe,Qe)|0,h=h+Math.imul(qe,Ye)|0,h=h+Math.imul($e,Qe)|0,C=C+Math.imul($e,Ye)|0,v=v+Math.imul(Ne,et)|0,h=h+Math.imul(Ne,tt)|0,h=h+Math.imul(Re,et)|0,C=C+Math.imul(Re,tt)|0,v=v+Math.imul(Be,nt)|0,h=h+Math.imul(Be,it)|0,h=h+Math.imul(De,nt)|0,C=C+Math.imul(De,it)|0,v=v+Math.imul(Me,ot)|0,h=h+Math.imul(Me,st)|0,h=h+Math.imul(Ee,ot)|0,C=C+Math.imul(Ee,st)|0,v=v+Math.imul(Oe,rt)|0,h=h+Math.imul(Oe,at)|0,h=h+Math.imul(je,rt)|0,C=C+Math.imul(je,at)|0;var Ko=(E+v|0)+((h&8191)<<13)|0;E=(C+(h>>>13)|0)+(Ko>>>26)|0,Ko&=67108863,v=Math.imul(Fe,Qe),h=Math.imul(Fe,Ye),h=h+Math.imul(Le,Qe)|0,C=Math.imul(Le,Ye),v=v+Math.imul(qe,et)|0,h=h+Math.imul(qe,tt)|0,h=h+Math.imul($e,et)|0,C=C+Math.imul($e,tt)|0,v=v+Math.imul(Ne,nt)|0,h=h+Math.imul(Ne,it)|0,h=h+Math.imul(Re,nt)|0,C=C+Math.imul(Re,it)|0,v=v+Math.imul(Be,ot)|0,h=h+Math.imul(Be,st)|0,h=h+Math.imul(De,ot)|0,C=C+Math.imul(De,st)|0,v=v+Math.imul(Me,rt)|0,h=h+Math.imul(Me,at)|0,h=h+Math.imul(Ee,rt)|0,C=C+Math.imul(Ee,at)|0;var Vo=(E+v|0)+((h&8191)<<13)|0;E=(C+(h>>>13)|0)+(Vo>>>26)|0,Vo&=67108863,v=Math.imul(Fe,et),h=Math.imul(Fe,tt),h=h+Math.imul(Le,et)|0,C=Math.imul(Le,tt),v=v+Math.imul(qe,nt)|0,h=h+Math.imul(qe,it)|0,h=h+Math.imul($e,nt)|0,C=C+Math.imul($e,it)|0,v=v+Math.imul(Ne,ot)|0,h=h+Math.imul(Ne,st)|0,h=h+Math.imul(Re,ot)|0,C=C+Math.imul(Re,st)|0,v=v+Math.imul(Be,rt)|0,h=h+Math.imul(Be,at)|0,h=h+Math.imul(De,rt)|0,C=C+Math.imul(De,at)|0;var zo=(E+v|0)+((h&8191)<<13)|0;E=(C+(h>>>13)|0)+(zo>>>26)|0,zo&=67108863,v=Math.imul(Fe,nt),h=Math.imul(Fe,it),h=h+Math.imul(Le,nt)|0,C=Math.imul(Le,it),v=v+Math.imul(qe,ot)|0,h=h+Math.imul(qe,st)|0,h=h+Math.imul($e,ot)|0,C=C+Math.imul($e,st)|0,v=v+Math.imul(Ne,rt)|0,h=h+Math.imul(Ne,at)|0,h=h+Math.imul(Re,rt)|0,C=C+Math.imul(Re,at)|0;var Go=(E+v|0)+((h&8191)<<13)|0;E=(C+(h>>>13)|0)+(Go>>>26)|0,Go&=67108863,v=Math.imul(Fe,ot),h=Math.imul(Fe,st),h=h+Math.imul(Le,ot)|0,C=Math.imul(Le,st),v=v+Math.imul(qe,rt)|0,h=h+Math.imul(qe,at)|0,h=h+Math.imul($e,rt)|0,C=C+Math.imul($e,at)|0;var Wo=(E+v|0)+((h&8191)<<13)|0;E=(C+(h>>>13)|0)+(Wo>>>26)|0,Wo&=67108863,v=Math.imul(Fe,rt),h=Math.imul(Fe,at),h=h+Math.imul(Le,rt)|0,C=Math.imul(Le,at);var Xo=(E+v|0)+((h&8191)<<13)|0;return E=(C+(h>>>13)|0)+(Xo>>>26)|0,Xo&=67108863,P[0]=Oo,P[1]=jo,P[2]=Mo,P[3]=Eo,P[4]=Bo,P[5]=Do,P[6]=No,P[7]=Ro,P[8]=qo,P[9]=$o,P[10]=Fo,P[11]=Lo,P[12]=Uo,P[13]=Ko,P[14]=Vo,P[15]=zo,P[16]=Go,P[17]=Wo,P[18]=Xo,E!==0&&(P[19]=E,m.length++),m};Math.imul||(M=j);function B(S,u,p){p.negative=u.negative^S.negative,p.length=S.length+u.length;for(var m=0,k=0,T=0;T<p.length-1;T++){var P=k;k=0;for(var E=m&67108863,v=Math.min(T,u.length-1),h=Math.max(0,T-S.length+1);h<=v;h++){var C=T-h,te=S.words[C]|0,ee=u.words[h]|0,ne=te*ee,kt=ne&67108863;P=P+(ne/67108864|0)|0,kt=kt+E|0,E=kt&67108863,P=P+(kt>>>26)|0,k+=P>>>26,P&=67108863}p.words[T]=E,m=P,P=k}return m!==0?p.words[T]=m:p.length--,p._strip()}function $(S,u,p){return B(S,u,p)}s.prototype.mulTo=function(u,p){var m,k=this.length+u.length;return this.length===10&&u.length===10?m=M(this,u,p):k<63?m=j(this,u,p):k<1024?m=B(this,u,p):m=$(this,u,p),m},s.prototype.mul=function(u){var p=new s(null);return p.words=new Array(this.length+u.length),this.mulTo(u,p)},s.prototype.mulf=function(u){var p=new s(null);return p.words=new Array(this.length+u.length),$(this,u,p)},s.prototype.imul=function(u){return this.clone().mulTo(u,this)},s.prototype.imuln=function(u){var p=u<0;p&&(u=-u),i(typeof u=="number"),i(u<67108864);for(var m=0,k=0;k<this.length;k++){var T=(this.words[k]|0)*u,P=(T&67108863)+(m&67108863);m>>=26,m+=T/67108864|0,m+=P>>>26,this.words[k]=P&67108863}return m!==0&&(this.words[k]=m,this.length++),p?this.ineg():this},s.prototype.muln=function(u){return this.clone().imuln(u)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(u){var p=O(u);if(p.length===0)return new s(1);for(var m=this,k=0;k<p.length&&p[k]===0;k++,m=m.sqr());if(++k<p.length)for(var T=m.sqr();k<p.length;k++,T=T.sqr())p[k]!==0&&(m=m.mul(T));return m},s.prototype.iushln=function(u){i(typeof u=="number"&&u>=0);var p=u%26,m=(u-p)/26,k=67108863>>>26-p<<26-p,T;if(p!==0){var P=0;for(T=0;T<this.length;T++){var E=this.words[T]&k,v=(this.words[T]|0)-E<<p;this.words[T]=v|P,P=E>>>26-p}P&&(this.words[T]=P,this.length++)}if(m!==0){for(T=this.length-1;T>=0;T--)this.words[T+m]=this.words[T];for(T=0;T<m;T++)this.words[T]=0;this.length+=m}return this._strip()},s.prototype.ishln=function(u){return i(this.negative===0),this.iushln(u)},s.prototype.iushrn=function(u,p,m){i(typeof u=="number"&&u>=0);var k;p?k=(p-p%26)/26:k=0;var T=u%26,P=Math.min((u-T)/26,this.length),E=67108863^67108863>>>T<<T,v=m;if(k-=P,k=Math.max(0,k),v){for(var h=0;h<P;h++)v.words[h]=this.words[h];v.length=P}if(P!==0)if(this.length>P)for(this.length-=P,h=0;h<this.length;h++)this.words[h]=this.words[h+P];else this.words[0]=0,this.length=1;var C=0;for(h=this.length-1;h>=0&&(C!==0||h>=k);h--){var te=this.words[h]|0;this.words[h]=C<<26-T|te>>>T,C=te&E}return v&&C!==0&&(v.words[v.length++]=C),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(u,p,m){return i(this.negative===0),this.iushrn(u,p,m)},s.prototype.shln=function(u){return this.clone().ishln(u)},s.prototype.ushln=function(u){return this.clone().iushln(u)},s.prototype.shrn=function(u){return this.clone().ishrn(u)},s.prototype.ushrn=function(u){return this.clone().iushrn(u)},s.prototype.testn=function(u){i(typeof u=="number"&&u>=0);var p=u%26,m=(u-p)/26,k=1<<p;if(this.length<=m)return!1;var T=this.words[m];return!!(T&k)},s.prototype.imaskn=function(u){i(typeof u=="number"&&u>=0);var p=u%26,m=(u-p)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=m)return this;if(p!==0&&m++,this.length=Math.min(m,this.length),p!==0){var k=67108863^67108863>>>p<<p;this.words[this.length-1]&=k}return this._strip()},s.prototype.maskn=function(u){return this.clone().imaskn(u)},s.prototype.iaddn=function(u){return i(typeof u=="number"),i(u<67108864),u<0?this.isubn(-u):this.negative!==0?this.length===1&&(this.words[0]|0)<=u?(this.words[0]=u-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(u),this.negative=1,this):this._iaddn(u)},s.prototype._iaddn=function(u){this.words[0]+=u;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},s.prototype.isubn=function(u){if(i(typeof u=="number"),i(u<67108864),u<0)return this.iaddn(-u);if(this.negative!==0)return this.negative=0,this.iaddn(u),this.negative=1,this;if(this.words[0]-=u,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this._strip()},s.prototype.addn=function(u){return this.clone().iaddn(u)},s.prototype.subn=function(u){return this.clone().isubn(u)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(u,p,m){var k=u.length+m,T;this._expand(k);var P,E=0;for(T=0;T<u.length;T++){P=(this.words[T+m]|0)+E;var v=(u.words[T]|0)*p;P-=v&67108863,E=(P>>26)-(v/67108864|0),this.words[T+m]=P&67108863}for(;T<this.length-m;T++)P=(this.words[T+m]|0)+E,E=P>>26,this.words[T+m]=P&67108863;if(E===0)return this._strip();for(i(E===-1),E=0,T=0;T<this.length;T++)P=-(this.words[T]|0)+E,E=P>>26,this.words[T]=P&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(u,p){var m=this.length-u.length,k=this.clone(),T=u,P=T.words[T.length-1]|0,E=this._countBits(P);m=26-E,m!==0&&(T=T.ushln(m),k.iushln(m),P=T.words[T.length-1]|0);var v=k.length-T.length,h;if(p!=="mod"){h=new s(null),h.length=v+1,h.words=new Array(h.length);for(var C=0;C<h.length;C++)h.words[C]=0}var te=k.clone()._ishlnsubmul(T,1,v);te.negative===0&&(k=te,h&&(h.words[v]=1));for(var ee=v-1;ee>=0;ee--){var ne=(k.words[T.length+ee]|0)*67108864+(k.words[T.length+ee-1]|0);for(ne=Math.min(ne/P|0,67108863),k._ishlnsubmul(T,ne,ee);k.negative!==0;)ne--,k.negative=0,k._ishlnsubmul(T,1,ee),k.isZero()||(k.negative^=1);h&&(h.words[ee]=ne)}return h&&h._strip(),k._strip(),p!=="div"&&m!==0&&k.iushrn(m),{div:h||null,mod:k}},s.prototype.divmod=function(u,p,m){if(i(!u.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var k,T,P;return this.negative!==0&&u.negative===0?(P=this.neg().divmod(u,p),p!=="mod"&&(k=P.div.neg()),p!=="div"&&(T=P.mod.neg(),m&&T.negative!==0&&T.iadd(u)),{div:k,mod:T}):this.negative===0&&u.negative!==0?(P=this.divmod(u.neg(),p),p!=="mod"&&(k=P.div.neg()),{div:k,mod:P.mod}):this.negative&u.negative?(P=this.neg().divmod(u.neg(),p),p!=="div"&&(T=P.mod.neg(),m&&T.negative!==0&&T.isub(u)),{div:P.div,mod:T}):u.length>this.length||this.cmp(u)<0?{div:new s(0),mod:this}:u.length===1?p==="div"?{div:this.divn(u.words[0]),mod:null}:p==="mod"?{div:null,mod:new s(this.modrn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new s(this.modrn(u.words[0]))}:this._wordDiv(u,p)},s.prototype.div=function(u){return this.divmod(u,"div",!1).div},s.prototype.mod=function(u){return this.divmod(u,"mod",!1).mod},s.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod},s.prototype.divRound=function(u){var p=this.divmod(u);if(p.mod.isZero())return p.div;var m=p.div.negative!==0?p.mod.isub(u):p.mod,k=u.ushrn(1),T=u.andln(1),P=m.cmp(k);return P<0||T===1&&P===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},s.prototype.modrn=function(u){var p=u<0;p&&(u=-u),i(u<=67108863);for(var m=(1<<26)%u,k=0,T=this.length-1;T>=0;T--)k=(m*k+(this.words[T]|0))%u;return p?-k:k},s.prototype.modn=function(u){return this.modrn(u)},s.prototype.idivn=function(u){var p=u<0;p&&(u=-u),i(u<=67108863);for(var m=0,k=this.length-1;k>=0;k--){var T=(this.words[k]|0)+m*67108864;this.words[k]=T/u|0,m=T%u}return this._strip(),p?this.ineg():this},s.prototype.divn=function(u){return this.clone().idivn(u)},s.prototype.egcd=function(u){i(u.negative===0),i(!u.isZero());var p=this,m=u.clone();p.negative!==0?p=p.umod(u):p=p.clone();for(var k=new s(1),T=new s(0),P=new s(0),E=new s(1),v=0;p.isEven()&&m.isEven();)p.iushrn(1),m.iushrn(1),++v;for(var h=m.clone(),C=p.clone();!p.isZero();){for(var te=0,ee=1;!(p.words[0]&ee)&&te<26;++te,ee<<=1);if(te>0)for(p.iushrn(te);te-- >0;)(k.isOdd()||T.isOdd())&&(k.iadd(h),T.isub(C)),k.iushrn(1),T.iushrn(1);for(var ne=0,kt=1;!(m.words[0]&kt)&&ne<26;++ne,kt<<=1);if(ne>0)for(m.iushrn(ne);ne-- >0;)(P.isOdd()||E.isOdd())&&(P.iadd(h),E.isub(C)),P.iushrn(1),E.iushrn(1);p.cmp(m)>=0?(p.isub(m),k.isub(P),T.isub(E)):(m.isub(p),P.isub(k),E.isub(T))}return{a:P,b:E,gcd:m.iushln(v)}},s.prototype._invmp=function(u){i(u.negative===0),i(!u.isZero());var p=this,m=u.clone();p.negative!==0?p=p.umod(u):p=p.clone();for(var k=new s(1),T=new s(0),P=m.clone();p.cmpn(1)>0&&m.cmpn(1)>0;){for(var E=0,v=1;!(p.words[0]&v)&&E<26;++E,v<<=1);if(E>0)for(p.iushrn(E);E-- >0;)k.isOdd()&&k.iadd(P),k.iushrn(1);for(var h=0,C=1;!(m.words[0]&C)&&h<26;++h,C<<=1);if(h>0)for(m.iushrn(h);h-- >0;)T.isOdd()&&T.iadd(P),T.iushrn(1);p.cmp(m)>=0?(p.isub(m),k.isub(T)):(m.isub(p),T.isub(k))}var te;return p.cmpn(1)===0?te=k:te=T,te.cmpn(0)<0&&te.iadd(u),te},s.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();var p=this.clone(),m=u.clone();p.negative=0,m.negative=0;for(var k=0;p.isEven()&&m.isEven();k++)p.iushrn(1),m.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;m.isEven();)m.iushrn(1);var T=p.cmp(m);if(T<0){var P=p;p=m,m=P}else if(T===0||m.cmpn(1)===0)break;p.isub(m)}while(!0);return m.iushln(k)},s.prototype.invm=function(u){return this.egcd(u).a.umod(u)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(u){return this.words[0]&u},s.prototype.bincn=function(u){i(typeof u=="number");var p=u%26,m=(u-p)/26,k=1<<p;if(this.length<=m)return this._expand(m+1),this.words[m]|=k,this;for(var T=k,P=m;T!==0&&P<this.length;P++){var E=this.words[P]|0;E+=T,T=E>>>26,E&=67108863,this.words[P]=E}return T!==0&&(this.words[P]=T,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(u){var p=u<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this._strip();var m;if(this.length>1)m=1;else{p&&(u=-u),i(u<=67108863,"Number is too big");var k=this.words[0]|0;m=k===u?0:k<u?-1:1}return this.negative!==0?-m|0:m},s.prototype.cmp=function(u){if(this.negative!==0&&u.negative===0)return-1;if(this.negative===0&&u.negative!==0)return 1;var p=this.ucmp(u);return this.negative!==0?-p|0:p},s.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var p=0,m=this.length-1;m>=0;m--){var k=this.words[m]|0,T=u.words[m]|0;if(k!==T){k<T?p=-1:k>T&&(p=1);break}}return p},s.prototype.gtn=function(u){return this.cmpn(u)===1},s.prototype.gt=function(u){return this.cmp(u)===1},s.prototype.gten=function(u){return this.cmpn(u)>=0},s.prototype.gte=function(u){return this.cmp(u)>=0},s.prototype.ltn=function(u){return this.cmpn(u)===-1},s.prototype.lt=function(u){return this.cmp(u)===-1},s.prototype.lten=function(u){return this.cmpn(u)<=0},s.prototype.lte=function(u){return this.cmp(u)<=0},s.prototype.eqn=function(u){return this.cmpn(u)===0},s.prototype.eq=function(u){return this.cmp(u)===0},s.red=function(u){return new W(u)},s.prototype.toRed=function(u){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),u.convertTo(this)._forceRed(u)},s.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(u){return this.red=u,this},s.prototype.forceRed=function(u){return i(!this.red,"Already a number in reduction context"),this._forceRed(u)},s.prototype.redAdd=function(u){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,u)},s.prototype.redIAdd=function(u){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,u)},s.prototype.redSub=function(u){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,u)},s.prototype.redISub=function(u){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,u)},s.prototype.redShl=function(u){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,u)},s.prototype.redMul=function(u){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.mul(this,u)},s.prototype.redIMul=function(u){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.imul(this,u)},s.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(u){return i(this.red&&!u.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,u)};var J={k256:null,p224:null,p192:null,p25519:null};function z(S,u){this.name=S,this.p=new s(u,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}z.prototype._tmp=function(){var u=new s(null);return u.words=new Array(Math.ceil(this.n/13)),u},z.prototype.ireduce=function(u){var p=u,m;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),m=p.bitLength();while(m>this.n);var k=m<this.n?-1:p.ucmp(this.p);return k===0?(p.words[0]=0,p.length=1):k>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},z.prototype.split=function(u,p){u.iushrn(this.n,0,p)},z.prototype.imulK=function(u){return u.imul(this.k)};function re(){z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(re,z),re.prototype.split=function(u,p){for(var m=4194303,k=Math.min(u.length,9),T=0;T<k;T++)p.words[T]=u.words[T];if(p.length=k,u.length<=9){u.words[0]=0,u.length=1;return}var P=u.words[9];for(p.words[p.length++]=P&m,T=10;T<u.length;T++){var E=u.words[T]|0;u.words[T-10]=(E&m)<<4|P>>>22,P=E}P>>>=22,u.words[T-10]=P,P===0&&u.length>10?u.length-=10:u.length-=9},re.prototype.imulK=function(u){u.words[u.length]=0,u.words[u.length+1]=0,u.length+=2;for(var p=0,m=0;m<u.length;m++){var k=u.words[m]|0;p+=k*977,u.words[m]=p&67108863,p=k*64+(p/67108864|0)}return u.words[u.length-1]===0&&(u.length--,u.words[u.length-1]===0&&u.length--),u};function ge(){z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(ge,z);function mt(){z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(mt,z);function Y(){z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(Y,z),Y.prototype.imulK=function(u){for(var p=0,m=0;m<u.length;m++){var k=(u.words[m]|0)*19+p,T=k&67108863;k>>>=26,u.words[m]=T,p=k}return p!==0&&(u.words[u.length++]=p),u},s._prime=function(u){if(J[u])return J[u];var p;if(u==="k256")p=new re;else if(u==="p224")p=new ge;else if(u==="p192")p=new mt;else if(u==="p25519")p=new Y;else throw new Error("Unknown prime "+u);return J[u]=p,p};function W(S){if(typeof S=="string"){var u=s._prime(S);this.m=u.p,this.prime=u}else i(S.gtn(1),"modulus must be greater than 1"),this.m=S,this.prime=null}W.prototype._verify1=function(u){i(u.negative===0,"red works only with positives"),i(u.red,"red works only with red numbers")},W.prototype._verify2=function(u,p){i((u.negative|p.negative)===0,"red works only with positives"),i(u.red&&u.red===p.red,"red works only with red numbers")},W.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):(l(u,u.umod(this.m)._forceRed(this)),u)},W.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)},W.prototype.add=function(u,p){this._verify2(u,p);var m=u.add(p);return m.cmp(this.m)>=0&&m.isub(this.m),m._forceRed(this)},W.prototype.iadd=function(u,p){this._verify2(u,p);var m=u.iadd(p);return m.cmp(this.m)>=0&&m.isub(this.m),m},W.prototype.sub=function(u,p){this._verify2(u,p);var m=u.sub(p);return m.cmpn(0)<0&&m.iadd(this.m),m._forceRed(this)},W.prototype.isub=function(u,p){this._verify2(u,p);var m=u.isub(p);return m.cmpn(0)<0&&m.iadd(this.m),m},W.prototype.shl=function(u,p){return this._verify1(u),this.imod(u.ushln(p))},W.prototype.imul=function(u,p){return this._verify2(u,p),this.imod(u.imul(p))},W.prototype.mul=function(u,p){return this._verify2(u,p),this.imod(u.mul(p))},W.prototype.isqr=function(u){return this.imul(u,u.clone())},W.prototype.sqr=function(u){return this.mul(u,u)},W.prototype.sqrt=function(u){if(u.isZero())return u.clone();var p=this.m.andln(3);if(i(p%2===1),p===3){var m=this.m.add(new s(1)).iushrn(2);return this.pow(u,m)}for(var k=this.m.subn(1),T=0;!k.isZero()&&k.andln(1)===0;)T++,k.iushrn(1);i(!k.isZero());var P=new s(1).toRed(this),E=P.redNeg(),v=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new s(2*h*h).toRed(this);this.pow(h,v).cmp(E)!==0;)h.redIAdd(E);for(var C=this.pow(h,k),te=this.pow(u,k.addn(1).iushrn(1)),ee=this.pow(u,k),ne=T;ee.cmp(P)!==0;){for(var kt=ee,ye=0;kt.cmp(P)!==0;ye++)kt=kt.redSqr();i(ye<ne);var ve=this.pow(C,new s(1).iushln(ne-ye-1));te=te.redMul(ve),C=ve.redSqr(),ee=ee.redMul(C),ne=ye}return te},W.prototype.invm=function(u){var p=u._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},W.prototype.pow=function(u,p){if(p.isZero())return new s(1).toRed(this);if(p.cmpn(1)===0)return u.clone();var m=4,k=new Array(1<<m);k[0]=new s(1).toRed(this),k[1]=u;for(var T=2;T<k.length;T++)k[T]=this.mul(k[T-1],u);var P=k[0],E=0,v=0,h=p.bitLength()%26;for(h===0&&(h=26),T=p.length-1;T>=0;T--){for(var C=p.words[T],te=h-1;te>=0;te--){var ee=C>>te&1;if(P!==k[0]&&(P=this.sqr(P)),ee===0&&E===0){v=0;continue}E<<=1,E|=ee,v++,!(v!==m&&(T!==0||te!==0))&&(P=this.mul(P,k[E]),v=0,E=0)}h=26}return P},W.prototype.convertTo=function(u){var p=u.umod(this.m);return p===u?p.clone():p},W.prototype.convertFrom=function(u){var p=u.clone();return p.red=null,p},s.mont=function(u){return new ue(u)};function ue(S){W.call(this,S),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(ue,W),ue.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))},ue.prototype.convertFrom=function(u){var p=this.imod(u.mul(this.rinv));return p.red=null,p},ue.prototype.imul=function(u,p){if(u.isZero()||p.isZero())return u.words[0]=0,u.length=1,u;var m=u.imul(p),k=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=m.isub(k).iushrn(this.shift),P=T;return T.cmp(this.m)>=0?P=T.isub(this.m):T.cmpn(0)<0&&(P=T.iadd(this.m)),P._forceRed(this)},ue.prototype.mul=function(u,p){if(u.isZero()||p.isZero())return new s(0)._forceRed(this);var m=u.mul(p),k=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=m.isub(k).iushrn(this.shift),P=T;return T.cmp(this.m)>=0?P=T.isub(this.m):T.cmpn(0)<0&&(P=T.iadd(this.m)),P._forceRed(this)},ue.prototype.invm=function(u){var p=this.imod(u._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(e,gd)})(Cd);const ya="3.7.5",Ad=ya,Sd=typeof atob=="function",Td=typeof btoa=="function",ii=typeof Buffer=="function",Or=typeof TextDecoder=="function"?new TextDecoder:void 0,jr=typeof TextEncoder=="function"?new TextEncoder:void 0,xd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",li=Array.prototype.slice.call(xd),Ei=(e=>{let t={};return e.forEach((n,i)=>t[n]=i),t})(li),Id=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,wt=String.fromCharCode.bind(String),Mr=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),wa=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),va=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),ka=e=>{let t,n,i,o,s="";const r=e.length%3;for(let a=0;a<e.length;){if((n=e.charCodeAt(a++))>255||(i=e.charCodeAt(a++))>255||(o=e.charCodeAt(a++))>255)throw new TypeError("invalid character found");t=n<<16|i<<8|o,s+=li[t>>18&63]+li[t>>12&63]+li[t>>6&63]+li[t&63]}return r?s.slice(0,r-3)+"===".substring(r):s},$s=Td?e=>btoa(e):ii?e=>Buffer.from(e,"binary").toString("base64"):ka,bs=ii?e=>Buffer.from(e).toString("base64"):e=>{let n=[];for(let i=0,o=e.length;i<o;i+=4096)n.push(wt.apply(null,e.subarray(i,i+4096)));return $s(n.join(""))},Vi=(e,t=!1)=>t?wa(bs(e)):bs(e),Pd=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?wt(192|t>>>6)+wt(128|t&63):wt(224|t>>>12&15)+wt(128|t>>>6&63)+wt(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return wt(240|t>>>18&7)+wt(128|t>>>12&63)+wt(128|t>>>6&63)+wt(128|t&63)}},Od=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Ca=e=>e.replace(Od,Pd),Er=ii?e=>Buffer.from(e,"utf8").toString("base64"):jr?e=>bs(jr.encode(e)):e=>$s(Ca(e)),Hn=(e,t=!1)=>t?wa(Er(e)):Er(e),Br=e=>Hn(e,!0),jd=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Md=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return wt((n>>>10)+55296)+wt((n&1023)+56320);case 3:return wt((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return wt((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},Aa=e=>e.replace(jd,Md),Sa=e=>{if(e=e.replace(/\s+/g,""),!Id.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,n="",i,o;for(let s=0;s<e.length;)t=Ei[e.charAt(s++)]<<18|Ei[e.charAt(s++)]<<12|(i=Ei[e.charAt(s++)])<<6|(o=Ei[e.charAt(s++)]),n+=i===64?wt(t>>16&255):o===64?wt(t>>16&255,t>>8&255):wt(t>>16&255,t>>8&255,t&255);return n},Fs=Sd?e=>atob(va(e)):ii?e=>Buffer.from(e,"base64").toString("binary"):Sa,Ta=ii?e=>Mr(Buffer.from(e,"base64")):e=>Mr(Fs(e).split("").map(t=>t.charCodeAt(0))),xa=e=>Ta(Ia(e)),Ed=ii?e=>Buffer.from(e,"base64").toString("utf8"):Or?e=>Or.decode(Ta(e)):e=>Aa(Fs(e)),Ia=e=>va(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),ms=e=>Ed(Ia(e)),Bd=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},Pa=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),Oa=function(){const e=(t,n)=>Object.defineProperty(String.prototype,t,Pa(n));e("fromBase64",function(){return ms(this)}),e("toBase64",function(t){return Hn(this,t)}),e("toBase64URI",function(){return Hn(this,!0)}),e("toBase64URL",function(){return Hn(this,!0)}),e("toUint8Array",function(){return xa(this)})},ja=function(){const e=(t,n)=>Object.defineProperty(Uint8Array.prototype,t,Pa(n));e("toBase64",function(t){return Vi(this,t)}),e("toBase64URI",function(){return Vi(this,!0)}),e("toBase64URL",function(){return Vi(this,!0)})},Dd=()=>{Oa(),ja()},zi={version:ya,VERSION:Ad,atob:Fs,atobPolyfill:Sa,btoa:$s,btoaPolyfill:ka,fromBase64:ms,toBase64:Hn,encode:Hn,encodeURI:Br,encodeURL:Br,utob:Ca,btou:Aa,decode:ms,isValid:Bd,fromUint8Array:Vi,toUint8Array:xa,extendString:Oa,extendUint8Array:ja,extendBuiltins:Dd};function Ho(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,o,s,r;return r={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function a(d){return function(l){return c([d,l])}}function c(d){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,d[0]&&(n=0)),n;)try{if(i=1,o&&(s=d[0]&2?o.return:d[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,d[1])).done)return s;switch(o=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,o=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){n.label=d[1];break}if(d[0]===6&&n.label<s[1]){n.label=s[1],s=d;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(d);break}s[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(l){d=[6,l],o=0}finally{i=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var xn;(function(e){e[e.EQUAL=0]="EQUAL",e[e.GREATER=1]="GREATER",e[e.LESS=-1]="LESS"})(xn||(xn={}));var Nd=function(){function e(t){this.compare=t||e.defaultCompareFunction}return e.defaultCompareFunction=function(t,n){return t===n?xn.EQUAL:t<n?xn.LESS:xn.GREATER},e.prototype.equal=function(t,n){return this.compare(t,n)===xn.EQUAL},e.prototype.lessThan=function(t,n){return this.compare(t,n)===xn.LESS},e.prototype.greaterThan=function(t,n){return this.compare(t,n)===xn.GREATER},e.prototype.lessThanOrEqual=function(t,n){return this.lessThan(t,n)||this.equal(t,n)},e.prototype.greaterThanOrEqual=function(t,n){return this.greaterThan(t,n)||this.equal(t,n)},e.prototype.reverse=function(){var t=this.compare;this.compare=function(n,i){return t(i,n)}},e}(),Dr=function(){function e(t){this.value=t,this.next=null}return e}(),Nr=function(){function e(t){this.value=t,this.next=null,this.prev=null}return e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var gs=function(e,t){return gs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},gs(e,t)};function oi(e,t){gs(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function vi(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,o,s,r;return r={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function a(d){return function(l){return c([d,l])}}function c(d){if(i)throw new TypeError("Generator is already executing.");for(;n;)try{if(i=1,o&&(s=d[0]&2?o.return:d[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,d[1])).done)return s;switch(o=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,o=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){n.label=d[1];break}if(d[0]===6&&n.label<s[1]){n.label=s[1],s=d;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(d);break}s[2]&&n.ops.pop(),n.trys.pop();continue}d=t.call(e,n)}catch(l){d=[6,l],o=0}finally{i=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Rd(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var i=n.call(e),o,s=[],r;try{for(;(t===void 0||t-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s}function Xt(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Rd(arguments[t]));return e}var qd="obfuse error occur";function eo(e,t){if(!e)throw new Error("[linked-list] "+(t||qd))}var $d=-1,Ma=function(){function e(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];this._head=null,this._tail=null,this._length=0,this.compare=new Nd,n.length>0&&n.forEach(function(o){t.append(o)})}return Object.defineProperty(e.prototype,"head",{get:function(){return this._head?this._head.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tail",{get:function(){return this._tail?this._tail.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopLength",{get:function(){var t=!1,n=1;if(!this._head)return 0;for(var i=this._head,o=this._head;o.next&&o.next.next;)if(o=o.next.next,i=i.next,i===o){t=!0;break}if(t){for(o=o.next;i!==o;)n++,o=o.next;return n}else return 0},enumerable:!0,configurable:!0}),e.prototype.getNode=function(t){var n=this._length;eo(n>0&&t>=0&&t<n,"[linked-list] index "+t+" out of scope of list, which length is "+n);for(var i=this._head,o=0;o<t;)i=i.next,o++;return i},e.prototype.get=function(t){var n=this.getNode(t);return n?n.value:null},e.prototype.find=function(t){var n=t.value,i=t.callback;if(!this._head)return null;for(var o=this._head;o;){if(i&&i(o.value)||n!==void 0&&this.compare.equal(o.value,n))return o;o=o.next}return null},e.prototype.indexOf=function(t){if(!this._head)return $d;for(var n=this._head,i=-1;n.next;){if(i++,this.compare.equal(n.value,t))return i;n=n.next}return n===this._tail&&this.compare.equal(n.value,t)&&(i+=1),i},e.prototype.first=function(t){eo(t>=0,"[linked-list] param 'num' ("+t+") should not less than 0");for(var n=this.iterator(),i=[],o=Math.min(t,this.length),s=0;s<o;s++){var r=n.next();i.push(r.value)}return i},e.prototype.toArray=function(){return Xt(this)},e.prototype.isEmpty=function(){return this._head===null},e.prototype.iterator=function(){var t;return vi(this,function(n){switch(n.label){case 0:t=this._head,n.label=1;case 1:return t?[4,t.value]:[3,3];case 2:return n.sent(),t=t.next,[3,1];case 3:return[2]}})},e.prototype[Symbol.iterator]=function(){return this.iterator()},e}(),ki=function(e){oi(t,e);function t(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return e.apply(this,Xt(n))||this}return t.prototype.append=function(n){var i=new Dr(n);return this._tail?(this._tail.next=i,this._tail=i):this._head=this._tail=i,this._length++,!0},t.prototype.prepend=function(n){var i=new Dr(n);return this._head?(i.next=this._head,this._head=i):this._head=this._tail=i,this._length++,!0},t.prototype.remove=function(n){var i=this._head;if(i){if(this.compare.equal(i.value,n))return i.next?(this._head=i.next,i.next=null):this._head=this._tail=null,this._length--,n;for(var o=i;;){if(this.compare.equal(i.value,n))return i.next?o.next=i.next:(this._tail=o,this._tail.next=null),i.next=null,this._length--,n;if(i.next)o=i,i=i.next;else return}}},t.prototype.removeHead=function(){var n=this._head;if(n)return this._head.next?(this._head=n.next,n.next=null):(this._head=null,this._tail=null),this._length--,n.value},t.prototype.removeTail=function(){var n=this._tail;if(n){if(!this._head.next)this._head=null,this._tail=null;else{for(var i=this._head;i.next!==n;)i=i.next;i.next=null,this._tail=i}return this._length--,n.value}},t.prototype.reverse=function(){if(this._head){var n=this._head,i=null,o;for(this._tail=this._head;n!==null;)o=n.next,n.next=i,i=n,n=o;this._head=i}},t.prototype.clone=function(){var n=this.toArray();return new(t.bind.apply(t,Xt([void 0],n)))},t}(Ma),Fd=function(e){oi(t,e);function t(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=e.apply(this,Xt(n))||this;return o.cyclization(),o}return t.prototype.iterator=function(){var n;return vi(this,function(i){switch(i.label){case 0:n=this._head,i.label=1;case 1:return n?[4,n.value]:[3,3];case 2:return i.sent(),n=n.next,n===this._head&&(n=null),[3,1];case 3:return[2]}})},t.prototype.circleIterator=function(){var n;return vi(this,function(i){switch(i.label){case 0:n=this._head,i.label=1;case 1:return n?[4,n.value]:[3,3];case 2:return i.sent(),n=n.next,[3,1];case 3:return[2]}})},t.prototype[Symbol.iterator]=function(){return this.iterator()},t.prototype.mapToNormalListFn=function(n){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];this.breakCircle();var s=e.prototype[n].apply(this,i);return this.cyclization(),s},t.prototype.getNode=function(n){return this.mapToNormalListFn("getNode",n)},t.prototype.append=function(n){return this.mapToNormalListFn("append",n)},t.prototype.prepend=function(n){return this.mapToNormalListFn("prepend",n)},t.prototype.find=function(n){return this.mapToNormalListFn("find",n)},t.prototype.indexOf=function(n){return this.mapToNormalListFn("indexOf",n)},t.prototype.remove=function(n){return this.mapToNormalListFn("remove",n)},t.prototype.removeHead=function(){return this.mapToNormalListFn("removeHead")},t.prototype.removeTail=function(){return this.mapToNormalListFn("removeTail")},t.prototype.first=function(n){eo(n>=0,"[linked-list] param 'num' ("+n+") should not less than 0");for(var i=this.circleIterator(),o=[],s=0;s<n;s++){var r=i.next();o.push(r.value)}return o},t.prototype.toArray=function(){return this.mapToNormalListFn("toArray")},t.prototype.reverse=function(){return this.mapToNormalListFn("reverse")},t}(ki);(function(e){oi(t,e);function t(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=e.apply(this,Xt(n))||this;return o.cyclization(),o}return t.prototype.breakCircle=function(){this._tail&&this._tail.next===this._head&&(this._tail.next=null)},t.prototype.cyclization=function(){this._tail&&this._tail.next===null&&(this._tail.next=this._head)},t.prototype.clone=function(){var n=this.toArray();return new(t.bind.apply(t,Xt([void 0],n)))},t})(Fd);var Ld=function(e){oi(t,e);function t(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return e.apply(this,Xt(n))||this}return t.prototype.append=function(n){var i=new Nr(n);return this._tail?(this._tail.next=i,i.prev=this._tail,this._tail=i):this._head=this._tail=i,this._length++,!0},t.prototype.prepend=function(n){var i=new Nr(n);return this._head?(i.next=this._head,this._head.prev=i,this._head=i):this._head=this._tail=i,this._length++,!0},t.prototype.remove=function(n){var i=this._head;if(i){if(this.compare.equal(i.value,n))return i.next?(this._head=i.next,this._head.prev=null,i.next=i.prev=null):this._head=this._tail=null,this._length--,n;for(;;){if(this.compare.equal(i.value,n))return i.next?(i.prev.next=i.next,i.next.prev=i.prev,i.next=i.prev=null):(i.prev.next=null,this._tail=i.prev,i.next=i.prev=null),this._length--,i.value;if(i.next)i=i.next;else return}}},t.prototype.removeHead=function(){var n=this._head;if(n)return this._head.next?(n.next.prev=null,this._head=n.next,n.next=null):(this._head=null,this._tail=null),this._length--,n.value},t.prototype.removeTail=function(){var n=this._tail;if(n)return this._head.next?(n.prev.next=null,this._tail=n.prev,n.next=n.prev=null):(this._head=null,this._tail=null),this._length--,n.value},t.prototype.reverse=function(){if(this._head){var n=this._head,i=null,o;for(this._tail=this._head;n!==null;)o=n.next,n.next=i,n.prev=o,i=n,n=o;this._head=i}},t.prototype.clone=function(){var n=this.toArray();return new(t.bind.apply(t,Xt([void 0],n)))},t}(Ma),Ud=function(e){oi(t,e);function t(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=e.apply(this,Xt(n))||this;return o.cyclization(),o}return t.prototype.iterator=function(){var n;return vi(this,function(i){switch(i.label){case 0:n=this._head,i.label=1;case 1:return n?[4,n.value]:[3,3];case 2:return i.sent(),n=n.next,n===this._head&&(n=null),[3,1];case 3:return[2]}})},t.prototype.circleIterator=function(){var n;return vi(this,function(i){switch(i.label){case 0:n=this._head,i.label=1;case 1:return n?[4,n.value]:[3,3];case 2:return i.sent(),n=n.next,[3,1];case 3:return[2]}})},t.prototype[Symbol.iterator]=function(){return this.iterator()},t.prototype.mapToNormalListFn=function(n){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];this.breakCircle();var s=e.prototype[n].apply(this,i);return this.cyclization(),s},t.prototype.getNode=function(n){return this.mapToNormalListFn("getNode",n)},t.prototype.append=function(n){return this.mapToNormalListFn("append",n)},t.prototype.prepend=function(n){return this.mapToNormalListFn("prepend",n)},t.prototype.find=function(n){return this.mapToNormalListFn("find",n)},t.prototype.indexOf=function(n){return this.mapToNormalListFn("indexOf",n)},t.prototype.remove=function(n){return this.mapToNormalListFn("remove",n)},t.prototype.removeHead=function(){return this.mapToNormalListFn("removeHead")},t.prototype.removeTail=function(){return this.mapToNormalListFn("removeTail")},t.prototype.first=function(n){eo(n>=0,"[linked-list] param 'num' ("+n+") should not less than 0");for(var i=this.circleIterator(),o=[],s=0;s<n;s++){var r=i.next();o.push(r.value)}return o},t.prototype.toArray=function(){return this.mapToNormalListFn("toArray")},t.prototype.reverse=function(){return this.mapToNormalListFn("reverse")},t}(Ld);(function(e){oi(t,e);function t(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=e.apply(this,Xt(n))||this;return o.cyclization(),o}return t.prototype.breakCircle=function(){this._tail&&this._head&&this._tail.next===this._head&&(this._tail.next=null,this._head.prev=null)},t.prototype.cyclization=function(){this._head&&this._tail&&this._tail.next===null&&(this._tail.next=this._head,this._head.prev=this._tail)},t.prototype.clone=function(){var n=this.toArray();return new(t.bind.apply(t,Xt([void 0],n)))},t})(Ud);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Kd(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var i=n.call(e),o,s=[],r;try{for(;(t===void 0||t-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s}function Vd(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Kd(arguments[t]));return e}var zd=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.queue=new(ki.bind.apply(ki,Vd([void 0],t)))}return Object.defineProperty(e.prototype,"length",{get:function(){return this.queue.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"peek",{get:function(){return this.queue.head},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return this.queue.isEmpty()},e.prototype.enqueue=function(t){return this.queue.append(t)},e.prototype.dequeue=function(){var t=this.queue.removeHead();return typeof t<"u"?t:void 0},e.prototype.toArray=function(){return this.queue.toArray()},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Gd(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var i=n.call(e),o,s=[],r;try{for(;(t===void 0||t-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s}function Wd(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Gd(arguments[t]));return e}var Jo=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.stack=new(ki.bind.apply(ki,Wd([void 0],t)))}return Object.defineProperty(e.prototype,"length",{get:function(){return this.stack.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"peek",{get:function(){return this.stack.tail},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return this.stack.isEmpty()},e.prototype.push=function(t){return this.stack.append(t)},e.prototype.pop=function(){var t=this.stack.removeTail();return typeof t<"u"?t:void 0},e.prototype.popBottom=function(){var t=this.stack.removeHead();return typeof t<"u"?t:void 0},e.prototype.toArray=function(){return this.stack.toArray()},e}(),Xd=function(){function e(t,n,i){i===void 0&&(i=0),this.startVertex=t,this.endVertex=n,this.weight=i}return e.prototype.getKey=function(){var t=this.startVertex.getKey(),n=this.endVertex.getKey();return t+"_"+n},e.prototype.reverse=function(){var t=this.startVertex;return this.startVertex=this.endVertex,this.endVertex=t,this},e.prototype.clone=function(){return new e(this.startVertex,this.endVertex,this.weight)},e.prototype.toString=function(){return this.getKey()},e}();function ys(e,t,n){if(n===void 0&&(n="cc-graph"),!e)throw new Error((n?"["+n+"]":"")+" Invariant failed: "+t)}function Hd(e,t){t===void 0&&(t=!0);var n=typeof e<"u"&&e!==null;return t?n&&e!=="undefined"&&e!=="null":n}var Rr=function(){function e(t){ys(Hd(t),"Graph vertex must have a value"),this.value=t,this.edges=new Map}return e.prototype.addEdge=function(t){return this.edges.set(t.getKey(),t),this},e.prototype.deleteEdge=function(t){this.edges.delete(t.getKey())},e.prototype.getNeighbors=function(){var t=this,n=this.getEdges(),i=function(o){return o.startVertex===t?o.endVertex:o.startVertex};return n.map(i)},e.prototype.getEdges=function(){return Array.from(this.edges.values())},e.prototype.getDegree=function(){return this.getEdges().length},e.prototype.hasEdge=function(t){var n=this.getEdges().find(function(i){return i===t});return!!n},e.prototype.hasNeighbor=function(t){var n=this.getEdges().find(function(i){return i.startVertex===t||i.endVertex===t});return!!n},e.prototype.findEdge=function(t){var n=function(o){return o.startVertex===t||o.endVertex===t},i=this.getEdges().find(n);return i||null},e.prototype.getKey=function(){return this.value},e.prototype.deleteAllEdges=function(){var t=this;return this.getEdges().forEach(function(n){return t.deleteEdge(n)}),this},e.prototype.toString=function(t){return t?t(this.value):""+this.value},e}();function qr(e,t,n,i){if(e){t.push(e),i.set(e.getKey(),!0);var o=e.getNeighbors().filter(function(s){return!i.get(s.getKey())});n.push(o)}}function $r(e,t,n){var i=e.pop();i&&n.set(i.getKey(),!1),t.pop()}var Jd=function(){function e(t){t===void 0&&(t=!1),this.vertices={},this.edges={},this.isDirected=t}return e.prototype.addVertex=function(t){return this.vertices[t.getKey()]=t,this},e.prototype.getVertexByKey=function(t){return this.vertices[t]},e.prototype.getNeighbors=function(t){return t.getNeighbors()},e.prototype.getAllVertices=function(){return Object.values(this.vertices)},e.prototype.getAllEdges=function(){return Object.values(this.edges)},e.prototype.addEdge=function(t,n){if(n===void 0&&(n=!1),this.edges[t.getKey()]){if(n)return this;ys(!1,"Edge has already been added before")}var i=this.getVertexByKey(t.startVertex.getKey()),o=this.getVertexByKey(t.endVertex.getKey());if(i||(this.addVertex(t.startVertex),i=this.getVertexByKey(t.startVertex.getKey())),o||(this.addVertex(t.endVertex),o=this.getVertexByKey(t.endVertex.getKey())),this.edges[t.getKey()]=t,this.isDirected)i.addEdge(t);else{i.addEdge(t);var s=t.clone();o.addEdge(s.reverse())}return this},e.prototype.deleteEdge=function(t,n){if(n===void 0&&(n=!1),!this.edges[t.getKey()]){if(n)return this;ys(!1,"Edge not found in graph")}delete this.edges[t.getKey()];var i=this.getVertexByKey(t.startVertex.getKey()),o=this.getVertexByKey(t.endVertex.getKey());return i.deleteEdge(t),o.deleteEdge(t),this},e.prototype.findEdge=function(t,n){var i=this.getVertexByKey(t.getKey());return i?i.findEdge(n):null},e.prototype.getWeight=function(){return this.getAllEdges().reduce(function(t,n){return t+n.weight},0)},e.prototype.reverse=function(){var t=this;return this.getAllEdges().forEach(function(n){t.deleteEdge(n),n.reverse(),t.addEdge(n)}),this},e.prototype.getVerticesIndices=function(){var t={};return this.getAllVertices().forEach(function(n,i){t[n.getKey()]=i}),t},e.prototype.getAdjacencyMatrix=function(){var t=this,n=this.getAllVertices(),i=this.getVerticesIndices(),o=Array(n.length).fill(null).map(function(){return Array(n.length).fill(1/0)});return n.forEach(function(s,r){s.getNeighbors().forEach(function(a){var c=i[a.getKey()],d=t.findEdge(s,a);d&&(o[r][c]=d.weight)})}),o},e.prototype.toString=function(){return Object.keys(this.vertices).toString()},e.prototype.bfs=function(t){var n,i,o;return Ho(this,function(s){switch(s.label){case 0:n=new Map,i=new zd,i.enqueue(t),s.label=1;case 1:return i.isEmpty()?[3,4]:(o=i.dequeue(),o&&!n.has(o.getKey())?[4,o]:[3,3]);case 2:s.sent(),n.set(o.getKey(),o),o.getNeighbors().forEach(function(r){return i.enqueue(r)}),s.label=3;case 3:return[3,1];case 4:return[2]}})},e.prototype.dfs=function(t){var n,i,o;return Ho(this,function(s){switch(s.label){case 0:n=new Map,i=new Jo,i.push(t),s.label=1;case 1:return i.isEmpty()?[3,4]:(o=i.pop(),o&&!n.has(o.getKey())?[4,o]:[3,3]);case 2:s.sent(),n.set(o.getKey(),o),o.getNeighbors().forEach(function(r){return i.push(r)}),s.label=3;case 3:return[3,1];case 4:return[2]}})},e.prototype.findAllPath=function(t,n){var i,o,s,r,a,c,d;return Ho(this,function(l){switch(l.label){case 0:return i=[],t!==n?[3,2]:(i.push(t),[4,i]);case 1:return l.sent(),[2];case 2:o=new Map,s=new Jo,r=new Jo,qr(t,s,r,o),l.label=3;case 3:if(s.isEmpty())return[3,6];if(a=r.pop(),a&&a.length)c=a.shift(),r.push(a),c&&qr(c,s,r,o);else return r.push(a),$r(s,r,o),[3,3];return d=s.peek,d!==n?[3,5]:[4,s.toArray()];case 4:l.sent(),$r(s,r,o),l.label=5;case 5:return[3,3];case 6:return[2]}})},e}();const Zd=yd(),Ea=Zd.public.appEnv;console.log("config env: ",Ea);const Qd={pro:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0x4fb259302630bf727f1b489e0597131fe4d8ccba12074bb7fedba3886c008945",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.mainnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"mainnet",networkTip:"Mainnet",api:"https://api.cetus.zone",accountAddress:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",accountPublicKey:"0x854923b882d2451730a11690f7da896e3b497e2a47b3383e86b62173bbc1414c",ammSite:"https://alpha.cetus.zone",newPositionAddress:"0x5b0b1c0d7a22fd7c59dedc00f906e9cb68033d13589a739b0d18cf25e317bdd4",fraphQLUrl:"https://indexer.mainnet.aptoslabs.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.notifi.network/gql",notifiEnv:"Production",hasCreatePool:!1,hasNotifi:!1,swapDefaultPair:{fromCoin:"0x5e156f1207d0ebfa19a9eeff00d62a282278fb8719f4fab3a586a0a2c0fffbea::coin::T",toCoin:"0x1::aptos_coin::AptosCoin"}},Sui:{officialRpcUrl:"https://fullnode.mainnet.sui.io",fullRpcUrl:"https://fullnode.mainnet.sui.io",rpcName:"Sui Official",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"mainnet",networkTip:"Mainnet",api:"https://api-sui.cetus.zone",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",swapCountUrl:"https://api-sui.cetus.zone/v2/sui/swap/count",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x326ce9894f08dcaa337fa232641cc34db957aec9ff6614c1186bc9a7508df0bb"},cetus_config:{package_id:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",published_at:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",config:{coin_list_id:"0x8cbc11d9e10140db3d230f50b4d30e9b721201c0083615441707ffec1ef77b23",launchpad_pools_id:"0x1098fac992eab3a0ab7acf15bb654fc1cf29b5a6142c4ef1058e6c408dd15115",clmm_pools_id:"0x15b6a27dd9ae03eb455aba03b39e29aad74abd3757b8e18c0755651b2ae5b71e",admin_cap_id:"0x39d78781750e193ce35c45ff32c6c0c3f2941fa3ddaf8595c90c555589ddb113",global_config_id:"0x0408fa4e4a4c03cc0de8f23d0c2bbfe8913d178713c9a271ed4080973fe42d8f",coin_list_handle:"0x49136005e90e28c4695419ed4194cc240603f1ea8eb84e62275eaff088a71063",launchpad_pools_handle:"0x5e194a8efcf653830daf85a85b52e3ae8f65dc39481d54b2382acda25068375c",clmm_pools_handle:"0x37f60eb2d9d227949b95da8fea810db3c32d1e1fa8ed87434fc51664f87d83cb"}},clmm_pool:{package_id:"0x1eabed72c53feb3805120a081dc15963c204dc8d091542592abaf7a35689b2fb",published_at:"0x70968826ad1b4ba895753f634b0aea68d0672908ca1075a2abdf0fc9e0b2fc6a",config:{pools_id:"0xf699e7f2276f5c9a75944b37a0c5b5d9ddfd2471bf6242483b03ab2887d198d0",global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b"}},integrate:{package_id:"0x996c4d9480708fb8b92aa7acf819fb0497b5ec8e65ba06601cae2fb6db3312c3",published_at:"0x8faab90228e4c4df91c41626bbaefa19fc25c514405ac64de54578dec9e6f5ee"},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0x92aee86c01c79146d23938a00c7fff725ee0688c389be36d1bcbe03761b466c6",published_at:"0x92aee86c01c79146d23938a00c7fff725ee0688c389be36d1bcbe03761b466c6"},aggregatorUrl:"https://api-sui.cetus.zone/router",aggregatorv2Url:"https://api-sui.cetus.zone/router_v2",aggregatorV2:{package_id:"0x640d44dbdc0ede165c7cc417d7f57f1b09648083109de7132c6b3fb15861f5ee",published_at:"0x640d44dbdc0ede165c7cc417d7f57f1b09648083109de7132c6b3fb15861f5ee"},launchpad:{package_id:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",published_at:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",config:{pools_id:"0xfd8d37f7a1276878972d240302c8efe32f577220c1bbc6c8984d8b60dddfcab3",admin_cap_id:"0x66c70d58c69353714cc6fe2d3a62492d605a96a9821e2bd8274de17219c69980",config_cap_id:"0x02b8d23f033687579966e182c776fe0287cacdbb18bff56c29f141e29a18a4d1"}},ido:{package_id:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",published_at:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",config:{pools_id:"0xefc209b47acf1f23b29d166440904600229e520ad36228aaf2329b7c16be9762",admin_cap_id:"0x281859d366951830aeeda90779aa170d8ee6845875545470d33ecb890e78c8ce",package_version_id:"0xc93dc996106770af5f4e979b6808518f8cee080f22f35b936f071f59d834bb22"}},xcetusTokenAddress:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",xcetus:{package_id:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",published_at:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",config:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49"}},xcetus_dividends:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0x5aa58e1623885bd93de2331d05c29bf4930e54e56beeabcab8fe5385de2d31dc",config:{dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5",dividend_admin_id:"0x682ba823134f156eac2bcfb27d85a284954a0e61998dc628c40b9bcb4a46ff30",dividend_settle_id:"0xade40abe9f6dd10b83b11085be18f07b63b681cf1c169b041fa16854403388c5",venft_dividends_id:"0x9dcdb97b4307684bedaeaf803d381b12321a31ecbb9dad7df2cd5f64384f9456",venft_dividends_id_v2:"0xaa21fbc1707786d56302952f8327362f4eb9a431a5bc574834e6d46125390de3"}},cetus_faucet:{package_id:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",published_at:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b"},vaults:{package_id:"0xd3453d9be7e35efe222f78a810bb3af1859fd1600926afced8b4936d825c9a05",published_at:"0xabbd278f738affe762e9df4765b3409bb1e86a355a4f611ad82b278c18108918",config:{admin_cap_id:"0x78a42978709c4032fab7b33b782b5bcef64c1c6603250bf23644650b72144375",vaults_manager_id:"0x25b82dd2f5ee486ed1c8af144b89a8931cd9c29dee3a86a1bfe194fdea9d04a6",vaults_pool_handle:"0x9036bcc5aa7fd2cceec1659a6a1082871f45bc400c743f50063363457d1738bd",haedal:{package_id:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d",published_at:"0x1d56b8ec33c3fae897eb7bb1acb79914e8152faed614868928e684c25c8b198d",version:1,config:{staking_id:"0x47b224762220393057ebf4f70501b6e657c3e56684737568439a04f80849b2ca",coin_type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI"}},volo:{package_id:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",published_at:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",version:1,config:{native_pool:"0x7fa2faa111b8c65bea48a23049bfd81ca8f971a262d981dcd9a17c3825cb5baf",vsui_metadata:"0x680cd26af32b2bde8d3361e804c53ec1d1cfe24c7f039eb7f549e8dfde389a60",coin_type:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT"}},aftermath:{package_id:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",published_at:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",version:1,config:{staked_sui_vault:"0x2f8f6d5da7f13ea37daa397724280483ed062769813b6f31e9788e59cc88994d",referral_vault:"0x4ce9a19b594599536c53edb25d22532f82f18038dc8ef618afd00fbbfb9845ef",safe:"0xeb685899830dd5837b47007809c76d91a098d52aabbf61e8ac467c59e5cc4610",validator_address:"0xd30018ec3f5ff1a3c75656abf927a87d7f0529e6dc89c7ddd1bd27ecb05e3db2",coin_type:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI"}}}},xtoken:{package_id:"",published_at:"",config:{xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""}},xtoken_dividends:{package_id:"",published_at:"",config:{dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""}},token_faucet:{package_id:"",published_at:""},booster:{package_id:"",published_at:"",config:{booster_config_id:"",booster_pool_handle:""}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},hasCreatePool:!0,hasNotifi:!0,hasRouter:!0,hasVault:!0,vaultFilter:!0,hasLimitOrder:!0,swapDefaultPair:{fromCoin:"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN",toCoin:"0x2::sui::SUI"},frams:{package_id:"0x11ea791d82b5742cc8cab0bf7946035c97d9001d7c3803a93f119753da66f526",published_at:"0xd817d90368dafcbf3b051e96546dea6209bffad23289d66025beef80354dcd6b",config:{global_config_id:"0x21215f2f6de04b57dd87d9be7bb4e15499aec935e36078e2488f36436d64996e",rewarder_manager_id:"0xe0e155a88c77025056da08db5b1701a91b79edb6167462f768e387c3ed6614d5",rewarder_manager_handle:"0xb32e312cbb3367d6f3d2b4e57c9225e903d29b7b9f612dae2ddf75bdeb26a5aa",admin_cap_id:"0xf10fbf1fea5b7aeaa524b87769461a28c5c977613046360093673991f26d886c"}},limit_order:{package_id:"0x533fab9a116080e2cb1c87f1832c1bf4231ab4c32318ced041e75cc28604bba9",published_at:"0x533fab9a116080e2cb1c87f1832c1bf4231ab4c32318ced041e75cc28604bba9",config:{rate_orders_indexer_id:"0xe7fa62b6fc095ed5659b85c735f4322059e1f4616dcf3343adece6e7eb52bf47",rate_orders_indexer_handle:"0x81a95c812cab1c9cc7a1c10446d93d2d9517097211c72b544f7efed33b540bcc",global_config_id:"0xd3403f23a053b52e5c4ef0c2a8be316120c435ec338f2596647b6befd569fd9c",token_list_handle:"0x644a7f05eff2a1b4c266d7ce849c8494fb068a4e29037c7c523e5eb822389d8d",user_orders_indexer_id:"0x7f851ac19e438f97e78a5335eed4f12766a3a0ae94340bab7956a402f0e6212e",user_orders_indexer_handle:"0x84703679acd2eeaee8de4945be79d029ab94966bc22e0f6cfd696032fd31bbc7"}},cetus_integrate2:{package_id:"0x0ee90618ca31b06a80124118a6c2f51825efd6a32e36d5bfebb7a18b8f4b6c7f",published_at:"0x878ffd6f1a0b1fe8a5b93822d1c1de1ed9399e784ac2b9252bbb5c61b674debc"}}},pre:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xb8a7f7731b03d9b4b6acc21b88dbae2a96ed7e3c3e87c722bd74315b520633d6",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.mainnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"mainnet",networkTip:"Mainnet",api:"https://api-beta.cetus.zone",accountAddress:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",accountPublicKey:"0x854923b882d2451730a11690f7da896e3b497e2a47b3383e86b62173bbc1414c",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"0x5b0b1c0d7a22fd7c59dedc00f906e9cb68033d13589a739b0d18cf25e317bdd4",fraphQLUrl:"https://indexer.mainnet.aptoslabs.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.notifi.network/gql",notifiEnv:"Production",hasCreatePool:!1,hasNotifi:!1,swapDefaultPair:{fromCoin:"0x5e156f1207d0ebfa19a9eeff00d62a282278fb8719f4fab3a586a0a2c0fffbea::coin::T",toCoin:"0x1::aptos_coin::AptosCoin"}},Sui:{officialRpcUrl:"https://fullnode.mainnet.sui.io",fullRpcUrl:"https://fullnode.mainnet.sui.io",rpcName:"Sui Official",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"mainnet",networkTip:"Mainnet",api:"https://api-sui.cetus.zone",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",swapCountUrl:"https://api-sui.cetus.zone/v2/sui/swap/count",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x326ce9894f08dcaa337fa232641cc34db957aec9ff6614c1186bc9a7508df0bb"},cetus_config:{package_id:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",published_at:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",config:{coin_list_id:"0x8cbc11d9e10140db3d230f50b4d30e9b721201c0083615441707ffec1ef77b23",launchpad_pools_id:"0x1098fac992eab3a0ab7acf15bb654fc1cf29b5a6142c4ef1058e6c408dd15115",clmm_pools_id:"0x15b6a27dd9ae03eb455aba03b39e29aad74abd3757b8e18c0755651b2ae5b71e",admin_cap_id:"0x39d78781750e193ce35c45ff32c6c0c3f2941fa3ddaf8595c90c555589ddb113",global_config_id:"0x0408fa4e4a4c03cc0de8f23d0c2bbfe8913d178713c9a271ed4080973fe42d8f",coin_list_handle:"0x49136005e90e28c4695419ed4194cc240603f1ea8eb84e62275eaff088a71063",launchpad_pools_handle:"0x5e194a8efcf653830daf85a85b52e3ae8f65dc39481d54b2382acda25068375c",clmm_pools_handle:"0x37f60eb2d9d227949b95da8fea810db3c32d1e1fa8ed87434fc51664f87d83cb"}},clmm_pool:{package_id:"0x1eabed72c53feb3805120a081dc15963c204dc8d091542592abaf7a35689b2fb",published_at:"0x70968826ad1b4ba895753f634b0aea68d0672908ca1075a2abdf0fc9e0b2fc6a",config:{pools_id:"0xf699e7f2276f5c9a75944b37a0c5b5d9ddfd2471bf6242483b03ab2887d198d0",global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b"}},integrate:{package_id:"0x996c4d9480708fb8b92aa7acf819fb0497b5ec8e65ba06601cae2fb6db3312c3",published_at:"0x8faab90228e4c4df91c41626bbaefa19fc25c514405ac64de54578dec9e6f5ee"},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0x92aee86c01c79146d23938a00c7fff725ee0688c389be36d1bcbe03761b466c6",published_at:"0x92aee86c01c79146d23938a00c7fff725ee0688c389be36d1bcbe03761b466c6"},aggregatorUrl:"https://api-sui.cetus.zone/router",aggregatorv2Url:"https://api-sui.cetus.zone/router_v2",aggregatorV2:{package_id:"0x640d44dbdc0ede165c7cc417d7f57f1b09648083109de7132c6b3fb15861f5ee",published_at:"0x640d44dbdc0ede165c7cc417d7f57f1b09648083109de7132c6b3fb15861f5ee"},launchpad:{package_id:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",published_at:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",config:{pools_id:"0xfd8d37f7a1276878972d240302c8efe32f577220c1bbc6c8984d8b60dddfcab3",admin_cap_id:"0x66c70d58c69353714cc6fe2d3a62492d605a96a9821e2bd8274de17219c69980",config_cap_id:"0x02b8d23f033687579966e182c776fe0287cacdbb18bff56c29f141e29a18a4d1"}},ido:{package_id:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",published_at:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",config:{pools_id:"0xefc209b47acf1f23b29d166440904600229e520ad36228aaf2329b7c16be9762",admin_cap_id:"0x281859d366951830aeeda90779aa170d8ee6845875545470d33ecb890e78c8ce",package_version_id:"0xc93dc996106770af5f4e979b6808518f8cee080f22f35b936f071f59d834bb22"}},xcetusTokenAddress:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",xcetus:{package_id:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",published_at:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",config:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49"}},xcetus_dividends:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0x5aa58e1623885bd93de2331d05c29bf4930e54e56beeabcab8fe5385de2d31dc",config:{dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5",dividend_admin_id:"0x682ba823134f156eac2bcfb27d85a284954a0e61998dc628c40b9bcb4a46ff30",dividend_settle_id:"0xade40abe9f6dd10b83b11085be18f07b63b681cf1c169b041fa16854403388c5",venft_dividends_id:"0x9dcdb97b4307684bedaeaf803d381b12321a31ecbb9dad7df2cd5f64384f9456",venft_dividends_id_v2:"0xaa21fbc1707786d56302952f8327362f4eb9a431a5bc574834e6d46125390de3"}},cetus_faucet:{package_id:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",published_at:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b"},vaults:{package_id:"0xd3453d9be7e35efe222f78a810bb3af1859fd1600926afced8b4936d825c9a05",published_at:"0xabbd278f738affe762e9df4765b3409bb1e86a355a4f611ad82b278c18108918",config:{admin_cap_id:"0x78a42978709c4032fab7b33b782b5bcef64c1c6603250bf23644650b72144375",vaults_manager_id:"0x25b82dd2f5ee486ed1c8af144b89a8931cd9c29dee3a86a1bfe194fdea9d04a6",vaults_pool_handle:"0x9036bcc5aa7fd2cceec1659a6a1082871f45bc400c743f50063363457d1738bd",haedal:{package_id:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d",published_at:"0x1d56b8ec33c3fae897eb7bb1acb79914e8152faed614868928e684c25c8b198d",version:1,config:{staking_id:"0x47b224762220393057ebf4f70501b6e657c3e56684737568439a04f80849b2ca",coin_type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI"}},volo:{package_id:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",published_at:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",version:1,config:{native_pool:"0x7fa2faa111b8c65bea48a23049bfd81ca8f971a262d981dcd9a17c3825cb5baf",vsui_metadata:"0x680cd26af32b2bde8d3361e804c53ec1d1cfe24c7f039eb7f549e8dfde389a60",coin_type:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT"}},aftermath:{package_id:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",published_at:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",version:1,config:{staked_sui_vault:"0x2f8f6d5da7f13ea37daa397724280483ed062769813b6f31e9788e59cc88994d",referral_vault:"0x4ce9a19b594599536c53edb25d22532f82f18038dc8ef618afd00fbbfb9845ef",safe:"0xeb685899830dd5837b47007809c76d91a098d52aabbf61e8ac467c59e5cc4610",validator_address:"0xd30018ec3f5ff1a3c75656abf927a87d7f0529e6dc89c7ddd1bd27ecb05e3db2",coin_type:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI"}}}},xtoken:{package_id:"",published_at:"",config:{xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""}},xtoken_dividends:{package_id:"",published_at:"",config:{dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""}},token_faucet:{package_id:"",published_at:""},booster:{package_id:"",published_at:"",config:{booster_config_id:"",booster_pool_handle:""}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},hasCreatePool:!0,hasNotifi:!0,hasRouter:!0,hasVault:!0,vaultFilter:!1,hasLimitOrder:!0,swapDefaultPair:{fromCoin:"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN",toCoin:"0x2::sui::SUI"},frams:{package_id:"0x11ea791d82b5742cc8cab0bf7946035c97d9001d7c3803a93f119753da66f526",published_at:"0xd817d90368dafcbf3b051e96546dea6209bffad23289d66025beef80354dcd6b",config:{global_config_id:"0x21215f2f6de04b57dd87d9be7bb4e15499aec935e36078e2488f36436d64996e",rewarder_manager_id:"0xe0e155a88c77025056da08db5b1701a91b79edb6167462f768e387c3ed6614d5",rewarder_manager_handle:"0xb32e312cbb3367d6f3d2b4e57c9225e903d29b7b9f612dae2ddf75bdeb26a5aa",admin_cap_id:"0xf10fbf1fea5b7aeaa524b87769461a28c5c977613046360093673991f26d886c"}},limit_order:{package_id:"0x533fab9a116080e2cb1c87f1832c1bf4231ab4c32318ced041e75cc28604bba9",published_at:"0x533fab9a116080e2cb1c87f1832c1bf4231ab4c32318ced041e75cc28604bba9",config:{rate_orders_indexer_id:"0xe7fa62b6fc095ed5659b85c735f4322059e1f4616dcf3343adece6e7eb52bf47",rate_orders_indexer_handle:"0x81a95c812cab1c9cc7a1c10446d93d2d9517097211c72b544f7efed33b540bcc",global_config_id:"0xd3403f23a053b52e5c4ef0c2a8be316120c435ec338f2596647b6befd569fd9c",token_list_handle:"0x644a7f05eff2a1b4c266d7ce849c8494fb068a4e29037c7c523e5eb822389d8d",user_orders_indexer_id:"0x7f851ac19e438f97e78a5335eed4f12766a3a0ae94340bab7956a402f0e6212e",user_orders_indexer_handle:"0x84703679acd2eeaee8de4945be79d029ab94966bc22e0f6cfd696032fd31bbc7"}},cetus_integrate2:{package_id:"0x0ee90618ca31b06a80124118a6c2f51825efd6a32e36d5bfebb7a18b8f4b6c7f",published_at:"0x878ffd6f1a0b1fe8a5b93822d1c1de1ed9399e784ac2b9252bbb5c61b674debc"}}},preRoute:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xb8a7f7731b03d9b4b6acc21b88dbae2a96ed7e3c3e87c722bd74315b520633d6",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.mainnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"mainnet",networkTip:"Mainnet",api:"https://api-beta.cetus.zone",accountAddress:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",accountPublicKey:"0x854923b882d2451730a11690f7da896e3b497e2a47b3383e86b62173bbc1414c",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"0x5b0b1c0d7a22fd7c59dedc00f906e9cb68033d13589a739b0d18cf25e317bdd4",fraphQLUrl:"https://indexer.mainnet.aptoslabs.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.notifi.network/gql",notifiEnv:"Production",hasCreatePool:!1,hasNotifi:!0,swapDefaultPair:{fromCoin:"0x5e156f1207d0ebfa19a9eeff00d62a282278fb8719f4fab3a586a0a2c0fffbea::coin::T",toCoin:"0x1::aptos_coin::AptosCoin"}},Sui:{fullRpcUrl:"https://fullnode.mainnet.sui.io",rpcName:"Sui Official",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"mainnet",networkTip:"Mainnet",api:"https://api-sui.cetus.zone",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x326ce9894f08dcaa337fa232641cc34db957aec9ff6614c1186bc9a7508df0bb"},cetus_config:{package_id:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",published_at:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",config:{coin_list_id:"0x8cbc11d9e10140db3d230f50b4d30e9b721201c0083615441707ffec1ef77b23",launchpad_pools_id:"0x1098fac992eab3a0ab7acf15bb654fc1cf29b5a6142c4ef1058e6c408dd15115",clmm_pools_id:"0x15b6a27dd9ae03eb455aba03b39e29aad74abd3757b8e18c0755651b2ae5b71e",admin_cap_id:"0x39d78781750e193ce35c45ff32c6c0c3f2941fa3ddaf8595c90c555589ddb113",global_config_id:"0x0408fa4e4a4c03cc0de8f23d0c2bbfe8913d178713c9a271ed4080973fe42d8f",coin_list_handle:"0x49136005e90e28c4695419ed4194cc240603f1ea8eb84e62275eaff088a71063",launchpad_pools_handle:"0x5e194a8efcf653830daf85a85b52e3ae8f65dc39481d54b2382acda25068375c",clmm_pools_handle:"0x37f60eb2d9d227949b95da8fea810db3c32d1e1fa8ed87434fc51664f87d83cb"}},clmm_pool:{package_id:"0x1eabed72c53feb3805120a081dc15963c204dc8d091542592abaf7a35689b2fb",published_at:"0xfa36bcb799278bddaf295991b2d3ce039013b1dd60dfd7183dee135fdadbc4be",config:{pools_id:"0xf699e7f2276f5c9a75944b37a0c5b5d9ddfd2471bf6242483b03ab2887d198d0",global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b"}},integrate:{package_id:"0x996c4d9480708fb8b92aa7acf819fb0497b5ec8e65ba06601cae2fb6db3312c3",published_at:"0x996c4d9480708fb8b92aa7acf819fb0497b5ec8e65ba06601cae2fb6db3312c3"},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0xac95e8a5e873cfa2544916c16fe1461b6a45542d9e65504c1794ae390b3345a7",published_at:"0xac95e8a5e873cfa2544916c16fe1461b6a45542d9e65504c1794ae390b3345a7"},aggregatorUrl:"https://api-sui.cetus.zone/router1",launchpad:{package_id:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",published_at:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",config:{pools_id:"0xccc10403ab3da4ae943847908e0e674fe1fdab81c6383e4c6dcd0eea0edade3d",admin_cap_id:"0x8a72713049dbcfc40902ff209dc5e6066fe455d152baa235957c84d7a3b875ed",config_cap_id:"0x16492b4252b01debb60f8a825334020d7fdb9d895b52f8139c98618de30817fc",config_pools_id:"0x3b8a3b1fb77e7b21d1f6b6b3afbe083a35621fd8a0fcf40e87cee5c0ef0c51e0"}},ido:{package_id:"0x7cc8461d20ad82d3851123a64bed22883199b465763ee53b1b529fba1f4e15cc",published_at:"0x9f63e8926719bcb45df55fb60b4444f4d50309bff2e85cccc1fdb91c3e4653a2",config:{pools_id:"0x68b4b6bd15aa086df8f8d94f62fb5b38817a02cc288802d1637e1febae46f545",admin_cap_id:"0x5a304d63a5421a3fbc190b3d124f7ea3cdf56b1cb8fd3e0bf4855d129075caef",package_version_id:"0xceab2289e0968f0e7172ce702af8f28a678570afa6b139e97bc344f0290672d6"}},xcetus:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0xbd63384b94d047a62e82c42f0566a04e52dd58f80266f84d8ab1164e970e0282",config:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49"}},xcetus_dividends:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0xbd63384b94d047a62e82c42f0566a04e52dd58f80266f84d8ab1164e970e0282",config:{dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5",dividend_admin_id:"",dividend_settle_id:""}},cetus_faucet:{package_id:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",published_at:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b"},xtoken:{package_id:"",published_at:"",config:{xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""}},xtoken_dividends:{package_id:"",published_at:"",config:{dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""}},token_faucet:{package_id:"",published_at:""},booster:{package_id:"",published_at:"",config:{booster_config_id:"",booster_pool_handle:""}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},hasCreatePool:!1,hasNotifi:!1,swapDefaultPair:{fromCoin:"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN",toCoin:"0x2::sui::SUI"}}},test:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xce854db9e3d7ae088359dbc54e2d425370c86a010b7656a272019abd9abf5b5a",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.testnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"testnet",networkTip:"Testnet",api:"https://api.devcetus.com",accountAddress:"0x251dda55e5071be8c761c8a99d7af559ccb6ccc52ad3f945712d3ae8b87c35e0",accountPublicKey:"0x40b00ab4323dddef193e9fef41830a96456a8b875c4e5cb5a4e666d9a75fed51",ammSite:"https://test-cetus.netlify.app",newPositionAddress:"0x3904fc6d0dcb6e1937a6aced4597ec383afc752676d89f1d59b3d30b959fe161",fraphQLUrl:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.dev.notifi.network/gql",notifiEnv:"Development",hasCreatePool:!1,hasNotifi:!1,swapDefaultPair:{fromCoin:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75::coin::CetusUSDC",toCoin:"0x1::aptos_coin::AptosCoin"}},Sui:{officialRpcUrl:"https://fullnode.testnet.sui.io",fullRpcUrl:"https://fullnode.testnet.sui.io",faucetURL:"",explorerUrl:"https://explorer.sui.io/",explorerUrl1:"https://testnet.suivision.xyz",network:"testnet",networkTip:"Testnet",api:"https://api-sui.devcetus.com",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",swapCountUrl:"https://api-sui.devcetus.com/v2/sui/swap/count/v3",faucet:{faucet_display:"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc",faucet_router:"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc"},simulationAccount:{address:"0xcd0247d0b67e53dde69b285e7a748e3dc390e8a5244eb9dd9c5c53d95e4cf0aa"},cetus_config:{package_id:"0xf5ff7d5ba73b581bca6b4b9fa0049cd320360abd154b809f8700a8fd3cfaf7ca",published_at:"0xf5ff7d5ba73b581bca6b4b9fa0049cd320360abd154b809f8700a8fd3cfaf7ca",config:{coin_list_id:"0x257eb2ba592a5480bba0a97d05338fab17cc3283f8df6998a0e12e4ab9b84478",launchpad_pools_id:"0xdc3a7bd66a6dcff73c77c866e87d73826e446e9171f34e1c1b656377314f94da",clmm_pools_id:"0x26c85500f5dd2983bf35123918a144de24e18936d0b234ef2b49fbb2d3d6307d",admin_cap_id:"0x1a496f6c67668eb2c27c99e07e1d61754715c1acf86dac45020c886ac601edb8",global_config_id:"0xe1f3db327e75f7ec30585fa52241edf66f7e359ef550b533f89aa1528dd1be52",coin_list_handle:"0x3204350fc603609c91675e07b8f9ac0999b9607d83845086321fca7f469de235",launchpad_pools_handle:"0xae67ff87c34aceea4d28107f9c6c62e297a111e9f8e70b9abbc2f4c9f5ec20fd",clmm_pools_handle:"0xd28736923703342b4752f5ed8c2f2a5c0cb2336c30e1fed42b387234ce8408ec"}},clmm_pool:{package_id:"0x0868b71c0cba55bf0faf6c40df8c179c67a4d0ba0e79965b68b3d72d7dfbf666",published_at:"0x084dbc14f8f6b50e4e1d6828ebf1f93fd1b1d2502b121bc787937893793417b0",config:{pools_id:"0xc090b101978bd6370def2666b7a31d7d07704f84e833e108a969eda86150e8cf",global_config_id:"0x6f4149091a5aea0e818e7243a13adcfb403842d670b9a2089de058512620687a",global_vault_id:"0xf3114a74d54cbe56b3e68f9306661c043ede8c6615f0351b0c3a93ce895e1699"}},integrate:{package_id:"0x8627c5cdcd8b63bc3daa09a6ab7ed81a829a90cafce6003ae13372d611fbb1a9",published_at:"0xe26cb89a7c3bb9a00b396e278f4f1f90aae02d0da37cd4b0c4b4977ca95568ef"},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0xa34ffca2c6540e1ca9e53963ab43e7b1eed7b82e37696c743bb7c6179c15dfa6",published_at:"0xa34ffca2c6540e1ca9e53963ab43e7b1eed7b82e37696c743bb7c6179c15dfa6"},aggregatorUrl:"https://api-sui.devcetus.com/router",aggregatorv2Url:"https://api-sui.devcetus.com/router_v2",aggregatorV2:{package_id:"0xf17e31b16c325622501981c106bb761d3fd9a60aab746300c59d47ef90f92fc0",published_at:"0xf17e31b16c325622501981c106bb761d3fd9a60aab746300c59d47ef90f92fc0"},launchpad:{package_id:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",published_at:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",config:{pools_id:"0xccc10403ab3da4ae943847908e0e674fe1fdab81c6383e4c6dcd0eea0edade3d",admin_cap_id:"0x8a72713049dbcfc40902ff209dc5e6066fe455d152baa235957c84d7a3b875ed",config_cap_id:"0x16492b4252b01debb60f8a825334020d7fdb9d895b52f8139c98618de30817fc",config_pools_id:"0x3b8a3b1fb77e7b21d1f6b6b3afbe083a35621fd8a0fcf40e87cee5c0ef0c51e0"}},ido:{package_id:"0x1352bf18ef20458f7cc773852d4a90b240015a6a54479dda3a1debfc500bf044",published_at:"0xbd09a0889ea9970b821512428bab3e2fd01e16809a90a325cd3b3d3573eab6a4",config:{pools_id:"0x346bee25ab4d15bcfa9484ef5ebd4d7c94eb665ebaa745ff4094936a7f59a8b1",admin_cap_id:"0xc1bb19a24d3bb65dfd4f3835637b63347c223c67cde4b0888f1a857974f33cbb",package_version_id:"0x3ccf1b38e3259e638b980d4e6b49eac8c5aa94d3cb2ace5e75f0a551c8e67e5e"}},xcetusTokenAddress:"0x04792c459e2c20d1d48c85ab2eed98ef115d5b3e36ccf6ce8d0d3c79ca548c91::xtoken::XTOKEN",xcetus:{package_id:"0xdebaab6b851fd3414c0a62dbdf8eb752d6b0d31f5cfce5e38541bc6c6daa8966",published_at:"0xdebaab6b851fd3414c0a62dbdf8eb752d6b0d31f5cfce5e38541bc6c6daa8966",config:{xcetus_manager_id:"0x3be34cbad122c8b100ed7157d762b9610e68b3c65734e08bc3c3baf857da807d",lock_manager_id:"0x7c67e805182e3fecd098bd68a6b06c317f28f8c6249bd771e07904a10b424e60",lock_handle_id:"0xc5f3bbfefe9a45c13da7a34bc72cac122ee45d633690476a8ac56bd2c4e78c86"}},xcetus_dividends:{package_id:"0x4061e279415a3c45cfd31554d38c5b3bb0e06c65833811a98a66f469e04c69c3",published_at:"0xfeda040996e722ba532ab2203d13333484024456ca38bf4adeb526ce1457332d",config:{dividend_manager_id:"0x9d1be1a6b1146b30448a266bc87127466c0bae1585750c42adffce3e25e1ab6d",dividend_admin_id:"0x36d63c1a588bd93775aff8f47538a0063960564f0a171d100a9f49526a872b92",dividend_settle_id:"0x9eb78595419560b1dcaa9fb0ca307921ab1664a5f63c877c6887ab696344b400",venft_dividends_id:"0xc31a85fa5a77fc1def0dc5b2aadc5317a9d744ffda24b472e56a646711770676",venft_dividends_id_v2:"0x53b24031120730f6e4a733526147917650b1ecd3c56b43164b69eaa74f9b9ff7"}},cetus_faucet:{package_id:"0x1a69aee6be709054750949959a67aedbb4200583b39586d5e3eabe57f40012c7",published_at:"0x1a69aee6be709054750949959a67aedbb4200583b39586d5e3eabe57f40012c7"},xtoken:{package_id:"0xb58a7b66d3d007d9977940598187104084951bd8fdabb74f03f68151a3e27710",published_at:"0x72eefdfad9c79ef4c69748f9fcaf47874779704475d9ce35a29cc0ff1b9ce29f",config:{xtoken_manager_id:"0x51c6f72ecbc819aeee851b5e2d79cf6100e8e2b44e7ca55b06bd81bd163f677f",lock_manager_id:"0x92cb9f128ae2f823401c2104136a96cde6c201d6a133a1c7b5c67f4400711a10",lock_handle_id:"0x5cc82e84cf911a2d904997c7ef3e2e98eb3fea0bc43308f7b8c52bf0aff478b9"}},xtoken_dividends:{package_id:"0xdc899c0b05327036990f08cd70b99ef92c4288b784cbb82088c099d109a30226",published_at:"0x4677c8990eab6036d7059be96ad82173efd88775be36e277f4543155da4cbb9e",config:{dividend_manager_id:"0xaf17350657fb26a972d088bfb9db4491d11bf5533b7a5272ab6aa4a1badee749",dividend_admin_id:"0x8c0993c6ea9574cf6a3743698a0d6a46c7bbc4bab668d28b51aa947ad34edfc2",dividend_settle_id:"0xd938930b4ad7ef0cd85d8ae640d6ed7fd5cfcb64101994b69b88aa240dba1cb0"}},token_faucet:{package_id:"0xc0a53bf7b0471fdff173e84c065641bcdba791681840f4dacd767725924bfcd5",published_at:"0xc0a53bf7b0471fdff173e84c065641bcdba791681840f4dacd767725924bfcd5"},booster:{package_id:"0xffa4c477b7d991a05ebd4e8cb635d05d8bec129799ddd6407068cfefa8913870",published_at:"0xffa4c477b7d991a05ebd4e8cb635d05d8bec129799ddd6407068cfefa8913870",config:{booster_config_id:"0xeba41bf99086b0140713d7dd102e1374281a608bf524cc38f62c1d2bd792715c",booster_pool_handle:"0x01f9ba86234f661157366b8393eaeba82c8b78bf40fd9728604c3cc142811629"}},liquidity_stratefy:{package_id:"0x9b894cff0422a6acc41dadab3c8e2f52da7b5f0b366821a80d62eaf650565c3f",published_at:"0xc76c30d0a7b3e0a4372b6e7f24d73ef4d7740eaf920789e658795502c2fd252a",config:{master_manger_id:"0x562f2c9a90ffc3cdbe492b8cedb2e911954c81e8d20b47c4d2b0b2782bd7cad2",master_liquidity_handle:"0x323179fcd8fc2c01f146a902aaec56221e791fb0f1965907c97b25cba5eac515"}},vaults:{package_id:"0x25cff94bdb454bae6a5565d09047bfe2b230025ef3bd2199622ec48d854b86b9",published_at:"0xe1fb9fc8542a9e7768b0a701bf0c11b595201fb2492791a03eb9c0bb319297f3",config:{admin_cap_id:"0x9b2d6f5be2650d16d27cd630c4539a76d7793970343ed3cbb023e13f1637c07c",vaults_manager_id:"0xc0a1a937df08880e395d85014ff40c74f13abe7a53abdbffea36f51adaaaf79e",vaults_pool_handle:"0x3ab02203de753de9c8198cc0ce7594dc960878f2c34c5c5a4b7742082241860a",haedal:{package_id:"0xac2afb455cbcdc2ff1a2e9bbb8aa4ccb4506a544b08c740886892a5cdf92f472",published_at:"0x9dac9c5770e5f930d2223ff68782958701acfaee9337e8d8363978ce7670dffb",version:1,config:{staking_id:"0x6e384d2da5b040b27f973155e25bbe4beb0ad5ca8ee0a36e20dff356094c9fc0",coin_type:"0xac2afb455cbcdc2ff1a2e9bbb8aa4ccb4506a544b08c740886892a5cdf92f472::hasui::HASUI"}},volo:{package_id:"",published_at:"",version:1,config:{native_pool:"",vsui_metadata:"",coin_type:"::cert::CERT"}},aftermath:{package_id:"0x5e8c0fc2b3d8aa1b06eec36c08d9d835c73c0626a1efaebc0fb03aa52f1a3ff4",published_at:"0x5e8c0fc2b3d8aa1b06eec36c08d9d835c73c0626a1efaebc0fb03aa52f1a3ff4",version:1,config:{staked_sui_vault:"0xe498a8c07ec62200c519a0092eda233abdab879e8f332c11bdc1819eb7b12fbb",referral_vault:"0x8d357115058f22976cd01c5415116d9aca806d1ded37eecd75d87978f404e927",safe:"0x38710a6e0bd885c158e52ec7a42c8a9a1826c6696b626b4a5e2d1dcb15cfd9b7",validator_address:"0x9336c4c9d891e263cfac99adc397853a7392e5cf84cbd5df92207a57c7fbdadc",coin_type:"0x5e8c0fc2b3d8aa1b06eec36c08d9d835c73c0626a1efaebc0fb03aa52f1a3ff4::afsui::AFSUI"}}}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},hasCreatePool:!0,hasNotifi:!0,hasRouter:!0,hasVault:!0,vaultFilter:!0,hasLimitOrder:!0,swapDefaultPair:{fromCoin:"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc::usdc::USDC",toCoin:"0x2::sui::SUI"},frams:{package_id:"0xfa0d98e99c1dbdbea1b0fe089fa93ebab40a7719ae4160c42cc78ebfe029fda0",published_at:"0xc4c250fa155fb27668650fd96aeaade6a3e7c669395f147b05747a5d9eb35795",config:{global_config_id:"0x5082c7a5ee9a758025d7b0a5e8aa08b56625c7cd535b8909d2b7993991e229cc",rewarder_manager_id:"0xe789e092dbd9dceadbe89350c4761a6f2e11647aab97f09746a01b151926cc0e",rewarder_manager_handle:"0x7e7dd42392b5d82564dc9ad5093a111c5f0598cc9f806cff257d7dacb71f7837",admin_cap_id:"0x4ec248bca2d1fc05f39fd7491ab490464a46d128624caa4d3c2a66d957ef40b0"}},limit_order:{package_id:"0xc65bc51d2bc2fdbce8c701f8d812da80fb37dba9cdf97ce38f60ab18c5202b17",published_at:"0xc65bc51d2bc2fdbce8c701f8d812da80fb37dba9cdf97ce38f60ab18c5202b17",config:{rate_orders_indexer_id:"0xeaa7dc3a4b70c14b434aed2cef0bdd272a781c630ea3c54c25fa53c72fb3cf96",rate_orders_indexer_handle:"0x62eea7ce7be125e6b43fac6158d0ac8a6b0f263446d4631ad5a3629d82fef2ed",global_config_id:"0xd4d98f126233057b3a01f17adfb5bc77d7bdb0332fe982ab44c6c7a2f66443dc",token_list_handle:"0x81233cdf2165f013a57c3ab180b079e0f411483ba7f80dd6fbcb74426d2045f9",user_orders_indexer_id:"0x18ff28ae25ea50c703a0dfcc49653cc7dd7035207e26c8f86fa9e4aea49037d0",user_orders_indexer_handle:"0xbe3301b85fb0fc99deacb68c31d971837ae23a65c38680cf79a6b8562518b4c7"}},cetus_integrate2:{package_id:"0xa71067b18948d08cee0af255fa5302a8c9d0dd3c3a4cbaf3d9a4e2370cc1581c",published_at:"0xa71067b18948d08cee0af255fa5302a8c9d0dd3c3a4cbaf3d9a4e2370cc1581c"}}},pre_test:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xb8a7f7731b03d9b4b6acc21b88dbae2a96ed7e3c3e87c722bd74315b520633d6",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.mainnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"mainnet",networkTip:"Mainnet",api:"https://api-beta.cetus.zone",accountAddress:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",accountPublicKey:"0x854923b882d2451730a11690f7da896e3b497e2a47b3383e86b62173bbc1414c",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"0x5b0b1c0d7a22fd7c59dedc00f906e9cb68033d13589a739b0d18cf25e317bdd4",fraphQLUrl:"https://indexer.mainnet.aptoslabs.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.notifi.network/gql",notifiEnv:"Production",hasCreatePool:!1,hasNotifi:!0},Sui:{fullRpcUrl:"https://rpc-mainnet.suiscan.xyz:443",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"mainnet",networkTip:"Mainnet",api:"https://api-sui.cetus.zone",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x326ce9894f08dcaa337fa232641cc34db957aec9ff6614c1186bc9a7508df0bb"},token:{token_display:"0x481fb627bf18bc93c02c41ada3cc8b574744ef23c9d5e3136637ae3076e71562",config:{coin_registry_id:"0xe0b8cb7e56d465965cac5c5fe26cba558de35d88b9ec712c40f131f72c600151",pool_registry_id:"0xab40481f926e686455edf819b4c6485fbbf147a42cf3b95f72ed88c94577e67a",coin_list_owner:"0x1f6510ee7d8e2b39261bad012f0be0adbecfd75199450b7cbf28efab42dad083",pool_list_owner:"0x6de133b609ea815e1f6a4d50785b798b134f567ec1f4ee113ae73f6900b4012d"}},clmm:{clmm_display:"0x1eabed72c53feb3805120a081dc15963c204dc8d091542592abaf7a35689b2fb",clmm_router:"0x780e590a9354f5bcb429af4578c742aaa0ee20ab942bb2bbd161fbde4b64b08c",config:{pools_id:"0xf699e7f2276f5c9a75944b37a0c5b5d9ddfd2471bf6242483b03ab2887d198d0",global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b"}},launchpad:{ido_display:"0x68aac2d6a88bc1e868c48ee99918b71373877308f7e63cb22ac1971cad9d6e67",ido_router:"0x68aac2d6a88bc1e868c48ee99918b71373877308f7e63cb22ac1971cad9d6e67",config_display:"0xc9b958492e4be73e0af4daa48101bc7ab2a7ab7c67585938ea3535929fc193fa",config:{pools_id:"0x7b96aea4d695996635265e2cc41d5c5f5c4cd70f36763e41b2abf2fa1eff866f",admin_cap_id:"0x342f4b272ff5abcaacc770a5972728b154a5e74835fa36b2340ad94895184acb",config_cap_id:"0xef2a813b8c1bbaf9470fff7df0fd0febebdc6e2bbd3d7bf9a917734af7893428",config_pools_id:"0x04b6e8de80f325bdf5963dc54f324c3319b471f2f93163ebc982bee0d9b38336"}},xcetus:{xcetus_display:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",xcetus_router:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",dividends_display:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",dividends_router:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",cetus_faucet:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",config:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49",dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5"}},hasCreatePool:!1,hasNotifi:!1}},testnet_external:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xce854db9e3d7ae088359dbc54e2d425370c86a010b7656a272019abd9abf5b5a",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.testnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"testnet",networkTip:"Testnet",api:"https://api.devcetus.com",accountAddress:"0x251dda55e5071be8c761c8a99d7af559ccb6ccc52ad3f945712d3ae8b87c35e0",accountPublicKey:"0x40b00ab4323dddef193e9fef41830a96456a8b875c4e5cb5a4e666d9a75fed51",ammSite:"https://test-cetus.netlify.app",newPositionAddress:"0x3904fc6d0dcb6e1937a6aced4597ec383afc752676d89f1d59b3d30b959fe161",fraphQLUrl:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",notifiRpcUrl:"https://api.dev.notifi.network/gql",notifiEnv:"Development",hasCreatePool:!0,hasNotifi:!0},Sui:{fullRpcUrl:"https://rpc-testnet.suiscan.xyz:443",faucetURL:"",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",api:"https://api-sui-testnet-ex.devcetus.com",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",faucet:{faucet_display:"0x4d892ceccd1497b9be7701e09d51c580bc83f22c9c97050821b373a77d0d9a9e",faucet_router:"0xff3004dc90fee6f7027040348563feb866a61c8bb53049cc444c1746db8b218d"},simulationAccount:{address:"0x5f9d2fb717ba2433f7723cf90bdbf90667001104915001d0af0cccb52b67c1e8"},token:{token_display:"0xc7c40602f81eee198f472e14c87cb9c7186496064adba06cef1768c8b1785512",config:{coin_registry_id:"0xde9a5123749136ca9fe05b88777e322f2161fe4aa71e9c575d5e27a31b815d40",pool_registry_id:"0x7b7b399344838363ec96611f133c77b98042404559e326fd289885b88848a3c5",coin_list_owner:"0xc93e168a9361b5443fef27dbbb95a023337c6bfd082fdd920d658f4f9147d801",pool_list_owner:"0x36d796de9529007373fd2e34311511a8ca4eaef2bf7ea65f65ab68a1bc1de092"}},clmm:{clmm_display:"0x837dddad95c6741474cde3e414a2eebccbeae81d0b378f193d00381bdaf0da62",clmm_router:"0x32ba8c0298964e26161b3b44375ac39eeab6b29207e00c5f44368426096eb902",config:{pools_id:"0xc8407fc5dfec8d7b7014ee4d244dbe4eb456bfa6a7878e88c9d4bc947b2c2d87",global_config_id:"0x43e2925f7c5bed04b612cc66c53a850e280a46704ce12cd2f25420b537e23f9d",global_vault_id:"0x435c9725c4026206002a5a4004762316a53891f21a10c695311074482e52757e"}},launchpad:{ido_display:"",ido_router:"",lock_display:"",lock_router:"",config:{pools_id:"",admin_cap_id:"",config_cap_id:"",lock_manager_id:""}},xcetus:{xcetus_display:"",xcetus_router:"",dividends_display:"",dividends_router:"",cetus_faucet:"",config:{xcetus_manager_id:"",lock_manager_id:"",dividend_manager_id:""}},hasCreatePool:!0,hasNotifi:!1}},local:{Aptos:{liquidswapDeployer:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",faucetObjectId:"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75",fetcher:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",clmmIntegrate:"0xd58630ae0012aa3c6fa61d2a9038bb79382e022ff159bfe4ad78d9d5c72cb08d",TokenDeployer:"0xce854db9e3d7ae088359dbc54e2d425370c86a010b7656a272019abd9abf5b5a",IntegerMate:"0xa7f01413d33ba919441888637ca1607ca0ddcbfa3c0a9ddea64743aaa560e498",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.testnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"testnet",networkTip:"Testnet",api:"https://api.devcetus.com",accountAddress:"0x251dda55e5071be8c761c8a99d7af559ccb6ccc52ad3f945712d3ae8b87c35e0",accountPublicKey:"0x40b00ab4323dddef193e9fef41830a96456a8b875c4e5cb5a4e666d9a75fed51",ammSite:"https://test-cetus.netlify.app",newPositionAddress:"0x3904fc6d0dcb6e1937a6aced4597ec383afc752676d89f1d59b3d30b959fe161",fraphQLUrl:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",hasCreatePool:!0,hasNotifi:!0},Sui:{fullRpcUrl:"http://192.168.1.41:9000",faucetURL:"http://192.168.1.41:9123/gas",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",api:"https://api-sui-testnet.devcetus.com",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"",currentChainTokenAddress:"0x2::sui::SUI",faucet_router:"0x61353a797a3d7f9c5522641bf824d730272260bcf66c7fcaf36a50243418caca",simulationAccount:{address:"0x5f9d2fb717ba2433f7723cf90bdbf90667001104915001d0af0cccb52b67c1e8"},token:{token_display:"",config:{coin_registry_id:"",pool_registry_id:"",coin_list_owner:"",pool_list_owner:""}},clmm:{clmm_display:"0x33e0056fdbd9444c20302ce4141eaf5ec66fe864b62d8c0e3ee3bb1d138ee445",clmm_router:"0x306efa18b1a70af5007aaccd3b228e4f97f5596bf20c3a2d7b6321dfe8e30765",config:{pools_id:"0xae24565ffac1eb9f2fcb03b1dc21c21d1ce2a992d13a1a58e51d28293249d21c",global_config_id:"0xb8bd0870a43a75c55690a8ffbc13682ae7e0a8254348524963657474342c20b4",global_vault_id:"0x639c2d2d068df99602a9ef014b000df26b0312c07cb06065992cac911e1c376d"}},launchpad:{ido_display:"0x035fb17bbae20f35d476ea93f4a3d0b8e8da4c63d4a8598b647dfa4931f35774",ido_router:"0x035fb17bbae20f35d476ea93f4a3d0b8e8da4c63d4a8598b647dfa4931f35774",lock_display:"0x10df8c3eee9ea7a459a1f8417ced9c2e0f3eb9ff62862e0f42eced2763b94f42",lock_router:"0x10df8c3eee9ea7a459a1f8417ced9c2e0f3eb9ff62862e0f42eced2763b94f42",config:{pools_id:"0x1b3a62d143ac08dee37670eea58e714ab7cd501a396060bd2caf7a77fee88dfa",admin_cap_id:"0x0cb7daf2484c38e4a183813b8ad51b6ed664d135b7897e72be095768c90df911",config_cap_id:"0x40f0cee72c6e86d5a7b0e013a18cad8bf567bb70075b4a0f1c63eab8953a3dfd",lock_manager_id:"0x23954bf7d5c7880b50a369ee439a11ab771b7e0079a042645c4920d5e618b898"}},xwhale:{xwhale_display:"0x590775726e4c07f24a8a6cd14e2a05cb719b2c09690bbce2d9b251b2ff6fa941",xwhale_router:"0x590775726e4c07f24a8a6cd14e2a05cb719b2c09690bbce2d9b251b2ff6fa941",dividends_display:"0x6dc245017f96ebba55486f0c4fcf8f58c48f30980f48a3f27e1c98672cb253b9",dividends_router:"0x6dc245017f96ebba55486f0c4fcf8f58c48f30980f48a3f27e1c98672cb253b9",booster_display:"",booster_router:"",whale_faucet:"0xb0845bcf2f985e6ea5b401218598212e11f915a0c4d7afd1ed6e04b83e7d6310",config:{xwhale_manager_id:"0x46b2a60ee784180534ea2a6568ca510b488ea190f822cab8a9d38fb01b8e6421",lock_manager_id:"0x253e34da0542134e39b3c5dade1f5437d1b6ef6e90adfaa014186b456b6d7ffd",dividend_manager_id:"0xced885ada26d894f30efc236303caa500c994a25db5b18ee01e7664729cb983c"}},hasCreatePool:!0,hasNotifi:!1},Sui2:{cetusClmm:"0x296e6ae7204fc10eaf8f08e4b4faf4ddd4ad001c",cetusIntegrate:"0x9cce89ed875c398dde64a5ccdfbebb6140b13b0f",integerMate:"0x3a1a096b4d2598eb3958c91fc8787c3e62f40770",swapPartner:"0xa420bad83346a8cd05c98fff988d90ef8d149b4c",TokenDeployer:"0x7bfe88372b99abb54609b58fee652b97a162cbcf",faucetObjectId:"0x6740d70296035d0345bed636a820af129f6ed422",initEventConfig:{initFactoryEvent:{pools_id:"0x526554aec8e229cc79f2a3e375813f6be92aabf8"},initPartnerEvent:{partners_id:"0x9bd1abed942c804d11a3ebb224fef4c8abda4dbb"},initConfigEvent:{admin_cap_id:"0x1b585be50405d80698ee1cffbde0e884944b64ce",global_config_id:"0x7b357faee524eda340b9924a828814eab7c107f7",protocol_fee_claim_cap_id:"0xfec3fa3d8176952d584213d9e286bbbb1717af02"}},tokenConfig:{coin_registry_id:"0x3f9f6609fc99440e41c7e178ff1250274170c889",pool_registry_id:"0x699cff0b7e44e565908b4acfa482022cfbfc16c1",coin_list_owner:"0x7634802da06a3a4c8e4aa8c425cfd83406670e34",pool_list_owner:"0xa4e177fe96f33a7ec7f2aa14ad5387cac7c7cc21"},rpcUrl:"https://fullnode.testnet.sui.io",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",api:"https://api.devcetus.com",simulationAccount:"0x3f6cfdcf7bc19e86693d3d0f261f56b6e8caff0d",ammSite:"https://cetus-pre.netlify.app",newPositionAddress:"0xbd1a8bd64216a4b102dc45a926bde4eb212108ae",currentChainTokenAddress:"0x2::sui::SUI"}},dev:{Aptos:{liquidswapDeployer:"0x80d6b00867cafcd40f9db3aa570ad1196f11ec5f57506799aec2a2940651fd37",faucetObjectId:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29",fetcher:"0x3ac260dc3ba7d7173e5ad8ce9a5d0ee62184e95425343cfd287f6e53dc52a4bd",clmmIntegrate:"0x3ac260dc3ba7d7173e5ad8ce9a5d0ee62184e95425343cfd287f6e53dc52a4bd",TokenDeployer:"0xc50b243a7180dfad9afd7dff8451c7b16cf27a92b6816f521b1f3c6d0c5397e3",IntegerMate:"0x45ba3bca9e81591a852df423105ecf2978dc03a5c0223033669bb889656a94a8",Launchpad:"0x93d2c98e6f1d1cd3629a15d8af1848246e6a0337de28c19ff9fb8718f534175a",LaunchpadCrowdCoin:"0xd2f6e785a51318fe0f5198b6679bf7af5af3375bd005101e98cb97b615871688",rpcUrl:"https://fullnode.devnet.aptoslabs.com",explorerUrl:"https://explorer.aptoslabs.com",network:"devnet",networkTip:"Devnet",api:"https://api.devcetus.com",accountAddress:"0x251dda55e5071be8c761c8a99d7af559ccb6ccc52ad3f945712d3ae8b87c35e0",accountPublicKey:"0x40b00ab4323dddef193e9fef41830a96456a8b875c4e5cb5a4e666d9a75fed51",ammSite:"https://test-cetus.netlify.app",newPositionAddress:"0x3904fc6d0dcb6e1937a6aced4597ec383afc752676d89f1d59b3d30b959fe161",fraphQLUrl:"https://indexer-devnet.staging.gcp.aptosdev.com/v1/graphql",currentChainTokenAddress:"0x1::aptos_coin::AptosCoin",hasCreatePool:!0,hasNotifi:!0},Sui:{liquidswapDeployer:"0x2b8f54bf724fa62789299569210d6c94758dd636",globalPauseStatusObjectId:"0x877cd08c02a2faa110a020f4f203304b114d76d2",faucetObjectId:"0x61df0e8caaf7b241d137fdc97906e3ca6bd68cca",rpcUrl:"https://fullnode.testnet.sui.io",explorerUrl:"https://explorer.sui.io/",network:"testnet",networkTip:"Testnet",ammSite:"https://cetus-pre.netlify.app",api:"https://api.devcetus.zone",currentChainTokenAddress:"0x2::sui::SUI",hasCreatePool:!0,hasNotifi:!1}}},T_={...Qd[Ea]},Qt=e=>L.isDecimal(e)?e:new L(e===void 0?0:e),Yd=(e,t,n=!0)=>{if(`${e}`=="0")return!parseFloat(t)||!n?0:"0.".padEnd(t+2,"0");if(!e)return"--";const i=parseFloat(e),o=e.toString(),s=i<0;let r=o;if(o.toLowerCase().includes("e")){const a=o.match(/(\d+?)(?:\.(\d*))?e([+-])(\d+)/),c=a[1],d=a[2],l=a[3],f=a[4];let _="",b=d?d.substr(f):"";if(b&&(b=`.${b}`),l!=="-"){for(let y=0;y<f;y+=1){const A=d[y]||"0";_+=A}r=c+_+b}else{let y="0";for(let A=0;A<f;A+=1)_=(c[c.length-A-1]||"0")+_;c.length>f&&(y=c.substr(0,c.length-f)),r=`${y}.${_}${d}`}}if(t&&n){let a=`${r.split(".")[0]}.`;const c=r.split(".")[1]||"";for(let d=0;d<t;d+=1)a+=c[d]||"0";r=a}if(r.length>14){const a=r.split(".");a[0].length>14?r=`${a[0].slice(0,14)}+`:(r=r.slice(0,13),r.indexOf(".")===12&&(r=r.slice(0,12)))}return`${s?"-":""}${r}`};function x_(e,t){if(t=t>-1?t:0,`${e}`=="0")return parseFloat(t)?"0.".padEnd(t+2,"0"):"0";if(!e)return"--";let n=!1;parseFloat(e)<0&&(n=!0);const i=`${Math.abs(parseFloat(e))}`;if(i==="NaN")return"--";let o=i;if(i.toLowerCase().includes("e")){if(i.toLowerCase().includes("+"))return Yd(i,t);const r=i.toLowerCase().split("e");let a=r[0];const c=Math.abs(parseFloat(r[1]));let d="",l=a.length,f;for(r[0].split(".")[1]&&(a=r[0].split(".")[0]+r[0].split(".")[1],l=r[0].split(".")[0].length),f=0;f<c-l;f+=1)d+="0";o=`0.${d}${a}`}if(`${t}`!="0"&&!t||`${parseFloat(e)}`=="NaN")return(n?"-":"")+o;const s=o.split(".");if(t===0)o=parseInt(o,10);else if(t>0&&s[1])if(s[1].length>t)if(s[1].includes("999999999")){const r=parseFloat(o).toFixed(t+1);o=r.slice(0,r.length-1)}else o=`${s[0]}.${s[1].slice(0,t)}`;else o=parseFloat(o).toFixed(t);else o=parseFloat(o).toFixed(t);if(o.length>=14&&o.includes(".")){const r=o.split(".");r[0].length>14?o=`${r[0].slice(0,14)}+`:(o=o.slice(0,13),o.indexOf(".")===12&&(o=o.slice(0,12)))}return(n?"-":"")+o}function el(e,t){const n=String(e);if(!n.includes("."))return n;const i=n.split("."),o=i[0],s=i[1].slice(0,t);return Dn(s)?`${o}.${Dn(s)}`:`${o}`}function Dn(e){return e.replace(/(\s|0|\.)+$/g,"")}function Ba(e,t){if(typeof e=="number"&&isNaN(e)||!Number(e))return 0;if(!String(e).includes("."))return e;const n=String(e).split(".");if(n[1]&&n[1].length<=t&&Number(n[1]))return e;const i=Math.pow(10,-t);if(Number(e)<i)return n[1]&&Dn(n[1])?n[0]+"."+Dn(n[1]):n[0];const o=el(e,t),s=String(o).split(".");return o==="--"?"--":s[1]&&Dn(String(s[1]))?s[0]+"."+Dn(String(s[1])):s[0]}const to=(e,t=0)=>isNaN(e)||!e?e:(e=String(e),Number(e)==0?0:!isNaN(t)&&t?(t===0&&(e=e.split(".")[0]),e.replace(/(\d+)(\.\d+)?/,(n,i,o)=>i.replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")+(o?o.slice(0,t+1):""))):e.replace(/^\d+/,n=>n.replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")));function tl(e,t){const i=String(e).split(".");let o=!0;if(!i[1]||i[1]&&i[1].length<=t||i[0]!=="0")return!1;if(i&&i[1]&&i[0]==="0"&&i[1][i[1].length-1]==="1")for(let s=0;s<i[1].length-1;s++)i[1]!=="0"&&(o=!1);else o=!1;return o}function nl(e){const t=String(e);if(!t.includes("."))return e;const n=t.split("."),i=n[0],o=Dn(n[1]);return o&&`${i}.${o}`}const no=(e,t,n=2)=>{if(e==""||typeof e=="string"&&e.indexOf("+")>-1)return e;if(isNaN(e)||Number(e)==0)return"0";const i=Ba(e,t),o=Math.pow(10,-t);return Number(i)&&Math.abs(Number(i))<=o||tl(i,t)?no(e,t+n):nl(i)};function I_(e){if(e){const t=e.toString(),n=t.indexOf(".")>-1?/(\d)(?=(\d{3})+\.)/g:/(\d)(?=(?:\d{3})+$)/g;return t.replace(n,"$1,")}}function P_(e){return!e||Object.keys(e).length===0}function bt(e){return e.toString().length===1?"0"+e:e}function Fr(e){const t=e.getFullYear(),n=e.getMonth()+1,i=e.getDate();return t+"-"+bt(n)+"-"+bt(i)}function il(e){const t=e.getMonth()+1,n=e.getDate();return bt(t)+"/"+bt(n)}function Lr(e){const t=e.getHours(),n=e.getMinutes(),i=e.getSeconds();return bt(t)+":"+bt(n)+":"+bt(i)}function ol(e){const t=e.getHours(),n=e.getMinutes();return bt(t)+":"+bt(n)}const O_=(e,t)=>{if(e){const n=new Date(Number(e));if(!t)return Fr(n)+" "+Lr(n);switch(t){case"HMS":return Lr(n);case"YMD":return Fr(n);case"MD":return il(n);case"HM":return ol(n)}}},j_=(e,t)=>isNaN(e)||!e?e:Number(e)<1e-6&&Number(e)!==0?"<0.000001":to(Ba(String(e),t),t);function M_(e){const t=e.replace("%","");return Number(t)}function E_(e,t=1){return!e||isNaN(Number(e))?e:Math.abs(String(e))<1e3?no(e,t):no(Number(e)/1e3,t)+"k"}const B_=async e=>new Promise(t=>{setTimeout(()=>{t(1)},e)}),D_=e=>e>=1e9?(e/1e9).toFixed(1)+"b":e>=1e6?(e/1e6).toFixed(1)+"m":e>=1e3?(e/1e3).toFixed(1)+"k":e.toString();function N_(e){const t=Number(no(e,2));return t>=1e9?(t/1e9).toFixed(1).replace(/\B(?=(\d{3})+(?!\d))/g,",")+"b":t>=1e6?(t/1e6).toFixed(1).replace(/\B(?=(\d{3})+(?!\d))/g,",")+"m":t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}const R_=(e,t)=>e>=1e9?(e/1e9).toFixed(t)+"b":e>=1e6?(e/1e6).toFixed(t)+"m":e>=1e3?(e/1e3).toFixed(t)+"k":e.toString(),q_=e=>{const t=Math.floor(e/1e3),n=Math.floor(new Date().getTime()/1e3),i=60,o=60*i,s=24*o,r=30*s,a=365*s,c=n-t;if(c<i)return"recently";if(c<o){const d=Math.floor(c/i);return d==1?`${d} minute ago`:`${d} minutes ago`}else if(c<s){const d=Math.floor(c/o);return d==1?`${d} hour ago`:`${d} hours ago`}else if(c<r){const d=Math.floor(c/s);return d==1?`${d} day ago`:`${d} days ago`}else if(c<a){const d=Math.floor(c/r);return d==1?`${d} mouth ago`:`${d} mouths ago`}else{const d=Math.floor(c/a);return d==1?`${d} year ago`:`${d} years ago`}},$_=(e,t)=>{if(e){const n=new Date(e);if(!t)return Ur(n)+" "+Kr(n);switch(t){case"HMS":return Kr(n);case"YMD":return Ur(n);case"MD":return sl(n);case"HM":return rl(n)}}};function Ur(e){const t=e.getUTCFullYear(),n=e.getUTCMonth()+1,i=e.getUTCDate();return t+"-"+bt(n)+"-"+bt(i)}function sl(e){const t=e.getUTCMonth()+1,n=e.getUTCDate();return bt(t)+"/"+bt(n)}function Kr(e){const t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds();return bt(t)+":"+bt(n)+":"+bt(i)}function rl(e){const t=e.getUTCHours(),n=e.getUTCMinutes();return bt(t)+":"+bt(n)}const Sn=(e,t)=>{try{return Qt(e).toDP(t,L.ROUND_DOWN).toString()}catch{return e}},F_=(e,t)=>Qt(e).toDP(t,L.ROUND_HALF_DOWN).toString(),L_=(e,t,n,i,o=!0)=>{if(e===void 0||e==="--")return"--";const s=Sn(e,t);return!n&&Number(e)>0&&Number(s)<.01?`<${o?"$":""}0.01`:i?`${o?"$":""}${s}`:`${o?"$":""}${to(s)}`};function U_(e){if(console.log(" ~ file: index.ts:573 ~ getUrlParam ~ window.location.pathname:",window.location.pathname),window.location.pathname=="/limit"||window.location.pathname.indexOf("/limit/")<0)return null;const t=window.location.pathname.replace("/limit/","").split("-");return console.log(" ~ file: index.ts:573 ~ getUrlParam ~ window.location:",window.location),console.log(" ~ file: index.ts:573 ~ getUrlParam ~ r:",t),t&&t.length>0?decodeURI(e=="from"?t[0]?t[0]:"":t[1]?t[1]:""):null}function K_(e){return e=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":e}function V_(e){return e=="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":e}function al(e){let t=0;for(;t<e.length;){if(Qt(e[t]).gt(0))return t+1;t++}return 0}const z_=(e,t,n=!0)=>{if(e==="")return"";if(e!=="0"&&!e||Qt(e).equals(0))return"0";if(t!==void 0){const c=Sn(e,t);if(!Qt(c).equals(0))return n?c:to(c)}const i=Qt(e).toString(),o=i.split("."),s=o[0],r=o[1];let a;if(Qt(s).gt(0))!r||Qt(s.length).gte(9)?a=Sn(i,0):Qt(s.length).gte(4)?a=Sn(i,2):a=Sn(i,4);else{Sn(i,6);const c=al(r);if(c<6)a=Sn(i,c+6);else{if(c>20)return"0";a=Sn(i,9+(c-6))}}return n||Qt(s).lt(1)?a:to(a)},G_=e=>e?e.substring(0,6)+"..."+e.substring(e.length-4):"";function cl(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(t[s]!==255)throw new TypeError(o+" is ambiguous");t[s]=i}var r=e.length,a=e.charAt(0),c=Math.log(r)/Math.log(256),d=Math.log(256)/Math.log(r);function l(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(b.length===0)return"";for(var y=0,A=0,O=0,j=b.length;O!==j&&b[O]===0;)O++,y++;for(var M=(j-O)*d+1>>>0,B=new Uint8Array(M);O!==j;){for(var $=b[O],J=0,z=M-1;($!==0||J<A)&&z!==-1;z--,J++)$+=256*B[z]>>>0,B[z]=$%r>>>0,$=$/r>>>0;if($!==0)throw new Error("Non-zero carry");A=J,O++}for(var re=M-A;re!==M&&B[re]===0;)re++;for(var ge=a.repeat(y);re<M;++re)ge+=e.charAt(B[re]);return ge}function f(b){if(typeof b!="string")throw new TypeError("Expected String");if(b.length===0)return new Uint8Array;for(var y=0,A=0,O=0;b[y]===a;)A++,y++;for(var j=(b.length-y)*c+1>>>0,M=new Uint8Array(j);b[y];){var B=t[b.charCodeAt(y)];if(B===255)return;for(var $=0,J=j-1;(B!==0||$<O)&&J!==-1;J--,$++)B+=r*M[J]>>>0,M[J]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");O=$,y++}for(var z=j-O;z!==j&&M[z]===0;)z++;for(var re=new Uint8Array(A+(j-z)),ge=A;z!==j;)re[ge++]=M[z++];return re}function _(b){var y=f(b);if(y)return y;throw new Error("Non-base"+r+" character")}return{encode:l,decodeUnsafe:f,decode:_}}var dl=cl;const ll=dl,ul="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var Da=ll(ul);function Jn(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function fl(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function Na(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function hl(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Jn(e.outputLen),Jn(e.blockLen)}function ws(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Ra(e,t){Na(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const pl={number:Jn,bool:fl,bytes:Na,hash:hl,exists:ws,output:Ra},W_=pl,Zo=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ls=e=>e instanceof Uint8Array,io=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),X_=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),H_=(e,t)=>e<<32-t|e>>>t,_l=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!_l)throw new Error("Non little-endian hardware is not supported");const bl=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function J_(e){if(!Ls(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=bl[e[n]];return t}function Z_(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let i=0;i<n.length;i++){const o=i*2,s=e.slice(o,o+2),r=Number.parseInt(s,16);if(Number.isNaN(r)||r<0)throw new Error("Invalid byte sequence");n[i]=r}return n}function ml(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Zn(e){if(typeof e=="string"&&(e=ml(e)),!Ls(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function Q_(...e){const t=new Uint8Array(e.reduce((i,o)=>i+o.length,0));let n=0;return e.forEach(i=>{if(!Ls(i))throw new Error("Uint8Array expected");t.set(i,n),n+=i.length}),t}class gl{clone(){return this._cloneInto()}}const yl={}.toString;function Y_(e,t){if(t!==void 0&&yl.call(t)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(e,t)}function e0(e){const t=i=>e().update(Zn(i)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function wl(e){const t=(i,o)=>e(o).update(Zn(i)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=i=>e(i),t}function t0(e=32){if(Zo&&typeof Zo.getRandomValues=="function")return Zo.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}const vl=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]);class kl extends gl{constructor(t,n,i={},o,s,r){if(super(),this.blockLen=t,this.outputLen=n,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,Jn(t),Jn(n),Jn(o),n<0||n>o)throw new Error("outputLen bigger than keyLen");if(i.key!==void 0&&(i.key.length<1||i.key.length>o))throw new Error(`key must be up 1..${o} byte long or undefined`);if(i.salt!==void 0&&i.salt.length!==s)throw new Error(`salt must be ${s} byte long or undefined`);if(i.personalization!==void 0&&i.personalization.length!==r)throw new Error(`personalization must be ${r} byte long or undefined`);this.buffer32=io(this.buffer=new Uint8Array(t))}update(t){ws(this);const{blockLen:n,buffer:i,buffer32:o}=this;t=Zn(t);const s=t.length,r=t.byteOffset,a=t.buffer;for(let c=0;c<s;){this.pos===n&&(this.compress(o,0,!1),this.pos=0);const d=Math.min(n-this.pos,s-c),l=r+c;if(d===n&&!(l%4)&&c+d<s){const f=new Uint32Array(a,l,Math.floor((s-c)/4));for(let _=0;c+n<s;_+=o.length,c+=n)this.length+=n,this.compress(f,_,!1);continue}i.set(t.subarray(c,c+d),this.pos),this.pos+=d,this.length+=d,c+=d}return this}digestInto(t){ws(this),Ra(t,this);const{pos:n,buffer32:i}=this;this.finished=!0,this.buffer.subarray(n).fill(0),this.compress(i,0,!0);const o=io(t);this.get().forEach((s,r)=>o[r]=s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const i=t.slice(0,n);return this.destroy(),i}_cloneInto(t){const{buffer:n,length:i,finished:o,destroyed:s,outputLen:r,pos:a}=this;return t||(t=new this.constructor({dkLen:r})),t.set(...this.get()),t.length=i,t.finished=o,t.destroyed=s,t.outputLen=r,t.buffer.set(n),t.pos=a,t}}const Bi=BigInt(2**32-1),vs=BigInt(32);function qa(e,t=!1){return t?{h:Number(e&Bi),l:Number(e>>vs&Bi)}:{h:Number(e>>vs&Bi)|0,l:Number(e&Bi)|0}}function Cl(e,t=!1){let n=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let o=0;o<e.length;o++){const{h:s,l:r}=qa(e[o],t);[n[o],i[o]]=[s,r]}return[n,i]}const Al=(e,t)=>BigInt(e>>>0)<<vs|BigInt(t>>>0),Sl=(e,t,n)=>e>>>n,Tl=(e,t,n)=>e<<32-n|t>>>n,xl=(e,t,n)=>e>>>n|t<<32-n,Il=(e,t,n)=>e<<32-n|t>>>n,Pl=(e,t,n)=>e<<64-n|t>>>n-32,Ol=(e,t,n)=>e>>>n-32|t<<64-n,jl=(e,t)=>t,Ml=(e,t)=>e,El=(e,t,n)=>e<<n|t>>>32-n,Bl=(e,t,n)=>t<<n|e>>>32-n,Dl=(e,t,n)=>t<<n-32|e>>>64-n,Nl=(e,t,n)=>e<<n-32|t>>>64-n;function Rl(e,t,n,i){const o=(t>>>0)+(i>>>0);return{h:e+n+(o/2**32|0)|0,l:o|0}}const ql=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),$l=(e,t,n,i)=>t+n+i+(e/2**32|0)|0,Fl=(e,t,n,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0),Ll=(e,t,n,i,o)=>t+n+i+o+(e/2**32|0)|0,Ul=(e,t,n,i,o)=>(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0)+(o>>>0),Kl=(e,t,n,i,o,s)=>t+n+i+o+s+(e/2**32|0)|0,Vl={fromBig:qa,split:Cl,toBig:Al,shrSH:Sl,shrSL:Tl,rotrSH:xl,rotrSL:Il,rotrBH:Pl,rotrBL:Ol,rotr32H:jl,rotr32L:Ml,rotlSH:El,rotlSL:Bl,rotlBH:Dl,rotlBL:Nl,add:Rl,add3L:ql,add3H:$l,add4L:Fl,add4H:Ll,add5H:Kl,add5L:Ul},Tt=Vl,lt=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),K=new Uint32Array(32);function gn(e,t,n,i,o,s){const r=o[s],a=o[s+1];let c=K[2*e],d=K[2*e+1],l=K[2*t],f=K[2*t+1],_=K[2*n],b=K[2*n+1],y=K[2*i],A=K[2*i+1],O=Tt.add3L(c,l,r);d=Tt.add3H(O,d,f,a),c=O|0,{Dh:A,Dl:y}={Dh:A^d,Dl:y^c},{Dh:A,Dl:y}={Dh:Tt.rotr32H(A,y),Dl:Tt.rotr32L(A,y)},{h:b,l:_}=Tt.add(b,_,A,y),{Bh:f,Bl:l}={Bh:f^b,Bl:l^_},{Bh:f,Bl:l}={Bh:Tt.rotrSH(f,l,24),Bl:Tt.rotrSL(f,l,24)},K[2*e]=c,K[2*e+1]=d,K[2*t]=l,K[2*t+1]=f,K[2*n]=_,K[2*n+1]=b,K[2*i]=y,K[2*i+1]=A}function yn(e,t,n,i,o,s){const r=o[s],a=o[s+1];let c=K[2*e],d=K[2*e+1],l=K[2*t],f=K[2*t+1],_=K[2*n],b=K[2*n+1],y=K[2*i],A=K[2*i+1],O=Tt.add3L(c,l,r);d=Tt.add3H(O,d,f,a),c=O|0,{Dh:A,Dl:y}={Dh:A^d,Dl:y^c},{Dh:A,Dl:y}={Dh:Tt.rotrSH(A,y,16),Dl:Tt.rotrSL(A,y,16)},{h:b,l:_}=Tt.add(b,_,A,y),{Bh:f,Bl:l}={Bh:f^b,Bl:l^_},{Bh:f,Bl:l}={Bh:Tt.rotrBH(f,l,63),Bl:Tt.rotrBL(f,l,63)},K[2*e]=c,K[2*e+1]=d,K[2*t]=l,K[2*t+1]=f,K[2*n]=_,K[2*n+1]=b,K[2*i]=y,K[2*i+1]=A}class zl extends kl{constructor(t={}){super(128,t.dkLen===void 0?64:t.dkLen,t,64,16,16),this.v0l=lt[0]|0,this.v0h=lt[1]|0,this.v1l=lt[2]|0,this.v1h=lt[3]|0,this.v2l=lt[4]|0,this.v2h=lt[5]|0,this.v3l=lt[6]|0,this.v3h=lt[7]|0,this.v4l=lt[8]|0,this.v4h=lt[9]|0,this.v5l=lt[10]|0,this.v5h=lt[11]|0,this.v6l=lt[12]|0,this.v6h=lt[13]|0,this.v7l=lt[14]|0,this.v7h=lt[15]|0;const n=t.key?t.key.length:0;if(this.v0l^=this.outputLen|n<<8|65536|1<<24,t.salt){const i=io(Zn(t.salt));this.v4l^=i[0],this.v4h^=i[1],this.v5l^=i[2],this.v5h^=i[3]}if(t.personalization){const i=io(Zn(t.personalization));this.v6l^=i[0],this.v6h^=i[1],this.v7l^=i[2],this.v7h^=i[3]}if(t.key){const i=new Uint8Array(this.blockLen);i.set(Zn(t.key)),this.update(i)}}get(){let{v0l:t,v0h:n,v1l:i,v1h:o,v2l:s,v2h:r,v3l:a,v3h:c,v4l:d,v4h:l,v5l:f,v5h:_,v6l:b,v6h:y,v7l:A,v7h:O}=this;return[t,n,i,o,s,r,a,c,d,l,f,_,b,y,A,O]}set(t,n,i,o,s,r,a,c,d,l,f,_,b,y,A,O){this.v0l=t|0,this.v0h=n|0,this.v1l=i|0,this.v1h=o|0,this.v2l=s|0,this.v2h=r|0,this.v3l=a|0,this.v3h=c|0,this.v4l=d|0,this.v4h=l|0,this.v5l=f|0,this.v5h=_|0,this.v6l=b|0,this.v6h=y|0,this.v7l=A|0,this.v7h=O|0}compress(t,n,i){this.get().forEach((c,d)=>K[d]=c),K.set(lt,16);let{h:o,l:s}=Tt.fromBig(BigInt(this.length));K[24]=lt[8]^s,K[25]=lt[9]^o,i&&(K[28]=~K[28],K[29]=~K[29]);let r=0;const a=vl;for(let c=0;c<12;c++)gn(0,4,8,12,t,n+2*a[r++]),yn(0,4,8,12,t,n+2*a[r++]),gn(1,5,9,13,t,n+2*a[r++]),yn(1,5,9,13,t,n+2*a[r++]),gn(2,6,10,14,t,n+2*a[r++]),yn(2,6,10,14,t,n+2*a[r++]),gn(3,7,11,15,t,n+2*a[r++]),yn(3,7,11,15,t,n+2*a[r++]),gn(0,5,10,15,t,n+2*a[r++]),yn(0,5,10,15,t,n+2*a[r++]),gn(1,6,11,12,t,n+2*a[r++]),yn(1,6,11,12,t,n+2*a[r++]),gn(2,7,8,13,t,n+2*a[r++]),yn(2,7,8,13,t,n+2*a[r++]),gn(3,4,9,14,t,n+2*a[r++]),yn(3,4,9,14,t,n+2*a[r++]);this.v0l^=K[0]^K[16],this.v0h^=K[1]^K[17],this.v1l^=K[2]^K[18],this.v1h^=K[3]^K[19],this.v2l^=K[4]^K[20],this.v2h^=K[5]^K[21],this.v3l^=K[6]^K[22],this.v3h^=K[7]^K[23],this.v4l^=K[8]^K[24],this.v4h^=K[9]^K[25],this.v5l^=K[10]^K[26],this.v5h^=K[11]^K[27],this.v6l^=K[12]^K[28],this.v6h^=K[13]^K[29],this.v7l^=K[14]^K[30],this.v7h^=K[15]^K[31],K.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Gl=wl(e=>new zl(e)),yo=e=>Da.encode(e),Ci=e=>Da.decode(e);function on(e){return Uint8Array.from(atob(e),t=>t.charCodeAt(0))}const Qo=8192;function At(e){if(e.length<Qo)return btoa(String.fromCharCode(...e));let t="";for(var n=0;n<e.length;n+=Qo){const i=e.slice(n,n+Qo);t+=String.fromCharCode(...i)}return btoa(t)}function $a(e){var o;const t=e.startsWith("0x")?e.slice(2):e,i=((o=(t.length%2===0?t:`0${t}}`).match(/.{2}/g))==null?void 0:o.map(s=>parseInt(s,16)))??[];return Uint8Array.from(i)}function Ai(e){return e.reduce((t,n)=>t+n.toString(16).padStart(2,"0"),"")}function Us(e){let t=[],n=0;if(e===0)return[0];for(;e>0;)t[n]=e&127,(e>>=7)&&(t[n]|=128),n+=1;return t}function Wl(e){let t=0,n=0,i=0;for(;;){let o=e[i];if(i+=1,t|=(o&127)<<n,!(o&128))break;n+=7}return{value:t,length:i}}class Xl{constructor(t){this.bytePosition=0,this.dataView=new DataView(t.buffer)}shift(t){return this.bytePosition+=t,this}read8(){let t=this.dataView.getUint8(this.bytePosition);return this.shift(1),t}read16(){let t=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),t}read32(){let t=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),t}read64(){let t=this.read32(),i=this.read32().toString(16)+t.toString(16).padStart(8,"0");return BigInt("0x"+i).toString(10)}read128(){let t=BigInt(this.read64()),i=BigInt(this.read64()).toString(16)+t.toString(16).padStart(16,"0");return BigInt("0x"+i).toString(10)}read256(){let t=BigInt(this.read128()),i=BigInt(this.read128()).toString(16)+t.toString(16).padStart(32,"0");return BigInt("0x"+i).toString(10)}readBytes(t){let n=this.bytePosition+this.dataView.byteOffset,i=new Uint8Array(this.dataView.buffer,n,t);return this.shift(t),i}readULEB(){let t=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,t),{value:i,length:o}=Wl(n);return this.shift(o),i}readVec(t){let n=this.readULEB(),i=[];for(let o=0;o<n;o++)i.push(t(this,o,n));return i}}function Hl(e,t){switch(t){case"base58":return yo(e);case"base64":return At(e);case"hex":return Ai(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function Fa(e,t=["<",">"]){const[n,i]=t,o=[];let s="",r=0;for(let a=0;a<e.length;a++){const c=e[a];if(c===n&&r++,c===i&&r--,r===0&&c===","){o.push(s.trim()),s="";continue}s+=c}return o.push(s.trim()),o}class Jl{constructor({initialSize:t=1024,maxSize:n=1/0,allocateSize:i=1024}={}){this.bytePosition=0,this.size=t,this.maxSize=n,this.allocateSize=i,this.dataView=new DataView(new ArrayBuffer(t))}ensureSizeOrGrow(t){const n=this.bytePosition+t;if(n>this.size){const i=Math.min(this.maxSize,this.size+this.allocateSize);if(n>i)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${n}`);this.size=i;const o=new ArrayBuffer(this.size);new Uint8Array(o).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(o)}}shift(t){return this.bytePosition+=t,this}write8(t){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(t)),this.shift(1)}write16(t){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(t),!0),this.shift(2)}write32(t){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(t),!0),this.shift(4)}write64(t){return Yo(BigInt(t),8).forEach(n=>this.write8(n)),this}write128(t){return Yo(BigInt(t),16).forEach(n=>this.write8(n)),this}write256(t){return Yo(BigInt(t),32).forEach(n=>this.write8(n)),this}writeULEB(t){return Us(t).forEach(n=>this.write8(n)),this}writeVec(t,n){return this.writeULEB(t.length),Array.from(t).forEach((i,o)=>n(this,i,o,t.length)),this}*[Symbol.iterator](){for(let t=0;t<this.bytePosition;t++)yield this.dataView.getUint8(t);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(t){return Hl(this.toBytes(),t)}}function Yo(e,t){let n=new Uint8Array(t),i=0;for(;e>0;)n[i]=Number(e%BigInt(256)),e=e/BigInt(256),i+=1;return n}var La=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Kt=(e,t,n)=>(La(e,t,"read from private field"),n?n.call(e):t.get(e)),oo=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},so=(e,t,n,i)=>(La(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),Vn,ui,Gi,Tn;const Ua=class{constructor(e){oo(this,Vn,void 0),oo(this,ui,void 0),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),so(this,Vn,e.write),so(this,ui,e.serialize??((t,n)=>{const i=new Jl({initialSize:this.serializedSize(t)??void 0,...n});return Kt(this,Vn).call(this,t,i),i.toBytes()})),this.validate=e.validate??(()=>{})}write(e,t){this.validate(e),Kt(this,Vn).call(this,e,t)}serialize(e,t){return this.validate(e),new Zl(this,Kt(this,ui).call(this,e,t))}parse(e){const t=new Xl(e);return this.read(t)}fromHex(e){return this.parse($a(e))}fromBase58(e){return this.parse(Ci(e))}fromBase64(e){return this.parse(on(e))}transform({name:e,input:t,output:n,validate:i}){return new Ua({name:e??this.name,read:o=>n(this.read(o)),write:(o,s)=>Kt(this,Vn).call(this,t(o),s),serializedSize:o=>this.serializedSize(t(o)),serialize:(o,s)=>Kt(this,ui).call(this,t(o),s),validate:o=>{i==null||i(o),this.validate(t(o))}})}};let hn=Ua;Vn=new WeakMap;ui=new WeakMap;const Ka=Symbol.for("@mysten/serialized-bcs");function Va(e){return!!e&&typeof e=="object"&&e[Ka]===!0}class Zl{constructor(t,n){oo(this,Gi,void 0),oo(this,Tn,void 0),so(this,Gi,t),so(this,Tn,n)}get[Ka](){return!0}toBytes(){return Kt(this,Tn)}toHex(){return Ai(Kt(this,Tn))}toBase64(){return At(Kt(this,Tn))}toBase58(){return yo(Kt(this,Tn))}parse(){return Kt(this,Gi).parse(Kt(this,Tn))}}Gi=new WeakMap;Tn=new WeakMap;function ro({size:e,...t}){return new hn({...t,serializedSize:()=>e})}function es({readMethod:e,writeMethod:t,...n}){return ro({...n,read:i=>i[e](),write:(i,o)=>o[t](i),validate:i=>{var o;if(i<0||i>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${i}. Expected value in range 0-${n.maxValue}`);(o=n.validate)==null||o.call(n,i)}})}function ts({readMethod:e,writeMethod:t,...n}){return ro({...n,read:i=>i[e](),write:(i,o)=>o[t](BigInt(i)),validate:i=>{var s;const o=BigInt(i);if(o<0||o>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${o}. Expected value in range 0-${n.maxValue}`);(s=n.validate)==null||s.call(n,o)}})}function Ql({serialize:e,...t}){const n=new hn({...t,serialize:e,write:(i,o)=>{for(const s of n.serialize(i).toBytes())o.write8(s)}});return n}function Yl({toBytes:e,fromBytes:t,...n}){return new hn({...n,read:i=>{const o=i.readULEB(),s=i.readBytes(o);return t(s)},write:(i,o)=>{const s=e(i);o.writeULEB(s.length);for(let r=0;r<s.length;r++)o.write8(s[r])},serialize:i=>{const o=e(i),s=Us(o.length),r=new Uint8Array(s.length+o.length);return r.set(s,0),r.set(o,s.length),r},validate:i=>{var o;if(typeof i!="string")throw new TypeError(`Invalid ${n.name} value: ${i}. Expected string`);(o=n.validate)==null||o.call(n,i)}})}function eu(e){let t=null;function n(){return t||(t=e()),t}return new hn({name:"lazy",read:i=>n().read(i),serializedSize:i=>n().serializedSize(i),write:(i,o)=>n().write(i,o),serialize:(i,o)=>n().serialize(i,o).toBytes()})}const x={u8(e){return es({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...e})},u16(e){return es({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...e})},u32(e){return es({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...e})},u64(e){return ts({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...e})},u128(e){return ts({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...e})},u256(e){return ts({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...e})},bool(e){return ro({name:"bool",size:1,read:t=>t.read8()===1,write:(t,n)=>n.write8(t?1:0),...e,validate:t=>{var n;if((n=e==null?void 0:e.validate)==null||n.call(e,t),typeof t!="boolean")throw new TypeError(`Expected boolean, found ${typeof t}`)}})},uleb128(e){return Ql({name:"uleb128",read:t=>t.readULEB(),serialize:t=>Uint8Array.from(Us(t)),...e})},bytes(e,t){return ro({name:`bytes[${e}]`,size:e,read:n=>n.readBytes(e),write:(n,i)=>{for(let o=0;o<e;o++)i.write8(n[o]??0)},...t,validate:n=>{var i;if((i=t==null?void 0:t.validate)==null||i.call(t,n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==e)throw new TypeError(`Expected array of length ${e}, found ${n.length}`)}})},string(e){return Yl({name:"string",toBytes:t=>new TextEncoder().encode(t),fromBytes:t=>new TextDecoder().decode(t),...e})},fixedArray(e,t,n){return new hn({name:`${t.name}[${e}]`,read:i=>{const o=new Array(e);for(let s=0;s<e;s++)o[s]=t.read(i);return o},write:(i,o)=>{for(const s of i)t.write(s,o)},...n,validate:i=>{var o;if((o=n==null?void 0:n.validate)==null||o.call(n,i),!i||typeof i!="object"||!("length"in i))throw new TypeError(`Expected array, found ${typeof i}`);if(i.length!==e)throw new TypeError(`Expected array of length ${e}, found ${i.length}`)}})},option(e){return x.enum(`Option<${e.name}>`,{None:null,Some:e}).transform({input:t=>t==null?{None:!0}:{Some:t},output:t=>t.$kind==="Some"?t.Some:null})},vector(e,t){return new hn({name:`vector<${e.name}>`,read:n=>{const i=n.readULEB(),o=new Array(i);for(let s=0;s<i;s++)o[s]=e.read(n);return o},write:(n,i)=>{i.writeULEB(n.length);for(const o of n)e.write(o,i)},...t,validate:n=>{var i;if((i=t==null?void 0:t.validate)==null||i.call(t,n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`)}})},tuple(e,t){return new hn({name:`(${e.map(n=>n.name).join(", ")})`,serializedSize:n=>{let i=0;for(let o=0;o<e.length;o++){const s=e[o].serializedSize(n[o]);if(s==null)return null;i+=s}return i},read:n=>{const i=[];for(const o of e)i.push(o.read(n));return i},write:(n,i)=>{for(let o=0;o<e.length;o++)e[o].write(n[o],i)},...t,validate:n=>{var i;if((i=t==null?void 0:t.validate)==null||i.call(t,n),!Array.isArray(n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==e.length)throw new TypeError(`Expected array of length ${e.length}, found ${n.length}`)}})},struct(e,t,n){const i=Object.entries(t);return new hn({name:e,serializedSize:o=>{let s=0;for(const[r,a]of i){const c=a.serializedSize(o[r]);if(c==null)return null;s+=c}return s},read:o=>{const s={};for(const[r,a]of i)s[r]=a.read(o);return s},write:(o,s)=>{for(const[r,a]of i)a.write(o[r],s)},...n,validate:o=>{var s;if((s=n==null?void 0:n.validate)==null||s.call(n,o),typeof o!="object"||o==null)throw new TypeError(`Expected object, found ${typeof o}`)}})},enum(e,t,n){const i=Object.entries(t);return new hn({name:e,read:o=>{const s=o.readULEB(),[r,a]=i[s];return{[r]:(a==null?void 0:a.read(o))??!0,$kind:r}},write:(o,s)=>{const[r,a]=Object.entries(o).filter(([c])=>Object.hasOwn(t,c))[0];for(let c=0;c<i.length;c++){const[d,l]=i[c];if(d===r){s.writeULEB(c),l==null||l.write(a,s);return}}},...n,validate:o=>{var a;if((a=n==null?void 0:n.validate)==null||a.call(n,o),typeof o!="object"||o==null)throw new TypeError(`Expected object, found ${typeof o}`);const s=Object.keys(o).filter(c=>o[c]!==void 0&&Object.hasOwn(t,c));if(s.length!==1)throw new TypeError(`Expected object with one key, but found ${s.length} for type ${e}}`);const[r]=s;if(!Object.hasOwn(t,r))throw new TypeError(`Invalid enum variant ${r}`)}})},map(e,t){return x.vector(x.tuple([e,t])).transform({name:`Map<${e.name}, ${t.name}>`,input:n=>[...n.entries()],output:n=>{const i=new Map;for(const[o,s]of n)i.set(o,s);return i}})},lazy(e){return eu(e)}},tu=32;function Vr(e){try{return Ci(e).length===tu}catch{return!1}}const Ks=32;function Yt(e){return ou(e)&&su(e)===Ks}function fi(e){return Yt(e)}function nu(e){return e.includes("::")?za(e):e}function za(e){const[t,n]=e.split("::"),i=e.slice(t.length+n.length+4),o=i.includes("<")?i.slice(0,i.indexOf("<")):i,s=i.includes("<")?Fa(i.slice(i.indexOf("<")+1,i.lastIndexOf(">"))).map(r=>nu(r.trim())):[];return{address:oe(t),module:n,name:o,typeParams:s}}function iu(e){const{address:t,module:n,name:i,typeParams:o}=typeof e=="string"?za(e):e,s=(o==null?void 0:o.length)>0?`<${o.map(r=>typeof r=="string"?r:iu(r)).join(",")}>`:"";return`${t}::${n}::${i}${s}`}function oe(e,t=!1){let n=e.toLowerCase();return!t&&n.startsWith("0x")&&(n=n.slice(2)),`0x${n.padStart(Ks*2,"0")}`}function he(e,t=!1){return oe(e,t)}function ou(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2===0}function su(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}const Ga=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,Wa=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i,ru=235;function n0(e){return e.length>ru?!1:e.includes("@")?Ga.test(e):Wa.test(e)}function au(e,t="at"){const n=e.toLowerCase();let i;if(n.includes("@")){if(!Ga.test(n))throw new Error(`Invalid SuiNS name ${e}`);const[o,s]=n.split("@");i=[...o?o.split("."):[],s]}else{if(!Wa.test(n))throw new Error(`Invalid SuiNS name ${e}`);i=n.split(".").slice(0,-1)}return t==="dot"?`${i.join(".")}.sui`:`${i.slice(0,-1).join(".")}@${i[i.length-1]}`}const i0=9,o0=BigInt(1e9),cu="0x1",Xa="0x2",s0="0x3",r0=he("0x6"),a0="sui_system",du=`${Xa}::sui::SUI`,c0=he("0x5"),lu=/^vector<(.+)>$/,uu=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class tn{static parseFromStr(t,n=!1){if(t==="address")return{address:null};if(t==="bool")return{bool:null};if(t==="u8")return{u8:null};if(t==="u16")return{u16:null};if(t==="u32")return{u32:null};if(t==="u64")return{u64:null};if(t==="u128")return{u128:null};if(t==="u256")return{u256:null};if(t==="signer")return{signer:null};const i=t.match(lu);if(i)return{vector:tn.parseFromStr(i[1],n)};const o=t.match(uu);if(o)return{struct:{address:n?oe(o[1]):o[1],module:o[2],name:o[3],typeParams:o[5]===void 0?[]:tn.parseStructTypeArgs(o[5],n)}};throw new Error(`Encountered unexpected token when parsing type args for ${t}`)}static parseStructTypeArgs(t,n=!1){return Fa(t).map(i=>tn.parseFromStr(i,n))}static tagToString(t){if("bool"in t)return"bool";if("u8"in t)return"u8";if("u16"in t)return"u16";if("u32"in t)return"u32";if("u64"in t)return"u64";if("u128"in t)return"u128";if("u256"in t)return"u256";if("address"in t)return"address";if("signer"in t)return"signer";if("vector"in t)return`vector<${tn.tagToString(t.vector)}>`;if("struct"in t){const n=t.struct,i=n.typeParams.map(tn.tagToString).join(", ");return`${n.address}::${n.module}::${n.name}${i?`<${i}>`:""}`}throw new Error("Invalid TypeTag")}}function fu(e){return x.u64({name:"unsafe_u64",...e}).transform({input:t=>t,output:t=>Number(t)})}function hu(e){return x.enum("Option",{None:null,Some:e})}const Se=x.bytes(Ks).transform({validate:e=>{const t=typeof e=="string"?e:Ai(e);if(!t||!Yt(oe(t)))throw new Error(`Invalid Sui address ${t}`)},input:e=>typeof e=="string"?$a(oe(e)):e,output:e=>oe(Ai(e))}),Gt=x.vector(x.u8()).transform({name:"ObjectDigest",input:e=>Ci(e),output:e=>yo(new Uint8Array(e)),validate:e=>{if(Ci(e).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),Dt=x.struct("SuiObjectRef",{objectId:Se,version:x.u64(),digest:Gt}),Ha=x.struct("SharedObjectRef",{objectId:Se,initialSharedVersion:x.u64(),mutable:x.bool()}),Ja=x.enum("ObjectArg",{ImmOrOwnedObject:Dt,SharedObject:Ha,Receiving:Dt}),Za=x.enum("CallArg",{Pure:x.struct("Pure",{bytes:x.vector(x.u8()).transform({input:e=>typeof e=="string"?on(e):e,output:e=>At(new Uint8Array(e))})}),Object:Ja}),Vs=x.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:x.lazy(()=>Vs),struct:x.lazy(()=>ic),u16:null,u32:null,u256:null}),zs=Vs.transform({input:e=>typeof e=="string"?tn.parseFromStr(e,!0):e,output:e=>tn.tagToString(e)}),Zt=x.enum("Argument",{GasCoin:null,Input:x.u16(),Result:x.u16(),NestedResult:x.tuple([x.u16(),x.u16()])}),Qa=x.struct("ProgrammableMoveCall",{package:Se,module:x.string(),function:x.string(),typeArguments:x.vector(zs),arguments:x.vector(Zt)}),Ya=x.enum("Command",{MoveCall:Qa,TransferObjects:x.struct("TransferObjects",{objects:x.vector(Zt),address:Zt}),SplitCoins:x.struct("SplitCoins",{coin:Zt,amounts:x.vector(Zt)}),MergeCoins:x.struct("MergeCoins",{destination:Zt,sources:x.vector(Zt)}),Publish:x.struct("Publish",{modules:x.vector(x.vector(x.u8()).transform({input:e=>typeof e=="string"?on(e):e,output:e=>At(new Uint8Array(e))})),dependencies:x.vector(Se)}),MakeMoveVec:x.struct("MakeMoveVec",{type:hu(zs).transform({input:e=>e===null?{None:!0}:{Some:e},output:e=>e.Some??null}),elements:x.vector(Zt)}),Upgrade:x.struct("Upgrade",{modules:x.vector(x.vector(x.u8()).transform({input:e=>typeof e=="string"?on(e):e,output:e=>At(new Uint8Array(e))})),dependencies:x.vector(Se),package:Se,ticket:Zt})}),ec=x.struct("ProgrammableTransaction",{inputs:x.vector(Za),commands:x.vector(Ya)}),tc=x.enum("TransactionKind",{ProgrammableTransaction:ec,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),nc=x.enum("TransactionExpiration",{None:null,Epoch:fu()}),ic=x.struct("StructTag",{address:Se,module:x.string(),name:x.string(),typeParams:x.vector(Vs)}),oc=x.struct("GasData",{payment:x.vector(Dt),owner:Se,price:x.u64(),budget:x.u64()}),sc=x.struct("TransactionDataV1",{kind:tc,sender:Se,gasData:oc,expiration:nc}),rc=x.enum("TransactionData",{V1:sc}),ac=x.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),cc=x.enum("IntentVersion",{V0:null}),dc=x.enum("AppId",{Sui:null}),lc=x.struct("Intent",{scope:ac,version:cc,appId:dc});function uc(e){return x.struct(`IntentMessage<${e.name}>`,{intent:lc,value:e})}const fc=x.enum("CompressedSignature",{ED25519:x.fixedArray(64,x.u8()),Secp256k1:x.fixedArray(64,x.u8()),Secp256r1:x.fixedArray(64,x.u8()),ZkLogin:x.vector(x.u8())}),hc=x.enum("PublicKey",{ED25519:x.fixedArray(32,x.u8()),Secp256k1:x.fixedArray(33,x.u8()),Secp256r1:x.fixedArray(33,x.u8()),ZkLogin:x.vector(x.u8())}),pc=x.struct("MultiSigPkMap",{pubKey:hc,weight:x.u8()}),_c=x.struct("MultiSigPublicKey",{pk_map:x.vector(pc),threshold:x.u16()}),pu=x.struct("MultiSig",{sigs:x.vector(fc),bitmap:x.u16(),multisig_pk:_c}),_u=x.vector(x.u8()).transform({input:e=>typeof e=="string"?on(e):e,output:e=>At(new Uint8Array(e))}),bc=x.struct("SenderSignedTransaction",{intentMessage:uc(rc),txSignatures:x.vector(_u)}),bu=x.vector(bc,{name:"SenderSignedData"}),mu=x.enum("PackageUpgradeError",{UnableToFetchPackage:x.struct("UnableToFetchPackage",{packageId:Se}),NotAPackage:x.struct("NotAPackage",{objectId:Se}),IncompatibleUpgrade:null,DigestDoesNotMatch:x.struct("DigestDoesNotMatch",{digest:x.vector(x.u8())}),UnknownUpgradePolicy:x.struct("UnknownUpgradePolicy",{policy:x.u8()}),PackageIDDoesNotMatch:x.struct("PackageIDDoesNotMatch",{packageId:Se,ticketId:Se})}),gu=x.struct("ModuleId",{address:Se,name:x.string()}),zr=x.struct("MoveLocation",{module:gu,function:x.u16(),instruction:x.u16(),functionName:x.option(x.string())}),yu=x.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:x.struct("IndexOutOfBounds",{idx:x.u16()}),SecondaryIndexOutOfBounds:x.struct("SecondaryIndexOutOfBounds",{resultIdx:x.u16(),secondaryIdx:x.u16()}),InvalidResultArity:x.struct("InvalidResultArity",{resultIdx:x.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),wu=x.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),vu=x.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:x.struct("MoveObjectTooBig",{objectSize:x.u64(),maxObjectSize:x.u64()}),MovePackageTooBig:x.struct("MovePackageTooBig",{objectSize:x.u64(),maxObjectSize:x.u64()}),CircularObjectOwnership:x.struct("CircularObjectOwnership",{object:Se}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:x.option(zr),MoveAbort:x.tuple([zr,x.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:x.struct("CommandArgumentError",{argIdx:x.u16(),kind:yu}),TypeArgumentError:x.struct("TypeArgumentError",{argumentIdx:x.u16(),kind:wu}),UnusedValueWithoutDrop:x.struct("UnusedValueWithoutDrop",{resultIdx:x.u16(),secondaryIdx:x.u16()}),InvalidPublicFunctionReturnType:x.struct("InvalidPublicFunctionReturnType",{idx:x.u16()}),InvalidTransferObject:null,EffectsTooLarge:x.struct("EffectsTooLarge",{currentSize:x.u64(),maxSize:x.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:x.struct("PackageUpgradeError",{upgradeError:mu}),WrittenObjectsTooLarge:x.struct("WrittenObjectsTooLarge",{currentSize:x.u64(),maxSize:x.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null}),mc=x.enum("ExecutionStatus",{Success:null,Failed:x.struct("ExecutionFailed",{error:vu,command:x.option(x.u64())})}),gc=x.struct("GasCostSummary",{computationCost:x.u64(),storageCost:x.u64(),storageRebate:x.u64(),nonRefundableStorageFee:x.u64()}),Gn=x.enum("Owner",{AddressOwner:Se,ObjectOwner:Se,Shared:x.struct("Shared",{initialSharedVersion:x.u64()}),Immutable:null}),ku=x.struct("TransactionEffectsV1",{status:mc,executedEpoch:x.u64(),gasUsed:gc,modifiedAtVersions:x.vector(x.tuple([Se,x.u64()])),sharedObjects:x.vector(Dt),transactionDigest:Gt,created:x.vector(x.tuple([Dt,Gn])),mutated:x.vector(x.tuple([Dt,Gn])),unwrapped:x.vector(x.tuple([Dt,Gn])),deleted:x.vector(Dt),unwrappedThenDeleted:x.vector(Dt),wrapped:x.vector(Dt),gasObject:x.tuple([Dt,Gn]),eventsDigest:x.option(Gt),dependencies:x.vector(Gt)}),Gs=x.tuple([x.u64(),Gt]),Cu=x.enum("ObjectIn",{NotExist:null,Exist:x.tuple([Gs,Gn])}),Au=x.enum("ObjectOut",{NotExist:null,ObjectWrite:x.tuple([Gt,Gn]),PackageWrite:Gs}),Su=x.enum("IDOperation",{None:null,Created:null,Deleted:null}),Tu=x.struct("EffectsObjectChange",{inputState:Cu,outputState:Au,idOperation:Su}),xu=x.enum("UnchangedSharedKind",{ReadOnlyRoot:Gs,MutateDeleted:x.u64(),ReadDeleted:x.u64()}),Iu=x.struct("TransactionEffectsV2",{status:mc,executedEpoch:x.u64(),gasUsed:gc,transactionDigest:Gt,gasObjectIndex:x.option(x.u32()),eventsDigest:x.option(Gt),dependencies:x.vector(Gt),lamportVersion:x.u64(),changedObjects:x.vector(x.tuple([Se,Tu])),unchangedSharedObjects:x.vector(x.tuple([Se,xu])),auxDataDigest:x.option(Gt)}),Pu=x.enum("TransactionEffects",{V1:ku,V2:Iu}),le={...x,U8:x.u8(),U16:x.u16(),U32:x.u32(),U64:x.u64(),U128:x.u128(),U256:x.u256(),ULEB128:x.uleb128(),Bool:x.bool(),String:x.string(),Address:Se,AppId:dc,Argument:Zt,CallArg:Za,CompressedSignature:fc,GasData:oc,Intent:lc,IntentMessage:uc,IntentScope:ac,IntentVersion:cc,MultiSig:pu,MultiSigPkMap:pc,MultiSigPublicKey:_c,ObjectArg:Ja,ObjectDigest:Gt,ProgrammableMoveCall:Qa,ProgrammableTransaction:ec,PublicKey:hc,SenderSignedData:bu,SenderSignedTransaction:bc,SharedObjectRef:Ha,StructTag:ic,SuiObjectRef:Dt,Command:Ya,TransactionData:rc,TransactionDataV1:sc,TransactionExpiration:nc,TransactionKind:tc,TypeTag:zs,TransactionEffects:Pu},Ou="object",ju="ID",Mu="ascii",Eu="String",Bu="string",Du="String",Nu="option",Ru="Option";function qu(e){const t=typeof e.body=="object"&&"datatype"in e.body?e.body.datatype:null;return!!t&&oe(t.package)===oe("0x2")&&t.module==="tx_context"&&t.type==="TxContext"}function ks(e){if(typeof e=="string")switch(e){case"address":return le.Address;case"bool":return le.Bool;case"u8":return le.U8;case"u16":return le.U16;case"u32":return le.U32;case"u64":return le.U64;case"u128":return le.U128;case"u256":return le.U256;default:throw new Error(`Unknown type signature ${e}`)}if("vector"in e){if(e.vector==="u8")return le.vector(le.U8).transform({input:n=>typeof n=="string"?new TextEncoder().encode(n):n,output:n=>n});const t=ks(e.vector);return t?le.vector(t):null}if("datatype"in e){const t=oe(e.datatype.package);if(t===oe(cu)){if(e.datatype.module===Mu&&e.datatype.type===Eu||e.datatype.module===Bu&&e.datatype.type===Du)return le.String;if(e.datatype.module===Nu&&e.datatype.type===Ru){const n=ks(e.datatype.typeParameters[0]);return n?le.vector(n):null}}if(t===oe(Xa)&&e.datatype.module===Ou&&e.datatype.type===ju)return le.Address}return null}function $u(e){return typeof e=="object"&&"Reference"in e?{ref:"&",body:_i(e.Reference)}:typeof e=="object"&&"MutableReference"in e?{ref:"&mut",body:_i(e.MutableReference)}:{ref:null,body:_i(e)}}function _i(e){if(typeof e=="string")switch(e){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${e}`)}if("Vector"in e)return{vector:_i(e.Vector)};if("Struct"in e)return{datatype:{package:e.Struct.address,module:e.Struct.module,type:e.Struct.name,typeParameters:e.Struct.typeArguments.map(_i)}};if("TypeParameter"in e)return{typeParameter:e.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(e)}`)}function Fu(e){return{$kind:"Pure",Pure:{bytes:e instanceof Uint8Array?At(e):e.toBase64()}}}const pn={Pure:Fu,ObjectRef({objectId:e,digest:t,version:n}){return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:t,version:n,objectId:oe(e)}}}},SharedObjectRef({objectId:e,mutable:t,initialSharedVersion:n}){return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:t,initialSharedVersion:n,objectId:oe(e)}}}},ReceivingRef({objectId:e,digest:t,version:n}){return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:t,version:n,objectId:oe(e)}}}}};var yc=class extends Error{constructor(t){super(t[0].message);U(this,"issues");this.name="ValiError",this.issues=t}};function wc(e){return typeof e=="function"?e():e}function Ws(e,t,n,i,o){return{issues:[{validation:e,message:wc(t),input:n,requirement:i,path:o}]}}function Xs(e){return{output:e}}function Ht(e,t){return Array.isArray(e)?[void 0,e]:[e,t]}function rn(e,t,n){return{typed:e,output:t,issues:n}}function vc(e,t,n){if(!e||typeof e=="object"&&!Array.isArray(e)){const[s,r]=Ht(t,n);return[e,s,r]}const[i,o]=Ht(e,t);return[void 0,i,o]}function Lu(e,t){return{reason:e==null?void 0:e.reason,validation:t.validation,origin:(e==null?void 0:e.origin)||"value",message:t.message,input:t.input,requirement:t==null?void 0:t.requirement,path:t.path,abortEarly:e==null?void 0:e.abortEarly,abortPipeEarly:e==null?void 0:e.abortPipeEarly,skipPipe:e==null?void 0:e.skipPipe}}function Uu(e,t){return{reason:t,origin:e==null?void 0:e.origin,abortEarly:e==null?void 0:e.abortEarly,abortPipeEarly:e==null?void 0:e.abortPipeEarly,skipPipe:e==null?void 0:e.skipPipe}}function Lt(e,t,n,i,o){let s,r=e;if(t!=null&&t.length&&!(n!=null&&n.skipPipe))for(const a of t){const c=a._parse(r);if(c.issues){s=s||Uu(n,i);for(const d of c.issues){const l=Lu(s,d);o?o.push(l):o=[l]}if(s.abortEarly||s.abortPipeEarly)break}else r=c.output}return rn(!0,r,o)}function Ft(e,t,n,i,o,s,r){return{typed:!1,output:o,issues:[{reason:t,validation:n,origin:(e==null?void 0:e.origin)||"value",message:wc(i),input:o,path:s,issues:r,abortEarly:e==null?void 0:e.abortEarly,abortPipeEarly:e==null?void 0:e.abortPipeEarly,skipPipe:e==null?void 0:e.skipPipe}]}}function Hs(e){return typeof e.default=="function"?e.default():e.default}function Cs(e,t,n){return!e._parse(t,{abortEarly:!0,skipPipe:n==null?void 0:n.skipPipe}).issues}function _e(e,t,n){const[i="Invalid type",o]=Ht(t,n);return{type:"array",async:!1,item:e,message:i,pipe:o,_parse(s,r){if(!Array.isArray(s))return Ft(r,"type","array",this.message,s);let a=!0,c;const d=[];for(let l=0;l<s.length;l++){const f=s[l],_=this.item._parse(f,r);if(_.issues){const b={type:"array",input:s,key:l,value:f};for(const y of _.issues)y.path?y.path.unshift(b):y.path=[b],c==null||c.push(y);if(c||(c=_.issues),r!=null&&r.abortEarly){a=!1;break}}_.typed||(a=!1),d.push(_.output)}return a?Lt(d,this.pipe,r,"array",c):rn(!1,d,c)}}}function Ku(e,t){const[n="Invalid type",i]=Ht(e,t);return{type:"bigint",async:!1,message:n,pipe:i,_parse(o,s){return typeof o!="bigint"?Ft(s,"type","bigint",this.message,o):Lt(o,this.pipe,s,"bigint")}}}function Js(e,t){const[n="Invalid type",i]=Ht(e,t);return{type:"boolean",async:!1,message:n,pipe:i,_parse(o,s){return typeof o!="boolean"?Ft(s,"type","boolean",this.message,o):Lt(o,this.pipe,s,"boolean")}}}function ft(e,t="Invalid type"){return{type:"literal",async:!1,literal:e,message:t,_parse(n,i){return n!==this.literal?Ft(i,"type","literal",this.message,n):rn(!0,n)}}}function _t(e,t){return{type:"nullable",async:!1,wrapped:e,default:t,_parse(n,i){if(n===null){const o=Hs(this);if(o===void 0)return rn(!0,n);n=o}return this.wrapped._parse(n,i)}}}function ao(e,t){return{type:"nullish",async:!1,wrapped:e,default:t,_parse(n,i){if(n==null){const o=Hs(this);if(o===void 0)return rn(!0,n);n=o}return this.wrapped._parse(n,i)}}}function Ot(e,t){const[n="Invalid type",i]=Ht(e,t);return{type:"number",async:!1,message:n,pipe:i,_parse(o,s){return typeof o!="number"||isNaN(o)?Ft(s,"type","number",this.message,o):Lt(o,this.pipe,s,"number")}}}function ie(e,t,n,i){const[o,s="Invalid type",r]=vc(t,n,i);let a;return{type:"object",async:!1,entries:e,rest:o,message:s,pipe:r,_parse(c,d){if(!c||typeof c!="object")return Ft(d,"type","object",this.message,c);a=a||Object.entries(this.entries);let l=!0,f;const _={};for(const[b,y]of a){const A=c[b],O=y._parse(A,d);if(O.issues){const j={type:"object",input:c,key:b,value:A};for(const M of O.issues)M.path?M.path.unshift(j):M.path=[j],f==null||f.push(M);if(f||(f=O.issues),d!=null&&d.abortEarly){l=!1;break}}O.typed||(l=!1),(O.output!==void 0||b in c)&&(_[b]=O.output)}if(this.rest&&!(d!=null&&d.abortEarly&&f)){for(const b in c)if(!(b in this.entries)){const y=c[b],A=this.rest._parse(y,d);if(A.issues){const O={type:"object",input:c,key:b,value:y};for(const j of A.issues)j.path?j.path.unshift(O):j.path=[O],f==null||f.push(j);if(f||(f=A.issues),d!=null&&d.abortEarly){l=!1;break}}A.typed||(l=!1),_[b]=A.output}}return l?Lt(_,this.pipe,d,"object",f):rn(!1,_,f)}}}function _n(e,t){return{type:"optional",async:!1,wrapped:e,default:t,_parse(n,i){if(n===void 0){const o=Hs(this);if(o===void 0)return rn(!0,n);n=o}return this.wrapped._parse(n,i)}}}function me(e,t){const[n="Invalid type",i]=Ht(e,t);return{type:"string",async:!1,message:n,pipe:i,_parse(o,s){return typeof o!="string"?Ft(s,"type","string",this.message,o):Lt(o,this.pipe,s,"string")}}}function Vu(e,t,n,i){if(typeof t=="object"&&!Array.isArray(t)){const[r,a]=Ht(n,i);return[e,t,r,a]}const[o,s]=Ht(t,n);return[me(),e,o,s]}var zu=["__proto__","prototype","constructor"];function co(e,t,n,i){const[o,s,r="Invalid type",a]=Vu(e,t,n,i);return{type:"record",async:!1,key:o,value:s,message:r,pipe:a,_parse(c,d){if(!c||typeof c!="object")return Ft(d,"type","record",this.message,c);let l=!0,f;const _={};for(const[b,y]of Object.entries(c))if(!zu.includes(b)){let A;const O=this.key._parse(b,{origin:"key",abortEarly:d==null?void 0:d.abortEarly,abortPipeEarly:d==null?void 0:d.abortPipeEarly,skipPipe:d==null?void 0:d.skipPipe});if(O.issues){A={type:"record",input:c,key:b,value:y};for(const M of O.issues)M.path=[A],f==null||f.push(M);if(f||(f=O.issues),d!=null&&d.abortEarly){l=!1;break}}const j=this.value._parse(y,d);if(j.issues){A=A||{type:"record",input:c,key:b,value:y};for(const M of j.issues)M.path?M.path.unshift(A):M.path=[A],f==null||f.push(M);if(f||(f=j.issues),d!=null&&d.abortEarly){l=!1;break}}(!O.typed||!j.typed)&&(l=!1),O.typed&&(_[O.output]=j.output)}return l?Lt(_,this.pipe,d,"record",f):rn(!1,_,f)}}}function Gr(e){return{type:"recursive",async:!1,getter:e,_parse(t,n){return this.getter()._parse(t,n)}}}function kc(e,t,n,i){const[o,s="Invalid type",r]=vc(t,n,i);return{type:"tuple",async:!1,items:e,rest:o,message:s,pipe:r,_parse(a,c){if(!Array.isArray(a)||this.items.length>a.length)return Ft(c,"type","tuple",this.message,a);let d=!0,l;const f=[];for(let _=0;_<this.items.length;_++){const b=a[_],y=this.items[_]._parse(b,c);if(y.issues){const A={type:"tuple",input:a,key:_,value:b};for(const O of y.issues)O.path?O.path.unshift(A):O.path=[A],l==null||l.push(O);if(l||(l=y.issues),c!=null&&c.abortEarly){d=!1;break}}y.typed||(d=!1),f[_]=y.output}if(this.rest&&!(c!=null&&c.abortEarly&&l))for(let _=this.items.length;_<a.length;_++){const b=a[_],y=this.rest._parse(b,c);if(y.issues){const A={type:"tuple",input:a,key:_,value:b};for(const O of y.issues)O.path?O.path.unshift(A):O.path=[A],l==null||l.push(O);if(l||(l=y.issues),c!=null&&c.abortEarly){d=!1;break}}y.typed||(d=!1),f[_]=y.output}return d?Lt(f,this.pipe,c,"tuple",l):rn(!1,f,l)}}}function mn(e,t,n){const[i="Invalid type",o]=Ht(t,n);return{type:"union",async:!1,options:e,message:i,pipe:o,_parse(s,r){let a,c;for(const d of this.options){const l=d._parse(s,r);if(l.issues)if(a)for(const f of l.issues)a.push(f);else a=l.issues;else{c=[l.output];break}}return c?Lt(c[0],this.pipe,r,"union"):Ft(r,"type","union",this.message,s,void 0,a)}}}function wo(e){return{type:"unknown",async:!1,pipe:e,_parse(t,n){return Lt(t,this.pipe,n,"unknown")}}}function d0(e,t,n,i){const[o="Invalid type",s]=Ht(n,i);return{type:"variant",async:!1,key:e,options:t,message:o,pipe:s,_parse(r,a){if(!r||typeof r!="object")return Ft(a,"type","variant",this.message,r);if(this.key in r){let c,d;const l=f=>{for(const _ of f)if(_.type==="object"){if(!_.entries[this.key]._parse(r[this.key],a).issues){const y=_._parse(r,a);if(y.issues)c=y.issues;else{d=[y.output];break}}}else if(_.type==="variant"&&(l(_.options),d))break};if(l(this.options),d)return Lt(d[0],this.pipe,a,"variant");if(c)return rn(!1,d,c)}return Ft(a,"type","variant",this.message,r,[{type:"object",input:r,key:this.key,value:void 0}])}}}function Ae(e,t,n){const i=e._parse(t,n);if(i.issues)throw new yc(i.issues);return i.output}function l0(e,t,n){const i=e._parse(t,n);return{typed:i.typed,success:!i.issues,data:i.output,output:i.output,error:i.issues&&new yc(i.issues),issues:i.issues}}function Zs(e,t,n){return{...e,_parse(i,o){const s=e._parse(i,o);return s.typed?(s.output=t(s.output,{issues:s.issues}),s.issues||!n?s:Array.isArray(n)?Lt(s.output,n,o,typeof s.output):n._parse(s.output,o)):s}}}var Gu=/^[\da-f]{8}(?:-[\da-f]{4}){3}-[\da-f]{12}$/iu;function Cc(e,t="Invalid input"){return{type:"custom",async:!1,message:t,requirement:e,_parse(n){return this.requirement(n)?Xs(n):Ws(this.type,this.message,n,this.requirement)}}}function jt(e="Invalid integer"){return{type:"integer",async:!1,message:e,requirement:Number.isInteger,_parse(t){return this.requirement(t)?Xs(t):Ws(this.type,this.message,t,this.requirement)}}}function u0(e="Invalid UUID"){return{type:"uuid",async:!1,message:e,requirement:Gu,_parse(t){return this.requirement.test(t)?Xs(t):Ws(this.type,this.message,t,this.requirement)}}}function Fn(e){const t=Object.entries(e).map(([n,i])=>ie({[n]:i}));return Zs(mn(t),n=>({...n,$kind:Object.keys(n)[0]}))}const si=Zs(me(),e=>oe(e),[Cc(Yt)]),Mt=si,qn=me(),It=mn([me(),Ot([jt()])],[Cc(e=>{try{return BigInt(e),BigInt(e)>=0&&BigInt(e)<=18446744073709551615n}catch{return!1}},"Invalid u64")]),Pn=ie({objectId:si,version:It,digest:me()}),we=Zs(mn([ie({GasCoin:ft(!0)}),ie({Input:Ot([jt()]),type:_n(ft("pure"))}),ie({Input:Ot([jt()]),type:_n(ft("object"))}),ie({Result:Ot([jt()])}),ie({NestedResult:kc([Ot([jt()]),Ot([jt()])])})]),e=>({...e,$kind:Object.keys(e)[0]})),Wu=ie({budget:_t(It),price:_t(It),owner:_t(si),payment:_t(_e(Pn))}),As=mn([ft("address"),ft("bool"),ft("u8"),ft("u16"),ft("u32"),ft("u64"),ft("u128"),ft("u256"),ie({vector:Gr(()=>As)}),ie({datatype:ie({package:me(),module:me(),type:me(),typeParameters:_e(Gr(()=>As))})}),ie({typeParameter:Ot([jt()])})]),Xu=ie({ref:_t(mn([ft("&"),ft("&mut")])),body:As}),Hu=ie({package:Mt,module:me(),function:me(),typeArguments:_e(me()),arguments:_e(we),_argumentTypes:_n(_t(_e(Xu)))}),Ju=ie({name:me(),inputs:co(me(),mn([we,_e(we)])),data:co(me(),wo())}),Zu=Fn({MoveCall:Hu,TransferObjects:ie({objects:_e(we),address:we}),SplitCoins:ie({coin:we,amounts:_e(we)}),MergeCoins:ie({destination:we,sources:_e(we)}),Publish:ie({modules:_e(qn),dependencies:_e(Mt)}),MakeMoveVec:ie({type:_t(me()),elements:_e(we)}),Upgrade:ie({modules:_e(qn),dependencies:_e(Mt),package:Mt,ticket:we}),$Intent:Ju}),Ac=Fn({ImmOrOwnedObject:Pn,SharedObject:ie({objectId:Mt,initialSharedVersion:It,mutable:Js()}),Receiving:Pn}),Qu=Fn({Object:Ac,Pure:ie({bytes:qn}),UnresolvedPure:ie({value:wo()}),UnresolvedObject:ie({objectId:Mt,version:_n(_t(It)),digest:_n(_t(me())),initialSharedVersion:_n(_t(It))})}),Wr=Fn({Object:Ac,Pure:ie({bytes:qn})}),Sc=Fn({None:ft(!0),Epoch:It}),Wi=ie({version:ft(2),sender:ao(si),expiration:ao(Sc),gasData:Wu,inputs:_e(Qu),commands:_e(Zu)});var Yu=(e=>(e[e.COMPATIBLE=0]="COMPATIBLE",e[e.ADDITIVE=128]="ADDITIVE",e[e.DEP_ONLY=192]="DEP_ONLY",e))(Yu||{});const On={MoveCall(e){const[t,n="",i=""]="target"in e?e.target.split("::"):[e.package,e.module,e.function];return{$kind:"MoveCall",MoveCall:{package:t,module:n,function:i,typeArguments:e.typeArguments??[],arguments:e.arguments??[]}}},TransferObjects(e,t){return{$kind:"TransferObjects",TransferObjects:{objects:e.map(n=>Ae(we,n)),address:Ae(we,t)}}},SplitCoins(e,t){return{$kind:"SplitCoins",SplitCoins:{coin:Ae(we,e),amounts:t.map(n=>Ae(we,n))}}},MergeCoins(e,t){return{$kind:"MergeCoins",MergeCoins:{destination:Ae(we,e),sources:t.map(n=>Ae(we,n))}}},Publish({modules:e,dependencies:t}){return{$kind:"Publish",Publish:{modules:e.map(n=>typeof n=="string"?n:At(new Uint8Array(n))),dependencies:t.map(n=>he(n))}}},Upgrade({modules:e,dependencies:t,package:n,ticket:i}){return{$kind:"Upgrade",Upgrade:{modules:e.map(o=>typeof o=="string"?o:At(new Uint8Array(o))),dependencies:t.map(o=>he(o)),package:n,ticket:Ae(we,i)}}},MakeMoveVec({type:e,elements:t}){return{$kind:"MakeMoveVec",MakeMoveVec:{type:e??null,elements:t.map(n=>Ae(we,n))}}},Intent({name:e,inputs:t={},data:n={}}){return{$kind:"$Intent",$Intent:{name:e,inputs:Object.fromEntries(Object.entries(t).map(([i,o])=>[i,Array.isArray(o)?o.map(s=>Ae(we,s)):Ae(we,o)])),data:n}}}},Xr=ie({digest:me(),objectId:me(),version:mn([Ot([jt()]),me(),Ku()])}),ef=Fn({ImmOrOwned:Xr,Shared:ie({objectId:Mt,initialSharedVersion:It,mutable:Js()}),Receiving:Xr}),Hr=Fn({Object:ef,Pure:_e(Ot([jt()]))});function Jr(e){var n;const t=e.inputs.map((i,o)=>{if(i.Object)return{kind:"Input",index:o,value:{Object:i.Object.ImmOrOwnedObject?{ImmOrOwned:i.Object.ImmOrOwnedObject}:i.Object.Receiving?{Receiving:{digest:i.Object.Receiving.digest,version:i.Object.Receiving.version,objectId:i.Object.Receiving.objectId}}:{Shared:{mutable:i.Object.SharedObject.mutable,initialSharedVersion:i.Object.SharedObject.initialSharedVersion,objectId:i.Object.SharedObject.objectId}}},type:"object"};if(i.Pure)return{kind:"Input",index:o,value:{Pure:Array.from(on(i.Pure.bytes))},type:"pure"};if(i.UnresolvedPure)return{kind:"Input",type:"pure",index:o,value:i.UnresolvedPure.value};if(i.UnresolvedObject)return{kind:"Input",type:"object",index:o,value:i.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:e.sender??void 0,expiration:((n=e.expiration)==null?void 0:n.$kind)==="Epoch"?{Epoch:Number(e.expiration.Epoch)}:e.expiration?{None:!0}:null,gasConfig:{owner:e.gasData.owner??void 0,budget:e.gasData.budget??void 0,price:e.gasData.price??void 0,payment:e.gasData.payment??void 0},inputs:t,transactions:e.commands.map(i=>{if(i.MakeMoveVec)return{kind:"MakeMoveVec",type:i.MakeMoveVec.type===null?{None:!0}:{Some:tn.parseFromStr(i.MakeMoveVec.type)},objects:i.MakeMoveVec.elements.map(o=>cn(o,t))};if(i.MergeCoins)return{kind:"MergeCoins",destination:cn(i.MergeCoins.destination,t),sources:i.MergeCoins.sources.map(o=>cn(o,t))};if(i.MoveCall)return{kind:"MoveCall",target:`${i.MoveCall.package}::${i.MoveCall.module}::${i.MoveCall.function}`,typeArguments:i.MoveCall.typeArguments,arguments:i.MoveCall.arguments.map(o=>cn(o,t))};if(i.Publish)return{kind:"Publish",modules:i.Publish.modules.map(o=>Array.from(on(o))),dependencies:i.Publish.dependencies};if(i.SplitCoins)return{kind:"SplitCoins",coin:cn(i.SplitCoins.coin,t),amounts:i.SplitCoins.amounts.map(o=>cn(o,t))};if(i.TransferObjects)return{kind:"TransferObjects",objects:i.TransferObjects.objects.map(o=>cn(o,t)),address:cn(i.TransferObjects.address,t)};if(i.Upgrade)return{kind:"Upgrade",modules:i.Upgrade.modules.map(o=>Array.from(on(o))),dependencies:i.Upgrade.dependencies,packageId:i.Upgrade.package,ticket:cn(i.Upgrade.ticket,t)};throw new Error(`Unknown transaction ${Object.keys(i)}`)})}}function cn(e,t){if(e.$kind==="GasCoin")return{kind:"GasCoin"};if(e.$kind==="Result")return{kind:"Result",index:e.Result};if(e.$kind==="NestedResult")return{kind:"NestedResult",index:e.NestedResult[0],resultIndex:e.NestedResult[1]};if(e.$kind==="Input")return t[e.Input];throw new Error(`Invalid argument ${Object.keys(e)}`)}function tf(e){var t,n,i;return Ae(Wi,{version:2,sender:e.sender??null,expiration:e.expiration?"Epoch"in e.expiration?{Epoch:e.expiration.Epoch}:{None:!0}:null,gasData:{owner:e.gasConfig.owner??null,budget:((t=e.gasConfig.budget)==null?void 0:t.toString())??null,price:((n=e.gasConfig.price)==null?void 0:n.toString())??null,payment:((i=e.gasConfig.payment)==null?void 0:i.map(o=>({digest:o.digest,objectId:o.objectId,version:o.version.toString()})))??null},inputs:e.inputs.map(o=>{if(o.kind==="Input"){if(Cs(Hr,o.value)){const s=Ae(Hr,o.value);if(s.Object){if(s.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:s.Object.ImmOrOwned.objectId,version:String(s.Object.ImmOrOwned.version),digest:s.Object.ImmOrOwned.digest}}};if(s.Object.Shared)return{Object:{SharedObject:{mutable:s.Object.Shared.mutable??null,initialSharedVersion:s.Object.Shared.initialSharedVersion,objectId:s.Object.Shared.objectId}}};if(s.Object.Receiving)return{Object:{Receiving:{digest:s.Object.Receiving.digest,version:String(s.Object.Receiving.version),objectId:s.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:At(new Uint8Array(s.Pure))}}}return o.type==="object"?{UnresolvedObject:{objectId:o.value}}:{UnresolvedPure:{value:o.value}}}throw new Error("Invalid input")}),commands:e.transactions.map(o=>{switch(o.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in o.type?tn.tagToString(o.type.Some):null,elements:o.objects.map(s=>dn(s))}};case"MergeCoins":return{MergeCoins:{destination:dn(o.destination),sources:o.sources.map(s=>dn(s))}};case"MoveCall":{const[s,r,a]=o.target.split("::");return{MoveCall:{package:s,module:r,function:a,typeArguments:o.typeArguments,arguments:o.arguments.map(c=>dn(c))}}}case"Publish":return{Publish:{modules:o.modules.map(s=>At(Uint8Array.from(s))),dependencies:o.dependencies}};case"SplitCoins":return{SplitCoins:{coin:dn(o.coin),amounts:o.amounts.map(s=>dn(s))}};case"TransferObjects":return{TransferObjects:{objects:o.objects.map(s=>dn(s)),address:dn(o.address)}};case"Upgrade":return{Upgrade:{modules:o.modules.map(s=>At(Uint8Array.from(s))),dependencies:o.dependencies,package:o.packageId,ticket:dn(o.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(o)}`)})})}function dn(e){switch(e.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:e.index};case"NestedResult":return{NestedResult:[e.index,e.resultIndex]};case"Input":return{Input:e.index}}}function xi(e){return mn(Object.entries(e).map(([t,n])=>ie({[t]:n})))}const Ut=xi({GasCoin:ft(!0),Input:Ot([jt()]),Result:Ot([jt()]),NestedResult:kc([Ot([jt()]),Ot([jt()])])}),nf=ie({budget:_t(It),price:_t(It),owner:_t(si),payment:_t(_e(Pn))}),of=ie({package:Mt,module:me(),function:me(),typeArguments:_e(me()),arguments:_e(Ut)}),sf=ie({name:me(),inputs:co(me(),mn([Ut,_e(Ut)])),data:co(me(),wo())}),rf=xi({MoveCall:of,TransferObjects:ie({objects:_e(Ut),address:Ut}),SplitCoins:ie({coin:Ut,amounts:_e(Ut)}),MergeCoins:ie({destination:Ut,sources:_e(Ut)}),Publish:ie({modules:_e(qn),dependencies:_e(Mt)}),MakeMoveVec:ie({type:_t(me()),elements:_e(Ut)}),Upgrade:ie({modules:_e(qn),dependencies:_e(Mt),package:Mt,ticket:Ut}),$Intent:sf}),af=xi({ImmOrOwnedObject:Pn,SharedObject:ie({objectId:Mt,initialSharedVersion:It,mutable:Js()}),Receiving:Pn}),cf=xi({Object:af,Pure:ie({bytes:qn}),UnresolvedPure:ie({value:wo()}),UnresolvedObject:ie({objectId:Mt,version:_n(_t(It)),digest:_n(_t(me())),initialSharedVersion:_n(_t(It))})}),df=xi({None:ft(!0),Epoch:It}),lf=ie({version:ft(2),sender:ao(si),expiration:ao(df),gasData:nf,inputs:_e(cf),commands:_e(rf)}),uf=50,ff=1000n,hf=5e10;async function pf(e,t,n){return await yf(e,t),await gf(e,t),t.onlyTransactionKind||(await _f(e,t),await bf(e,t),await mf(e,t)),await wf(e),await n()}async function _f(e,t){e.gasConfig.price||(e.gasConfig.price=String(await Ii(t).getReferenceGasPrice()))}async function bf(e,t){if(e.gasConfig.budget)return;const n=await Ii(t).dryRunTransactionBlock({transactionBlock:e.build({overrides:{gasData:{budget:String(hf),payment:[]}}})});if(n.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${n.effects.status.error}`,{cause:n});const i=ff*BigInt(e.gasConfig.price||1n),o=BigInt(n.effects.gasUsed.computationCost)+i,s=o+BigInt(n.effects.gasUsed.storageCost)-BigInt(n.effects.gasUsed.storageRebate);e.gasConfig.budget=String(s>o?s:o)}async function mf(e,t){if(!e.gasConfig.payment){const i=(await Ii(t).getCoins({owner:e.gasConfig.owner||e.sender,coinType:du})).data.filter(o=>!e.inputs.find(r=>{var a;return(a=r.Object)!=null&&a.ImmOrOwnedObject?o.coinObjectId===r.Object.ImmOrOwnedObject.objectId:!1})).map(o=>({objectId:o.coinObjectId,digest:o.digest,version:o.version}));if(!i.length)throw new Error("No valid gas coins found for the transaction.");e.gasConfig.payment=i.map(o=>Ae(Pn,o))}}async function gf(e,t){const n=e.inputs.filter(l=>{var f;return l.UnresolvedObject&&!(l.UnresolvedObject.version||(f=l.UnresolvedObject)!=null&&f.initialSharedVersion)}),i=[...new Set(n.map(l=>he(l.UnresolvedObject.objectId)))],o=i.length?Af(i,uf):[],s=(await Promise.all(o.map(l=>Ii(t).multiGetObjects({ids:l,options:{showOwner:!0}})))).flat(),r=new Map(i.map((l,f)=>[l,s[f]])),a=Array.from(r).filter(([l,f])=>f.error).map(([l,f])=>JSON.stringify(f.error));if(a.length)throw new Error(`The following input objects are invalid: ${a.join(", ")}`);const c=s.map(l=>{if(l.error||!l.data)throw new Error(`Failed to fetch object: ${l.error}`);const f=l.data.owner,_=f&&typeof f=="object"&&"Shared"in f?f.Shared.initial_shared_version:null;return{objectId:l.data.objectId,digest:l.data.digest,version:l.data.version,initialSharedVersion:_}}),d=new Map(i.map((l,f)=>[l,c[f]]));for(const[l,f]of e.inputs.entries()){if(!f.UnresolvedObject)continue;let _;const b=oe(f.UnresolvedObject.objectId),y=d.get(b);f.UnresolvedObject.initialSharedVersion??(y==null?void 0:y.initialSharedVersion)?_=pn.SharedObjectRef({objectId:b,initialSharedVersion:f.UnresolvedObject.initialSharedVersion||(y==null?void 0:y.initialSharedVersion),mutable:vf(e,l)}):kf(e,l)&&(_=pn.ReceivingRef({objectId:b,digest:f.UnresolvedObject.digest??(y==null?void 0:y.digest),version:f.UnresolvedObject.version??(y==null?void 0:y.version)})),e.inputs[e.inputs.indexOf(f)]=_??pn.ObjectRef({objectId:b,digest:f.UnresolvedObject.digest??(y==null?void 0:y.digest),version:f.UnresolvedObject.version??(y==null?void 0:y.version)})}}async function yf(e,t){const{inputs:n,commands:i}=e,o=[],s=new Set;i.forEach(a=>{if(a.MoveCall){if(a.MoveCall._argumentTypes)return;if(a.MoveCall.arguments.map(l=>l.$kind==="Input"?e.inputs[l.Input]:null).some(l=>(l==null?void 0:l.UnresolvedPure)||(l==null?void 0:l.UnresolvedObject))){const l=`${a.MoveCall.package}::${a.MoveCall.module}::${a.MoveCall.function}`;s.add(l),o.push(a.MoveCall)}}switch(a.$kind){case"SplitCoins":a.SplitCoins.amounts.forEach(c=>{Zr(c,le.U64,e)});break;case"TransferObjects":Zr(a.TransferObjects.address,le.Address,e);break}});const r=new Map;if(s.size>0){const a=Ii(t);await Promise.all([...s].map(async c=>{const[d,l,f]=c.split("::"),_=await a.getNormalizedMoveFunction({package:d,module:l,function:f});r.set(c,_.parameters.map(b=>$u(b)))}))}o.length&&await Promise.all(o.map(async a=>{const c=r.get(`${a.package}::${a.module}::${a.function}`);if(!c)return;const l=c.length>0&&qu(c.at(-1))?c.slice(0,c.length-1):c;a._argumentTypes=l})),i.forEach(a=>{if(!a.MoveCall)return;const c=a.MoveCall,d=`${c.package}::${c.module}::${c.function}`,l=c._argumentTypes;if(l){if(l.length!==a.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${d}`);l.forEach((f,_)=>{var M,B;const b=c.arguments[_];if(b.$kind!=="Input")return;const y=n[b.Input];if(!y.UnresolvedPure&&!y.UnresolvedObject)return;const A=((M=y.UnresolvedPure)==null?void 0:M.value)??((B=y.UnresolvedObject)==null?void 0:B.objectId),O=ks(f.body);if(O){b.type="pure",n[n.indexOf(y)]=pn.Pure(O.serialize(A));return}if(typeof A!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(A,null,2)}`);b.type="object";const j=y.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:A}}:y;n[b.Input]=j})}})}function wf(e){e.inputs.forEach((t,n)=>{if(t.$kind!=="Object"&&t.$kind!=="Pure")throw new Error(`Input at index ${n} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(t)}`)})}function Zr(e,t,n){if(e.$kind!=="Input")return;const i=n.inputs[e.Input];i.$kind==="UnresolvedPure"&&(n.inputs[e.Input]=pn.Pure(t.serialize(i.UnresolvedPure.value)))}function vf(e,t){let n=!1;return e.getInputUses(t,(i,o)=>{if(o.MoveCall&&o.MoveCall._argumentTypes){const s=o.MoveCall.arguments.indexOf(i);n=o.MoveCall._argumentTypes[s].ref!=="&"||n}}),n}function kf(e,t){let n=!1;return e.getInputUses(t,(i,o)=>{if(o.MoveCall&&o.MoveCall._argumentTypes){const s=o.MoveCall.arguments.indexOf(i);n=Cf(o.MoveCall._argumentTypes[s])||n}}),n}function Cf(e){return typeof e.body!="object"||!("datatype"in e.body)?!1:e.body.datatype.package==="0x2"&&e.body.datatype.module==="transfer"&&e.body.datatype.type==="Receiving"}function Ii(e){if(!e.client)throw new Error("No provider passed to Transaction#build, but transaction data was not sufficient to build offline.");return e.client}function Af(e,t){return Array.from({length:Math.ceil(e.length/t)},(n,i)=>e.slice(i*t,i*t+t))}function Sf(e){function t(n){return e(n)}return t.u8=n=>e(le.U8.serialize(n)),t.u16=n=>e(le.U16.serialize(n)),t.u32=n=>e(le.U32.serialize(n)),t.u64=n=>e(le.U64.serialize(n)),t.u128=n=>e(le.U128.serialize(n)),t.u256=n=>e(le.U256.serialize(n)),t.bool=n=>e(le.Bool.serialize(n)),t.string=n=>e(le.String.serialize(n)),t.address=n=>e(le.Address.serialize(n)),t.id=t.address,t}function Tf(e,t){const n=Array.from(`${e}::`).map(o=>o.charCodeAt(0)),i=new Uint8Array(n.length+t.length);return i.set(n),i.set(t,n.length),Gl(i,{dkLen:32})}function Qr(e){return oe(e).replace("0x","")}class zt{constructor(t){this.version=2,this.sender=(t==null?void 0:t.sender)??null,this.expiration=(t==null?void 0:t.expiration)??null,this.inputs=(t==null?void 0:t.inputs)??[],this.commands=(t==null?void 0:t.commands)??[],this.gasData=(t==null?void 0:t.gasData)??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(t){const i=le.TransactionKind.parse(t).ProgrammableTransaction;if(!i)throw new Error("Unable to deserialize from bytes.");return zt.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:i.inputs,commands:i.commands})}static fromBytes(t){const n=le.TransactionData.parse(t),i=n==null?void 0:n.V1,o=i.kind.ProgrammableTransaction;if(!i||!o)throw new Error("Unable to deserialize from bytes.");return zt.restore({version:2,sender:i.sender,expiration:i.expiration,gasData:i.gasData,inputs:o.inputs,commands:o.commands})}static restore(t){return t.version===2?new zt(Ae(Wi,t)):new zt(Ae(Wi,tf(t)))}static getDigestFromBytes(t){const n=Tf("TransactionData",t);return yo(n)}get gasConfig(){return this.gasData}set gasConfig(t){this.gasData=t}build({maxSizeBytes:t=1/0,overrides:n,onlyTransactionKind:i}={}){const o=this.inputs,s=this.commands,r={ProgrammableTransaction:{inputs:o,commands:s}};if(i)return le.TransactionKind.serialize(r,{maxSize:t}).toBytes();const a=(n==null?void 0:n.expiration)??this.expiration,c=(n==null?void 0:n.sender)??this.sender,d={...this.gasData,...n==null?void 0:n.gasConfig,...n==null?void 0:n.gasData};if(!c)throw new Error("Missing transaction sender");if(!d.budget)throw new Error("Missing gas budget");if(!d.payment)throw new Error("Missing gas payment");if(!d.price)throw new Error("Missing gas price");const l={sender:Qr(c),expiration:a||{None:!0},gasData:{payment:d.payment,owner:Qr(this.gasData.owner??c),price:BigInt(d.price),budget:BigInt(d.budget)},kind:{ProgrammableTransaction:{inputs:o,commands:s}}};return le.TransactionData.serialize({V1:l},{maxSize:t}).toBytes()}addInput(t,n){const i=this.inputs.length;return this.inputs.push(n),{Input:i,type:t,$kind:"Input"}}getInputUses(t,n){this.mapArguments((i,o)=>(i.$kind==="Input"&&i.Input===t&&n(i,o),i))}mapArguments(t){for(const n of this.commands)switch(n.$kind){case"MoveCall":n.MoveCall.arguments=n.MoveCall.arguments.map(o=>t(o,n));break;case"TransferObjects":n.TransferObjects.objects=n.TransferObjects.objects.map(o=>t(o,n)),n.TransferObjects.address=t(n.TransferObjects.address,n);break;case"SplitCoins":n.SplitCoins.coin=t(n.SplitCoins.coin,n),n.SplitCoins.amounts=n.SplitCoins.amounts.map(o=>t(o,n));break;case"MergeCoins":n.MergeCoins.destination=t(n.MergeCoins.destination,n),n.MergeCoins.sources=n.MergeCoins.sources.map(o=>t(o,n));break;case"MakeMoveVec":n.MakeMoveVec.elements=n.MakeMoveVec.elements.map(o=>t(o,n));break;case"Upgrade":n.Upgrade.ticket=t(n.Upgrade.ticket,n);break;case"$Intent":const i=n.$Intent.inputs;n.$Intent.inputs={};for(const[o,s]of Object.entries(i))n.$Intent.inputs[o]=Array.isArray(s)?s.map(r=>t(r,n)):t(s,n);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${n.$kind}`)}}replaceCommand(t,n){if(!Array.isArray(n)){this.commands[t]=n;return}const i=n.length-1;this.commands.splice(t,1,...n),i!==0&&this.mapArguments(o=>{switch(o.$kind){case"Result":o.Result>t&&(o.Result+=i);break;case"NestedResult":o.NestedResult[0]>t&&(o.NestedResult[0]+=i);break}return o})}getDigest(){const t=this.build({onlyTransactionKind:!1});return zt.getDigestFromBytes(t)}snapshot(){return Ae(Wi,this)}}function Yr(e){if(typeof e=="string")return oe(e);if(e.Object)return e.Object.ImmOrOwnedObject?oe(e.Object.ImmOrOwnedObject.objectId):e.Object.Receiving?oe(e.Object.Receiving.objectId):oe(e.Object.SharedObject.objectId);if(e.UnresolvedObject)return oe(e.UnresolvedObject.objectId)}var Qs=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},fe=(e,t,n)=>(Qs(e,t,"read from private field"),n?n.call(e):t.get(e)),wn=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},ai=(e,t,n,i)=>(Qs(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),ln=(e,t,n)=>(Qs(e,t,"access private method"),n),Xi,lo,jn,be,hi,Hi,uo,Ys,Ji,Ss,fo,er;function xf(e){const t={$kind:"Result",Result:e},n=[],i=o=>n[o]??(n[o]={$kind:"NestedResult",NestedResult:[e,o]});return new Proxy(t,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(o,s){if(s in o)return Reflect.get(o,s);if(s===Symbol.iterator)return function*(){let a=0;for(;;)yield i(a),a++};if(typeof s=="symbol")return;const r=parseInt(s,10);if(!(Number.isNaN(r)||r<0))return i(r)}})}const Tc=Symbol.for("@mysten/transaction");function xc(e){return!!e&&typeof e=="object"&&e[Tc]===!0}const Ts=class{constructor(){wn(this,hi),wn(this,uo),wn(this,Ji),wn(this,fo),wn(this,Xi,[]),wn(this,lo,[]),wn(this,jn,new Map),wn(this,be,void 0),ai(this,be,new zt)}static fromKind(e){const t=new Ts;return ai(t,be,zt.fromKindBytes(typeof e=="string"?on(e):e)),t}static from(e){const t=new Ts;return xc(e)?ai(t,be,new zt(e.getData())):typeof e!="string"||!e.startsWith("{")?ai(t,be,zt.fromBytes(typeof e=="string"?on(e):e)):ai(t,be,zt.restore(JSON.parse(e))),t}addSerializationPlugin(e){fe(this,Xi).push(e)}addBuildPlugin(e){fe(this,lo).push(e)}addIntentResolver(e,t){if(fe(this,jn).has(e)&&fe(this,jn).get(e)!==t)throw new Error(`Intent resolver for ${e} already exists`);fe(this,jn).set(e,t)}setSender(e){fe(this,be).sender=e}setSenderIfNotSet(e){fe(this,be).sender||(fe(this,be).sender=e)}setExpiration(e){fe(this,be).expiration=e?Ae(Sc,e):null}setGasPrice(e){fe(this,be).gasConfig.price=String(e)}setGasBudget(e){fe(this,be).gasConfig.budget=String(e)}setGasOwner(e){fe(this,be).gasConfig.owner=e}setGasPayment(e){fe(this,be).gasConfig.payment=e.map(t=>Ae(Pn,t))}get blockData(){return Jr(fe(this,be).snapshot())}getData(){return fe(this,be).snapshot()}get[Tc](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:Sf(e=>Va(e)?fe(this,be).addInput("pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):fe(this,be).addInput("pure",Cs(Wr,e)?Ae(Wr,e):e instanceof Uint8Array?pn.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}object(e){var i,o;if(typeof e=="function")return this.object(e(this));if(typeof e=="object"&&Cs(we,e))return e;const t=Yr(e),n=fe(this,be).inputs.find(s=>t===Yr(s));return(i=n==null?void 0:n.Object)!=null&&i.SharedObject&&typeof e=="object"&&((o=e.Object)!=null&&o.SharedObject)&&(n.Object.SharedObject.mutable=n.Object.SharedObject.mutable||e.Object.SharedObject.mutable),n?{$kind:"Input",Input:fe(this,be).inputs.indexOf(n),type:"object"}:fe(this,be).addInput("object",typeof e=="string"?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:oe(e)}}:e)}objectRef(...e){return this.object(pn.ObjectRef(...e))}receivingRef(...e){return this.object(pn.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(pn.SharedObjectRef(...e))}add(e){if(typeof e=="function")return e(this);const t=fe(this,be).commands.push(e);return xf(t-1)}splitCoins(e,t){return this.add(On.SplitCoins(typeof e=="string"?this.object(e):ln(this,uo,Ys).call(this,e),t.map(n=>typeof n=="number"||typeof n=="bigint"||typeof n=="string"?this.pure.u64(n):ln(this,hi,Hi).call(this,n))))}mergeCoins(e,t){return this.add(On.MergeCoins(this.object(e),t.map(n=>this.object(n))))}publish({modules:e,dependencies:t}){return this.add(On.Publish({modules:e,dependencies:t}))}upgrade({modules:e,dependencies:t,package:n,ticket:i}){return this.add(On.Upgrade({modules:e,dependencies:t,package:n,ticket:this.object(i)}))}moveCall({arguments:e,...t}){return this.add(On.MoveCall({...t,arguments:e==null?void 0:e.map(n=>ln(this,hi,Hi).call(this,n))}))}transferObjects(e,t){return this.add(On.TransferObjects(e.map(n=>this.object(n)),typeof t=="string"?this.pure.address(t):ln(this,hi,Hi).call(this,t)))}makeMoveVec({type:e,elements:t}){return this.add(On.MakeMoveVec({type:e,elements:t.map(n=>this.object(n))}))}serialize(){return JSON.stringify(Jr(fe(this,be).snapshot()))}async toJSON(e={}){return await this.prepareForSerialization(e),JSON.stringify(Ae(lf,fe(this,be).snapshot()),(t,n)=>typeof n=="bigint"?n.toString():n,2)}async sign(e){const{signer:t,...n}=e,i=await this.build(n);return t.signTransaction(i)}async build(e={}){return await this.prepareForSerialization(e),await ln(this,Ji,Ss).call(this,e),fe(this,be).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await ln(this,Ji,Ss).call(this,e),fe(this,be).getDigest()}async prepareForSerialization(e){var i;const t=new Set;for(const o of fe(this,be).commands)o.$Intent&&t.add(o.$Intent.name);const n=[...fe(this,Xi)];for(const o of t)if(!((i=e.supportedIntents)!=null&&i.includes(o))){if(!fe(this,jn).has(o))throw new Error(`Missing intent resolver for ${o}`);n.push(fe(this,jn).get(o))}await ln(this,fo,er).call(this,n,e)}};let R=Ts;Xi=new WeakMap;lo=new WeakMap;jn=new WeakMap;be=new WeakMap;hi=new WeakSet;Hi=function(e){return Va(e)?this.pure(e):ln(this,uo,Ys).call(this,e)};uo=new WeakSet;Ys=function(e){return typeof e=="function"?Ae(we,e(this)):Ae(we,e)};Ji=new WeakSet;Ss=async function(e){if(!e.onlyTransactionKind&&!fe(this,be).sender)throw new Error("Missing transaction sender");await ln(this,fo,er).call(this,[...fe(this,lo),pf],e)};fo=new WeakSet;er=async function(e,t){const n=i=>{if(i>=e.length)return()=>{};const o=e[i];return async()=>{const s=n(i+1);let r=!1,a=!1;if(await o(fe(this,be),t,async()=>{if(r)throw new Error(`next() was call multiple times in TransactionPlugin ${i}`);r=!0,await s(),a=!0}),!r)throw new Error(`next() was not called in TransactionPlugin ${i}`);if(!a)throw new Error(`next() was not awaited in TransactionPlugin ${i}`)}};await n(0)()};let Di;const If=new Uint8Array(16);function Pf(){if(!Di&&(Di=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Di))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Di(If)}const gt=[];for(let e=0;e<256;++e)gt.push((e+256).toString(16).slice(1));function Of(e,t=0){return gt[e[t+0]]+gt[e[t+1]]+gt[e[t+2]]+gt[e[t+3]]+"-"+gt[e[t+4]]+gt[e[t+5]]+"-"+gt[e[t+6]]+gt[e[t+7]]+"-"+gt[e[t+8]]+gt[e[t+9]]+"-"+gt[e[t+10]]+gt[e[t+11]]+gt[e[t+12]]+gt[e[t+13]]+gt[e[t+14]]+gt[e[t+15]]}const jf=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ea={randomUUID:jf};function Ni(e,t,n){if(ea.randomUUID&&!t&&!e)return ea.randomUUID();e=e||{};const i=e.random||(e.rng||Pf)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){n=n||0;for(let o=0;o<16;++o)t[n+o]=i[o];return t}return Of(i)}function Ic(e,t){return function(){return e.apply(t,arguments)}}const{toString:Mf}=Object.prototype,{getPrototypeOf:tr}=Object,vo=(e=>t=>{const n=Mf.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),an=e=>(e=e.toLowerCase(),t=>vo(t)===e),ko=e=>t=>typeof t===e,{isArray:ri}=Array,Si=ko("undefined");function Ef(e){return e!==null&&!Si(e)&&e.constructor!==null&&!Si(e.constructor)&&qt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Pc=an("ArrayBuffer");function Bf(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Pc(e.buffer),t}const Df=ko("string"),qt=ko("function"),Oc=ko("number"),Co=e=>e!==null&&typeof e=="object",Nf=e=>e===!0||e===!1,Zi=e=>{if(vo(e)!=="object")return!1;const t=tr(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Rf=an("Date"),qf=an("File"),$f=an("Blob"),Ff=an("FileList"),Lf=e=>Co(e)&&qt(e.pipe),Uf=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||qt(e.append)&&((t=vo(e))==="formdata"||t==="object"&&qt(e.toString)&&e.toString()==="[object FormData]"))},Kf=an("URLSearchParams"),Vf=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Pi(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let i,o;if(typeof e!="object"&&(e=[e]),ri(e))for(i=0,o=e.length;i<o;i++)t.call(null,e[i],i,e);else{const s=n?Object.getOwnPropertyNames(e):Object.keys(e),r=s.length;let a;for(i=0;i<r;i++)a=s[i],t.call(null,e[a],a,e)}}function jc(e,t){t=t.toLowerCase();const n=Object.keys(e);let i=n.length,o;for(;i-- >0;)if(o=n[i],t===o.toLowerCase())return o;return null}const Mc=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Ec=e=>!Si(e)&&e!==Mc;function xs(){const{caseless:e}=Ec(this)&&this||{},t={},n=(i,o)=>{const s=e&&jc(t,o)||o;Zi(t[s])&&Zi(i)?t[s]=xs(t[s],i):Zi(i)?t[s]=xs({},i):ri(i)?t[s]=i.slice():t[s]=i};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Pi(arguments[i],n);return t}const zf=(e,t,n,{allOwnKeys:i}={})=>(Pi(t,(o,s)=>{n&&qt(o)?e[s]=Ic(o,n):e[s]=o},{allOwnKeys:i}),e),Gf=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Wf=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Xf=(e,t,n,i)=>{let o,s,r;const a={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),s=o.length;s-- >0;)r=o[s],(!i||i(r,e,t))&&!a[r]&&(t[r]=e[r],a[r]=!0);e=n!==!1&&tr(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Hf=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return i!==-1&&i===n},Jf=e=>{if(!e)return null;if(ri(e))return e;let t=e.length;if(!Oc(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Zf=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&tr(Uint8Array)),Qf=(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=i.next())&&!o.done;){const s=o.value;t.call(e,s[0],s[1])}},Yf=(e,t)=>{let n;const i=[];for(;(n=e.exec(t))!==null;)i.push(n);return i},eh=an("HTMLFormElement"),th=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,o){return i.toUpperCase()+o}),ta=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),nh=an("RegExp"),Bc=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};Pi(n,(o,s)=>{let r;(r=t(o,s,e))!==!1&&(i[s]=r||o)}),Object.defineProperties(e,i)},ih=e=>{Bc(e,(t,n)=>{if(qt(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=e[n];if(qt(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},oh=(e,t)=>{const n={},i=o=>{o.forEach(s=>{n[s]=!0})};return ri(e)?i(e):i(String(e).split(t)),n},sh=()=>{},rh=(e,t)=>(e=+e,Number.isFinite(e)?e:t),ns="abcdefghijklmnopqrstuvwxyz",na="0123456789",Dc={DIGIT:na,ALPHA:ns,ALPHA_DIGIT:ns+ns.toUpperCase()+na},ah=(e=16,t=Dc.ALPHA_DIGIT)=>{let n="";const{length:i}=t;for(;e--;)n+=t[Math.random()*i|0];return n};function ch(e){return!!(e&&qt(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const dh=e=>{const t=new Array(10),n=(i,o)=>{if(Co(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[o]=i;const s=ri(i)?[]:{};return Pi(i,(r,a)=>{const c=n(r,o+1);!Si(c)&&(s[a]=c)}),t[o]=void 0,s}}return i};return n(e,0)},lh=an("AsyncFunction"),uh=e=>e&&(Co(e)||qt(e))&&qt(e.then)&&qt(e.catch),N={isArray:ri,isArrayBuffer:Pc,isBuffer:Ef,isFormData:Uf,isArrayBufferView:Bf,isString:Df,isNumber:Oc,isBoolean:Nf,isObject:Co,isPlainObject:Zi,isUndefined:Si,isDate:Rf,isFile:qf,isBlob:$f,isRegExp:nh,isFunction:qt,isStream:Lf,isURLSearchParams:Kf,isTypedArray:Zf,isFileList:Ff,forEach:Pi,merge:xs,extend:zf,trim:Vf,stripBOM:Gf,inherits:Wf,toFlatObject:Xf,kindOf:vo,kindOfTest:an,endsWith:Hf,toArray:Jf,forEachEntry:Qf,matchAll:Yf,isHTMLForm:eh,hasOwnProperty:ta,hasOwnProp:ta,reduceDescriptors:Bc,freezeMethods:ih,toObjectSet:oh,toCamelCase:th,noop:sh,toFiniteNumber:rh,findKey:jc,global:Mc,isContextDefined:Ec,ALPHABET:Dc,generateString:ah,isSpecCompliantForm:ch,toJSONObject:dh,isAsyncFn:lh,isThenable:uh};function de(e,t,n,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),o&&(this.response=o)}N.inherits(de,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:N.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Nc=de.prototype,Rc={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Rc[e]={value:e}});Object.defineProperties(de,Rc);Object.defineProperty(Nc,"isAxiosError",{value:!0});de.from=(e,t,n,i,o,s)=>{const r=Object.create(Nc);return N.toFlatObject(e,r,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),de.call(r,e.message,t,n,i,o),r.cause=e,r.name=e.name,s&&Object.assign(r,s),r};const fh=null;function Is(e){return N.isPlainObject(e)||N.isArray(e)}function qc(e){return N.endsWith(e,"[]")?e.slice(0,-2):e}function ia(e,t,n){return e?e.concat(t).map(function(o,s){return o=qc(o),!n&&s?"["+o+"]":o}).join(n?".":""):t}function hh(e){return N.isArray(e)&&!e.some(Is)}const ph=N.toFlatObject(N,{},null,function(t){return/^is[A-Z]/.test(t)});function Ao(e,t,n){if(!N.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=N.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,O){return!N.isUndefined(O[A])});const i=n.metaTokens,o=n.visitor||l,s=n.dots,r=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&N.isSpecCompliantForm(t);if(!N.isFunction(o))throw new TypeError("visitor must be a function");function d(y){if(y===null)return"";if(N.isDate(y))return y.toISOString();if(!c&&N.isBlob(y))throw new de("Blob is not supported. Use a Buffer instead.");return N.isArrayBuffer(y)||N.isTypedArray(y)?c&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function l(y,A,O){let j=y;if(y&&!O&&typeof y=="object"){if(N.endsWith(A,"{}"))A=i?A:A.slice(0,-2),y=JSON.stringify(y);else if(N.isArray(y)&&hh(y)||(N.isFileList(y)||N.endsWith(A,"[]"))&&(j=N.toArray(y)))return A=qc(A),j.forEach(function(B,$){!(N.isUndefined(B)||B===null)&&t.append(r===!0?ia([A],$,s):r===null?A:A+"[]",d(B))}),!1}return Is(y)?!0:(t.append(ia(O,A,s),d(y)),!1)}const f=[],_=Object.assign(ph,{defaultVisitor:l,convertValue:d,isVisitable:Is});function b(y,A){if(!N.isUndefined(y)){if(f.indexOf(y)!==-1)throw Error("Circular reference detected in "+A.join("."));f.push(y),N.forEach(y,function(j,M){(!(N.isUndefined(j)||j===null)&&o.call(t,j,N.isString(M)?M.trim():M,A,_))===!0&&b(j,A?A.concat(M):[M])}),f.pop()}}if(!N.isObject(e))throw new TypeError("data must be an object");return b(e),t}function oa(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function nr(e,t){this._pairs=[],e&&Ao(e,this,t)}const $c=nr.prototype;$c.append=function(t,n){this._pairs.push([t,n])};$c.toString=function(t){const n=t?function(i){return t.call(this,i,oa)}:oa;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function _h(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Fc(e,t,n){if(!t)return e;const i=n&&n.encode||_h,o=n&&n.serialize;let s;if(o?s=o(t,n):s=N.isURLSearchParams(t)?t.toString():new nr(t,n).toString(i),s){const r=e.indexOf("#");r!==-1&&(e=e.slice(0,r)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class bh{constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){N.forEach(this.handlers,function(i){i!==null&&t(i)})}}const sa=bh,Lc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},mh=typeof URLSearchParams<"u"?URLSearchParams:nr,gh=typeof FormData<"u"?FormData:null,yh=typeof Blob<"u"?Blob:null,wh={isBrowser:!0,classes:{URLSearchParams:mh,FormData:gh,Blob:yh},protocols:["http","https","file","blob","url","data"]},Uc=typeof window<"u"&&typeof document<"u",vh=(e=>Uc&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),kh=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Ch=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Uc,hasStandardBrowserEnv:vh,hasStandardBrowserWebWorkerEnv:kh},Symbol.toStringTag,{value:"Module"})),nn={...Ch,...wh};function Ah(e,t){return Ao(e,new nn.classes.URLSearchParams,Object.assign({visitor:function(n,i,o,s){return nn.isNode&&N.isBuffer(n)?(this.append(i,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function Sh(e){return N.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Th(e){const t={},n=Object.keys(e);let i;const o=n.length;let s;for(i=0;i<o;i++)s=n[i],t[s]=e[s];return t}function Kc(e){function t(n,i,o,s){let r=n[s++];const a=Number.isFinite(+r),c=s>=n.length;return r=!r&&N.isArray(o)?o.length:r,c?(N.hasOwnProp(o,r)?o[r]=[o[r],i]:o[r]=i,!a):((!o[r]||!N.isObject(o[r]))&&(o[r]=[]),t(n,i,o[r],s)&&N.isArray(o[r])&&(o[r]=Th(o[r])),!a)}if(N.isFormData(e)&&N.isFunction(e.entries)){const n={};return N.forEachEntry(e,(i,o)=>{t(Sh(i),o,n,0)}),n}return null}function xh(e,t,n){if(N.isString(e))try{return(t||JSON.parse)(e),N.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}const ir={transitional:Lc,adapter:["xhr","http"],transformRequest:[function(t,n){const i=n.getContentType()||"",o=i.indexOf("application/json")>-1,s=N.isObject(t);if(s&&N.isHTMLForm(t)&&(t=new FormData(t)),N.isFormData(t))return o&&o?JSON.stringify(Kc(t)):t;if(N.isArrayBuffer(t)||N.isBuffer(t)||N.isStream(t)||N.isFile(t)||N.isBlob(t))return t;if(N.isArrayBufferView(t))return t.buffer;if(N.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Ah(t,this.formSerializer).toString();if((a=N.isFileList(t))||i.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Ao(a?{"files[]":t}:t,c&&new c,this.formSerializer)}}return s||o?(n.setContentType("application/json",!1),xh(t)):t}],transformResponse:[function(t){const n=this.transitional||ir.transitional,i=n&&n.forcedJSONParsing,o=this.responseType==="json";if(t&&N.isString(t)&&(i&&!this.responseType||o)){const r=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(a){if(r)throw a.name==="SyntaxError"?de.from(a,de.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:nn.classes.FormData,Blob:nn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};N.forEach(["delete","get","head","post","put","patch"],e=>{ir.headers[e]={}});const or=ir,Ih=N.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ph=e=>{const t={};let n,i,o;return e&&e.split(`
`).forEach(function(r){o=r.indexOf(":"),n=r.substring(0,o).trim().toLowerCase(),i=r.substring(o+1).trim(),!(!n||t[n]&&Ih[n])&&(n==="set-cookie"?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t},ra=Symbol("internals");function ci(e){return e&&String(e).trim().toLowerCase()}function Qi(e){return e===!1||e==null?e:N.isArray(e)?e.map(Qi):String(e)}function Oh(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}const jh=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function is(e,t,n,i,o){if(N.isFunction(i))return i.call(this,t,n);if(o&&(t=n),!!N.isString(t)){if(N.isString(i))return t.indexOf(i)!==-1;if(N.isRegExp(i))return i.test(t)}}function Mh(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,i)=>n.toUpperCase()+i)}function Eh(e,t){const n=N.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(o,s,r){return this[i].call(this,t,o,s,r)},configurable:!0})})}class So{constructor(t){t&&this.set(t)}set(t,n,i){const o=this;function s(a,c,d){const l=ci(c);if(!l)throw new Error("header name must be a non-empty string");const f=N.findKey(o,l);(!f||o[f]===void 0||d===!0||d===void 0&&o[f]!==!1)&&(o[f||c]=Qi(a))}const r=(a,c)=>N.forEach(a,(d,l)=>s(d,l,c));return N.isPlainObject(t)||t instanceof this.constructor?r(t,n):N.isString(t)&&(t=t.trim())&&!jh(t)?r(Ph(t),n):t!=null&&s(n,t,i),this}get(t,n){if(t=ci(t),t){const i=N.findKey(this,t);if(i){const o=this[i];if(!n)return o;if(n===!0)return Oh(o);if(N.isFunction(n))return n.call(this,o,i);if(N.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=ci(t),t){const i=N.findKey(this,t);return!!(i&&this[i]!==void 0&&(!n||is(this,this[i],i,n)))}return!1}delete(t,n){const i=this;let o=!1;function s(r){if(r=ci(r),r){const a=N.findKey(i,r);a&&(!n||is(i,i[a],a,n))&&(delete i[a],o=!0)}}return N.isArray(t)?t.forEach(s):s(t),o}clear(t){const n=Object.keys(this);let i=n.length,o=!1;for(;i--;){const s=n[i];(!t||is(this,this[s],s,t,!0))&&(delete this[s],o=!0)}return o}normalize(t){const n=this,i={};return N.forEach(this,(o,s)=>{const r=N.findKey(i,s);if(r){n[r]=Qi(o),delete n[s];return}const a=t?Mh(s):String(s).trim();a!==s&&delete n[s],n[a]=Qi(o),i[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return N.forEach(this,(i,o)=>{i!=null&&i!==!1&&(n[o]=t&&N.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const i=new this(t);return n.forEach(o=>i.set(o)),i}static accessor(t){const i=(this[ra]=this[ra]={accessors:{}}).accessors,o=this.prototype;function s(r){const a=ci(r);i[a]||(Eh(o,r),i[a]=!0)}return N.isArray(t)?t.forEach(s):s(t),this}}So.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);N.reduceDescriptors(So.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[n]=i}}});N.freezeMethods(So);const bn=So;function os(e,t){const n=this||or,i=t||n,o=bn.from(i.headers);let s=i.data;return N.forEach(e,function(a){s=a.call(n,s,o.normalize(),t?t.status:void 0)}),o.normalize(),s}function Vc(e){return!!(e&&e.__CANCEL__)}function Oi(e,t,n){de.call(this,e??"canceled",de.ERR_CANCELED,t,n),this.name="CanceledError"}N.inherits(Oi,de,{__CANCEL__:!0});function Bh(e,t,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new de("Request failed with status code "+n.status,[de.ERR_BAD_REQUEST,de.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const Dh=nn.hasStandardBrowserEnv?function(){return{write:function(n,i,o,s,r,a){const c=[];c.push(n+"="+encodeURIComponent(i)),N.isNumber(o)&&c.push("expires="+new Date(o).toGMTString()),N.isString(s)&&c.push("path="+s),N.isString(r)&&c.push("domain="+r),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(n){const i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Nh(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Rh(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function zc(e,t){return e&&!Nh(t)?Rh(e,t):t}const qh=nn.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let i;function o(s){let r=s;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=o(window.location.href),function(r){const a=N.isString(r)?o(r):r;return a.protocol===i.protocol&&a.host===i.host}}():function(){return function(){return!0}}();function $h(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Fh(e,t){e=e||10;const n=new Array(e),i=new Array(e);let o=0,s=0,r;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),l=i[s];r||(r=d),n[o]=c,i[o]=d;let f=s,_=0;for(;f!==o;)_+=n[f++],f=f%e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),d-r<t)return;const b=l&&d-l;return b?Math.round(_*1e3/b):void 0}}function aa(e,t){let n=0;const i=Fh(50,250);return o=>{const s=o.loaded,r=o.lengthComputable?o.total:void 0,a=s-n,c=i(a),d=s<=r;n=s;const l={loaded:s,total:r,progress:r?s/r:void 0,bytes:a,rate:c||void 0,estimated:c&&r&&d?(r-s)/c:void 0,event:o};l[t?"download":"upload"]=!0,e(l)}}const Lh=typeof XMLHttpRequest<"u",Uh=Lh&&function(e){return new Promise(function(n,i){let o=e.data;const s=bn.from(e.headers).normalize(),r=e.responseType;let a;function c(){e.cancelToken&&e.cancelToken.unsubscribe(a),e.signal&&e.signal.removeEventListener("abort",a)}let d;if(N.isFormData(o)){if(nn.hasStandardBrowserEnv||nn.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((d=s.getContentType())!==!1){const[y,...A]=d?d.split(";").map(O=>O.trim()).filter(Boolean):[];s.setContentType([y||"multipart/form-data",...A].join("; "))}}let l=new XMLHttpRequest;if(e.auth){const y=e.auth.username||"",A=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.set("Authorization","Basic "+btoa(y+":"+A))}const f=zc(e.baseURL,e.url);l.open(e.method.toUpperCase(),Fc(f,e.params,e.paramsSerializer),!0),l.timeout=e.timeout;function _(){if(!l)return;const y=bn.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders()),O={data:!r||r==="text"||r==="json"?l.responseText:l.response,status:l.status,statusText:l.statusText,headers:y,config:e,request:l};Bh(function(M){n(M),c()},function(M){i(M),c()},O),l=null}if("onloadend"in l?l.onloadend=_:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(_)},l.onabort=function(){l&&(i(new de("Request aborted",de.ECONNABORTED,e,l)),l=null)},l.onerror=function(){i(new de("Network Error",de.ERR_NETWORK,e,l)),l=null},l.ontimeout=function(){let A=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const O=e.transitional||Lc;e.timeoutErrorMessage&&(A=e.timeoutErrorMessage),i(new de(A,O.clarifyTimeoutError?de.ETIMEDOUT:de.ECONNABORTED,e,l)),l=null},nn.hasStandardBrowserEnv){const y=qh(f)&&e.xsrfCookieName&&Dh.read(e.xsrfCookieName);y&&s.set(e.xsrfHeaderName,y)}o===void 0&&s.setContentType(null),"setRequestHeader"in l&&N.forEach(s.toJSON(),function(A,O){l.setRequestHeader(O,A)}),N.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),r&&r!=="json"&&(l.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&l.addEventListener("progress",aa(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",aa(e.onUploadProgress)),(e.cancelToken||e.signal)&&(a=y=>{l&&(i(!y||y.type?new Oi(null,e,l):y),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(a),e.signal&&(e.signal.aborted?a():e.signal.addEventListener("abort",a)));const b=$h(f);if(b&&nn.protocols.indexOf(b)===-1){i(new de("Unsupported protocol "+b+":",de.ERR_BAD_REQUEST,e));return}l.send(o||null)})},Ps={http:fh,xhr:Uh};N.forEach(Ps,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const ca=e=>`- ${e}`,Kh=e=>N.isFunction(e)||e===null||e===!1,Gc={getAdapter:e=>{e=N.isArray(e)?e:[e];const{length:t}=e;let n,i;const o={};for(let s=0;s<t;s++){n=e[s];let r;if(i=n,!Kh(n)&&(i=Ps[(r=String(n)).toLowerCase()],i===void 0))throw new de(`Unknown adapter '${r}'`);if(i)break;o[r||"#"+s]=i}if(!i){const s=Object.entries(o).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let r=t?s.length>1?`since :
`+s.map(ca).join(`
`):" "+ca(s[0]):"as no adapter specified";throw new de("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return i},adapters:Ps};function ss(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Oi(null,e)}function da(e){return ss(e),e.headers=bn.from(e.headers),e.data=os.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Gc.getAdapter(e.adapter||or.adapter)(e).then(function(i){return ss(e),i.data=os.call(e,e.transformResponse,i),i.headers=bn.from(i.headers),i},function(i){return Vc(i)||(ss(e),i&&i.response&&(i.response.data=os.call(e,e.transformResponse,i.response),i.response.headers=bn.from(i.response.headers))),Promise.reject(i)})}const la=e=>e instanceof bn?e.toJSON():e;function ti(e,t){t=t||{};const n={};function i(d,l,f){return N.isPlainObject(d)&&N.isPlainObject(l)?N.merge.call({caseless:f},d,l):N.isPlainObject(l)?N.merge({},l):N.isArray(l)?l.slice():l}function o(d,l,f){if(N.isUndefined(l)){if(!N.isUndefined(d))return i(void 0,d,f)}else return i(d,l,f)}function s(d,l){if(!N.isUndefined(l))return i(void 0,l)}function r(d,l){if(N.isUndefined(l)){if(!N.isUndefined(d))return i(void 0,d)}else return i(void 0,l)}function a(d,l,f){if(f in t)return i(d,l);if(f in e)return i(void 0,d)}const c={url:s,method:s,data:s,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:a,headers:(d,l)=>o(la(d),la(l),!0)};return N.forEach(Object.keys(Object.assign({},e,t)),function(l){const f=c[l]||o,_=f(e[l],t[l],l);N.isUndefined(_)&&f!==a||(n[l]=_)}),n}const Wc="1.6.1",sr={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{sr[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const ua={};sr.transitional=function(t,n,i){function o(s,r){return"[Axios v"+Wc+"] Transitional option '"+s+"'"+r+(i?". "+i:"")}return(s,r,a)=>{if(t===!1)throw new de(o(r," has been removed"+(n?" in "+n:"")),de.ERR_DEPRECATED);return n&&!ua[r]&&(ua[r]=!0,console.warn(o(r," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,r,a):!0}};function Vh(e,t,n){if(typeof e!="object")throw new de("options must be an object",de.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let o=i.length;for(;o-- >0;){const s=i[o],r=t[s];if(r){const a=e[s],c=a===void 0||r(a,s,e);if(c!==!0)throw new de("option "+s+" must be "+c,de.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new de("Unknown option "+s,de.ERR_BAD_OPTION)}}const Os={assertOptions:Vh,validators:sr},vn=Os.validators;class ho{constructor(t){this.defaults=t,this.interceptors={request:new sa,response:new sa}}request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=ti(this.defaults,n);const{transitional:i,paramsSerializer:o,headers:s}=n;i!==void 0&&Os.assertOptions(i,{silentJSONParsing:vn.transitional(vn.boolean),forcedJSONParsing:vn.transitional(vn.boolean),clarifyTimeoutError:vn.transitional(vn.boolean)},!1),o!=null&&(N.isFunction(o)?n.paramsSerializer={serialize:o}:Os.assertOptions(o,{encode:vn.function,serialize:vn.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let r=s&&N.merge(s.common,s[n.method]);s&&N.forEach(["delete","get","head","post","put","patch","common"],y=>{delete s[y]}),n.headers=bn.concat(r,s);const a=[];let c=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(n)===!1||(c=c&&A.synchronous,a.unshift(A.fulfilled,A.rejected))});const d=[];this.interceptors.response.forEach(function(A){d.push(A.fulfilled,A.rejected)});let l,f=0,_;if(!c){const y=[da.bind(this),void 0];for(y.unshift.apply(y,a),y.push.apply(y,d),_=y.length,l=Promise.resolve(n);f<_;)l=l.then(y[f++],y[f++]);return l}_=a.length;let b=n;for(f=0;f<_;){const y=a[f++],A=a[f++];try{b=y(b)}catch(O){A.call(this,O);break}}try{l=da.call(this,b)}catch(y){return Promise.reject(y)}for(f=0,_=d.length;f<_;)l=l.then(d[f++],d[f++]);return l}getUri(t){t=ti(this.defaults,t);const n=zc(t.baseURL,t.url);return Fc(n,t.params,t.paramsSerializer)}}N.forEach(["delete","get","head","options"],function(t){ho.prototype[t]=function(n,i){return this.request(ti(i||{},{method:t,url:n,data:(i||{}).data}))}});N.forEach(["post","put","patch"],function(t){function n(i){return function(s,r,a){return this.request(ti(a||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:r}))}}ho.prototype[t]=n(),ho.prototype[t+"Form"]=n(!0)});const Yi=ho;class rr{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const i=this;this.promise.then(o=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](o);i._listeners=null}),this.promise.then=o=>{let s;const r=new Promise(a=>{i.subscribe(a),s=a}).then(o);return r.cancel=function(){i.unsubscribe(s)},r},t(function(s,r,a){i.reason||(i.reason=new Oi(s,r,a),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new rr(function(o){t=o}),cancel:t}}}const zh=rr;function Gh(e){return function(n){return e.apply(null,n)}}function Wh(e){return N.isObject(e)&&e.isAxiosError===!0}const js={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(js).forEach(([e,t])=>{js[t]=e});const Xh=js;function Xc(e){const t=new Yi(e),n=Ic(Yi.prototype.request,t);return N.extend(n,Yi.prototype,t,{allOwnKeys:!0}),N.extend(n,t,null,{allOwnKeys:!0}),n.create=function(o){return Xc(ti(e,o))},n}const dt=Xc(or);dt.Axios=Yi;dt.CanceledError=Oi;dt.CancelToken=zh;dt.isCancel=Vc;dt.VERSION=Wc;dt.toFormData=Ao;dt.AxiosError=de;dt.Cancel=dt.CanceledError;dt.all=function(t){return Promise.all(t)};dt.spread=Gh;dt.isAxiosError=Wh;dt.mergeConfig=ti;dt.AxiosHeaders=bn;dt.formToJSON=e=>Kc(N.isHTMLForm(e)?new FormData(e):e);dt.getAdapter=Gc.getAdapter;dt.HttpStatusCode=Xh;dt.default=dt;const Hh=dt,Jh="1.2.1",Zh="1.29.0",Qh={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"};class Hc extends Error{}class Jc extends Hc{constructor(t,n){super(t),this.code=n,this.type=Qh[n]??"ServerError"}}class Yh extends Hc{constructor(t,n,i){super(t),this.status=n,this.statusText=i}}var ar=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Ce=(e,t,n)=>(ar(e,t,"read from private field"),n?n.call(e):t.get(e)),kn=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Qn=(e,t,n,i)=>(ar(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),ep=(e,t,n,i)=>({set _(o){Qn(e,t,o,n)},get _(){return Ce(e,t,i)}}),Zc=(e,t,n)=>(ar(e,t,"access private method"),n),Mn,bi,fn,Nn,Ti,Yn,Ms,Qc,cr,Yc;function tp(e){const t=new URL(e);return t.protocol=t.protocol.replace("http","ws"),t.toString()}const np={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};class ip{constructor(t,n={}){if(kn(this,Ms),kn(this,cr),kn(this,Mn,0),kn(this,bi,0),kn(this,fn,null),kn(this,Nn,null),kn(this,Ti,new Set),kn(this,Yn,new Map),this.endpoint=t,this.options={...np,...n},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=tp(this.endpoint))}async makeRequest(t,n){const i=await Zc(this,Ms,Qc).call(this);return new Promise((o,s)=>{Qn(this,Mn,Ce(this,Mn)+1),Ce(this,Yn).set(Ce(this,Mn),{resolve:o,reject:s,timeout:setTimeout(()=>{Ce(this,Yn).delete(Ce(this,Mn)),s(new Error(`Request timeout: ${t}`))},this.options.callTimeout)}),i.send(JSON.stringify({jsonrpc:"2.0",id:Ce(this,Mn),method:t,params:n}))}).then(({error:o,result:s})=>{if(o)throw new Jc(o.message,o.code);return s})}async subscribe(t){const n=new op(t);return Ce(this,Ti).add(n),await n.subscribe(this),()=>n.unsubscribe(this)}}Mn=new WeakMap;bi=new WeakMap;fn=new WeakMap;Nn=new WeakMap;Ti=new WeakMap;Yn=new WeakMap;Ms=new WeakSet;Qc=function(){return Ce(this,Nn)?Ce(this,Nn):(Qn(this,Nn,new Promise(e=>{var t;(t=Ce(this,fn))==null||t.close(),Qn(this,fn,new this.options.WebSocketConstructor(this.endpoint)),Ce(this,fn).addEventListener("open",()=>{Qn(this,bi,0),e(Ce(this,fn))}),Ce(this,fn).addEventListener("close",()=>{ep(this,bi)._++,Ce(this,bi)<=this.options.maxReconnects&&setTimeout(()=>{Zc(this,cr,Yc).call(this)},this.options.reconnectTimeout)}),Ce(this,fn).addEventListener("message",({data:n})=>{let i;try{i=JSON.parse(n)}catch(o){console.error(new Error(`Failed to parse RPC message: ${n}`,{cause:o}));return}if("id"in i&&i.id!=null&&Ce(this,Yn).has(i.id)){const{resolve:o,timeout:s}=Ce(this,Yn).get(i.id);clearTimeout(s),o(i)}else if("params"in i){const{params:o}=i;Ce(this,Ti).forEach(s=>{s.subscriptionId===o.subscription&&o.subscription===s.subscriptionId&&s.onMessage(o.result)})}})})),Ce(this,Nn))};cr=new WeakSet;Yc=async function(){var e;return(e=Ce(this,fn))==null||e.close(),Qn(this,Nn,null),Promise.allSettled([...Ce(this,Ti)].map(t=>t.subscribe(this)))};class op{constructor(t){this.subscriptionId=null,this.subscribed=!1,this.input=t}onMessage(t){this.subscribed&&this.input.onMessage(t)}async unsubscribe(t){const{subscriptionId:n}=this;return this.subscribed=!1,n==null?!1:(this.subscriptionId=null,t.makeRequest(this.input.unsubscribe,[n]))}async subscribe(t){this.subscriptionId=null,this.subscribed=!0;const n=await t.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=n)}}var dr=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Nt=(e,t,n)=>(dr(e,t,"read from private field"),n?n.call(e):t.get(e)),Ri=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Es=(e,t,n,i)=>(dr(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),sp=(e,t,n)=>(dr(e,t,"access private method"),n),pi,Vt,mi,Bs,ed;class rp{constructor(t){Ri(this,Bs),Ri(this,pi,0),Ri(this,Vt,void 0),Ri(this,mi,void 0),Es(this,Vt,t)}fetch(t,n){const i=Nt(this,Vt).fetch??fetch;if(!i)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return i(t,n)}async request(t){var o,s;Es(this,pi,Nt(this,pi)+1);const n=await this.fetch(((o=Nt(this,Vt).rpc)==null?void 0:o.url)??Nt(this,Vt).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":Jh,"Client-Target-Api-Version":Zh,...(s=Nt(this,Vt).rpc)==null?void 0:s.headers},body:JSON.stringify({jsonrpc:"2.0",id:Nt(this,pi),method:t.method,params:t.params})});if(!n.ok)throw new Yh(`Unexpected status code: ${n.status}`,n.status,n.statusText);const i=await n.json();if("error"in i&&i.error!=null)throw new Jc(i.error.message,i.error.code);return i.result}async subscribe(t){const n=await sp(this,Bs,ed).call(this).subscribe(t);return async()=>!!await n()}}pi=new WeakMap;Vt=new WeakMap;mi=new WeakMap;Bs=new WeakSet;ed=function(){var e;if(!Nt(this,mi)){const t=Nt(this,Vt).WebSocketConstructor??WebSocket;if(!t)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");Es(this,mi,new ip(((e=Nt(this,Vt).websocket)==null?void 0:e.url)??Nt(this,Vt).url,{WebSocketConstructor:t,...Nt(this,Vt).websocket}))}return Nt(this,mi)};const td=Symbol.for("@mysten/SuiClient");function f0(e){return typeof e=="object"&&e!==null&&e[td]===!0}class ap{get[td](){return!0}constructor(t){this.transport=t.transport??new rp({url:t.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(t){if(!t.owner||!Yt(oe(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[t.owner,t.coinType,t.cursor,t.limit]})}async getAllCoins(t){if(!t.owner||!Yt(oe(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[t.owner,t.cursor,t.limit]})}async getBalance(t){if(!t.owner||!Yt(oe(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[t.owner,t.coinType]})}async getAllBalances(t){if(!t.owner||!Yt(oe(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[t.owner]})}async getCoinMetadata(t){return await this.transport.request({method:"suix_getCoinMetadata",params:[t.coinType]})}async getTotalSupply(t){return await this.transport.request({method:"suix_getTotalSupply",params:[t.coinType]})}async call(t,n){return await this.transport.request({method:t,params:n})}async getMoveFunctionArgTypes(t){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[t.package,t.module,t.function]})}async getNormalizedMoveModulesByPackage(t){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[t.package]})}async getNormalizedMoveModule(t){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[t.package,t.module]})}async getNormalizedMoveFunction(t){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[t.package,t.module,t.function]})}async getNormalizedMoveStruct(t){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[t.package,t.module,t.struct]})}async getOwnedObjects(t){if(!t.owner||!Yt(oe(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[t.owner,{filter:t.filter,options:t.options},t.cursor,t.limit]})}async getObject(t){if(!t.id||!fi(he(t.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[t.id,t.options]})}async tryGetPastObject(t){return await this.transport.request({method:"sui_tryGetPastObject",params:[t.id,t.version,t.options]})}async multiGetObjects(t){if(t.ids.forEach(i=>{if(!i||!fi(he(i)))throw new Error(`Invalid Sui Object id ${i}`)}),t.ids.length!==new Set(t.ids).size)throw new Error(`Duplicate object ids in batch call ${t.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[t.ids,t.options]})}async queryTransactionBlocks(t){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:t.filter,options:t.options},t.cursor,t.limit,(t.order||"descending")==="descending"]})}async getTransactionBlock(t){if(!Vr(t.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[t.digest,t.options]})}async multiGetTransactionBlocks(t){if(t.digests.forEach(i=>{if(!Vr(i))throw new Error(`Invalid Transaction digest ${i}`)}),t.digests.length!==new Set(t.digests).size)throw new Error(`Duplicate digests in batch call ${t.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[t.digests,t.options]})}async executeTransactionBlock(t){return await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof t.transactionBlock=="string"?t.transactionBlock:At(t.transactionBlock),Array.isArray(t.signature)?t.signature:[t.signature],t.options,t.requestType]})}async signAndExecuteTransaction({transaction:t,signer:n,...i}){let o;t instanceof Uint8Array?o=t:(t.setSenderIfNotSet(n.toSuiAddress()),o=await t.build({client:this}));const{signature:s,bytes:r}=await n.signTransaction(o);return this.executeTransactionBlock({transactionBlock:r,signature:s,...i})}async getTotalTransactionBlocks(){const t=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(t)}async getReferenceGasPrice(){const t=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(t)}async getStakes(t){if(!t.owner||!Yt(oe(t.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[t.owner]})}async getStakesByIds(t){return t.stakedSuiIds.forEach(n=>{if(!n||!fi(he(n)))throw new Error(`Invalid Sui Stake id ${n}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[t.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(t){return await this.transport.request({method:"suix_queryEvents",params:[t.query,t.cursor,t.limit,(t.order||"descending")==="descending"]})}async subscribeEvent(t){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[t.filter],onMessage:t.onMessage})}async subscribeTransaction(t){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[t.filter],onMessage:t.onMessage})}async devInspectTransactionBlock(t){var i;let n;if(xc(t.transactionBlock))t.transactionBlock.setSenderIfNotSet(t.sender),n=At(await t.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof t.transactionBlock=="string")n=t.transactionBlock;else if(t.transactionBlock instanceof Uint8Array)n=At(t.transactionBlock);else throw new Error("Unknown transaction block format.");return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[t.sender,n,(i=t.gasPrice)==null?void 0:i.toString(),t.epoch]})}async dryRunTransactionBlock(t){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof t.transactionBlock=="string"?t.transactionBlock:At(t.transactionBlock)]})}async getDynamicFields(t){if(!t.parentId||!fi(he(t.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[t.parentId,t.cursor,t.limit]})}async getDynamicFieldObject(t){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[t.parentId,t.name]})}async getLatestCheckpointSequenceNumber(){const t=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(t)}async getCheckpoint(t){return await this.transport.request({method:"sui_getCheckpoint",params:[t.id]})}async getCheckpoints(t){return await this.transport.request({method:"sui_getCheckpoints",params:[t.cursor,t==null?void 0:t.limit,t.descendingOrder]})}async getCommitteeInfo(t){return await this.transport.request({method:"suix_getCommitteeInfo",params:[t==null?void 0:t.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(t){return await this.transport.request({method:"suix_getEpochMetrics",params:[t==null?void 0:t.cursor,t==null?void 0:t.limit,t==null?void 0:t.descendingOrder]})}async getAllEpochAddressMetrics(t){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[t==null?void 0:t.descendingOrder]})}async getEpochs(t){return await this.transport.request({method:"suix_getEpochs",params:[t==null?void 0:t.cursor,t==null?void 0:t.limit,t==null?void 0:t.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){const t=await this.getCheckpoint({id:"0"}),n=Ci(t.digest);return Ai(n.slice(0,4))}async resolveNameServiceAddress(t){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[t.name]})}async resolveNameServiceNames({format:t="dot",...n}){const{nextCursor:i,hasNextPage:o,data:s}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[n.address,n.cursor,n.limit]});return{hasNextPage:o,nextCursor:i,data:s.map(r=>au(r,t))}}async getProtocolConfig(t){return await this.transport.request({method:"sui_getProtocolConfig",params:[t==null?void 0:t.version]})}async waitForTransaction({signal:t,timeout:n=60*1e3,pollInterval:i=2*1e3,...o}){const s=AbortSignal.timeout(n),r=new Promise((a,c)=>{s.addEventListener("abort",()=>c(s.reason))});for(r.catch(()=>{});!s.aborted;){t==null||t.throwIfAborted();try{return await this.getTransactionBlock(o)}catch{await Promise.race([new Promise(c=>setTimeout(c,i)),r])}}throw s.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}}var cp=Object.defineProperty,dp=(e,t,n)=>t in e?cp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lp=(e,t,n)=>(dp(e,typeof t!="symbol"?t+"":t,n),n),Et=5*60*1e3,V=24*60*60*1e3;function pe(e){return Date.parse(new Date().toString())+e}var St=class{constructor(e,t=0){U(this,"overdueTime");U(this,"value");this.overdueTime=t,this.value=e}isValid(){return this.value===null?!1:this.overdueTime===0?!0:!(Date.parse(new Date().toString())>this.overdueTime)}};L.config({precision:64,rounding:L.ROUND_DOWN,toExpNeg:-64,toExpPos:64});var yt=L,F=class extends Error{constructor(t,n){super(t);U(this,"message");U(this,"errorCode");this.message=t,this.errorCode=n}static isClmmpoolsErrorCode(t,n){return t instanceof F&&t.errorCode===n}},H=new g(0),sn=new g(1),To=new g(2);To.pow(new g(128));var ni=To.pow(new g(64)).sub(sn),up=To.pow(new g(128)).sub(sn),se=class{static toX64_BN(e){return e.mul(new g(2).pow(new g(64)))}static toX64_Decimal(e){return e.mul(yt.pow(2,64))}static toX64(e){return new g(e.mul(yt.pow(2,64)).floor().toFixed())}static fromX64(e){return new yt(e.toString()).mul(yt.pow(2,-64))}static fromX64_Decimal(e){return e.mul(yt.pow(2,-64))}static fromX64_BN(e){return e.div(new g(2).pow(new g(64)))}static shiftRightRoundUp(e){let t=e.shrn(64);return e.mod(ni).gt(H)&&(t=t.add(sn)),t}static divRoundUp(e,t){return e.mod(t).eq(H)?e.div(t):e.div(t).add(new g(1))}static subUnderflowU128(e,t){return e.lt(t)?e.sub(t).add(up):e.sub(t)}static checkUnsignedSub(e,t){const n=e.sub(t);if(n.isNeg())throw new F("Unsigned integer sub overflow","UnsignedIntegerOverflow");return n}static checkMul(e,t,n){const i=e.mul(t);if(this.isOverflow(i,n))throw new F("Multiplication overflow","MultiplicationOverflow");return i}static checkMulDivFloor(e,t,n,i){if(n.eq(H))throw new F("Devide by zero","DivideByZero");const o=e.mul(t).div(n);if(this.isOverflow(o,i))throw new F("Multiplication div overflow","MulDivOverflow");return o}static checkMulDivCeil(e,t,n,i){if(n.eq(H))throw new F("Devide by zero","DivideByZero");const o=e.mul(t).add(n.sub(sn)).div(n);if(this.isOverflow(o,i))throw new F("Multiplication div overflow","MulDivOverflow");return o}static checkMulDivRound(e,t,n,i){if(n.eq(H))throw new F("Devide by zero","DivideByZero");const o=e.mul(t.add(n.shrn(1))).div(n);if(this.isOverflow(o,i))throw new F("Multiplication div overflow","MulDivOverflow");return o}static checkMulShiftRight(e,t,n,i){const o=e.mul(t).div(new g(2).pow(new g(n)));if(this.isOverflow(o,i))throw new F("Multiplication shift right overflow","MulShiftRightOverflow");return o}static checkMulShiftRight64RoundUpIf(e,t,n,i){const o=e.mul(t),r=i&&o.and(ni).gt(H)?o.shrn(64).add(sn):o.shrn(64);if(this.isOverflow(r,n))throw new F("Multiplication shift right overflow","MulShiftRightOverflow");return r}static checkMulShiftLeft(e,t,n,i){const o=e.mul(t).shln(n);if(this.isOverflow(o,i))throw new F("Multiplication shift left overflow","MulShiftLeftOverflow");return o}static checkDivRoundUpIf(e,t,n){if(t.eq(H))throw new F("Devide by zero","DivideByZero");return n?this.divRoundUp(e,t):e.div(t)}static isOverflow(e,t){return e.gte(To.pow(new g(t)))}static sign(e){return e.testn(127)?1:0}static is_neg(e){return this.sign(e)===1}static abs_u128(e){return e.gt(H)?e:this.u128_neg(e.subn(1))}static u128_neg(e){return e.uxor(new g("ffffffffffffffffffffffffffffffff",16))}static neg(e){return this.is_neg(e)?e.abs():this.neg_from(e)}static abs(e){return this.sign(e)===0?e:this.u128_neg(e.sub(new g(1)))}static neg_from(e){return e.eq(H)?e:this.u128_neg(e).add(new g(1)).or(new g(1).shln(127))}};function fp(e){return{coinA:e.coinTypeA,coinB:e.coinTypeB,currentSqrtPrice:new g(e.current_sqrt_price),currentTickIndex:e.current_tick_index,feeGrowthGlobalA:new g(e.fee_growth_global_a),feeGrowthGlobalB:new g(e.fee_growth_global_b),feeProtocolCoinA:new g(e.fee_protocol_coin_a),feeProtocolCoinB:new g(e.fee_protocol_coin_b),feeRate:new g(e.fee_rate),liquidity:new g(e.liquidity),tickIndexes:[],tickSpacing:Number(e.tickSpacing),ticks:[],collection_name:""}}var Ds=443636,Ns=-443636,xo="79226673515401279992447579055",Io="4295048016",Wn=new g(1e6),q="0x0000000000000000000000000000000000000000000000000000000000000006",hp="partner",gi="pool_script",In="pool_script_v2",nd="pool_script_v3",Rn="router",rs="router_with_partner",$t="fetcher_script",pp="expect_swap",fa="utils",as="custodian_v2",_p="clob_v2",bp="endpoints_v2",id=(e=>(e.Deleted="Deleted",e.Exists="Exists",e.NotExists="NotExists",e))(id||{});function I(e){if(e.config===void 0)throw new F(`package: ${e.package_id}  not config in sdk SdkOptions`,"InvalidConfig");return e.config}var mp=14,gp="59543866431248",yp="184467440737095516",wp="15793534762490258745",vp=443636;function kp(e,t,n){const i=e.toTwos(n).shln(t);return i.imaskn(n+1),i.fromTwos(n)}function ae(e,t,n){const i=e.toTwos(n).shrn(t);return i.imaskn(n-t+1),i.fromTwos(n-t)}function Cp(e){let t;return e&1?t=new g("79232123823359799118286999567"):t=new g("79228162514264337593543950336"),e&2&&(t=ae(t.mul(new g("79236085330515764027303304731")),96,256)),e&4&&(t=ae(t.mul(new g("79244008939048815603706035061")),96,256)),e&8&&(t=ae(t.mul(new g("79259858533276714757314932305")),96,256)),e&16&&(t=ae(t.mul(new g("79291567232598584799939703904")),96,256)),e&32&&(t=ae(t.mul(new g("79355022692464371645785046466")),96,256)),e&64&&(t=ae(t.mul(new g("79482085999252804386437311141")),96,256)),e&128&&(t=ae(t.mul(new g("79736823300114093921829183326")),96,256)),e&256&&(t=ae(t.mul(new g("80248749790819932309965073892")),96,256)),e&512&&(t=ae(t.mul(new g("81282483887344747381513967011")),96,256)),e&1024&&(t=ae(t.mul(new g("83390072131320151908154831281")),96,256)),e&2048&&(t=ae(t.mul(new g("87770609709833776024991924138")),96,256)),e&4096&&(t=ae(t.mul(new g("97234110755111693312479820773")),96,256)),e&8192&&(t=ae(t.mul(new g("119332217159966728226237229890")),96,256)),e&16384&&(t=ae(t.mul(new g("179736315981702064433883588727")),96,256)),e&32768&&(t=ae(t.mul(new g("407748233172238350107850275304")),96,256)),e&65536&&(t=ae(t.mul(new g("2098478828474011932436660412517")),96,256)),e&131072&&(t=ae(t.mul(new g("55581415166113811149459800483533")),96,256)),e&262144&&(t=ae(t.mul(new g("38992368544603139932233054999993551")),96,256)),ae(t,32,256)}function Ap(e){const t=Math.abs(e);let n;return t&1?n=new g("18445821805675392311"):n=new g("18446744073709551616"),t&2&&(n=ae(n.mul(new g("18444899583751176498")),64,256)),t&4&&(n=ae(n.mul(new g("18443055278223354162")),64,256)),t&8&&(n=ae(n.mul(new g("18439367220385604838")),64,256)),t&16&&(n=ae(n.mul(new g("18431993317065449817")),64,256)),t&32&&(n=ae(n.mul(new g("18417254355718160513")),64,256)),t&64&&(n=ae(n.mul(new g("18387811781193591352")),64,256)),t&128&&(n=ae(n.mul(new g("18329067761203520168")),64,256)),t&256&&(n=ae(n.mul(new g("18212142134806087854")),64,256)),t&512&&(n=ae(n.mul(new g("17980523815641551639")),64,256)),t&1024&&(n=ae(n.mul(new g("17526086738831147013")),64,256)),t&2048&&(n=ae(n.mul(new g("16651378430235024244")),64,256)),t&4096&&(n=ae(n.mul(new g("15030750278693429944")),64,256)),t&8192&&(n=ae(n.mul(new g("12247334978882834399")),64,256)),t&16384&&(n=ae(n.mul(new g("8131365268884726200")),64,256)),t&32768&&(n=ae(n.mul(new g("3584323654723342297")),64,256)),t&65536&&(n=ae(n.mul(new g("696457651847595233")),64,256)),t&131072&&(n=ae(n.mul(new g("26294789957452057")),64,256)),t&262144&&(n=ae(n.mul(new g("37481735321082")),64,256)),n}var G=class{static priceToSqrtPriceX64(e,t,n){return se.toX64(e.mul(yt.pow(10,n-t)).sqrt())}static sqrtPriceX64ToPrice(e,t,n){return se.fromX64(e).pow(2).mul(yt.pow(10,t-n))}static tickIndexToSqrtPriceX64(e){return e>0?new g(Cp(e)):new g(Ap(e))}static sqrtPriceX64ToTickIndex(e){if(e.gt(new g(xo))||e.lt(new g(Io)))throw new F("Provided sqrtPrice is not within the supported sqrtPrice range.","InvalidSqrtPrice");const t=e.bitLength()-1,n=new g(t-64),i=kp(n,32,128);let o=new g("8000000000000000","hex"),s=0,r=new g(0),a=t>=64?e.shrn(t-63):e.shln(63-t);for(;o.gt(new g(0))&&s<mp;){a=a.mul(a);const y=a.shrn(127);a=a.shrn(63+y.toNumber()),r=r.add(o.mul(y)),o=o.shrn(1),s+=1}const c=r.shrn(32),l=i.add(c).mul(new g(gp)),f=ae(l.sub(new g(yp)),64,128).toNumber(),_=ae(l.add(new g(wp)),64,128).toNumber();return f===_?f:G.tickIndexToSqrtPriceX64(_).lte(e)?_:f}static tickIndexToPrice(e,t,n){return G.sqrtPriceX64ToPrice(G.tickIndexToSqrtPriceX64(e),t,n)}static priceToTickIndex(e,t,n){return G.sqrtPriceX64ToTickIndex(G.priceToSqrtPriceX64(e,t,n))}static priceToInitializableTickIndex(e,t,n,i){return G.getInitializableTickIndex(G.priceToTickIndex(e,t,n),i)}static getInitializableTickIndex(e,t){return e-e%t}static getNextInitializableTickIndex(e,t){return G.getInitializableTickIndex(e,t)+t}static getPrevInitializableTickIndex(e,t){return G.getInitializableTickIndex(e,t)-t}};function h0(e){const t=[];for(const n of e){const i={objectId:n.objectId,index:Number(ct(BigInt(n.index)).toString()),sqrtPrice:n.sqrtPrice,liquidityNet:new g(BigInt.asIntN(128,BigInt(BigInt(n.liquidityNet.toString()))).toString()),liquidityGross:n.liquidityGross,feeGrowthOutsideA:n.feeGrowthOutsideA,feeGrowthOutsideB:n.feeGrowthOutsideB,rewardersGrowthOutside:[new g(n.rewardersGrowthOutside[0]),new g(n.rewardersGrowthOutside[1]),new g(n.rewardersGrowthOutside[2])]};t.push(i)}return t}function Sp(e){return w(e).add(w(vp))}new g(365);new g(24);new g(3600);new g(.5);function p0(e,t,n,i){const o=Math.max(e,n),r=Math.min(t,i)-o,a=t-e,c=i-n,d=new L(a.toString()),l=new L(c.toString()),f=new L(r.toString());let _=new L("0");return r<0?_=new L("0"):a===r?_=l.div(f):c===r?_=f.div(d):_=f.mul(f).div(l).div(d),_}var en=class{static getDefaultSqrtPriceLimit(e){return new g(e?Io:xo)}static getDefaultOtherAmountThreshold(e){return e?H:ni}};function od(e,t,n,i){if(n.eq(H))return e;const o=se.checkMulShiftLeft(e,t,64,256),s=t.shln(64),r=se.checkMul(e,n,256);if(!i&&s.lte(r))throw new F("getNextSqrtPriceAUp - Unable to divide liquidityShl64 by product","DivideByZero");const a=i?se.checkDivRoundUpIf(o,s.add(r),!0):se.checkDivRoundUpIf(o,s.sub(r),!0);if(a.lt(new g(Io)))throw new F("getNextSqrtPriceAUp - Next sqrt price less than min sqrt price","CoinAmountMinSubceeded ");if(a.gt(new g(xo)))throw new F("getNextSqrtPriceAUp - Next sqrt price greater than max sqrt price","CoinAmountMaxExceeded");return a}function sd(e,t,n,i){const o=se.checkDivRoundUpIf(n.shln(64),t,!i),s=i?e.add(o):e.sub(o);if(s.lt(new g(Io))||s.gt(new g(xo)))throw new F("getNextSqrtPriceAUp - Next sqrt price out of bounds","SqrtPriceOutOfBounds");return s}function Tp(e,t,n,i){return i?od(e,t,n,!0):sd(e,t,n,!0)}function xp(e,t,n,i){return i?sd(e,t,n,!1):od(e,t,n,!1)}function ha(e,t,n,i){const o=e.gt(t)?e.sub(t):t.sub(e);if(n.lte(H)||o.eq(H))return H;let s;if(i){const r=new g(n).mul(new g(o)).shln(64),a=t.mul(e),c=r.div(a);s=r.mod(a).eq(H)?c:c.add(sn)}else{const r=new g(n).mul(new g(o));s=r.and(ni).gt(H)?r.shrn(64).add(sn):r.shrn(64)}return s}function pa(e,t,n,i){const o=e.gt(t)?e.sub(t):t.sub(e);if(n.lte(H)||o.eq(H))return H;let s;if(i)s=n.mul(o).shrn(64);else{const r=n.mul(o).shln(64),a=t.mul(e);s=r.div(a)}return s}function Ip(e,t,n,i,o,s){if(n===H)return{amountIn:H,amountOut:H,nextSqrtPrice:t,feeAmount:H};const r=e.gte(t);let a,c,d,l;if(s){const f=se.checkMulDivFloor(i,se.checkUnsignedSub(Wn,o),Wn,64),_=ha(e,t,n,r);_.gt(f)?(a=f,l=se.checkUnsignedSub(i,f),d=Tp(e,n,f,r)):(a=_,l=se.checkMulDivCeil(a,o,Wn.sub(o),64),d=t),c=pa(e,d,n,r)}else{const f=pa(e,t,n,r);f.gt(i)?(c=i,d=xp(e,n,i,r)):(c=f,d=t),a=ha(e,d,n,r),l=se.checkMulDivCeil(a,o,Wn.sub(o),64)}return{amountIn:a,amountOut:c,nextSqrtPrice:d,feeAmount:l}}function Pp(e,t,n,i,o){let s=n,r=i.liquidity,{currentSqrtPrice:a}=i;const c={amountIn:H,amountOut:H,feeAmount:H,refAmount:H,nextSqrtPrice:H,crossTickNum:0};let d,l;const f=en.getDefaultSqrtPriceLimit(e);for(const _ of o){if(e&&i.currentTickIndex<_.index||!e&&i.currentTickIndex>=_.index||_===null)continue;e&&f.gt(_.sqrtPrice)||!e&&f.lt(_.sqrtPrice)?d=f:d=_.sqrtPrice;const b=Ip(a,d,r,s,i.feeRate,t);if(b.amountIn.eq(H)||(s=t?s.sub(b.amountIn.add(b.feeAmount)):s.sub(b.amountOut)),c.amountIn=c.amountIn.add(b.amountIn),c.amountOut=c.amountOut.add(b.amountOut),c.feeAmount=c.feeAmount.add(b.feeAmount),b.nextSqrtPrice.eq(_.sqrtPrice)?(l=_.liquidityNet.mul(new g(-1)),e?se.is_neg(l)?r=r.add(new g(vt(BigInt(l.toString()),128))):r=r.add(l):se.is_neg(l)?r=r.sub(new g(vt(BigInt(l.toString()),128))):r=r.sub(l),a=_.sqrtPrice):a=b.nextSqrtPrice,c.crossTickNum+=1,s.eq(H))break}return c.amountIn=c.amountIn.add(c.feeAmount),c.nextSqrtPrice=a,c}function qi(e,t,n){const i=g.min(e,t),o=g.max(e,t),s=se.fromX64_BN(n.mul(o).mul(i)),r=o.sub(i);return s.div(r)}function $i(e,t,n){const i=g.min(e,t),s=g.max(e,t).sub(i);return n.shln(64).div(s)}var pt=class{static updateFeeRate(e,t,n,i,o){const s=se.checkMulDivCeil(t,new g(i),Wn,64),r=n===0?H:se.checkMulDivFloor(t,new g(n),Wn,64),a=t.mul(s).mul(r);if(o?e.feeProtocolCoinA=e.feeProtocolCoinA.add(s):e.feeProtocolCoinB=e.feeProtocolCoinB.add(s),a.eq(H)||e.liquidity.eq(H))return{refFee:r,clmm:e};const c=a.shln(64).div(e.liquidity);return o?e.feeGrowthGlobalA=e.feeGrowthGlobalA.add(c):e.feeGrowthGlobalB=e.feeGrowthGlobalB.add(c),{refFee:r,clmm:e}}static getCoinAmountFromLiquidity(e,t,n,i,o){const s=new yt(e.toString()),r=new yt(t.toString()),a=new yt(n.toString()),c=new yt(i.toString());let d,l;return t.lt(n)?(d=se.toX64_Decimal(s).mul(c.sub(a)).div(a.mul(c)),l=new yt(0)):t.lt(i)?(d=se.toX64_Decimal(s).mul(c.sub(r)).div(r.mul(c)),l=se.fromX64_Decimal(s.mul(r.sub(a)))):(d=new yt(0),l=se.fromX64_Decimal(s.mul(c.sub(a)))),o?{coinA:new g(d.ceil().toString()),coinB:new g(l.ceil().toString())}:{coinA:new g(d.floor().toString()),coinB:new g(l.floor().toString())}}static estLiquidityAndcoinAmountFromOneAmounts(e,t,n,i,o,s,r){const a=G.sqrtPriceX64ToTickIndex(r),c=G.tickIndexToSqrtPriceX64(e),d=G.tickIndexToSqrtPriceX64(t);let l;if(a<e){if(!i)throw new F("lower tick cannot calculate liquidity by coinB","NotSupportedThisCoin");l=qi(c,d,n)}else if(a>t){if(i)throw new F("upper tick cannot calculate liquidity by coinA","NotSupportedThisCoin");l=$i(d,c,n)}else i?l=qi(r,d,n):l=$i(r,c,n);const f=pt.getCoinAmountFromLiquidity(l,r,c,d,o),_=o?w(f.coinA.toString()).mul(1+s).toString():w(f.coinA.toString()).mul(1-s).toString(),b=o?w(f.coinB.toString()).mul(1+s).toString():w(f.coinB.toString()).mul(1-s).toString();return{coinAmountA:f.coinA,coinAmountB:f.coinB,tokenMaxA:o?new g(yt.ceil(_).toString()):new g(yt.floor(_).toString()),tokenMaxB:o?new g(yt.ceil(b).toString()):new g(yt.floor(b).toString()),liquidityAmount:l,fix_amount_a:i}}static estimateLiquidityFromcoinAmounts(e,t,n,i){if(t>n)throw new F("lower tick cannot be greater than lower tick","InvalidTwoTickIndex");const o=G.sqrtPriceX64ToTickIndex(e),s=G.tickIndexToSqrtPriceX64(t),r=G.tickIndexToSqrtPriceX64(n);if(o<t)return qi(s,r,i.coinA);if(o>=n)return $i(r,s,i.coinB);const a=qi(e,r,i.coinA),c=$i(e,s,i.coinB);return g.min(a,c)}static estCoinAmountsFromTotalAmount(e,t,n,i,o,s){const{ratioA:r,ratioB:a}=pt.calculateDepositRatioFixTokenA(e,t,n),c=w(i).mul(r).div(o),d=w(i).mul(a).div(s);return{amountA:c,amountB:d}}static calculateDepositRatioFixTokenA(e,t,n){const i=new g(1e8),{coinAmountB:o}=pt.estLiquidityAndcoinAmountFromOneAmounts(e,t,i,!0,!0,0,n),s=G.sqrtPriceX64ToPrice(n,0,0),r=w(i.toString()).mul(s),a=r.add(o.toString()),c=r.div(a),d=w(o.toString()).div(a);return{ratioA:c,ratioB:d}}};function rd(e){return e.startsWith("0x")?`${e.slice(2)}`:e}var Op=0,ad=1,jp=2;function _a(e,t){return e===t?Op:e<t?ad:jp}function Mp(e,t){let n=0;const i=e.length<=t.length?e.length:t.length,o=_a(e.length,t.length);for(;n<i;){const s=_a(e.charCodeAt(n),t.charCodeAt(n));if(n+=1,s!==0)return s}return o}function Rs(e,t){return Mp(e,t)===ad}function po(e,...t){const n=Array.isArray(t[t.length-1])?t.pop():[];let o=[e,...t].filter(Boolean).join("::");return n&&n.length&&(o+=`<${n.join(", ")}>`),o}function D(e){var t;try{let n=e.replace(/\s/g,"");const i=n.match(/(<.+>)$/),o=(t=i==null?void 0:i[0])==null?void 0:t.match(/(\w+::\w+::\w+)(?:<.*?>(?!>))?/g);if(o){n=n.slice(0,n.indexOf("<"));const d={...D(n),type_arguments:o.map(l=>D(l).source_address)};return d.type_arguments=d.type_arguments.map(l=>ce.isSuiCoin(l)?l:D(l).source_address),d.source_address=po(d.full_address,d.type_arguments),d}const s=n.split("::"),a={full_address:n,address:n===_o||n===Rp?"0x2":he(s[0]),module:s[1],name:s[2],type_arguments:[],source_address:""};return a.full_address=`${a.address}::${a.module}::${a.name}`,a.source_address=po(a.full_address,a.type_arguments),a}catch{return{full_address:e,address:"",module:"",name:"",type_arguments:[],source_address:e}}}function ke(e){return D(e).source_address}function Ep(e){return e.toLowerCase().startsWith("0x")?he(e):e}var Bp=(e,t=!0)=>{const n=e.split("::"),i=n.shift();let o=he(i);return t&&(o=rd(o)),`${o}::${n.join("::")}`};function lr(e){for(const t in e){const n=typeof e[t];if(n==="object")lr(e[t]);else if(n==="string"){const i=e[t];i&&!i.includes("::")&&(e[t]=Ep(i))}}}var Dp="0x2::coin::Coin",Np=/^0x2::coin::Coin<(.+)>$/,_o="0x2::sui::SUI",Rp="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",ce=class{static getCoinTypeArg(e){const t=e.type.match(Np);return t?t[1]:null}static isSUI(e){const t=ce.getCoinTypeArg(e);return t?ce.getCoinSymbol(t)==="SUI":!1}static getCoinSymbol(e){return e.substring(e.lastIndexOf(":")+1)}static getBalance(e){return BigInt(e.fields.balance)}static totalBalance(e,t){let n=BigInt(0);return e.forEach(i=>{t===i.coinAddress&&(n+=BigInt(i.balance))}),n}static getID(e){return e.fields.id.id}static getCoinTypeFromArg(e){return`${Dp}<${e}>`}static getFaucetCoins(e){const{events:t}=e,n=[];return t==null||t.forEach(i=>{const{type:o}=i;if(D(o).name==="InitEvent"){const s=i.parsedJson;n.push({transactionModule:i.transactionModule,suplyID:s.suplyID,decimals:s.decimals})}}),n}static getCoinAssets(e,t){const n=[];return t.forEach(i=>{ke(i.coinAddress)===ke(e)&&n.push(i)}),n}static isSuiCoin(e){return D(e).full_address===_o}static selectCoinObjectIdGreaterThanOrEqual(e,t,n=[]){const i=ce.selectCoinAssetGreaterThanOrEqual(e,t,n),o=i.selectedCoins.map(a=>a.coinObjectId),s=i.remainingCoins,r=i.selectedCoins.map(a=>a.balance.toString());return{objectArray:o,remainCoins:s,amountArray:r}}static selectCoinAssetGreaterThanOrEqual(e,t,n=[]){const i=ce.sortByBalance(e.filter(c=>!n.includes(c.coinObjectId))),o=ce.calculateTotalBalance(i);if(o<t)return{selectedCoins:[],remainingCoins:i};if(o===t)return{selectedCoins:i,remainingCoins:[]};let s=BigInt(0);const r=[],a=[...i];for(;s<o;){const c=t-s,d=a.findIndex(f=>f.balance>=c);if(d!==-1){r.push(a[d]),a.splice(d,1);break}const l=a.pop();l.balance>0&&(r.push(l),s+=l.balance)}return{selectedCoins:ce.sortByBalance(r),remainingCoins:ce.sortByBalance(a)}}static sortByBalance(e){return e.sort((t,n)=>t.balance<n.balance?-1:t.balance>n.balance?1:0)}static sortByBalanceDes(e){return e.sort((t,n)=>t.balance>n.balance?-1:t.balance<n.balance?0:1)}static calculateTotalBalance(e){return e.reduce((t,n)=>t+n.balance,BigInt(0))}};function qp(e,t,n){let i=new g(0),o=new g(0);e.current_tick_index<t.index?(i=se.subUnderflowU128(new g(e.fee_growth_global_a),new g(t.feeGrowthOutsideA)),o=se.subUnderflowU128(new g(e.fee_growth_global_b),new g(t.feeGrowthOutsideB))):(i=new g(t.feeGrowthOutsideA),o=new g(t.feeGrowthOutsideB));let s=new g(0),r=new g(0);e.current_tick_index<n.index?(s=new g(n.feeGrowthOutsideA),r=new g(n.feeGrowthOutsideB)):(s=se.subUnderflowU128(new g(e.fee_growth_global_a),new g(n.feeGrowthOutsideA)),r=se.subUnderflowU128(new g(e.fee_growth_global_b),new g(n.feeGrowthOutsideB)));const a=se.subUnderflowU128(se.subUnderflowU128(new g(e.fee_growth_global_a),i),s),c=se.subUnderflowU128(se.subUnderflowU128(new g(e.fee_growth_global_b),o),r);return{fee_growth_inside_a:a,fee_growth_inside_b:c}}function $p(e,t,n){const i=se.subUnderflowU128(t,new g(e.fee_growth_inside_a)),o=new g(e.liquidity).mul(i).shrn(64),s=se.subUnderflowU128(n,new g(e.fee_growth_inside_b)),r=new g(e.liquidity).mul(s).shrn(64),a=new g(e.fee_owed_a).add(o),c=new g(e.fee_owed_b).add(r);return{position_id:e.pos_object_id,feeOwedA:a,feeOwedB:c}}function _0(e){const{fee_growth_inside_a:t,fee_growth_inside_b:n}=qp(e.clmmpool,e.tickLower,e.tickUpper);return $p(e.position,t,n)}var yi=class{constructor(e,t){U(this,"numerator");U(this,"denominator");this.toString=()=>`${this.numerator.toString()}/${this.denominator.toString()}`,this.numerator=e,this.denominator=t}static fromDecimal(e){return yi.fromFraction(e.toDecimalPlaces(1).mul(10).toNumber(),1e3)}static fromFraction(e,t){const n=typeof e=="number"?new g(e.toString()):e,i=typeof t=="number"?new g(t.toString()):t;return new yi(n,i)}};function qs(e,{numerator:t,denominator:n},i){return i?e.mul(n.add(t)).div(n):e.mul(n).div(n.add(t))}function cs(e,t,n){return{tokenMaxA:qs(e.coinA,t,n),tokenMaxB:qs(e.coinB,t,n)}}function w(e){return L.isDecimal(e)?e:new L(e===void 0?0:e)}function Fp(e){return w(10).pow(w(e).abs())}function ji(e){return e.data}function cd(e){if(e.error&&"object_id"in e.error&&"version"in e.error&&"digest"in e.error){const{error:t}=e;return{objectId:t.object_id,version:t.version,digest:t.digest}}}function dd(e){if(e.error&&"object_id"in e.error&&!("version"in e.error)&&!("digest"in e.error))return e.error.object_id}function Lp(e){if("reference"in e)return e.reference;const t=ji(e);return t?{objectId:t.objectId,version:t.version,digest:t.digest}:cd(e)}function Wt(e){var t;return"objectId"in e?e.objectId:((t=Lp(e))==null?void 0:t.objectId)??dd(e)}function Up(e){return e.data!==void 0}function Kp(e){return e.content!==void 0}function ld(e){const t="data"in e?ji(e):e;if(!(!t||!Kp(t)||t.content.dataType!=="moveObject"))return t.content}function Jt(e){var t;return(t=ld(e))==null?void 0:t.type}function $n(e){var n;const t=Up(e)?e.data:e;return!(t!=null&&t.type)&&"data"in e?((n=t==null?void 0:t.content)==null?void 0:n.dataType)==="package"?"package":Jt(e):t==null?void 0:t.type}function Mi(e){var t;return(t=ji(e))==null?void 0:t.previousTransaction}function bo(e){var t;return(t=ji(e))==null?void 0:t.owner}function Vp(e){var n;const t=(n=ji(e))==null?void 0:n.display;return t||{data:null,error:null}}function Q(e){var n;const t=(n=ld(e))==null?void 0:n.fields;if(t)return"fields"in t?t.fields:t}function zp(e,t){const n=Fp(w(t));return Number(w(e).mul(n))}function vt(e,t=32){return BigInt.asUintN(t,BigInt(e)).toString()}function ct(e,t=32){return Number(BigInt.asIntN(t,BigInt(e)))}function Gp(e,t,n){const i=D(e).name,o=D(t).name;return`${i}-${o}[${n}]`}function ds(e){const t=Jt(e),n=D(t),i=Q(e);if(i==null)throw new F(`Pool id ${Wt(e)} not exists.`,"InvalidPoolObject");const o=[];i.rewarder_manager.fields.rewarders.forEach(r=>{const{emissions_per_second:a}=r.fields,c=se.fromX64(new g(a)),d=Math.floor(c.toNumber()*60*60*24);o.push({emissions_per_second:a,coinAddress:D(r.fields.reward_coin.fields.name).source_address,growth_global:r.fields.growth_global,emissionsEveryDay:d})});const s={poolAddress:Wt(e),poolType:t,coinTypeA:n.type_arguments[0],coinTypeB:n.type_arguments[1],coinAmountA:i.coin_a,coinAmountB:i.coin_b,current_sqrt_price:i.current_sqrt_price,current_tick_index:ct(BigInt(i.current_tick_index.fields.bits)),fee_growth_global_a:i.fee_growth_global_a,fee_growth_global_b:i.fee_growth_global_b,fee_protocol_coin_a:i.fee_protocol_coin_a,fee_protocol_coin_b:i.fee_protocol_coin_b,fee_rate:i.fee_rate,is_pause:i.is_pause,liquidity:i.liquidity,position_manager:{positions_handle:i.position_manager.fields.positions.fields.id.id,size:i.position_manager.fields.positions.fields.size},rewarder_infos:o,rewarder_last_updated_time:i.rewarder_manager.fields.last_updated_time,tickSpacing:i.tick_spacing,ticks_handle:i.tick_manager.fields.ticks.fields.id.id,uri:i.url,index:Number(i.index),name:""};return s.name=Gp(s.coinTypeA,s.coinTypeB,s.tickSpacing),s}function Po(e){const t=Vp(e).data,n={creator:"",description:"",image_url:"",link:"",name:"",project_url:""};return t&&(n.creator=t.creator,n.description=t.description,n.image_url=t.image_url,n.link=t.link,n.name=t.name,n.project_url=t.project_url),n}function ei(e){var r,a;if(e.error!=null||((a=(r=e.data)==null?void 0:r.content)==null?void 0:a.dataType)!=="moveObject")throw new F(`Position not exists. Get Position error:${e.error}`,"InvalidPositionObject");let t={creator:"",description:"",image_url:"",link:"",name:"",project_url:""},n={...t,pos_object_id:"",owner:"",type:"",coin_type_a:"",coin_type_b:"",liquidity:"",tick_lower_index:0,tick_upper_index:0,index:0,pool:"",reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0",fee_growth_inside_a:"0",fee_owed_a:"0",fee_growth_inside_b:"0",fee_owed_b:"0",position_status:"Exists"},i=Q(e);if(i){const c=Jt(e),d=bo(e);"nft"in i?(i=i.nft.fields,t.description=i.description,t.name=i.name,t.link=i.url):t=Po(e),n={...t,pos_object_id:i.id.id,owner:d.AddressOwner,type:c,liquidity:i.liquidity,coin_type_a:i.coin_type_a.fields.name,coin_type_b:i.coin_type_b.fields.name,tick_lower_index:ct(BigInt(i.tick_lower_index.fields.bits)),tick_upper_index:ct(BigInt(i.tick_upper_index.fields.bits)),index:i.index,pool:i.pool,reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0",fee_growth_inside_a:"0",fee_owed_a:"0",fee_growth_inside_b:"0",fee_owed_b:"0",position_status:"Exists"}}const o=cd(e);o&&(n.pos_object_id=o.objectId,n.position_status="Deleted");const s=dd(e);return s&&(n.pos_object_id=s,n.position_status="NotExists"),n}function ud(e){const t={reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0"};e="fields"in e?e.fields:e,e.rewards.forEach((s,r)=>{const{amount_owned:a,growth_inside:c}="fields"in s?s.fields:s;r===0?(t.reward_amount_owed_0=a,t.reward_growth_inside_0=c):r===1?(t.reward_amount_owed_1=a,t.reward_growth_inside_1=c):r===2&&(t.reward_amount_owed_2=a,t.reward_growth_inside_2=c)});const n="fields"in e.tick_lower_index?e.tick_lower_index.fields.bits:e.tick_lower_index.bits,i="fields"in e.tick_upper_index?e.tick_upper_index.fields.bits:e.tick_upper_index.bits;return{liquidity:e.liquidity,tick_lower_index:ct(BigInt(n)),tick_upper_index:ct(BigInt(i)),...t,fee_growth_inside_a:e.fee_growth_inside_a,fee_owed_a:e.fee_owned_a,fee_growth_inside_b:e.fee_growth_inside_b,fee_owed_b:e.fee_owned_b,pos_object_id:e.position_id}}function ls(e){var o,s;if(e.error!=null||((s=(o=e.data)==null?void 0:o.content)==null?void 0:s.dataType)!=="moveObject")throw new F(`Tick not exists. Get tick data error:${e.error}`,"InvalidTickObject");const n=Q(e).value.fields.value.fields;return{objectId:Wt(e),index:ct(BigInt(n.index.fields.bits)),sqrtPrice:new g(n.sqrt_price),liquidityNet:new g(n.liquidity_net.fields.bits),liquidityGross:new g(n.liquidity_gross),feeGrowthOutsideA:new g(n.fee_growth_outside_a),feeGrowthOutsideB:new g(n.fee_growth_outside_b),rewardersGrowthOutside:n.rewards_growth_outside}}function Wp(e){if(!e||!e.index||!e.sqrt_price||!e.liquidity_net||!e.liquidity_gross||!e.fee_growth_outside_a||!e.fee_growth_outside_b)throw new F("Invalid tick fields.","InvalidTickFields");const t=ct(BigInt(e.index.bits)),n=new g(e.sqrt_price),i=new g(e.liquidity_net.bits),o=new g(e.liquidity_gross),s=new g(e.fee_growth_outside_a),r=new g(e.fee_growth_outside_b),a=e.rewards_growth_outside||[];return{objectId:"",index:t,sqrtPrice:n,liquidityNet:i,liquidityGross:o,feeGrowthOutsideA:s,feeGrowthOutsideB:r,rewardersGrowthOutside:a}}var b0=class{static getMinIndex(e){return Ns+Math.abs(Ns)%e}static getMaxIndex(e){return Ds-Ds%e}};function m0(e,t){const n=Math.abs(e)%t;return e>0?n>t/2?e+t-n:e-n:n>t/2?e-t+n:e+n}function Xp(e,t,n,i,o,s){const r=e.rewarder_infos,a=[];for(let c=0;c<r.length;c+=1){let d=s[c];t!==null&&(e.current_tick_index<i?d=s[c].sub(new g(t.rewardersGrowthOutside[c])):d=t.rewardersGrowthOutside[c]);let l=new g(0);n!==null&&(e.current_tick_index>=o?l=s[c].sub(new g(n.rewardersGrowthOutside[c])):l=n.rewardersGrowthOutside[c]);const f=se.subUnderflowU128(se.subUnderflowU128(new g(s[c]),new g(d)),new g(l));a.push(f)}return a}function mo(e){const t=ce.isSuiCoin(e.coinTypeA),n=ce.isSuiCoin(e.coinTypeB);return{isAdjustCoinA:t,isAdjustCoinB:n}}function Hp(e,t){return L.ceil(w(e).div(1+t)).toString()}var Z=class{static createCollectRewarderAndFeeParams(e,t,n,i,o,s){o===void 0&&(o=[...i]),s===void 0&&(s=[...i]);const r=ke(n.coinTypeA),a=ke(n.coinTypeB);if(n.collect_fee){const d=Z.buildCoinForAmount(t,o,BigInt(0),r,!1);o=d.remainCoins;const l=Z.buildCoinForAmount(t,s,BigInt(0),a,!1);s=l.remainCoins,t=e.Position.createCollectFeePaylod({pool_id:n.pool_id,pos_id:n.pos_id,coinTypeA:n.coinTypeA,coinTypeB:n.coinTypeB},t,d.targetCoin,l.targetCoin)}const c=[];return n.rewarder_coin_types.forEach(d=>{switch(ke(d)){case r:c.push(Z.buildCoinForAmount(t,o,BigInt(0),d,!1).targetCoin);break;case a:c.push(Z.buildCoinForAmount(t,s,BigInt(0),d,!1).targetCoin);break;default:c.push(Z.buildCoinForAmount(t,i,BigInt(0),d,!1).targetCoin);break}}),t=e.Rewarder.createCollectRewarderPaylod(n,t,c),t}static async adjustTransactionForGas(e,t,n,i){i.setSender(e.senderAddress);const o=ce.selectCoinAssetGreaterThanOrEqual(t,n).selectedCoins;if(o.length===0)throw new F("Insufficient balance","InsufficientBalance");const s=ce.calculateTotalBalance(t);if(s-n>1e9)return{fixAmount:n};const r=await e.fullClient.calculationTxGas(i);if(ce.selectCoinAssetGreaterThanOrEqual(t,BigInt(r),o.map(c=>c.coinObjectId)).selectedCoins.length===0){const c=BigInt(r)+BigInt(500);if(s-n<c){if(n-=c,n<0)throw new F("gas Insufficient balance","InsufficientBalance");const d=new R;return{fixAmount:n,newTx:d}}}return{fixAmount:n}}static async buildAddLiquidityFixTokenForGas(e,t,n,i,o,s,r){o=await Z.buildAddLiquidityFixToken(e,t,n,o,s,r);const{isAdjustCoinA:a}=mo(n),c=a?n.amount_a:n.amount_b,d=await Z.adjustTransactionForGas(e,ce.getCoinAssets(a?n.coinTypeA:n.coinTypeB,t),BigInt(c),o),{fixAmount:l}=d,{newTx:f}=d;if(f!=null){let _,b;if(a)n.amount_a=Number(l),_=Z.buildAddLiquidityFixTokenCoinInput(f,!n.fix_amount_a,l.toString(),n.slippage,n.coinTypeA,t,!1),b=Z.buildAddLiquidityFixTokenCoinInput(f,n.fix_amount_a,n.amount_b,n.slippage,n.coinTypeB,t,!1);else return n.amount_b=Number(l),_=Z.buildAddLiquidityFixTokenCoinInput(f,!n.fix_amount_a,n.amount_a,n.slippage,n.coinTypeA,t,!1),b=Z.buildAddLiquidityFixTokenCoinInput(f,n.fix_amount_a,l.toString(),n.slippage,n.coinTypeB,t,!1),n=Z.fixAddLiquidityFixTokenParams(n,i.slippage,i.curSqrtPrice),o=await Z.buildAddLiquidityFixTokenArgs(f,e,t,n,_,b),o}return o}static async buildAddLiquidityFixToken(e,t,n,i,o,s){if(e.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");i=i||new R;let r,a;return o==null||s==null?(r=Z.buildAddLiquidityFixTokenCoinInput(i,!n.fix_amount_a,n.amount_a,n.slippage,n.coinTypeA,t,!1),a=Z.buildAddLiquidityFixTokenCoinInput(i,n.fix_amount_a,n.amount_b,n.slippage,n.coinTypeB,t,!1)):(r={targetCoin:o,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},a={targetCoin:s,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"}),i=Z.buildAddLiquidityFixTokenArgs(i,e,t,n,r,a),i}static buildAddLiquidityFixTokenCoinInput(e,t,n,i,o,s,r=!0){return t?Z.buildCoinForAmountInterval(e,s,{amountSecond:BigInt(Hp(n,i)),amountFirst:BigInt(n)},o,r):Z.buildCoinForAmount(e,s,BigInt(n),o,r)}static fixAddLiquidityFixTokenParams(e,t,n){const i=e.fix_amount_a?e.amount_a:e.amount_b,o=pt.estLiquidityAndcoinAmountFromOneAmounts(Number(e.tick_lower),Number(e.tick_upper),new g(i),e.fix_amount_a,!0,t,n);return e.amount_a=e.fix_amount_a?e.amount_a:o.tokenMaxA.toNumber(),e.amount_b=e.fix_amount_a?o.tokenMaxB.toNumber():e.amount_b,e}static buildAddLiquidityFixTokenArgs(e,t,n,i,o,s){const r=[i.coinTypeA,i.coinTypeB],a=i.is_open?"open_position_with_liquidity_by_fix_coin":"add_liquidity_by_fix_coin",{clmm_pool:c,integrate:d}=t.sdkOptions;i.is_open||(e=Z.createCollectRewarderAndFeeParams(t,e,i,n,o.remainCoins,s.remainCoins));const l=I(c),f=i.is_open?[e.object(l.global_config_id),e.object(i.pool_id),e.pure.u32(Number(vt(BigInt(i.tick_lower)).toString())),e.pure.u32(Number(vt(BigInt(i.tick_upper)).toString())),o.targetCoin,s.targetCoin,e.pure.u64(i.amount_a),e.pure.u64(i.amount_b),e.pure.bool(i.fix_amount_a),e.object(q)]:[e.object(l.global_config_id),e.object(i.pool_id),e.object(i.pos_id),o.targetCoin,s.targetCoin,e.pure.u64(i.amount_a),e.pure.u64(i.amount_b),e.pure.bool(i.fix_amount_a),e.object(q)];return e.moveCall({target:`${d.published_at}::${In}::${a}`,typeArguments:r,arguments:f}),e}static async buildSwapTransactionForGas(e,t,n,i){let o=Z.buildSwapTransaction(e,t,n);o.setSender(e.senderAddress);const s=await Z.adjustTransactionForGas(e,ce.getCoinAssets(t.a2b?t.coinTypeA:t.coinTypeB,n),BigInt(t.by_amount_in?t.amount:t.amount_limit),o),{fixAmount:r,newTx:a}=s;if(a!==void 0){a.setSender(e.senderAddress),t.by_amount_in?t.amount=r.toString():t.amount_limit=r.toString(),t=await Z.fixSwapParams(e,t,i);const c=Z.buildCoinForAmount(o,n,t.a2b?BigInt(t.by_amount_in?t.amount:t.amount_limit):BigInt(0),t.coinTypeA),d=Z.buildCoinForAmount(o,n,t.a2b?BigInt(0):BigInt(t.by_amount_in?t.amount:t.amount_limit),t.coinTypeB);o=Z.buildSwapTransactionArgs(a,t,e.sdkOptions,c,d)}return o}static buildSwapTransaction(e,t,n){let i=new R;i.setSender(e.senderAddress);const o=Z.buildCoinForAmount(i,n,t.a2b?BigInt(t.by_amount_in?t.amount:t.amount_limit):BigInt(0),t.coinTypeA,!1),s=Z.buildCoinForAmount(i,n,t.a2b?BigInt(0):BigInt(t.by_amount_in?t.amount:t.amount_limit),t.coinTypeB,!1);return i=Z.buildSwapTransactionArgs(i,t,e.sdkOptions,o,s),i}static buildSwapTransactionArgs(e,t,n,i,o){const{clmm_pool:s,integrate:r}=n,a=en.getDefaultSqrtPriceLimit(t.a2b),c=[t.coinTypeA,t.coinTypeB],{global_config_id:d}=I(s);if(d===void 0)throw Error("clmm.config.global_config_id is undefined");const l=t.swap_partner!==void 0,f=l?t.a2b?"swap_a2b_with_partner":"swap_b2a_with_partner":t.a2b?"swap_a2b":"swap_b2a",_=l?[e.object(d),e.object(t.pool_id),e.object(t.swap_partner),i.targetCoin,o.targetCoin,e.pure.bool(t.by_amount_in),e.pure.u64(t.amount),e.pure.u64(t.amount_limit),e.pure.u128(a.toString()),e.object(q)]:[e.object(d),e.object(t.pool_id),i.targetCoin,o.targetCoin,e.pure.bool(t.by_amount_in),e.pure.u64(t.amount),e.pure.u64(t.amount_limit),e.pure.u128(a.toString()),e.object(q)];return e.moveCall({target:`${r.published_at}::${In}::${f}`,typeArguments:c,arguments:_}),e}static async buildSwapTransactionWithoutTransferCoinsForGas(e,t,n,i){let{tx:o,coinABs:s}=Z.buildSwapTransactionWithoutTransferCoins(e,t,n);o.setSender(e.senderAddress);const r=await Z.adjustTransactionForGas(e,ce.getCoinAssets(t.a2b?t.coinTypeA:t.coinTypeB,n),BigInt(t.by_amount_in?t.amount:t.amount_limit),o),{fixAmount:a,newTx:c}=r;if(c!==void 0){c.setSender(e.senderAddress),t.by_amount_in?t.amount=a.toString():t.amount_limit=a.toString(),t=await Z.fixSwapParams(e,t,i);const d=Z.buildCoinForAmount(o,n,t.a2b?BigInt(t.by_amount_in?t.amount:t.amount_limit):BigInt(0),t.coinTypeA,!1,!0),l=Z.buildCoinForAmount(o,n,t.a2b?BigInt(0):BigInt(t.by_amount_in?t.amount:t.amount_limit),t.coinTypeB,!1,!0),f=Z.buildSwapTransactionWithoutTransferCoinArgs(e,c,t,e.sdkOptions,d,l);o=f.tx,s=f.txRes}return{tx:o,coinABs:s}}static buildSwapTransactionWithoutTransferCoins(e,t,n){const i=new R;i.setSender(e.senderAddress);const o=Z.buildCoinForAmount(i,n,t.a2b?BigInt(t.by_amount_in?t.amount:t.amount_limit):BigInt(0),t.coinTypeA,!1,!0),s=Z.buildCoinForAmount(i,n,t.a2b?BigInt(0):BigInt(t.by_amount_in?t.amount:t.amount_limit),t.coinTypeB,!1,!0),r=Z.buildSwapTransactionWithoutTransferCoinArgs(e,i,t,e.sdkOptions,o,s);return{tx:r.tx,coinABs:r.txRes}}static buildSwapTransactionWithoutTransferCoinArgs(e,t,n,i,o,s){const{clmm_pool:r,integrate:a}=i,c=en.getDefaultSqrtPriceLimit(n.a2b),{global_config_id:d}=I(r);if(d===void 0)throw Error("clmm.config.global_config_id is undefined");const l=n.swap_partner!==void 0,f=l?"swap_with_partner":"swap",_=l?rs:Rn,b=l?[t.object(d),t.object(n.pool_id),t.object(n.swap_partner),o.targetCoin,s.targetCoin,t.pure.bool(n.a2b),t.pure.bool(n.by_amount_in),t.pure.u64(n.amount),t.pure.u128(c.toString()),t.pure.bool(!1),t.object(q)]:[t.object(d),t.object(n.pool_id),o.targetCoin,s.targetCoin,t.pure.bool(n.a2b),t.pure.bool(n.by_amount_in),t.pure.u64(n.amount),t.pure.u128(c.toString()),t.pure.bool(!1),t.object(q)],y=[n.coinTypeA,n.coinTypeB],A=t.moveCall({target:`${a.published_at}::${_}::${f}`,typeArguments:y,arguments:b});if(n.by_amount_in){const O=n.a2b?n.coinTypeB:n.coinTypeA,j=n.a2b?A[1]:A[0],M=Number(n.amount_limit);this.checkCoinThreshold(e,n.by_amount_in,t,j,M,O)}return{tx:t,txRes:A}}static async fixSwapParams(e,t,n){const{currentPool:i}=n;try{const o=await e.Swap.preswap({decimalsA:n.decimalsA,decimalsB:n.decimalsB,a2b:t.a2b,byAmountIn:t.by_amount_in,amount:t.amount,pool:i,currentSqrtPrice:i.current_sqrt_price,coinTypeA:i.coinTypeA,coinTypeB:i.coinTypeB}),s=n.byAmountIn?o.estimatedAmountOut:o.estimatedAmountIn,r=qs(s,n.slippage,!n.byAmountIn);t.amount_limit=r.toString()}catch(o){console.log("fixSwapParams",o)}return t}static async syncBuildCoinInputForAmount(e,t,n,i,o=!0){if(e.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const s=await e.getOwnerCoinAssets(e.senderAddress,i);return Z.buildCoinForAmount(t,s,n,i,o).targetCoin}static buildCoinForAmount(e,t,n,i,o=!0,s=!1){const r=ce.getCoinAssets(i,t);if(n===BigInt(0)&&r.length===0)return Z.buildZeroValueCoin(t,e,i,o);const a=ce.calculateTotalBalance(r);if(a<n)throw new F(`The amount(${a}) is Insufficient balance for ${i} , expect ${n} `,"InsufficientBalance");return Z.buildCoin(e,t,r,n,i,o,s)}static buildCoin(e,t,n,i,o,s=!0,r=!1){if(ce.isSuiCoin(o)){if(s){const M=e.splitCoins(e.gas,[e.pure.u64(i)]);return{targetCoin:e.makeMoveVec({elements:[M]}),remainCoins:t,tragetCoinAmount:i.toString(),isMintZeroCoin:!1,originalSplitedCoin:e.gas}}if(i===0n&&n.length>1){const M=ce.selectCoinObjectIdGreaterThanOrEqual(n,i);return{targetCoin:e.object(M.objectArray[0]),remainCoins:M.remainCoins,tragetCoinAmount:M.amountArray[0],isMintZeroCoin:!1}}const O=ce.selectCoinObjectIdGreaterThanOrEqual(n,i);return{targetCoin:e.splitCoins(e.gas,[e.pure.u64(i)]),remainCoins:O.remainCoins,tragetCoinAmount:i.toString(),isMintZeroCoin:!1,originalSplitedCoin:e.gas}}const a=ce.selectCoinObjectIdGreaterThanOrEqual(n,i),c=a.amountArray.reduce((O,j)=>Number(O)+Number(j),0).toString(),d=a.objectArray;if(s)return{targetCoin:e.makeMoveVec({elements:d.map(O=>e.object(O))}),remainCoins:a.remainCoins,tragetCoinAmount:a.amountArray.reduce((O,j)=>Number(O)+Number(j),0).toString(),isMintZeroCoin:!1};const[l,...f]=d,_=e.object(l);let b=_,y=a.amountArray.reduce((O,j)=>Number(O)+Number(j),0).toString(),A;return f.length>0&&e.mergeCoins(_,f.map(O=>e.object(O))),r&&Number(c)>Number(i)&&(b=e.splitCoins(_,[e.pure.u64(i)]),y=i.toString(),A=_),{targetCoin:b,remainCoins:a.remainCoins,originalSplitedCoin:A,tragetCoinAmount:y,isMintZeroCoin:!1}}static buildZeroValueCoin(e,t,n,i=!0){const o=Z.callMintZeroValueCoin(t,n);let s;return i?s=t.makeMoveVec({elements:[o]}):s=o,{targetCoin:s,remainCoins:e,isMintZeroCoin:!0,tragetCoinAmount:"0"}}static buildCoinForAmountInterval(e,t,n,i,o=!0){const s=ce.getCoinAssets(i,t);if(n.amountFirst===BigInt(0))return s.length>0?Z.buildCoin(e,[...t],[...s],n.amountFirst,i,o):Z.buildZeroValueCoin(t,e,i,o);const r=ce.calculateTotalBalance(s);if(r>=n.amountFirst)return Z.buildCoin(e,[...t],[...s],n.amountFirst,i,o);if(r<n.amountSecond)throw new F(`The amount(${r}) is Insufficient balance for ${i} , expect ${n.amountSecond} `,"InsufficientBalance");return Z.buildCoin(e,[...t],[...s],n.amountSecond,i,o)}static async buildRouterSwapTransaction(e,t,n,i,o){let s=new R;return t.paths.length>1&&(t.partner=""),s=await this.buildRouterBasePathTx(e,t,n,i,s,o),s}static async buildRouterBasePathTx(e,t,n,i,o,s){const r=t.paths.filter(B=>B&&B.poolAddress),a=Number(r.reduce((B,$)=>B.add($.amountIn),H).toString()),c=Number(r.reduce((B,$)=>B.add($.amountOut),H).toString()),d=Math.round(n?Number(c.toString())*(1-t.priceSlippagePoint):Number(a.toString())*(1+t.priceSlippagePoint)),l=t.paths[0].coinType[0],f=t.paths[0].coinType[t.paths[0].coinType.length-1],_=Z.buildCoinForAmount(o,i,BigInt(n?a:d),l,!1,!0),b=_.originalSplitedCoin!==void 0,y=Z.buildCoinForAmount(o,i,0n,f,!1),A=await this.buildRouterBasePathReturnCoins(e,t,n,_,y,o),O=[],{toCoin:j,fromCoin:M}=A;if(o=A.tx,y.isMintZeroCoin?O.push({coinType:f,coin:j}):y.originalSplitedCoin!==void 0?o.mergeCoins(y.originalSplitedCoin,[j]):o.mergeCoins(y.targetCoin,[j]),b){const B=_==null?void 0:_.originalSplitedCoin;o.mergeCoins(B,[M])}else O.push({coinType:l,coin:M});for(let B=0;B<O.length;B++)this.buildTransferCoin(e,o,O[B].coin,O[B].coinType,s);return o}static async buildRouterBasePathReturnCoins(e,t,n,i,o,s){const{clmm_pool:r,integrate:a}=e.sdkOptions,c=I(r).global_config_id,d=t.paths.filter(B=>B&&B.poolAddress),l=Number(d.reduce((B,$)=>B.add($.amountIn),H).toString()),f=Number(d.reduce((B,$)=>B.add($.amountOut),H).toString()),_=Math.round(n?Number(f.toString())*(1-t.priceSlippagePoint):Number(l.toString())*(1+t.priceSlippagePoint)),b=t.paths[0].coinType[0],y=t.paths[0].coinType[t.paths[0].coinType.length-1];let A=i.targetCoin,O;o.isMintZeroCoin||o.originalSplitedCoin!==void 0?O=o.targetCoin:O=Z.callMintZeroValueCoin(s,y);const j=t.partner==="",M=j?Rn:rs;for(const B of d)if(B.poolAddress.length===1){const $=B.a2b[0],J={amount:Number(B.amountIn.toString()),amountLimit:_,poolCoinA:B.a2b[0]?b:y,poolCoinB:B.a2b[0]?y:b},z=j?"swap":"swap_with_partner",re=$?A:O,ge=$?O:A,mt=n?B.amountIn.toString():B.amountOut.toString(),Y=en.getDefaultSqrtPriceLimit($).toString(),W=j?[s.object(c),s.object(B.poolAddress[0]),re,ge,s.pure.bool($),s.pure.bool(n),s.pure.u64(mt),s.pure.u128(Y),s.pure.bool(!1),s.object(q)]:[s.object(c),s.object(B.poolAddress[0]),s.object(t.partner),re,ge,s.pure.bool($),s.pure.bool(n),s.pure.u64(mt),s.pure.u128(Y),s.pure.bool(!1),s.object(q)],ue=[J.poolCoinA,J.poolCoinB],S=s.moveCall({target:`${e.sdkOptions.integrate.published_at}::${M}::${z}`,typeArguments:ue,arguments:W});A=$?S[0]:S[1],O=$?S[1]:S[0]}else{const $=n?B.amountIn:B.rawAmountLimit[0],J=n?0:B.amountOut;let z="";B.a2b[0]?B.a2b[1]?z="swap_ab_bc":z="swap_ab_cb":B.a2b[1]?z="swap_ba_bc":z="swap_ba_cb",j||(z=`${z}_with_partner`);const re=en.getDefaultSqrtPriceLimit(B.a2b[0]),ge=en.getDefaultSqrtPriceLimit(B.a2b[1]),mt=j?[s.object(c),s.object(B.poolAddress[0]),s.object(B.poolAddress[1]),A,O,s.pure.bool(n),s.pure.u64($.toString()),s.pure.u64(J.toString()),s.pure.u128(re.toString()),s.pure.u128(ge.toString()),s.object(q)]:[s.object(c),s.object(B.poolAddress[0]),s.object(B.poolAddress[1]),s.object(t.partner),A,O,s.pure.bool(n),s.pure.u64($.toString()),s.pure.u64(J.toString()),s.pure.u128(re.toString()),s.pure.u128(ge.toString()),s.object(q)],Y=[B.coinType[0],B.coinType[1],B.coinType[2]],W=s.moveCall({target:`${a.published_at}::${M}::${z}`,typeArguments:Y,arguments:mt});A=W[0],O=W[1]}return this.checkCoinThreshold(e,n,s,O,_,y),{fromCoin:A,toCoin:O,tx:s}}static async buildAggregatorSwapReturnCoins(e,t,n,i,o,s,r,a){if(a==null){if(e.senderAddress.length===0)throw Error("recipient and this config sdk senderAddress all not set");a=e.senderAddress}t.splitPaths.length>1&&(o="");let c,d;const l=t.splitPaths.some(f=>f.basePaths.some(_=>_.label==="Deepbook"));if((!t.byAmountIn||t.splitPaths.length===1)&&!l){const f=[];for(const y of t.splitPaths){const A=[],O=[],j=[],M=[];for(let $=0;$<y.basePaths.length;$+=1){const J=y.basePaths[$];A.push(J.direction),O.push(J.poolAddress),j.push(new g(J.inputAmount.toString())),$===0?M.push(J.fromCoin,J.toCoin):M.push(J.toCoin)}const B={amountIn:new g(y.inputAmount.toString()),amountOut:new g(y.outputAmount.toString()),poolAddress:O,a2b:A,rawAmountLimit:j,isExceed:!1,coinType:M};f.push(B)}const _={paths:f,partner:o,priceSlippagePoint:s},b=await this.buildRouterBasePathReturnCoins(e,_,t.byAmountIn,n,i,r);c=b.fromCoin,d=b.toCoin,r=b.tx}else{const f=Math.round(t.outputAmount*(1-s));c=n.targetCoin,i.isMintZeroCoin||i.originalSplitedCoin!==void 0?d=i.targetCoin:d=Z.callMintZeroValueCoin(r,t.toCoin);let _=!1,b;if(l){const[y,A]=ba.createAccountCap(a,e.sdkOptions,r);r=A,b=y,_=!0}for(let y=0;y<t.splitPaths.length;y+=1){const A=t.splitPaths[y];let O;for(let j=0;j<A.basePaths.length;j+=1){const M=A.basePaths[j];if(M.label==="Deepbook")if(j===0)if(A.basePaths.length===1){const B=this.buildDeepbookBasePathTx(e,M,r,b,c,d,!1);c=B.from,d=B.to}else{O=Z.callMintZeroValueCoin(r,M.toCoin);const B=this.buildDeepbookBasePathTx(e,M,r,b,c,O,!1);c=B.from,O=B.to}else{const B=this.buildDeepbookBasePathTx(e,M,r,b,O,d,!0);O=B.from,d=B.to}if(M.label==="Cetus")if(j===0)if(A.basePaths.length===1){const B=this.buildClmmBasePathTx(e,M,r,t.byAmountIn,c,d,!1,o);c=B.from,d=B.to}else{O=Z.callMintZeroValueCoin(r,M.toCoin);const B=this.buildClmmBasePathTx(e,M,r,t.byAmountIn,c,O,!1,o);c=B.from,O=B.to}else{const B=this.buildClmmBasePathTx(e,M,r,t.byAmountIn,O,d,!0,o);O=B.from,d=B.to,r.moveCall({target:`${e.sdkOptions.integrate.published_at}::${fa}::send_coin`,typeArguments:[M.fromCoin],arguments:[O,r.pure.address(a)]})}}}this.checkCoinThreshold(e,t.byAmountIn,r,d,f,t.toCoin),_&&(r=ba.deleteAccountCapByObject(b,e.sdkOptions,r))}return{fromCoin:c,toCoin:d,tx:r}}static async buildAggregatorSwapTransaction(e,t,n,i,o,s){let r=new R;const a=t.byAmountIn?Math.round(t.outputAmount*(1-o)):Math.round(t.inputAmount*(1+o)),c=Z.buildCoinForAmount(r,n,t.byAmountIn?BigInt(t.inputAmount):BigInt(a),t.fromCoin,!1,!0),d=c.originalSplitedCoin!=null,l=Z.buildCoinForAmount(r,n,0n,t.toCoin,!1),f=await this.buildAggregatorSwapReturnCoins(e,t,c,l,i,o,r,s),{fromCoin:_,toCoin:b}=f;r=f.tx;const y=[];if(l.isMintZeroCoin?y.push({coinType:t.toCoin,coin:b}):l.originalSplitedCoin!=null?r.mergeCoins(l.originalSplitedCoin,[b]):r.mergeCoins(l.targetCoin,[b]),d){const A=c.originalSplitedCoin;r.mergeCoins(A,[_])}else y.push({coinType:t.fromCoin,coin:_});for(let A=0;A<y.length;A++)this.buildTransferCoin(e,r,y[A].coin,y[A].coinType,s);return r}static checkCoinThreshold(e,t,n,i,o,s){t&&n.moveCall({target:`${e.sdkOptions.integrate.published_at}::${Rn}::check_coin_threshold`,typeArguments:[s],arguments:[i,n.pure.u64(o)]})}static buildDeepbookBasePathTx(e,t,n,i,o,s,r){const a=t.direction?o:s,c=t.direction?s:o,d=[n.object(t.poolAddress),i,n.pure.u64(t.inputAmount),n.pure.u64(0),n.pure.bool(t.direction),a,c,n.pure.bool(r),n.object(q)],l=t.direction?[t.fromCoin,t.toCoin]:[t.toCoin,t.fromCoin],f=n.moveCall({target:`${e.sdkOptions.deepbook_endpoint_v2.published_at}::endpoints_v2::swap`,typeArguments:l,arguments:d});return o=t.direction?f[0]:f[1],s=t.direction?f[1]:f[0],{from:o,to:s,tx:n}}static buildClmmBasePathTx(e,t,n,i,o,s,r,a){const{clmm_pool:c,integrate:d}=e.sdkOptions,l=I(c).global_config_id;let f=t.direction?o:s,_=t.direction?s:o;const b=a==="",y=b?Rn:rs,A=b?"swap":"swap_with_partner",O=i?t.inputAmount.toString():t.outputAmount.toString(),j=en.getDefaultSqrtPriceLimit(t.direction),M=b?[n.object(l),n.object(t.poolAddress),f,_,n.pure.bool(t.direction),n.pure.bool(i),n.pure.u64(O),n.pure.u128(j.toString()),n.pure.bool(r),n.object(q)]:[n.object(l),n.object(t.poolAddress),n.object(a),f,_,n.pure.bool(t.direction),n.pure.bool(i),n.pure.u64(O),n.pure.u128(j.toString()),n.pure.bool(r),n.object(q)],B=t.direction?[t.fromCoin,t.toCoin]:[t.toCoin,t.fromCoin],$=n.moveCall({target:`${d.published_at}::${y}::${A}`,typeArguments:B,arguments:M});return f=$[0],_=$[1],o=t.direction?f:_,s=t.direction?_:f,{from:o,to:s,tx:n}}static buildCoinTypePair(e,t){const n=[];if(e.length===2){const i=[];i.push(e[0],e[1]),n.push(i)}else{const i=[];i.push(e[0],e[e.length-1]),n.push(i);for(let o=1;o<e.length-1;o+=1){if(t[o-1]===0)continue;const s=[];s.push(e[0],e[o],e[e.length-1]),n.push(s)}}return n}static buildTransferCoinToSender(e,t,n,i){t.moveCall({target:`${e.sdkOptions.integrate.published_at}::${fa}::transfer_coin_to_sender`,typeArguments:[i],arguments:[n]})}static buildTransferCoin(e,t,n,i,o){o!=null?t.transferObjects([n],t.pure.address(o)):Z.buildTransferCoinToSender(e,t,n,i)}},X=Z;lp(X,"callMintZeroValueCoin",(e,t)=>e.moveCall({target:"0x2::coin::zero",typeArguments:[t]}));function ht(e){return!(!e.startsWith("0x")||e.length!==66)}var Ln=new g(1e9),ba=class{static createAccountCap(e,t,n,i=!1){if(e.length===0)throw Error("this config sdk senderAddress is empty");const{deepbook:o}=t,[s]=n.moveCall({target:`${o.published_at}::${_p}::create_account`,typeArguments:[],arguments:[]});return i&&n.transferObjects([s],n.pure.address(e)),[s,n]}static deleteAccountCap(e,t,n){const{deepbook:i}=t,o=[n.object(e)];return n.moveCall({target:`${i.published_at}::${as}::delete_account_cap`,typeArguments:[],arguments:o}),n}static deleteAccountCapByObject(e,t,n){const{deepbook:i}=t,o=[e];return n.moveCall({target:`${i.published_at}::${as}::delete_account_cap`,typeArguments:[],arguments:o}),n}static async getAccountCap(e,t=!0){const n=await e.fullClient.getOwnedObjectsByPage(e.senderAddress,{options:{showType:!0,showContent:!0,showDisplay:t,showOwner:!0},filter:{MoveModule:{package:e.sdkOptions.deepbook.package_id,module:as}}});return n.data.length===0?"":n.data[0].data.objectId}static async getPools(e){const t=e.sdkOptions.deepbook.package_id,n=[];try{(await e.fullClient.queryEventsByPage({MoveEventType:`${t}::clob_v2::PoolCreated`})).data.forEach(o=>{const s=o.parsedJson;s&&n.push({poolID:s.pool_id,tickSize:Number(s.tick_size),lotSize:Number(s.lot_size),takerFeeRate:Number(s.taker_fee_rate),makerRebateRate:Number(s.maker_rebate_rate),baseAsset:s.base_asset.name,quoteAsset:s.quote_asset.name})})}catch(i){console.log("getPoolImmutables",i)}return n}static async getPoolAsks(e,t,n,i){var _;const{simulationAccount:o}=e.sdkOptions,{deepbook_endpoint_v2:s}=e.sdkOptions,r=new R,a=[],c=[n,i],d=[r.object(t),r.pure.u64("0"),r.pure.u64("999999999999"),r.object(q)];r.moveCall({target:`${s.published_at}::endpoints_v2::get_level2_book_status_ask_side`,arguments:d,typeArguments:c});const f=(_=(await e.fullClient.devInspectTransactionBlock({transactionBlock:r,sender:o.address})).events)==null?void 0:_.filter(b=>D(b.type).name==="BookStatus");if(f.length===0)return a;for(let b=0;b<f[0].parsedJson.depths.length;b++){const y=f[0].parsedJson.price[b],A=f[0].parsedJson.depths[b],O={price:parseInt(y,10),quantity:parseInt(A,10)};a.push(O)}return a}static async getPoolBids(e,t,n,i){var _;const{simulationAccount:o}=e.sdkOptions,{deepbook_endpoint_v2:s}=e.sdkOptions,r=new R,a=[],c=[n,i],d=[r.object(t),r.pure.u64("0"),r.pure.u64("999999999999"),r.object(q)];r.moveCall({target:`${s.published_at}::endpoints_v2::get_level2_book_status_bid_side`,arguments:d,typeArguments:c});const f=(_=(await e.fullClient.devInspectTransactionBlock({transactionBlock:r,sender:o.address})).events)==null?void 0:_.filter(b=>D(b.type).name==="BookStatus");if(f.length===0)return a;for(let b=0;b<f[0].parsedJson.depths.length;b++){const y=f[0].parsedJson.price[b],A=f[0].parsedJson.depths[b],O={price:parseInt(y,10),quantity:parseInt(A,10)};a.push(O)}return a}static async preSwap(e,t,n,i){let o=!1,s=H,r=new g(i),a=H;const c=new g(i);if(n){let d=await this.getPoolBids(e,t.poolID,t.baseAsset,t.quoteAsset);d===null&&(o=!0),d=d.sort((l,f)=>f.price-l.price);for(let l=0;l<d.length;l+=1){const f=new g(d[l].quantity),_=new g(d[l].price),b=f.mul(new g(_)).mul(new g(t.takerFeeRate)).div(Ln).div(Ln);if(r.gt(f))r=r.sub(f),s=s.add(f.mul(_).div(Ln).sub(b)),a=a.add(b);else{const y=r.mul(new g(d[l].price)).div(Ln),A=y.mul(new g(t.takerFeeRate)).div(Ln);s=s.add(y.sub(A)),r=r.sub(r),a=a.add(A)}if(r.eq(H))break}}else{const d=await this.getPoolAsks(e,t.poolID,t.baseAsset,t.quoteAsset);d===null&&(o=!0);for(let l=0;l<d.length;l+=1){const f=new g(d[l].price).mul(new g(d[l].quantity)).div(new g(1e9)),_=f.mul(new g(t.takerFeeRate)).div(Ln),b=f.add(_);if(r.gt(f))s=s.add(new g(d[l].quantity)),r=r.sub(b),a=a.add(_);else{const y=new g(d[l].quantity).div(new g(t.lotSize)),A=b.div(y),O=r.div(A);s=s.add(O.muln(t.lotSize)),r=r.sub(O.mul(A)),a=a.add(O.div(y).mul(_))}if(r.eq(H))break}}return{poolAddress:t.poolID,estimatedAmountIn:c.sub(r).toNumber(),estimatedAmountOut:s.toNumber(),estimatedFeeAmount:a,isExceed:o,amount:Number(i),aToB:n,byAmountIn:!0}}static async simulateSwap(e,t,n,i,o,s){var J;const{deepbook_endpoint_v2:r}=e.sdkOptions;let a=new R;const c=await this.getAccountCap(e);let d;if(c===""){const z=this.createAccountCap(e.senderAddress,e.sdkOptions,a),re=z[0];a=z[1],d=re}else d=a.object(c);const l=await e.getOwnerCoinAssets(e.senderAddress),f=X.buildCoinForAmount(a,l,BigInt(s),n,!1),_=f==null?void 0:f.targetCoin,b=X.buildCoinForAmount(a,l,BigInt(s),i,!1),y=b==null?void 0:b.targetCoin,A=[n,i],O=[a.object(t),d,a.pure.u64(s),a.pure.u64(0),a.pure.bool(o),_,y,a.object(q)];a.moveCall({target:`${r.published_at}::${bp}::swap`,arguments:O,typeArguments:A});const{simulationAccount:j}=e.sdkOptions,B=(J=(await e.fullClient.devInspectTransactionBlock({transactionBlock:a,sender:j.address})).events)==null?void 0:J.filter(z=>D(z.type).name==="DeepbookSwapEvent");if(B.length===0)return null;const $=B[0].parsedJson;return{poolAddress:$.pool,estimatedAmountIn:$.amount_in,estimatedAmountOut:$.amount_out,aToB:$.atob}}},Jp=class{constructor(e){U(this,"_sdk");U(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPositionList(e,t="all"){const n={data:[],hasNextPage:!0},i=await this._sdk.fullClient.getDynamicFieldsByPage(e,t);n.hasNextPage=i.hasNextPage,n.nextCursor=i.nextCursor;const o=i.data.map(r=>{if(r.error!=null)throw new F(`when getPositionList get position objects error: ${r.error}, please check the rpc, contracts address config and position id.`,"InvalidConfig");return r.name.value}),s=await this._sdk.Position.getSipmlePositionList(o);return n.data=s,n}async getPoolImmutables(e=[],t=0,n=100,i=!1){const{package_id:o}=this._sdk.sdkOptions.clmm_pool,s=`${o}_getInitPoolEvent`,r=this.getCache(s,i),a=[],c=[];if(r!==void 0&&a.push(...r),a.length===0)try{(await this._sdk.fullClient.queryEventsByPage({MoveEventType:`${o}::factory::CreatePoolEvent`})).data.forEach(f=>{const _=f.parsedJson;_&&a.push({poolAddress:_.pool_id,tickSpacing:_.tick_spacing,coinTypeA:D(_.coin_type_a).full_address,coinTypeB:D(_.coin_type_b).full_address})}),this.updateCache(s,a,V)}catch(l){console.log("getPoolImmutables",l)}const d=e.length>0;for(let l=0;l<a.length;l+=1){const f=a[l];d&&!e.includes(f.poolAddress)||!d&&(l<t||l>=t+n)||c.push(f)}return c}async getPools(e=[],t=0,n=100){var r,a,c;const i=[];let o=[];e.length>0?o=[...e]:(await this.getPoolImmutables([],t,n,!1)).forEach(l=>o.push(l.poolAddress));const s=await this._sdk.fullClient.batchGetObjects(o,{showContent:!0,showType:!0});for(const d of s){if(d.error!=null||((a=(r=d.data)==null?void 0:r.content)==null?void 0:a.dataType)!=="moveObject")throw new F(`getPools error code: ${((c=d.error)==null?void 0:c.code)??"unknown error"}, please check config and object ids`,"InvalidPoolObject");const l=ds(d);i.push(l);const f=`${l.poolAddress}_getPoolObject`;this.updateCache(f,l,V)}return i}async getPoolImmutablesWithPage(e="all",t=!1){const{package_id:n}=this._sdk.sdkOptions.clmm_pool,i=[],o={data:[],hasNextPage:!1},s=e==="all",r=`${n}_getPoolImmutables`;if(s){const a=this.getCache(r,t);a&&i.push(...a)}if(i.length===0)try{const a=`${n}::factory::CreatePoolEvent`,c=await this._sdk.fullClient.queryEventsByPage({MoveEventType:a},e);o.hasNextPage=c.hasNextPage,o.nextCursor=c.nextCursor,c.data.forEach(d=>{const l=d.parsedJson;if(l){const f={poolAddress:l.pool_id,tickSpacing:l.tick_spacing,coinTypeA:D(l.coin_type_a).full_address,coinTypeB:D(l.coin_type_b).full_address};i.push(f)}})}catch(a){console.log("getPoolImmutables",a)}return o.data=i,s&&this.updateCache(`${n}_getPoolImmutables`,i,V),o}async getPoolsWithPage(e=[],t="all",n=!1){var r,a,c;const i=[];let o=[];e.length>0?o=[...e]:(await this.getPoolImmutablesWithPage(t,n)).data.forEach(l=>o.push(l.poolAddress));const s=await this._sdk.fullClient.batchGetObjects(o,{showContent:!0,showType:!0});for(const d of s){if(d.error!=null||((a=(r=d.data)==null?void 0:r.content)==null?void 0:a.dataType)!=="moveObject")throw new F(`getPoolWithPages error code: ${((c=d.error)==null?void 0:c.code)??"unknown error"}, please check config and object ids`,"InvalidPoolObject");const l=ds(d);i.push(l);const f=`${l.poolAddress}_getPoolObject`;this.updateCache(f,l,V)}return i}async getPool(e,t=!0){var r,a,c;const n=`${e}_getPoolObject`,i=this.getCache(n,t);if(i!==void 0)return i;const o=await this._sdk.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});if(o.error!=null||((a=(r=o.data)==null?void 0:r.content)==null?void 0:a.dataType)!=="moveObject")throw new F(`getPool error code: ${((c=o.error)==null?void 0:c.code)??"unknown error"}, please check config and object id`,"InvalidPoolObject");const s=ds(o);return this.updateCache(n,s),s}async creatPoolsTransactionPayload(e){for(const n of e)if(Rs(oe(n.coinTypeA),oe(n.coinTypeB))){const i=n.coinTypeB;n.coinTypeB=n.coinTypeA,n.coinTypeA=i}return await this.creatPool(e)}async creatPoolTransactionPayload(e){if(Rs(oe(e.coinTypeA),oe(e.coinTypeB))){const t=e.coinTypeB;e.coinTypeB=e.coinTypeA,e.coinTypeA=t}return"fix_amount_a"in e?await this.creatPoolAndAddLiquidity(e):await this.creatPool([e])}async getClmmConfigs(e=!1){const{package_id:t}=this._sdk.sdkOptions.clmm_pool,n=`${t}_getInitEvent`,i=this.getCache(n,e);if(i!==void 0)return i;const o=await this._sdk.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),s=Mi(o),r=(await this._sdk.fullClient.queryEventsByPage({Transaction:s})).data,a={pools_id:"",global_config_id:"",global_vault_id:"",admin_cap_id:""};return r.length>0&&(r.forEach(c=>{const d=c.parsedJson;if(c.type)switch(D(c.type).full_address){case`${t}::config::InitConfigEvent`:a.global_config_id=d.global_config_id,a.admin_cap_id=d.admin_cap_id;break;case`${t}::factory::InitFactoryEvent`:a.pools_id=d.pools_id;break;case`${t}::rewarder::RewarderInitEvent`:a.global_vault_id=d.global_vault_id;break;case`${t}::partner::InitPartnerEvent`:a.partners_id=d.partners_id;break}}),this.updateCache(n,a,V)),a}async getSuiTransactionResponse(e,t=!1){const n=`${e}_getSuiTransactionResponse`,i=this.getCache(n,t);if(i!==void 0)return i;let o;try{o=await this._sdk.fullClient.getTransactionBlock({digest:e,options:{showEvents:!0,showEffects:!0,showBalanceChanges:!0,showInput:!0,showObjectChanges:!0}})}catch{o=await this._sdk.fullClient.getTransactionBlock({digest:e,options:{showEvents:!0,showEffects:!0}})}return this.updateCache(n,o,V),o}async creatPool(e){const t=new R,{integrate:n,clmm_pool:i}=this.sdk.sdkOptions,o=I(i),s=o.global_config_id,r=o.pools_id;return e.forEach(a=>{const c=[t.object(s),t.object(r),t.pure.u32(a.tick_spacing),t.pure.u128(a.initialize_sqrt_price),t.pure.string(a.uri),t.object(q)];t.moveCall({target:`${n.published_at}::${gi}::create_pool`,typeArguments:[a.coinTypeA,a.coinTypeB],arguments:c})}),t}async creatPoolAndAddLiquidity(e){if(!ht(this._sdk.senderAddress))throw new F("this config sdk senderAddress is not set right","InvalidSendAddress");const t=new R,{integrate:n,clmm_pool:i}=this.sdk.sdkOptions,o=I(i),s=o.global_config_id,r=o.pools_id,a=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress),c=X.buildAddLiquidityFixTokenCoinInput(t,!e.fix_amount_a,e.amount_a,e.slippage,e.coinTypeA,a,!1),d=X.buildAddLiquidityFixTokenCoinInput(t,e.fix_amount_a,e.amount_b,e.slippage,e.coinTypeB,a,!1),l=[t.object(s),t.object(r),t.pure.u32(e.tick_spacing),t.pure.u128(e.initialize_sqrt_price),t.pure.string(e.uri),c.targetCoin,d.targetCoin,t.pure.u32(Number(vt(BigInt(e.tick_lower)).toString())),t.pure.u32(Number(vt(BigInt(e.tick_upper)).toString())),t.pure.u64(e.amount_a),t.pure.u64(e.amount_b),t.pure.bool(e.fix_amount_a),t.object(q)];return t.moveCall({target:`${n.published_at}::${In}::create_pool_with_liquidity`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:l}),t}async fetchTicks(e){let t=[],n=[];for(;;){const o=await this.getTicks({pool_id:e.pool_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,start:n,limit:512});if(t=[...t,...o],o.length<512)break;n=[o[o.length-1].index]}return t}async getTicks(e){var d;const{integrate:t,simulationAccount:n}=this.sdk.sdkOptions,i=[],o=[e.coinTypeA,e.coinTypeB],s=new R,r=s.makeMoveVec({elements:e.start.map(l=>s.pure.u32(l)),type:"u32"}),a=[s.object(e.pool_id),r,s.pure.u64(e.limit.toString())];if(s.moveCall({target:`${t.published_at}::${$t}::fetch_ticks`,arguments:a,typeArguments:o}),!ht(n.address))throw new F("this config simulationAccount is not set right","InvalidSimulateAccount");const c=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:s,sender:n.address});if(c.error!=null)throw new F(`getTicks error code: ${c.error??"unknown error"}, please check config and tick object ids`,"InvalidTickObjectId");return(d=c.events)==null||d.forEach(l=>{D(l.type).name==="FetchTicksResultEvent"&&l.parsedJson.ticks.forEach(f=>{i.push(Wp(f))})}),i}async fetchPositionRewardList(e){var r;const{integrate:t,simulationAccount:n}=this.sdk.sdkOptions,i=[];let o=[];const s=512;for(;;){const a=[e.coinTypeA,e.coinTypeB],c=new R,d=c.makeMoveVec({elements:o.map(b=>c.pure.address(b)),type:void 0}),l=[c.object(e.pool_id),d,c.pure.u64(s)];if(c.moveCall({target:`${t.published_at}::${$t}::fetch_positions`,arguments:l,typeArguments:a}),!ht(n.address))throw new F("this config simulationAccount is not set right","InvalidSimulateAccount");const f=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:c,sender:n.address});if(f.error!=null)throw new F(`fetch position reward error code: ${f.error??"unknown error"}, please check config and tick object ids`,"InvalidPositionRewardObject");const _=[];if((r=f==null?void 0:f.events)==null||r.forEach(b=>{D(b.type).name==="FetchPositionsEvent"&&b.parsedJson.positions.forEach(y=>{const A=ud(y);_.push(A)})}),i.push(..._),_.length<s)break;o=[_[_.length-1].pos_object_id]}return i}async fetchTicksByRpc(e){let t=[],n=null;const i=512;for(;;){const o=[],s=await this.sdk.fullClient.getDynamicFields({parentId:e,cursor:n,limit:i});if(n=s.nextCursor,s.data.forEach(r=>{D(r.objectType).module==="skip_list"&&o.push(r.objectId)}),t=[...t,...await this.getTicksByRpc(o)],n===null||s.data.length<i)break}return t}async getTicksByRpc(e){var i,o,s;const t=[],n=await this.sdk.fullClient.batchGetObjects(e,{showContent:!0,showType:!0});for(const r of n){if(r.error!=null||((o=(i=r.data)==null?void 0:i.content)==null?void 0:o.dataType)!=="moveObject")throw new F(`getTicksByRpc error code: ${((s=r.error)==null?void 0:s.code)??"unknown error"}, please check config and tick object ids`,"InvalidTickObjectId");const a=ls(r);a!=null&&t.push(a)}return t}async getTickDataByIndex(e,t){var o,s;const n={type:"u64",value:vt(BigInt(Sp(t).toString())).toString()},i=await this.sdk.fullClient.getDynamicFieldObject({parentId:e,name:n});if(i.error!=null||((s=(o=i.data)==null?void 0:o.content)==null?void 0:s.dataType)!=="moveObject")throw new F(`get tick by index: ${t} error: ${i.error}`,"InvalidTickIndex");return ls(i)}async getTickDataByObjectId(e){var n,i,o;const t=await this.sdk.fullClient.getObject({id:e,options:{showContent:!0}});if(t.error!=null||((i=(n=t.data)==null?void 0:n.content)==null?void 0:i.dataType)!=="moveObject")throw new F(`getTicksByRpc error code: ${((o=t.error)==null?void 0:o.code)??"unknown error"}, please check config and tick object ids`,"InvalidTickObjectId");return ls(t)}async getPartnerRefFeeAmount(e,t=!0){var c,d;const n=await this._sdk.fullClient.batchGetObjects([e],{showOwner:!0,showContent:!0,showDisplay:t,showType:!0});if(n[0].error!=null||((d=(c=n[0].data)==null?void 0:c.content)==null?void 0:d.dataType)!=="moveObject")throw new F(`get partner by object id: ${e} error: ${n[0].error}`,"NotFoundPartnerObject");const i=n[0].data.content.fields.balances,o=await this._sdk.fullClient.getDynamicFieldsByPage(i.fields.id.id),s=[];o.data.forEach(l=>{var f,_;if(l.error!=null||((_=(f=l.data)==null?void 0:f.content)==null?void 0:_.dataType)!=="moveObject")throw new F(`when getPartnerRefFeeAmount get partner object error: ${l.error}, please check the rpc, contracts address config and position id.`,"InvalidConfig");s.push(l.objectId)});const r=[];return(await this._sdk.fullClient.batchGetObjects(s,{showOwner:!0,showContent:!0,showDisplay:t,showType:!0})).forEach(l=>{var _,b;if(l.error!=null||((b=(_=l.data)==null?void 0:_.content)==null?void 0:b.dataType)!=="moveObject")throw new F(`get coin by object id: ${l.data.objectId} error: ${l.error}`,"InvalidParnterRefFeeFields");const f={coinAddress:l.data.content.fields.name,coinObjectId:l.data.objectId,balance:BigInt(l.data.content.fields.value)};r.push(f)}),r}async claimPartnerRefFeePayload(e,t,n){const i=new R,{clmm_pool:o}=this.sdk.sdkOptions,{global_config_id:s}=I(o),r=[n],a=[i.object(s),i.object(e),i.object(t)];return i.moveCall({target:`${o.published_at}::${hp}::claim_ref_fee`,arguments:a,typeArguments:r}),i}updateCache(e,t,n=Et){let i=this._cache[e];i?(i.overdueTime=pe(n),i.value=t):i=new St(t,pe(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e],i=n==null?void 0:n.isValid();if(!t&&i)return n.value;i||delete this._cache[e]}},Zp=class{constructor(e){U(this,"_sdk");U(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}buildPositionType(){return`${this._sdk.sdkOptions.clmm_pool.package_id}::position::Position`}async getPositionList(e,t=[],n=!0){const i=[],o=await this._sdk.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:n,showOwner:!0},filter:{Package:this._sdk.sdkOptions.clmm_pool.package_id}}),s=t.length>0;for(const r of o.data)if(D(r.data.type).full_address===this.buildPositionType()){const c=ei(r),d=`${c.pos_object_id}_getPositionList`;this.updateCache(d,c,V),s?t.includes(c.pool)&&i.push(c):i.push(c)}return i}async getPosition(e,t,n=!0,i=!0){let o=await this.getSimplePosition(t,i);return n&&(o=await this.updatePositionRewarders(e,o)),o}async getPositionById(e,t=!0,n=!0){const i=await this.getSimplePosition(e,n);if(t){const o=await this._sdk.Pool.getPool(i.pool,!1);return await this.updatePositionRewarders(o.position_manager.positions_handle,i)}return i}async getSimplePosition(e,t=!0){const n=`${e}_getPositionList`;let i=this.getSimplePositionByCache(e);if(i===void 0){const o=await this.sdk.fullClient.getObject({id:e,options:{showContent:!0,showType:!0,showDisplay:t,showOwner:!0}});i=ei(o),this.updateCache(n,i,V)}return i}getSimplePositionByCache(e){const t=`${e}_getPositionList`;return this.getCache(t)}async getSipmlePositionList(e,t=!0){const n=[],i=[];return e.forEach(o=>{const s=this.getSimplePositionByCache(o);s?n.push(s):i.push(o)}),i.length>0&&(await this._sdk.fullClient.batchGetObjects(i,{showOwner:!0,showContent:!0,showDisplay:t,showType:!0})).forEach(s=>{if(s.error==null){const r=ei(s);n.push(r);const a=`${r.pos_object_id}_getPositionList`;this.updateCache(a,r,V)}}),n}async updatePositionRewarders(e,t){const n=await this.getPositionRewarders(e,t.pos_object_id);return{...t,...n}}async getPositionRewarders(e,t){try{const n=await this._sdk.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),o=Q(n.data).value.fields.value;return ud(o)}catch(n){console.log(n);return}}async fetchPosFeeAmount(e){var c;const{clmm_pool:t,integrate:n,simulationAccount:i}=this.sdk.sdkOptions,o=new R;for(const d of e){const l=[d.coinTypeA,d.coinTypeB],f=[o.object(I(t).global_config_id),o.object(d.poolAddress),o.pure.address(d.positionId)];o.moveCall({target:`${n.published_at}::${$t}::fetch_position_fees`,arguments:f,typeArguments:l})}if(!ht(i.address))throw new F("this config simulationAccount is not set right","InvalidSimulateAccount");const s=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:o,sender:i.address});if(s.error!=null)throw new F(`fetch position fee error code: ${s.error??"unknown error"}, please check config and postion and pool object ids`,"InvalidPoolObject");const r=(c=s.events)==null?void 0:c.filter(d=>D(d.type).name==="FetchPositionFeesEvent");if(r.length===0)return[];const a=[];for(let d=0;d<r.length;d+=1){const{parsedJson:l}=r[d],f={feeOwedA:new g(l.fee_owned_a),feeOwedB:new g(l.fee_owned_b),position_id:l.position_id};a.push(f)}return a}async batchFetchPositionFees(e){const t=[];for(const i of e){const o=await this._sdk.Position.getPositionById(i,!1),s=await this._sdk.Pool.getPool(o.pool,!1);t.push({poolAddress:s.poolAddress,positionId:o.pos_object_id,coinTypeA:s.coinTypeA,coinTypeB:s.coinTypeB})}const n={};if(t.length>0){const i=await this.fetchPosFeeAmount(t);for(const o of i)n[o.position_id]=o;return n}return n}async createAddLiquidityFixTokenPayload(e,t,n,i,o){if(!ht(this._sdk.senderAddress))throw new F("this config sdk senderAddress is not set right","InvalidSendAddress");const s=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);if(t){const{isAdjustCoinA:r,isAdjustCoinB:a}=mo(e);if(e=e,e.fix_amount_a&&r||!e.fix_amount_a&&a)return n=await X.buildAddLiquidityFixTokenForGas(this._sdk,s,e,t,n,i,o),n}return X.buildAddLiquidityFixToken(this._sdk,s,e,n,i,o)}async createAddLiquidityPayload(e,t,n,i){const{integrate:o,clmm_pool:s}=this._sdk.sdkOptions;if(!ht(this._sdk.senderAddress))throw new F("this config sdk senderAddress is not set right","InvalidSendAddress");const r=vt(BigInt(e.tick_lower)).toString(),a=vt(BigInt(e.tick_upper)).toString(),c=[e.coinTypeA,e.coinTypeB];t=t||new R;const d=!fi(e.pos_id),l=BigInt(e.max_amount_a),f=BigInt(e.max_amount_b);let _,b;if(n==null||i==null){const y=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);_=X.buildCoinForAmount(t,y,l,e.coinTypeA,!1),b=X.buildCoinForAmount(t,y,f,e.coinTypeB,!1)}else _={targetCoin:n,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},b={targetCoin:i,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"};if(d)t.moveCall({target:`${o.published_at}::${In}::open_position_with_liquidity`,typeArguments:c,arguments:[t.object(I(s).global_config_id),t.object(e.pool_id),t.pure.u32(Number(r)),t.pure.u32(Number(a)),_.targetCoin,b.targetCoin,t.pure.u64(e.max_amount_a),t.pure.u64(e.max_amount_b),t.pure.u128(e.delta_liquidity),t.object(q)]});else{const y=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);t=X.createCollectRewarderAndFeeParams(this._sdk,t,e,y,_.remainCoins,b.remainCoins),t.moveCall({target:`${o.published_at}::${In}::add_liquidity`,typeArguments:c,arguments:[t.object(I(s).global_config_id),t.object(e.pool_id),t.object(e.pos_id),_.targetCoin,b.targetCoin,t.pure.u64(e.max_amount_a),t.pure.u64(e.max_amount_b),t.pure.u128(e.delta_liquidity),t.object(q)]})}return t}async removeLiquidityTransactionPayload(e,t){if(!ht(this._sdk.senderAddress))throw new F("this config sdk senderAddress is not set right","InvalidSendAddress");const{clmm_pool:n,integrate:i}=this.sdk.sdkOptions,o="remove_liquidity";t=t||new R;const s=[e.coinTypeA,e.coinTypeB],r=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);t=X.createCollectRewarderAndFeeParams(this._sdk,t,e,r);const a=[t.object(I(n).global_config_id),t.object(e.pool_id),t.object(e.pos_id),t.pure.u128(e.delta_liquidity),t.pure.u64(e.min_amount_a),t.pure.u64(e.min_amount_b),t.object(q)];return t.moveCall({target:`${i.published_at}::${gi}::${o}`,typeArguments:s,arguments:a}),t}async closePositionTransactionPayload(e,t){if(!ht(this._sdk.senderAddress))throw new F("this config sdk senderAddress is not set right","InvalidSendAddress");const{clmm_pool:n,integrate:i}=this.sdk.sdkOptions;t=t||new R;const o=[e.coinTypeA,e.coinTypeB],s=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);return t=X.createCollectRewarderAndFeeParams(this._sdk,t,e,s),t.moveCall({target:`${i.published_at}::${gi}::close_position`,typeArguments:o,arguments:[t.object(I(n).global_config_id),t.object(e.pool_id),t.object(e.pos_id),t.pure.u64(e.min_amount_a),t.pure.u64(e.min_amount_b),t.object(q)]}),t}openPositionTransactionPayload(e,t){const{clmm_pool:n,integrate:i}=this.sdk.sdkOptions;t=t||new R;const o=[e.coinTypeA,e.coinTypeB],s=vt(BigInt(e.tick_lower)).toString(),r=vt(BigInt(e.tick_upper)).toString(),a=[t.object(I(n).global_config_id),t.object(e.pool_id),t.pure.u32(Number(s)),t.pure.u32(Number(r))];return t.moveCall({target:`${i.published_at}::${gi}::open_position`,typeArguments:o,arguments:a}),t}async collectFeeTransactionPayload(e,t,n,i){if(!ht(this._sdk.senderAddress))throw new F("this config sdk senderAddress is not set right","InvalidSendAddress");const o=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress,null,!0);t=t||new R;const s=X.buildCoinForAmount(t,o,BigInt(0),e.coinTypeA,!1),r=X.buildCoinForAmount(t,o,BigInt(0),e.coinTypeB,!1),a=n??s.targetCoin,c=i??r.targetCoin;return this.createCollectFeePaylod(e,t,a,c),t}createCollectFeePaylod(e,t,n,i){const{clmm_pool:o,integrate:s}=this.sdk.sdkOptions,r=[e.coinTypeA,e.coinTypeB],a=[t.object(I(o).global_config_id),t.object(e.pool_id),t.object(e.pos_id),n,i];return t.moveCall({target:`${s.published_at}::${In}::collect_fee`,typeArguments:r,arguments:a}),t}createCollectFeeNoSendPaylod(e,t,n,i){const{clmm_pool:o,integrate:s}=this.sdk.sdkOptions,r=[e.coinTypeA,e.coinTypeB],a=[t.object(I(o).global_config_id),t.object(e.pool_id),t.object(e.pos_id),n,i];return t.moveCall({target:`${s.published_at}::${nd}::collect_fee`,typeArguments:r,arguments:a}),t}async calculateFee(e){const t=await this.collectFeeTransactionPayload(e);if(!ht(this._sdk.senderAddress))throw new F("this config sdk senderAddress is not set right","InvalidSendAddress");const n=await this._sdk.fullClient.devInspectTransactionBlock({transactionBlock:t,sender:this._sdk.senderAddress});for(const i of n.events)if(D(i.type).name==="CollectFeeEvent"){const o=i.parsedJson;return{feeOwedA:o.amount_a,feeOwedB:o.amount_b}}return{feeOwedA:"0",feeOwedB:"0"}}updateCache(e,t,n=Et){let i=this._cache[e];i?(i.overdueTime=pe(n),i.value=t):i=new St(t,pe(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e],i=n==null?void 0:n.isValid();if(!t&&i)return n.value;i||delete this._cache[e]}},Qp=class{constructor(e){U(this,"_sdk");U(this,"growthGlobal");this._sdk=e,this.growthGlobal=[H,H,H]}get sdk(){return this._sdk}async emissionsEveryDay(e){const n=(await this.sdk.Pool.getPool(e)).rewarder_infos;if(!n)return null;const i=[];for(const o of n){const s=se.fromX64(new g(o.emissions_per_second));i.push({emissions:Math.floor(s.toNumber()*60*60*24),coin_address:o.coinAddress})}return i}async updatePoolRewarder(e,t){const n=await this.sdk.Pool.getPool(e),i=n.rewarder_last_updated_time;if(n.rewarder_last_updated_time=t.toString(),Number(n.liquidity)===0||t.eq(new g(i)))return n;const o=t.div(new g(1e3)).sub(new g(i)).add(new g(15)),s=n.rewarder_infos;for(let r=0;r<s.length;r+=1){const a=s[r],c=se.checkMulDivFloor(o,new g(a.emissions_per_second),new g(n.liquidity),128);this.growthGlobal[r]=new g(a.growth_global).add(new g(c))}return n}async posRewardersAmount(e,t,n){const i=Date.parse(new Date().toString()),o=await this.updatePoolRewarder(e,new g(i)),s=await this.sdk.Position.getPositionRewarders(t,n);if(s===void 0)return[];const r=o.ticks_handle,a=await this.sdk.Pool.getTickDataByIndex(r,s.tick_lower_index),c=await this.sdk.Pool.getTickDataByIndex(r,s.tick_upper_index);return this.posRewardersAmountInternal(o,s,a,c)}async poolRewardersAmount(e,t){const n=Date.parse(new Date().toString()),i=await this.updatePoolRewarder(t,new g(n)),o=await this.sdk.Position.getPositionList(e,[t]),s=await this.getPoolLowerAndUpperTicks(i.ticks_handle,o),r=[H,H,H];for(let a=0;a<o.length;a+=1){const c=await this.posRewardersAmountInternal(i,o[a],s[0][a],s[1][a]);for(let d=0;d<3;d+=1)r[d]=r[d].add(c[d].amount_owed)}return r}posRewardersAmountInternal(e,t,n,i){const o=t.tick_lower_index,s=t.tick_upper_index,r=Xp(e,n,i,o,s,this.growthGlobal),a=[],c=[];if(r.length>0){let d=se.subUnderflowU128(r[0],new g(t.reward_growth_inside_0));d.gt(new g("3402823669209384634633745948738404"))&&(d=sn);const l=se.checkMulShiftRight(new g(t.liquidity),d,64,128);a.push(r[0]),c.push({amount_owed:new g(t.reward_amount_owed_0).add(l),coin_address:e.rewarder_infos[0].coinAddress})}if(r.length>1){let d=se.subUnderflowU128(r[1],new g(t.reward_growth_inside_1));d.gt(new g("3402823669209384634633745948738404"))&&(d=sn);const l=se.checkMulShiftRight(new g(t.liquidity),d,64,128);a.push(r[1]),c.push({amount_owed:new g(t.reward_amount_owed_1).add(l),coin_address:e.rewarder_infos[1].coinAddress})}if(r.length>2){let d=se.subUnderflowU128(r[2],new g(t.reward_growth_inside_2));d.gt(new g("3402823669209384634633745948738404"))&&(d=sn);const l=se.checkMulShiftRight(new g(t.liquidity),d,64,128);a.push(r[2]),c.push({amount_owed:new g(t.reward_amount_owed_2).add(l),coin_address:e.rewarder_infos[2].coinAddress})}return c}async batchFetchPositionRewarders(e){const t=[];for(const i of e){const o=await this._sdk.Position.getPositionById(i,!1),s=await this._sdk.Pool.getPool(o.pool,!1);t.push({poolAddress:s.poolAddress,positionId:o.pos_object_id,coinTypeA:s.coinTypeA,coinTypeB:s.coinTypeB,rewarderInfo:s.rewarder_infos})}const n={};if(t.length>0){const i=await this.fetchPosRewardersAmount(t);for(const o of i)n[o.positionId]=o.rewarderAmountOwed;return n}return n}async fetchPositionRewarders(e,t){const n={poolAddress:e.poolAddress,positionId:t,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,rewarderInfo:e.rewarder_infos};return(await this.fetchPosRewardersAmount([n]))[0].rewarderAmountOwed}async batchFetchPositionFees(e){const t=[];for(const i of e){const o=await this._sdk.Position.getPositionById(i,!1),s=await this._sdk.Pool.getPool(o.pool,!1);t.push({poolAddress:s.poolAddress,positionId:o.pos_object_id,coinTypeA:s.coinTypeA,coinTypeB:s.coinTypeB})}const n={};if(t.length>0){const i=await this.fetchPosFeeAmount(t);for(const o of i)n[o.position_id]=o;return n}return n}async fetchPosFeeAmount(e){var c;const{clmm_pool:t,integrate:n,simulationAccount:i}=this.sdk.sdkOptions,o=new R;for(const d of e){const l=[d.coinTypeA,d.coinTypeB],f=[o.object(I(t).global_config_id),o.object(d.poolAddress),o.pure.address(d.positionId)];o.moveCall({target:`${n.published_at}::${$t}::fetch_position_fees`,arguments:f,typeArguments:l})}const r=(c=(await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:o,sender:i.address})).events)==null?void 0:c.filter(d=>D(d.type).name==="FetchPositionFeesEvent");if(r.length===0)return[];const a=[];for(let d=0;d<r.length;d+=1){const{parsedJson:l}=r[d],f={feeOwedA:new g(l.fee_owned_a),feeOwedB:new g(l.fee_owned_b),position_id:l.position_id};a.push(f)}return a}async fetchPosRewardersAmount(e){var c;const{clmm_pool:t,integrate:n,simulationAccount:i}=this.sdk.sdkOptions,o=new R;for(const d of e){const l=[d.coinTypeA,d.coinTypeB],f=[o.object(I(t).global_config_id),o.object(d.poolAddress),o.pure.address(d.positionId),o.object(q)];o.moveCall({target:`${n.published_at}::${$t}::fetch_position_rewards`,arguments:f,typeArguments:l})}if(!ht(i.address))throw new F(`this config simulationAccount: ${i.address} is not set right`,"InvalidSimulateAccount");const s=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:o,sender:i.address});if(s.error!=null)throw new F(`fetch position rewards error code: ${s.error??"unknown error"}, please check config and params`,"InvalidConfig");const r=(c=s.events)==null?void 0:c.filter(d=>D(d.type).name==="FetchPositionRewardsEvent");if(r.length===0)return[];if(r.length!==e.length)throw new F("valueData.length !== params.pools.length");const a=[];for(let d=0;d<r.length;d+=1){const l={poolAddress:e[d].poolAddress,positionId:e[d].positionId,rewarderAmountOwed:[]};for(let f=0;f<e[d].rewarderInfo.length;f+=1)l.rewarderAmountOwed.push({amount_owed:new g(r[d].parsedJson.data[f]),coin_address:e[d].rewarderInfo[f].coinAddress});a.push(l)}return a}async fetchPoolRewardersAmount(e,t){const n=await this.sdk.Pool.getPool(t),i=await this.sdk.Position.getPositionList(e,[t]),o=[];for(const a of i)o.push({poolAddress:n.poolAddress,positionId:a.pos_object_id,rewarderInfo:n.rewarder_infos,coinTypeA:n.coinTypeA,coinTypeB:n.coinTypeB});const s=await this.fetchPosRewardersAmount(o),r=[H,H,H];if(s!=null)for(const a of s)for(let c=0;c<a.rewarderAmountOwed.length;c+=1)r[c]=r[c].add(a.rewarderAmountOwed[c].amount_owed);return r}async getPoolLowerAndUpperTicks(e,t){const n=[],i=[];for(const o of t){const s=await this.sdk.Pool.getTickDataByIndex(e,o.tick_lower_index),r=await this.sdk.Pool.getTickDataByIndex(e,o.tick_upper_index);n.push(s),i.push(r)}return[n,i]}async collectRewarderTransactionPayload(e){if(!ht(this._sdk.senderAddress))throw new F("this config sdk senderAddress is not set right","InvalidSendAddress");const t=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress,null);let n=new R;return n=X.createCollectRewarderAndFeeParams(this._sdk,n,e,t),n}async batchCollectRewardePayload(e,t,n,i){if(!ht(this._sdk.senderAddress))throw new F("this config sdk senderAddress is not set right","InvalidSendAddress");const o=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress,null);t=t||new R;const s={};return e.forEach(r=>{const a=ke(r.coinTypeA),c=ke(r.coinTypeB);if(r.collect_fee){let l=s[a];l==null&&(n==null?l=X.buildCoinForAmount(t,o,BigInt(0),a,!1):l={targetCoin:n,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},s[a]=l);let f=s[c];f==null&&(i==null?f=X.buildCoinForAmount(t,o,BigInt(0),c,!1):f={targetCoin:i,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},s[c]=f),t=this._sdk.Position.createCollectFeeNoSendPaylod({pool_id:r.pool_id,pos_id:r.pos_id,coinTypeA:r.coinTypeA,coinTypeB:r.coinTypeB},t,l.targetCoin,f.targetCoin)}const d=[];r.rewarder_coin_types.forEach(l=>{const f=ke(l);let _=s[l];_===void 0&&(_=X.buildCoinForAmount(t,o,BigInt(0),f,!1),s[f]=_),d.push(_.targetCoin)}),t=this.createCollectRewarderNoSendPaylod(r,t,d)}),Object.keys(s).forEach(r=>{const a=s[r];a.isMintZeroCoin&&X.buildTransferCoin(this._sdk,t,a.targetCoin,r,this._sdk.senderAddress)}),t}createCollectRewarderPaylod(e,t,n){const{clmm_pool:i,integrate:o}=this.sdk.sdkOptions,s=I(i),r=[e.coinTypeA,e.coinTypeB];return e.rewarder_coin_types.forEach((a,c)=>{t&&t.moveCall({target:`${o.published_at}::${In}::collect_reward`,typeArguments:[...r,a],arguments:[t.object(s.global_config_id),t.object(e.pool_id),t.object(e.pos_id),t.object(s.global_vault_id),n[c],t.object(q)]})}),t}createCollectRewarderNoSendPaylod(e,t,n){const{clmm_pool:i,integrate:o}=this.sdk.sdkOptions,s=I(i),r=[e.coinTypeA,e.coinTypeB];return e.rewarder_coin_types.forEach((a,c)=>{t&&t.moveCall({target:`${o.published_at}::${nd}::collect_reward`,typeArguments:[...r,a],arguments:[t.object(s.global_config_id),t.object(e.pool_id),t.object(e.pos_id),t.object(s.global_vault_id),n[c],t.object(q)]})}),t}};function Fi(e,t){return{pair:`${e}-${t}`,reversePair:`${t}-${e}`}}var Yp=class{constructor(e){U(this,"graph");U(this,"pathProviders");U(this,"coinProviders");U(this,"_coinAddressMap");U(this,"poolAddressMap");U(this,"_sdk");this.pathProviders=[],this.coinProviders={coins:[]},this.graph=new Jd(!1),this._coinAddressMap=new Map,this.poolAddressMap=new Map,this._sdk=e,this.getPoolAddressMapAndDirection=this.getPoolAddressMapAndDirection.bind(this),this.setCoinList=this.setCoinList.bind(this),this.loadGraph=this.loadGraph.bind(this),this.addCoinProvider=this.addCoinProvider.bind(this),this.addPathProvider=this.addPathProvider.bind(this),this.preRouterSwapA2B2C=this.preRouterSwapA2B2C.bind(this),this.price=this.price.bind(this),this.getPoolWithTVL=this.getPoolWithTVL.bind(this)}get sdk(){return this._sdk}getPoolAddressMapAndDirection(e,t){const{pair:n,reversePair:i}=Fi(e,t);let o=this.poolAddressMap.get(n);if(o!=null)return{addressMap:o,direction:!0};if(o=this.poolAddressMap.get(i),o!=null)return{addressMap:o,direction:!1}}setCoinList(){this.coinProviders.coins.forEach(e=>{this._coinAddressMap.set(e.address,e)})}loadGraph(e,t){this.addCoinProvider(e),this.addPathProvider(t),this.setCoinList(),this.pathProviders.forEach(n=>{const{paths:i}=n;i.forEach(o=>{const s=this.graph.getVertexByKey(o.base)??new Rr(o.base),r=this.graph.getVertexByKey(o.quote)??new Rr(o.quote);this.graph.addEdge(new Xd(s,r));const a=this._coinAddressMap.get(o.base),c=this._coinAddressMap.get(o.quote);if(a!=null&&c!=null){const d=Fi(o.base,o.quote).pair;this.poolAddressMap.set(d,o.addressMap)}})})}addPathProvider(e){for(let t=0;t<e.paths.length;t+=1){const{base:n,quote:i}=e.paths[t];n.localeCompare(i)<0&&(e.paths[t].base=i,e.paths[t].quote=n),n==="0x2::sui::SUI"&&(e.paths[t].base=i,e.paths[t].quote=n),i==="0x2::sui::SUI"&&(e.paths[t].base=n,e.paths[t].quote=i)}return this.pathProviders.push(e),this}addCoinProvider(e){return this.coinProviders=e,this}tokenInfo(e){return this._coinAddressMap.get(e)}getFeeRate(e,t,n){const i=Fi(e,t).pair,o=this.poolAddressMap.get(i);if(o!=null){for(const[a,c]of o.entries())if(c===n)return a*100}const s=Fi(e,t).reversePair,r=this.poolAddressMap.get(s);if(r!=null){for(const[a,c]of r.entries())if(c===n)return a*100}return 0}async price(e,t,n,i,o,s,r){const a=this.tokenInfo(e),c=this.tokenInfo(t);if(a===void 0||c===void 0)throw new F("From/To coin is undefined","InvalidCoin");const d=this.graph.getVertexByKey(a.address),l=this.graph.getVertexByKey(c.address),f=this.graph.findAllPath(d,l),_=Array.from(f);if(_.length===0)throw new F("No find valid path in coin graph","NotFoundPath");let b=[];for(let Y=0;Y<_.length;Y+=1){const W=_[Y];if(W.length>3)continue;const ue=[],S=[],u=[],p=[];for(let m=0;m<W.length-1;m+=1){const k=W[m].value.toString(),T=W[m+1].value.toString(),P=this.getPoolAddressMapAndDirection(k,T),E=P==null?void 0:P.addressMap,v=P==null?void 0:P.direction;E!=null&&v!=null&&(S.push(v),ue.push(k),ue.push(T),E.forEach(h=>{m===0?u.push(h):p.push(h)}))}for(const m of u)if(p.length>0)for(const k of p){const T={stepNums:2,poolAB:m,poolBC:k,a2b:S[0],b2c:S[1],amount:n,byAmountIn:i,coinTypeA:ue[0],coinTypeB:ue[1],coinTypeC:ue[3]};b.push(T)}else{const k={stepNums:1,poolAB:m,poolBC:void 0,a2b:S[0],b2c:void 0,amount:n,byAmountIn:i,coinTypeA:ue[0],coinTypeB:ue[1],coinTypeC:void 0};b.push(k)}}const y=b.filter(Y=>Y.stepNums===1),A=b.filter(Y=>Y.stepNums!==1);let O=[];try{O=await this.getPoolWithTVL()}catch{O=[]}if(O.length>0){const Y=new Map(O.map(W=>[W.poolAddress,W]));A.sort((W,ue)=>{let S=0,u=0;if(Y.has(W.poolAB)&&Y.has(W.poolBC)){const p=Y.get(W.poolAB),m=Y.get(W.poolBC);S=Math.min(p.tvl,m.tvl)}if(Y.has(ue.poolAB)&&Y.has(ue.poolBC)){const p=Y.get(ue.poolAB),m=Y.get(ue.poolBC);u=Math.min(p.tvl,m.tvl)}return u-S})}if(b=[...y,...A],b.length===0){if(r!=null){const Y=await this.sdk.Swap.preSwapWithMultiPool(r),W={amountIn:new g(Y.estimatedAmountIn),amountOut:new g(Y.estimatedAmountOut),poolAddress:[Y.poolAddress],a2b:[Y.aToB],rawAmountLimit:i?[Y.estimatedAmountOut]:[Y.estimatedAmountIn],isExceed:Y.isExceed,coinType:[e,t]},ue={paths:[W],partner:s,priceSlippagePoint:o};return{amountIn:new g(Y.estimatedAmountIn),amountOut:new g(Y.estimatedAmountOut),paths:[W],a2b:Y.aToB,b2c:void 0,byAmountIn:i,isExceed:Y.isExceed,targetSqrtPrice:[Y.estimatedEndSqrtPrice],currentSqrtPrice:[Y.estimatedStartSqrtPrice],coinTypeA:e,coinTypeB:t,coinTypeC:void 0,createTxParams:ue}}throw new F("No parameters available for service downgrade","NoDowngradeNeedParams")}const j=await this.preRouterSwapA2B2C(b.slice(0,16));if(j==null){if(r!=null){const W=await this.sdk.Swap.preSwapWithMultiPool(r),ue={amountIn:new g(W.estimatedAmountIn),amountOut:new g(W.estimatedAmountOut),poolAddress:[W.poolAddress],a2b:[W.aToB],rawAmountLimit:i?[W.estimatedAmountOut]:[W.estimatedAmountIn],isExceed:W.isExceed,coinType:[e,t]},S={paths:[ue],partner:s,priceSlippagePoint:o};return{amountIn:new g(W.estimatedAmountIn),amountOut:new g(W.estimatedAmountOut),paths:[ue],a2b:W.aToB,b2c:void 0,byAmountIn:i,isExceed:W.isExceed,targetSqrtPrice:[W.estimatedEndSqrtPrice],currentSqrtPrice:[W.estimatedStartSqrtPrice],coinTypeA:e,coinTypeB:t,coinTypeC:void 0,createTxParams:S}}return{amountIn:H,amountOut:H,paths:[],a2b:!1,b2c:!1,byAmountIn:i,isExceed:!0,targetSqrtPrice:[],currentSqrtPrice:[],coinTypeA:"",coinTypeB:"",coinTypeC:void 0,createTxParams:void 0}}const M=j.index,B=b[M].poolBC!=null?[b[M].poolAB,b[M].poolBC]:[b[M].poolAB],$=i?[j.amountMedium,j.amountOut]:[j.amountIn,j.amountMedium],J=[];J.push(b[M].a2b),j.stepNum>1&&J.push(b[M].b2c);const z=[];z.push(b[M].coinTypeA),z.push(b[M].coinTypeB),j.stepNum>1&&z.push(b[M].coinTypeC);const re={amountIn:j.amountIn,amountOut:j.amountOut,poolAddress:B,a2b:J,rawAmountLimit:$,isExceed:j.isExceed,coinType:z},ge={paths:[re],partner:s,priceSlippagePoint:o};return{amountIn:j.amountIn,amountOut:j.amountOut,paths:[re],a2b:b[M].a2b,b2c:j.stepNum>1?b[M].b2c:void 0,byAmountIn:i,isExceed:j.isExceed,targetSqrtPrice:j.targetSqrtPrice,currentSqrtPrice:j.currentSqrtPrice,coinTypeA:b[M].coinTypeA,coinTypeB:b[M].coinTypeB,coinTypeC:j.stepNum>1?b[M].coinTypeC:void 0,createTxParams:ge}}async priceUseV1(e,t,n,i,o,s,r){if(r!=null){const a=await this.sdk.Swap.preSwapWithMultiPool(r),c={amountIn:new g(a.estimatedAmountIn),amountOut:new g(a.estimatedAmountOut),poolAddress:[a.poolAddress],a2b:[a.aToB],rawAmountLimit:i?[a.estimatedAmountOut]:[a.estimatedAmountIn],isExceed:a.isExceed,coinType:[e,t]},d={paths:[c],partner:s,priceSlippagePoint:o};return{amountIn:new g(a.estimatedAmountIn),amountOut:new g(a.estimatedAmountOut),paths:[c],a2b:a.aToB,b2c:void 0,byAmountIn:i,isExceed:a.isExceed,targetSqrtPrice:[a.estimatedEndSqrtPrice],currentSqrtPrice:[a.estimatedStartSqrtPrice],coinTypeA:e,coinTypeB:t,coinTypeC:void 0,createTxParams:d}}throw new F("No parameters available for service downgrade","NoDowngradeNeedParams")}async preRouterSwapA2B2C(e){var f;if(e.length===0)return null;const{integrate:t,simulationAccount:n}=this.sdk.sdkOptions,i=new R;for(const _ of e)if(_.stepNums>1){const b=[i.object(_.poolAB),i.object(_.poolBC),i.pure.bool(_.a2b),i.pure.bool(_.b2c),i.pure.bool(_.byAmountIn),i.pure.u64(_.amount.toString())],y=[];_.a2b?y.push(_.coinTypeA,_.coinTypeB):y.push(_.coinTypeB,_.coinTypeA),_.b2c?y.push(_.coinTypeB,_.coinTypeC):y.push(_.coinTypeC,_.coinTypeB),i.moveCall({target:`${t.published_at}::${Rn}::calculate_router_swap_result`,typeArguments:y,arguments:b})}else{const b=[i.object(_.poolAB),i.pure.bool(_.a2b),i.pure.bool(_.byAmountIn),i.pure.u64(_.amount.toString())],y=_.a2b?[_.coinTypeA,_.coinTypeB]:[_.coinTypeB,_.coinTypeA];i.moveCall({target:`${t.published_at}::${pp}::get_expect_swap_result`,arguments:b,typeArguments:y})}if(!ht(n.address))throw new F("this config simulationAccount is not set right","InvalidSimulateAccount");const s=(f=(await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:i,sender:n.address})).events)==null?void 0:f.filter(_=>D(_.type).name==="CalculatedRouterSwapResultEvent"||D(_.type).name==="ExpectSwapResultEvent");if(s.length===0)return null;let r=e[0].byAmountIn?H:ni,a=0;for(let _=0;_<s.length;_+=1)if(!s[_].parsedJson.data.is_exceed)if(e[0].byAmountIn){const b=new g(s[_].parsedJson.data.amount_out);b.gt(r)&&(a=_,r=b)}else{const b=e[_].stepNums>1?new g(s[_].parsedJson.data.amount_in):new g(s[_].parsedJson.data.amount_in).add(new g(s[_].parsedJson.data.fee_amount));b.lt(r)&&(a=_,r=b)}const c=[],d=[];return e[a].stepNums>1?(d.push(s[a].parsedJson.data.target_sqrt_price_ab,s[a].parsedJson.data.target_sqrt_price_cd),c.push(s[a].parsedJson.data.current_sqrt_price_ab,s[a].parsedJson.data.current_sqrt_price_cd)):(d.push(s[a].parsedJson.data.after_sqrt_price),c.push(s[a].parsedJson.current_sqrt_price)),{index:a,amountIn:e[0].byAmountIn?e[a].amount:r,amountMedium:s[a].parsedJson.data.amount_medium,amountOut:e[0].byAmountIn?r:e[a].amount,targetSqrtPrice:d,currentSqrtPrice:c,isExceed:s[a].parsedJson.data.is_exceed,stepNum:e[a].stepNums}}async getPoolWithTVL(){const e=[],{swapCountUrl:t}=this._sdk.sdkOptions;if(!t)return e;let n;try{n=await fetch(t)}catch{throw new F(`Failed to get pool list with liquidity from ${t}.`,"InvalidSwapCountUrl")}let i;try{i=await n.json()}catch{throw new F(`Failed tp [arse response from ${t}].`,"InvalidSwapCountUrl")}if(i.code!==200)throw new F(`Failed to get pool list from ${t}. Statu code is ${i.code}.`,"InvalidSwapCountUrl");const{pools:o}=i.data;for(const s of o)e.push({poolAddress:s.swap_account,tvl:Number(s.tvl_in_usd)});return e}},e_=class{constructor(e){U(this,"_sdk");U(this,"calculateSingleImpact",(e,t)=>t.minus(e).div(t).mul(100));this._sdk=e}get sdk(){return this._sdk}calculateSwapFee(e){let t=w(0);return e.forEach(n=>{const i=n.basePaths.length;if(i>0){const o=n.basePaths[0],s=o.label==="Cetus"?new L(o.feeRate).div(10**6):new L(o.feeRate).div(10**9),r=w(o.inputAmount).div(10**o.fromDecimal).mul(s);if(t=t.add(r),i>1){const a=n.basePaths[1],c=o.direction?o.currentPrice:new L(1).div(o.currentPrice),d=a.direction?a.currentPrice:new L(1).div(a.currentPrice),l=a.label==="Cetus"?new L(a.feeRate).div(10**6):new L(a.feeRate).div(10**9),_=w(a.outputAmount).div(10**a.toDecimal).mul(l).div(c.mul(d));t=t.add(_)}}}),t.toString()}calculateSwapPriceImpact(e){let t=w(0);return e.forEach(n=>{const i=n.basePaths.length;if(i===1){const o=n.basePaths[0],s=w(o.outputAmount).div(10**o.toDecimal),r=w(o.inputAmount).div(10**o.fromDecimal),a=s.div(r),c=o.direction?new L(o.currentPrice):new L(1).div(o.currentPrice);t=t.add(this.calculateSingleImpact(a,c))}if(i===2){const o=n.basePaths[0],s=n.basePaths[1],r=o.direction?new L(o.currentPrice):new L(1).div(o.currentPrice),a=s.direction?new L(s.currentPrice):new L(1).div(s.currentPrice),c=r.mul(a),d=new L(s.outputAmount).div(10**s.toDecimal),l=new L(o.inputAmount).div(10**o.fromDecimal),f=d.div(l);t=t.add(this.calculateSingleImpact(f,c))}}),t.toString()}async preSwapWithMultiPool(e){var d;const{integrate:t,simulationAccount:n}=this.sdk.sdkOptions,i=new R,o=[e.coinTypeA,e.coinTypeB];for(let l=0;l<e.poolAddresses.length;l+=1){const f=[i.object(e.poolAddresses[l]),i.pure.bool(e.a2b),i.pure.bool(e.byAmountIn),i.pure.u64(e.amount)];i.moveCall({target:`${t.published_at}::${$t}::calculate_swap_result`,arguments:f,typeArguments:o})}if(!ht(n.address))throw new F("this config simulationAccount is not set right","InvalidSimulateAccount");const s=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:i,sender:n.address});if(s.error!=null)throw new F(`pre swap with multi pools error code: ${s.error??"unknown error"}, please check config and params`,"InvalidConfig");const r=(d=s.events)==null?void 0:d.filter(l=>D(l.type).name==="CalculatedSwapResultEvent");if(r.length===0)return null;if(r.length!==e.poolAddresses.length)throw new F("valueData.length !== params.pools.length","ParamsLengthNotEqual");let a=e.byAmountIn?H:ni,c=0;for(let l=0;l<r.length;l+=1)if(!r[l].parsedJson.data.is_exceed)if(e.byAmountIn){const f=new g(r[l].parsedJson.data.amount_out);f.gt(a)&&(c=l,a=f)}else{const f=new g(r[l].parsedJson.data.amount_out);f.lt(a)&&(c=l,a=f)}return this.transformSwapWithMultiPoolData({poolAddress:e.poolAddresses[c],a2b:e.a2b,byAmountIn:e.byAmountIn,amount:e.amount,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB},r[c].parsedJson)}async preswap(e){var c;const{integrate:t,simulationAccount:n}=this.sdk.sdkOptions,i=new R,o=[e.coinTypeA,e.coinTypeB],s=[i.object(e.pool.poolAddress),i.pure.bool(e.a2b),i.pure.bool(e.byAmountIn),i.pure.u64(e.amount)];if(i.moveCall({target:`${t.published_at}::${$t}::calculate_swap_result`,arguments:s,typeArguments:o}),!ht(n.address))throw new F("this config simulationAccount is not set right","InvalidSimulateAccount");const r=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:i,sender:n.address});if(r.error!=null)throw new F(`preswap error code: ${r.error??"unknown error"}, please check config and params`,"InvalidConfig");const a=(c=r.events)==null?void 0:c.filter(d=>D(d.type).name==="CalculatedSwapResultEvent");return a.length===0?null:this.transformSwapData(e,a[0].parsedJson.data)}transformSwapData(e,t){const n=t.amount_in&&t.fee_amount?new g(t.amount_in).add(new g(t.fee_amount)).toString():"";return{poolAddress:e.pool.poolAddress,currentSqrtPrice:e.currentSqrtPrice,estimatedAmountIn:n,estimatedAmountOut:t.amount_out,estimatedEndSqrtPrice:t.after_sqrt_price,estimatedFeeAmount:t.fee_amount,isExceed:t.is_exceed,amount:e.amount,aToB:e.a2b,byAmountIn:e.byAmountIn}}transformSwapWithMultiPoolData(e,t){const{data:n}=t;console.log("json data. ",n);const i=n.amount_in&&n.fee_amount?new g(n.amount_in).add(new g(n.fee_amount)).toString():"";return{poolAddress:e.poolAddress,estimatedAmountIn:i,estimatedAmountOut:n.amount_out,estimatedEndSqrtPrice:n.after_sqrt_price,estimatedStartSqrtPrice:n.step_results[0].current_sqrt_price,estimatedFeeAmount:n.fee_amount,isExceed:n.is_exceed,amount:e.amount,aToB:e.a2b,byAmountIn:e.byAmountIn}}calculateRates(e){const{currentPool:t}=e,n=fp(t);let i;e.a2b?i=e.swapTicks.sort((f,_)=>_.index-f.index):i=e.swapTicks.sort((f,_)=>f.index-_.index);const o=Pp(e.a2b,e.byAmountIn,e.amount,n,i);let s=!1;e.byAmountIn?s=o.amountIn.lt(e.amount):s=o.amountOut.lt(e.amount);const r=en.getDefaultSqrtPriceLimit(e.a2b);e.a2b&&o.nextSqrtPrice.lt(r)&&(s=!0),!e.a2b&&o.nextSqrtPrice.gt(r)&&(s=!0);let a=0;o.crossTickNum>6&&o.crossTickNum<40&&(a=22e3*(o.crossTickNum-6)),o.crossTickNum>40&&(s=!0);const c=G.sqrtPriceX64ToPrice(n.currentSqrtPrice,e.decimalsA,e.decimalsB).toNumber(),d=G.sqrtPriceX64ToPrice(o.nextSqrtPrice,e.decimalsA,e.decimalsB).toNumber(),l=Math.abs(c-d)/c*100;return{estimatedAmountIn:o.amountIn,estimatedAmountOut:o.amountOut,estimatedEndSqrtPrice:o.nextSqrtPrice,estimatedFeeAmount:o.feeAmount,isExceed:s,extraComputeLimit:a,amount:e.amount,aToB:e.a2b,byAmountIn:e.byAmountIn,priceImpactPct:l}}async createSwapTransactionPayload(e,t){if(this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const n=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);if(t){const{isAdjustCoinA:i,isAdjustCoinB:o}=mo(e);if(e.a2b&&i||!e.a2b&&o)return await X.buildSwapTransactionForGas(this._sdk,e,n,t)}return X.buildSwapTransaction(this.sdk,e,n)}async createSwapTransactionWithoutTransferCoinsPayload(e,t){if(this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const n=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);if(t){const{isAdjustCoinA:i,isAdjustCoinB:o}=mo(e);if(e.a2b&&i||!e.a2b&&o)return await X.buildSwapTransactionWithoutTransferCoinsForGas(this._sdk,e,n,t)}return X.buildSwapTransactionWithoutTransferCoins(this.sdk,e,n)}},t_=class{constructor(e){U(this,"_sdk");U(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getAllRegisteredTokenList(e=!1){return await this.factchTokenList("",e)}async getOwnerTokenList(e="",t=!1){return await this.factchTokenList(e,t)}async getAllRegisteredPoolList(e=!1){return await this.factchPoolList("",e)}async getOwnerPoolList(e="",t=!1){return await this.factchPoolList(e,t)}async getWarpPoolList(e=!1){return await this.factchWarpPoolList("","",e)}async getOwnerWarpPoolList(e="",t="",n=!1){return await this.factchWarpPoolList(e,t,n)}async getTokenListByCoinTypes(e){const t={},n="getAllRegisteredTokenList",i=this.getCache(n);if(i!==void 0){const s=i;for(const r of e)for(const a of s)if(ke(r)===ke(a.address)){t[r]=a;continue}}const o=e.filter(s=>t[s]===void 0);for(const s of o){const r=`${s}_metadata`,a=this.getCache(r);if(a!==void 0)t[s]=a;else{const c=await this._sdk.fullClient.getCoinMetadata({coinType:s});if(c){const d={id:c.id,name:c.name,symbol:c.symbol,official_symbol:c.symbol,coingecko_id:"",decimals:c.decimals,project_url:"",logo_url:c.iconUrl,address:s};t[s]=d,this.updateCache(r,d,V)}}}return t}async factchTokenList(e="",t=!1){var f;const{simulationAccount:n,token:i}=this.sdk.sdkOptions,o="getAllRegisteredTokenList",s=this.getCache(o,t);if(s!==void 0)return s;const r=e.length>0,a=512;let c=0,d=[];if(i===void 0)throw Error("please config token ofsdkOptions");const l=I(i);for(;;){const _=new R;_.moveCall({target:`${i.published_at}::coin_list::${r?"fetch_full_list_with_limit":"fetch_all_registered_coin_info_with_limit"}`,arguments:r?[_.pure.address(l.coin_registry_id),_.pure.address(e),_.pure.u64(c),_.pure.u64(a)]:[_.pure.address(l.coin_registry_id),_.pure.u64(c),_.pure.u64(a)]});const b=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:_,sender:n.address}),y=[];if((f=b.events)==null||f.forEach(A=>{D(A.type).full_address===`${i.published_at}::coin_list::FetchCoinListEvent`&&A.parsedJson.full_list.value_list.forEach(j=>{y.push(this.transformData(j,!1))})}),d=[...d,...y],y.length<a)break;c=d.length}return d}async factchPoolList(e="",t=!1){var f;const{simulationAccount:n,token:i}=this.sdk.sdkOptions,o="getAllRegisteredPoolList",s=this.getCache(o,t);if(s!==void 0)return s;let r=[];const a=512;let c=0;const d=e.length>0;if(i===void 0)throw Error("please config token ofsdkOptions");const l=I(i);for(;;){const _=new R;if(_.moveCall({target:`${i.published_at}::lp_list::${d?"fetch_full_list_with_limit":"fetch_all_registered_coin_info_with_limit"}`,arguments:d?[_.pure.address(l.pool_registry_id),_.pure.address(e),_.pure.u64(c),_.pure.u64(a)]:[_.pure.address(l.pool_registry_id),_.pure.u64(c),_.pure.u64(a)]}),!ht(n.address))throw new F("this config simulationAccount is not set right","InvalidSimulateAccount");const b=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:_,sender:n.address}),y=[];if((f=b.events)==null||f.forEach(A=>{D(A.type).full_address===`${i.published_at}::lp_list::FetchPoolListEvent`&&A.parsedJson.full_list.value_list.forEach(j=>{y.push(this.transformData(j,!0))})}),r=[...r,...y],y.length<a)break;c=r.length}return r}async factchWarpPoolList(e="",t="",n=!1){const i=await this.factchPoolList(e,n);if(i.length===0)return[];const o=await this.factchTokenList(t,n),s=[];for(const r of i){for(const a of o)a.address===r.coin_a_address&&(r.coinA=a),a.address===r.coin_b_address&&(r.coinB=a);s.push(r)}return s}async getTokenConfigEvent(e=!1){const t=this._sdk.sdkOptions.token.package_id,n=`${t}_getTokenConfigEvent`,i=this.getCache(n,e);if(i!==void 0)return i;const o=await this._sdk.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),s=Mi(o),r=await this._sdk.fullClient.queryEventsByPage({Transaction:s}),a={coin_registry_id:"",pool_registry_id:"",coin_list_owner:"",pool_list_owner:""};return r.data.length>0&&r.data.forEach(c=>{const d=D(c.type);if(c.transactionModule==="coin_list")switch(d.name){case"InitListEvent":a.coin_list_owner=c.parsedJson.list_id;break;case"InitRegistryEvent":a.coin_registry_id=c.parsedJson.registry_id;break}else if(c.transactionModule==="lp_list")switch(d.name){case"InitListEvent<address>":a.pool_list_owner=c.parsedJson.list_id;break;case"InitRegistryEvent<address>":a.pool_registry_id=c.parsedJson.registry_id;break}}),a.coin_registry_id.length>0&&this.updateCache(n,a,V),a}transformData(e,t){const n={...e};if(t)try{n.coin_a_address=D(n.coin_a_address).full_address,n.coin_b_address=D(n.coin_b_address).full_address}catch{}else n.address=D(n.address).full_address;if(e.extensions){const i=e.extensions.contents;for(const o of i){const{key:s}=o;let{value:r}=o;if(s==="labels")try{r=JSON.parse(decodeURIComponent(zi.decode(r)))}catch{}s==="pyth_id"&&(r=he(r)),n[s]=r}delete n.extensions}return n}updateCache(e,t,n=Et){let i=this._cache[e];i?(i.overdueTime=pe(n),i.value=t):i=new St(t,pe(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e],i=n==null?void 0:n.isValid();if(!t&&i)return n.value;i||delete this._cache[e]}},n_=class{constructor(e){U(this,"_sdk");this._sdk=e}get sdk(){return this._sdk}calculatePrice(e,t,n,i,o){const s=i?t:n,r=i?n:t;return o==="Cetus"?G.sqrtPriceX64ToPrice(e,s,r):new L(e.toString()).div(new L(10).pow(new L(r+9-s)))}parseJsonResult(e){return{isExceed:e.is_exceed,isTimeout:e.is_timeout,inputAmount:e.input_amount,outputAmount:e.output_amount,fromCoin:e.from_coin,toCoin:e.to_coin,byAmountIn:e.by_amount_in,splitPaths:e.split_paths.map(n=>({pathIndex:n.path_index,lastQuoteOutput:n.last_quote_output,percent:n.percent,basePaths:n.best_path.map(o=>({direction:o.direction,label:o.label,poolAddress:o.provider,fromCoin:o.from_coin,toCoin:o.to_coin,outputAmount:o.output_amount,inputAmount:o.input_amount,feeRate:o.fee_rate,currentSqrtPrice:new g(o.current_sqrt_price.toString()),afterSqrtPrice:o.label==="Cetus"?new g(o.after_sqrt_price.toString()):H,fromDecimal:o.from_decimal,toDecimal:o.to_decimal,currentPrice:this.calculatePrice(new g(o.current_sqrt_price.toString()),o.from_decimal,o.to_decimal,o.direction,o.label)})),inputAmount:n.input_amount,outputAmount:n.output_amount}))}}async fetchDataWithAxios(e,t,n){try{const i={...t,timeout:n},o=await Hh(e,i);return o.status===200?this.parseJsonResult(o.data):null}catch(i){return console.error(i),null}}async getBestRouter(e,t,n,i,o,s,r,a,c=!1,d=!1,l=[]){let f=null,_="v2",b={},y=this.sdk.sdkOptions.aggregatorUrl;if(l.length>0){const A=new URL(y);y=`${A.protocol}//${A.hostname}/router_with_lp_changes`,b={method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify({from:e,to:t,amount:n,by_amount_in:i,order_split:c,external_router:d,sender_address:"None",request_id:encodeURIComponent(Ni()),lp_changes:l})}}else y=`
      ${y}?from=${encodeURIComponent(e)}&to=${encodeURIComponent(t)}&amount=${encodeURIComponent(n)}&by_amount_in=${encodeURIComponent(i)}&order_split=${encodeURIComponent(c)}&external_router=${encodeURIComponent(d)}&sender_address=''&request_id=${encodeURIComponent(Ni())}
      `;if(f=await this.fetchDataWithAxios(y,b,6e3),f==null){const A=await this.sdk.Router.priceUseV1(e,t,new g(n),i,o,s,a),O=[];for(const M of A.paths){const B=[];if(M.poolAddress.length>1){const J=this.sdk.Router.tokenInfo(M.coinType[0]).decimals,z=this.sdk.Router.tokenInfo(M.coinType[1]).decimals,re=M.a2b[0]?G.sqrtPriceX64ToPrice(new g(A.currentSqrtPrice[0]),J,z):G.sqrtPriceX64ToPrice(new g(A.currentSqrtPrice[0]),z,J),ge={direction:M.a2b[0],label:"Cetus",poolAddress:M.poolAddress[0],fromCoin:M.coinType[0],toCoin:M.coinType[1],feeRate:this.sdk.Router.getFeeRate(M.coinType[0],M.coinType[1],M.poolAddress[0]),outputAmount:A.byAmountIn?M.rawAmountLimit[0].toString():M.rawAmountLimit[1].toString(),inputAmount:M.amountIn.toString(),currentSqrtPrice:A.currentSqrtPrice[0],currentPrice:re,fromDecimal:J,toDecimal:z},mt=this.sdk.Router.tokenInfo(M.coinType[1]).decimals,Y=this.sdk.Router.tokenInfo(M.coinType[2]).decimals,W=M.a2b[1]?G.sqrtPriceX64ToPrice(new g(A.currentSqrtPrice[1]),mt,Y):G.sqrtPriceX64ToPrice(new g(A.currentSqrtPrice[1]),Y,mt),ue={direction:M.a2b[1],label:"Cetus",poolAddress:M.poolAddress[1],fromCoin:M.coinType[1],toCoin:M.coinType[2],feeRate:this.sdk.Router.getFeeRate(M.coinType[1],M.coinType[2],M.poolAddress[1]),outputAmount:M.amountOut.toString(),inputAmount:A.byAmountIn?M.rawAmountLimit[0].toString():M.rawAmountLimit[1].toString(),currentSqrtPrice:A.currentSqrtPrice[1],currentPrice:W,fromDecimal:mt,toDecimal:Y};B.push(ge,ue)}else{const J=this.sdk.Router.tokenInfo(M.coinType[0]).decimals,z=this.sdk.Router.tokenInfo(M.coinType[1]).decimals,re=M.a2b[0]?G.sqrtPriceX64ToPrice(new g(A.currentSqrtPrice[0]),J,z):G.sqrtPriceX64ToPrice(new g(A.currentSqrtPrice[0]),z,J),ge={direction:M.a2b[0],label:"Cetus",poolAddress:M.poolAddress[0],fromCoin:M.coinType[0],toCoin:M.coinType[1],feeRate:this.sdk.Router.getFeeRate(M.coinType[0],M.coinType[1],M.poolAddress[0]),outputAmount:M.amountOut.toString(),inputAmount:M.amountIn.toString(),currentSqrtPrice:A.currentSqrtPrice[0],currentPrice:re,fromDecimal:J,toDecimal:z};B.push(ge)}const $={percent:Number(M.amountIn)/Number(A.amountIn)*100,inputAmount:Number(M.amountIn.toString()),outputAmount:Number(M.amountOut.toString()),pathIndex:0,lastQuoteOutput:0,basePaths:B};O.push($)}const j={isExceed:A.isExceed,isTimeout:!0,inputAmount:Number(A.amountIn.toString()),outputAmount:Number(A.amountOut.toString()),fromCoin:A.coinTypeA,toCoin:A.coinTypeC!=null?A.coinTypeC:A.coinTypeB,byAmountIn:A.byAmountIn,splitPaths:O};_="v1",f=j}return{result:f,version:_}}async getBestRouterByServer(e,t,n,i,o,s=!1,r=!1,a=[]){let c=null,d={},l=this.sdk.sdkOptions.aggregatorUrl;if(a.length>0){const f=new URL(l);l=`${f.protocol}//${f.hostname}/router_with_lp_changes`,d={method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify({from:e,to:t,amount:n,by_amount_in:i,order_split:s,external_router:r,sender_address:"None",request_id:encodeURIComponent(Ni()),lp_changes:a})}}else l=`
      ${l}?from=${encodeURIComponent(e)}&to=${encodeURIComponent(t)}&amount=${encodeURIComponent(n)}&by_amount_in=${encodeURIComponent(i)}&order_split=${encodeURIComponent(s)}&external_router=${encodeURIComponent(r)}&sender_address=''&request_id=${encodeURIComponent(Ni())}
      `;if(c=await this.fetchDataWithAxios(l,d,6e3),c==null)throw new F("Invalid server response","InvalidServerResponse");return c}async getBestRouterByRpc(e,t,n,i,o,s,r){const a=await this.sdk.Router.priceUseV1(e,t,new g(n),i,o,s,r),c=[];for(const l of a.paths){const f=[];if(l.poolAddress.length>1){const b=this.sdk.Router.tokenInfo(l.coinType[0]).decimals,y=this.sdk.Router.tokenInfo(l.coinType[1]).decimals,A=l.a2b[0]?G.sqrtPriceX64ToPrice(new g(a.currentSqrtPrice[0]),b,y):G.sqrtPriceX64ToPrice(new g(a.currentSqrtPrice[0]),y,b),O={direction:l.a2b[0],label:"Cetus",poolAddress:l.poolAddress[0],fromCoin:l.coinType[0],toCoin:l.coinType[1],feeRate:this.sdk.Router.getFeeRate(l.coinType[0],l.coinType[1],l.poolAddress[0]),outputAmount:a.byAmountIn?l.rawAmountLimit[0].toString():l.rawAmountLimit[1].toString(),inputAmount:l.amountIn.toString(),currentSqrtPrice:a.currentSqrtPrice[0],currentPrice:A,fromDecimal:b,toDecimal:y},j=this.sdk.Router.tokenInfo(l.coinType[1]).decimals,M=this.sdk.Router.tokenInfo(l.coinType[2]).decimals,B=l.a2b[1]?G.sqrtPriceX64ToPrice(new g(a.currentSqrtPrice[1]),j,M):G.sqrtPriceX64ToPrice(new g(a.currentSqrtPrice[1]),M,j),$={direction:l.a2b[1],label:"Cetus",poolAddress:l.poolAddress[1],fromCoin:l.coinType[1],toCoin:l.coinType[2],feeRate:this.sdk.Router.getFeeRate(l.coinType[1],l.coinType[2],l.poolAddress[1]),outputAmount:l.amountOut.toString(),inputAmount:a.byAmountIn?l.rawAmountLimit[0].toString():l.rawAmountLimit[1].toString(),currentSqrtPrice:a.currentSqrtPrice[1],currentPrice:B,fromDecimal:j,toDecimal:M};f.push(O,$)}else{const b=this.sdk.Router.tokenInfo(l.coinType[0]).decimals,y=this.sdk.Router.tokenInfo(l.coinType[1]).decimals,A=l.a2b[0]?G.sqrtPriceX64ToPrice(new g(a.currentSqrtPrice[0]),b,y):G.sqrtPriceX64ToPrice(new g(a.currentSqrtPrice[0]),y,b),O={direction:l.a2b[0],label:"Cetus",poolAddress:l.poolAddress[0],fromCoin:l.coinType[0],toCoin:l.coinType[1],feeRate:this.sdk.Router.getFeeRate(l.coinType[0],l.coinType[1],l.poolAddress[0]),outputAmount:l.amountOut.toString(),inputAmount:l.amountIn.toString(),currentSqrtPrice:a.currentSqrtPrice[0],currentPrice:A,fromDecimal:b,toDecimal:y};f.push(O)}const _={percent:Number(l.amountIn)/Number(a.amountIn)*100,inputAmount:Number(l.amountIn.toString()),outputAmount:Number(l.amountOut.toString()),pathIndex:0,lastQuoteOutput:0,basePaths:f};c.push(_)}return{isExceed:a.isExceed,isTimeout:!0,inputAmount:Number(a.amountIn.toString()),outputAmount:Number(a.amountOut.toString()),fromCoin:a.coinTypeA,toCoin:a.coinTypeC!=null?a.coinTypeC:a.coinTypeB,byAmountIn:a.byAmountIn,splitPaths:c}}},i_=class{constructor(e){U(this,"_sdk");U(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}setTokenListCache(e){const{coin_list_handle:t}=I(this.sdk.sdkOptions.cetus_config),n=`${t}_getCoinConfigs`,i=this.getCache(n),o=i?[...i,...e]:e;this.updateCache(n,o,V)}async getTokenListByCoinTypes(e){const t={},{coin_list_handle:n}=I(this.sdk.sdkOptions.cetus_config),i=`${n}_getCoinConfigs`,o=this.getCache(i);if(o!==void 0){const r=o;for(const a of e)for(const c of r)if(ke(a)===ke(c.address)){t[a]=c;continue}}const s=e.filter(r=>t[r]===void 0);for(const r of s){const a=`${r}_metadata`,c=this.getCache(a);if(c!==void 0)t[r]=c;else{const d=await this._sdk.fullClient.getCoinMetadata({coinType:r});if(d){const l={id:d.id,pyth_id:"",name:d.name,symbol:d.symbol,official_symbol:d.symbol,coingecko_id:"",decimals:d.decimals,project_url:"",logo_url:d.iconUrl,address:r};t[r]=l,this.updateCache(a,l,V)}else console.log(`not found ${r}`)}}return t}async getCoinConfigs(e=!1,t=!0){const{coin_list_handle:n}=I(this.sdk.sdkOptions.cetus_config),i=`${n}_getCoinConfigs`,o=this.getCache(i,e);if(o)return o;const r=(await this._sdk.fullClient.getDynamicFieldsByPage(n)).data.map(d=>d.objectId),a=await this._sdk.fullClient.batchGetObjects(r,{showContent:!0}),c=[];return a.forEach(d=>{var f,_;if(d.error!=null||((_=(f=d.data)==null?void 0:f.content)==null?void 0:_.dataType)!=="moveObject")throw new F(`when getCoinConfigs get objects error: ${d.error}, please check the rpc and contracts address config.`,"InvalidConfig");const l=this.buildCoinConfig(d,t);this.updateCache(`${n}_${l.address}_getCoinConfig`,l,V),c.push({...l})}),this.updateCache(i,c,V),c}async getCoinConfig(e,t=!1,n=!0){var c,d;const{coin_list_handle:i}=I(this.sdk.sdkOptions.cetus_config),o=`${i}_${e}_getCoinConfig`,s=this.getCache(o,t);if(s)return s;const r=await this._sdk.fullClient.getDynamicFieldObject({parentId:i,name:{type:"0x1::type_name::TypeName",value:{name:Bp(e)}}});if(r.error!=null||((d=(c=r.data)==null?void 0:c.content)==null?void 0:d.dataType)!=="moveObject")throw new F(`when getCoinConfig get object error: ${r.error}, please check the rpc and contracts address config.`,"InvalidConfig");const a=this.buildCoinConfig(r,n);return this.updateCache(o,a,V),a}buildCoinConfig(e,t=!0){let n=Q(e);n=n.value.fields;const i={...n};return i.id=Wt(e),i.address=D(n.coin_type.fields.name).full_address,n.pyth_id&&(i.pyth_id=he(n.pyth_id)),this.transformExtensions(i,n.extension_fields.fields.contents,t),delete i.coin_type,i}async getClmmPoolConfigs(e=!1,t=!0){const{clmm_pools_handle:n}=I(this.sdk.sdkOptions.cetus_config),i=`${n}_getClmmPoolConfigs`,o=this.getCache(i,e);if(o)return o;const r=(await this._sdk.fullClient.getDynamicFieldsByPage(n)).data.map(d=>d.objectId),a=await this._sdk.fullClient.batchGetObjects(r,{showContent:!0}),c=[];return a.forEach(d=>{var f,_;if(d.error!=null||((_=(f=d.data)==null?void 0:f.content)==null?void 0:_.dataType)!=="moveObject")throw new F(`when getClmmPoolsConfigs get objects error: ${d.error}, please check the rpc and contracts address config.`,"InvalidConfig");const l=this.buildClmmPoolConfig(d,t);this.updateCache(`${l.pool_address}_getClmmPoolConfig`,l,V),c.push({...l})}),this.updateCache(i,c,V),c}async getClmmPoolConfig(e,t=!1,n=!0){const{clmm_pools_handle:i}=I(this.sdk.sdkOptions.cetus_config),o=`${e}_getClmmPoolConfig`,s=this.getCache(o,t);if(s)return s;const r=await this._sdk.fullClient.getDynamicFieldObject({parentId:i,name:{type:"address",value:e}}),a=this.buildClmmPoolConfig(r,n);return this.updateCache(o,a,V),a}buildClmmPoolConfig(e,t=!0){let n=Q(e);n=n.value.fields;const i={...n};return i.id=Wt(e),i.pool_address=he(n.pool_address),this.transformExtensions(i,n.extension_fields.fields.contents,t),i}async getLaunchpadPoolConfigs(e=!1,t=!0){const{launchpad_pools_handle:n}=I(this.sdk.sdkOptions.cetus_config),i=`${n}_getLaunchpadPoolConfigs`,o=this.getCache(i,e);if(o)return o;const r=(await this._sdk.fullClient.getDynamicFieldsByPage(n)).data.map(d=>d.objectId),a=await this._sdk.fullClient.batchGetObjects(r,{showContent:!0}),c=[];return a.forEach(d=>{var f,_;if(d.error!=null||((_=(f=d.data)==null?void 0:f.content)==null?void 0:_.dataType)!=="moveObject")throw new F(`when getCoinConfigs get objects error: ${d.error}, please check the rpc and contracts address config.`,"InvalidConfig");const l=this.buildLaunchpadPoolConfig(d,t);this.updateCache(`${l.pool_address}_getLaunchpadPoolConfig`,l,V),c.push({...l})}),this.updateCache(i,c,V),c}async getLaunchpadPoolConfig(e,t=!1,n=!0){const{launchpad_pools_handle:i}=I(this.sdk.sdkOptions.cetus_config),o=`${e}_getLaunchpadPoolConfig`,s=this.getCache(o,t);if(s)return s;const r=await this._sdk.fullClient.getDynamicFieldObject({parentId:i,name:{type:"address",value:e}}),a=this.buildLaunchpadPoolConfig(r,n);return this.updateCache(o,a,V),a}buildLaunchpadPoolConfig(e,t=!0){let n=Q(e);n=n.value.fields;const i={...n};i.id=Wt(e),i.pool_address=he(n.pool_address),this.transformExtensions(i,n.extension_fields.fields.contents,t);const o=[];n.social_media.fields.contents.forEach(s=>{o.push({name:s.fields.value.fields.name,link:s.fields.value.fields.link})}),i.social_media=o;try{i.regulation=decodeURIComponent(zi.decode(i.regulation).replace(/%/g,"%25"))}catch{i.regulation=zi.decode(i.regulation)}return i}transformExtensions(e,t,n=!0){const i=[];for(const o of t){const{key:s}=o.fields;let{value:r}=o.fields;if(s==="labels")try{r=JSON.parse(decodeURIComponent(zi.decode(r)))}catch{}n&&(e[s]=r),i.push({key:s,value:r})}delete e.extension_fields,n||(e.extensions=i)}async getCetusConfig(e=!1){const t=this._sdk.sdkOptions.cetus_config.package_id,n=`${t}_getCetusConfig`,i=this.getCache(n,e);if(i!==void 0)return i;const o=await this._sdk.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),s=Mi(o),r=await this._sdk.fullClient.queryEventsByPage({Transaction:s});let a={coin_list_id:"",launchpad_pools_id:"",clmm_pools_id:"",admin_cap_id:"",global_config_id:"",coin_list_handle:"",launchpad_pools_handle:"",clmm_pools_handle:""};if(r.data.length>0)for(const c of r.data)switch(D(c.type).name){case"InitCoinListEvent":a.coin_list_id=c.parsedJson.coin_list_id;break;case"InitLaunchpadPoolsEvent":a.launchpad_pools_id=c.parsedJson.launchpad_pools_id;break;case"InitClmmPoolsEvent":a.clmm_pools_id=c.parsedJson.pools_id;break;case"InitConfigEvent":a.global_config_id=c.parsedJson.global_config_id,a.admin_cap_id=c.parsedJson.admin_cap_id;break}return a=await this.getCetusConfigHandle(a),a.clmm_pools_id.length>0&&this.updateCache(n,a,V),a}async getCetusConfigHandle(e){const t=[e.clmm_pools_id,e.coin_list_id,e.launchpad_pools_id];return(await this._sdk.fullClient.multiGetObjects({ids:t,options:{showContent:!0}})).forEach(i=>{var r,a;if(i.error!=null||((a=(r=i.data)==null?void 0:r.content)==null?void 0:a.dataType)!=="moveObject")throw new F(`when getCetusConfigHandle get objects error: ${i.error}, please check the rpc and contracts address config.`,"InvalidConfigHandle");const o=Q(i),s=$n(i);switch(D(s).name){case"ClmmPools":e.clmm_pools_handle=o.pools.fields.id.id;break;case"CoinList":e.coin_list_handle=o.coins.fields.id.id;break;case"LaunchpadPools":e.launchpad_pools_handle=o.pools.fields.id.id;break}}),e}updateCache(e,t,n=Et){let i=this._cache[e];i?(i.overdueTime=pe(n),i.value=t):i=new St(t,pe(n)),this._cache[e]=i}getCache(e,t=!1){try{const n=this._cache[e];if(!n)return;if(t||!n.isValid()){delete this._cache[e];return}return n.value}catch(n){console.error(`Error accessing cache for key ${e}:`,n);return}}},o_=class extends ap{async queryEventsByPage(e,t="all"){let n=[],i=!0;const o=t==="all";let s=o?null:t.cursor;do{const r=await this.queryEvents({query:e,cursor:s,limit:o?null:t.limit});r.data?(n=[...n,...r.data],i=r.hasNextPage,s=r.nextCursor):i=!1}while(o&&i);return{data:n,nextCursor:s,hasNextPage:i}}async getOwnedObjectsByPage(e,t,n="all"){let i=[],o=!0;const s=n==="all";let r=s?null:n.cursor;do{const a=await this.getOwnedObjects({owner:e,...t,cursor:r,limit:s?null:n.limit});a.data?(i=[...i,...a.data],o=a.hasNextPage,r=a.nextCursor):o=!1}while(s&&o);return{data:i,nextCursor:r,hasNextPage:o}}async getDynamicFieldsByPage(e,t="all"){let n=[],i=!0;const o=t==="all";let s=o?null:t.cursor;do{const r=await this.getDynamicFields({parentId:e,cursor:s,limit:o?null:t.limit});r.data?(n=[...n,...r.data],i=r.hasNextPage,s=r.nextCursor):i=!1}while(o&&i);return{data:n,nextCursor:s,hasNextPage:i}}async batchGetObjects(e,t,n=50){let i=[];try{for(let o=0;o<Math.ceil(e.length/n);o++){const s=await this.multiGetObjects({ids:e.slice(o*n,n*(o+1)),options:t});i=[...i,...s]}}catch(o){console.log(o)}return i}async calculationTxGas(e){const{sender:t}=e.blockData;if(t===void 0)throw Error("sdk sender is empty");const n=await this.devInspectTransactionBlock({transactionBlock:e,sender:t}),{gasUsed:i}=n.effects;return Number(i.computationCost)+Number(i.storageCost)-Number(i.storageRebate)}async sendTransaction(e,t){try{return await this.signAndExecuteTransaction({transaction:t,signer:e,options:{showEffects:!0,showEvents:!0}})}catch(n){console.log("error: ",n)}}async sendSimulationTransaction(e,t,n=!0){try{if(n)return await this.devInspectTransactionBlock({transactionBlock:e,sender:t})}catch(i){console.log("devInspectTransactionBlock error",i)}}},s_=class{constructor(e){U(this,"_cache",{});U(this,"_rpcModule");U(this,"_pool");U(this,"_position");U(this,"_swap");U(this,"_rewarder");U(this,"_router");U(this,"_router_v2");U(this,"_token");U(this,"_config");U(this,"_sdkOptions");U(this,"_senderAddress","");this._sdkOptions=e,this._rpcModule=new o_({url:e.fullRpcUrl}),this._swap=new e_(this),this._pool=new Jp(this),this._position=new Zp(this),this._rewarder=new Qp(this),this._router=new Yp(this),this._router_v2=new n_(this),this._token=new t_(this),this._config=new i_(this),lr(this._sdkOptions)}get senderAddress(){return this._senderAddress}set senderAddress(e){this._senderAddress=e}get Swap(){return this._swap}get fullClient(){return this._rpcModule}get sdkOptions(){return this._sdkOptions}get Pool(){return this._pool}get Position(){return this._position}get Rewarder(){return this._rewarder}get Router(){return this._router}get RouterV2(){return this._router_v2}get CetusConfig(){return this._config}get Token(){return this._token}async getOwnerCoinAssets(e,t,n=!0){const i=[];let o=null;const s=`${this.sdkOptions.fullRpcUrl}_${e}_${t}_getOwnerCoinAssets`,r=this.getCache(s,n);if(r)return r;for(;;){const a=await(t?this.fullClient.getCoins({owner:e,coinType:t,cursor:o}):this.fullClient.getAllCoins({owner:e,cursor:o}));if(a.data.forEach(c=>{BigInt(c.balance)>0&&i.push({coinAddress:D(c.coinType).source_address,coinObjectId:c.coinObjectId,balance:BigInt(c.balance)})}),o=a.nextCursor,!a.hasNextPage)break}return this.updateCache(s,i,30*1e3),i}async getOwnerCoinBalances(e,t){let n=[];return t?n=[await this.fullClient.getBalance({owner:e,coinType:t})]:n=[...await this.fullClient.getAllBalances({owner:e})],n}updateCache(e,t,n=V){let i=this._cache[e];i?(i.overdueTime=pe(n),i.value=t):i=new St(t,pe(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e],i=n==null?void 0:n.isValid();if(!t&&i)return n.value;i||delete this._cache[e]}},g0=s_,us="router",Xn=1e4,Cn=class{static buildPoolImmutables(e){const{fields:t}=e.value.fields.value;return{clmm_pool_id:D(t.clmm_pool_id).address,booster_type:D(t.booster_type.fields.name).source_address,pool_id:D(t.pool_id).address,coinTypeA:D(t.coin_type_a.fields.name).source_address,coinTypeB:D(t.coin_type_b.fields.name).source_address}}static buildPoolState(e){const t=Q(e),n=[];return t.config.fields.contents.forEach(o=>{n.push({lock_day:Number(o.fields.key),multiplier:Number(w(o.fields.value).div(Xn))})}),{basic_percent:Number(w(t.basic_percent).div(Xn)),balances:{balances_handle:t.balances.fields.id.id,size:t.balances.fields.size},config:n,lock_positions:{lock_positions_handle:t.lock_positions.fields.id.id,size:t.lock_positions.fields.size},is_open:t.is_open,index:Number(t.index),pool_id:Wt(e)}}static buildLockNFT(e){const t=D(Wt(e)).address;return{lock_clmm_position:ei(e),locked_nft_id:t}}static buildLockPositionInfo(e){const t=Q(e),{value:n}=t.value.fields;return{type:n.type,position_id:n.fields.position_id,start_time:Number(n.fields.start_time),lock_period:Number(n.fields.lock_period),end_time:Number(n.fields.end_time),growth_rewarder:n.fields.growth_rewarder,rewarder_owned:n.fields.rewarder_owned,is_settled:n.fields.is_settled}}static isLocked(e){return e.end_time>Date.parse(new Date().toString())/1e3}},r_=class{constructor(e){U(this,"_sdk");U(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e=!1){var s;const{booster:t}=this._sdk.sdkOptions,n=`${t.package_id}_getPoolImmutables`,i=this.getCache(n,e),o=[];if(i!==void 0)o.push(...i);else{const r=[];(s=(await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(I(t).booster_pool_handle)).data)==null||s.forEach(d=>{r.push(d.objectId)});const c=await this._sdk.ClmmSDK.fullClient.batchGetObjects(r,{showContent:!0});for(const d of c){const l=Q(d);if(l){const f=Cn.buildPoolImmutables(l);this.updateCache(`${f.pool_id}_getPoolImmutable`,f,V),o.push(f)}}}return this.updateCache(n,o,V),o}async getPoolImmutable(e){const{booster:t}=this._sdk.sdkOptions,n=`${e}_getPoolImmutable`,i=this.getCache(n);if(i!==void 0)return i;const o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:I(t).booster_pool_handle,name:{type:"0x2::object::ID",value:e}}),s=Q(o),r=Cn.buildPoolImmutables(s);return this.updateCache(n,r,V),r}async getPools(){const e=[],n=(await this.getPoolImmutables()).map(o=>o.pool_id),i=await this._sdk.ClmmSDK.fullClient.batchGetObjects(n,{showType:!0,showContent:!0});for(const o of i){const s=Cn.buildPoolState(o);if(s){const r={...await this.getPoolImmutable(s.pool_id),...s};e.push(r);const a=`${r.pool_id}_getPoolObject`;this.updateCache(a,r,V)}}return e}async getPool(e,t=!0){const n=`${e}_getPoolObject`,i=this.getCache(n,t),o=await this.getPoolImmutable(e);if(i!==void 0)return{...o,...i};const s=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),r=Cn.buildPoolState(s),a={...o,...r};return this.updateCache(n,a,V),a}async getPoolHandleId(e){const t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),n=Q(t);return n?n.list.fields.id.id:""}async getBoosterInitConfigs(){var i;const{package_id:e}=this.sdk.sdkOptions.booster,t=(i=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitEvent`}))==null?void 0:i.data,n={booster_config_id:"",booster_pool_handle:""};return t.length>0&&t.forEach(o=>{const s=o.parsedJson;s&&(n.booster_config_id=s.config_id)}),n.booster_pool_handle=await this.getPoolHandleId(n.booster_config_id),n}async getOwnerBoosterPositions(e,t,n){const{booster:i}=this.sdk.sdkOptions,o=[],s=[],r=`${i.package_id}::lock_nft::LockNFT<${this._sdk.ClmmSDK.Position.buildPositionType()}>`,a=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showOwner:!0},filter:{StructType:r}});for(const d of a.data)if(D(Jt(d)).source_address===r&&d.data){const f=Cn.buildLockNFT(d);this.updateCache(`${f.locked_nft_id}_getBoosterPositionById`,f,V),f&&(t===void 0||t===f.lock_clmm_position.pool)&&o.push(f)}const c=await this.getLockPositionInfos(n,o.map(d=>d.locked_nft_id));for(const d of o)for(const l of c)if(d.lock_clmm_position.pos_object_id===l.position_id){s.push({...d,...l});break}return s}async getBoosterPosition(e,t){const n=`${t}_getBoosterPositionById`,i=this.getCache(n);let o;if(i!==void 0)o=i;else{const r=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0,showOwner:!0}});o=Cn.buildLockNFT(r),this.updateCache(n,o,V)}const s=await this.getLockPositionInfo(e,t);return{...o,...s}}async getLockPositionInfos(e,t=[]){var s;const n=await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(e),i=[],o=[];return(s=n.data)==null||s.forEach(r=>{t.length>0?t.includes(r.name.value)&&i.push(r.objectId):i.push(r.objectId)}),i.length>0&&(await this._sdk.ClmmSDK.fullClient.batchGetObjects(i,{showContent:!0})).forEach(a=>{const c=Cn.buildLockPositionInfo(a);c&&o.push(c)}),o}async getLockPositionInfo(e,t){const n=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}});return Cn.buildLockPositionInfo(n)}calculateXCetusRewarder(e,t,n){let i=t.basic_percent,o="0";e.forEach(a=>{a.coin_address===t.booster_type&&(console.log("find ",t.booster_type),o=a.amount_owed.toString())}),n.is_settled||t.config.forEach(a=>{a.lock_day===n.lock_period&&(i=a.multiplier)});const s=w(o).sub(n.growth_rewarder).mul(i);return w(n.rewarder_owned).add(s).toString()}lockPositionPayload(e){const{booster:t}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions,i=new R;return i.moveCall({target:`${t.published_at}::${us}::lock_position`,typeArguments:[e.booster_type,e.coinTypeA,e.coinTypeB],arguments:[i.object(I(t).booster_config_id),i.object(I(n).global_config_id),i.object(e.booster_pool_id),i.object(e.clmm_pool_id),i.object(e.clmm_position_id),i.pure.u16(e.lock_day),i.object(q)]}),i}canceLockPositionPayload(e){const{booster:t}=this.sdk.sdkOptions,n=new R;return n.moveCall({target:`${t.published_at}::${us}::cancel_lock`,typeArguments:[e.booster_type],arguments:[n.object(I(t).booster_config_id),n.object(e.booster_pool_id),n.object(e.lock_nft_id),n.object(q)]}),n}redeemPayload(e){const{booster:t,xcetus:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions,o=new R,s=I(n);return o.moveCall({target:`${t.published_at}::${us}::redeem`,typeArguments:[e.booster_type,e.coinTypeA,e.coinTypeB],arguments:[o.object(I(t).booster_config_id),o.object(I(i).global_config_id),o.object(e.booster_pool_id),o.object(e.lock_nft_id),o.object(e.clmm_pool_id),o.object(s.lock_manager_id),o.object(s.xcetus_manager_id),o.object(e.ve_nft_id),o.object(q)]}),o}updateCache(e,t,n=Et){let i=this._cache[e];i?(i.overdueTime=pe(n),i.value=t):i=new St(t,pe(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e];if(!t&&(n!=null&&n.isValid()))return n.value;delete this._cache[e]}},xt="router",fd=1e9,Ct=class{static priceRealToFix(e,t,n){const i=w(t-n).toNumber();return Number(w(e).div(w(10).pow(w(i))).toString())}static priceFixToReal(e,t,n){const i=w(t-n).toNumber();return Number(w(e).mul(w(10).pow(w(i))).toString())}static raiseTotalAmount(e,t,n){const i=w(t-n).abs().toNumber();return t>n?Number(w(e.total_supply).mul(e.current_price).div(w(10).pow(w(i))).toString()):Number(w(e.total_supply).mul(e.current_price).mul(w(10).pow(w(i))).toString())}static buildLaunchPadPool(e){const t=Jt(e),n=D(t),i=Q(e),o={coin_type_sale:n.type_arguments[0],coin_type_raise:n.type_arguments[1],pool_address:he(Wt(e)),is_settle:i.is_settle,current_price:w(i.initialize_price).div(w(fd)).toString(),price:i.initialize_price,min_price:"0",max_price:"0",sale_coin_amount:i.sale_coin,raise_coin_amount:i.raise_coin,total_purchase_amount:i.reality_raise_total,total_supply:i.sale_total,min_purchase:i.min_purchase,max_purchase:i.max_purchase,complete_raise_limit:i.least_raise_amount,softcap:i.softcap,max_raise_amount:i.hardcap,sale_decimals:0,raise_decimals:0,liquidity_injection_ratio:Number(i.liquidity_rate)/1e4,is_cancel:i.is_cancel,duration_summary:{start_time:Number(i.duration_manager.fields.start_time),end_time:0,settle_end_time:0,purchase_duration:Number(i.duration_manager.fields.activity_duration),settle_duration:Number(i.duration_manager.fields.settle_duration),lock_up_duration:Number(i.duration_manager.fields.locked_duration)},white_summary:{white_handle:i.white_list.fields.users.fields.id.id,protection_hard_cap:i.white_list.fields.hard_cap_total,protection_limit_used:i.white_list.fields.purchase_total,size:Number(i.white_list.fields.users.fields.size)},unused_sale:i.unused_sale,harvest_raise:i.harvest_raise,tick_spacing:Number(i.tick_spacing),owner:i.recipient,purchase_summary:{purchase_handle:i.purchase_list.fields.id.id,size:Number(i.purchase_list.fields.size)},pool_status:"Failed"};return Ct.updatePoolStatus(o),o}static updatePoolStatus(e){const t=Number(w(Date.now()/1e3).toFixed(0)),{duration_summary:n}=e,i=n.start_time+n.purchase_duration,o=i+n.settle_duration;if(n.end_time=i,n.settle_end_time=o,e.is_settle)e.pool_status="Ended";else if(e.is_cancel)e.pool_status="Canceled";else if(t<n.start_time)e.pool_status="Upcoming";else if(t>n.start_time&&t<i)e.pool_status="Live";else if(t>i&&t<o){const s=e.raise_coin_amount;Number(s)<Number(e.complete_raise_limit)?e.pool_status="Failed":e.pool_status="Settle"}return e}static async calculatePoolPrice(e,t){const n=await e.ClmmSDK.CetusConfig.getTokenListByCoinTypes([t.coin_type_sale,t.coin_type_raise]),i=n[t.coin_type_sale].decimals,o=n[t.coin_type_raise].decimals;t.min_price=this.priceFixToReal(Number(w(t.softcap).div(w(t.total_supply))),i,o).toString(),t.max_price=this.priceFixToReal(Number(w(t.max_raise_amount).div(w(t.total_supply))),i,o).toString(),t.current_price=this.priceFixToReal(Number(t.current_price),i,o).toString(),t.sale_decimals=i,t.raise_decimals=o}static async getWithdrawRaise(e){return e.pool_status==="Ended"?e.harvest_raise:"0"}static async getWithdrawSale(e){return e.pool_status==="Ended"?e.unused_sale:e.sale_coin_amount}static async getHistoryWithdrawRaise(e,t){if(t.pool_status==="Ended"){if(w(t.harvest_raise).equals(w(0))){const i=await e.Launchpad.getSettleEvent(t.pool_address);i&&(t.harvest_raise=i.unused_raise)}const n=g.min(new g(t.total_purchase_amount),new g(t.max_raise_amount));return w(n.toString()).mul(1-t.liquidity_injection_ratio).toString()}return"0"}static async getHistoryWithdrawSale(e,t){if(t.pool_status==="Ended"){const n=await e.Launchpad.getSettleEvent(t.pool_address);return n&&(t.unused_sale=n.unused_sale),t.unused_sale}return"0"}static async getOverrecruitReverseAmount(e,t){const n=await e.Launchpad.getPurchaseMarks(e.ClmmSDK.senderAddress,[t.pool_address],!1);if(n.length>0){const i=n[0].purchased_raise_amount,o=(await e.Launchpad.getPurchaseAmount(t.white_summary.white_handle,e.ClmmSDK.senderAddress)).safe_purchased_amount,{protection_limit_used:s}=t.white_summary;return w(i).sub(o).div(w(t.total_purchase_amount).sub(s)).mul(w(t.total_purchase_amount).sub(t.max_raise_amount)).toString()}return"0"}static async getCanPurchaseAmount(e,t){const n=await Ct.getOverrecruitReverseAmount(e,t),i=await e.Launchpad.getPurchaseMarks(e.ClmmSDK.senderAddress,[t.pool_address],!1);if(i){const o=i[0].purchased_raise_amount;w(o).sub(n).div(t.current_price)}return"0"}},a_=class{constructor(e){U(this,"_sdk");U(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e=[],t=0,n=100,i=!1){var l;const{package_id:o}=this._sdk.sdkOptions.launchpad;if(o===void 0)throw Error("sdk.sdkOptions.launchpad is undefined");const s=`${o}_getPoolImmutables`,r=this.getCache(s,i),a=[],c=[];if(r!==void 0&&a.push(...r),a.length===0)try{((l=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${o}::factory::CreatePoolEvent`}))==null?void 0:l.data).forEach(_=>{const b=_.parsedJson;b&&a.push({pool_address:b.pool_id,coin_type_sale:D(b.sale_coin.name).full_address,coin_type_raise:D(b.raise_coin.name).full_address})}),this.updateCache(s,a,V)}catch(f){console.log("getPoolImmutables",f)}const d=e.length>0;for(let f=0;f<a.length;f+=1){const _=a[f];if(!(d&&!e.includes(_.pool_address))){if(!d){const b=f;if(b<t||b>=t+n)continue}c.push(_)}}return c}async getPoolImmutablesWithPage(e="all",t=!1){const{package_id:n}=this._sdk.sdkOptions.launchpad,i=`${n}_getPoolImmutables`,o=[],s={data:[],hasNextPage:!1},r=e==="all";if(r){const a=this.getCache(i,t);a&&o.push(...a)}if(o.length===0)try{const a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${n}::factory::CreatePoolEvent`},e);s.hasNextPage=a.hasNextPage,s.nextCursor=a.nextCursor,a.data.forEach(c=>{const d=c.parsedJson;d&&o.push({pool_address:d.pool_id,coin_type_sale:D(d.sale_coin.name).full_address,coin_type_raise:D(d.raise_coin.name).full_address})})}catch(a){console.log("getPoolImmutables",a)}return s.data=o,r&&this.updateCache(i,o,V),s}async getPools(e=[],t=0,n=100){const i=[];let o=[];e.length>0?o=[...e]:(await this.getPoolImmutables([],t,n,!1)).forEach(a=>{o.push(a.pool_address)});const s=await this._sdk.ClmmSDK.fullClient.batchGetObjects(o,{showType:!0,showContent:!0});for(const r of s){const a=Ct.buildLaunchPadPool(r);await Ct.calculatePoolPrice(this._sdk,a),i.push(a);const c=`${a.pool_address}_getPoolObject`;this.updateCache(c,a,V)}return i}async getPool(e,t=!0){const n=`${e}_getPoolObject`,i=this.getCache(n,t);if(i!==void 0){const r=i;return Ct.updatePoolStatus(r),r}const o=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),s=Ct.buildLaunchPadPool(o);return await Ct.calculatePoolPrice(this._sdk,s),this.updateCache(n,s),s}async getInitConfig(e=!1){var c;const t=this._sdk.sdkOptions.launchpad.package_id,n=`${t}_getInitEvent`,i=this.getCache(n,e);if(i!==void 0)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),s=Mi(o),r=(c=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({Transaction:s}))==null?void 0:c.data,a={pools_id:"",admin_cap_id:"",config_cap_id:""};return r.length>0&&(r.forEach(d=>{const l=d.parsedJson;if(l)switch(D(d.type).full_address){case`${t}::config::InitConfigEvent`:a.admin_cap_id=l.admin_cap_id,a.config_cap_id=l.config_cap_id;break;case`${t}::factory::InitFactoryEvent`:a.pools_id=l.pools_id;break}}),this.updateCache(n,a,V)),a}async getLockNFT(e,t=!1){const n=`${e}_getLockNFT`,i=this.getCache(n,t);if(i!==void 0)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}});if(!o.error)return ei(o)}async getLockNFTList(e){var o;const{package_id:t}=this._sdk.ClmmSDK.sdkOptions.clmm_pool,{sdkOptions:n}=this._sdk,i=[];try{const s=(o=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${n.launchpad.package_id}::lock::LockNFTEvent`}))==null?void 0:o.data;for(const r of s){const a=r.parsedJson;if(a){const c={locked_time:Number(a.locked_time),end_lock_time:Number(a.end_lock_time),nft_type:a.nft_type_name.name,lock_nft_id:a.lock_nft_id,recipient:a.recipient};if(e===c.recipient&&`${t}`===D(c.nft_type).address){const d=await this.getLockNFT(c.lock_nft_id);if(d){const l=D(d.coin_type_a).full_address,f=D(d.coin_type_b).full_address;i.push({...d,coin_type_a:l,coin_type_b:f,...c})}}}}return i}catch(s){return console.log("getLockNFTList:",s),[]}}async creatPoolTransactionPayload(e){const{launchpad:t}=this.sdk.sdkOptions,n=I(t);if(this.assertLuanchpadConfig(),this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const i=Ct.priceRealToFix(Number(e.initialize_price),e.sale_decimals,e.raise_decimals),o=new R,s=w(e.total_supply).add(w(e.total_supply).mul(w(e.liquidity_rate))).toNumber(),r=await X.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,o,BigInt(s),e.coin_type_sale),a=[o.object(n.admin_cap_id),o.object(n.config_cap_id),o.object(n.pools_id),o.object(oe(e.recipient)),o.pure.u128((i*fd).toString()),r,o.pure.u64(e.total_supply.toString()),o.pure.u64(e.min_purchase.toString()),o.pure.u64(e.max_purchase.toString()),o.pure.u64(e.least_raise_amount.toString()),o.pure.u64(e.hardcap.toString()),o.pure.u64((e.liquidity_rate*1e3).toString()),o.pure.u64(e.start_time.toString()),o.pure.u64(e.activity_duration.toString()),o.pure.u64(e.settle_duration.toString()),o.pure.u64(e.locked_duration.toString()),o.pure.u32(e.tick_spacing),o.object(q)],c=[e.coin_type_sale,e.coin_type_raise];return o.moveCall({target:`${t.published_at}::${xt}::create_launch_pool`,typeArguments:c,arguments:a}),o}async creatPurchasePayload(e){const{launchpad:t}=this.sdk.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const n=new R,i=await X.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,n,BigInt(e.purchase_amount),e.coin_type_raise),o=(await this.getPurchaseMarks(this._sdk.ClmmSDK.senderAddress,[e.pool_address],!1))[0],s=[e.coin_type_sale,e.coin_type_raise];let r;return o?r=[n.object(e.pool_address),n.object(I(t).config_cap_id),n.object(o.id),i,n.pure.u64(e.purchase_amount.toString()),n.object(q)]:r=[n.object(e.pool_address),n.object(I(t).config_cap_id),i,n.pure.u64(e.purchase_amount.toString()),n.object(q)],n.moveCall({target:`${t.published_at}::${xt}::${o===void 0?"create_and_purchase":"purchase"}`,typeArguments:s,arguments:r}),n}async creatClaimPayload(e){const{launchpad:t}=this.sdk.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const n=(await this.getPurchaseMarks(this._sdk.ClmmSDK.senderAddress,[e.pool_address],!1))[0],i=new R,o=[e.coin_type_sale,e.coin_type_raise],s=[i.object(e.pool_address),i.object(I(t).config_cap_id),i.object(n==null?void 0:n.id),i.object(q)];return i.moveCall({target:`${t.published_at}::${xt}::claim`,typeArguments:o,arguments:s}),i}async creatSettlePayload(e){const{launchpad:t}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");this.assertLuanchpadConfig();const i=I(n),{clmm_args:o}=e,s=new R;s.setSender(this.sdk.ClmmSDK.senderAddress);const r=[e.coin_type_sale,e.coin_type_raise];if(o){const a=o.opposite?G.priceToSqrtPriceX64(w(1).div(o.current_price),o.raise_decimals,o.sale_decimals).toString():G.priceToSqrtPriceX64(w(o.current_price),o.sale_decimals,o.raise_decimals).toString(),c=BigInt(a)<BigInt(o.clmm_sqrt_price),d=o.opposite?c?e.coin_type_raise:e.coin_type_sale:c?e.coin_type_sale:e.coin_type_raise,l=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,d);let f=ce.calculateTotalBalance(l);ce.isSuiCoin(d)&&(f-=BigInt(2e8));const b=X.buildCoinForAmount(s,l,f,d).targetCoin,y=o.opposite?c?"settle_with_reverse_clmm_only_with_a":"settle_with_reverse_clmm_only_with_b":c?"settle_only_with_a":"settle_only_with_b",A=[s.object(e.pool_address),s.object(I(t).config_cap_id),s.object(o.clmm_pool_address),s.object(i.global_config_id),s.pure.u128(a),b,s.object(q)];s.moveCall({target:`${t.published_at}::${xt}::${y}`,typeArguments:r,arguments:A})}else s.moveCall({target:`${t.published_at}::${xt}::settle`,typeArguments:r,arguments:[s.object(e.pool_address),s.object(I(t).config_cap_id),s.object(q)]});return s}creatWithdrawPayload(e){const{launchpad:t}=this.sdk.sdkOptions,n=new R,i=[e.coin_type_sale,e.coin_type_raise],o=[n.object(e.pool_address),n.object(I(t).config_cap_id),n.object(q)];return e.sale_amount>BigInt(0)&&n.moveCall({target:`${t.published_at}::${xt}::withdraw_sale`,typeArguments:i,arguments:o}),e.raise_amount>BigInt(0)&&n.moveCall({target:`${t.published_at}::${xt}::withdraw_raise`,typeArguments:i,arguments:o}),n}addUserToWhitelisPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new R,i=[e.coin_type_sale,e.coin_type_raise];return e.user_addrs.forEach(o=>{const s=[n.object(I(t).admin_cap_id),n.object(I(t).config_cap_id),n.object(e.pool_address),n.object(o),n.pure.u64(e.safe_limit_amount),n.object(q)];n.moveCall({target:`${t.published_at}::${xt}::add_user_to_whitelist`,typeArguments:i,arguments:s})}),n}updateWhitelistCapPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new R,i=[e.coin_type_sale,e.coin_type_raise];return e.safe_limit_amount>0&&n.moveCall({target:`${t.published_at}::${xt}::update_whitelist_member_safe_limit_amount`,typeArguments:i,arguments:[n.object(I(t).admin_cap_id),n.object(I(t).config_cap_id),n.object(e.pool_address),n.pure.address(e.white_list_member),n.pure.u64(e.safe_limit_amount),n.object(q)]}),e.hard_cap_total>0&&n.moveCall({target:`${t.published_at}::${xt}::update_whitelist_hard_cap_total`,typeArguments:i,arguments:[n.object(I(t).admin_cap_id),n.object(I(t).config_cap_id),n.object(e.pool_address),n.pure.u64(e.hard_cap_total),n.object(q)]}),n}creatRemoveWhitelistPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new R,i=[e.coin_type_sale,e.coin_type_raise];return e.user_addrs.forEach(o=>{const s=[n.object(I(t).admin_cap_id),n.object(I(t).config_cap_id),n.object(e.pool_address),n.object(o),n.object(q)];n.moveCall({target:`${t.published_at}::${xt}::remove_user_from_whitelist`,typeArguments:i,arguments:s})}),n}creatCancelPoolPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new R,i=[e.coin_type_sale,e.coin_type_raise],o=[n.object(I(t).admin_cap_id),n.object(I(t).config_cap_id),n.object(e.pool_address),n.object(q)];return n.moveCall({target:`${t.published_at}::${xt}::cancel`,typeArguments:i,arguments:o}),n}updateRecipientPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new R,i=[e.coin_type_sale,e.coin_type_raise],o=[n.object(I(t).admin_cap_id),n.object(I(t).config_cap_id),n.object(e.pool_address),n.object(e.new_recipient),n.object(q)];return n.moveCall({target:`${t.published_at}::${xt}::update_recipient_address`,typeArguments:i,arguments:o}),n}updatePoolDuractionPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const n=new R,i=[e.coin_type_sale,e.coin_type_raise],o=[n.object(I(t).admin_cap_id),n.object(I(t).config_cap_id),n.object(e.pool_address),n.pure.u64(e.activity_duration),n.pure.u64(e.settle_duration),n.pure.u64(e.lock_duration),n.object(q)];return n.moveCall({target:`${t.published_at}::${xt}::update_pool_duration`,typeArguments:i,arguments:o}),n}creatUnlockNftPayload(e){const{launchpad:t}=this.sdk.sdkOptions;if(I(t)===void 0)throw Error("getPackagerConfigs(launchpad)  is null");const n=new R,i=[e.nft_type],o=[n.object(e.lock_nft),n.object(q)];return n.moveCall({target:`${t.published_at}::lock::unlock_nft`,typeArguments:i,arguments:o}),n}async isAdminCap(e){const{launchpad:t}=this._sdk.sdkOptions;if(I(t)===void 0)throw Error("launchpad config is empty");const n=`${e}_isAdminCap`,i=this.getCache(n);if(i)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:I(t).admin_cap_id,options:{showType:!0,showOwner:!0}});console.log(o);const s=$n(o),r=bo(o);let a=!1;return r&&s&&D(s).source_address===`${t.package_id}::config::AdminCap`&&(a=oe(r.AddressOwner)===oe(e)),this.updateCache(n,a,V),a}async isWhiteListUser(e,t){const n={type:"address",value:t};try{const i=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:n});return!!(i&&i.data)}catch{return!1}}async getPurchaseAmount(e,t){var i;const n={type:"address",value:t};try{const o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:n}),s=Q(o);if(console.log(s),s)return(i=s==null?void 0:s.value)==null?void 0:i.fields}catch{}return{safe_limit_amount:"0",safe_purchased_amount:"0"}}async getPurchaseMarks(e,t=[],n=!0){const{launchpad:i}=this._sdk.sdkOptions,o=`${t}_getPurchaseMark`,s=this.getCache(o,n);if(!n&&s!==void 0)return s;let r=null;const a=[];for(;;){const c=await this._sdk.ClmmSDK.fullClient.getOwnedObjects({owner:e,options:{showType:!0,showContent:!0,showDisplay:!0},cursor:r});for(const d of c.data){const{fields:l}=d.data.content;if(D(Jt(d)).source_address===`${i.package_id}::pool::PurchaseMark`){console.log("fields: ",l);const _={id:l.id.id,pool_id:D(l.pool_id).address,purchased_raise_amount:l.purchase_total,obtain_sale_amount:l.obtain_sale_amount,used_raise_amount:l.used_raise_amount};t.length>0?t.includes(_.pool_id)&&a.push(_):a.push(_)}}if(c.hasNextPage)r=c.nextCursor;else break}return this.updateCache(o,a,V),a}async getSettleEvent(e){const{launchpad:t}=this._sdk.sdkOptions,n=`${e}_getPurchaseMark`,i=this.getCache(n);if(i!==void 0)return i;const o=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t.package_id}::pool::SettleEvent`});for(const s of o.data){const r=s.parsedJson;if(e===he(r.pool_id)){const a={pool_id:r.pool_id,settle_price:r.settle_price,unused_sale:r.unused_sale,unused_raise:r.unused_raise,white_purchase_total:r.white_purchase_total};return this.updateCache(n,a,V),a}}}buildLaunchpadCoinType(e,t){return po(this._sdk.sdkOptions.launchpad.package_id,"pool","PoolLiquidityCoin",[e,t])}assertLuanchpadConfig(){const{launchpad:e}=this.sdk.sdkOptions;if(I(e)===void 0)throw Error("sdk getPackagerConfigs(launchpad) is null")}updateCache(e,t,n=Et){let i=this._cache[e];i?(i.overdueTime=pe(n),i.value=t):i=new St(t,pe(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e];if(!t&&(n!=null&&n.isValid()))return n.value;delete this._cache[e]}},An=class{static buildPoolImmutables(e){const{fields:t}=e.value.fields.value;return{clmm_pool_id:D(t.clmm_pool_id).address,bonus_type:D(t.bonus_type.fields.name).source_address,pool_id:D(t.pool_id).address,coinTypeA:D(t.coin_type_a.fields.name).source_address,coinTypeB:D(t.coin_type_b.fields.name).source_address}}static buildPoolState(e){const t=Q(e),n=[];return t.config.fields.contents.forEach(o=>{n.push({rate:Number(w(o.fields.key).div(Xn)),multiplier:Number(w(o.fields.value).div(Xn))})}),{balance:t.balance,config:n,is_open:t.is_open,index:Number(t.index),start_time:Number(t.start_time),interval_day:Number(t.interval_day),minimum_percent_to_reward:Number(w(t.minimum_percent_to_reward).div(Xn)),rewarders:{rewarder_handle:t.rewarders.fields.id.id,size:Number(t.rewarders.fields.size)},whale_nfts:{whale_nfts_handle:t.whale_nfts.fields.id.id,size:Number(t.whale_nfts.fields.size)},points:{point_handle:t.points.fields.id.id,size:Number(t.points.fields.size)}}}static buildMarkerPositions(e){const{contents:t}=e.value.fields.value.fields,n=[],i=e.id.id;return t.forEach(o=>{const{key:s,value:r}=o.fields,a={id:s,period_id:i,bonus_num:r.fields.bonus_num,point:r.fields.point,is_burn:r.fields.is_burn,point_after_multiplier:r.fields.point_after_multiplier,percent:Number(w(r.fields.percent).div(Xn)),fee_share_rate:0,is_redeemed:r.fields.is_redeemed};n.push(a)}),n}static buildPoolBonusInfo(e){const{fields:t,type:n}=e.value.fields.value;return{type:n,time:Number(t.time),settle_time:Number(t.settle_time),settled_num:t.settled_num,is_settled:t.is_settled,basis_bonus:t.basis_bonus,total_bonus:t.total_bonus,is_vacant:t.is_vacant,redeemed_num:t.redeemed_num}}static getBonusPercent(e,t){let n=0;for(const i of e)t>=i.rate&&i.rate>n&&(n=i.multiplier);return n}},ma="router",c_=class{constructor(e){U(this,"_sdk");U(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e=!1){var s;const{maker_bonus:t}=this._sdk.sdkOptions,n=`${t.package_id}_getPoolImmutables`,i=this.getCache(n,e),o=[];if(i!==void 0)o.push(...i);else{const r=[];(s=(await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(I(t).maker_pool_handle)).data)==null||s.forEach(d=>{r.push(d.objectId)});const c=await this._sdk.ClmmSDK.fullClient.batchGetObjects(r,{showContent:!0});for(const d of c){const l=Q(d);l&&o.push(An.buildPoolImmutables(l))}}return o}async getPoolImmutable(e){const{maker_bonus:t}=this._sdk.sdkOptions,n=`${t.package_id}_getPoolImmutables`,i=this.getCache(n);if(i!==void 0){const r=i.filter(a=>e===a.pool_id);if(r.length>0)return r[0]}const o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:I(t).maker_pool_handle,name:{type:"0x2::object::ID",value:e}}),s=Q(o);return An.buildPoolImmutables(s)}async getPools(){const e=[],t=await this.getPoolImmutables(),n=t.map(s=>s.pool_id),i=await this._sdk.ClmmSDK.fullClient.batchGetObjects(n,{showType:!0,showContent:!0});let o=0;for(const s of i){const r=An.buildPoolState(s);if(r){const a={...t[o],...r};e.push(a);const c=`${a.pool_id}_getPoolObject`;this.updateCache(c,a,V)}o+=1}return e}async getPool(e,t=!0){const n=`${e}_getPoolObject`,i=this.getCache(n,t),o=await this.getPoolImmutable(e);if(i!==void 0)return i;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),r=An.buildPoolState(s),a={...o,...r};return this.updateCache(n,a,V),a}async getPoolHandleId(e){const t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),n=Q(t);return n?n.list.fields.id.id:""}async getMakerPoolPeriods(e,t=!1){const n=[],i=`${e.pool_id}_getMakerPoolPeriods`,o=this.getCache(i,t);return o!==void 0?o:((await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(e.whale_nfts.whale_nfts_handle)).data.forEach(r=>{const a={id:r.objectId,start_time:0,end_time:0,period:Number(r.name.value)};a.start_time=Number(w(e.start_time).add(w(e.interval_day).mul(24*3600).mul(a.period)).toFixed(0,L.ROUND_DOWN)),a.end_time=Number(w(a.start_time).add(w(e.interval_day).mul(24*3600)).toFixed(0,L.ROUND_DOWN)),n.push(a)}),this.updateCache(i,n,V),n)}async getMakerBonusInitConfigs(){var i;const{package_id:e}=this.sdk.sdkOptions.maker_bonus,t=(i=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitEvent`}))==null?void 0:i.data,n={maker_config_id:"",maker_pool_handle:""};return t.length>0&&t.forEach(o=>{const s=o.parsedJson;s&&(n.maker_config_id=s.config_id)}),n.maker_pool_handle=await this.getPoolHandleId(n.maker_config_id),n}async getPoolMarkerPositionList(e,t,n=!1){const i={},o=[];n||t.forEach(s=>{const r=`${e}_${s.period}_getPoolMarkerPositionList`,a=this.getCache(r);a!==void 0?i[s.period]=a:(i[s.period]=[],o.push(s))});try{o.length>0&&(await this._sdk.ClmmSDK.fullClient.batchGetObjects(o.map(a=>a.id),{showContent:!0})).forEach(a=>{const c=Q(a),d=An.buildMarkerPositions(c);if(d.length>0){const{period_id:l}=d[0],f=t.filter(_=>_.id===l)[0];i[f.period]=d}});const s=[];for(const r in i)i[r].forEach(c=>{s.push(c)});if(s.length>0){const r=await this._sdk.ClmmSDK.Position.getSipmlePositionList(s.map(a=>a.id));for(const a of s)for(const c of r)if(a.id===c.pos_object_id){a.clmm_position=c;break}}}catch(s){console.log(s)}for(const s in i){const r=`${e}_${s}_getPoolMarkerPositionList`;this.updateCache(r,i[s],V)}return i}async updateXCetusRewarderAndFee(e,t,n){const i=await this.calculateTotalPointsAfterMultiper(e,n);for(const o of t)await this.calculateXCetusRewarder(e,o,n.period,i);return t}async calculateXCetusRewarder(e,t,n,i){const o=await this.getPoolBonusInfo(e.rewarders.rewarder_handle,n),{fee_share_rate:s}=this.calculateFeeShareRate(e,t,i),r=w(s).mul(o.total_bonus);return t.is_redeemed?t.bonus_num="0":t.bonus_num=r.toString(),t.bonus_num}calculateFeeShareRate(e,t,n){const i=An.getBonusPercent(e.config,t.percent),o=w(t.point).mul(i),s=w(o).div(n);return t.point_after_multiplier=o.toString(),t.fee_share_rate=Number(s),{fee_share_rate:Number(s),points_after_multiper:o.toString()}}async calculateTotalPointsAfterMultiper(e,t){const n=await this.getPoolMarkerPositionList(e.whale_nfts.whale_nfts_handle,[t]);let i=w(0);const o=n[t.period];for(const s of o){const r=An.getBonusPercent(e.config,s.percent),a=w(s.point).mul(r);i=i.add(a)}return i.toString()}async calculateAllXCetusRewarder(e){const t=this._sdk.ClmmSDK.senderAddress;let n=w(0);const i=[];for(const o of e){const s=await this._sdk.MakerModule.getMakerPoolPeriods(o),r=await this._sdk.MakerModule.getPoolMarkerPositionList(o.whale_nfts.whale_nfts_handle,s),a=[];for(const c of s){const d=r[c.period].filter(l=>{var f;return t.length===0?!1:((f=l.clmm_position)==null?void 0:f.owner)===t});d.length>0&&(await this._sdk.MakerModule.updateXCetusRewarderAndFee(o,d,c),d.forEach(l=>{var f;((f=l.clmm_position)==null?void 0:f.position_status)===id.Exists&&w(l.bonus_num).greaterThan(0)&&(n=n.add(l.bonus_num),a.includes(l.clmm_position.pos_object_id)||a.push(l.clmm_position.pos_object_id))}))}i.push({bonus_type:o.bonus_type,pool_id:o.pool_id,nft_ids:a})}return{claimtotal:n,claimRecord:i}}async getPoolBonusInfo(e,t,n=!1){const i=`${e}_${t}_getPoolBonusInfo`,o=this.getCache(i,n);if(o!==void 0)return o;const s=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"u64",value:t.toString()}}),r=Q(s),a=An.buildPoolBonusInfo(r);return this.updateCache(i,a,Et),a}claimPayload(e){const{maker_bonus:t,xcetus:n}=this.sdk.sdkOptions,i=new R;return i.moveCall({target:`${t.published_at}::${ma}::claim`,typeArguments:[e.bonus_type],arguments:[i.object(I(t).maker_config_id),i.object(e.market_pool_id),i.object(e.position_nft_id),i.pure.u8(e.phase),i.object(I(n).lock_manager_id),i.object(I(n).xcetus_manager_id),i.object(e.ve_nft_id)]}),i}claimAllPayload(e){const{maker_bonus:t,xcetus:n}=this.sdk.sdkOptions,i=new R;return e.whale_nfts.forEach(o=>{o.nft_ids.forEach(s=>{i.moveCall({target:`${t.published_at}::${ma}::claim_all`,typeArguments:[o.bonus_type],arguments:[i.object(I(t).maker_config_id),i.object(o.pool_id),i.object(s),i.object(I(n).lock_manager_id),i.object(I(n).xcetus_manager_id),i.object(e.ve_nft_id)]})})}),i}updateCache(e,t,n=Et){let i=this._cache[e];i?(i.overdueTime=pe(n),i.value=t):i=new St(t,pe(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e];if(!t&&(n!=null&&n.isValid()))return n.value;delete this._cache[e]}},Un="router",Li="router",wi=24*3600,go=1e3,Rt=1e11,En=class{static buildVeNFTDividendInfo(e){const t={id:e.id.id,ve_nft_id:e.name,rewards:[]};return e.value.fields.value.fields.dividends.fields.contents.forEach(n=>{const i=[];n.fields.value.fields.contents.forEach(o=>{i.push({coin_type:D(o.fields.key.fields.name).source_address,amount:o.fields.value})}),t.rewards.push({period:Number(n.fields.key),rewards:i,vesrion:"v1"})}),t}static buildDividendManager(e){const t={id:e.id.id,dividends:{id:e.dividends.fields.id.id,size:e.dividends.fields.size},venft_dividends:{id:e.venft_dividends.fields.id.id,size:e.venft_dividends.fields.size},bonus_types:[],start_time:Number(e.start_time),interval_day:Number(e.interval_day),balances:{id:e.balances.fields.id.id,size:e.balances.fields.size},is_open:e.is_open};return e.bonus_types.forEach(n=>{t.bonus_types.push(D(n.fields.name).source_address)}),t}static buildLockUpManager(e){return{id:e.id.id,balance:e.balance,treasury_manager:e.treasury_manager,extra_treasury:e.extra_treasury,lock_infos:{lock_handle_id:e.lock_infos.fields.id.id,size:Number(e.lock_infos.fields.size)},type_name:ke(e.type_name.fields.name),min_lock_day:Number(e.min_lock_day),max_lock_day:Number(e.max_lock_day),package_version:Number(e.package_version),max_percent_numerator:Number(e.max_percent_numerator),min_percent_numerator:Number(e.min_percent_numerator)}}static buildLockCetus(e){const t=e.fields,n={id:t.id.id,type:D(e.type).source_address,locked_start_time:Number(t.locked_start_time),locked_until_time:Number(t.locked_until_time),cetus_amount:t.balance,xcetus_amount:"0",lock_day:0};return n.lock_day=(n.locked_until_time-n.locked_start_time)/wi,n}static getAvailableXCetus(e,t){let n=w(0);return t.forEach(i=>{n=n.add(i.xcetus_amount)}),w(e.xcetus_balance).sub(n).toString()}static getWaitUnLockCetuss(e){return e.filter(t=>!En.isLocked(t))}static getLockingCetuss(e){return e.filter(t=>En.isLocked(t))}static isLocked(e){return e.locked_until_time>Date.parse(new Date().toString())/1e3}static buildDividendRewardTypeList(e,t){const n=new Set;return e==null||e.forEach(i=>{i.rewards.forEach(o=>{n.add(o.coin_type)})}),t==null||t.forEach(i=>{i.rewards.forEach(o=>{n.add(o.coin_type)})}),Array.from(n)}static buildDividendRewardTypeListV2(e){const t={};return e==null||e.forEach(n=>{n.rewards.forEach(i=>{t[i.coin_type]||(t[i.coin_type]=[]),t[i.coin_type].push(n.period)})}),t}static getNextStartTime(e){const t=Date.now()/1e3,{start_time:n,interval_day:i}=e,o=Math.ceil((t-n)/(i*wi));return n+o*i*wi}},d_=class{constructor(e){U(this,"_sdk");U(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getOwnerVeNFT(e,t=!0){const{xcetus:n}=this.sdk.sdkOptions,i=`${e}_getLockUpManagerEvent`,o=this.getCache(i,t);if(o!==void 0)return o;let s;const r=`${n.package_id}::xcetus::VeNFT`;return(await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:!0},filter:{StructType:r}})).data.forEach(c=>{const d=D(Jt(c)).source_address;if(d===r&&c.data&&c.data.content){const{fields:l}=c.data.content;s={...Po(c),id:l.id.id,index:l.index,type:d,xcetus_balance:l.xcetus_balance},this.updateCache(i,s,V)}}),s}async getOwnerLockCetuss(e){const{xcetus:t}=this.sdk.sdkOptions,n=[],i=`${t.package_id}::lock_coin::LockedCoin<${this.buileCetusCoinType()}>`,o=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0},filter:{StructType:i}});for(const s of o.data)if(D(Jt(s)).source_address===i&&s.data){const a=En.buildLockCetus(s.data.content);a.xcetus_amount=await this.getXCetusAmount(a.id),n.push(a)}return n}async getLockCetus(e){var n;const t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});if((n=t.data)!=null&&n.content){const i=En.buildLockCetus(t.data.content);return i.xcetus_amount=await this.getXCetusAmount(i.id),i}}async getOwnerCetusCoins(e){return await this._sdk.ClmmSDK.getOwnerCoinAssets(e,this.buileCetusCoinType())}mintVeNFTPayload(){const{xcetus:e}=this.sdk.sdkOptions,t=new R;return t.moveCall({target:`${e.published_at}::${Un}::mint_venft`,typeArguments:[],arguments:[t.object(I(e).xcetus_manager_id)]}),t}async convertPayload(e){const{xcetus:t}=this.sdk.sdkOptions,n=new R,i=this.buileCetusCoinType(),o=await X.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,n,BigInt(e.amount),i);return e.venft_id===void 0?n.moveCall({target:`${t.published_at}::${Un}::mint_and_convert`,typeArguments:[],arguments:[n.object(I(t).lock_manager_id),n.object(I(t).xcetus_manager_id),o,n.pure.u64(e.amount)]}):n.moveCall({target:`${t.published_at}::${Un}::convert`,typeArguments:[],arguments:[n.object(I(t).lock_manager_id),n.object(I(t).xcetus_manager_id),o,n.pure.u64(e.amount),n.object(e.venft_id)]}),n}redeemLockPayload(e){const{xcetus:t}=this.sdk.sdkOptions,n=new R;return n.moveCall({target:`${t.published_at}::${Un}::redeem_lock`,typeArguments:[],arguments:[n.object(I(t).lock_manager_id),n.object(I(t).xcetus_manager_id),n.object(e.venft_id),n.pure.u64(e.amount),n.pure.u64(e.lock_day),n.object(q)]}),n}redeemPayload(e){const{xcetus:t}=this.sdk.sdkOptions,n=new R;return n.moveCall({target:`${t.published_at}::${Un}::redeem`,typeArguments:[],arguments:[n.object(I(t).lock_manager_id),n.object(I(t).xcetus_manager_id),n.object(e.venft_id),n.object(e.lock_id),n.object(q)]}),n}redeemDividendPayload(e,t){const{xcetus:n,xcetus_dividends:i}=this.sdk.sdkOptions,o=new R;return t.forEach(s=>{o.moveCall({target:`${n.published_at}::${Li}::redeem`,typeArguments:[s],arguments:[o.object(I(i).dividend_manager_id),o.object(e)]})}),o}redeemDividendV2Payload(e,t,n){const{xcetus_dividends:i}=this.sdk.sdkOptions;let o=new R;return t.filter(r=>n.includes(r)).length>0&&(o=this.redeemDividendXTokenPayload(e,o)),t.forEach(r=>{n.includes(r)||o.moveCall({target:`${i.published_at}::${Li}::redeem_v2`,typeArguments:[r],arguments:[o.object(I(i).dividend_manager_id),o.object(e),o.object(q)]})}),o}redeemDividendV3Payload(e,t,n,i,o){const{xcetus_dividends:s}=this.sdk.sdkOptions;let r=new R;return n.filter(c=>o.includes(c)).length>0&&(r=this.redeemDividendXTokenPayload(t,r)),n.forEach(c=>{r.moveCall({target:`${s.published_at}::${Li}::redeem_v3`,typeArguments:[c],arguments:[r.object(I(s).dividend_manager_id),r.object(I(s).venft_dividends_id),r.makeMoveVec({elements:i[c].map(d=>r.pure.u64(d)),type:"u64"}),r.object(t),r.object(q)]})}),r}redeemDividendXTokenPayload(e,t){const{xcetus_dividends:n,xcetus:i}=this.sdk.sdkOptions,{xcetus_manager_id:o,lock_manager_id:s}=I(i),{dividend_manager_id:r}=I(n);return t=t===void 0?new R:t,t.moveCall({target:`${n.published_at}::${Li}::redeem_xtoken`,typeArguments:[],arguments:[t.object(s),t.object(o),t.object(r),t.object(e),t.object(q)]}),t}buileCetusCoinType(){return`${this.sdk.sdkOptions.cetus_faucet.package_id}::cetus::CETUS`}buileXTokenCoinType(e=this._sdk.sdkOptions.xcetus.package_id,t="xcetus",n="XCETUS"){return`${e}::${t}::${n}`}cancelRedeemPayload(e){const{xcetus:t}=this.sdk.sdkOptions,n=new R;return n.moveCall({target:`${t.published_at}::${Un}::cancel_redeem_lock`,typeArguments:[],arguments:[n.object(I(t).lock_manager_id),n.object(I(t).xcetus_manager_id),n.object(e.venft_id),n.object(e.lock_id),n.object(q)]}),n}async getInitConfigs(){var r,a;const{package_id:e}=this.sdk.sdkOptions.xcetus,t=`${e}_getInitFactoryEvent`,n=this.getCache(t);if(n!==void 0)return n;const i=(r=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::xcetus::InitEvent`}))==null?void 0:r.data,o={xcetus_manager_id:"",lock_manager_id:"",lock_handle_id:""};i.length>0&&i.forEach(c=>{const d=c.parsedJson;d&&(o.xcetus_manager_id=d.xcetus_manager)});const s=(a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::locking::InitializeEvent`}))==null?void 0:a.data;return s.length>0&&s.forEach(c=>{const d=c.parsedJson;d&&(o.lock_manager_id=d.lock_manager)}),o.lock_manager_id.length>0&&(o.lock_handle_id=(await this.getLockUpManager(o.lock_manager_id)).lock_infos.lock_handle_id),this.updateCache(t,o,V),o}async getLockUpManager(e=I(this.sdk.sdkOptions.xcetus).lock_manager_id,t=!1){const n=`${e}_getLockUpManager`,i=this.getCache(n,t);if(i!==void 0)return i;const o=await this.sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),s=En.buildLockUpManager(Q(o));return this.updateCache(n,s,V),s}async getDividendConfigs(){var d,l,f;const{package_id:e}=this.sdk.sdkOptions.xcetus_dividends,{dividend_manager_id:t,venft_dividends_id:n}=I(this._sdk.sdkOptions.xcetus_dividends),i=`${e}_getDividendManagerEvent`,o=this.getCache(i);if(o!==void 0)return o;const s=(d=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::dividend::InitEvent`}))==null?void 0:d.data,r=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x1::string::String",value:"VeNFTDividends"}}),a={dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:"",venft_dividends_id:"",venft_dividends_id_v2:""};s.length>0&&s.forEach(_=>{const b=_.parsedJson;b&&(a.dividend_manager_id=b.manager_id,a.dividend_admin_id=b.admin_id,a.dividend_settle_id=b.settle_id,this.updateCache(i,a,V))}),r&&r.data&&r.data.content&&(a.venft_dividends_id=(f=(l=r.data.content)==null?void 0:l.fields)==null?void 0:f.value,this.updateCache(i,a,V));const c=await this._sdk.ClmmSDK.fullClient.getObject({id:n,options:{showContent:!0}});return a.venft_dividends_id_v2=c.data.content.fields.venft_dividends.fields.id.id,a}async getDividendManager(e=!1){const{dividend_manager_id:t}=I(this._sdk.sdkOptions.xcetus_dividends),n=`${t}_getDividendManager`,i=this.getCache(n,e);if(i!==void 0)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),s=Q(o);console.log(" ~ file: xcetusModule.ts:563 ~ XCetusModule ~ getDividendManager ~ fields:",s);const r=En.buildDividendManager(s);return this.updateCache(n,r,V),r}async getXcetusManager(e=!0){const{xcetus_manager_id:t}=I(this._sdk.sdkOptions.xcetus),n=`${t}_getXcetusManager`,i=this.getCache(n,e);if(i)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),s=Q(o),r={id:s.id.id,index:Number(s.index),has_venft:{handle:s.has_venft.fields.id.id,size:s.has_venft.fields.size},nfts:{handle:s.nfts.fields.id.id,size:s.nfts.fields.size},total_locked:s.total_locked,treasury:s.treasury.fields.total_supply.fields.value};return this.updateCache(n,r),r}async getVeNFTDividendInfo(e,t,n){let i,o={id:"",ve_nft_id:n,rewards:[]};try{i=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:n}}),console.log(" ~ file: xcetusModule.ts:629 ~ XCetusModule ~ venft_dividends:",i);const r=Q(i);o=En.buildVeNFTDividendInfo(r)}catch{i=void 0}const s=[];try{const r=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x2::object::ID",value:n}}),a=Q(r).value.fields.value.fields.dividends.fields.id.id;let c=null;const d=50,l=[];for(;;){const f=await this._sdk.ClmmSDK.fullClient.getDynamicFields({parentId:a,cursor:c,limit:d});if(f.data.forEach(_=>{l.push(_.objectId)}),c=f.nextCursor,c===null||f.data.length<d)break}for(let f=0;f<l.length;f++){const _=await this._sdk.ClmmSDK.fullClient.getObject({id:l[f],options:{showType:!0,showContent:!0}});s.push({period:Number(_.data.content.fields.name),vesrion:"v2",rewards:_.data.content.fields.value.fields.contents.map(b=>({coin_type:D(b.fields.key.fields.name).source_address,amount:b.fields.value}))})}}catch(r){console.log(" ~ file: xcetusModule.ts:637 ~ XCetusModule ~ error:",r)}return{...o,rewards:[...o.rewards,...s]}}async redeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};const n=await this.getLockUpManager(I(this._sdk.sdkOptions.xcetus).lock_manager_id),i=w(Rt).mul(w(n.max_lock_day).sub(w(t))).mul(w(n.max_percent_numerator).sub(w(n.min_percent_numerator))).div(w(n.max_lock_day).sub(w(n.min_lock_day))),o=w(Rt).mul(w(n.max_percent_numerator)).sub(i).div(w(go)).div(Rt);return{amountOut:w(o).mul(w(e)).round().toString(),percent:o.toString()}}async reverseRedeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};const n=await this.getLockUpManager(I(this._sdk.sdkOptions.xcetus).lock_manager_id),i=w(Rt).mul(w(n.max_lock_day).sub(w(t))).mul(w(n.max_percent_numerator).sub(w(n.min_percent_numerator))).div(w(n.max_lock_day).sub(w(n.min_lock_day))),o=w(Rt).mul(w(n.max_percent_numerator)).sub(i).div(w(go)).div(Rt);return{amountOut:w(e).div(o).toFixed(0,L.ROUND_UP),percent:o.toString()}}async getXCetusAmount(e){const{lock_handle_id:t}=I(this._sdk.sdkOptions.xcetus),n=`${e}_getXCetusAmount`,i=this.getCache(n);if(i!==void 0)return i;try{const o=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x2::object::ID",value:e}}),s=Q(o);if(s){const{xcetus_amount:r}=s.value.fields.value.fields;return this.updateCache(n,r,V),r}}catch{}return"0"}async getVeNftAmount(e,t){try{const n=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),i=Q(n);if(i){const{lock_amount:o,xcetus_amount:s}=i.value.fields.value.fields;return{lock_amount:o,xcetus_amount:s}}}catch{}return{lock_amount:"0",xcetus_amount:"0"}}async getPhaseDividendInfo(e,t=!1){const i=(await this.getDividendManager()).dividends.id,o=`${i}_${e}_getPhaseDividendInfo`,s=this._sdk.getCache(o,t);if(s)return s;try{const r=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:i,name:{type:"u64",value:e}}),a=Q(r),c=a.value.fields.value.fields,d=c.redeemed_num.fields.contents.map(b=>({name:b.fields.key.fields.name,value:b.fields.value})),l=c.bonus_types.map(b=>b.fields.name),f=c.bonus.fields.contents.map(b=>({name:b.fields.key.fields.name,value:b.fields.value})),_={id:Wt(r),phase:a.name,settled_num:c.settled_num,register_time:c.register_time,redeemed_num:d,is_settled:c.is_settled,bonus_types:l,bonus:f,phase_end_time:""};return this.updateCache(o,_),_}catch{}}updateCache(e,t,n=Et){let i=this._cache[e];i?(i.overdueTime=pe(n),i.value=t):i=new St(t,pe(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e];if(!t&&(n!=null&&n.isValid()))return n.value;delete this._cache[e]}},l_="factory",Bt="oversubscribe_pool",hd=1e6,zn=1e18,Kn="router",fs="router",Ui="router",ga={curve:{strategy:3,both_side:{div_width:10,ratios:[.333333,.266666,.2,.133333,.066666]},one_side:{div_width:5,ratios:[.333333,.266666,.2,.133333,.066666]}},bidAsk:{strategy:4,both_side:{div_width:10,ratios:[.172413793,.137931034,.103448276,.068965517,.034482759,.068965517,.103448276,.137931034,.172413793]},one_side:{div_width:5,ratios:[.066666667,.13333333,.2,.266666667,.333333333]}}};function u_(e){return"master_address"in e}var f_="router",h_="vaults",p_=1e4,ut=class{static buildIdoPoolImmutables(e){return{pool_address:he(e.pool_id),coin_type_sale:D(e.sale_coin_type.name).full_address,coin_type_raise:D(e.raise_coin_type.name).full_address,tick_spacing:Number(e.tick_spacing),total_supply:e.total_supply,min_purchase:e.min_purchase_amount,max_purchase:e.max_purchase_amount}}static buildIdoPool(e){const t=Jt(e),n=D(t),i=Q(e);console.log("fields:",i);const o={pool_address:he(i.id.id),coin_type_sale:n.type_arguments[0],coin_type_raise:n.type_arguments[1],tick_spacing:Number(i.tick_spacing),total_supply:i.total_supply,min_purchase:i.min_purchase_amount,max_purchase:i.max_purchase_amount},s={start_time:Number(i.duration_manager.fields.start_time),lock_up_duration:Number(i.duration_manager.fields.lock_up_duration),purchase_duration:Number(i.duration_manager.fields.purchase_duration),end_time:0};s.end_time=s.start_time+s.purchase_duration;const r={complete_raise_limit:i.complete_raise_limit,liquidity_injection_ratio:w(i.liquidity_injection_ratio).div(hd).toNumber(),current_sqrt_price_min:i.current_sqrt_price_min,current_sqrt_price_max:i.current_sqrt_price_max,owner:i.owner,sale_coin_amount:i.sale_coin,raise_coin_amount:i.raise_coin,price:i.price,current_price:i.price,duration_summary:s,is_cancelled:i.is_cancelled,is_liquidity_injected:i.is_liquidity_injected,liquidity_used_raise_amount:i.liquidity_used_raise_amount,liquidity_used_sale_amount:i.liquidity_used_sale_amount,purchase_summary:{size:Number(i.purchase_manager.fields.purchases.fields.size),purchase_handle:i.purchase_manager.fields.purchases.fields.id.id},total_purchase_amount:i.total_purchase_amount,white_summary:{white_list_id:i.white_list.fields.id.id,protection_limit_used:i.white_list.fields.protection_limit_used,protection_hard_cap:i.white_list.fields.protection_hard_cap,white_handle:i.white_list.fields.addresses.fields.id.id,size:Number(i.white_list.fields.addresses.fields.size)},pool_status:"Upcoming",max_raise_amount:"",sale_decimals:0,raise_decimals:0,is_withdrawn:i.is_withdrawn};return ut.updatePoolStatus(r),{...o,...r}}static is_init_period(e){return Number(w(Date.now()/1e3).toFixed(0))<e.start_time}static is_purchase_period(e){const t=Number(w(Date.now()/1e3).toFixed(0));return t>=e.start_time&&t<=e.start_time+e.purchase_duration}static is_claim_period(e){const t=Number(w(Date.now()/1e3).toFixed(0)),n=e.start_time+e.purchase_duration;return t>n}static is_can_inject_liquidity(e){return!e.is_cancelled&&e.liquidity_injection_ratio!==0&&ut.is_claim_period(e.duration_summary)&&!e.is_liquidity_injected}static is_can_withdraw(e){return e.is_withdrawn?!1:ut.is_sale_failed(e)?!0:(e.liquidity_injection_ratio===0||e.is_liquidity_injected)&&ut.is_claim_period(e.duration_summary)}static is_sale_failed(e){return!!(e.is_cancelled||ut.is_claim_period(e.duration_summary)&&w(e.total_purchase_amount).lessThan(e.complete_raise_limit))}static buildPurchaseInfo(e){return{...e.value.fields.value.fields,owner:e.name}}static calculateRedeemAmount(e,t){let n,i;if(ut.is_sale_failed(e))n="0",i="0";else if(t.is_redeemed)n=t.obtained_sale_amount,i=t.used_raise_amount;else if(w(e.total_purchase_amount).lessThanOrEqualTo(e.max_raise_amount))n=w(t.purchased_raise_amount).mul(zn).div(e.price).toString(),i=t.purchased_raise_amount;else{const s=ut.redeemForSaleOversubcribeV2(e,t);n=s.user_obtained_sale_amount,i=s.user_used_raise_amount_ceil}n=L.floor(n);const o=L.floor(w(t.purchased_raise_amount).sub(i).toString());return{obtained_sale_amount:n,refunded_raise_amount:o}}static calculateWithdrawAmount(e){let t,n;const i=w(e.total_supply).mul(e.liquidity_injection_ratio);if(ut.is_sale_failed(e))t="0",n=w(i).add(e.total_supply);else{const{max_raise_amount:o}=e;w(e.total_purchase_amount).greaterThanOrEqualTo(o)?(t=w(o).sub(e.liquidity_used_raise_amount).toString(),n="0"):(t=w(e.total_purchase_amount).sub(e.liquidity_used_raise_amount),n=w(e.total_supply).add(i).sub(e.liquidity_used_sale_amount).sub(ut.get_sold_amount(e)))}return{obtained_raise_amount:L.floor(t).toString(),refunded_sale_amount:L.ceil(n).toString()}}static get_sold_amount(e){return w(e.total_purchase_amount).greaterThanOrEqualTo(e.max_raise_amount)?e.total_supply:w(e.total_purchase_amount).mul(zn).div(e.price)}static redeemForSaleOversubcribe(e,t){const n=t.protection_raise_amount,i=w(t.purchased_raise_amount).sub(n),o=e.max_raise_amount,{protection_limit_used:s}=e.white_summary,r=w(o).sub(s),a=w(e.total_purchase_amount).sub(s),c=L.ceil(i.mul(r).div(a).add(n)),d=L.floor(i.mul(r).div(a).add(n));return{user_obtained_sale_amount:L.floor(w(e.total_supply).mul(d).div(o)),user_used_raise_amount_ceil:c}}static redeemForSaleOversubcribeV2(e,t){const n=t.protection_raise_amount,i=w(t.purchased_raise_amount).sub(n),o=e.max_raise_amount,{protection_limit_used:s}=e.white_summary,r=w(o).sub(s),a=w(e.total_purchase_amount).sub(s),c=w(n).mul(a).add(w(i).mul(r)).mul(zn).div(w(a).mul(e.price)),d=L.ceil(c.mul(e.price).div(zn));return{user_obtained_sale_amount:c,user_used_raise_amount_ceil:d}}static raiseTotalAmount(e){const t=w(e.sale_decimals-e.raise_decimals).abs().toNumber();return e.sale_decimals>e.raise_decimals?w(e.total_supply).mul(e.current_price).div(w(10).pow(w(t))).toString():w(e.total_supply).mul(e.current_price).mul(w(10).pow(w(t))).toString()}static updatePoolStatus(e){const t=Number(w(Date.now()/1e3).toFixed(0)),n=e.duration_summary,i=n.start_time+n.purchase_duration;e.is_cancelled?e.pool_status="Canceled":t<n.start_time?e.pool_status="Upcoming":t>n.start_time&&t<i?e.pool_status="Live":w(e.total_purchase_amount).lessThan(e.complete_raise_limit)?e.pool_status="Failed":e.pool_status="Ended"}static async calculatePoolUiPrice(e,t){const n=await e.ClmmSDK.CetusConfig.getTokenListByCoinTypes([t.coin_type_sale,t.coin_type_raise]),i=n[t.coin_type_sale].decimals,o=n[t.coin_type_raise].decimals;t.current_price=Ct.priceFixToReal(Number(w(t.price).div(w(zn)).toString()),i,o).toString(),t.sale_decimals=i,t.raise_decimals=o,t.max_raise_amount=this.raiseTotalAmount(t)}},y0=class{constructor(e){U(this,"_sdk");this._sdk=e}async getPools(e=[],t=!1){const n=[];if(e.length>0){if(e.filter(o=>{const s=`${o}_getPool`,r=this._sdk.getCache(s,t);return r?(n.push(r),!1):!0}).length>0){const o=await this._sdk.ClmmSDK.fullClient.batchGetObjects(e,{showType:!0,showContent:!0});for(const s of o){const r=await this.buildIdoWarpPool(s);r&&n.push(r)}}}else(await this._sdk.Ido.getPools()).forEach(o=>{n.push({...o,version:"2"})});return n.forEach(i=>{const o=`${i.pool_address}_getPool`;this._sdk.updateCache(o,i)}),n}async getPool(e,t=!0){const n=`${e}_getPool`,i=this._sdk.getCache(n,t);if(i)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),s=await this.buildIdoWarpPool(o);return this._sdk.updateCache(n,s),s}async getJoinPools(e,t){const n=[],i=t.filter(s=>s.version==="1"),o=t.filter(s=>s.version==="2");if(i.length>0){const s=await this._sdk.Launchpad.getPurchaseMarks(e,i.map(r=>r.pool_address),!1);i.forEach(r=>{for(const a of s)if(a.pool_id===r.pool_address){n.push(r);break}})}for(const s of o)await this._sdk.Ido.getPurchaseInfo(s.purchase_summary.purchase_handle,e,!1)&&n.push(s);return n}async getOwnerPools(e,t){return t.filter(n=>n.owner===oe(e))}async creatPurchasePayload(e,t){return e.version==="1"?await this._sdk.Launchpad.creatPurchasePayload({pool_address:e.pool_address,purchase_amount:t,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise}):await this._sdk.Ido.creatPurchasePayload({pool_address:e.pool_address,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise,purchase_handle:e.purchase_summary.purchase_handle,raise_amount:t.toString()})}async creatRedeemPayload(e){return e.version==="1"?await this._sdk.Launchpad.creatClaimPayload({pool_address:e.pool_address,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise}):await this._sdk.Ido.redeemPayload({pool_address:e.pool_address,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise,purchase_handle:e.purchase_summary.purchase_handle})}async creatWithdrawPayload(e){if(e.version==="1"){const n=await Ct.getWithdrawSale(e),i=await Ct.getWithdrawRaise(e);return this._sdk.Launchpad.creatWithdrawPayload({pool_address:e.pool_address,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise,sale_amount:BigInt(n),raise_amount:BigInt(i)})}return this._sdk.Ido.withdrawPayload({pool_address:e.pool_address,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise})}unlockNftPayload(e,t){return e.version==="1"?this._sdk.Launchpad.creatUnlockNftPayload(t):this._sdk.Ido.unlockNftPayload({lock_nft_id:t.lock_nft,nft_type:t.nft_type})}async getLockNFTList(e){let t=[];return e.version==="1"&&(t=await this._sdk.Launchpad.getLockNFTList(e.owner)),t=await this._sdk.Ido.getLockNFTList(e.owner),t.filter(i=>{const o=D(i.coin_type_a).full_address,s=D(i.coin_type_b).full_address,r=D(e.coin_type_sale).full_address,a=D(e.coin_type_raise).full_address;return o===r&&s===a||o===a&&s===r})}async isWhiteListUser(e,t){return t.version==="1"?await this._sdk.Launchpad.isWhiteListUser(t.white_summary.white_handle,e):!!await this._sdk.Ido.getWhiteProtectionLimit(t.white_summary.white_handle,e)}async getPurchaseInfo(e,t){if(t.version==="1"){const i=await this._sdk.Launchpad.getPurchaseMarks(e,[t.pool_address]);return i.length>0?i[0]:void 0}return await this._sdk.Ido.getPurchaseInfo(t.purchase_summary.purchase_handle,e)}async getwhiteProtectionInfo(e,t,n=!1){if(t.version==="1")return await this._sdk.Launchpad.getPurchaseAmount(t.white_summary.white_handle,e);const i=await this._sdk.Ido.getPurchaseInfo(t.purchase_summary.purchase_handle,e,n);if(i)return{safe_limit_amount:i.protection_raise_limit,safe_purchased_amount:i.protection_raise_amount};const o=await this._sdk.Ido.getWhiteProtectionLimit(t.white_summary.white_handle,e,!1);return o?{safe_limit_amount:o,safe_purchased_amount:"0"}:{safe_limit_amount:"0",safe_purchased_amount:"0"}}async calculateWithdrawAmount(e){if(e.version==="1"){const t=await Ct.getHistoryWithdrawRaise(this._sdk,e),n=await Ct.getHistoryWithdrawSale(this._sdk,e);return{obtained_raise_amount:t,refunded_sale_amount:n}}return ut.calculateWithdrawAmount(e)}async buildIdoWarpPool(e){const t=$n(e);if(console.log(this._sdk.sdkOptions.ido.package_id,D(t).address,"buildIdoWarpPool"),D(t).address===this._sdk.sdkOptions.ido.package_id){const n=ut.buildIdoPool(e);return await ut.calculatePoolUiPrice(this._sdk,n),{...n,version:"2"}}if(D(t).address===this._sdk.sdkOptions.launchpad.package_id){const n=Ct.buildLaunchPadPool(e);return await Ct.calculatePoolPrice(this._sdk,n),{...n,version:"1"}}}},Bn=class{static buildVeNFTDividendInfo(e){const t={id:e.id.id,ve_nft_id:e.name,rewards:[]};return e.value.fields.value.fields.dividends.fields.contents.forEach(n=>{const i=[];n.fields.value.fields.contents.forEach(o=>{i.push({coin_type:D(o.fields.key.fields.name).source_address,amount:o.fields.value})}),t.rewards.push({period:Number(n.fields.key),rewards:i})}),t}static buildDividendManager(e){const t={id:e.id.id,dividends:{id:e.dividends.fields.id.id,size:e.dividends.fields.size},venft_dividends:{id:e.venft_dividends.fields.id.id,size:e.venft_dividends.fields.size},bonus_types:[],start_time:Number(e.start_time),interval_day:Number(e.interval_day),balances:{id:e.balances.fields.id.id,size:e.balances.fields.size},is_open:e.is_open};return e.bonus_types.forEach(n=>{t.bonus_types.push(D(n.fields.name).source_address)}),t}static buildLockUpManager(e){return{id:e.id.id,balance:e.balance,treasury_manager:e.treasury_manager,extra_treasury:e.extra_treasury,lock_infos:{lock_handle_id:e.lock_infos.fields.id.id,size:Number(e.lock_infos.fields.size)},type_name:ke(e.type_name.fields.name),min_lock_day:Number(e.min_lock_day),max_lock_day:Number(e.max_lock_day),package_version:Number(e.package_version),max_percent_numerator:Number(e.max_percent_numerator),min_percent_numerator:Number(e.min_percent_numerator)}}static buildLockToken(e){const t=e.fields,n={id:t.id.id,type:D(e.type).source_address,locked_start_time:Number(t.locked_start_time),locked_until_time:Number(t.locked_until_time),token_amount:t.balance,xtoken_amount:"0",lock_day:0};return n.lock_day=(n.locked_until_time-n.locked_start_time)/wi,n}static getAvailableXToken(e,t){let n=w(0);return t.forEach(i=>{n=n.add(i.xtoken_amount)}),w(e.xtoken_balance).sub(n).toString()}static getWaitUnLockTokens(e){return e.filter(t=>!Bn.isLocked(t))}static getLockingTokens(e){return e.filter(t=>Bn.isLocked(t))}static buildDividendRewardTypeList(e){const t=new Set;return e.forEach(n=>{n.rewards.forEach(i=>{t.add(i.coin_type)})}),Array.from(t)}static isLocked(e){return e.locked_until_time>Date.parse(new Date().toString())/1e3}static getNextStartTime(e,t=wi){const n=Date.now()/1e3,{start_time:i,interval_day:o}=e,s=Math.ceil((n-i)/(o*t));return i+s*o*t}},un=class{static getDefaultStrategyConfig(e){let t;switch(e){case 4:t=ga.bidAsk;break;default:t=ga.curve;break}return t}static geTickIndexRange(e,t,n,i){let o,s;switch(e=G.getInitializableTickIndex(e,t),i){case"left":e>0?(s=w(e).sub(t).toNumber(),o=w(e).mul(w(1).add(n)).toDecimalPlaces(0).toNumber()):(s=w(e).sub(t).toNumber(),o=w(e).mul(w(1).sub(n)).toDecimalPlaces(0).toNumber());break;case"right":e>0?(s=w(e).mul(w(1).add(n)).toDecimalPlaces(0).toNumber(),o=w(e).add(t).toNumber()):(s=w(e).mul(w(1).sub(n)).toDecimalPlaces(0).toNumber(),o=w(e).add(t).toNumber());break;default:e>0?(o=w(e).mul(w(1).sub(n)).toDecimalPlaces(0).toNumber(),s=w(e).mul(w(1).add(n)).toDecimalPlaces(0).toNumber()):(o=w(e).mul(w(1).add(n)).toDecimalPlaces(0).toNumber(),s=w(e).mul(w(1).sub(n)).toDecimalPlaces(0).toNumber());break}if(o=G.getInitializableTickIndex(o,t),s=G.getInitializableTickIndex(s,t),o<Ns)throw Error("Tick lower value is below the minimum allowed value.");if(s>Ds)throw Error("Tick upper value is above the maximum allowed value.");return{tick_lower:o,tick_upper:s}}static getCreateLiquidityBins(e,t){let n=[];switch(t){case 4:n=un.getCreateBidAskLiquidityBins(e);break;default:n=un.getCreateCurveLiquidityBins(e);break}return n}static getCreateBidAskLiquidityBins(e){const t=w(Math.floor(w(e.tick_upper).sub(e.tick_lower).div(e.div_width).toNumber())).abs(),n=[],i=e.ratios;let o,s;for(let r=0;r<i.length;r++){let a,c;e.tick_upper<=e.curr_tick?(c=w(e.tick_upper).sub(t.mul(r)).toNumber(),a=w(c).sub(t).toNumber()):e.tick_lower>=e.curr_tick?(a=w(e.tick_lower).add(t.mul(r)).toNumber(),c=w(e.tick_lower).add(t.mul(r+1)).toNumber()):r===4?(a=w(e.tick_lower).add(t.mul(r)).toNumber(),c=w(a).add(t.mul(2)).toNumber()):r>4?(a=w(e.tick_lower).add(t.mul(r+1)).toNumber(),c=w(a).add(t).toNumber()):(a=w(e.tick_lower).add(t.mul(r)).toNumber(),c=w(a).add(t).toNumber()),o=G.getInitializableTickIndex(a,e.tick_spacing),s=G.getInitializableTickIndex(c,e.tick_spacing),n.push({tick_lower:o,tick_upper:s,ratio:i[r],liquidity:"0"})}return n}static getCreateCurveLiquidityBins(e){const t=w(Math.floor(w(e.tick_upper).sub(e.tick_lower).div(e.div_width).toNumber())).abs(),n=[],i=e.ratios;for(let o=0;o<i.length;o++){let s,r;e.tick_upper<=e.curr_tick?(r=e.tick_upper,s=w(e.tick_upper).sub(t.mul(o+1)).toNumber()):e.tick_lower>=e.curr_tick?(s=e.tick_lower,r=w(s).add(t.mul(o+1)).toNumber()):(s=w(e.curr_tick).sub(t.mul(o+1)).toNumber(),r=w(e.curr_tick).add(t.mul(o+1)).toNumber()),n.push({tick_lower:G.getInitializableTickIndex(s,e.tick_spacing),tick_upper:G.getInitializableTickIndex(r,e.tick_spacing),ratio:i[o],liquidity:"0"})}return n}static calculateAddLiquidityInputs(e){const t=new g(G.tickIndexToSqrtPriceX64(e.curr_tick)),n=un.calculateCoinRatios(e.curr_tick,e.liquidity_bins),i=e.liquidity_bins.map((o,s)=>{const r=n[s],a=w(e.coin_amount).mul(e.fix_amount_a?r.coinRatioA:r.coinRatioB).toFixed(0).toString();try{return{...pt.estLiquidityAndcoinAmountFromOneAmounts(o.tick_lower,o.tick_upper,new g(a),e.fix_amount_a,!0,e.slippage,t),...o}}catch{return{coinAmountA:new g(0),coinAmountB:new g(0),tokenMaxA:new g(0),tokenMaxB:new g(0),liquidityAmount:new g(0),fix_amount_a:!e.fix_amount_a,...o}}});return un.fixLiquidityInputs(t,e.slippage,i,!0)}static fixLiquidityInputs(e,t,n,i){const o=n.filter(r=>r.liquidityAmount.gt(H));if(o.length===0)return[];const s=o[0];return n.map(r=>{if(r.liquidityAmount.eq(H)){const a=w(s.liquidityAmount.toString()).mul(r.ratio).div(s.ratio).toFixed(0),c=G.tickIndexToSqrtPriceX64(r.tick_lower),d=G.tickIndexToSqrtPriceX64(r.tick_upper),l=pt.getCoinAmountFromLiquidity(new g(a.toString()),e,c,d,!1);return{coinAmountA:l.coinA,coinAmountB:l.coinB,liquidityAmount:new g(a.toString()),fix_amount_a:r.fix_amount_a,...cs(l,yi.fromDecimal(w(t).mul(100)),i)}}return r})}static calculateCoinRatios(e,t){const n=new g(G.tickIndexToSqrtPriceX64(e)),i=[];let o=w(0),s=w(0);const r=t.map(d=>{const l=w(zp(100,6).toString()).mul(d.ratio).toFixed(0).toString(),f=G.tickIndexToSqrtPriceX64(d.tick_lower),_=G.tickIndexToSqrtPriceX64(d.tick_upper),b=pt.getCoinAmountFromLiquidity(new g(l),n,f,_,!0);return o=o.add(b.coinA.toString()),s=s.add(b.coinB.toString()),{...b,liquidity:l}}),a=[],c=[];return r.forEach((d,l)=>{const f={coinRatioA:o.eq(w(0))?0:w(d.coinA.toString()).div(o).toNumber(),coinRatioB:s.eq(w(0))?0:w(d.coinB.toString()).div(s).toNumber(),liquiditys:d.liquidity,tick_lower:t[l].tick_lower,tick_upper:t[l].tick_upper};i.push(f),a.push(o.eq(w(0))?0:w(d.coinA.toString()).div(o).toNumber()),c.push(s.eq(w(0))?0:w(d.coinB.toString()).div(s).toNumber())}),i}static calculateCloseMasterLiquidityInputs(e){const t=new g(G.tickIndexToSqrtPriceX64(e.curr_tick));return e.positions.map(i=>{const o=new g(i.liquidity),s=G.tickIndexToSqrtPriceX64(i.tick_lower_index),r=G.tickIndexToSqrtPriceX64(i.tick_upper_index),a=pt.getCoinAmountFromLiquidity(o,t,s,r,!1),c=yi.fromDecimal(w(e.slippage).mul(100)),{tokenMaxA:d,tokenMaxB:l}=cs(a,c,!1);return{coinAmountA:a.coinA,coinAmountB:a.coinB,tokenMaxA:d,tokenMaxB:l,liquidityAmount:o,fix_amount_a:!1}})}static calculateRemoveMasterLiquidityInputs(e){const t=new g(G.tickIndexToSqrtPriceX64(e.curr_tick)),{fix_token:n}=e;if(n){const o=e.positions.map((a,c)=>({tick_lower:a.tick_lower_index,tick_upper:a.tick_upper_index,ratio:e.ratios[c]})),s=un.calculateCoinRatios(e.curr_tick,o),r=e.positions.map((a,c)=>{const d=s[c],l=w(n.coin_amount).mul(n.fix_amount_a?d.coinRatioA:d.coinRatioB).toFixed(0).toString();try{const f=pt.estLiquidityAndcoinAmountFromOneAmounts(a.tick_lower_index,a.tick_upper_index,new g(l),n.fix_amount_a,!1,e.slippage,t);return{...f,tick_lower:a.tick_lower_index,tick_upper:a.tick_upper_index,liquidity:f.liquidityAmount.toString(),ratio:e.ratios[c]}}catch{return{coinAmountA:new g(0),coinAmountB:new g(0),tokenMaxA:new g(0),tokenMaxB:new g(0),liquidityAmount:new g(0),fix_amount_a:!n.fix_amount_a,tick_lower:a.tick_lower_index,tick_upper:a.tick_upper_index,liquidity:"0",ratio:e.ratios[c]}}});return un.fixLiquidityInputs(t,e.slippage,r,!1)}return e.positions.map((o,s)=>{const r=e.ratios[s];let a=w(e.liquidity).mul(r).toFixed(0);w(a).greaterThan(o.liquidity)&&(a=o.liquidity);const c=G.tickIndexToSqrtPriceX64(o.tick_lower_index),d=G.tickIndexToSqrtPriceX64(o.tick_upper_index),l=pt.getCoinAmountFromLiquidity(new g(a),t,c,d,!1),f=yi.fromDecimal(w(e.slippage).mul(100)),{tokenMaxA:_,tokenMaxB:b}=cs(l,f,!1);return{coinAmountA:l.coinA,coinAmountB:l.coinB,tokenMaxA:_,tokenMaxB:b,liquidityAmount:new g(a),fix_amount_a:!1}})}static buildMasterPosition(e){return{coin_type_a:D(e.coin_type_a.fields.name).full_address,coin_type_b:D(e.coin_type_b.fields.name).full_address,description:e.description,id:e.id.id,index:e.index,liquidity:e.liquidity,name:e.name,pool:e.pool,tick_lower_index:ct(BigInt(e.tick_lower_index.fields.bits)),tick_upper_index:ct(BigInt(e.tick_upper_index.fields.bits)),url:e.url}}static buildMasterNFT(e){const t=Q(e);if(t){const n={id:t.id.id,pool_id:t.pool_id,index:Number(t.index),strategy:Number(t.strategy),tick_lower_index:ct(BigInt(t.tick_lower_index)),tick_upper_index:ct(BigInt(t.tick_upper_index)),positions:[],...Po(e)};return n.positions=t.positions.map(i=>un.buildMasterPosition(i.fields)),n}}},Pt=class{static generateNextTickRange(e,t,n){const i=e-t/2,o=e+t/2;return{new_tick_lower:Pt.getValidTickIndex(i,n),new_tick_upper:Pt.getValidTickIndex(o,n)}}static calculateDepositRatio(e,t,n){const i=G.sqrtPriceX64ToTickIndex(n);if(i<e)return{ratioA:new L(1),ratioB:new L(0)};if(i>t)return{ratioA:new L(0),ratioB:new L(1)};const o=new g(1e8),{coinAmountB:s}=pt.estLiquidityAndcoinAmountFromOneAmounts(e,t,o,!0,!0,0,n),r=G.sqrtPriceX64ToPrice(n,0,0),a=w(o.toString()).mul(r),c=a.add(s.toString()),d=a.div(c),l=w(s.toString()).div(c);return{ratioA:d,ratioB:l}}static getValidTickIndex(e,t){if(e%t===0)return e;let n;if(e>0?n=e-e%t+t:e<0?n=e+Math.abs(e)%t-t:n=e,n%t!==0)throw new Error("Assertion failed: res % tickSpacing == 0");if(Math.abs(n)<Math.abs(e))throw new Error("Assertion failed: res.abs() >= tickIndex");return n}static get_lp_amount_by_liquidity(e,t){return e.total_supply==="0"?"0":w(e.total_supply).mul(t).div(e.liquidity).toFixed(0,L.ROUND_DOWN).toString()}static get_share_liquidity_by_amount(e,t){return e.total_supply==="0"?"0":w(t).mul(e.liquidity).div(e.total_supply).toFixed(0,L.ROUND_DOWN).toString()}static get_protocol_fee_amount(e,t){return w(t).mul(e.protocol_fee_rate).div(p_).toFixed(0,L.ROUND_CEIL)}static buildFramsPositionNFT(e){const t=e.clmm_postion.fields;return{id:e.id.id,url:t.url,pool_id:e.pool_id,coinTypeA:D(t.coin_type_a.fields.name).full_address,coinTypeB:D(t.coin_type_b.fields.name).full_address,description:t.description,name:t.name,liquidity:t.liquidity,clmm_position_id:t.id.id,clmm_pool_id:t.pool,tick_lower_index:ct(BigInt(t.tick_lower_index.fields.bits)),tick_upper_index:ct(BigInt(t.tick_upper_index.fields.bits)),rewards:[]}}static buildPool(e){const t=Q(e),n=$n(e),{positions:i}=t;if(t&&i.length>0){const o=Pt.buildFramsPositionNFT(i[0].fields);return{id:t.id.id,pool_id:t.pool,protocol_fee_rate:t.protocol_fee_rate,is_pause:t.is_pause,harvest_assets:{harvest_assets_handle:t.harvest_assets.fields.id.id,size:Number(t.harvest_assets.fields.size)},lp_token_type:D(n).type_arguments[0],total_supply:t.lp_token_treasury.fields.total_supply.fields.value,liquidity:t.liquidity,max_quota:t.max_quota,status:t.status===1?"STATUS_RUNNING":"STATUS_REBALANCING",quota_based_type:t.quota_based_type.fields.name,position:o}}}static async getSuiCoin(e,t,n){const i=await e.ClmmSDK.getOwnerCoinAssets(e.getVerifySenderAddress(),_o);n=n||new R;let o;if(t>95e10){const[s,...r]=i;r.length>0&&n.mergeCoins(n.object(s.coinObjectId),r.map(a=>n.object(a.coinObjectId))),o=n.splitCoins(n.object(s.coinObjectId),[t])}else o=X.buildCoinForAmount(n,i,BigInt(t),_o,!1,!0).targetCoin;return o}},Ki=class{static calculatePositionShare(e,t,n,i,o,s,r){if(t<=o||e>=s)return"0";let a=0;e<o?a=o:a=e;let c=0;t<s?c=t:c=s;const d=G.tickIndexToSqrtPriceX64(a),l=G.tickIndexToSqrtPriceX64(c),{coinA:f,coinB:_}=pt.getCoinAmountFromLiquidity(new g(n),new g(r),d,l,!0);return w(f.toString()).mul(i).div(1e12).add(_.toString()).toString()}static buildFramsPool(e){const t=Q(e);if(t)try{const n=[];return t.rewarders.forEach(o=>{n.push({reward_coin:D(o.fields.name).full_address,last_reward_time:"",emission_per_second:"",total_allocate_point:"",allocate_point:""})}),{id:t.id.id,clmm_pool_id:t.clmm_pool_id,effective_tick_lower:ct(BigInt(t.effective_tick_lower.fields.bits)),effective_tick_upper:ct(BigInt(t.effective_tick_upper.fields.bits)),total_share:t.total_share,rewarders:n,positions:{positions_handle:t.positions.fields.id.id,size:t.positions.fields.size},sqrt_price:t.sqrt_price}}catch(n){console.log(n)}}static buildFramsPositionNFT(e){const t=Q(e);if(t){const n=t.clmm_postion.fields;return{id:t.id.id,url:n.url,pool_id:t.pool_id,coinTypeA:D(n.coin_type_a.fields.name).full_address,coinTypeB:D(n.coin_type_b.fields.name).full_address,description:n.description,name:n.name,liquidity:n.liquidity,clmm_position_id:n.id.id,clmm_pool_id:n.pool,tick_lower_index:ct(BigInt(n.tick_lower_index.fields.bits)),tick_upper_index:ct(BigInt(n.tick_upper_index.fields.bits)),rewards:[]}}}},di=class{static buildOrderLimitEvent(e,t){const{events:n}=e,i=[];return n&&n.forEach(o=>{const s=D(o.type).name;if(t.includes(s)){const r={digest:e.digest,type:s,timestampMs:e.timestampMs,parsedJson:o.parsedJson};i.push(r)}}),i}static buildLimitOrderInfo(e){const t=Q(e),n=$n(e);if(t&&n)try{const i=D(n),o={pay_coin_type:i.type_arguments[0],target_coin_type:i.type_arguments[1],canceled_ts:t.canceled_ts==="18446744073709551615"?0:Number(t.canceled_ts),id:t.id.id,obtained_amount:t.obtained_amount,owner:t.owner,rate:t.rate,rate_order_indexer_id:t.rate_order_indexer_id,expire_ts:Number(t.expire_ts),total_pay_amount:t.total_pay_amount,pay_balance:t.pay_balance,target_balance:t.target_balance,claimed_amount:t.claimed_amount,status:"Running",created_ts:Number(t.created_ts)};return o.canceled_ts===0?(o.status="Running",w(o.pay_balance).eq(0)?o.status="Completed":w(o.pay_balance).lessThan(o.total_pay_amount)&&(o.status="PartialCompleted")):o.status="Cancelled",o}catch(i){console.log(i)}}static rateToPrice(e,t,n){const i=18+t-n;return w(10**i).div(e).toString()}static priceToRate(e,t,n){const i=18+t-n;return w(10).pow(i).div(w(e)).toFixed(0).toString()}},hs=class{static async getExchangeRateForStake(e,t,n){const{vaults:i}=e.sdkOptions,{haedal:o}=I(i);if(o===void 0)throw Error("the haedal config is undefined");const{simulationAccount:s}=e.ClmmSDK.sdkOptions,{staking_id:r}=I(o);try{const a=new R;t?await this.requestStake(e,n||1e9,a):a.moveCall({target:`${o.published_at}::staking::get_exchange_rate`,typeArguments:[],arguments:[a.object(r)]});const c=await e.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:a,sender:t?e.ClmmSDK.senderAddress:s.address});if(console.log("getExchangeRateForStake res: ",c),t){const f=c.events.find(A=>A.type.includes("UserStaked")),{sui_amount:_,st_amount:b}=f.parsedJson,y=w(_).div(b).toString();return console.log({st_amount:b,sui_amount:_,rate:y}),y}const d=c.results[0].returnValues[0][0];return w(le.u64().parse(Uint8Array.from(d))).div(1e6).toString()}catch(a){console.log("getExchangeRateForHaedal",a)}return"0"}static async requestStake(e,t,n){var s,r;const{vaults:i}=e.sdkOptions;n=n||new R;const o=await Pt.getSuiCoin(e,t,n);return n.moveCall({target:`${(r=(s=i.config)==null?void 0:s.haedal)==null?void 0:r.published_at}::interface::request_stake`,typeArguments:[],arguments:[n.object(he("0x5")),n.object(i.config.haedal.config.staking_id),o,n.pure.address(he("0x0"))]}),n}static requestStakeCoin(e,t,n){const{haedal:i}=e.sdkOptions.vaults.config;return t.moveCall({target:`${i.published_at}::staking::request_stake_coin`,typeArguments:[],arguments:[t.object(he("0x5")),t.object(i.config.staking_id),n,t.pure.address(he("0x0"))]})}},ps=class{static async getExchangeRateForStake(e,t,n){const{vaults:i}=e.sdkOptions,{volo:o}=I(i);if(o===void 0)throw Error("the volo config is undefined");const{simulationAccount:s}=e.ClmmSDK.sdkOptions,{native_pool:r,vsui_metadata:a}=I(o);try{const c=new R;t?await this.requestStake(e,n||1e9,c):c.moveCall({target:`${o.published_at}::native_pool::get_ratio`,typeArguments:[],arguments:[c.object(r),c.object(a)]});const d=await e.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:c,sender:t?e.ClmmSDK.senderAddress:s.address});if(t){const _=d.events.find(A=>A.type.includes("StakedEvent")),{cert_amount:b,sui_amount:y}=_.parsedJson;return w(y).div(b).toString()}const l=d.results[0].returnValues[0][0];console.log({returnValues:l});const f=w(le.u256().parse(Uint8Array.from(l))).div(1e18).toNumber();return w(1).div(f).toString()}catch(c){console.log("getExchangeRateForHaedal",c)}return"0"}static async requestStake(e,t,n){const{vaults:i}=e.sdkOptions,{volo:o}=I(i);if(o===void 0)throw Error("the volo config is undefined");n=n||new R;const{native_pool:s,vsui_metadata:r}=I(o),a=await Pt.getSuiCoin(e,t,n);return n.moveCall({target:`${o.published_at}::native_pool::stake`,typeArguments:[],arguments:[n.object(s),n.object(r),n.object(he("0x5")),a]}),n}static requestStakeCoin(e,t,n){const{vaults:i}=e.sdkOptions,{volo:o}=I(i);if(o===void 0)throw Error("the volo config is undefined");t=t||new R;const{native_pool:s,vsui_metadata:r}=I(o);return t.moveCall({target:`${o.published_at}::native_pool::stake_non_entry`,typeArguments:[],arguments:[t.object(s),t.object(r),t.object(he("0x5")),n]})}},_s=class{static async getExchangeRateForStake(e,t,n){const{vaults:i}=e.sdkOptions,{aftermath:o}=I(i);if(o===void 0)throw Error("the aftermath config is undefined");const{simulationAccount:s}=e.ClmmSDK.sdkOptions,{staked_sui_vault:r,safe:a}=I(o);try{const c=new R;t?await this.requestStake(e,n||1e9,c):c.moveCall({target:`${o.published_at}::staked_sui_vault::afsui_to_sui_exchange_rate`,typeArguments:[],arguments:[c.object(r),c.object(a)]});const d=await e.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:c,sender:t?e.ClmmSDK.senderAddress:s.address});if(t){const _=d.events.find(A=>A.type.includes("StakedEvent")),{afsui_amount:b,sui_amount:y}=_.parsedJson;return w(y).div(b).toString()}const l=d.results[0].returnValues[0][0];return w(le.u128().parse(Uint8Array.from(l))).div(1e18).toString()}catch(c){console.log("getExchangeRateForHaedal",c)}return"0"}static async requestStake(e,t,n){const{vaults:i}=e.sdkOptions,{aftermath:o}=I(i);if(o===void 0)throw Error("the aftermath config is undefined");n=n||new R;const{staked_sui_vault:s,referral_vault:r,safe:a,validator_address:c}=I(o),d=await Pt.getSuiCoin(e,t,n);return n.moveCall({target:`${o.published_at}::staked_sui_vault::request_stake_and_keep`,typeArguments:[],arguments:[n.object(s),n.object(a),n.object(he("0x5")),n.object(r),d,n.pure.address(he(c))]}),n}static requestStakeCoin(e,t,n){const{vaults:i}=e.sdkOptions,{aftermath:o}=I(i);if(o===void 0)throw Error("the aftermath config is undefined");t=t||new R;const{staked_sui_vault:s,referral_vault:r,safe:a,validator_address:c}=I(o);return t.moveCall({target:`${o.published_at}::staked_sui_vault::request_stake`,typeArguments:[],arguments:[t.object(s),t.object(a),t.object(he("0x5")),t.object(r),n,t.pure.address(he(c))]})}},__=class{constructor(e){U(this,"_sdk");U(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e="all",t=!1){const{package_id:n}=this._sdk.sdkOptions.ido,i=`${n}_getPoolImmutables`,o=this.getCache(i,t),s={data:[],hasNextPage:!1},r=[];if(o!==void 0&&r.push(...o),r.length===0)try{const a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${n}::oversubscribe_pool::CreatePoolEvent`},e);a.data.forEach(c=>{const d=c.parsedJson;if(d){const l=ut.buildIdoPoolImmutables(d);r.push(l)}}),s.hasNextPage=a.hasNextPage,s.nextCursor=a.nextCursor,this.updateCache(i,r,V)}catch(a){console.log("getPoolImmutables",a)}return s.data=r,s}async getPools(e=[],t=!1){const n=[];let i=[];e.length>0?i=[...e]:(await this.getPoolImmutables("all",t)).data.forEach(r=>{i.push(r.pool_address)});const o=await this._sdk.ClmmSDK.fullClient.batchGetObjects(i,{showType:!0,showContent:!0});for(const s of o){const r=ut.buildIdoPool(s);await ut.calculatePoolUiPrice(this._sdk,r),n.push(r);const a=`${r.pool_address}_getPoolObject`;this.updateCache(a,r,V)}return n}async getPool(e,t=!0){const n=`${e}_getPoolObject`,i=this.getCache(n,t);if(i!==void 0)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),s=ut.buildIdoPool(o);return await ut.calculatePoolUiPrice(this._sdk,s),this.updateCache(n,s),s}async getIdoConfigs(e=!1){var c;const{package_id:t}=this._sdk.sdkOptions.ido,n=`${t}_getInitEvent`,i=this.getCache(n,e);if(i!==void 0)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),s=Mi(o),r=(c=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({Transaction:s}))==null?void 0:c.data,a={pools_id:"",admin_cap_id:"",package_version_id:""};return r.length>0&&(r.forEach(d=>{console.log("item: ",d);const l=d.parsedJson;if(l)switch(D(d.type).full_address){case`${t}::config::InitConfigEvent`:a.admin_cap_id=l.admin_cap_id,a.package_version_id=l.package_version_id;break;case`${t}::factory::InitFactoryEvent`:a.pools_id=l.pools_id;break}}),this.updateCache(n,a,V)),a}async getPurchaseInfo(e,t,n=!0){const i=`${e}_${t}_getPurchaseInfo`,o=this.getCache(i,n);if(o)return o;try{const s=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"address",value:t}}),r=ut.buildPurchaseInfo(Q(s));return this.updateCache(i,r,Et),r}catch{return}}async getLockNFT(e,t=!1){const n=`${e}_getLockNFT`,i=this.getCache(n,t);if(i!==void 0)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}});if(!o.error)return ei(o)}async getLockNFTList(e){var o;const{clmm_pool:t}=this._sdk.ClmmSDK.sdkOptions,{ido:n}=this._sdk.sdkOptions,i=[];try{const s=(o=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{filter:{StructType:`${n.package_id}::lock::LockedNFT<${t.package_id}::position::Position>`},options:{showContent:!0}}))==null?void 0:o.data;for(const r of s){const a=Q(r);if(a){const c=a.nft.fields,d={locked_at:Number(a.locked_at),lock_duration:Number(a.lock_duration),lock_nft_id:a.id.id,type:a.nft.type,...c};d.end_lock_time=d.locked_at+d.lock_duration,d.coin_type_a=D(c.coin_type_a.fields.name).full_address,d.coin_type_b=D(c.coin_type_b.fields.name).full_address,d.id=c.id.id,d.tick_lower_index=ct(BigInt(c.tick_lower_index.fields.bits)),d.tick_upper_index=ct(BigInt(c.tick_upper_index.fields.bits)),i.push(d)}}return i}catch(s){return console.log("getLockNFTList:",s),[]}}async creatPool(e){const{ido:t}=this.sdk.sdkOptions;Rs(oe(e.coin_type_sale),oe(e.coin_type_raise))&&(e.price_min=w(1).div(e.price_max).toNumber(),e.price_max=w(1).div(e.price_min).toNumber());const i=Ct.priceRealToFix(Number(e.price),e.sale_decimals,e.raise_decimals),o=G.priceToSqrtPriceX64(w(e.price_min),e.sale_decimals,e.raise_decimals).toString(),s=G.priceToSqrtPriceX64(w(e.price_max),e.sale_decimals,e.raise_decimals).toString(),r=new R,a=w(e.total_supply).add(w(e.total_supply).mul(w(e.liquidity_injection_ratio))).toNumber(),c=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,e.coin_type_sale),d=X.buildCoinForAmount(r,c,BigInt(a),e.coin_type_sale,!1),l=[r.object(I(t).admin_cap_id),r.object(I(t).package_version_id),r.object(I(t).pools_id),r.object(oe(e.owner)),r.pure.u128(w(i).mul(zn).toString()),r.pure.u64(e.total_supply),r.pure.u64(e.complete_raise_limit),r.pure.u64(e.min_purchase_amount),r.pure.u64(e.max_purchase_amount),r.pure.u64(e.start_time),r.pure.u64(e.purchase_duration),r.pure.u64(e.lock_up_duration),r.pure.u64((e.liquidity_injection_ratio*hd).toString()),r.pure.u128(o),r.pure.u128(s),r.pure.u32(e.tick_spacing),d.targetCoin,r.pure.u64(e.protection_hard_cap.toString()),r.object(q)],f=[e.coin_type_sale,e.coin_type_raise];return r.moveCall({target:`${t.published_at}::${l_}::create_oversubscribe_pool`,typeArguments:f,arguments:l}),r}async creatPurchasePayload(e){const{ido:t}=this.sdk.sdkOptions,n=new R,i=await this.getPurchaseInfo(e.purchase_handle,this._sdk.ClmmSDK.senderAddress,!1),o=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,e.coin_type_raise),s=X.buildCoinForAmount(n,o,BigInt(e.raise_amount),e.coin_type_raise,!1),r=[e.coin_type_sale,e.coin_type_raise];let a,c;return i?(c="purchase",a=[n.object(I(t).package_version_id),n.object(e.pool_address),n.object(i.purchase_certificate_id),n.pure.u64(e.raise_amount.toString()),s.targetCoin,n.object(q)]):(c="create_certificate_and_purchase",a=[n.object(I(t).package_version_id),n.object(e.pool_address),n.pure.u64(e.raise_amount.toString()),s.targetCoin,n.object(q)]),n.moveCall({target:`${t.published_at}::${Bt}::${c}`,typeArguments:r,arguments:a}),n}async redeemPayload(e){const{ido:t}=this.sdk.sdkOptions,n=await this.getPurchaseInfo(e.purchase_handle,this._sdk.ClmmSDK.senderAddress,!1);if(n===void 0)throw Error("get purchase certificate fail");const i=new R,o=[e.coin_type_sale,e.coin_type_raise],s=[i.object(I(t).package_version_id),i.object(e.pool_address),i.object(n.purchase_certificate_id),i.object(q)];return i.moveCall({target:`${t.published_at}::${Bt}::redeem`,typeArguments:o,arguments:s}),i}injectLiquidityPayload(e){const{ido:t}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions,i=new R,o=[e.coin_type_sale,e.coin_type_raise],s=e.is_reverse?"inject_liquidity_with_reverse_clmm_pool":"inject_liquidity_with_forward_clmm_pool",r=[i.object(I(t).package_version_id),i.object(e.pool_address),i.object(I(n).global_config_id),i.object(e.clmm_pool_address),i.object(q)];return i.moveCall({target:`${t.published_at}::${Bt}::${s}`,typeArguments:o,arguments:r}),i}unPauseInjectLiquidity(e){const{ido:t}=this.sdk.sdkOptions,{integrate:n,clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions,o=new R;o.moveCall({target:`${n.published_at}::${gi}::unpause_pool`,typeArguments:[e.coin_type_a,e.coin_type_b],arguments:[o.object(I(i).global_config_id),o.object(e.clmm_pool_address)]});const s=[e.coin_type_sale,e.coin_type_raise],r=e.is_reverse?"inject_liquidity_with_reverse_clmm_pool":"inject_liquidity_with_forward_clmm_pool",a=[o.object(I(t).package_version_id),o.object(e.pool_address),o.object(I(i).global_config_id),o.object(e.clmm_pool_address),o.object(q)];return o.moveCall({target:`${t.published_at}::${Bt}::${r}`,typeArguments:s,arguments:a}),o}async findClmmPoolForLiquidity(e){let t=null,n=!1;const i=await this.sdk.ClmmSDK.Pool.getPoolImmutables();for(const o of i){if(o.coinTypeA===e.coin_type_sale&&o.coinTypeB===e.coin_type_raise&&Number(o.tickSpacing)===e.tick_spacing){t=await this._sdk.ClmmSDK.Pool.getPool(o.poolAddress);break}if(o.coinTypeA===e.coin_type_raise&&o.coinTypeB===e.coin_type_sale&&Number(o.tickSpacing)===e.tick_spacing){t=await this._sdk.ClmmSDK.Pool.getPool(o.poolAddress),n=!0;break}}return t&&(w(t.current_sqrt_price).lessThanOrEqualTo(e.current_sqrt_price_min)||w(t.current_sqrt_price).greaterThanOrEqualTo(e.current_sqrt_price_max))?(console.log("clmmPool: ",t.poolAddress),{is_reverse:n,clmmPool:null}):{is_reverse:n,clmmPool:t}}withdrawPayload(e){const{ido:t}=this.sdk.sdkOptions,n=new R,i=[e.coin_type_sale,e.coin_type_raise],o=[n.object(I(t).package_version_id),n.object(e.pool_address),n.object(q)];return n.moveCall({target:`${t.published_at}::${Bt}::withdraw`,typeArguments:i,arguments:o}),n}updateWhitelistCapPayload(e){const{ido:t}=this.sdk.sdkOptions,n=new R,i=[e.coin_type_sale,e.coin_type_raise];return e.add_whites&&e.add_whites.addresses.length>0&&n.moveCall({target:`${t.published_at}::${Bt}::add_white_listed_addresses`,typeArguments:i,arguments:[n.object(I(t).admin_cap_id),n.object(I(t).package_version_id),n.object(e.pool_address),n.makeMoveVec({type:"address",elements:e.add_whites.addresses.map(o=>n.pure.address(he(o)))}),n.pure.u64(e.add_whites.protection_limit),n.object(q)]}),e.remove_whites&&e.remove_whites.length>0&&n.moveCall({target:`${t.published_at}::${Bt}::remove_white_listed_addresses`,typeArguments:i,arguments:[n.object(I(t).admin_cap_id),n.object(I(t).package_version_id),n.object(e.pool_address),n.makeMoveVec({type:"address",elements:e.remove_whites.map(o=>n.pure.address(he(o)))}),n.object(q)]}),e.update_whites&&e.update_whites.forEach(o=>{n.moveCall({target:`${t.published_at}::${Bt}::update_white_listed_address`,typeArguments:i,arguments:[n.object(I(t).admin_cap_id),n.object(I(t).package_version_id),n.object(e.pool_address),n.object(o.address),n.pure.u64(o.protection_limit),n.object(q)]})}),n}creatCancelPoolPayload(e){const{ido:t}=this.sdk.sdkOptions,n=new R,i=[e.coin_type_sale,e.coin_type_raise],o=[n.object(I(t).admin_cap_id),n.object(I(t).package_version_id),n.object(e.pool_address),n.object(q)];return n.moveCall({target:`${t.published_at}::${Bt}::cancel`,typeArguments:i,arguments:o}),n}updatePoolOwnerPayload(e,t){const{ido:n}=this.sdk.sdkOptions;t=t===void 0?new R:t;const i=[e.coin_type_sale,e.coin_type_raise],o=[t.object(I(n).admin_cap_id),t.object(I(n).package_version_id),t.object(e.pool_address),t.object(e.new_owner),t.object(q)];return t.moveCall({target:`${n.published_at}::${Bt}::update_pool_owner`,typeArguments:i,arguments:o}),t}updatePoolDuractionPayload(e,t){const{ido:n}=this.sdk.sdkOptions;t=t===void 0?new R:t;const i=[e.coin_type_sale,e.coin_type_raise],o=[t.object(I(n).admin_cap_id),t.object(I(n).package_version_id),t.object(e.pool_address),t.pure.u64(e.start_time),t.pure.u64(e.purchase_duration),t.pure.u64(e.lock_duration),t.object(q)];return t.moveCall({target:`${n.published_at}::${Bt}::update_pool_duration`,typeArguments:i,arguments:o}),t}updateProtectionHardCapPayload(e,t){const{ido:n}=this.sdk.sdkOptions;t=t===void 0?new R:t;const i=[e.coin_type_sale,e.coin_type_raise],o=[t.object(I(n).admin_cap_id),t.object(I(n).package_version_id),t.object(e.pool_address),t.pure.u64(e.protection_hard_cap),t.object(q)];return t.moveCall({target:`${n.published_at}::${Bt}::update_protection_hard_cap`,typeArguments:i,arguments:o}),t}unlockNftPayload(e){const{ido:t}=this.sdk.sdkOptions,n=new R,i=[e.nft_type],o=[n.object(e.lock_nft_id),n.object(q)];return n.moveCall({target:`${t.published_at}::lock::unlock_nft`,typeArguments:i,arguments:o}),n}async isAdminCap(e){const{ido:t}=this._sdk.sdkOptions,n=`${t.package_id}_${e}_isAdminCap`,i=this.getCache(n);if(i)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:I(t).admin_cap_id,options:{showType:!0,showOwner:!0}});console.log(o);const s=$n(o),r=bo(o);let a=!1;return r&&s&&D(s).source_address===`${t.package_id}::config::AdminCap`&&(a=oe(r.AddressOwner)===oe(e)),this.updateCache(n,a,V),a}async getWhiteProtectionLimit(e,t,n=!0){const i=`${e}_${t}_getWhiteProtectionLimit`,o=this._sdk.getCache(i,n);if(o)return o;try{const s=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"address",value:t}});if(s&&s.data){const r=Q(s);return this._sdk.updateCache(i,r.value),r.value}return}catch{return}}async getWhiteList(e,t){var i;const n={type:"address",value:t};try{const o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:n}),s=Q(o);if(console.log(s),s)return(i=s==null?void 0:s.value)==null?void 0:i.fields}catch{}return{safe_limit_amount:"0",safe_purchased_amount:"0"}}async getAdminAddress(){const{ido:e}=this._sdk.sdkOptions,t=`${I(e).admin_cap_id}_getAdminAddress`,n=this.getCache(t);if(n)return n;const i=await this._sdk.ClmmSDK.fullClient.getObject({id:I(e).admin_cap_id,options:{showType:!0,showOwner:!0}});console.log(i);const o=$n(i),s=bo(i);if(s&&o&&D(o).source_address===`${e.package_id}::config::AdminCap`){const a=oe(s.AddressOwner);return this.updateCache(t,a,V),a}return""}updateCache(e,t,n=V){let i=this._cache[e];i?(i.overdueTime=pe(n),i.value=t):i=new St(t,pe(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e];if(!t&&(n!=null&&n.isValid()))return n.value;delete this._cache[e]}},b_=class{constructor(e){U(this,"_sdk");U(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getOwnerVeNFT(e,t=!0){const{xtoken:n}=this.sdk.sdkOptions,i=`${e}_getLockUpManagerEvent`,o=this.getCache(i,t);if(o!==void 0)return o;let s;const r=`${n.package_id}::xtoken::VeNFT`;return(await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:!0},filter:{StructType:r}})).data.forEach(c=>{const d=D(Jt(c)).source_address;if(d===r&&c.data&&c.data.content){const{fields:l}=c.data.content;s={...Po(c),id:l.id.id,index:l.index,type:d,xtoken_balance:l.xtoken_balance},this.updateCache(i,s,V)}}),s}async getOwnerLockTokens(e){const{xtoken:t}=this.sdk.sdkOptions,n=[],i=`${t.package_id}::lock_coin::LockedCoin<${this.buileTokenCoinType()}>`,o=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0},filter:{StructType:i}});for(const s of o.data)if(D(Jt(s)).source_address===i&&s.data){const a=Bn.buildLockToken(s.data.content),c=await this.getLockXToken(a.id);c&&(a.xtoken_amount=c.xtoken_amount),n.push(a)}return n}async getLockToken(e){var n;const t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});if((n=t.data)!=null&&n.content){const i=Bn.buildLockToken(t.data.content),o=await this.getLockXToken(i.id);return o&&(i.xtoken_amount=o.xtoken_amount),i}}async getOwnerTokenCoins(e){return await this._sdk.ClmmSDK.getOwnerCoinAssets(e,this.buileTokenCoinType())}mintVeNFTPayload(){const{xtoken:e}=this.sdk.sdkOptions,t=new R;return t.moveCall({target:`${e.published_at}::${Kn}::mint_venft`,typeArguments:[],arguments:[t.object(I(e).xtoken_manager_id)]}),t}async convertPayload(e){const{xtoken:t}=this.sdk.sdkOptions,n=new R,i=this.buileTokenCoinType(),o=await X.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,n,BigInt(e.amount),i);return e.venft_id===void 0?n.moveCall({target:`${t.published_at}::${Kn}::mint_and_convert`,typeArguments:[],arguments:[n.object(I(t).lock_manager_id),n.object(I(t).xtoken_manager_id),o,n.pure.u64(e.amount)]}):n.moveCall({target:`${t.published_at}::${Kn}::convert`,typeArguments:[],arguments:[n.object(I(t).lock_manager_id),n.object(I(t).xtoken_manager_id),o,n.pure.u64(e.amount),n.object(e.venft_id)]}),n}redeemLockPayload(e){const{xtoken:t}=this.sdk.sdkOptions,n=new R;return n.moveCall({target:`${t.published_at}::${Kn}::redeem_lock`,typeArguments:[],arguments:[n.object(I(t).lock_manager_id),n.object(I(t).xtoken_manager_id),n.object(e.venft_id),n.pure.u64(e.amount),n.pure.u64(e.lock_day),n.object(q)]}),n}redeemPayload(e){const{xtoken:t}=this.sdk.sdkOptions,n=new R;return n.moveCall({target:`${t.published_at}::${Kn}::redeem`,typeArguments:[],arguments:[n.object(I(t).lock_manager_id),n.object(I(t).xtoken_manager_id),n.object(e.venft_id),n.object(e.lock_id),n.object(q)]}),n}redeemDividendPayload(e,t){const{xtoken_dividends:n}=this.sdk.sdkOptions,i=new R;return t.forEach(o=>{i.moveCall({target:`${n.published_at}::${fs}::redeem`,typeArguments:[o],arguments:[i.object(I(n).dividend_manager_id),i.object(e)]})}),i}redeemDividendV2Payload(e,t,n){const{xtoken_dividends:i}=this.sdk.sdkOptions;let o=new R;return t.filter(r=>n.includes(r)).length>0&&(o=this.redeemDividendXTokenPayload(e,o)),t.forEach(r=>{n.includes(r)||o.moveCall({target:`${i.published_at}::${fs}::redeem_v2`,typeArguments:[r],arguments:[o.object(I(i).dividend_manager_id),o.object(e),o.object(q)]})}),o}redeemDividendXTokenPayload(e,t){const{xtoken_dividends:n,xtoken:i}=this.sdk.sdkOptions,{xtoken_manager_id:o,lock_manager_id:s}=I(i),{dividend_manager_id:r}=I(n);return t=t===void 0?new R:t,t.moveCall({target:`${n.published_at}::${fs}::redeem_xtoken`,typeArguments:[],arguments:[t.object(s),t.object(o),t.object(r),t.object(e),t.object(q)]}),t}buileTokenCoinType(){return`${this.sdk.sdkOptions.token_faucet.package_id}::token::TOKEN`}buileXTokenCoinType(e=this._sdk.sdkOptions.xtoken.package_id,t="xtoken",n="XTOKEN"){return`${e}::${t}::${n}`}cancelRedeemPayload(e){const{xtoken:t}=this.sdk.sdkOptions,n=new R;return n.moveCall({target:`${t.published_at}::${Kn}::cancel_redeem_lock`,typeArguments:[],arguments:[n.object(I(t).lock_manager_id),n.object(I(t).xtoken_manager_id),n.object(e.venft_id),n.object(e.lock_id),n.object(q)]}),n}async getInitConfigs(){var r,a;const{package_id:e}=this.sdk.sdkOptions.xtoken,t=`${e}_getInitFactoryEvent`,n=this.getCache(t);if(n!==void 0)return n;const i=(r=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::xtoken::InitEvent`}))==null?void 0:r.data,o={xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""};i.length>0&&i.forEach(c=>{const d=c.parsedJson;d&&(o.xtoken_manager_id=d.xtoken_manager)});const s=(a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::locking::InitializeEvent`}))==null?void 0:a.data;return s.length>0&&s.forEach(c=>{const d=c.parsedJson;d&&(o.lock_manager_id=d.lock_manager)}),o.lock_handle_id=(await this.getLockUpManager(o.lock_manager_id)).lock_infos.lock_handle_id,this.updateCache(t,o,V),o}async getLockUpManager(e=I(this.sdk.sdkOptions.xtoken).lock_manager_id,t=!1){const n=`${e}_getLockUpManagerEvent`,i=this.getCache(n,t);if(i!==void 0)return i;const o=await this.sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),s=Bn.buildLockUpManager(Q(o));return this.updateCache(n,s,V),s}async getLockInfoHandle(e){const t=`${e}_getLockInfoHandle`,n=this.getCache(t);if(n!==void 0)return n;let i="";const o=await this.sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),s=Q(o);return s&&(i=s.lock_infos.fields.id.id,this.updateCache(t,i,V)),i}async getDividendConfigs(){var s;const{package_id:e}=this.sdk.sdkOptions.xtoken_dividends,t=`${e}_getDividendManagerEvent`,n=this.getCache(t);if(n!==void 0)return n;const i=(s=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::dividend::InitEvent`}))==null?void 0:s.data,o={dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""};return i.length>0&&i.forEach(r=>{const a=r.parsedJson;a&&(o.dividend_manager_id=a.manager_id,o.dividend_admin_id=a.admin_id,o.dividend_settle_id=a.settle_id,this.updateCache(t,o,V))}),o}async getDividendManager(e=!1){const{dividend_manager_id:t}=I(this.sdk.sdkOptions.xtoken_dividends),n=`${t}_getDividendManager`,i=this.getCache(n,e);if(i!==void 0)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),s=Q(o),r=Bn.buildDividendManager(s);return this.updateCache(n,r,V),r}async getXcetusManager(e=!0){const{xtoken_manager_id:t}=I(this.sdk.sdkOptions.xtoken),n=`${t}_getXcetusManager`,i=this.getCache(n,e);if(i)return i;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),s=Q(o),r={id:s.id.id,index:Number(s.index),has_venft:{handle:s.has_venft.fields.id.id,size:s.has_venft.fields.size},nfts:{handle:s.nfts.fields.id.id,size:s.nfts.fields.size},total_locked:s.total_locked,treasury:s.treasury.fields.total_supply.fields.value};return this.updateCache(n,r),r}async getVeNFTDividendInfo(e,t){try{const n=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),i=Q(n);return Bn.buildVeNFTDividendInfo(i)}catch{return}}async redeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};const n=await this.getLockUpManager(),i=w(Rt).mul(w(n.max_lock_day).sub(w(t))).mul(w(n.max_percent_numerator).sub(w(n.min_percent_numerator))).div(w(n.max_lock_day).sub(w(n.min_lock_day))),o=w(Rt).mul(w(n.max_percent_numerator)).sub(i).div(w(go)).div(Rt);return{amountOut:w(o).mul(w(e)).round().toString(),percent:o.toString()}}async reverseRedeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};const n=await this.getLockUpManager(),i=w(Rt).mul(w(n.max_lock_day).sub(w(t))).mul(w(n.max_percent_numerator).sub(w(n.min_percent_numerator))).div(w(n.max_lock_day).sub(w(n.min_lock_day))),o=w(Rt).mul(w(n.max_percent_numerator)).sub(i).div(w(go)).div(Rt);return{amountOut:w(e).div(o).toFixed(0,L.ROUND_UP),percent:o.toString()}}async getLockXToken(e){const{lock_handle_id:t}=I(this._sdk.sdkOptions.xtoken),n=`${e}_getXTokenAmount`,i=this.getCache(n);if(i)return i;try{const o=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x2::object::ID",value:e}}),s=Q(o);if(s){const r=s.value.fields.value.fields;return this.updateCache(n,r,V),r}}catch{}}async getVeNftAmount(e,t){try{const n=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),i=Q(n);if(i){const{lock_amount:o,xtoken_amount:s}=i.value.fields.value.fields;return{lock_amount:o,xtoken_amount:s}}}catch{}return{lock_amount:"0",xtoken_amount:"0"}}async getPhaseDividendInfo(e,t=!1){const i=(await this.getDividendManager()).dividends.id,o=`${i}_${e}_getPhaseDividendInfo`,s=this._sdk.getCache(o,t);if(s)return s;try{const r=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:i,name:{type:"u64",value:e}}),a=Q(r),c=a.value.fields.value.fields,d=c.redeemed_num.fields.contents.map(b=>({name:b.fields.key.fields.name,value:b.fields.value})),l=c.bonus_types.map(b=>b.fields.name),f=c.bonus.fields.contents.map(b=>({name:b.fields.key.fields.name,value:b.fields.value})),_={id:Wt(r),phase:a.name,settled_num:c.settled_num,register_time:c.register_time,redeemed_num:d,is_settled:c.is_settled,bonus_types:l,bonus:f,phase_end_time:""};return this.updateCache(o,_),_}catch{}}updateCache(e,t,n=Et){let i=this._cache[e];i?(i.overdueTime=pe(n),i.value=t):i=new St(t,pe(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e];if(!t&&(n!=null&&n.isValid()))return n.value;delete this._cache[e]}},m_=class{constructor(e){U(this,"_sdk");U(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async addMasterLiquidity(e){var A,O;const{liquidity_stratefy:t}=this._sdk.sdkOptions,{clmm_pool:n}=this._sdk.ClmmSDK.sdkOptions,i=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);let o=w(0),s=w(0);const r=[],a=[],c=[],d=[],l=[];e.liquidity_bins.forEach((j,M)=>{const B=e.amounts_a[M],$=e.amounts_b[M],J=e.bins_fix_amount_a[M];o=o.add(B),s=s.add($),r.push(B),a.push($),c.push(vt(BigInt(j.tick_lower)).toString()),d.push(vt(BigInt(j.tick_upper)).toString()),l.push(J)});const f=[e.coinTypeA,e.coinTypeB],_=new R,b=(A=X.buildAddLiquidityFixTokenCoinInput(_,!e.fix_amount_a,o.toString(),e.slippage,e.coinTypeA,i,!1))==null?void 0:A.targetCoin,y=(O=X.buildAddLiquidityFixTokenCoinInput(_,e.fix_amount_a,s.toString(),e.slippage,e.coinTypeB,i,!1))==null?void 0:O.targetCoin;return u_(e)?_.moveCall({target:`${t.published_at}::router::increase_liquidity`,typeArguments:f,arguments:[_.object(I(t).master_manger_id),_.object(e.master_address),_.object(I(n).global_config_id),_.object(e.pool_address),b,y,_.makeMoveVec({elements:r.map(j=>_.pure.u64(j))}),_.makeMoveVec({elements:a.map(j=>_.pure.u64(j))}),_.makeMoveVec({elements:l.map(j=>_.pure.bool(j))}),_.object(q)]}):_.moveCall({target:`${t.published_at}::router::create_master_liquidity`,typeArguments:f,arguments:[_.object(I(t).master_manger_id),_.object(I(n).global_config_id),_.object(e.pool_address),b,y,_.makeMoveVec({elements:c.map(j=>_.pure.u32(Number(j)))}),_.makeMoveVec({elements:d.map(j=>_.pure.u32(Number(j)))}),_.makeMoveVec({elements:r.map(j=>_.pure.u64(j))}),_.makeMoveVec({elements:a.map(j=>_.pure.u64(j))}),_.makeMoveVec({elements:l.map(j=>_.pure.bool(j))}),_.pure.u8(e.strategy),_.pure.u32(Number(vt(BigInt(e.tick_lower)).toString())),_.pure.u32(Number(vt(BigInt(e.tick_upper)).toString())),_.object(q)]}),_}buildMasterNFTType(){return`${this._sdk.sdkOptions.liquidity_stratefy.package_id}::master_liquidity::MasterLiquidity`}async getMasterNFTList(e,t=[]){const n=[],i=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0},filter:{Package:this._sdk.sdkOptions.liquidity_stratefy.package_id}}),o=t.length>0;for(const s of i.data)if(D(s.data.type).full_address===this.buildMasterNFTType()){const a=un.buildMasterNFT(s);if(a){const c=`${a.id}_masterNFT`;this.updateCache(c,a,V),o?t.includes(a.pool_id)&&n.push(a):n.push(a)}}return n}async getMasterNFT(e,t=!1){const n="$masterId}_masterNFT",i=this.getCache(n,t);if(i)return i;try{const o=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}});if(D(o.data.type).full_address===this.buildMasterNFTType()){const r=un.buildMasterNFT(o);return r&&this.updateCache(n,r,V),r}}catch(o){console.log(o)}}async fetchMasterPositionInfos(e){var a;const t={},{clmm_pool:n,integrate:i,simulationAccount:o}=this.sdk.ClmmSDK.sdkOptions,s=new R;return e.forEach(c=>{c.position_ids.forEach(d=>{const l=[c.coinTypeA,c.coinTypeB],f=[s.object(I(n).global_config_id),s.object(c.pool_id),s.object(d)];s.moveCall({target:`${i.published_at}::${$t}::fetch_position_fees`,arguments:f,typeArguments:l}),s.moveCall({target:`${i.published_at}::${$t}::fetch_position_rewards`,arguments:[...f,s.object(q)],typeArguments:l})})}),(a=(await this.sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:s,sender:o.address})).events)==null||a.forEach(c=>{const{parsedJson:d}=c,{position_id:l}=d;let f=t[l];switch(f===void 0&&(f={position_id:l,feeOwedA:"0",feeOwedB:"0",rewarders:[]},t[l]=f),D(c.type).name){case"FetchPositionFeesEvent":f.feeOwedA=d.fee_owned_a,f.feeOwedB=d.fee_owned_b;break;case"FetchPositionRewardsEvent":f.rewarders=d.data;break}}),t}async getLiquidityStrategyConfigs(e=!1){const{package_id:t}=this._sdk.sdkOptions.liquidity_stratefy,n=`${t}_getLiquidityStrategyConfigst`,i=this.getCache(n,e);if(i!==void 0)return i;const o=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::master_liquidity::MasterLiquidityManagerCreatedEvent`})).data,s={master_manger_id:"",master_liquidity_handle:""};if(o.length>0){for(const r of o){const a=r.parsedJson;s.master_manger_id=a.id;const c=await this._sdk.ClmmSDK.fullClient.getObject({id:a.id,options:{showContent:!0}}),d=Q(c);s.master_liquidity_handle=d.position_maps.fields.id.id;break}this.updateCache(n,s,V)}return s}removeMasterLiquidity(e){const{clmm_pool:t}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:n}=this.sdk.sdkOptions,i=new R,o=[e.coinTypeA,e.coinTypeB];this.collectReward({coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collect_fee:!1,rewarder_coin_types:e.rewarder_coin_types,master_address:e.master_address,pool_address:e.pool_address},i);const s=[i.object(I(n).master_manger_id),i.object(e.pool_address),i.object(e.master_address),i.object(I(t).global_config_id),i.makeMoveVec({elements:e.delta_liquidities.map(r=>i.pure.u128(r))}),i.makeMoveVec({elements:e.min_amounts_a.map(r=>i.pure.u64(r))}),i.makeMoveVec({elements:e.min_amounts_a.map(r=>i.pure.u64(r))}),i.object(q)];return i.moveCall({target:`${n.published_at}::${Ui}::remove_liquidity`,typeArguments:o,arguments:s}),i}closeMasterLiquidity(e){const{clmm_pool:t}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:n}=this.sdk.sdkOptions,i=new R,o=[e.coinTypeA,e.coinTypeB];return this.collectReward({coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collect_fee:!1,rewarder_coin_types:e.rewarder_coin_types,master_address:e.master_address,pool_address:e.pool_address},i),i.moveCall({target:`${n.published_at}::${Ui}::close_master_liquidity`,typeArguments:o,arguments:[i.object(I(n).master_manger_id),i.object(e.master_address),i.object(I(t).global_config_id),i.object(e.pool_address),i.makeMoveVec({elements:e.min_amounts_a.map(s=>i.pure.u64(s))}),i.makeMoveVec({elements:e.min_amounts_a.map(s=>i.pure.u64(s))}),i.object(q)]}),i}collectFee(e,t){const{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:i}=this.sdk.sdkOptions;t=t===void 0?new R:t;const o=[e.coinTypeA,e.coinTypeB],s=[t.object(I(i).master_manger_id),t.object(e.master_address),t.object(I(n).global_config_id),t.object(e.pool_address)];return t.moveCall({target:`${i.published_at}::${Ui}::collect_fee`,typeArguments:o,arguments:s}),t}collectReward(e,t){const{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:i}=this.sdk.sdkOptions;return t=t===void 0?new R:t,e.collect_fee&&this.collectFee({...e},t),e.rewarder_coin_types.forEach(o=>{const s=[e.coinTypeA,e.coinTypeB,o];if(t){const r=[t.object(I(i).master_manger_id),t.object(e.master_address),t.object(I(n).global_config_id),t.object(e.pool_address),t.object(I(n).global_vault_id),t.object(q)];t.moveCall({target:`${i.published_at}::${Ui}::collect_reward`,typeArguments:s,arguments:r})}}),t}updateCache(e,t,n=Et){let i=this._cache[e];i?(i.overdueTime=pe(n),i.value=t):i=new St(t,pe(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e],i=n==null?void 0:n.isValid();if(!t&&i)return n.value;i||delete this._cache[e]}},g_=class{constructor(e){U(this,"_sdk");U(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}buildCoinInput(e,t,n,i,o){const{selectedCoins:s,remainingCoins:r}=ce.selectCoinAssetGreaterThanOrEqual(t,BigInt(i)),a=ce.calculateTotalBalance(s);if(a<BigInt(i))throw new Error(`The amount(${a}) is Insufficient balance for ${n} , expect ${i} `);const c=a-BigInt(i);let d;if(ce.isSuiCoin(n))d=e.splitCoins(e.gas,[e.pure.u64(i)]);else{const[l,...f]=s.map(_=>_.coinObjectId);d=e.object(l),f.length>0?o?e.mergeCoins(d,[...f.map(_=>e.object(_)),o]):e.mergeCoins(d,[...f.map(_=>e.object(_))]):o&&e.mergeCoins(d,[o])}return{selectedUnusedAmount:c,coinInput:d,remainingCoins:r}}async deposit(e){var f,_;console.log("1110 deposit : ",{params:e});const{vaults:t,frams:n}=this._sdk.sdkOptions,{clmm_pool:i}=this._sdk.ClmmSDK.sdkOptions,o=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.getVerifySenderAddress()),s=new R;let r,a;if(e.swapParams){const b=await this.handleDepositSwap(e,s,o);r=b.primaryCoinAInputs,a=b.primaryCoinBInputs}else r=(f=X.buildAddLiquidityFixTokenCoinInput(s,!e.fix_amount_a,e.amount_a,e.slippage,e.coinTypeA,o,!1))==null?void 0:f.targetCoin,a=(_=X.buildAddLiquidityFixTokenCoinInput(s,e.fix_amount_a,e.amount_b,e.slippage,e.coinTypeB,o,!1))==null?void 0:_.targetCoin;const c=I(t),d=I(n),l=I(i);return s.moveCall({target:`${t.published_at}::${f_}::deposit`,typeArguments:[e.coinTypeA,e.coinTypeB,e.lp_token_type],arguments:[s.object(c.vaults_manager_id),s.object(e.vault_id),s.object(d.rewarder_manager_id),s.object(d.global_config_id),s.object(e.farming_pool),s.object(l.global_config_id),s.object(e.clmm_pool),r,a,s.pure.u64(e.amount_a),s.pure.u64(e.amount_b),s.pure.bool(e.fix_amount_a),s.object(q)]}),s}async handleDepositSwap(e,t,n){const{clmm_pool:i,integrate:o}=this._sdk.ClmmSDK.sdkOptions,{swap_amount:s,a2b:r,route_obj:a,stakeProtocol:c}=e.swapParams,d=r?e.coinTypeA:e.coinTypeB,l=X.buildCoinForAmount(t,n,BigInt(s),d,!1),f=BigInt(l.tragetCoinAmount)-BigInt(s);let _=[];if(c){const j=this.requestStakeCoin(c,t,l.targetCoin),M=X.buildCoinForAmount(t,l.remainCoins,BigInt(0),d,!1).targetCoin;_=r?[M,j]:[j,M]}else if(a){const j=X.buildCoinForAmount(t,n,0n,r?e.coinTypeB:e.coinTypeA,!1),M=await X.buildAggregatorSwapReturnCoins(this._sdk.ClmmSDK,a,l,j,"",e.slippage,t);_=r?[M.fromCoin,M.toCoin]:[M.toCoin,M.fromCoin],console.log("swapCoinInputTo.isMintZeroCoin: ",j),!j.isMintZeroCoin&&j.originalSplitedCoin===void 0&&t.transferObjects([j.targetCoin],t.pure.address(this._sdk.getVerifySenderAddress()))}else{const j=X.buildCoinForAmount(t,n,0n,r?e.coinTypeB:e.coinTypeA,!1),M=en.getDefaultSqrtPriceLimit(r).toString();_=t.moveCall({target:`${o.published_at}::${Rn}::swap`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(I(i).global_config_id),t.object(e.clmm_pool),r?l.targetCoin:j.targetCoin,r?j.targetCoin:l.targetCoin,t.pure.bool(r),t.pure.bool(!0),t.pure.u64(s),t.pure.u128(M),t.pure.bool(!1),t.object(q)]})}let b,y;const A=_[0],O=_[1];if(r){const j=BigInt(e.amount_a)-f;ce.isSuiCoin(d)?(t.transferObjects([A],t.pure.address(this._sdk.getVerifySenderAddress())),b=t.splitCoins(t.gas,[t.pure.u64(e.amount_a)])):j>0n?b=this.buildCoinInput(t,l.remainCoins,d,j,A).coinInput:b=A,y=O}else{b=A;const j=BigInt(e.amount_b)-f;ce.isSuiCoin(d)?(t.transferObjects([O],t.pure.address(this._sdk.getVerifySenderAddress())),y=t.splitCoins(t.gas,[t.pure.u64(e.amount_b)])):j>0n?y=this.buildCoinInput(t,l.remainCoins,d,j,O).coinInput:y=O}return{primaryCoinAInputs:b,primaryCoinBInputs:y}}async remove(e){console.log({params:e});const{vaults:t,frams:n}=this.sdk.sdkOptions,{clmm_pool:i,integrate:o}=this._sdk.ClmmSDK.sdkOptions,s=new R,r=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.getVerifySenderAddress(),e.lp_token_type),a=X.buildCoinForAmount(s,r,BigInt(e.lp_token_amount),e.lp_token_type,!1).targetCoin,c=I(t),d=I(n),l=I(i),f=[e.coinTypeA,e.coinTypeB,e.lp_token_type],_=s.moveCall({target:`${t.published_at}::${h_}::remove`,typeArguments:f,arguments:[s.object(c.vaults_manager_id),s.object(e.vault_id),s.object(d.rewarder_manager_id),s.object(d.global_config_id),s.object(e.farming_pool),s.object(l.global_config_id),s.object(e.clmm_pool),a,s.pure.u64(e.lp_token_amount),s.pure.u64(e.min_amount_a),s.pure.u64(e.min_amount_b),s.object(q)]}),b=_[0],y=_[1];if(e.swapParams){const{a2b:A,swap_amount:O,route_obj:j}=e.swapParams;if(j){const M={targetCoin:A?b:y,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:""},B={targetCoin:A?y:b,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:""},$=await X.buildAggregatorSwapReturnCoins(this._sdk.ClmmSDK,j,M,B,"",e.slippage,s),J=A?[$.fromCoin,$.toCoin]:[$.toCoin,$.fromCoin];A?s.mergeCoins(J[1],[y]):s.mergeCoins(J[0],[b]),s.transferObjects([...J],s.pure.address(this._sdk.getVerifySenderAddress()))}else{const M=en.getDefaultSqrtPriceLimit(A).toString(),B=s.moveCall({target:`${o.published_at}::${Rn}::swap`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[s.object(I(i).global_config_id),s.object(e.clmm_pool),b,y,s.pure.bool(A),s.pure.bool(!0),s.pure.u64(O),s.pure.u128(M),s.pure.bool(!0),s.object(q)]});s.transferObjects([B[0],B[1]],s.pure.address(this._sdk.getVerifySenderAddress()))}}else s.transferObjects([b,y],s.pure.address(this._sdk.getVerifySenderAddress()));return s}async getVaultList(e="all"){const{vaults:t}=this._sdk.sdkOptions,n=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t.package_id}::vaults::CreateEvent`},e),i=n.data.map(r=>r.parsedJson.id),o=await this._sdk.ClmmSDK.fullClient.batchGetObjects(i,{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}),s=[];return o.forEach(r=>{const a=Pt.buildPool(r);a&&(a.stake_protocol=this.findStakeProtocol(a.position.coinTypeA,a.position.coinTypeB),this.savePoolToCache(a),s.push(a))}),n.data=s,n}findStakeProtocol(e,t){const{haedal:n,volo:i,aftermath:o}=I(this._sdk.sdkOptions.vaults),s=D(e).full_address,r=D(t).full_address;if(ce.isSuiCoin(s)||ce.isSuiCoin(r)){if(n){const a=D(I(n).coin_type).full_address;if(s===a||r===a)return"Haedal"}if(i){const a=D(I(i).coin_type).full_address;if(s===a||r===a)return"Volo"}if(o){const a=D(I(o).coin_type).full_address;if(s===a||r===a)return"aftermath"}}}savePoolToCache(e){const t=`${e.id}_mirrorPool`;this.updateCache(t,e,V)}readPoolFromCache(e,t=!1){const n=`${e}_mirrorPool`;return this.getCache(n,t)}async calculateMaxAvailable(e){var A;const{integrate:t,simulationAccount:n}=this.sdk.ClmmSDK.sdkOptions,i=new R,o=G.tickIndexToSqrtPriceX64(e.lowerTick),s=G.tickIndexToSqrtPriceX64(e.upperTick),r=new g(e.curSqrtPrice),a=pt.getCoinAmountFromLiquidity(new g(e.input_amount),r,o,s,!1),c=[e.coinTypeA,e.coinTypeB];i.moveCall({target:`${t.published_at}::${$t}::calculate_swap_result`,arguments:[i.object(e.clmm_pool),i.pure.bool(!0),i.pure.bool(!0),i.pure.u64(a.coinA.toString())],typeArguments:c}),i.moveCall({target:`${t.published_at}::${$t}::calculate_swap_result`,arguments:[i.object(e.clmm_pool),i.pure.bool(!1),i.pure.bool(!0),i.pure.u64(a.coinB.toString())],typeArguments:c});const l=(A=(await this.sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:i,sender:n.address})).events)==null?void 0:A.filter(O=>D(O.type).name==="CalculatedSwapResultEvent");if(l.length===0)return null;const f=l[0].parsedJson.data,_=l[1].parsedJson.data,b=w(a.coinB.toString()).add(f.amount_out),y=w(a.coinA.toString()).add(_.amount_out);return{maxAmountB:b,maxAmountA:y}}async calculateRemoveSwapAmount(e,t){const n=Pt.calculateDepositRatio(e.lowerTick,e.upperTick,new g(e.curSqrtPrice)),i=e.fix_amount_a?n.ratioA:n.ratioB;console.log({fixRatio:i});let o=w(e.receive_amount).mul(i),s,r;if(e.removeLiquidity){const A=G.tickIndexToSqrtPriceX64(e.lowerTick),O=G.tickIndexToSqrtPriceX64(e.upperTick),j=pt.getCoinAmountFromLiquidity(new g(e.removeLiquidity),new g(e.curSqrtPrice),A,O,!1);r=e.removeLiquidity,s=e.fix_amount_a?j.coinB.toString():j.coinA.toString(),o=e.fix_amount_a?w(j.coinA.toString()):w(j.coinB.toString())}else{const A=pt.estLiquidityAndcoinAmountFromOneAmounts(e.lowerTick,e.upperTick,new g(o.toFixed(0)),e.fix_amount_a,!1,.2,new g(e.curSqrtPrice));r=A.liquidityAmount.toString(),s=e.fix_amount_a?A.coinAmountB.toString():A.coinAmountA.toString()}console.log({fixAmount:o,otherSideAmount:s});const a=!e.fix_amount_a,c=await this.clmmPreSwap(e.clmm_pool,e.curSqrtPrice,a,w(s),e.coinTypeA,e.coinTypeB,!0,e.priceSplitPoint,e.use_route,[{pool_id:e.clmm_pool,tick_lower:e.lowerTick,tick_upper:e.upperTick,delta_liquidity:Number(r),is_increase:!1}]);console.log({data:c,range:t});const d=o.add(c.amount_out),l=w(e.receive_amount),f=l.sub(d);if(console.log(`: ${d.toString()} , : ${e.receive_amount}, : ${f.toString()} `),(!e.removeLiquidity||e.removeLiquidity&&t)&&f.abs().greaterThan(l.mul(.01))){const A=d.lessThan(l);let O,j;t?A?(O=w(r),j=t.right):(O=t.left,j=w(r)):(O=w(A?r:0),j=w(A?e.maxLiquidity:r));const M=w(O).add(j).div(2).toFixed(0);if(console.log({left:O.toString(),right:j.toString(),midLiquidity:M.toString()}),!t||t&&t.count<15&&O<j)return await this.calculateRemoveSwapAmount({...e,removeLiquidity:M},{left:O,right:j,count:t?t.count+1:0})}const _=c.amount_in&&c.fee_amount?new g(c.amount_in).add(new g(c.fee_amount)).toString():c.amount_in,b=c.amount_out,{is_exceed:y}=c;return{swapInAmount:_,swapOutAmount:b,liquidity:r,is_exceed:y,routeObj:c.route_obj,request_id:e.request_id}}async calculateStakeDepositFixSui(e){const t=e.inputSuiAmount.mul(e.remainRate),n=e.inputSuiAmount.sub(e.swapSuiAmount),i=e.exchangeRate?e.exchangeRate:await this.getExchangeRateForStake(e.stakeProtocol,e.shouldRequestStake,Number(e.swapSuiAmount.toFixed(0))),o=e.swapSuiAmount.div(i).toFixed(0);console.log({swapAmount:e.swapSuiAmount.toString(),hasuiAmount:o.toString(),leftSuiAmount:e.leftSuiAmount.toString(),rightSuiAmount:e.rightSuiAmount.toString(),exchangeRate:i});const s=pt.estLiquidityAndcoinAmountFromOneAmounts(e.lowerTick,e.upperTick,new g(o.toString()),!e.fixCoinA,!0,0,new g(e.curSqrtPrice)),r=e.fixCoinA?s.coinAmountA.toString():s.coinAmountB.toString(),a=w(n).sub(r);return console.log({useSuiAmount:r.toString(),hasuiAmount:o.toString(),remainSui:n.toString(),remainSuiLimit:t.toString(),actRemainSui:a.toString(),rebalanceCount:e.rebalanceCount}),a.greaterThanOrEqualTo(0)&&a.lessThanOrEqualTo(t)||e.rebalanceCount>12||e.leftSuiAmount.greaterThanOrEqualTo(e.rightSuiAmount)?{swapInAmount:e.swapSuiAmount.toFixed(0),swapOutAmount:o,afterSqrtPrice:e.curSqrtPrice,fixAmountA:!e.fixCoinA,is_exceed:!0,request_id:"",stake_protocol:e.stakeProtocol}:a.lessThan(0)?await this.calculateStakeDepositFixSui({...e,rightSuiAmount:e.swapSuiAmount,swapSuiAmount:e.swapSuiAmount.add(e.leftSuiAmount).div(2),exchangeRate:i,rebalanceCount:e.rebalanceCount+1}):a.greaterThan(t)?await this.calculateStakeDepositFixSui({...e,leftSuiAmount:e.swapSuiAmount,swapSuiAmount:e.swapSuiAmount.add(e.rightSuiAmount).div(2),exchangeRate:i,rebalanceCount:e.rebalanceCount+1}):null}async calculateDepositSwapAmount(e,t=!1){const n=G.sqrtPriceX64ToTickIndex(new g(e.curSqrtPrice)),{ratioA:i,ratioB:o}=Pt.calculateDepositRatio(e.lowerTick,e.upperTick,new g(e.curSqrtPrice));console.log("1110 calculateDepositSwapAmount params: ",{...e,currentTick:n,adjustBestAmount:t});const s=w(e.input_amount).mul(e.fix_amount_a?i:o);let r=w(e.input_amount).sub(s);console.log("1110 ",{fixAmount:s.toString(),swapAmount:r.toString()});const a=e.fix_amount_a;if(r.toFixed(0)==="0")return null;if(e.stakeProtocol){if(ce.isSuiCoin(e.coinTypeA)&&e.fix_amount_a||ce.isSuiCoin(e.coinTypeB)&&!e.fix_amount_a){const z=await this.calculateStakeDepositFixSui({inputSuiAmount:w(e.input_amount),swapSuiAmount:r,lowerTick:e.lowerTick,upperTick:e.upperTick,curSqrtPrice:e.curSqrtPrice,remainRate:e.remainRate?e.remainRate:.01,fixCoinA:e.fix_amount_a,rebalanceCount:0,shouldRequestStake:e.shouldRequestStake,leftSuiAmount:a?new L(r.toFixed(0)):new L(0),rightSuiAmount:a?new L(e.input_amount):new L(r.toFixed(0)),stakeProtocol:e.stakeProtocol});return z?{...z,request_id:e.request_id}:null}throw Error("Only support fix sui")}const c=n<e.lowerTick||n>e.upperTick,d={clmm_pool:e.clmm_pool,curSqrtPrice:e.curSqrtPrice,a2b:a,amount_a:a?new L(e.input_amount):new L(0),amount_b:a?new L(0):new L(e.input_amount),amount_left:a?new L(r.toFixed(0)):new L(0),amount_right:a?new L(e.input_amount):new L(r.toFixed(0)),lowerTick:e.lowerTick,upperTick:e.upperTick,tick_spacing:2,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,useRoute:e.use_route,remainRate:e.remainRate?e.remainRate:.01,priceSplitPoint:e.priceSplitPoint},l=t&&n<=e.upperTick;let f=l?await this.calculateRebalance(d):await this.clmmPreSwap(e.clmm_pool,e.curSqrtPrice,a,r,e.coinTypeA,e.coinTypeB,!0,e.priceSplitPoint,e.use_route),_=f.after_sqrt_price;const b=G.sqrtPriceX64ToTickIndex(new g(_));console.log("1110  : ",{...f,currentTick:b},null,2);const y=b<e.lowerTick||b>e.upperTick;if(c!==y&&!l&&b<=e.upperTick){console.log("1110 , swap: ");const{ratioA:z,ratioB:re}=Pt.calculateDepositRatio(e.lowerTick,e.upperTick,new g(_));console.log("1110 ",{newAfterRatioA:z,newAfterRatioB:re}),r=w(e.input_amount).sub(w(e.input_amount).mul(e.fix_amount_a?z:re)),d.amount_left=a?new L(r.toFixed(0)):new L(0),d.amount_right=a?new L(e.input_amount):new L(r.toFixed(0)),f=await this.calculateRebalance(d),_=f.after_sqrt_price;const ge=G.sqrtPriceX64ToTickIndex(new g(_));console.log("1110 : ",{lowerTick:e.lowerTick,upperTick:e.upperTick,currentTick:ge,afterSqrtPrice:_})}const{ratioA:A,ratioB:O}=Pt.calculateDepositRatio(e.lowerTick,e.upperTick,new g(_));console.log("1110 1",{afterRatioA:A,afterRatioB:O,data:f});let j=O.div(A).sub(o.div(i)).greaterThan("0");const M=f.amount_in&&f.fee_amount?new g(f.amount_in).add(new g(f.fee_amount)).toString():f.amount_in,B=f.amount_out,{is_exceed:$}=f;if(b<e.lowerTick)j=!0;else if(b>e.upperTick)j=!1;else{const z=j===a?new g(w(e.input_amount).sub(M).toString()):new g(B),re=pt.estLiquidityAndcoinAmountFromOneAmounts(e.lowerTick,e.upperTick,z,j,!0,0,new g(_)),ge=re.coinAmountA,mt=re.coinAmountB,Y=w(e.fix_amount_a?ge.toString():mt.toString()).add(M);console.log("1110 :",{preAmountTotal:Y.toString(),fixAmountA:j}),Y.greaterThanOrEqualTo(e.input_amount)&&(j=!j)}const J={swapInAmount:M,swapOutAmount:B,afterSqrtPrice:_,is_exceed:$,fixAmountA:j,routeObj:f.route_obj,request_id:e.request_id,use_Haedal_stake:!1};return console.log(J),J}async calculateHaedalDepositSwapAmount(e){const t=G.sqrtPriceX64ToTickIndex(new g(e.curSqrtPrice)),{ratioA:n,ratioB:i}=Pt.calculateDepositRatio(e.lowerTick,e.upperTick,new g(e.curSqrtPrice));console.log("1110 calculateDepositSwapAmount params: ",{...e,currentTick:t});const o=w(e.input_amount).mul(e.fix_amount_a?n:i),s=w(e.input_amount).sub(o);console.log("1110 ",{fixAmount:o.toString(),swapAmount:s.toString()});const r=e.fix_amount_a;if(s.toFixed(0)==="0")return null;if(e.stakeProtocol){if(ce.isSuiCoin(e.coinTypeA)&&e.fix_amount_a||ce.isSuiCoin(e.coinTypeB)&&!e.fix_amount_a){const a=await this.calculateStakeDepositFixSui({inputSuiAmount:w(e.input_amount),swapSuiAmount:s,lowerTick:e.lowerTick,upperTick:e.upperTick,curSqrtPrice:e.curSqrtPrice,remainRate:e.remainRate?e.remainRate:.01,fixCoinA:e.fix_amount_a,rebalanceCount:0,shouldRequestStake:e.shouldRequestStake,leftSuiAmount:r?new L(s.toFixed(0)):new L(0),rightSuiAmount:r?new L(e.input_amount):new L(s.toFixed(0)),stakeProtocol:e.stakeProtocol});return a?{...a,request_id:e.request_id}:null}throw Error("Only support fix sui")}return null}async calculateRebalance(e){const{clmm_pool:t,a2b:n,curSqrtPrice:i,amount_a:o,amount_b:s,lowerTick:r,upperTick:a,amount_left:c,amount_right:d,coinTypeA:l,coinTypeB:f,useRoute:_,priceSplitPoint:b,remainRate:y}=e,A=async(O,j,M)=>{const B=O.plus(j).div(2),$=await this.clmmPreSwap(t,i,n,B,l,f,!0,b,_);if($.amount_out==="0")return $;if($.after_sqrt_price||($.after_sqrt_price=e.curSqrtPrice),$.is_exceed)return j=B,A(O,j,M+1);const J=n?o.sub($.amount_in):o.add($.amount_out),z=n?s.add($.amount_out):s.sub($.amount_in),re=G.sqrtPriceX64ToTickIndex(new g($.after_sqrt_price)),ge=pt.estLiquidityAndcoinAmountFromOneAmounts(r,a,new g(J.toString()),!0,!0,1,new g($.after_sqrt_price)),mt=new L(ge.coinAmountA.toString()),Y=new L(ge.coinAmountB.toString());if(console.log("1110 swap ",{preRes:$,left:O.toString(),right:j.toString(),mid:B.toString(),afterPoolTickIndex:re,afterA:J.toString(),afterB:z.toString(),usedA:mt.toString(),usedB:toString(),count:M}),mt.toString()!==J.toString())throw new Error("usedA does not match afterA");if(z.lessThan(Y))n?O=B:j=B;else{n?j=B:O=B;const W=z.sub(Y),ue=z.mul(y);if(console.log("1110 amount ",{remainingB:W.toString(),maxRemainingB:ue.toString(),remainRate:y,count:M}),ue.sub(W).greaterThanOrEqualTo(0))return console.log("break"),{...$,remainingB:W}}return O.greaterThan(j)||j.sub(O).lessThan(10)?$:A(O,j,M+1)};return c.greaterThanOrEqualTo(d)?A(new L(0),c,0):A(c,d,0)}async clmmPreSwap(e,t,n,i,o,s,r,a,c,d){var j;if(c)try{const M=await this._sdk.ClmmSDK.RouterV2.getBestRouter(n?o:s,n?s:o,Number(i.toFixed(0)),r,a,"",void 0,void 0,!0,!1,d);if(!M.result)throw new Error("route unavailable");const{result:B}=M;let $=t;return B.splitPaths.forEach(J=>{const z=J.basePaths.find(re=>re.poolAddress.toLowerCase()===e.toLowerCase());z&&($=z.afterSqrtPrice.toString())}),{amount_in:B.inputAmount.toString(),amount_out:B.outputAmount.toString(),after_sqrt_price:$,is_exceed:B.isExceed,route_obj:B}}catch{throw new Error("route unavailable")}const{integrate:l,simulationAccount:f}=this.sdk.ClmmSDK.sdkOptions,_=new R,b=[o,s],y=[_.object(e),_.pure.bool(n),_.pure.bool(r),_.pure.u64(i.toFixed(0))];_.moveCall({target:`${l.published_at}::${$t}::calculate_swap_result`,arguments:y,typeArguments:b});const O=(j=(await this.sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:_,sender:f.address})).events)==null?void 0:j.filter(M=>D(M.type).name==="CalculatedSwapResultEvent");return O.length===0?null:O[0].parsedJson.data}async getVault(e,t=!1){const n=this.readPoolFromCache(e,t);if(n)return n;try{const i=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}}),o=Pt.buildPool(i);if(o)return o.stake_protocol=this.findStakeProtocol(o.position.coinTypeA,o.position.coinTypeB),this.savePoolToCache(o),o}catch(i){console.log(i)}}async getVaultsConfigs(e=!1){const{package_id:t}=this._sdk.sdkOptions.vaults,n=`${t}_getMirrorPoolConfigs`,i=this.getCache(n,e);if(i!==void 0)return i;const o=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::vaults::InitEvent`})).data,s={admin_cap_id:"",vaults_manager_id:"",vaults_pool_handle:""};if(o.length>0){for(const r of o){const a=r.parsedJson;s.admin_cap_id=a.admin_cap_id,s.vaults_manager_id=a.manager_id;const c=await this._sdk.ClmmSDK.fullClient.getObject({id:s.vaults_manager_id,options:{showContent:!0}}),d=Q(c);s.vaults_pool_handle=d.vault_to_pool_maps.fields.id.id;break}this.updateCache(n,s,V)}return s}async getExchangeRateForStake(e,t,n){return e==="Haedal"?await hs.getExchangeRateForStake(this._sdk,t,n):e==="Volo"?await ps.getExchangeRateForStake(this._sdk,t,n):e==="aftermath"?await _s.getExchangeRateForStake(this._sdk,t,n):"0"}requestStakeCoin(e,t,n){if(e==="Haedal")return hs.requestStakeCoin(this._sdk,t,n);if(e==="Volo")return ps.requestStakeCoin(this._sdk,t,n);if(e==="aftermath")return _s.requestStakeCoin(this._sdk,t,n)}async requestStake(e,t,n){if(e==="Haedal")return await hs.requestStake(this._sdk,t,n);if(e==="Volo")return await ps.requestStake(this._sdk,t,n);if(e==="aftermath")return await _s.requestStake(this._sdk,t,n)}updateCache(e,t,n=Et){let i=this._cache[e];i?(i.overdueTime=pe(n),i.value=t):i=new St(t,pe(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e],i=n==null?void 0:n.isValid();if(!t&&i)return n.value;i||delete this._cache[e]}},y_=class{constructor(e){U(this,"_sdk");U(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getLimitOrderTokenList(){const{limit_order:e}=this._sdk.sdkOptions,{token_list_handle:t}=I(e),{fullClient:n}=this._sdk.ClmmSDK,o=(await n.getDynamicFieldsByPage(t)).data.map(r=>r.objectId);return(await n.batchGetObjects(o,{showContent:!0})).map(r=>{const{fields:a}=r.data.content;return{coin_type:D(a.name.fields.name).full_address,min_trade_amount:Number(a.value)}})}async getLimitOrderPoolList(){const{limit_order:e}=this._sdk.sdkOptions,{rate_orders_indexer_handle:t}=I(e),{fullClient:n}=this._sdk.ClmmSDK,o=(await n.getDynamicFieldsByPage(t)).data.map(r=>r.objectId);return(await n.batchGetObjects(o,{showContent:!0})).map(r=>{const{fields:a}=r.data.content.fields.value,c={pay_coin_type:D(a.pay_coin.fields.name).full_address,target_coin_type:D(a.target_coin.fields.name).full_address,indexer_id:a.indexer_id};return this._sdk.updateCache(`${c.pay_coin_type}_${c.target_coin_type}`,c.indexer_id),c})}async getPoolIndexerId(e,t){const n=this._sdk.getCache(`${e}_${t}`);try{if(n===void 0){const o=(await this.getLimitOrderPoolList()).filter(s=>D(s.pay_coin_type).full_address===D(e).full_address&&D(s.target_coin_type).full_address===D(t).full_address);if(o.length>0)return o[0].indexer_id}}catch{}return n}async getOwnerLimitOrderList(e,t){const{fullClient:n}=this._sdk.ClmmSDK,i={data:[],hasNextPage:!1};try{const o=await this.getUserIndexerHandle(e);if(!o)return i;const s=await n.getDynamicFieldsByPage(o,t);i.hasNextPage=s.hasNextPage,i.nextCursor=s.nextCursor;const r=s.data.map(d=>d.name.value),c=(await n.batchGetObjects(r,{showContent:!0})).map(d=>di.buildLimitOrderInfo(d)).filter(d=>d!==void 0);i.data=c}catch(o){console.log("Error in getOwnerLimitOrderList:",o)}return i}async getLimitOrderConfigs(){const{package_id:e}=this._sdk.sdkOptions.limit_order,t={rate_orders_indexer_id:"",rate_orders_indexer_handle:"",global_config_id:"",token_list_handle:"",user_orders_indexer_id:"",user_orders_indexer_handle:""},n=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::limit_order::InitEvent`})).data;if(n.length>0){const o=n[0].parsedJson;t.rate_orders_indexer_id=o.rate_orders_indexer_id,t.user_orders_indexer_id=o.user_orders_indexer_id;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:t.rate_orders_indexer_id,options:{showContent:!0}});t.rate_orders_indexer_handle=Q(s).list.fields.id.id;const r=await this._sdk.ClmmSDK.fullClient.getObject({id:t.user_orders_indexer_id,options:{showContent:!0}});t.user_orders_indexer_handle=Q(r).indexer.fields.id.id}const i=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitFactoryEvent`})).data;if(i.length>0){const o=i[0].parsedJson;t.global_config_id=o.global_config_id;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:t.global_config_id,options:{showContent:!0}}),r=Q(s);t.token_list_handle=r.token_white_list.fields.id.id}return t}async getLimitOrder(e){const{fullClient:t}=this._sdk.ClmmSDK;try{const n=await t.getObject({id:e,options:{showContent:!0}});return di.buildLimitOrderInfo(n)}catch(n){console.log("Error in getLimitOrder:",n);return}}async getLimitOrderLogs(e){const{fullClient:t}=this._sdk.ClmmSDK;try{const n=await t.queryTransactionBlocks({filter:{ChangedObject:e},options:{showEvents:!0}}),i=[];return n.data.forEach(o=>{i.push(...di.buildOrderLimitEvent(o,["OrderPlacedEvent","OrderCanceledEvent","FlashLoanEvent"]))}),i}catch(n){return console.log("Error in getLimitOrderLogs:",n),[]}}async getLimitOrderClaimLogs(e){const{fullClient:t}=this._sdk.ClmmSDK;try{const n=await t.queryTransactionBlocks({filter:{ChangedObject:e},options:{showEvents:!0}}),i=[];return n.data.forEach(o=>{i.push(...di.buildOrderLimitEvent(o,["ClaimTargetCoinEvent"]))}),i}catch(n){return console.log("Error in getLimitOrderLogs:",n),[]}}buildRateOrdersIndexerType(e){const{limit_order:t}=this._sdk.sdkOptions;return po(`${t.package_id}::limit_order::RateOrdersIndexer`,[e.pay_coin_type,e.target_coin_type])}async placeLimitOrder(e){const{limit_order:t}=this._sdk.sdkOptions,{user_orders_indexer_id:n,global_config_id:i,rate_orders_indexer_id:o}=I(t),s=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,e.pay_coin_type),r=new R,a=await this.getPoolIndexerId(e.pay_coin_type,e.target_coin_type),c=X.buildCoinForAmount(r,s,BigInt(e.pay_coin_amount),e.pay_coin_type,!1,!0);return r.moveCall({target:`${t.published_at}::limit_order::${a===void 0?"create_indexer_and_place_limit_order":"place_limit_order"}`,typeArguments:[e.pay_coin_type,e.target_coin_type],arguments:[r.object(i),a===void 0?r.object(o):r.object(a),r.object(n),c.targetCoin,r.pure.u128(di.priceToRate(e.price,e.pay_decimal,e.target_decimal)),r.pure.u64(e.expired_ts),r.object(q)]}),r}async claimTargetCoin(e){const{limit_order:t}=this._sdk.sdkOptions,{global_config_id:n}=I(t),i=new R;return i.moveCall({target:`${t.published_at}::limit_order::claim_target_coin`,typeArguments:[e.pay_coin_type,e.target_coin_type],arguments:[i.object(n),i.object(e.order_id)]}),i}async cancelOrdersByOwner(e){const{limit_order:t}=this._sdk.sdkOptions,{global_config_id:n}=I(t),i=new R,o={};for(let s=0;s<e.length;s++){const r=e[s],a=await this.getPoolIndexerId(r.pay_coin_type,r.target_coin_type);if(a===void 0)throw Error("not found indexerId");o[r.order_id]=a}return e.forEach(s=>{i.moveCall({target:`${t.published_at}::limit_order::cancel_order_by_owner`,typeArguments:[s.pay_coin_type,s.target_coin_type],arguments:[i.object(n),i.object(o[s.order_id]),i.object(s.order_id),i.object(q)]})}),i}async getUserIndexerHandle(e){const{fullClient:t}=this._sdk.ClmmSDK,{limit_order:n}=this._sdk.sdkOptions;let i=this.getUserIndexerHandleByCache(e);if(i===void 0){const o=new R;o.moveCall({target:`${n.published_at}::limit_order::get_orders_indexer_by_owner`,typeArguments:[],arguments:[o.pure.address(e),o.object(I(n).user_orders_indexer_id)]}),i=(await t.devInspectTransactionBlock({transactionBlock:o,sender:this._sdk.ClmmSDK.sdkOptions.simulationAccount.address})).events[0].parsedJson.orders_table_id,i&&this.saveUserIndexerHandleByCache(e,i)}return i}getUserIndexerHandleByCache(e){const t=`getUserIndexerHandleByCache_${e}`;return this.getCache(t)}saveUserIndexerHandleByCache(e,t){const n=`getUserIndexerHandleByCache_${e}`;return this.updateCache(n,t)}updateCache(e,t,n=V){let i=this._cache[e];i?(i.overdueTime=pe(n),i.value=t):i=new St(t,pe(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e],i=n==null?void 0:n.isValid();if(!t&&i)return n.value;i||delete this._cache[e]}},w_=class{constructor(e){U(this,"_sdk");U(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getFramsPoolList(e="all"){const{package_id:t}=this._sdk.sdkOptions.frams,n={data:[],hasNextPage:!1};try{const i=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::pool::CreatePoolEvent`},e),o=i.data.map(s=>s.parsedJson.pool_id);if(n.hasNextPage=i.hasNextPage,n.nextCursor=i.nextCursor,o.length>0){const s=await this._sdk.ClmmSDK.fullClient.batchGetObjects(o,{showType:!0,showContent:!0});for(const r of s){const a=Ki.buildFramsPool(r);a&&(a.rewarders=await this.getFramsRewarderConfig(a.clmm_pool_id,a.rewarders.map(c=>c.reward_coin)),n.data.push(a),this.updateCache(a.id,a))}}}catch(i){console.log("getFramsPoolList error ",i)}return n}async getFramsPool(e,t=!1){const n=this.getCache(e,t);if(n)return n;const i=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}}),o=Ki.buildFramsPool(i.data);return o&&(o.rewarders=await this.getFramsRewarderConfig(o.clmm_pool_id,o.rewarders.map(s=>s.reward_coin)),this.updateCache(o.id,o)),o}async getFramsRewarderConfig(e,t,n=!1){const{frams:i}=this._sdk.sdkOptions,o=[];for(const s of t){const r=`getFramsRewarderConfig_${s}_${e}`,a=this.getCache(r,n);if(a)o.push(a);else try{const c=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:I(i).rewarder_manager_handle,name:{type:"0x1::type_name::TypeName",value:rd(s)}}),{fields:d}=c.data.content.fields.value.fields.value,l={reward_coin:s,last_reward_time:d.last_reward_time,emission_per_second:d.emission_per_second,total_allocate_point:d.total_allocate_point,allocate_point:""},f=d.pools.fields.id.id,_=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:f,name:{type:"0x2::object::ID",value:e}}),{allocate_point:b}=_.data.content.fields.value.fields.value.fields;l.allocate_point=b,this.updateCache(r,l),o.push(l)}catch(c){console.log(c)}}return o}async getOwnedFramsPositionNFTList(e,t=[],n=!1,i="all"){const{package_id:o}=this._sdk.sdkOptions.frams,s={data:[],hasNextPage:!1};let r={};const a=[],c=t.length>0,d=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{filter:{StructType:`${o}::pool::WrappedPositionNFT`},options:{showContent:!0}},i);s.hasNextPage=d.hasNextPage,s.nextCursor=d.nextCursor;for(const l of d.data){const f=Ki.buildFramsPositionNFT(l);if(f)if(c){if(t.includes(f.pool_id)){a.push(f);let _=r[f.pool_id];_?_.push(f):_=[f],r[f.pool_id]=_}}else a.push(f)}if(n&&a.length>0){const l=await this.calculateFarmingRewards(a.map(f=>({pool_id:f.pool_id,position_nft_id:f.id,clmm_pool_id:f.clmm_pool_id})));c?(r={},a.forEach(f=>{l[f.id]&&(f.rewards=l[f.id]);let b=r[f.pool_id];b?b.push(f):b=[f],r[f.pool_id]=b})):a.forEach(f=>{l[f.id]&&(f.rewards=l[f.id])})}return c?r:(s.data=a,s)}async getFramsPositionNFT(e,t=!0){const n=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),i=Ki.buildFramsPositionNFT(n);if(t&&i){const o=await this.calculateFarmingRewards([{pool_id:i.pool_id,position_nft_id:i.id}]);o[i.id]&&(i.rewards=o[i.id])}return i}async calculateFarmingRewards(e){var r;const{frams:t}=this._sdk.sdkOptions,n=new R,{rewarder_manager_id:i,global_config_id:o}=I(t);e.forEach(a=>{n.moveCall({target:`${t.published_at}::router::accumulated_position_rewards`,typeArguments:[],arguments:[n.object(o),n.object(i),n.object(a.pool_id),n.pure.address(a.position_nft_id),n.object(q)]})});const s={};try{const a=await this._sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:n,sender:this.sdk.ClmmSDK.senderAddress});console.log({simulateRes:a});const c=(r=a==null?void 0:a.events)==null?void 0:r.filter(d=>D(d.type).name==="AccumulatedPositionRewardsEvent");if(c&&c.length>0)for(let d=0;d<c.length;d+=1){const{parsedJson:l}=c[d],f=[];l.rewards.contents.forEach(_=>{f.push({rewarder_type:D(_.key.name).full_address,rewarder_amount:_.value})}),s[l.wrapped_position_id]=f}}catch(a){console.log(a)}return s}depositPayload(e,t){const{frams:n}=this.sdk.sdkOptions;t=t||new R;const{global_config_id:i,rewarder_manager_id:o}=I(n);return t.moveCall({target:`${n.published_at}::router::deposit`,typeArguments:[],arguments:[t.object(i),t.object(o),t.object(e.pool_id),t.object(e.clmm_position_id),t.object(q)]}),t}async withdrawPayload(e,t){const{frams:n}=this.sdk.sdkOptions,{global_config_id:i,rewarder_manager_id:o}=I(n);return t=t||new R,t=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id},t),t.moveCall({target:`${n.published_at}::router::withdraw`,typeArguments:[],arguments:[t.object(i),t.object(o),t.object(e.pool_id),t.object(e.position_nft_id),t.object(q)]}),t}async batchHarvestPayload(e,t){t=t||new R;for(const n of e)await this.harvestPayload(n,t);return t}async batchHarvestAndClmmFeePayload(e,t){if(!ht(this._sdk.ClmmSDK.senderAddress))throw new Error("this config sdk senderAddress is not set right");const n=new R,i={},o=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,null);for(const c of t)this.collectClmmFeeInternal(c,i,n,o),this.collectClmmRewardInternal(c,i,n,o);const{frams:s}=this.sdk.sdkOptions,{global_config_id:r,rewarder_manager_id:a}=I(s);for(const c of e){const d=await this.getFramsPool(c.pool_id,!1);if(d===void 0)throw Error(`not found ${c.pool_id}`);c.collect_fee&&this.collectFeeInternal(c,i,n,o),c.clmm_rewarder_types.length>0&&await this.collectRewardInternal(c,i,n,o),c.collect_frams_rewarder&&d.rewarders.forEach(l=>{n&&n.moveCall({target:`${s.published_at}::router::harvest`,typeArguments:[l.reward_coin],arguments:[n.object(r),n.object(a),n.object(c.pool_id),n.object(c.position_nft_id),n.object(q)]})})}return Object.keys(i).forEach(c=>{const d=i[c],l=d.originalSplitedCoin;(d.isMintZeroCoin||l&&(l==null?void 0:l.$kind)==="GasCoin")&&X.buildTransferCoin(this._sdk.ClmmSDK,n,d.targetCoin,c,this._sdk.ClmmSDK.senderAddress)}),n}async collectRewardInternal(e,t,n,i){const o=[];e.clmm_rewarder_types.forEach(s=>{const r=ke(s);let a=t[s];a===void 0&&(a=X.buildCoinForAmount(n,i,BigInt(0),r,!1),t[r]=a),o.push(a.targetCoin)}),await this.collectClmmRewardNoSendPayload(e,n)}collectFeeInternal(e,t,n,i){const{frams:o}=this.sdk.sdkOptions,{global_config_id:s}=I(o),{clmm_pool:r,integrate:a}=this.sdk.ClmmSDK.sdkOptions,c=I(r),d=ke(e.coinTypeA),l=ke(e.coinTypeB);let f=t[d];f===void 0&&(f=X.buildCoinForAmount(n,i,BigInt(0),d,!1),t[d]=f);let _=t[l];_===void 0&&(_=X.buildCoinForAmount(n,i,BigInt(0),l,!1),t[l]=_),n.moveCall({target:`${a.published_at}::stable_farming::collect_fee`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[n.object(s),n.object(c.global_config_id),n.object(e.clmm_pool_id),n.object(e.position_nft_id),f.targetCoin,_.targetCoin]})}collectClmmRewardInternal(e,t,n,i){const o=[];e.rewarder_coin_types.forEach(s=>{const r=ke(s);let a=t[s];a===void 0&&(a=X.buildCoinForAmount(n,i,BigInt(0),r,!1),t[r]=a),o.push(a.targetCoin)}),this._sdk.ClmmSDK.Rewarder.createCollectRewarderNoSendPaylod(e,n,o)}collectClmmFeeInternal(e,t,n,i){if(e.collect_fee){const o=ke(e.coinTypeA),s=ke(e.coinTypeB);let r=t[o];r===void 0&&(r=X.buildCoinForAmount(n,i,BigInt(0),o,!1),t[o]=r);let a=t[s];a===void 0&&(a=X.buildCoinForAmount(n,i,BigInt(0),s,!1),t[s]=a),this._sdk.ClmmSDK.Position.createCollectFeeNoSendPaylod({pool_id:e.pool_id,pos_id:e.pos_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB},n,r.targetCoin,a.targetCoin)}}async harvestPayload(e,t){const{frams:n}=this.sdk.sdkOptions;t=t||new R;const i=await this.getFramsPool(e.pool_id,!1);if(i===void 0)throw Error(`not found ${e.pool_id}`);const{global_config_id:o,rewarder_manager_id:s}=I(n);if("collect_fee"in e&&(e.collect_fee||e.clmm_rewarder_types.length>0)){const a=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},t,a)}return i.rewarders.forEach(a=>{t&&t.moveCall({target:`${n.published_at}::router::harvest`,typeArguments:[a.reward_coin],arguments:[t.object(o),t.object(s),t.object(e.pool_id),t.object(e.position_nft_id),t.object(q)]})}),t}async claimFeeAndClmmReward(e){const t=new R,n=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);return await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},t,n),t}async openPositionAddLiquidityStakePaylod(e){const t=new R,{clmm_pool:n,integrate:i}=this._sdk.ClmmSDK.sdkOptions,o=I(n),s=t.moveCall({target:`${n.published_at}::pool::open_position`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(o.global_config_id),t.object(e.clmm_pool_id),t.pure.u32(Number(vt(BigInt(e.tick_lower)).toString())),t.pure.u32(Number(vt(BigInt(e.tick_upper)).toString()))]}),r=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),a=X.buildCoinForAmount(t,r,BigInt(e.amount_a),e.coinTypeA,!1),c=X.buildCoinForAmount(t,r,BigInt(e.amount_b),e.coinTypeB,!1);t.moveCall({target:`${i.published_at}::${In}::add_liquidity_by_fix_coin`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(o.global_config_id),t.object(e.clmm_pool_id),s,a.targetCoin,c.targetCoin,t.pure.u64(e.amount_a.toString()),t.pure.u64(e.amount_b.toString()),t.pure.bool(e.fix_amount_a),t.object(q)]});const{frams:d}=this.sdk.sdkOptions,{global_config_id:l,rewarder_manager_id:f}=I(d);return t.moveCall({target:`${d.published_at}::router::deposit`,typeArguments:[],arguments:[t.object(l),t.object(f),t.object(e.pool_id),s,t.object(q)]}),t}async addLiquidityPayload(e,t){const{frams:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;t=t||new R;const o=I(n),s=I(i),r=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),a=X.buildCoinForAmount(t,r,BigInt(e.amount_limit_a),e.coinTypeA,!1),c=X.buildCoinForAmount(t,r,BigInt(e.amount_limit_b),e.coinTypeB,!1);if(e.collect_rewarder&&(t=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id,clmm_pool_id:e.clmm_pool_id},t)),e.collect_fee||e.clmm_rewarder_types.length>0){const d=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},t,d,a.remainCoins,c.remainCoins)}return t.moveCall({target:`${n.published_at}::router::add_liquidity`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(o.global_config_id),t.object(s.global_config_id),t.object(o.rewarder_manager_id),t.object(e.pool_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),a.targetCoin,c.targetCoin,t.pure.u64(e.amount_limit_a),t.pure.u64(e.amount_limit_b),t.pure.u128(e.delta_liquidity),t.object(q)]}),t}async addLiquidityFixCoinPayload(e,t){const{frams:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;t=t||new R;const o=I(n),s=I(i),r=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),a=X.buildCoinForAmount(t,r,BigInt(e.amount_a),e.coinTypeA,!1),c=X.buildCoinForAmount(t,r,BigInt(e.amount_b),e.coinTypeB,!1);if(e.collect_rewarder&&(t=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id,clmm_pool_id:e.clmm_pool_id},t)),e.collect_fee||e.clmm_rewarder_types.length>0){const d=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},t,d,a.remainCoins,c.remainCoins)}return t.moveCall({target:`${n.published_at}::router::add_liquidity_fix_coin`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(o.global_config_id),t.object(s.global_config_id),t.object(o.rewarder_manager_id),t.object(e.pool_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),a.targetCoin,c.targetCoin,t.pure.u64(e.amount_a.toString()),t.pure.u64(e.amount_b.toString()),t.pure.bool(e.fix_amount_a),t.object(q)]}),t}async removeLiquidityPayload(e,t){const{frams:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;t=t||new R;const o=I(n),s=I(i);if(e.collect_rewarder&&(!e.unstake||e.close_position)&&(t=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id,clmm_pool_id:e.clmm_pool_id},t)),e.clmm_rewarder_types.length>0){const r=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);t=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:!1,clmm_rewarder_types:e.clmm_rewarder_types},t,r)}if(e.close_position){if(e.clmm_position_id===void 0)throw Error("close_position need clmm_position_id");t.moveCall({target:`${n.published_at}::router::close_position`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(o.global_config_id),t.object(o.rewarder_manager_id),t.object(e.pool_id),t.object(s.global_config_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),t.pure.u64(e.min_amount_a),t.pure.u64(e.min_amount_b),t.object(q)]})}else t.moveCall({target:`${n.published_at}::router::remove_liquidity`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(o.global_config_id),t.object(s.global_config_id),t.object(o.rewarder_manager_id),t.object(e.pool_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),t.pure.u128(e.delta_liquidity),t.pure.u64(e.min_amount_a),t.pure.u64(e.min_amount_b),t.object(q)]}),e.unstake&&this.withdrawPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id});return t}async buildCollectRewarderAndFeeParams(e,t,n,i,o){i===void 0&&(i=[...n]),o===void 0&&(o=[...n]);const s=ke(e.coinTypeA),r=ke(e.coinTypeB);e.collectFee&&this.collectFeePayload({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB},t);const a=[];return e.clmm_rewarder_types.forEach(c=>{switch(ke(c)){case s:a.push(X.buildCoinForAmount(t,i,BigInt(0),c,!1).targetCoin);break;case r:a.push(X.buildCoinForAmount(t,o,BigInt(0),c,!1).targetCoin);break;default:a.push(X.buildCoinForAmount(t,n,BigInt(0),c,!1).targetCoin);break}}),this.collectClmmRewardPayload({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,clmm_rewarder_types:e.clmm_rewarder_types,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,reward_coins:a},t),t}collectFeePayload(e,t){const{frams:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;t=t||new R;const o=I(n),s=I(i);return t.moveCall({target:`${n.published_at}::router::collect_fee`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[t.object(o.global_config_id),t.object(s.global_config_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id)]}),t}async collectClmmRewardPayload(e,t){var a;const{frams:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;t=t||new R;let o=e.reward_coins;if(e.clmm_rewarder_types.length>0&&o===void 0){o=[];const c=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);e.clmm_rewarder_types.forEach(d=>{o.push(X.buildCoinForAmount(t,c,BigInt(0),d,!1).targetCoin)})}const s=I(n),r=I(i);return(a=e.clmm_rewarder_types)==null||a.forEach((c,d)=>{t&&t.moveCall({target:`${n.published_at}::router::collect_clmm_reward`,typeArguments:[c,e.coinTypeA,e.coinTypeB],arguments:[t.object(s.global_config_id),t.object(r.global_config_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),t.object(r.global_vault_id),o[d],t.object(q)]})}),t}async collectClmmRewardNoSendPayload(e,t){var c;const{frams:n}=this.sdk.sdkOptions,{clmm_pool:i,integrate:o}=this.sdk.ClmmSDK.sdkOptions;let s=e.reward_coins;if(e.clmm_rewarder_types.length>0&&s===void 0){s=[];const d=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);e.clmm_rewarder_types.forEach(l=>{s.push(X.buildCoinForAmount(t,d,BigInt(0),l,!1).targetCoin)})}const r=I(n),a=I(i);return(c=e.clmm_rewarder_types)==null||c.forEach((d,l)=>{t&&t.moveCall({target:`${o.published_at}::stable_farming::collect_clmm_reward`,typeArguments:[d,e.coinTypeA,e.coinTypeB],arguments:[t.object(r.global_config_id),t.object(a.global_config_id),t.object(e.clmm_pool_id),t.object(e.position_nft_id),t.object(a.global_vault_id),s[l],t.object(q)]})}),t}async getFrarmsConfigs(){const{package_id:e}=this._sdk.sdkOptions.frams,t={global_config_id:"",rewarder_manager_id:"",rewarder_manager_handle:""},n=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitConfigEvent`})).data;if(n.length>0){const o=n[0].parsedJson;t.global_config_id=o.global_config_id,t.admin_cap_id=o.admin_cap_id}const i=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::rewarder::InitRewarderManagerEvent`})).data;if(i.length>0){const o=i[0].parsedJson;t.rewarder_manager_id=o.id;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:t.rewarder_manager_id,options:{showContent:!0}});t.rewarder_manager_handle=s.data.content.fields.rewarders.fields.id.id}return t}updateCache(e,t,n=V){let i=this._cache[e];i?(i.overdueTime=pe(n),i.value=t):i=new St(t,pe(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e];if(!t&&(n!=null&&n.isValid()))return n.value;delete this._cache[e]}},v_=class{constructor(e,t){U(this,"_cache",{});U(this,"_sdkOptions");U(this,"_launchpad");U(this,"_ido");U(this,"_xcetusModule");U(this,"_xtokenModule");U(this,"_boosterModule");U(this,"_makerModule");U(this,"_clmmSDK");U(this,"_liquidityStrategy");U(this,"_vaults");U(this,"_limitOrder");U(this,"_farmsModule");this._sdkOptions=e,this._clmmSDK=t,this._launchpad=new a_(this),this._ido=new __(this),this._xcetusModule=new d_(this),this._xtokenModule=new b_(this),this._boosterModule=new r_(this),this._makerModule=new c_(this),this._vaults=new g_(this),this._limitOrder=new y_(this),this._farmsModule=new w_(this),this._liquidityStrategy=new m_(this),lr(this._sdkOptions)}get ClmmSDK(){return this._clmmSDK}get sdkOptions(){return this._sdkOptions}get Launchpad(){return this._launchpad}get Ido(){return this._ido}get XToken(){return this._xtokenModule}get XCetusModule(){return this._xcetusModule}get BoosterModule(){return this._boosterModule}get MakerModule(){return this._makerModule}get LiquidityStrategy(){return this._liquidityStrategy}get Vaults(){return this._vaults}get LimitOrder(){return this._limitOrder}get Farms(){return this._farmsModule}getVerifySenderAddress(){const{senderAddress:e}=this.ClmmSDK;if(e.length===0||!Yt(e))throw Error("this clmm config sdk senderAddess is illegal");return e}updateCache(e,t,n=V){let i=this._cache[e];i?(i.overdueTime=pe(n),i.value=t):i=new St(t,pe(n)),this._cache[e]=i}getCache(e,t=!1){const n=this._cache[e];if(!t&&(n!=null&&n.isValid()))return n.value;delete this._cache[e]}},w0=v_;export{o0 as $,K_ as A,L_ as B,pt as C,I_ as D,zi as E,Rr as F,Jd as G,Xd as H,Ea as I,Da as J,Gl as K,w0 as L,b0 as M,h0 as N,w as O,D as P,p0 as Q,_0 as R,Rs as S,G as T,X as U,ei as V,Ki as W,g0 as X,En as Y,I as Z,F_ as _,Ba as a,H_ as a$,cu as a0,Ks as a1,r0 as a2,i0 as a3,Xa as a4,s0 as a5,a0 as a6,c0 as a7,du as a8,on as a9,Jc as aA,ap as aB,Yh as aC,rp as aD,Hc as aE,f0 as aF,ke as aG,G_ as aH,Sn as aI,ut as aJ,y0 as aK,Bp as aL,di as aM,U_ as aN,z_ as aO,V_ as aP,Pt as aQ,gl as aR,hl as aS,Zn as aT,ws as aU,Na as aV,X_ as aW,Y_ as aX,Jn as aY,Ra as aZ,e0 as a_,$a as aa,Yt as ab,n0 as ac,fi as ad,Vr as ae,iu as af,oe as ag,au as ah,he as ai,za as aj,At as ak,Ai as al,xc as am,le as an,R as ao,zt as ap,On as aq,Ae as ar,Ii as as,pn as at,ie as au,me as av,Ku as aw,Yu as ax,ks as ay,$u as az,to as b,Tt as b0,W_ as b1,t0 as b2,Q_ as b3,ml as b4,Zs as b5,Cc as b6,mn as b7,ft as b8,Ot as b9,_n as ba,kc as bb,_e as bc,_t as bd,Js as be,wo as bf,ao as bg,jt as bh,co as bi,Gr as bj,Cs as bk,d0 as bl,u0 as bm,l0 as bn,J_ as bo,Z_ as bp,Ni as bq,P_ as c,no as d,g as e,B_ as f,T_ as g,Qt as h,x_ as i,j_ as j,O_ as k,$_ as l,R_ as m,E_ as n,q_ as o,m0 as p,D_ as q,kd as r,el as s,M_ as t,S_ as u,s_ as v,v_ as w,$i as x,qi as y,N_ as z};
