import{_ as ln,a as un}from"./token-warning-modal.55431709.js";import{_ as rn}from"./assets-card.015a21f4.js";import{u as Oe,a as ko,c as ye,D as m,s as le,e as W,j as ke,d as fe,r as Ee,p as Ae,b as dn,f as qe}from"./pool.8ac244d9.js";import{e as _e,a as Je,a4 as So,a5 as Io,r as f,m as N,D as K,q as Fe,o as d,f as h,h as o,c as q,x as j,t as z,j as G,v as c,z as ge,u as X,J as $o,S as No,p as Re,k as Ue,a6 as cn,i as pe,w as ie,N as To,M as Po,K as Bo,F as oo,s as bo,B as Oo,b as yo,l as mn,y as vn,C as pn,a8 as We}from"./entry.a00a8559.js";/* empty css              *//* empty css              */import{u as Xe,c as be,a as fn}from"./sha256.3f9dd0c2.js";import"./decimal.4fbc22b0.js";import{i as he}from"./import-icon.de3e6c66.js";import{a as gn,_ as hn}from"./network-tips.cf7c6d17.js";import{_ as Cn}from"./coin-select.7d24da04.js";/* empty css              */import{u as wn}from"./swapRouter.171091ff.js";import{_ as An}from"./img-leverage_2x.1c577303.js";/* empty css              */import"./icon-selected_3x.09e9a6f0.js";import"./token-warning.fec2d20c.js";/* empty css              */import"./img-no-Positions_2x.ac488fcd.js";const bn=""+globalThis.__publicAssetsURL("sui-image/route-view.png");const yn=Je({props:{swapLoading:{type:Boolean,default:!1},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fixedFromCoin:{type:Boolean,default:!0},routertotalPercents:{type:Array,default:()=>[]},routerPool:{type:Array,default:()=>[]},impact:{type:String,default:""},insufficientLiquidity:{type:Boolean,default:!1},oneToAmount:{type:String,default:""},oneFromAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})},suiSwapFee:{type:String,default:""},swapRouterLoading:{type:Boolean,default:!1}},setup(e){const v=So(Io,{style:{fontSize:"20px",color:"#75C8FF"},spin:!0}),w=f(!1),C=Xe(),T=N(()=>C),F=N(()=>T.value.slippage),t=N(()=>T.isShowRouterModal);K(()=>e,$=>{console.log($,"==>newValue")},{immediate:!0,deep:!0});const _=Oe(),I=N(()=>_),L=ko("Sui"),U=f({}),H=f({}),Q=f({});K(()=>[e.suiPreSwapdata,I.value.tokensObj],async([$,p])=>{$&&!ye($)&&p&&!ye(p)&&($.coinTypeA&&(U.value=p[$.coinTypeA]||(await L.getTokenListByCoinType([$.coinTypeA]))[0]),$.coinTypeB&&(H.value=p[$.coinTypeB]||(await L.getTokenListByCoinType([$.coinTypeB]))[0]),$.coinTypeC&&(Q.value=p[$.coinTypeC]||(await L.getTokenListByCoinType([$.coinTypeC]))[0]))},{immediate:!0});const Y=f(0),J=f(0);return K(()=>[e.fromCoinAmount,e.toCoinAmount,e.fromCoin,e.toCoin,e.fixedFromCoin,F.value],([$,p,ue,D,Z,l])=>{if($&&p&&ue&&D&&l)if(Z){const u=new m(p).mul(new m(l/100));J.value=new m(p).sub(u).toString()}else{const u=new m($).mul(new m(l/100));Y.value=new m($).sub(u).toString()}},{immediate:!0}),{sFixD:le,getCoinIcon:$=>{var p;return($==null?void 0:$.logoURI)||($==null?void 0:$.logo_url)||((p=I.value.tokensObj[$==null?void 0:$.address])==null?void 0:p.logo_url)||(T.theme==="default"?he("/image/coins/unknown.png"):he("/image/coins/sui-unknown.png"))},indicator:v,rateChange:w,slippage:F,isShowRouterModal:t,indexStore:C,coinTypeA:U,coinTypeB:H,coinTypeC:Q,maximumSold:Y,minimumReceived:J,addCommom:W}}}),Se=e=>(Re("data-v-fd74e509"),e=e(),Ue(),e),kn={key:0,class:"swap-info"},Sn={class:"loading-swap"},In={key:1,class:"swap-rate"},$n={key:0},Nn={key:0},Tn={key:1},Pn={key:0},Bn=Se(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),On=Se(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),_n=[Bn,On],Fn={key:2},Rn={class:"trade-info"},Un={class:"trade-block"},Mn=Se(()=>o("div",{class:"lebal"},"Price Impact",-1)),jn={key:0,class:"icon","aria-hidden":"true"},Ln=Se(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),Dn=[Ln],En={class:"trade-block"},qn={class:"lebal"},Wn={key:0,class:"text"},Jn={class:"trade-block"},Xn=Se(()=>o("div",{class:"lebal"},"Fee",-1)),Qn={key:0,class:"text"},zn={key:0,class:"trade-block"},Yn=Se(()=>o("div",{class:"lebal"},"Route",-1)),Zn={key:0,class:"text"},Hn={key:0},Kn={key:1},Gn={key:2},Vn=Se(()=>o("img",{src:bn,alt:""},null,-1));function xn(e,v,w,C,T,F){const t=$o,_=No,I=Fe("image");return e.swapLoading||Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&!e.insufficientLiquidity?(d(),h("div",kn,[o("div",Sn,[e.swapLoading||e.swapRouterLoading?(d(),q(t,{key:0,size:"small",indicator:e.indicator},null,8,["indicator"])):j("",!0),e.swapLoading?e.swapLoading?(d(),h("span",Fn,"Best route and price")):j("",!0):(d(),h("div",In,[e.rateChange?(d(),h("span",Tn,[e.fromCoinAmount&&e.toCoinAmount?(d(),h("span",Pn,[z(o("img",null,null,512),[[I,e.getCoinIcon(e.toCoin)]]),G(" 1 "+c(e.toCoin.symbol)+" ≈ ",1),z(o("img",null,null,512),[[I,e.getCoinIcon(e.fromCoin)]]),G(c(e.oneFromAmount==1/0?0:e.oneFromAmount)+" "+c(e.fromCoin.symbol),1)])):(d(),q(t,{key:1,indicator:e.indicator},null,8,["indicator"]))])):(d(),h("span",$n,[z(o("img",null,null,512),[[I,e.getCoinIcon(e.fromCoin)]]),G(" 1 "+c(e.fromCoin.symbol)+" ≈ ",1),e.fromCoinAmount&&e.toCoinAmount?(d(),h("span",Nn,[z(o("img",null,null,512),[[I,e.getCoinIcon(e.toCoin)]]),G(c(e.oneToAmount==1/0?0:e.oneToAmount)+" "+c(e.toCoin.symbol),1)])):(d(),q(t,{key:1,indicator:e.indicator},null,8,["indicator"]))])),o("div",{class:"right",onClick:v[0]||(v[0]=L=>e.rateChange=!e.rateChange)},_n)]))]),o("div",Rn,[o("div",Un,[Mn,e.swapRouterLoading?(d(),q(_,{key:1,paragraph:!1,active:""})):(d(),h("div",{key:0,class:ge(["text",e.impact<1?"impact-s":e.impact<10&&e.impact>=1?"impact-w":"impact-e"])},[G(c(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",1),e.impact>=10?(d(),h("svg",jn,Dn)):j("",!0)],2))]),o("div",En,[o("div",qn,c(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swapRouterLoading?(d(),q(_,{key:1,paragraph:!1,active:""})):(d(),h("div",Wn,c(e.fixedFromCoin?("addCommom"in e?e.addCommom:X(W))(("sFixD"in e?e.sFixD:X(le))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:X(W))(("sFixD"in e?e.sFixD:X(le))(e.maximumSold,e.fromCoin.decimals)))+" "+c(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),o("div",Jn,[Xn,e.swapRouterLoading?(d(),q(_,{key:1,paragraph:!1,active:""})):(d(),h("div",Qn,c(e.suiSwapFee),1))]),e.insufficientLiquidity?j("",!0):(d(),h("div",zn,[Yn,e.swapRouterLoading?(d(),q(_,{key:1,paragraph:!1,active:""})):(d(),h("div",{key:0,class:"text",onClick:v[1]||(v[1]=L=>e.indexStore.setIsShowRouterModal(!e.isShowRouterModal))},[e.swapRouterLoading?j("",!0):(d(),h("div",Zn,[e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeA?(d(),h("span",Hn,c(e.coinTypeA.symbol)+" "+c(e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeB?"> ":""),1)):j("",!0),e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeB?(d(),h("span",Kn,c(e.coinTypeB.symbol)+" "+c(e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeC?"> ":""),1)):j("",!0),e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeC?(d(),h("span",Gn,c(e.coinTypeC.symbol),1)):j("",!0)])),Vn]))]))])])):j("",!0)}const ea=_e(yn,[["render",xn],["__scopeId","data-v-fd74e509"]]);async function oa(e,v){var F,t;const w=e==="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":e,C=`${be.Sui.api}/v2/sui/coin/kline?coin_address=${w}&interval=hour&market=${v}`,T=await $fetch(C);return console.log("0621###getprice###res###",T),((t=(F=T==null?void 0:T.data)==null?void 0:F.list)==null?void 0:t.reverse())||[]}async function na(e){const{prices:v}=await $fetch(`https://api.coingecko.com/api/v3/coins/${e}/market_chart?vs_currency=usd&id=${e}&days=1&interval=hourly`,{headers:{Connection:"keep-alive",Accept:"*/*"}}),w=[];return v.forEach(C=>{w.push({price:C[1],timestamp:C[0]})}),w}const aa={props:{coin:{type:Object,default:()=>({})},refresh:{type:Boolean,default:!1},id:{type:String,default:""},market:{type:String,default:""}},setup(e,v){const{$echarts:w}=cn();let C=null,T;const F=f(!0),t=Xe(),_=N(()=>t),I=N(()=>_.value.chainName),L=N(()=>be[I.value]),U=Oe(),H=N(()=>U),Q=(l,u,R)=>{T={xAxis:{type:"category",boundaryGap:!1,show:!1,data:u},yAxis:{type:"value",show:!1,min:function(B){return B.min-B.min*.1},max:function(B){return B.max+B.max*.1}},grid:{top:1,right:1,bottom:1,left:1},tooltip:{trigger:"axis",borderWidth:0,padding:0,backgroundColor:"transparent",axisPointer:{lineStyle:{color:_.value.chainName=="Aptos"?"#68FFD8":"#76C8FF"}},formatter:function(B){return`<div class="chart-tip">
              <div>${B&&B[0]&&B[0].name}</div>
              <div>$${ke(B&&B[0]&&B[0].value,4)}</div>
            </chart-tip>`}},color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:_.value.chainName=="Aptos"?"#0C4535":"#2E546D"},{offset:1,color:_.value.chainName=="Aptos"?"#151817":"#1B1B1B"}]},series:[{data:l,type:"line",showSymbol:!1,areaStyle:{},lineStyle:{color:_.value.chainName=="Aptos"?"#68FFD8":"#76C8FF",width:2,type:"solid"}}]},T&&C.clear(),T&&C.setOption(T,!0),C.resize(),F.value=!1},Y=f(""),J=f(""),x=async l=>{var ee,we;const u=[],R=[],B=I.value==="Aptos"?await na(l):await oa(l,e.market);Y.value=B&&B.length>1&&(B[B.length-1].price-B[0].price)/B[0].price*100,J.value=B&&B.length>1&&B[B.length-1].price,I.value==="Aptos"?B.forEach(S=>{u.push(S.price);const E=Ee(Number(S.timestamp),"MD"),s=Ee(Number(S.timestamp),"HM");R.push(E+" "+s)}):B.forEach(S=>{u.push(S.price);const E=Ee(new m(S.timestamp).mul(1e3).toNumber(),"MD"),s=Ee(new m(S.timestamp).mul(1e3).toNumber(),"HM");R.push(E+" "+s)});let $e=document.getElementById(`main${(ee=e.coin)==null?void 0:ee.name}`);C=w.init($e),Q(u,R,(we=e.coin)==null?void 0:we.name)};K(()=>e.id,(l,u)=>{console.log(l,u,"===>oldValue"),console.log(!F.value,"!isFirst.value"),l&&(Y.value="",J.value="",setTimeout(()=>{x(l)},1e3))},{immediate:!0});const $=f(""),p=f(""),ue=f(""),D=f("");K(()=>[H.value.tokensObj,e.coin],([l,u])=>{var R,B;l&&u&&l[u.address]&&(console.log(l[u.address],"===>newValue[coin.address]"),p.value=((R=l[u.address])==null?void 0:R.labels)&&((B=l[u.address])==null?void 0:B.labels[0]),$.value=l[u.address].name,ue.value=l[u.address].symbol,D.value=l[u.address].address)},{immediate:!0,deep:!0}),K(()=>e.refresh,l=>{l&&x(e.id)});const Z=N(()=>_.value.theme);return console.log(e.coin.address=="0x2::sui::SUI","0x2::sui::SUI"),{theme:Z,store:t,importIcon:he,fixD:ke,config:L,price_rate_24h:Y,nowPrice:J,coinName:$,coinLabels:p,coinSymbol:ue,address:D,decimalUi:fe}}},sa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAk1BMVEUAAADn2v/m2//r2//v4//n2v/55P/n2v/o3P//+P/m2v/n2f/n2v/n2v/n2v/n2v/n2v/o2//p2//n3f/o3v/n2f/n2v/n2v/n2v/n2v/n2//o2v/q3f/r4f/u3f/n2v/o2v/n2//p3P/o3P/m2v/n2v/n2f/n2v/o2f/n2//r3f/t3P/n2v/m2v/o2v/r3v/m2f/tUDLHAAAAMHRSTlMAl5oyFNMJqSwFhvvr5d7Yr2FGNSD0zb2lkIltOhkOxoJoT0D48aJzWFYlHeB8Wief0nHAAAABSElEQVQ4y52Q53LCMBCEZWK5g0swBpveQknZ93+6rFxAHkSYyf6x9+67JqHLKxOZRzJJbWHStkCn0Fo8pG0XuvJv0dciBjVZb+dZeoxABb38MlbpXeucr5z2QwdUf8vX1h0ByLT9aAeCGlez4Ozw5zoE4nvFBJB0yymUhqp0B2DT5ec0O+YlWlUMJsCqAwJA8jNV1W4RAnuvqepeYwWsOR/AkfM9ji8YjYBTC3wCZyEq1jvKnoCQP8X90j0wF2IGuM2jArjUE8sWAPAmxACwavtDf623XJsBtoqa2zcm4MI8Ag7iNZkBeAcVc8cUOPhPgJjP4I/UzkYgKtWxpQqaAGfMvvUATIUBaOQHAEb2M2CZcj4OnrhJasDYXYVQ9Vpe2LJ/BeWyf4/oAXlC25e9uI0IqswRJulX/BOwXgG2JPCCIPA3sXmM/QK1PTc8LGCPoAAAAABJRU5ErkJggg==",ta="data:image/png;base64,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";const la=e=>(Re("data-v-f362c7db"),e=e(),Ue(),e),ia={class:"token-info"},ua={class:"token-info-padding"},ra={class:"token-info-header"},da={class:"left"},ca=["onerror"],ma={class:"name"},va={class:"desc"},pa={key:0},fa={class:"right"},ga={class:"price-info"},ha={key:0,src:sa,alt:""},Ca={key:1,src:ta,alt:""},wa={class:"token-info-footer"},Aa={class:"left"},ba={class:"address"},ya={key:0,class:"pc-address"},ka={key:1,class:"pc-address"},Sa={class:"h5-address"},Ia=la(()=>o("use",{"xlink:href":"#icon-icon-copy1"},null,-1)),$a=[Ia],Na={class:"right"},Ta=["id"];function Pa(e,v,w,C,T,F){var I;const t=To,_=Fe("image");return d(),h("div",ia,[o("div",ua,[o("div",ra,[o("div",da,[z(o("img",{onerror:C.theme=="default"?C.importIcon("/image/coins/unknown.png"):C.importIcon("/image/coins/sui-unknown.png")},null,8,ca),[[_,w.coin.logoURI||C.importIcon(`/image/coins/${w.coin.symbol.toLowerCase()}.png`)]]),o("div",null,[o("div",ma,c(C.coinSymbol),1),o("div",va,[o("span",null,[G(c(C.coinName)+" ",1),C.theme!=="sui"?(d(),h("span",pa,c(C.coinLabels?`(${C.coinLabels})`:""),1)):j("",!0)])])])]),o("div",fa,[pe(t,{placement:"top","arrow-point-at-center":""},{title:ie(()=>[G(c(w.market==="pyth"?"Data source: Pyth Network":"Data source: CoinGecko"),1)]),default:ie(()=>[o("div",ga,[w.market==="pyth"?(d(),h("img",ha)):(d(),h("img",Ca)),o("span",null,"$"+c(C.nowPrice?Number(C.nowPrice)<1?C.decimalUi(C.nowPrice,4):C.fixD(C.nowPrice,2):"--"),1),C.price_rate_24h?(d(),h("i",{key:2,class:ge(C.price_rate_24h>0?"up":C.price_rate_24h<0?"down":"up")},c(C.price_rate_24h>0?`+ ${C.fixD(C.price_rate_24h,2)}`:C.price_rate_24h<0?+`${C.fixD(C.price_rate_24h,2)}`:`+${C.fixD(C.price_rate_24h,2)}`)+"%",3)):j("",!0)])]),_:1})])]),o("div",wa,[o("div",Aa,[o("div",ba,[w.coin&&C.address!=="0x2::sui::SUI"?(d(),h("span",ya,c(w.coin&&w.coin.address.substr(0,13))+" ... "+c(w.coin&&w.coin.address.substr(w.coin.address.length-13,13)),1)):(d(),h("span",ka,c(w.coin&&w.coin.address),1)),o("span",Sa,c(w.coin&&w.coin.address.substr(0,4))+" ... "+c(w.coin&&w.coin.address.substr(w.coin.address.length-4,4)),1),(d(),h("svg",{class:"icon","aria-hidden":"true",onClick:v[0]||(v[0]=L=>C.store.copy(w.coin&&w.coin.address))},$a))])]),o("div",Na,[o("div",{id:`main${(I=w.coin)==null?void 0:I.name}`,class:"main"},null,8,Ta)])])])])}const Ba=_e(aa,[["render",Pa],["__scopeId","data-v-f362c7db"]]);const Oa=Je({components:{Modal:Po},props:{routertotalPercents:{type:Array,default:()=>[]},routerPool:{type:Array,default:()=>[]},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},routerTotalAmounts:{type:String,default:""}},setup(e){const v=Oe(),w=N(()=>v),C=f([]);return K(()=>[e.routerPool,w.value.routerPoolConfigObj,e.routerTotalAmounts,e.fromCoin,e.toCoin],([T,F,t,_,I])=>{if(console.log(e,"props=====>100"),T&&T.length>0&&F&&!ye(F)&&t){const L=[];T.forEach(U=>{console.log(t,"===>routerTotalAmounts"),console.log(U,"ele.amountIn===>");const H="100",Q=U.amountIn.toString(),Y=Ae(U.amountOut.toString(),I.decimals),J=U.poolAddress.map((x,$)=>{const p=F&&F[x];return console.log(U,"ele===>118"),{...p}});L.push({percent:H,...U,amountIn:Q,amountOut:Y,poolAddress:J})}),console.log(L,"result===>"),C.value=L}},{immediate:!0}),N(()=>{var T,F;return(F=(T=w.value)==null?void 0:T.poolInfo)==null?void 0:F.needReverse}),{addCommom:W,routerStep:C}}}),Qe=e=>(Re("data-v-0c1c23b0"),e=e(),Ue(),e),_a=Qe(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Fa={class:"route-top"},Ra={class:"token-a"},Ua={alt:""},Ma={class:"token-num"},ja={class:"token-symbol"},La={class:"token-b"},Da={class:"token-num"},Ea={class:"token-symbol"},qa={alt:""},Wa={class:"route-bottom"},Ja=Qe(()=>o("div",{class:"left-round"},null,-1)),Xa=Qe(()=>o("div",{class:"right-round"},null,-1)),Qa={class:"percent"},za={class:"pool-info"},Ya={class:"token-a-img",alt:""},Za={class:"token-b-img",alt:""},Ha={key:0,class:"icon","aria-hidden":"true"},Ka=Qe(()=>o("use",{"xlink:href":"#icon-icon_on1"},null,-1)),Ga=[Ka];function Va(e,v,w,C,T,F){const t=Bo("Modal"),_=Fe("image");return d(),q(t,{title:"Route",width:"600px",visible:!0,footer:null,onCancel:v[0]||(v[0]=I=>e.$emit("onClose"))},{closeIcon:ie(()=>[_a]),default:ie(()=>{var I,L,U,H;return[o("div",Fa,[o("div",Ra,[z(o("img",Ua,null,512),[[_,(I=e.fromCoin)==null?void 0:I.logo_url]]),o("span",Ma,c(("addCommom"in e?e.addCommom:X(W))(e.fromCoinAmount)),1),o("span",ja,c((L=e.fromCoin)==null?void 0:L.symbol),1)]),o("div",La,[o("span",Da,c(("addCommom"in e?e.addCommom:X(W))(e.toCoinAmount)),1),o("span",Ea,c((U=e.toCoin)==null?void 0:U.symbol),1),z(o("img",qa,null,512),[[_,(H=e.toCoin)==null?void 0:H.logo_url]])])]),o("div",Wa,[Ja,Xa,(d(!0),h(oo,null,bo(e.routerStep,(Q,Y)=>(d(),h("div",{key:Q,class:ge(["route-path",Y!==0?"route-path-active":""])},[o("div",Qa,[o("span",null,c(Q.percent)+"%",1),o("span",null,c(("addCommom"in e?e.addCommom:X(W))(Q.amountOut))+" "+c(e.toCoin.symbol),1)]),(d(!0),h(oo,null,bo(Q.poolAddress,(J,x)=>(d(),h("div",{key:x,class:"pool-info-box"},[o("div",za,[z(o("img",Ya,null,512),[[_,J.needReverse?J.coinB.logo_url:J.coinA.logo_url]]),z(o("img",Za,null,512),[[_,J.needReverse?J.coinA.logo_url:J.coinB.logo_url]]),o("span",null,c(J.fee*100)+"%",1)]),x!==Q.poolAddress.length-1?(d(),h("svg",Ha,Ga)):j("",!0)]))),128))],2))),128))])]}),_:1})}const xa=_e(Oa,[["render",Va],["__scopeId","data-v-0c1c23b0"]]),es=Je({components:{Modal:Po},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:"1245566.008946"},toCoinAmount:{type:String,default:"998041.711793"},slippage:{type:String,default:""},impact:{type:Number,required:!0},fixedFromCoin:{type:Boolean,default:!1},fee:{type:String,required:!0},formatFee:{type:String,default:""},isShowAccept:{type:Boolean,default:!1},swapLoading:{type:Boolean,required:!0},oneFromAmount:{type:String,default:""},oneToAmount:{type:String,default:""}},setup(e,v){const w=Oe(),C=N(()=>w),T=Xe(),F=N(()=>T),t=U=>{var H;return(U==null?void 0:U.logoURI)||(U==null?void 0:U.logo_url)||((H=C.value.tokensObj[U==null?void 0:U.address])==null?void 0:H.logo_url)||(F.value.theme==="default"?he("/image/coins/unknown.png"):he("/image/coins/sui-unknown.png"))},_=f(!1),I=N(()=>F.value.chainName),L=async()=>{v.emit("to-swap")};return console.log(e,"swapLoading===>"),{getCoinIcon:t,addCommom:W,sFixD:le,rateChange:_,chainName:I,clickNextBtn:L}}});const Ce=e=>(Re("data-v-a8ec2ef8"),e=e(),Ue(),e),os=Ce(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),ns={class:"new-swap-contnet"},as={class:"coin-info"},ss={class:"from-coin-info"},ts={class:"left"},ls={class:"coin-amount"},is={class:"coin-symbol"},us={class:"right"},rs={class:"to-coin-info"},ds={class:"left"},cs={class:"coin-amount"},ms={class:"coin-symbol"},vs={class:"right"},ps=Ce(()=>o("div",{class:"to-swap-logo"},null,-1)),fs={class:"coin-rate"},gs={key:0},hs={class:"left"},Cs=Ce(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),ws=Ce(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),As=[Cs,ws],bs={key:1},ys={class:"left"},ks=Ce(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Ss=Ce(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Is=[ks,Ss],$s={class:"bottom"},Ns={class:"induction"},Ts={class:"item"},Ps={class:"induction-text"},Bs={class:"induction-value"},Os={class:"item"},_s={class:"induction-text"},Fs={class:"induction-value"},Rs={class:"item"},Us={class:"induction-text"},Ms={key:0,class:"icon","aria-hidden":"true"},js=Ce(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),Ls=[js],Ds={class:"item"},Es={class:"induction-text"},qs={key:0,class:"induction-value"},Ws={key:1,class:"induction-value"},Js={key:0,class:"price-updated"},Xs=Ce(()=>o("span",null,"Price updated",-1));function Qs(e,v,w,C,T,F){const t=Oo,_=Bo("Modal"),I=Fe("image");return d(),q(_,{width:"440px",visible:!0,footer:null,title:e.$t("button.swap"),class:"add-liquidity-modal",onCancel:v[4]||(v[4]=L=>e.$emit("on-close"))},{closeIcon:ie(()=>[os]),default:ie(()=>[o("div",ns,[o("div",as,[o("div",ss,[o("div",ts,[o("div",ls,c(e.fromCoinAmount&&("addCommom"in e?e.addCommom:X(W))(e.fromCoinAmount)),1),o("div",is,c(e.fromCoin&&e.fromCoin.symbol),1)]),o("div",us,[z(o("img",null,null,512),[[I,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]])])]),o("div",rs,[o("div",ds,[o("div",cs,c(e.toCoinAmount&&("addCommom"in e?e.addCommom:X(W))(e.toCoinAmount)),1),o("div",ms,c(e.toCoin&&e.toCoin.symbol),1)]),o("div",vs,[z(o("img",null,null,512),[[I,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]])]),ps]),o("div",fs,[e.rateChange?(d(),h("div",bs,[o("div",ys,[z(o("img",null,null,512),[[I,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),o("span",null,"1 "+c(e.toCoin&&e.toCoin.symbol)+" ≈",1),z(o("img",null,null,512),[[I,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),o("span",null,c(e.oneFromAmount)+" "+c(e.fromCoin.symbol),1)]),o("div",{class:"right",onClick:v[1]||(v[1]=L=>e.rateChange=!e.rateChange)},Is)])):(d(),h("div",gs,[o("div",hs,[z(o("img",null,null,512),[[I,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),o("span",null,"1 "+c(e.fromCoin&&e.fromCoin.symbol)+" ≈",1),z(o("img",null,null,512),[[I,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),o("span",null,c(e.oneToAmount)+" "+c(e.toCoin.symbol),1)]),o("div",{class:"right",onClick:v[0]||(v[0]=L=>e.rateChange=!e.rateChange)},As)]))])]),o("div",$s,[o("div",Ns,[o("div",Ts,[o("div",Ps,c(e.$t("modal.slippageTolerance")),1),o("div",Bs,c(e.slippage)+"%",1)]),o("div",Os,[o("div",_s,c(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),o("div",Fs,c(e.fixedFromCoin?("addCommom"in e?e.addCommom:X(W))(("sFixD"in e?e.sFixD:X(le))(e.toCoinAmount-Number(e.toCoinAmount)*Number(e.slippage)/100,e.toCoin.decimals)):("addCommom"in e?e.addCommom:X(W))(("sFixD"in e?e.sFixD:X(le))(Number(e.fromCoinAmount)*Number(e.slippage)/100+Number(e.fromCoinAmount),e.fromCoin.decimals)))+" "+c(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1)]),o("div",Rs,[o("div",Us,c(e.$t("common.priceImpact")),1),o("div",{class:ge(["induction-value",e.impact<1?"impact-s":e.impact<10&&e.impact>=1?"impact-w":"impact-e"])},[G(c(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",1),e.impact>=10?(d(),h("svg",Ms,Ls)):j("",!0)],2)]),o("div",Ds,[o("div",Es,c(e.$t("common.fee")),1),e.chainName=="Aptos"?(d(),h("div",qs,c(e.formatFee)+" "+c(e.fromCoin.symbol)+" ("+c(e.fee*100)+"%) ",1)):(d(),h("div",Ws,c(e.fee),1))])])])]),e.isShowAccept?(d(),h("div",Js,[Xs,pe(t,{class:"accept-btn",loading:e.swapLoading,onClick:v[2]||(v[2]=L=>e.$emit("accept"))},{default:ie(()=>[G("Accept")]),_:1},8,["loading"])])):(d(),q(t,{key:1,class:"big-btn swap-confirm-btn",onClick:v[3]||(v[3]=L=>e.clickNextBtn())},{default:ie(()=>[G(c(e.$t("button.confirmSwap")),1)]),_:1}))]),_:1},8,["title"])}const zs=_e(es,[["render",Qs],["__scopeId","data-v-a8ec2ef8"]]),Ys=Je({setup(){const e=yo(),v=So(Io,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),{t:w,locale:C}=mn(),T=Xe(),F=Oe(),t=N(()=>F);let _=f(!1),I=f(!1),L=f(!1),U=f(!1),H=f(!1),Q=f(!1);const Y=f("fromCoin"),J=f(""),x=f(""),$=f(!1),p=f(!0),ue=f(!1),D=f(!1),Z=f(!1),l=f(""),u=f(""),R=f(20),B=f(0),$e=f(null),ee=f(!1),we=N(()=>T.slippage),S=N(()=>T.chainName),E=N(()=>S.value?ko(S.value):{}),s=f(),r=f(),ze=N(()=>be&&be[S.value]&&be[S.value].hasRouter),no=N(()=>F.getPoolInfoSuccess),_o=N(()=>{var n;return k.value&&((n=k.value)!=null&&n.is_pause)?"Pool Closed":!s.value||!r.value?w("modal.selectTokenModalTitle"):!Number(l.value)&&!Number(u.value)?w("button.enterAmount"):!ze.value&&!k.value&&no.value?"Pool Not Found":ze.value&&Pe.value?"No Available Route":(console.log(ee.value,"===>insufficientLiquidity.value"),ee.value?w("button.insufficientLiquidity"):Number(l.value)>Number(se.value)?w("button.insufficientBalance",{name:s.value.symbol}):w("button.swap"))}),Fo=n=>{var i,a,g,A;Y.value=n,n==="fromCoin"?(J.value=((i=r.value)==null?void 0:i.address)||"",x.value=((a=s.value)==null?void 0:a.address)||""):(J.value=((g=s.value)==null?void 0:g.address)||"",x.value=((A=r.value)==null?void 0:A.address)||""),$.value=!0},Ye=f({}),Ze=f({}),Ro=n=>{Y.value==="fromCoin"?(Ye.value=n,Ke(n)):(Ze.value=n,Ke(n))},Uo=n=>{n==="fromCoin"?(p.value=!0,S.value==="Aptos"?l.value=se.value>0?s.value.symbol=="APT"?new m(Number(se.value)).sub(new m(.1)).lt(new m(0))?"0":new m(Number(se.value)).sub(new m(.1)).toString():String(se.value):"":l.value=se.value>0?s.value.symbol=="SUI"?new m(Number(se.value)).sub(new m(.05)).lt(new m(0))?"0":new m(Number(se.value)).sub(new m(.05)).toString():String(se.value):""):(p.value=!1,S.value==="Aptos"?u.value=te.value>0?r.value.symbol=="APT"?new m(Number(te.value)).sub(new m(.1)).lt(new m(0))?"0":new m(Number(te.value)).sub(new m(.1)).toString():String(te.value):"":u.value=te.value>0?r.value.symbol=="SUI"?new m(Number(te.value)).sub(new m(.05)).lt(new m(0))?"0":new m(Number(te.value)).sub(new m(.05)).toString():String(te.value):"")},Mo=n=>{n==="fromCoin"?(p.value=!0,l.value=se.value>0?le(new m(Number(se.value)).div(2).toString(),s.value.decimals).toString():""):(p.value=!1,u.value=te.value>0?le(new m(Number(te.value)).div(2).toString(),r.value.decimals).toString():"")};vn(()=>{so()}),pn(()=>{clearInterval($e.value)});const He=N(()=>T),ao=()=>{!k.value&&!ze.value||(clearInterval($e.value),F.setPoolConfigList(He.value.chainName,He.value.filterCoinsObj),B.value=0,I.value=!0,k.value&&F.updateCurrentPools(k.value.poolAddress,S.value),Te(p.value?l.value:u.value),ae.value.address&&E.value.getAccount(ae.value.address),T.getStatsData(S.value,He.value.filterCoinsObj),setTimeout(()=>{I.value=!1,so()},1e3))},so=()=>{$e.value=setInterval(()=>{I.value=!1,ue.value||B.value<R.value&&(B.value+=1,B.value===R.value&&(S.value=="Aptos"?k.value&&k.value.poolAddress&&F.updateCurrentPools(k.value.poolAddress,S.value):Q.value||ao(),B.value=0,I.value=!0))},1e3)};K(p,We((n,i)=>{p.value=n},500));const Ne=f(!1);K(l,We((n,i)=>{n&&n!==0&&p.value&&Te(n),n==""&&p.value&&(u.value="")},500)),K(u,We((n,i)=>{n&&n!==0&&!p.value&&Te(n),n==""&&!p.value&&(l.value="")},500));const re=f(1e-4),Me=async n=>{let i=n;if(console.log(i,"poolInfo====>"),S.value==="Aptos"&&!i.current_sqrt_price&&l.value&&u.value){const a=await E.value.getPools([i.address]);a&&a[0]&&(i={...n,...a[0],fee:Number(a[0].fee_rate)/1e6})}if(i.current_sqrt_price&&l.value&&u.value){const g=(s.value.address===i.coinA.address&&r.value.address===i.coinB.address?0:1)==0,A=new m(l.value),b=new m(u.value),P=A.sub(A.mul(new m(i.fee)));console.log("getImpact###poolInfo.fee####",i.fee),console.log("getImpact###fAmount####",A.toString()),console.log("getImpact###tAmount####",b.toString()),console.log("getImpact###f####",P.toString());const O=b.div(P);console.log("getImpact####rates####",O.toString());const y=E.value.getPriceImpactPct(i,O.toString(),g);return console.log(y,"t===>"),y}return"--"},to=f(0),lo=f(0),io=f(),ne=f({}),jo=async n=>{if(k.value&&(console.log(Number(l.value)==0,"===>Number(fromCoinAmount.value)==0"),!(p.value&&Number(l.value)==0)&&!(!p.value&&Number(u.value)==0)))if(s.value&&r.value&&(l.value||u.value)){D.value=!0,Z.value=!0,ee.value=!1;const i=s.value.address===k.value.coinA.address&&r.value.address===k.value.coinB.address?0:1;console.log(k.value,"poolInfo=====>451"),console.log(p.value?l.value:u.value,"fixedFromCoin.value ? fromCoinAmount.value : toCoinAmount.value"),console.log(i,"===>direct");try{let a=await E.value.preSwap({pool:k.value,a2b:i==0,byAmountIn:p.value,amount:p.value?l.value:u.value});console.log(a,"preSwapRespreSwapRes"),ee.value=a==null?void 0:a.isExceed,io.value=a==null?void 0:a.estimatedFeeAmount,p.value?(u.value=a.estimatedAmountOut,ce.value=(Number(a.estimatedAmountOut)/n).toString(),de.value=(n/Number(a.estimatedAmountOut)).toString()):(l.value=a.estimatedAmountIn,ce.value=(n/Number(a.estimatedAmountIn)).toString(),de.value=(Number(a.estimatedAmountIn)/n).toString()),console.log(de.value,ce.value,"===>831"),to.value=new m(u.value).div(l.value).toString(),lo.value=new m(l.value).div(u.value).toString(),console.log("0524###getAmount###toAddLiquidiPoolInfo.value ###",ne.value),console.log("0524###getAmount###poolInfo.value ###",k.value),re.value=S.value=="Aptos"?await Me(k.value):await Me(ne.value||k.value),D.value=!1,Z.value=!1}catch(a){console.log("pre swap error",a),D.value=!1,Z.value=!1}}else p.value?u.value="":l.value="",D.value=!1,Z.value=!1},Lo=fn(),ae=N(()=>Lo),Do=f({}),de=f(""),ce=f(""),se=N(()=>ae.value.assets&&s.value&&ae.value.assets[s.value.address]?Ae(ae.value.assets[s.value.address].balance,s.value.decimals):0),te=N(()=>ae.value.assets&&r.value&&ae.value.assets[r.value.address]?Ae(ae.value.assets[r.value.address].balance,r.value.decimals):0),Eo=yo();K(()=>t.value.tokensObj,async n=>{if(!ye(n)){console.log(n,"===>newValue626"),console.log(Eo,"===>route625");const i=e?e.currentRoute.value.query.to:"",a=e?e.currentRoute.value.query.from:"";a?s.value=await E.value.getTokenBySymbol(n,a):!a&&!s.value&&(s.value=await E.value.getTokenBySymbol(n,be[S.value].swapDefaultPair.fromCoin),console.log(s.value,"===>fromCoin.value")),i?r.value=await E.value.getTokenBySymbol(n,i):!i&&!r.value&&(r.value=await E.value.getTokenBySymbol(n,be[S.value].swapDefaultPair.toCoin)),!a&&i&&(s.value="",console.log("我清空了fromCoin"))}},{immediate:!0});const k=N(()=>{var n,i,a,g,A;if(s.value&&r.value){let b=null,P={};if(console.log(r.value.address,"===>toCoin.value.address930"),Object.values(t.value.poolConfigList).forEach(y=>{var M,V,oe,ve;(y.coinA.address.toUpperCase()===((M=s.value.address)==null?void 0:M.toUpperCase())&&y.coinB.address.toUpperCase()===((V=r.value.address)==null?void 0:V.toUpperCase())||y.coinB.address.toUpperCase()===((oe=s.value.address)==null?void 0:oe.toUpperCase())&&y.coinA.address.toUpperCase()===((ve=r.value.address)==null?void 0:ve.toUpperCase()))&&(console.log(y,"p===>"),P[y.address]={...y})}),S.value=="Aptos"&&t.value.poolsObj&&!ye(t.value.poolsObj))for(const y in t.value.poolsObj){const M=t.value.poolsObj[y];(M.token_a.address.toUpperCase()===((n=s.value.address)==null?void 0:n.toUpperCase())&&M.token_b.address.toUpperCase()===((i=r.value.address)==null?void 0:i.toUpperCase())||M.token_b.address.toUpperCase()===((a=s.value.address)==null?void 0:a.toUpperCase())&&M.token_a.address.toUpperCase()===((g=r.value.address)==null?void 0:g.toUpperCase()))&&(P[M.address]={...M})}console.log(P,"===>currentPoolsObj");const O=Object.values(P).sort((y,M)=>y.fee-M.fee);console.log("0507####swap###poolInfo###poolSortList###",O);for(let y=0;y<O.length;y++)if(!((A=O[y])!=null&&A.is_pause)){b=O[y];break}return b=Object.values(P).sort((y,M)=>y.fee-M.fee)[0],console.log(P,"currentPoolsObj===>"),console.log("0507####swap###poolInfo###info###",b),b&&!ye(b)?b:null}return null}),uo=f(!0),ro=f(!1),qo=async n=>{n&&S.value=="Aptos"&&(Te(p.value?l.value:u.value),ro.value=!0,n.coinA.symbol.toLowerCase()===s.value.symbol.toLowerCase()&&n.coinB.symbol.toLowerCase()===r.value.symbol.toLowerCase()?uo.value=!0:uo.value=!1,ee.value=!1)};K(()=>k.value,(n,i)=>{n&&(!i||n.address!==i.address||n.current_sqrt_price!==i.current_sqrt_price)&&qo(n)},{immediate:!0,deep:!0});const Wo=N(()=>t.value.tokensObj&&s.value&&s.value.address&&t.value.tokensObj[s.value.address]&&t.value.tokensObj[s.value.address].logoURI),Jo=N(()=>(console.log(t.value.tokensObj,"===>pools.value.tokensObj"),t.value.tokensObj&&r.value&&r.value.address&&t.value.tokensObj[r.value.address]&&t.value.tokensObj[r.value.address].logoURI)),Xo=N(()=>S.value==="Aptos"?t.value.tokensObj&&s.value&&s.value.address&&t.value.tokensObj[s.value.address]&&t.value.tokensObj[s.value.address].coingecko_id||null:t.value.tokensObj&&s.value&&s.value.address||null),Qo=N(()=>S.value==="Aptos"?t.value.tokensObj&&r.value&&r.value.address&&t.value.tokensObj[r.value.address]&&t.value.tokensObj[r.value.address].coingecko_id||null:t.value.tokensObj&&r.value&&r.value.address||null),zo=N(()=>{var n,i,a,g,A,b,P,O,y;return(a=(i=t==null?void 0:t.value)==null?void 0:i.tokensObj[(n=s==null?void 0:s.value)==null?void 0:n.address])!=null&&a.pyth_id&&((b=(A=t==null?void 0:t.value)==null?void 0:A.tokensObj[(g=s==null?void 0:s.value)==null?void 0:g.address])==null?void 0:b.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(y=(O=t==null?void 0:t.value)==null?void 0:O.tokensObj[(P=s==null?void 0:s.value)==null?void 0:P.address])!=null&&y.coingecko_id?"coingecko":null}),Yo=N(()=>{var n,i,a,g,A,b,P,O,y;return(a=(i=t==null?void 0:t.value)==null?void 0:i.tokensObj[(n=r==null?void 0:r.value)==null?void 0:n.address])!=null&&a.pyth_id&&((b=(A=t==null?void 0:t.value)==null?void 0:A.tokensObj[(g=r==null?void 0:r.value)==null?void 0:g.address])==null?void 0:b.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(y=(O=t==null?void 0:t.value)==null?void 0:O.tokensObj[(P=r==null?void 0:r.value)==null?void 0:P.address])!=null&&y.coingecko_id?"coingecko":null}),Zo=N(()=>{var g,A,b;const n=new m(l.value);console.log(ne.value,"===>toAddLiquidiPoolInfo"),console.log((g=ne==null?void 0:ne.value)==null?void 0:g.fee,"toAddLiquidiPoolInfo?.value?.fee");const i=new m(S.value=="Aptos"?(A=k==null?void 0:k.value)==null?void 0:A.fee:(b=ne==null?void 0:ne.value)==null?void 0:b.fee),a=n.mul(i).toString();return console.log(a,"===>fee"),Number(a)<1/Math.pow(10,s.value.decimals)?`<${new m(1).div(new m(Math.pow(10,s.value.decimals))).toString()}`:le(a,s.value.decimals)}),{setIsShowSuccess:Ho,setIsShowRejected:co,setIsShowWaiting:je,setTransactionDesc:Ko,setTransactionTxid:mo}=T,Go=async()=>{var i,a,g,A,b,P,O,y;Q.value=!1,D.value=!0,clearInterval(Be),window.clearInterval(Be),mo(""),Ko(w("tips.swapping",{from:`${l.value} ${(i=s.value)==null?void 0:i.symbol}`,to:`${u.value} ${(a=r.value)==null?void 0:a.symbol}`})),je(!0);let n;S.value=="Aptos"&&(n=s.value.address===k.value.token_a.address&&r.value.address===k.value.token_b.address?0:1);try{console.log("0221####swap start####",S.value,"###",E),console.log("0412###toSwap###poolInfo.value###",k.value);let M;S.value=="Aptos"?M=await E.value.getSwapTransactionPayload({pool:k.value,a2b:n==0,byAmountIn:p.value,amount:p.value?l.value:u.value,slippage:Number(we.value)/100}):(console.log(ne.value,"===>toAddLiquidiPoolInfo.value"),M=await Le.value.swapRouterContract.getSwapRouterPayload(p.value,De.value.createTxParams)),console.log("0221####swap###swapPayload###",M);let V;if(S.value==="Aptos")V=await ae.value.currentWallet.signAndSubmitTransaction(M);else{console.log("0221###swap###sui##signAndExecuteTransaction前###",S.value,"###swapPayload###",M);const oe=await ae.value.currentWallet.signAndExecuteTransactionBlock(M);console.log("0221###sui swap res###",oe),V=E.value.handleTx(oe),console.log("0221###swap###sui##tx###",V)}if(V&&V.hash){mo(V.hash),je(!1),Ho(!0);const oe={title:w("tips.swap"),desc:w("tips.swapSuccessText",{from:`${l.value} ${(g=s.value)==null?void 0:g.symbol}`,to:`${u.value} ${(A=r.value)==null?void 0:A.symbol}`}),hash:V.hash,tit:"Swap",icon:"icon-icon-swap1",tokenInfo:{tokena:`${(b=s.value)==null?void 0:b.address}`,numa:`- ${l.value}`,logoa:t.value.tokensObj&&s.value&&s.value.address&&t.value.tokensObj[s.value.address]&&t.value.tokensObj[s.value.address].logoURI,tokenb:`${(P=r.value)==null?void 0:P.address}`,numb:`+ ${u.value}`,logob:t.value.tokensObj&&r.value&&r.value.address&&t.value.tokensObj[r.value.address]&&t.value.tokensObj[r.value.address].logoURI},text:`Pay ${l.value} ${(O=s.value)==null?void 0:O.symbol} to receive ${u.value} ${(y=r.value)==null?void 0:y.symbol}`};S.value!=="Aptos"&&(oe.res=V.res),E.value.showTransitionPending(oe);const ve=await E.value.watchTransaction(oe);console.log("0221###swap###transitionStatus####",ve),ve&&setTimeout(()=>{S.value=="Aptos"&&F.updateCurrentPools(k.value.poolAddress,S.value),E.value.getAccount(ae.value.address)},1e3)}else je(!1),co(!0);l.value="",u.value="",D.value=!1}catch(M){l.value="",u.value="",console.log("Swap Error###",M),D.value=!1,je(!1),co(!0)}},Vo=n=>{var i;return(n==null?void 0:n.logoURI)||(n==null?void 0:n.logo_url)||((i=t.value.tokensObj[n==null?void 0:n.address])==null?void 0:i.logo_url)||(T.theme==="default"?he("/image/coins/unknown.png"):he("/image/coins/sui-unknown.png"))},vo=f([]);K(()=>[s.value,r.value,t.value.poolConfigList],([n,i,a])=>{if(a&&a.length>0&&n&&i){const g=[];a.forEach(A=>{var b,P,O,y;(A.coinA.address.toUpperCase()===((b=n.address)==null?void 0:b.toUpperCase())&&A.coinB.address.toUpperCase()===((P=i.address)==null?void 0:P.toUpperCase())||A.coinB.address.toUpperCase()===((O=n.address)==null?void 0:O.toUpperCase())&&A.coinA.address.toUpperCase()===((y=i.address)==null?void 0:y.toUpperCase()))&&(A!=null&&A.is_pause||g.push(A.address))}),console.log(g,"result===>"),vo.value=g}},{immediate:!0});const Ke=n=>{console.log(Y.value,"===>currentCoinKey.value"),console.log(n);const i=localStorage.getItem(n.address);console.log(t.value.tokensObj,"===>pools.value.tokensObj"),console.log(i,"===>coinLocak"),t.value.tokensObj&&t.value.tokensObj[n.address]&&t.value.tokensObj[n.address].isSelfBuilt&&!i?Ge.value=!0:(Y.value==="fromCoin"?(l.value="",r.value&&n.address.toLowerCase()===(r==null?void 0:r.value.address.toLowerCase())&&(r.value=null),s.value=n):(s.value&&(u.value="",n.address.toLowerCase()===(s==null?void 0:s.value.address.toLowerCase())&&(s.value=null)),r.value=n),po())},Ge=f(!1),po=()=>{Ze.value={},Ye.value={},Ge.value=!1},xo=N(()=>T.isShowRouterModal),Ve=f([]),xe=f(""),en=f(!1),fo=wn(),Le=N(()=>fo),Pe=f(!1),De=f({}),eo=f(""),go=n=>{if(n&&n.paths&&n.paths.length>0){const i=n.paths[0];if(n.coinTypeA&&n.coinTypeB&&n.coinTypeC){console.log(t.value.routerPoolConfigObj,"===>pools.value.poolConfigObj");const a=t.value.routerPoolConfigObj[i.poolAddress[0]],g=t.value.routerPoolConfigObj[i.poolAddress[1]],A=Ae(n.paths[0].amountIn.toString(),s.value.decimals)*a.fee;let b,P=g.token_a.address==r.value.address?g.token_b.decimals:g.token_a.decimals;p.value?b=Ae(i.rawAmountLimit[0].toString(),P)*g.fee:b=Ae(i.rawAmountLimit[1].toString(),P)*g.fee;let O;console.log(g.token_a.address,r.value.address,"===>toCoin.value.address"),a.token_a.address==s.value.address?O=!1:O=!0;let y;O?y=E.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[0],a.token_a.decimals,a.token_b.decimals).toString():y=1/E.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[0],a.token_a.decimals,a.token_b.decimals).toString(),console.log(a,"===>1398 poolA"),console.log(P,"===>1398feeBDecimals"),console.log(O,"a2b1398"),console.log(y,1/y,b,"===>1398");const M=A+b*y;a.fee*100+"",eo.value=M>0&&M<1e-6?`<0.000001 ${s.value.symbol}`:W(le(M,s.value.decimals))+` ${s.value.symbol}`}else{const a=t.value.routerPoolConfigObj[i.poolAddress[0]];console.log(t.value.routerPoolConfigObj,"===>pools.value.poolConfigObj");const g=Ae(n.paths[0].amountIn.toString(),s.value.decimals)*a.fee;eo.value=g>0&&g<1e-6?`<0.000001 ${s.value.symbol} (${a.fee*100}%)`:W(le(g,s.value.decimals))+` ${s.value.symbol} (${a.fee*100}%)`}}},ho=async n=>{if(console.log(n,"==>swapRouter"),re.value=1e-5,n&&n.paths&&n.paths.length>0){console.log("这里执行了吗1");const i=n.paths[0];if(console.log(n.coinTypeA,"===>swapRouter.coinTypeA"),console.log(s.value.address,"===>fromCoin.value.address"),console.log(n.coinTypeC,"====>toCoin.value.address"),console.log(r.value.address,"===>toCoin.value.address"),n.coinTypeA&&n.coinTypeB&&n.coinTypeC&&n.coinTypeA==s.value.address&&n.coinTypeC==r.value.address){const a=t.value.routerPoolConfigObj[i.poolAddress[0]],g=E.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[0],a.coinA.decimals,a.coinB.decimals).toNumber(),A=t.value.routerPoolConfigObj[i.poolAddress[1]],b=E.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[1],A.coinA.decimals,A.coinB.decimals).toNumber();console.log(a,"poolA"),console.log(s.value.address,r.value.address,"===>1343"),console.log(a.token_a.address,a.token_b.address,"poolA1465"),console.log(A.token_a.address,A.token_b.address,"poolB1465");let P,O;a.token_a.address==s.value.address?P=!0:P=!1,A.token_b.address==r.value.address?O=!0:O=!1,console.log(P,O,"a2bb2c"),new m(l.value).div(u.value).toNumber();const y=new m(u.value).div(l.value).toNumber();console.log(g,b,"池子A当前价格 池子A交易后价格 池子B当前价格 池子B交易后价格");let M;const V=P?new m(g):new m(1).div(new m(g)),oe=O?new m(b):new m(1).div(new m(b));console.log(V.toString(),oe.toString(),y,"==>currentPriceDirectA");const ve=new m(V.mul(oe)).sub(y).div(new m(V.mul(oe))).mul(new m(100)).toNumber();M=ve,console.log(ve,"==>priceImpact"),M>100&&(console.log("我大于100了"),re.value=100),re.value=Number(ke(Math.abs(M),2))}else if(n&&n.currentSqrtPrice&&n.currentSqrtPrice.length==1&&i&&!ye(i)){const a=t.value.routerPoolConfigObj[i.poolAddress[0]],g=E.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[0],a.coinA.decimals,a.coinB.decimals).toNumber();let A;a.token_a.address==s.value.address?A=!0:A=!1;const b=A?new m(g):new m(1).div(new m(g)),P=new m(u.value).div(l.value).toNumber(),O=new m(b).sub(P).div(new m(b)).mul(new m(100)).toNumber(),y=O;console.log(O,"==>priceImpact"),y>100&&(console.log("我大于100了"),re.value=100),re.value=Number(ke(Math.abs(y),2)),console.log(O,"这里执行了吗"),console.log(a,"pool===>"),console.log(re.value,"==>impact.value")}}},Co=async n=>{if(s.value&&r.value&&(Number(l.value)>0||Number(u.value)>0)){console.log(new Date().getTime(),"开始计算时间戳"),console.log("执行吧"),(!l.value&&u.value||l.value&&!u.value)&&(D.value=!0),Ne.value=!0,Pe.value=!1,console.log(k.value,"==>poolInfo.value.");let i;k.value&&(i=s.value.address===k.value.coinA.address&&r.value.address===k.value.coinB.address?0:1);try{let a;if(p.value){const P=new m(l.value).mul(Math.pow(10,s.value.decimals)).toString();a=new qe(P)}else{const P=new m(u.value).mul(Math.pow(10,r.value.decimals)).toString();a=new qe(P)}console.log(a.toString(),"====>1498");const g=Number(we.value)/100;console.log(Le.value,"===>swapRouterContract.value");const A=k.value?{poolAddresses:vo.value,coinTypeA:k.value.coin_a_address,coinTypeB:k.value.coin_b_address,decimalsA:k.value.coinA.decimals,decimalsB:k.value.coinB.decimals,a2b:i==0,byAmountIn:p.value,amount:p.value?l.value:u.value}:"",b=await Le.value.swapRouterContract.getSwapRouter(s,r,a,p.value,g,"",k.value?A:"");console.log(new Date().getTime(),"计算完成时间戳"),console.log(b,"===> swapRouter1454"),b?(De.value=b,Ve.value=b.paths,ee.value=b.isExceed,console.log(b.isExceed,ee.value,"===>swapRouter.isExceed"),xe.value=b.amountIn,go(b),p.value?l.value&&(u.value=b.amountOut):u.value&&(l.value=b.amountIn),de.value=W(fe(new m(l.value).div(new m(u.value).toString()),s.value.decimals)),ce.value=W(fe(new m(u.value).div(l.value).toString(),r.value.decimals)),ho(b),D.value=!1,Pe.value=!1,Ne.value=!1):(D.value=!1,Pe.value=!0,Ne.value=!1)}catch(a){console.log("pre swap error",a),D.value=!1,Ne.value=!1}}else p.value?u.value="":l.value="",D.value=!1,Ne.value=!1;console.log(D.value,"====>routerSwaping")},me=f(!1),wo=async n=>{console.log("3s执行一次");try{let i;if(p.value){const A=new m(l.value).mul(Math.pow(10,s.value.decimals)).toString();i=new qe(A)}else{const A=new m(u.value).mul(Math.pow(10,r.value.decimals)).toString();i=new qe(A)}const a=Number(we.value)/100,g=await Le.value.swapRouterContract.getSwapRouter(s,r,i,p.value,a,"");g&&(De.value=g,Ve.value=g.paths,ee.value=g.isExceed,console.log(g.isExceed,ee.value,"===>swapRouter.isExceed"),xe.value=g.amountIn,go(g),de.value=W(fe(new m(l.value).div(new m(u.value).toString()),s.value.decimals)),ce.value=W(fe(new m(u.value).div(l.value).toString(),r.value.decimals)),ho(g),p.value?u.value!==g.amountOut&&(me.value=!0,u.value=g.amountOut):l.value!==g.amountIn&&(me.value=!0,l.value=g.amountIn))}catch(i){console.log("pre swap error",i)}},on=async n=>{if(s.value&&r.value&&(l.value||u.value)){const i=s.value.address===k.value.coinA.address&&r.value.address===k.value.coinB.address?0:1;try{let a=await E.value.preSwap({pool:k.value,a2b:i==0,byAmountIn:p.value,amount:p.value?l.value:u.value});console.log(a,"preSwapRespreSwapRes"),ee.value=a==null?void 0:a.isExceed,io.value=a==null?void 0:a.estimatedFeeAmount,p.value?(ce.value=(Number(a.estimatedAmountOut)/n).toString(),de.value=(n/Number(a.estimatedAmountOut)).toString()):(ce.value=(n/Number(a.estimatedAmountIn)).toString(),de.value=(Number(a.estimatedAmountIn)/n).toString()),p.value?u.value!==a.estimatedAmountOut&&(me.value=!0,u.value=a.estimatedAmountOut):l.value!==a.estimatedAmountIn&&(me.value=!0,l.value=a.estimatedAmountIn),console.log(de.value,ce.value,"===>831"),console.log(me.value,"==>isShowAccept.value"),re.value=S.value=="Aptos"?await Me(k.value):await Me(ne.value||k.value),D.value=!1,Z.value=!1}catch(a){console.log("pre swap error",a),D.value=!1,Z.value=!1}}else D.value=!1,Z.value=!1};let Be=f(null);K(()=>Q.value,n=>{n?(console.log("我开启了"),Be.value=setInterval(()=>{S.value=="Aptos"?on(p.value):wo(p.value)},3e3)):(console.log("我关闭了"),clearInterval(Be.value),window.clearInterval(Be.value))},{immediate:!0});const Te=async n=>{S.value=="Aptos"?jo(n):(console.log("调用sui"),Co())},nn=N(()=>fo),an=N(()=>nn.value.isInitRouter);K(()=>an.value,n=>{n||Te(p.value?l.value:u.value)},{immediate:!0}),K(()=>[s.value,r.value],([n,i])=>{if(n&&i&&Te(p.value?l.value:u.value),n||i){const a=`/swap?from=${n==null?void 0:n.address}&to=${i==null?void 0:i.address}`;e.push(a)}},{immediate:!0});function sn(n,i=500){let a=null;return function(...g){clearTimeout(a),a=setTimeout(()=>{n.call(this,...g)},i)}}const tn=sn(Ao);function Ao(){console.log("====>调用了几次");const n=s.value;s.value=r.value,r.value=n,_.value=!0,p.value=!p.value,p.value?(l.value=u.value,u.value=""):(u.value=l.value,l.value=""),setTimeout(()=>{_.value=!1},300)}return{closeSwapConfirmModal:()=>{Q.value=!1,me.value=!1},updateAccept:()=>{me.value=!1},clickExchange:Ao,debounceClickExchange:tn,closeTokenWarning:po,isShowTokenWarning:Ge,getTokenSource:Ke,hasPool:ro,getPoolInfoSuccess:no,halfBtnSelect:Mo,formCoinId:Xo,toCoinId:Qo,formCoinMarket:zo,toCoinMarket:Yo,fromCoinUrl:Wo,toCoinUrl:Jo,t:w,indicator:v,wallet:ae,currentLpInfo:Do,fixD:ke,decimalFormat:dn,impact:re,oneFromAmount:de,oneToAmount:ce,importIcon:he,clickRefresh:ao,refresh:I,change:_,isShowAddress:L,isShowSwapSetting:U,fromCoin:s,toCoin:r,slippage:we,openCoinSelect:Fo,onCoinSelect:Ro,existingCoins:J,lastSelectCoin:x,currentCoinKey:Y,showCoinSelect:$,fromCoinAmount:l,toCoinAmount:u,maxBtnSelect:Uo,fixedFromCoin:p,swapBtnText:_o,toSwap:Go,loading:ue,swaping:D,autoRefreshTime:R,countdown:B,marketTimer:$e,rateChange:H,isSwapConfirmMpdal:Q,fromCoinBlance:se,toCoinBlance:te,poolInfo:k,chainName:S,swapRouterLoading:Ne,formatFee:Zo,calculating:Z,currentRate:to,currentRateReverse:lo,getCoinIcon:Vo,toAddLiquidiPoolInfo:ne,decimalUi:fe,warningToCoin:Ze,warningFromCoin:Ye,isShowRouterModal:xo,toSwapLoading:en,insufficientLiquidity:ee,routerPool:Ve,routerTotalAmounts:xe,store:T,suiPreSwapdata:De,suiSwapFee:eo,addCommom:W,debounce:We,notFoundRouter:Pe,getSuiAmountAccept:wo,isShowAccept:me,getSuiAmount:Co}}});const Ie=e=>(Re("data-v-333c7034"),e=e(),Ue(),e),Zs={class:"swap-container"},Hs={class:"title"},Ks={class:"left"},Gs={class:"right title-right"},Vs=Ie(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),xs={class:"swap-card"},et={class:"card-container"},ot={class:"card-item"},nt={class:"card-item"},at=Ie(()=>o("use",{"xlink:href":"#icon-icon-swap1"},null,-1)),st=[at],tt={key:1,class:"induction"},lt={key:0,class:"exchange-rate-btn"},it={key:0},ut={key:0},rt={key:0},dt={key:1},ct={key:0},mt=Ie(()=>o("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),vt=[mt],pt={class:"item"},ft={class:"induction-text"},gt={key:0,class:"icon","aria-hidden":"true"},ht=Ie(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),Ct=[ht],wt={class:"item"},At={class:"induction-text"},bt={key:0,class:"induction-value"},yt={class:"item"},kt={class:"induction-text"},St={key:0,class:"induction-value"},It={key:0,class:"icon","aria-hidden":"true"},$t=Ie(()=>o("use",{"xlink:href":"#icon-icon-swap"},null,-1)),Nt=[$t],Tt={key:2,class:"token-info-container"},Pt={class:"token-info-title"},Bt=Ie(()=>o("span",{class:"coingecko"},"Price Reference",-1)),Ot=Ie(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1));function _t(e,v,w,C,T,F){var l,u;const t=ln,_=rn,I=ea,L=$o,U=No,H=Oo,Q=gn,Y=Cn,J=hn,x=To,$=Ba,p=un,ue=xa,D=zs,Z=Fe("image");return d(),h("div",Zs,[o("div",Hs,[o("div",Ks,c(e.$t("menu.swap")),1),o("div",Gs,[o("div",{class:"slippage-icon",onClick:v[0]||(v[0]=R=>e.isShowSwapSetting=!0)},[Vs,o("span",null,c(e.slippage)+"%",1)]),pe(t,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])]),o("div",xs,[o("div",et,[o("div",ot,[pe(_,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":v[1]||(v[1]=R=>e.fromCoinAmount=R),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logo_url:"",address:e.fromCoin?e.fromCoin.address:"","swap-direction":"From",onOnMax:v[2]||(v[2]=R=>e.maxBtnSelect("fromCoin")),onOnHalf:v[3]||(v[3]=R=>e.halfBtnSelect("fromCoin")),onOnInput:v[4]||(v[4]=R=>{e.fromCoinAmount=R,e.fixedFromCoin=!0}),onOnSelect:v[5]||(v[5]=R=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),o("div",nt,[pe(_,{modelValue:e.toCoinAmount,"onUpdate:modelValue":v[6]||(v[6]=R=>e.toCoinAmount=R),"input-value":e.toCoinAmount,havemax:!1,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direction":"To","coin-icon":e.toCoin?e.toCoin.logo_url:"",address:e.toCoin?e.toCoin.address:"",onOnInput:v[7]||(v[7]=R=>{e.toCoinAmount=R,e.fixedFromCoin=!1}),onOnSelect:v[8]||(v[8]=R=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),o("img",{class:ge(e.change?"gang animationex":"gang"),src:An,alt:""},null,2),o("div",{class:ge(["exchange",e.chainName=="Sui"?"sui-exchange":""]),onClick:v[9]||(v[9]=(...R)=>e.debounceClickExchange&&e.debounceClickExchange(...R))},[(d(),h("svg",{class:ge(e.change?"icon animationex":"icon"),"aria-hidden":"true"},st,2))],2)]),e.chainName=="Sui"&&!e.notFoundRouter?(d(),q(I,{key:0,"swap-loading":e.swaping,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"router-pool":e.routerPool,impact:e.impact,"insufficient-liquidity":e.insufficientLiquidity,"one-to-amount":e.oneToAmount,"one-from-amount":e.oneFromAmount,"sui-pre-swapdata":e.suiPreSwapdata,"sui-swap-fee":e.suiSwapFee,"swap-router-loading":e.swapRouterLoading},null,8,["swap-loading","from-coin-amount","to-coin-amount","from-coin","to-coin","fixed-from-coin","router-pool","impact","insufficient-liquidity","one-to-amount","one-from-amount","sui-pre-swapdata","sui-swap-fee","swap-router-loading"])):e.poolInfo&&e.fromCoinAmount&&e.toCoinAmount&&e.fromCoinAmount!=="0"&&e.toCoinAmount!=="0"&&e.swapBtnText!==e.$t("button.poolNotFound")?(d(),h("div",tt,[Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(d(),h("div",lt,[e.rateChange?Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&e.rateChange?(d(),h("span",dt,[Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(d(),h("span",ct,[z(o("img",null,null,512),[[Z,e.toCoinUrl||e.getCoinIcon(e.toCoin)]]),G(" 1 "+c(e.toCoin.symbol)+" ≈ ",1),z(o("img",null,null,512),[[Z,e.fromCoinUrl||e.getCoinIcon(e.fromCoin)]]),o("span",null,c(("addCommom"in e?e.addCommom:X(W))(("decimalUi"in e?e.decimalUi:X(fe))(e.currentRateReverse,e.fromCoin.decimals),e.fromCoin.decimals)),1),G("  "+c(e.fromCoin.symbol),1)])):(d(),q(L,{key:1,indicator:e.indicator},null,8,["indicator"]))])):j("",!0):(d(),h("span",it,[z(o("img",null,null,512),[[Z,e.fromCoinUrl||e.getCoinIcon(e.fromCoin)]]),G(" 1 "+c(e.fromCoin.symbol)+" ≈ ",1),Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(d(),h("span",ut,[z(o("img",null,null,512),[[Z,e.toCoinUrl||e.getCoinIcon(e.toCoin)]]),e.calculating?j("",!0):(d(),h("span",rt,c(("addCommom"in e?e.addCommom:X(W))(("decimalUi"in e?e.decimalUi:X(fe))(e.currentRate,e.toCoin.decimals))),1)),e.calculating?(d(),q(L,{key:1,indicator:e.indicator},null,8,["indicator"])):j("",!0),G("  "+c(e.toCoin.symbol),1)])):(d(),q(L,{key:1,indicator:e.indicator},null,8,["indicator"]))])),(d(),h("svg",{class:"icon-change","aria-hidden":"true",onClick:v[10]||(v[10]=R=>e.rateChange=!e.rateChange)},vt))])):j("",!0),Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(d(),h(oo,{key:1},[o("div",pt,[o("div",ft,c(e.$t("common.priceImpact")),1),e.swaping?(d(),q(U,{key:1,paragraph:!1,active:""})):(d(),h("div",{key:0,class:ge(["induction-value",Number(e.impact)<1?"impact-s":Number(e.impact)<10&&Number(e.impact)>1?"impact-w":"impact-e"])},[G(c(Number(e.impact)<.01?"<0.01":Number(e.impact)>100?"100":e.impact)+"% ",1),e.impact>=10?(d(),h("svg",gt,Ct)):j("",!0)],2))]),o("div",wt,[o("div",At,c(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swaping?(d(),q(U,{key:1,paragraph:!1,active:""})):(d(),h("div",bt,c(e.fixedFromCoin?("addCommom"in e?e.addCommom:X(W))(("fixD"in e?e.fixD:X(ke))(Number(e.toCoinAmount)-Number(e.toCoinAmount)*Number(e.slippage)/100,e.toCoin.decimals),e.toCoin.decimals):("addCommom"in e?e.addCommom:X(W))(("fixD"in e?e.fixD:X(ke))(Number(e.fromCoinAmount)*Number(e.slippage)/100+Number(e.fromCoinAmount),e.fromCoin.decimals),e.fromCoin.decimals))+" "+c(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),o("div",yt,[o("div",kt,c(e.$t("common.fee")),1),e.swaping?(d(),q(U,{key:1,paragraph:!1,active:""})):(d(),h("div",St,c(("addCommom"in e?e.addCommom:X(W))(e.formatFee,e.fromCoin.decimals))+" "+c(e.fromCoin.symbol)+" ("+c(e.chainName=="Aptos"?e.poolInfo.fee*100:((l=e.toAddLiquidiPoolInfo)==null?void 0:l.fee)*100)+"%) ",1))])],64)):j("",!0)])):j("",!0)]),pe(H,{disabled:e.wallet.connected?e.swaping||!e.fromCoin||!e.toCoin||!Number(e.fromCoinAmount)||!Number(e.toCoinAmount)||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||e.swapBtnText==e.$t("button.poolNotFound")||e.swapBtnText!==e.$t("button.swap")||((u=e.poolInfo)==null?void 0:u.is_pause)||e.swapRouterLoading:!1,class:"big-btn",loading:e.chainName=="Aptos"?e.swaping:!1,onClick:v[11]||(v[11]=R=>e.wallet.connected?e.isSwapConfirmMpdal=!0:e.wallet.setIsShowWalletModal(!0))},{default:ie(()=>[e.wallet.connected?(d(),h("svg",It,Nt)):j("",!0),o("span",null,c(e.wallet.connected?e.swapBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled","loading"]),pe(Q),e.showCoinSelect?(d(),q(Y,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:v[12]||(v[12]=R=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):j("",!0),e.isShowSwapSetting?(d(),q(J,{key:1,onOnClose:v[13]||(v[13]=R=>e.isShowSwapSetting=!1)})):j("",!0),e.chainName&&(e.formCoinMarket||e.toCoinMarket)?(d(),h("div",Tt,[o("div",Pt,[Bt,pe(x,{placement:"top","arrow-point-at-center":""},{title:ie(()=>[G(" The following price is only an external reference from 3rd party data providers, which does not reflect actual data on Cetus. ")]),default:ie(()=>[Ot]),_:1})]),e.fromCoin&&e.formCoinMarket?(d(),q($,{key:0,id:e.formCoinId,coin:e.fromCoin,market:e.formCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):j("",!0),e.toCoin&&e.toCoinMarket?(d(),q($,{key:1,id:e.toCoinId,coin:e.toCoin,market:e.toCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):j("",!0)])):j("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(d(),q(p,{key:3,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,onClose:e.closeTokenWarning,onClickContinue:e.getTokenSource},null,8,["from-coin","to-coin","onClose","onClickContinue"])):j("",!0),e.isShowRouterModal?(d(),q(ue,{key:4,"router-pool":e.routerPool,"routertotal-percents":e.routertotalPercents,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"router-total-amounts":e.routerTotalAmounts,onOnClose:v[14]||(v[14]=R=>e.store.setIsShowRouterModal(!1))},null,8,["router-pool","routertotal-percents","from-coin","to-coin","from-coin-amount","to-coin-amount","router-total-amounts"])):j("",!0),e.isSwapConfirmMpdal?(d(),q(D,{key:5,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,slippage:e.slippage,impact:e.impact,"fixed-from-coin":e.fixedFromCoin,fee:e.chainName=="Sui"?e.suiSwapFee:e.poolInfo.fee,"format-fee":e.chainName=="Sui"?e.suiSwapFee:e.formatFee,"is-show-accept":e.isShowAccept,"swap-loading":e.swapRouterLoading,"one-from-amount":e.oneFromAmount,"one-to-amount":e.oneToAmount,onOnClose:e.closeSwapConfirmModal,onToSwap:e.toSwap,onAccept:e.updateAccept},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","slippage","impact","fixed-from-coin","fee","format-fee","is-show-accept","swap-loading","one-from-amount","one-to-amount","onOnClose","onToSwap","onAccept"])):j("",!0)])}const el=_e(Ys,[["render",_t],["__scopeId","data-v-333c7034"]]);export{el as default};
