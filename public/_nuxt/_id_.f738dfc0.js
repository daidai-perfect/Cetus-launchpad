import{_ as mn}from"./back.7088658d.js";import{_ as pn}from"./refresh-icon.05fba463.js";import{a as He,P as To,l as _o,r as C,at as cn,e as Ue,M as to,o as a,c as O,w as oe,h as o,i as F,j as fe,v as i,f as p,F as Ce,s as So,z as we,x as E,au as fn,Z as yn,B as $o,p as Ee,k as We,y as Ro,E as Vo,m as y,G as _e,b as jo,W as Qe,q as Io,t as Ie,u as T,Q as Yo,Y as wo,a6 as zo,J as Uo,a5 as ho,U as gn,V as bn,O as Go,S as kn}from"./entry.17136172.js";/* empty css              */import{a as hn,_ as _n}from"./icon-warning_2x.b7e0b348.js";import{u as Ke,a as Zo}from"./autoPool.c9b49be3.js";import{_ as $n}from"./icon-error_2x.d68fff20.js";import{u as xe,b as yo,g as Mo,p as Xo,c as Jo,k as In,i as wn}from"./pool.9a5cddd3.js";import{i as Ye,g as R,b as Re,k as B,u as qo,T as Ze,m as ge,R as Fo,d as Cn}from"./index.0a5fc01d.js";import{_ as go}from"./token-warning.7d4c078a.js";import{_ as Qo}from"./auto-pool-apy-tips.5072354c.js";/* empty css              */import"./index.e0495629.js";import{i as Je}from"./import-icon.de3e6c66.js";/* empty css              */import{_ as Ko}from"./assets-card.e1746b76.js";import{_ as xo}from"./coin-lock.7600613c.js";import{D as v}from"./decimal.0bdeb344.js";/* empty css              */import{u as An}from"./useSuiAggregator.23d82356.js";/* empty css              */import"./useDebounceFunction.2cbd4481.js";import"./img-lock_2x.a28135f4.js";const Pn=He({components:{Modal:To},setup(e,t){const{t:X,locale:H}=_o(),N=Ke(),$=["0.1","0.5","1"],u=C(N.slippage||.1),{setSlippage:k}=N,g=cn(),A=C(!1);function s(r,d){A.value=!1,u.value=d}function m(){k(u.value),t.emit("onClose",!1)}return{settingArr:$,changeActiveIndex:s,confirm:m,emit:g,slippage:u,t:X,isInput:A,inputChange:r=>{const d=new RegExp(/[^\d^\.]+/g);r.target.value=r.target.value.replace(d,""),u.value=r.target.value}}}});const en=e=>(Ee("data-v-ec8759be"),e=e(),We(),e),Sn=en(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Tn={class:"setting-container"},Rn={class:"title"},qn=en(()=>o("img",{src:_n,alt:""},null,-1)),Nn={class:"tag-list"},Ln={key:0,src:hn,alt:""},Bn={key:1,src:$n,alt:""},On={class:"footer"};function Dn(e,t,X,H,N,$){const u=fn,k=yn,g=$o,A=to("Modal");return a(),O(A,{title:"Settings",class:"setting",centered:"",visible:!0,width:"400px",onCancel:t[3]||(t[3]=s=>e.$emit("onClose"))},{closeIcon:oe(()=>[Sn]),footer:oe(()=>[o("div",On,[F(g,{type:"cancel",class:"cancel-btn cancel-btn-new",onClick:t[2]||(t[2]=s=>e.$emit("onClose"))},{default:oe(()=>[fe(i(e.$t("button.cancel")),1)]),_:1}),F(g,{class:"confirmbtn",disabled:Number(e.slippage)==0||Number(e.slippage)>1||Number(e.slippage)<.01,onClick:e.confirm},{default:oe(()=>[fe(i(e.$t("button.confirm")),1)]),_:1},8,["disabled","onClick"])])]),default:oe(()=>[o("div",Tn,[o("div",Rn,[qn,o("span",null,i(e.$t("modal.slippageTolerance")),1)]),o("div",Nn,[(a(!0),p(Ce,null,So(e.settingArr,(s,m)=>(a(),O(u,{key:m,class:we(!e.isInput&&s==e.slippage?"tag-active":""),onClick:n=>e.changeActiveIndex(m,s)},{default:oe(()=>[fe(i(s)+"% ",1)]),_:2},1032,["class","onClick"]))),128)),F(u,{class:we(["input-tag",e.isInput?"tag-active":""]),onClick:t[1]||(t[1]=s=>e.isInput=!0)},{default:oe(()=>[F(k,{value:e.slippage,"onUpdate:value":t[0]||(t[0]=s=>e.slippage=s),placeholder:"",suffix:"%",class:we(["slippage-input",Number(e.slippage)>.5&&Number(e.slippage)<1?"slippage-input-waring":Number(e.slippage)>1?"slippage-input-error":""]),onChange:e.inputChange},null,8,["value","class","onChange"])]),_:1},8,["class"])])]),Number(e.slippage)>.5&&Number(e.slippage)<1||Number(e.slippage)>1?(a(),p("div",{key:0,class:we(["slippage-hint",Number(e.slippage)>.5&&Number(e.slippage)<1?"slippage-hint-waring":Number(e.slippage)>1?"slippage-hint-error":""])},[Number(e.slippage)>.5&&1>=Number(e.slippage)?(a(),p("img",Ln)):E("",!0),Number(e.slippage)>1?(a(),p("img",Bn)):E("",!0),o("p",null,i(Number(e.slippage)>.5&&1>=Number(e.slippage)?e.$t("tips.slippageTolerance2"):Number(e.slippage)>1?e.$t("tips.slippageTolerance1"):""),1)],2)):E("",!0)]),_:1})}const Un=Ue(Pn,[["render",Dn],["__scopeId","data-v-ec8759be"]]),Mn=He({props:{poolInfo:{type:Object,default:()=>({})}},setup(e,t){const X=C(!1),H=C(null),N=C(0);let $=C(!1);const u=C(20);xe();const k=Ke(),g=C(!1);Ro(()=>{}),Vo(()=>{clearInterval(H.value)});const A=()=>{$.value=!1,H.value=setInterval(()=>{var f;g.value||N.value<u.value&&(N.value+=1,N.value===u.value&&((f=e==null?void 0:e.poolInfo)!=null&&f.address&&n(),N.value=0))},1e3)},s=y(()=>k.slippage),m=()=>{t.emit("clearAll")},n=()=>{$.value||($.value=!0,N.value=0,t.emit("clickRefresh"),setTimeout(()=>{$.value=!1},1e3))};_e(()=>e.poolInfo,f=>{f&&!H.value&&A()},{immediate:!0});const r=jo(),d=Qe();return{refresh:$,clickRefresh:n,isShowSwapSetting:X,countdown:N,autoRefreshTime:u,slippage:s,clearAll:m,checkNullObj:Ye,router:r,route:d}}});const Fn=e=>(Ee("data-v-41ba3d57"),e=e(),We(),e),Vn={class:"title"},jn={class:"left"},Hn=Fn(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),En={key:0,class:"deposit-progress"};function Wn(e,t,X,H,N,$){const u=mn,k=pn,g=Un;return a(),p("div",Vn,[o("div",jn,[F(u)]),o("div",{class:we(["right title-right deposit-setting",e.poolInfo?"havePoolInfo":"noPoolInfo"])},[o("div",{class:"slippage-icon",onClick:t[0]||(t[0]=A=>e.isShowSwapSetting=!0)},[Hn,o("span",null,i(e.slippage)+"%",1)]),e.route.name!=="liquidity-create"?(a(),p("div",En,[F(k,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])):E("",!0)],2),e.isShowSwapSetting?(a(),O(g,{key:0,onOnClose:t[1]||(t[1]=A=>e.isShowSwapSetting=!1)})):E("",!0)])}const Xn=Ue(Mn,[["render",Wn],["__scopeId","data-v-41ba3d57"]]),Yn=He({components:{AutoPoolApyTips:Qo},setup(){const e=yo(),t=y(()=>e),X=xe(),H=y(()=>X),N=Ke(),$=y(()=>N),u=y(()=>t.value.theme),k=Qe(),g=C();_e(()=>[$.value.positionInfoObj,k.params.id],([b,c])=>{b&&!Ye(b)&&c&&(g.value=b[c])},{immediate:!0,deep:!0});const A=y(()=>{var b;return(b=g.value)==null?void 0:b.needReverse}),s=b=>{var c;return(b==null?void 0:b.logoURI)||(b==null?void 0:b.logo_url)||((c=H.value.tokensObj[b==null?void 0:b.address])==null?void 0:c.logo_url)||(u.value==="default"?Je("/image/coins/unknown.png"):Je("/image/coins/sui-unknown.png"))},m=y(()=>{var b,c;return $.value.apyObj&&((c=$.value.apyObj[(b=g.value)==null?void 0:b.id])==null?void 0:c.tvl)||"--"}),n=y(()=>{var b,c;return $.value.apyObj&&((c=$.value.apyObj[(b=g.value)==null?void 0:b.id])==null?void 0:c.apr)||"--"}),r=y(()=>(console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-info.vue:399 ~ apyObj ~ autoPool.value.apyObj:",$.value.apyObj),$.value.apyObj)),d=y(()=>t.value.currentExplorer),f=y(()=>$.value.autoPoolLoading);return{positionInfo:g,needReverse:A,getCoinIcon:s,tvl:m,apy:n,addCommom:R,getExplorerUrl:Mo,currentExplorer:d,autoPoolLoading:f,apyObj:r,checkNullObj:Ye}}});const Xe=e=>(Ee("data-v-21f00ade"),e=e(),We(),e),zn={class:"auto-pool-v2-info"},Gn={class:"pool-info"},Zn={class:"left"},Jn={class:"coin-a"},Qn={alt:""},Kn={class:"coin-b"},xn={alt:""},et={class:"position-name"},ot={key:0,class:"pool-fee"},nt=Xe(()=>o("span",null,"Fee tier",-1)),tt={key:1,class:"vault-address"},st=["href"],at=Xe(()=>o("span",null,"Vault Address",-1)),lt=Xe(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),it=[at,lt],ut={class:"apy-and-tvl"},rt={class:"apy"},dt=Xe(()=>o("div",{class:"apy-title"},"APY",-1)),vt={key:0,class:"apy-text"},mt={class:"reward-coin"},pt=Xe(()=>o("div",{class:"reward"},"Rewards",-1)),ct={class:"right"},ft={alt:""},yt={class:"tvl"},gt=Xe(()=>o("div",{class:"tvl-title"},"TVL",-1)),bt={key:0,class:"tvl-text"},kt={class:"pool-info h5-pool-info"},ht={class:"left"},_t={class:"coin-a"},$t={alt:""},It={class:"coin-b"},wt={alt:""},Ct={class:"position-name"},At={key:0,class:"pool-fee"},Pt=Xe(()=>o("span",null,"Fee tier",-1)),St={class:"left"},Tt={class:"vault-address"},Rt=["href"],qt=Xe(()=>o("span",null,"Vault Address",-1)),Nt=Xe(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),Lt=[qt,Nt],Bt={class:"apy-and-tvl"},Ot={class:"apy"},Dt=Xe(()=>o("div",{class:"apy-title"},"APY",-1)),Ut={key:0,class:"apy-text"},Mt={class:"reward-coin"},Ft=Xe(()=>o("div",{class:"reward"},"Rewards",-1)),Vt={class:"right"},jt={alt:""},Ht={class:"tvl"},Et=Xe(()=>o("div",{class:"tvl-title"},"TVL",-1)),Wt={key:0,class:"tvl-text"};function Xt(e,t,X,H,N,$){var m,n,r,d,f,b,c,I,L,V,j,G,te,h,_,Y,z,Q,se,M,Z,ne,le,ve,q,P,U,ye,pe,w,x,Pe,Ae,qe,Me,Oe,$e,Fe,Ne,ao,ro,eo,Le,lo,vo,mo;const u=go,k=wo,g=Qo,A=Yo,s=Io("image");return a(),p("div",zn,[o("div",Gn,[o("div",Zn,[o("div",Jn,[Ie(o("img",Qn,null,512),[[s,e.needReverse?e.getCoinIcon((n=e.positionInfo)==null?void 0:n.token_b):e.getCoinIcon((m=e.positionInfo)==null?void 0:m.token_a)]]),F(u,{address:e.needReverse?(b=(f=e.positionInfo)==null?void 0:f.token_b)==null?void 0:b.address:(d=(r=e.positionInfo)==null?void 0:r.token_a)==null?void 0:d.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",Kn,[Ie(o("img",xn,null,512),[[s,e.needReverse?e.getCoinIcon((I=e.positionInfo)==null?void 0:I.token_a):e.getCoinIcon((c=e.positionInfo)==null?void 0:c.token_b)]]),F(u,{address:e.needReverse?(G=(j=e.positionInfo)==null?void 0:j.token_a)==null?void 0:G.address:(V=(L=e.positionInfo)==null?void 0:L.token_b)==null?void 0:V.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",et,[e.autoPoolLoading?(a(),O(k,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),p(Ce,{key:0},[fe(i(e.needReverse?(h=(te=e.positionInfo)==null?void 0:te.token_b)==null?void 0:h.symbol:(Y=(_=e.positionInfo)==null?void 0:_.token_a)==null?void 0:Y.symbol)+" - "+i(e.needReverse?(Q=(z=e.positionInfo)==null?void 0:z.token_a)==null?void 0:Q.symbol:(M=(se=e.positionInfo)==null?void 0:se.token_b)==null?void 0:M.symbol),1)],64))]),(Z=e.positionInfo)!=null&&Z.fee?(a(),p("div",ot,[nt,fe(" "+i(((ne=e.positionInfo)==null?void 0:ne.fee)*100)+"% ",1)])):E("",!0),e.autoPoolLoading?E("",!0):(a(),p("div",tt,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:T(Mo))(e.currentExplorer,"poolAddress",(le=e.positionInfo)==null?void 0:le.id),target:"_blank"},it,8,st)]))]),o("div",ut,[o("div",rt,[dt,e.autoPoolLoading?(a(),O(k,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),p("div",vt,[fe(i(e.apy)+" ",1),F(g)]))]),o("div",mt,[pt,e.autoPoolLoading?(a(),O(k,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),O(A,{key:0,"overlay-class-name":"reward-coin-tips"},{title:oe(()=>[fe("Rewards will be auto harvested and compounded to your position.")]),default:oe(()=>{var ze;return[o("div",ct,[(a(!0),p(Ce,null,So((ze=e.positionInfo)==null?void 0:ze.rewardList,Ve=>(a(),p("div",{key:Ve,class:"coin-a"},[Ie(o("img",ft,null,512),[[s,e.getCoinIcon({address:Ve})]]),F(u,{address:Ve,"style-params":{width:"8px",height:"8px",right:"0px",bottom:"0px"}},null,8,["address"])]))),128))])]}),_:1}))]),o("div",yt,[gt,e.tvl?(a(),p("div",bt,"$"+i(("addCommom"in e?e.addCommom:T(R))(e.tvl,2)),1)):(a(),O(k,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1}))])])]),o("div",kt,[o("div",ht,[o("div",_t,[Ie(o("img",$t,null,512),[[s,e.needReverse?e.getCoinIcon((q=e.positionInfo)==null?void 0:q.token_b):e.getCoinIcon((ve=e.positionInfo)==null?void 0:ve.token_a)]]),F(u,{address:e.needReverse?(pe=(ye=e.positionInfo)==null?void 0:ye.token_b)==null?void 0:pe.address:(U=(P=e.positionInfo)==null?void 0:P.token_a)==null?void 0:U.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",It,[Ie(o("img",wt,null,512),[[s,e.needReverse?e.getCoinIcon((x=e.positionInfo)==null?void 0:x.token_a):e.getCoinIcon((w=e.positionInfo)==null?void 0:w.token_b)]]),F(u,{address:e.needReverse?(Me=(qe=e.positionInfo)==null?void 0:qe.token_a)==null?void 0:Me.address:(Ae=(Pe=e.positionInfo)==null?void 0:Pe.token_b)==null?void 0:Ae.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",Ct,i(e.needReverse?($e=(Oe=e.positionInfo)==null?void 0:Oe.token_b)==null?void 0:$e.symbol:(Ne=(Fe=e.positionInfo)==null?void 0:Fe.token_a)==null?void 0:Ne.symbol)+" - "+i(e.needReverse?(ro=(ao=e.positionInfo)==null?void 0:ao.token_a)==null?void 0:ro.symbol:(Le=(eo=e.positionInfo)==null?void 0:eo.token_b)==null?void 0:Le.symbol),1),(lo=e.positionInfo)!=null&&lo.fee?(a(),p("div",At,[Pt,fe(" "+i(((vo=e.positionInfo)==null?void 0:vo.fee)*100)+"% ",1)])):E("",!0)]),o("div",St,[o("div",Tt,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:T(Mo))(e.currentExplorer,"poolAddress",(mo=e.positionInfo)==null?void 0:mo.id),target:"_blank"},Lt,8,Rt)])]),o("div",Bt,[o("div",Ot,[Dt,e.autoPoolLoading?(a(),O(k,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),p("div",Ut,[fe(i(e.apy)+" ",1),F(g)]))]),o("div",Mt,[Ft,e.autoPoolLoading?(a(),O(k,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),O(A,{key:0,"overlay-class-name":"reward-coin-tips"},{title:oe(()=>[fe("Rewards will be auto harvested and compounded to your position.")]),default:oe(()=>{var ze;return[o("div",Vt,[(a(!0),p(Ce,null,So((ze=e.positionInfo)==null?void 0:ze.rewardList,Ve=>(a(),p("div",{key:Ve,class:"coin-a"},[Ie(o("img",jt,null,512),[[s,e.getCoinIcon({address:Ve})]]),F(u,{address:Ve,"style-params":{width:"8px",height:"8px",right:"0px",bottom:"0px"}},null,8,["address"])]))),128))])]}),_:1}))]),o("div",Ht,[Et,e.tvl?(a(),p("div",Wt,"$"+i(("addCommom"in e?e.addCommom:T(R))(e.tvl,2)),1)):(a(),O(k,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1}))])])])])}const on=Ue(Yn,[["render",Xt],["__scopeId","data-v-21f00ade"]]),Yt=He({components:{Slider:zo},setup(){const e=C(!0),t=xe(),X=y(()=>t),H=Ke(),N=y(()=>H),$=Qe(),u=C();_e(()=>[N.value.positionInfoObj,$.params.id],([n,r])=>{n&&!Ye(n)&&r&&(u.value=n[r])},{immediate:!0,deep:!0});const k=y(()=>{var n;return(n=u.value)==null?void 0:n.needReverse}),g=n=>{var r;return(n==null?void 0:n.logoURI)||(n==null?void 0:n.logo_url)||((r=X.value.tokensObj[n==null?void 0:n.address])==null?void 0:r.logo_url)||Je("/image/coins/sui-unknown.png")},A=y(()=>{var b,c,I,L,V,j,G;const n=e.value?((b=u.value)==null?void 0:b.minPrice)&&B(u==null?void 0:u.value.minPrice,6):((c=u.value)==null?void 0:c.maxPrice)&&B(1/(u==null?void 0:u.value.maxPrice),6),r=e.value?((I=u.value)==null?void 0:I.maxPrice)&&B((L=u.value)==null?void 0:L.maxPrice,6):((V=u.value)==null?void 0:V.minPrice)&&B(1/(u==null?void 0:u.value.minPrice),6),d=(k.value?!e.value:e.value)?B((j=u.value)==null?void 0:j.price,6):B(1/((G=u.value)==null?void 0:G.price),6);let f={};return f[n]={label:"Min Price"},f[r]={label:"Max Price"},d>n&&d<r?f[d]={label:"Current Price"}:d<n?f[Number(n)+1e-9]={label:"Current Price"}:d>r&&(f[Number(r)-1e-9]={label:"Current Price"}),f}),s=y(()=>{var r,d;return(k.value?!e.value:e.value)?Re((r=u.value)==null?void 0:r.price,6):Re(1/((d=u.value)==null?void 0:d.price),6)}),m=y(()=>{var r,d;return(k.value?!e.value:e.value)?Re((r=u.value)==null?void 0:r.price,6):Re(1/((d=u.value)==null?void 0:d.price),6)});return{direct:e,positionInfo:u,needReverse:k,getCoinIcon:g,decimalUi:Re,addCommom:R,sFixD:B,marks:A,currentPrice:s,currentPriceResever:m}}});const No=e=>(Ee("data-v-d45875e4"),e=e(),We(),e),zt={class:"v2-position-range"},Gt={class:"position-range-top"},Zt=No(()=>o("div",null,"Position Range",-1)),Jt={class:"base-coin"},Qt={key:0},Kt={alt:""},xt={key:1},es={alt:""},os={key:2},ns={key:3},ts=No(()=>o("p",null,"Base coin",-1)),ss={class:"coin-rate"},as=No(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),ls=No(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),is=[as,ls],us={class:"position-range-bottom"},rs={class:"price-range"},ds={class:"price-range-bg"},vs={key:0,class:"min-price"},ms={key:0},ps={key:1},cs={key:1,class:"max-price"},fs={key:0},ys={key:1},gs={key:0,class:"min-price"},bs={key:0},ks={key:1},hs={key:1,class:"max-price"},_s={key:0},$s={key:1};function Is(e,t,X,H,N,$){var A,s,m,n,r,d,f,b,c,I,L,V,j,G,te,h,_,Y,z,Q,se,M,Z,ne,le,ve,q,P;const u=go,k=to("Slider"),g=Io("image");return a(),p("div",zt,[o("div",Gt,[Zt,o("div",Jt,[e.needReverse?(a(),p("div",xt,[Ie(o("img",es,null,512),[[g,e.direct?e.getCoinIcon((b=e.positionInfo)==null?void 0:b.token_b):e.getCoinIcon((f=e.positionInfo)==null?void 0:f.token_a)]]),F(u,{address:e.direct?(V=(L=e.positionInfo)==null?void 0:L.token_b)==null?void 0:V.address:(I=(c=e.positionInfo)==null?void 0:c.token_a)==null?void 0:I.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])):(a(),p("div",Qt,[Ie(o("img",Kt,null,512),[[g,e.direct?e.getCoinIcon((A=e.positionInfo)==null?void 0:A.token_a):e.getCoinIcon((s=e.positionInfo)==null?void 0:s.token_b)]]),F(u,{address:e.direct?(n=(m=e.positionInfo)==null?void 0:m.token_a)==null?void 0:n.address:(d=(r=e.positionInfo)==null?void 0:r.token_b)==null?void 0:d.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])),e.needReverse?(a(),p("span",ns,i(e.direct?(Y=(_=e.positionInfo)==null?void 0:_.token_b)==null?void 0:Y.symbol:(Q=(z=e.positionInfo)==null?void 0:z.token_a)==null?void 0:Q.symbol),1)):(a(),p("span",os,i(e.direct?(G=(j=e.positionInfo)==null?void 0:j.token_a)==null?void 0:G.symbol:(h=(te=e.positionInfo)==null?void 0:te.token_b)==null?void 0:h.symbol),1)),ts,o("div",ss,[o("div",{onClick:t[0]||(t[0]=U=>e.direct=!e.direct)},is)])])]),o("div",us,[o("div",rs,[o("div",ds,[e.direct?(a(),O(k,{key:0,value:e.currentPrice,class:we(["position-slider",e.currentPrice<Number(("sFixD"in e?e.sFixD:T(B))((se=e.positionInfo)==null?void 0:se.minPrice,6))||e.currentPrice>Number(("sFixD"in e?e.sFixD:T(B))((M=e.positionInfo)==null?void 0:M.maxPrice,6))?"hide-handler":""]),step:null,marks:e.marks,disabled:!0,min:Number(("decimalUi"in e?e.decimalUi:T(Re))((Z=e.positionInfo)==null?void 0:Z.minPrice,6)),max:Number(("decimalUi"in e?e.decimalUi:T(Re))((ne=e.positionInfo)==null?void 0:ne.maxPrice,6))},{mark:oe(({label:U})=>{var ye,pe,w,x,Pe,Ae,qe,Me,Oe,$e,Fe,Ne;return[U=="Min Price"?(a(),p("div",vs,[o("div",null,i(U),1),e.direct?(a(),p("div",ms,i(((ye=e.positionInfo)==null?void 0:ye.minPrice)&&("sFixD"in e?e.sFixD:T(B))((pe=e.positionInfo)==null?void 0:pe.minPrice,6)),1)):(a(),p("div",ps,i(((w=e.positionInfo)==null?void 0:w.maxPrice)&&("sFixD"in e?e.sFixD:T(B))(1/((x=e.positionInfo)==null?void 0:x.maxPrice),6)),1))])):E("",!0),U=="Max Price"?(a(),p("div",cs,[o("div",null,i(U),1),e.direct?(a(),p("div",fs,i(((Pe=e.positionInfo)==null?void 0:Pe.maxPrice)&&("sFixD"in e?e.sFixD:T(B))((Ae=e.positionInfo)==null?void 0:Ae.maxPrice,6)),1)):(a(),p("div",ys,i(((qe=e.positionInfo)==null?void 0:qe.minPrice)&&("sFixD"in e?e.sFixD:T(B))(1/((Me=e.positionInfo)==null?void 0:Me.minPrice),6)),1))])):E("",!0),U=="Current Price"?(a(),p("div",{key:2,class:we(["current-price",e.currentPrice<Number(("sFixD"in e?e.sFixD:T(B))((Oe=e.positionInfo)==null?void 0:Oe.minPrice,6))?"current-price-left":e.currentPrice>Number(("sFixD"in e?e.sFixD:T(B))(($e=e.positionInfo)==null?void 0:$e.maxPrice,6))?"current-price-right":""])},[o("div",null,i(U),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(a(),p(Ce,{key:0},[fe(i(("addCommom"in e?e.addCommom:T(R))(("decimalUi"in e?e.decimalUi:T(Re))((Fe=e.positionInfo)==null?void 0:Fe.price,6))),1)],64)):(a(),p(Ce,{key:1},[fe(i(("addCommom"in e?e.addCommom:T(R))(("decimalUi"in e?e.decimalUi:T(Re))(1/((Ne=e.positionInfo)==null?void 0:Ne.price),6))),1)],64))])],2)):E("",!0)]}),_:1},8,["value","class","marks","min","max"])):(a(),O(k,{key:1,value:e.currentPriceResever,class:we(["position-slider",e.currentPriceResever<Number(("sFixD"in e?e.sFixD:T(B))(1/((le=e.positionInfo)==null?void 0:le.maxPrice),6))||e.currentPriceResever>Number(("sFixD"in e?e.sFixD:T(B))(1/((ve=e.positionInfo)==null?void 0:ve.minPrice),6))?"hide-handler":""]),step:null,min:Number(("decimalUi"in e?e.decimalUi:T(Re))(1/((q=e.positionInfo)==null?void 0:q.maxPrice),6)),max:Number(("decimalUi"in e?e.decimalUi:T(Re))(1/((P=e.positionInfo)==null?void 0:P.minPrice),6)),marks:e.marks,disabled:!0},{mark:oe(({label:U})=>{var ye,pe,w,x,Pe,Ae,qe,Me,Oe,$e,Fe,Ne;return[U=="Min Price"?(a(),p("div",gs,[o("div",null,i(U),1),e.direct?(a(),p("div",bs,i(((ye=e.positionInfo)==null?void 0:ye.minPrice)&&("sFixD"in e?e.sFixD:T(B))((pe=e.positionInfo)==null?void 0:pe.minPrice,6)),1)):(a(),p("div",ks,i(((w=e.positionInfo)==null?void 0:w.maxPrice)&&("sFixD"in e?e.sFixD:T(B))(1/((x=e.positionInfo)==null?void 0:x.maxPrice),6)),1))])):E("",!0),U=="Max Price"?(a(),p("div",hs,[o("div",null,i(U),1),e.direct?(a(),p("div",_s,i(((Pe=e.positionInfo)==null?void 0:Pe.maxPrice)&&("sFixD"in e?e.sFixD:T(B))((Ae=e.positionInfo)==null?void 0:Ae.maxPrice,6)),1)):(a(),p("div",$s,i(((qe=e.positionInfo)==null?void 0:qe.minPrice)&&("sFixD"in e?e.sFixD:T(B))(1/((Me=e.positionInfo)==null?void 0:Me.minPrice),6)),1))])):E("",!0),U=="Current Price"?(a(),p("div",{key:2,class:we(["current-price current-price-direct",e.currentPriceResever<Number(("sFixD"in e?e.sFixD:T(B))(1/((Oe=e.positionInfo)==null?void 0:Oe.maxPrice),6))?"current-price-left":e.currentPriceResever>Number(("sFixD"in e?e.sFixD:T(B))(1/(($e=e.positionInfo)==null?void 0:$e.minPrice),6))?"current-price-right":""])},[o("div",null,i(U),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(a(),p(Ce,{key:0},[fe(i(("addCommom"in e?e.addCommom:T(R))(("decimalUi"in e?e.decimalUi:T(Re))((Fe=e.positionInfo)==null?void 0:Fe.price,6))),1)],64)):(a(),p(Ce,{key:1},[fe(i(("addCommom"in e?e.addCommom:T(R))(("decimalUi"in e?e.decimalUi:T(Re))(1/((Ne=e.positionInfo)==null?void 0:Ne.price),6))),1)],64))])],2)):E("",!0)]}),_:1},8,["value","class","min","max","marks"]))])])])])}const nn=Ue(Yt,[["render",Is],["__scopeId","data-v-d45875e4"]]),ws=He({components:{Modal:To},props:{positionInfo:{type:Object,default:()=>({})}},setup(e){const t=y(()=>{var u,k;const $=Math.ceil(((u=e.positionInfo)==null?void 0:u.poolUSD)/((k=e.positionInfo)==null?void 0:k.quoteUSD)*100);return Number($)}),X=Ke(),H=y(()=>X),N=y(()=>{var $,u;return H.value.apyObj&&((u=H.value.apyObj[($=e.positionInfo)==null?void 0:$.id])==null?void 0:u.tvl)||"--"});return{sFixD:B,addCommom:R,ratio:t,tvl:N}}});const Ho=e=>(Ee("data-v-654fad62"),e=e(),We(),e),Cs=Ho(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),As={class:"deposit-slider"},Ps={class:"info-block"},Ss=Ho(()=>o("div",{class:"leabl"},"Current Depositï¼š",-1)),Ts={class:"text"},Rs={class:"info-block"},qs=Ho(()=>o("div",{class:"leabl"},"Max Capacityï¼š",-1)),Ns={class:"text"};function Ls(e,t,X,H,N,$){const u=to("Modal");return a(),O(u,{width:"440px",visible:!0,footer:null,title:"Vault Capacity",onCancel:t[0]||(t[0]=k=>e.$emit("onClose"))},{closeIcon:oe(()=>[Cs]),default:oe(()=>{var k,g,A,s;return[o("div",As,[o("div",{class:"current-deposit",style:Uo({width:`${e.ratio>100?100:e.ratio}%`})},null,4)]),o("div",Ps,[Ss,o("div",Ts,i(("addCommom"in e?e.addCommom:T(R))(("sFixD"in e?e.sFixD:T(B))((k=e.positionInfo)==null?void 0:k.currentDeposit,2)))+" "+i((g=e.positionInfo)==null?void 0:g.quoteCoinInfo.symbol),1)]),o("div",Rs,[qs,o("div",Ns,i(("addCommom"in e?e.addCommom:T(R))(("sFixD"in e?e.sFixD:T(B))((A=e.positionInfo)==null?void 0:A.quoteUSD,2)))+" "+i((s=e.positionInfo)==null?void 0:s.quoteCoinInfo.symbol),1)])]}),_:1})}const tn=Ue(ws,[["render",Ls],["__scopeId","data-v-654fad62"]]),Bs=He({components:{AutoPoolV2PoolCapacity:tn},setup(){const e=xe(),t=y(()=>e),X=Ke(),H=y(()=>X),N=Qe(),$=C();_e(()=>[H.value.positionInfoObj,N.params.id],([m,n])=>{m&&!Ye(m)&&n&&($.value=m[n])},{immediate:!0,deep:!0});const u=y(()=>{var m;return(m=$.value)==null?void 0:m.needReverse}),k=m=>{var n;return(m==null?void 0:m.logoURI)||(m==null?void 0:m.logo_url)||((n=t.value.tokensObj[m==null?void 0:m.address])==null?void 0:n.logo_url)||Je("/image/coins/sui-unknown.png")},g=y(()=>H.value.autoPoolLoading),A=C(!1),s=y(()=>{var m,n;return H.value.apyObj&&((n=H.value.apyObj[(m=$.value)==null?void 0:m.id])==null?void 0:n.tvl)||0});return{needReverse:u,positionInfo:$,getCoinIcon:k,addCommom:R,isShowModal:A,autoPoolLoading:g,tvl:s}}});const Os=e=>(Ee("data-v-02f21a44"),e=e(),We(),e),Ds={class:"pool-composition"},Us={class:"pool-composition-top"},Ms=Os(()=>o("span",null,"Vault Composition",-1)),Fs={class:"pool-composition-bottom"},Vs={class:"token-ratio"},js={class:"before-coin"},Hs={alt:""},Es={class:"after-coin"},Ws={alt:""},Xs={class:"token-num"},Ys={class:"num-box"},zs={class:"num-box"};function Gs(e,t,X,H,N,$){var s,m,n,r,d,f,b,c,I,L,V,j,G,te,h,_,Y,z,Q,se,M,Z,ne,le,ve,q,P,U,ye;const u=go,k=wo,g=tn,A=Io("image");return a(),p("div",Ds,[o("div",Us,[Ms,Number((s=e.positionInfo)==null?void 0:s.quoteUSD)>0?(a(),p("div",{key:0,class:"pool-capacity",onClick:t[0]||(t[0]=pe=>e.isShowModal=!0)},"Vault Capacity")):E("",!0)]),o("div",Fs,[o("div",Vs,[o("div",js,[o("div",null,[F(u,{address:e.needReverse?(d=(r=e.positionInfo)==null?void 0:r.token_b)==null?void 0:d.address:(n=(m=e.positionInfo)==null?void 0:m.token_a)==null?void 0:n.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"]),Ie(o("img",Hs,null,512),[[A,e.needReverse?e.getCoinIcon((b=e.positionInfo)==null?void 0:b.token_b):e.getCoinIcon((f=e.positionInfo)==null?void 0:f.token_a)]])]),o("span",null,[e.autoPoolLoading?(a(),O(k,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),p(Ce,{key:0},[fe(i((c=e.positionInfo)==null?void 0:c.poolCoinARatio)+"% ",1)],64))])]),o("div",Es,[o("span",null,[e.autoPoolLoading?(a(),O(k,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),p(Ce,{key:0},[fe(i((I=e.positionInfo)==null?void 0:I.poolCoinBRatio)+"% ",1)],64))]),o("div",null,[Ie(o("img",Ws,null,512),[[A,e.needReverse?e.getCoinIcon((V=e.positionInfo)==null?void 0:V.token_a):e.getCoinIcon((L=e.positionInfo)==null?void 0:L.token_b)]]),F(u,{address:e.needReverse?(h=(te=e.positionInfo)==null?void 0:te.token_a)==null?void 0:h.address:(G=(j=e.positionInfo)==null?void 0:j.token_b)==null?void 0:G.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])])])]),o("div",Xs,[o("div",{class:"token-a-bg",style:Uo({width:`${(_=e.positionInfo)==null?void 0:_.poolCoinARatio}%`})},null,4),o("div",{class:"token-b-bg",style:Uo({width:`${(Y=e.positionInfo)==null?void 0:Y.poolCoinBRatio}%`})},null,4),o("div",Ys,[e.autoPoolLoading?(a(),O(k,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),p(Ce,{key:0},[o("div",null,i(("addCommom"in e?e.addCommom:T(R))((z=e.positionInfo)==null?void 0:z.poolCoinANum))+" "+i(e.needReverse?(Z=(M=e.positionInfo)==null?void 0:M.token_b)==null?void 0:Z.symbol:(se=(Q=e.positionInfo)==null?void 0:Q.token_a)==null?void 0:se.symbol),1),o("div",null,"$"+i(("addCommom"in e?e.addCommom:T(R))((ne=e.positionInfo)==null?void 0:ne.poolCoinAUSD)),1)],64))]),o("div",zs,[e.autoPoolLoading?(a(),O(k,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),p(Ce,{key:0},[o("div",null,i(("addCommom"in e?e.addCommom:T(R))((le=e.positionInfo)==null?void 0:le.poolCoinBNum))+" "+i(e.needReverse?(U=(P=e.positionInfo)==null?void 0:P.token_a)==null?void 0:U.symbol:(q=(ve=e.positionInfo)==null?void 0:ve.token_b)==null?void 0:q.symbol),1),o("div",null,"$"+i(("addCommom"in e?e.addCommom:T(R))((ye=e.positionInfo)==null?void 0:ye.poolCoinBUSD)),1)],64))])])]),e.isShowModal?(a(),O(g,{key:0,"position-info":e.positionInfo,onOnClose:t[1]||(t[1]=pe=>e.isShowModal=!1)},null,8,["position-info"])):E("",!0)])}const sn=Ue(Bs,[["render",Gs],["__scopeId","data-v-02f21a44"]]),Zs=He({setup(){const e=xe(),t=y(()=>e),X=Ke(),H=y(()=>X),N=Qe(),$=C();_e(()=>[H.value.positionInfoObj,N.params.id],([m,n])=>{m&&!Ye(m)&&n&&($.value=m[n])},{immediate:!0,deep:!0});const u=y(()=>{var m;return(m=$.value)==null?void 0:m.needReverse}),k=m=>{var n;return(m==null?void 0:m.logoURI)||(m==null?void 0:m.logo_url)||((n=t.value.tokensObj[m==null?void 0:m.address])==null?void 0:n.logo_url)||Je("/image/coins/sui-unknown.png")},g=qo(),A=y(()=>g),s=y(()=>H.value.autoPoolLoading);return{needReverse:u,positionInfo:$,getCoinIcon:k,addCommom:R,wallet:A,autoPoolLoading:s}}});const Co=e=>(Ee("data-v-3cde2b77"),e=e(),We(),e),Js={class:"my-liquidity"},Qs={class:"my-liquidity-top"},Ks=Co(()=>o("div",null,"My Liquidity",-1)),xs=Co(()=>o("p",null,"My share of pool",-1)),ea={class:"my-liquidity-bottom"},oa={class:"lp-token"},na=Co(()=>o("div",null,[o("span",null,"LP Token BalanceÂ ")],-1)),ta={class:"lp-balance"},sa={class:"token-num-content"},aa={class:"token-num token-a-num"},la={class:"logo"},ia=["src"],ua={class:"text"},ra={class:"lp-logo"},da=["src"],va=Co(()=>o("div",null,"Pooled Assets",-1)),ma={class:"token-num"},pa={class:"logo"},ca=["src"],fa={class:"text"},ya=Co(()=>o("div",{class:"token-num-content-bg"},null,-1));function ga(e,t,X,H,N,$){var g,A,s,m,n,r,d,f,b,c,I,L,V,j,G,te,h,_,Y,z,Q,se,M,Z,ne,le,ve,q,P;const u=wo,k=go;return a(),p("div",Js,[o("div",Qs,[Ks,o("div",null,[xs,o("p",null,[e.autoPoolLoading?(a(),O(u,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),p(Ce,{key:0},[fe(i(e.wallet.connected?(g=e.positionInfo)==null?void 0:g.myShare:"--")+"%",1)],64))])])]),o("div",ea,[o("div",oa,[na,o("div",null,[e.autoPoolLoading?(a(),O(u,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),p(Ce,{key:0},[o("span",ta,i(e.wallet.connected?("addCommom"in e?e.addCommom:T(R))((A=e.positionInfo)==null?void 0:A.myLiquidity):"--")+" LP",1),o("span",null,i(e.wallet.connected?((s=e.positionInfo)==null?void 0:s.myLiquidityUSD)!=="<0.01"?`$${("addCommom"in e?e.addCommom:T(R))((m=e.positionInfo)==null?void 0:m.myLiquidityUSD)}`:"<$0.01":"--"),1)],64))])]),o("div",sa,[o("div",aa,[o("div",la,[o("img",{src:e.needReverse?e.getCoinIcon((r=e.positionInfo)==null?void 0:r.token_b):e.getCoinIcon((n=e.positionInfo)==null?void 0:n.token_a),alt:""},null,8,ia),F(k,{address:e.needReverse?(c=(b=e.positionInfo)==null?void 0:b.token_b)==null?void 0:c.address:(f=(d=e.positionInfo)==null?void 0:d.token_a)==null?void 0:f.address,"style-params":{width:"14px",height:"14px",left:"18px",bottom:"0"}},null,8,["address"])]),o("div",ua,[e.autoPoolLoading?(a(),O(u,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),p(Ce,{key:0},[o("div",null,i(e.wallet.connected?("addCommom"in e?e.addCommom:T(R))((I=e.positionInfo)==null?void 0:I.amountA):"--")+" "+i(e.needReverse?(G=(j=e.positionInfo)==null?void 0:j.token_b)==null?void 0:G.symbol:(V=(L=e.positionInfo)==null?void 0:L.token_a)==null?void 0:V.symbol),1),o("div",null,i(e.wallet.connected?("addCommom"in e?e.addCommom:T(R))((te=e.positionInfo)==null?void 0:te.myAmountAUSD):"--"),1)],64))])]),o("div",ra,[o("img",{src:e.getCoinIcon((h=e.positionInfo)==null?void 0:h.lpInfo),alt:""},null,8,da),va]),o("div",ma,[o("div",pa,[o("img",{src:e.needReverse?e.getCoinIcon((Y=e.positionInfo)==null?void 0:Y.token_a):e.getCoinIcon((_=e.positionInfo)==null?void 0:_.token_b),alt:""},null,8,ca),F(k,{address:e.needReverse?(M=(se=e.positionInfo)==null?void 0:se.token_a)==null?void 0:M.address:(Q=(z=e.positionInfo)==null?void 0:z.token_b)==null?void 0:Q.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])]),o("div",fa,[e.autoPoolLoading?(a(),O(u,{key:1,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):(a(),p(Ce,{key:0},[o("div",null,i(e.wallet.connected?("addCommom"in e?e.addCommom:T(R))((Z=e.positionInfo)==null?void 0:Z.amountB):"--")+" "+i(e.needReverse?(q=(ve=e.positionInfo)==null?void 0:ve.token_a)==null?void 0:q.symbol:(le=(ne=e.positionInfo)==null?void 0:ne.token_b)==null?void 0:le.symbol),1),o("div",null,i(e.wallet.connected?("addCommom"in e?e.addCommom:T(R))((P=e.positionInfo)==null?void 0:P.myAmountBUSD):"--"),1)],64))])]),ya])])])}const an=Ue(Zs,[["render",ga],["__scopeId","data-v-3cde2b77"]]),ba=He({components:{Modal:To},props:{poolInfo:{type:Object,default:()=>({})},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},totalAmount:{type:String,default:""},shareOfPool:{type:String,default:""},minimumReceivedLP:{type:String,default:""},isOnlyA:{type:Boolean,default:!1},isOnlyB:{type:Boolean,default:!1}},setup(e,t){const{t:X}=_o(),H=y(()=>{var n,r,d;return((n=e==null?void 0:e.poolInfo)==null?void 0:n.needReverse)||((d=(r=e==null?void 0:e.poolInfo)==null?void 0:r.poolInfo)==null?void 0:d.needReverse)}),N=xe(),$=y(()=>N),u=yo(),k=y(()=>u),g=n=>{var r;return(n==null?void 0:n.logoURI)||(n==null?void 0:n.logo_url)||((r=$.value.tokensObj[n==null?void 0:n.address])==null?void 0:r.logo_url)||(k.value.theme==="default"?Je("/image/coins/unknown.png"):Je("/image/coins/sui-unknown.png"))},A=Qe(),s=C(!1);return{needReverse:H,getCoinIcon:g,addCommom:R,t:X,route:A,checked:s,decimalUi:Re,clickSubmit:()=>{t.emit("toAdd")}}}});const Lo=e=>(Ee("data-v-9d7ef3bf"),e=e(),We(),e),ka=Lo(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),ha={class:"modal-content"},_a={class:"pool-info"},$a={class:"left"},Ia={alt:""},wa={alt:""},Ca={class:"pool-name"},Aa={class:"right"},Pa={class:"coin-info"},Sa={key:0,class:"from-coin-info"},Ta={class:"left"},Ra={class:"coin-amount"},qa={class:"coin-symbol"},Na={class:"right"},La={key:1,class:"to-coin-info"},Ba={class:"left"},Oa={class:"coin-amount"},Da={class:"coin-symbol"},Ua={class:"right"},Ma={key:0,class:"to-swap-logo"},Fa={class:"add-info"},Va={class:"total-amount"},ja=Lo(()=>o("span",null,"Total Amount",-1)),Ha={class:"total-amount"},Ea=Lo(()=>o("span",null,"Share of Pool",-1)),Wa={key:0,class:"total-amount"},Xa=Lo(()=>o("span",null,"Minimum Received LP",-1));function Ya(e,t,X,H,N,$){const u=go,k=$o,g=to("Modal"),A=Io("image");return a(),O(g,{width:"440px",visible:!0,footer:null,title:"Add Liquidity",onCancel:t[0]||(t[0]=s=>e.$emit("onClose"))},{closeIcon:oe(()=>[ka]),default:oe(()=>{var s,m,n,r,d,f,b,c,I,L,V,j,G,te,h,_,Y,z,Q,se,M,Z,ne,le;return[o("div",ha,[o("div",_a,[o("div",$a,[o("div",null,[Ie(o("img",Ia,null,512),[[A,e.needReverse?(r=(n=e.poolInfo)==null?void 0:n.token_b)==null?void 0:r.logo_url:(m=(s=e.poolInfo)==null?void 0:s.token_a)==null?void 0:m.logo_url]]),F(u,{address:e.needReverse?(c=(b=e.poolInfo)==null?void 0:b.token_b)==null?void 0:c.address:(f=(d=e.poolInfo)==null?void 0:d.token_a)==null?void 0:f.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),o("div",null,[Ie(o("img",wa,null,512),[[A,e.needReverse?(j=(V=e.poolInfo)==null?void 0:V.token_a)==null?void 0:j.logo_url:(L=(I=e.poolInfo)==null?void 0:I.token_b)==null?void 0:L.logo_url]]),F(u,{address:e.needReverse?(_=(h=e.poolInfo)==null?void 0:h.token_a)==null?void 0:_.address:(te=(G=e.poolInfo)==null?void 0:G.token_b)==null?void 0:te.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),o("div",Ca,[o("span",null,i(e.needReverse?(se=(Q=e.poolInfo)==null?void 0:Q.token_b)==null?void 0:se.symbol:(z=(Y=e.poolInfo)==null?void 0:Y.token_a)==null?void 0:z.symbol),1),fe(" - "),o("span",null,i(e.needReverse?(le=(ne=e.poolInfo)==null?void 0:ne.token_a)==null?void 0:le.symbol:(Z=(M=e.poolInfo)==null?void 0:M.token_b)==null?void 0:Z.symbol),1)])]),o("div",Aa,[fe(" Fee tier "),o("span",null,i(e.poolInfo&&e.poolInfo.fee*100)+"%",1)])]),o("div",Pa,[e.isOnlyA||!e.isOnlyA&&!e.isOnlyB?(a(),p("div",Sa,[o("div",Ta,[o("div",Ra,i(("addCommom"in e?e.addCommom:T(R))(e.fromCoinAmount)||0),1),o("div",qa,i(e.fromCoin&&e.fromCoin.symbol),1)]),o("div",Na,[Ie(o("img",null,null,512),[[A,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),F(u,{address:e.fromCoin&&e.fromCoin.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])])])):E("",!0),e.isOnlyB||!e.isOnlyA&&!e.isOnlyB?(a(),p("div",La,[o("div",Ba,[o("div",Oa,i(("addCommom"in e?e.addCommom:T(R))(e.toCoinAmount)||0),1),o("div",Da,i(e.toCoin&&e.toCoin.symbol),1)]),o("div",Ua,[Ie(o("img",null,null,512),[[A,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),F(u,{address:e.toCoin&&e.toCoin.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),!e.isOnlyA&&!e.isOnlyB?(a(),p("div",Ma)):E("",!0)])):E("",!0)]),o("div",Fa,[o("div",Va,[ja,o("span",null,i(Number(e.totalAmount)>0&&Number(e.totalAmount)<.01?"<$0.01":`$${("addCommom"in e?e.addCommom:T(R))(e.totalAmount,2)}`),1)]),o("div",Ha,[Ea,o("span",null,i(e.shareOfPool)+"%",1)]),e.minimumReceivedLP?(a(),p("div",Wa,[Xa,o("span",null,i(("addCommom"in e?e.addCommom:T(R))(e.minimumReceivedLP))+" "+i(e.fromCoin.symbol)+"-"+i(e.toCoin.symbol),1)])):E("",!0)])]),F(k,{class:"big-btn liquidity-btn",onClick:e.clickSubmit},{default:oe(()=>[fe(" Add Liquidity ")]),_:1},8,["onClick"])]}),_:1})}const ln=Ue(ba,[["render",Ya],["__scopeId","data-v-9d7ef3bf"]]),za=""+globalThis.__publicAssetsURL("image/icon-tips-error@2x.png");const Ga={},un=e=>(Ee("data-v-fcbc716b"),e=e(),We(),e),Za={class:"status"},Ja=un(()=>o("img",{src:za,alt:""},null,-1)),Qa=un(()=>o("span",null,"Rebalancing is in processing. New deposits and withdraws are paused and will be back in minutes. ",-1)),Ka=[Ja,Qa];function xa(e,t){return a(),p("div",Za,Ka)}const rn=Ue(Ga,[["render",xa],["__scopeId","data-v-fcbc716b"]]),el=He({components:{AutoPoolAddModal:ln,AutoPoolV2PoolStatus:rn},setup(){const e=qo(),t=C(!1),X=yo(),H=y(()=>X),N=y(()=>H.value.chainName),$=y(()=>e),u=Ke(),k=y(()=>u),g=xe(),A=y(()=>g),s=C(),m=Qe(),n=C(!1),r=C(!1);_e(()=>[k.value.positionInfoObj,m.params.id],([S,ee])=>{S&&!Ye(S)&&ee&&(s.value=S[ee])},{immediate:!0,deep:!0});const d=y(()=>{var S;return(S=s.value)==null?void 0:S.needReverse}),f=C(),b=C(),c=C(),I=C(),L=C(!0),V=y(()=>$.value.assets&&f.value&&$.value.assets[f.value.address]?Xo($.value.assets[f.value.address].balance,f.value.decimals):0),j=y(()=>$.value.assets&&b.value&&$.value.assets[b.value.address]?Xo($.value.assets[b.value.address].balance,b.value.decimals):0),G=S=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-add.vue:358 ~ maxBtnSelect ~ maxBtnSelect:",f.value.symbol=="SUI",b.value.symbol=="SUI",S),S==="fromCoin"?(L.value=!0,c.value=V.value>0?f.value.symbol=="SUI"?new v(Number(V.value)).sub(new v(.05)).lt(new v(0))?"0":new v(Number(V.value)).sub(new v(.5)).toString():String(V.value):""):(L.value=!1,I.value=j.value>0?b.value.symbol=="SUI"?new v(Number(j.value)).sub(new v(.05)).lt(new v(0))?"0":new v(Number(j.value)).sub(new v(.5)).toString():String(j.value):"")},te=S=>{S==="fromCoin"?(L.value=!0,c.value=V.value>0?B(new v(Number(V.value)).div(2).toString(),f.value.decimals).toString():""):(L.value=!1,I.value=j.value>0?B(new v(Number(j.value)).div(2).toString(),b.value.decimals).toString():"")},h=y(()=>N.value?Jo(N.value):{}),_=y(()=>k.value.slippage),Y=C("--"),z=C("--"),Q=S=>{const ee=new v(s.value.autoPoolPositionInfo.liquidity),ke=new v(S.toString());if(ee.toNumber()>0&&ke.toNumber()>0){const J=ke.add(ee),Se=ke.div(J).mul(100).toNumber(),l=In(Se),D=l==-1?2:l+2,me=B(ke.div(J).mul(100).toNumber(),D),K=new v(1).div(new v(Math.pow(10,s.value.lpInfo.decimals))).toString();Number(me)<Number(K)?Y.value=`<${K}`:Y.value=me}else ke.toNumber()>0&&ee.toNumber()<=0?Y.value="100":Y.value="--"},se=S=>{if(s.value.total_supply==0){z.value="";return}new v(S.toString());const ee=new v(_.value).div(100),ke=Fo.get_lp_amount_by_liquidity({liquidity:s.value.liquidity,total_supply:s.value.total_supply},S.toString()),J=new v(Math.pow(10,s.value.lpInfo.decimals)),Se=new v(ke).div(J).toString(),l=new v(Se).mul(ee),D=new v(Se).sub(l);z.value=B(D.toString(),s.value.decimals)},M=C(!1),Z=C(!1),ne=C(""),le=C(),ve=C(!1),q=C(!1),P=C(!1),U=C(!1),ye=S=>{if(S=="Haedal")return"Haedal";if(S=="Volo")return"Volo";if(S=="aftermath")return"Aftermath"},pe=async()=>{if(!s.value)return;if(s.value.supportHaedalStake&&U.value&&I.value<10){q.value=!0;return}if(P.value&&Number(c.value)==0)return;r.value=!1,ve.value=!0;const S=s.value.autoPoolPositionInfo.tick_lower_index,ee=s.value.autoPoolPositionInfo.tick_upper_index,ke=Ze.sqrtPriceX64ToTickIndex(new ge(s.value.current_sqrt_price));Ze.tickIndexToSqrtPriceX64(S),Ze.tickIndexToSqrtPriceX64(ee),ke<S&&(d.value?M.value=!0:Z.value=!0),ke>ee&&(d.value?Z.value=!0:M.value=!0);let J;if(c.value||I.value){L.value?J=new v(c.value).mul(Math.pow(10,f.value.decimals)).toString():J=new v(I.value).mul(Math.pow(10,b.value.decimals)).toString();let Se,l=L.value;if(P.value||U.value){const de=new v(1);if(new v(J).lte(de))return r.value=!0,!1;console.log("1106###calculateDepositSwapAmount###params###",{lowerTick:S,upperTick:ee,curSqrtPrice:new ge(s.value.current_sqrt_price),fix_amount_a:l,input_amount:J,coinTypeA:s.value.autoPoolPositionInfo.coinTypeA,coinTypeB:s.value.autoPoolPositionInfo.coinTypeB,clmm_pool:s.value.address,slippage:Number(_.value)/100,decimals:P.value?f.value.decimals:b.value.decimals,use_Haedal_stake:s.value.supportHaedalStake&&U.value,shouldRequestStake:!1});let W;try{W=await lo.calculateDepositSwapAmount({lowerTick:S,upperTick:ee,curSqrtPrice:new ge(s.value.current_sqrt_price),fix_amount_a:l,input_amount:J,coinTypeA:s.value.autoPoolPositionInfo.coinTypeA,coinTypeB:s.value.autoPoolPositionInfo.coinTypeB,clmm_pool:s.value.address,slippage:Number(_.value)/100,decimals:P.value?f.value.decimals:b.value.decimals,request_id:J,stakeProtocol:s.value.supportHaedalStake&&(U.value&&!s.value.isTokenA||P.value&&s.value.isTokenA)?s.value.stakeProtocol:"",shouldRequestStake:!1})}catch(re){console.log("calculateDepositSwapAmount",re)}if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-add.vue:627 ~ updateAmounts ~ swapResult:",W),W=="HaedalStakeSuiAmountError"){n.value=!1,q.value=!0;return}else if(W){if(W.request_id!==J)return;q.value=!1,n.value=s.value.supportHaedalStake?!1:W.is_exceed,Se=new ge(W.afterSqrtPrice),J=W.fixAmountA===l?new ge(new v(J).sub(W.swapInAmount).toString()):new ge(W.swapOutAmount),le.value={swap_amount:W.swapInAmount,route_obj:W.route_obj,a2b:l,input_amount:J,stakeProtocol:W.stake_protocol},l=W.fixAmountA;const re=s.value.token_a.decimals,ie=s.value.token_b.decimals,ae=new v(W.swapInAmount).div(new v(Math.pow(10,re))).toString(),he=B(new v(W.swapOutAmountLimit).div(new v(Math.pow(10,ie))).toString(),ie),be=d.value?s.value.token_b.symbol:s.value.token_a.symbol,Te=d.value?s.value.token_a.symbol:s.value.token_b.symbol,oo=`By depositing ${R(P.value?c.value:I.value)} ${P.value?be:Te},
            ${R(ae)} ${P.value?be:Te}  will be traded for ${R(he)} ${P.value?Te:be} and then added to the pool together.`,Be=`By depositing ${R(I.value)} ${Te}, ${R(he)} ${Te} will be converted to ${be} via ${ye(s.value.stakeProtocol)} 
            liquid staking and added to the pool together.`;ne.value=s.value.supportHaedalStake&&U.value?Be:oo}else Se=s.value.current_sqrt_price,J=new ge(J)}else n.value=!1,Se=s.value.current_sqrt_price,J=new ge(J),ne.value="";let D,me,K;const ue=h.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:f.value,tokenB:b.value,lowerTick:S,upperTick:ee,coinAmount:J,iscoinA:l,roundUp:!0,slippage:Number(_.value)/100,curSqrtPrice:new ge(Se)});D=ue.liquidityAmount,me=ue.tokenMaxA,K=ue.tokenMaxB,!P.value&&!U.value&&(L.value?I.value=Number(K)>0?K:"":c.value=Number(me)>0?me:""),console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-add.vue:734 ~ updateAmounts ~ liquidityAmount:",D.toString),Q(D),se(D),ve.value=!1}};_e(()=>s.value,S=>{S&&!Ye(S)&&(f.value=S==null?void 0:S.token_a,b.value=S==null?void 0:S.token_b,M.value=!1,Z.value=!1,pe())},{immediate:!0});const w=y(()=>A.value.RATES),x=y(()=>{var S,ee,ke,J,Se,l,D,me;if((ee=w.value[(S=f.value)==null?void 0:S.address])!=null&&ee.price&&((J=w.value[(ke=b.value)==null?void 0:ke.address])!=null&&J.price)){const K=new v(c.value||0).mul(new v((l=w.value[(Se=f.value)==null?void 0:Se.address])==null?void 0:l.price)),ue=new v(I.value||0).mul(new v((me=w.value[(D=b.value)==null?void 0:D.address])==null?void 0:me.price));return K.add(ue).toString()}else return"--"});_e(()=>c.value,ho((S,ee)=>{S?pe():(Y.value="--",I.value="",z.value="--")},500),{immediate:!0}),_e(()=>I.value,ho((S,ee)=>{S?pe():(c.value="",Y.value="--",z.value="--")},500),{immediate:!0});const{t:Pe,locale:Ae}=_o(),qe=y(()=>{var S,ee;if(P.value||U.value){const ke=P.value?c.value:I.value,J=P.value?f.value:b.value;if((S=w.value[J==null?void 0:J.address])!=null&&S.price)return new v(ke||0).mul(new v((ee=w.value[J==null?void 0:J.address])==null?void 0:ee.price)).toNumber()}return 0}),Me=y(()=>{const S=Number(c.value)>Number(V.value),ee=Number(I.value)>Number(j.value);return!c.value&&!I.value?Pe("button.enterAmount"):s.value.supportHaedalStake&&U.value&&I.value<10?"Minimum deposit 10 SUI":S?Pe("button.insufficientBalance",{name:f.value.symbol}):ee?Pe("button.insufficientBalance",{name:b.value.symbol}):n.value?Pe("button.insufficientLiquidity"):Number(s.value.remainingTokenUSD)!==0&&Number(s.value.quoteUSD)>0&&Number(x.value)>Number(s.value.remainingTokenUSD)?"Exceeded the max capacity":r.value?Pe("button.enterAmount"):"Add Liquidity"}),Oe=y(()=>{const S=Number(c.value)>Number(V.value),ee=Number(I.value)>Number(j.value);return!!(!c.value&&!I.value||S||ee||c.value<=0&&I.value<=0||n.value||ze.value!=="STATUS_RUNNING"||Number(s.value.remainingTokenUSD)!==0&&Number(s.value.quoteUSD)>0&&Number(x.value)>Number(s.value.remainingTokenUSD)||r.value||s.value.supportHaedalStake&&!U.value&&qe.value>1e4||!s.value.supportHaedalStake&&qe.value>1e4||q.value||s.value.supportHaedalStake&&U.value&&I.value<10)}),$e=C(!1),{setIsShowSuccess:Fe,setIsShowRejected:Ne,setIsShowWaiting:ao,setTransactionDesc:ro,setTransactionTxid:eo,setPositiomNum:Le}=X,lo=Zo("Sui"),vo=async()=>{var K,ue,de,W;t.value=!1,$e.value=!0,eo("");const S=`${R(c.value)} ${(K=f.value)==null?void 0:K.symbol}`,ee=`${R(I.value)} ${(ue=b.value)==null?void 0:ue.symbol}`;ro(`Deposit ${c.value>0?S:""} ${I.value>0&&c.value>0?"and":""} ${I.value>0?ee:""}`),ao(!0);const ke=L.value,J=s.value.autoPoolPositionInfo.tick_lower_index,Se=s.value.autoPoolPositionInfo.tick_upper_index,l=Ze.sqrtPriceX64ToTickIndex(new ge(s.value.current_sqrt_price));let D;L.value?D=new v(c.value).mul(Math.pow(10,f.value.decimals)).toString():D=new v(I.value).mul(Math.pow(10,b.value.decimals)).toString();const me=(W=(de=s==null?void 0:s.value)==null?void 0:de.rewarderInfo)==null?void 0:W.map(re=>re.coinAddress);try{const re={lowerTick:J,upperTick:Se,coinAmount:D,fix_amount_a:ke,slippage:Number(_.value)/100,curSqrtPrice:new ge(s.value.current_sqrt_price),id:s.value.id,clmm_pool:s.value.autoPoolPositionInfo.clmm_pool_id,lp_token_type:s.value.lp_token_type,coinTypeA:s.value.autoPoolPositionInfo.coinTypeA,coinTypeB:s.value.autoPoolPositionInfo.coinTypeB,rewarder_coin_types:me,swapParams:le.value,isOnlyA:P.value,isOnlyB:U.value,currentTickIndex:l,decimal_b:s.value.coinB.decimals,request_id:D,stakeProtocol:s.value.supportHaedalStake&&(U.value&&!s.value.isTokenA||P.value&&s.value.isTokenA)?s.value.stakeProtocol:"",shouldRequestStake:s.value.supportHaedalStake&&U.value,farming_pool:s.value.autoPoolPositionInfo.pool_id};console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-add.vue:854 ~ toAdd ~ params.positionInfo.value.supportHaedalStake&&isOnlyB.value:",s.value.supportHaedalStake&&U.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-add.vue:1027 ~ toAdd ~ params:",re);const ie=await lo.deposit(re);console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-add.vue:858 ~ toAdd ~ payload:",ie);const ae=await h.value.signAndExecuteTransactionBlock($.value.currentWallet,ie);let he=h.value.handleTx(ae);if(console.log("toAdd###tx###",he),he&&he.hash){eo(he.hash),ao(!1),Fe(!0);const be={title:"Supplied",desc:`Deposit ${c.value>0?S:""} ${I.value>0&&c.value>0?"and":""} ${I.value>0?ee:""}`,hash:he.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deposit ${c.value>0?S:""} ${I.value>0&&c.value>0?"and":""} ${I.value>0?ee:""}`,isOnlyToken:P.value||U.value,isOnlyTokenInfo:P.value?f.value:b.value};N.value!=="Aptos"&&(be.res=he.res),h.value.showTransitionPending(be),await h.value.watchTransaction(be)&&setTimeout(()=>{u.updatePositionItem(s.value.id),h.value.getAccount($.value.address)},1e3),Le()}else ao(!1),Ne(!0);c.value="",I.value="",$e.value=!1}catch(re){c.value="",I.value="",console.log("addError###",re),$e.value=!1,ao(!1),Ne(!0)}},mo=S=>{c.value="",I.value="",ne.value="",q.value=!1,S=="only-a-b"?(P.value=!1,U.value=!1):S=="only-a"?(P.value=!0,U.value=!1):(U.value=!0,P.value=!1)},ze=y(()=>k.value.currentAutoPoolStatus),Ve=C(),Bo=()=>{Ve.value=window.setInterval(()=>{(c.value||I.value)&&pe()},2e4)};Ro(()=>{Bo()}),Vo(()=>{window.clearInterval(Ve.value)});const Oo=gn(bn,{style:{fontSize:"20px",color:"#75C8FF"},spin:!0}),ce="You can also choose to deposit in only one asset type. In that case,the vault will convert your asset to the required propositions using Cetus.Please note that trading fees & slippage will be applied. When slippage is involved,a certain amount of post-swap dust (no loss of funds) will be returned to you.",bo=y(()=>`When you deposit in only SUI tokens, a part of your SUI amount will be converted to ${f.value.symbol} via ${ye(s.value.stakeProtocol)} liquid staking services to match required liquidity compositions of the liquidity pool on Cetus. A certain amount of dust (no loss of funds) will be returned to you if slippage is involved.`),Do=y(()=>k.value.autoPoolLoading);return{currentAutoPoolStatus:ze,wallet:$,positionInfo:s,isShowAddModal:t,needReverse:d,fromCoin:f,toCoin:b,fromCoinAmount:c,toCoinAmount:I,fromCoinBlance:V,toCoinBlance:j,fixedFromCoin:L,maxBtnSelect:G,halfBtnSelect:te,totalAmountUSD:x,addCommom:R,shareOfPool:Y,minimumReceivedLP:z,addLiquidityBtnText:Me,addLiquidityBtnDisabled:Oe,toAdd:vo,showToCoinLock:Z,showFromCoinLock:M,isOnlyA:P,isOnlyB:U,onlyToken:mo,onlyText:ne,onlyTokenUSD:qe,calculateLoading:ve,indicator:Oo,depositTokenTips:ce,depositHaedalTokenTips:bo,loading:$e,autoPoolLoading:Do}}});const so=e=>(Ee("data-v-14c47ecb"),e=e(),We(),e),ol={class:"auto-pool-add"},nl={class:"auto-pool-add-content"},tl={class:"liquidity-action-tab"},sl=so(()=>o("div",{class:"increase tab-active"},"Add",-1)),al={class:"only-token"},ll=so(()=>o("div",null,"Deposit Amounts",-1)),il={key:0},ul=so(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1)),rl=so(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1)),dl={key:0,class:"card-item"},vl={key:1,class:"card-item"},ml=so(()=>o("span",null,"Pool Closed",-1)),pl={key:0,class:"add-info"},cl={key:0,class:"only-text"},fl={class:"total-amount"},yl=so(()=>o("span",null,"Total Amount",-1)),gl={key:0},bl={class:"total-amount"},kl=so(()=>o("span",null,"Share of Pool",-1)),hl={key:0},_l={key:1,class:"total-amount"},$l=so(()=>o("span",null,"Minimum Received LP",-1)),Il={key:0},wl={key:1,class:"add-info only-add-info"},Cl=so(()=>o("div",{class:"only-text"}," Single-asset deposit can't be higher than $10,000 at a time. ",-1)),Al=[Cl];function Pl(e,t,X,H,N,$){var r,d,f,b,c,I,L,V,j,G,te,h,_,Y,z,Q,se,M,Z,ne,le,ve,q;const u=Yo,k=Ko,g=xo,A=to("AutoPoolV2PoolStatus"),s=$o,m=wo,n=ln;return a(),p("div",ol,[o("div",nl,[o("div",tl,[sl,o("div",{class:"remove",onClick:t[0]||(t[0]=Go(P=>e.$emit("changeCurrentTab"),["stop"]))},"Remove")]),o("div",al,[ll,e.autoPoolLoading?E("",!0):(a(),p("div",il,[o("div",{class:we(["only-a-b",!e.isOnlyA&&!e.isOnlyB?"active-only":""]),onClick:t[1]||(t[1]=P=>e.onlyToken("only-a-b"))},[o("span",null,i(e.needReverse?(b=(f=e.positionInfo)==null?void 0:f.token_b)==null?void 0:b.symbol:(d=(r=e.positionInfo)==null?void 0:r.token_a)==null?void 0:d.symbol)+" + "+i(e.needReverse?(V=(L=e.positionInfo)==null?void 0:L.token_a)==null?void 0:V.symbol:(I=(c=e.positionInfo)==null?void 0:c.token_b)==null?void 0:I.symbol),1)],2),o("div",{class:we(["only-a",e.isOnlyA?"active-only":""]),onClick:t[2]||(t[2]=P=>e.onlyToken("only-a"))},[o("span",null,i(e.needReverse?(h=(te=e.positionInfo)==null?void 0:te.token_b)==null?void 0:h.symbol:(G=(j=e.positionInfo)==null?void 0:j.token_a)==null?void 0:G.symbol)+" only",1),F(u,{placement:"bottom","arrow-point-at-center":""},{title:oe(()=>[o("span",null,i(e.depositTokenTips),1)]),default:oe(()=>[ul]),_:1})],2),o("div",{class:we(["only-b",e.isOnlyB?"active-only":""]),onClick:t[3]||(t[3]=P=>e.onlyToken("only-b"))},[o("span",null,i(e.needReverse?(Q=(z=e.positionInfo)==null?void 0:z.token_a)==null?void 0:Q.symbol:(Y=(_=e.positionInfo)==null?void 0:_.token_b)==null?void 0:Y.symbol)+" only",1),F(u,{placement:"bottom","arrow-point-at-center":""},{title:oe(()=>[o("span",null,i(e.positionInfo.supportHaedalStake?e.depositHaedalTokenTips:e.depositTokenTips),1)]),default:oe(()=>[rl]),_:1})],2)]))]),o("div",{class:we(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(a(),p("div",dl,[F(k,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[4]||(t[4]=P=>e.fromCoinAmount=P),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:t[5]||(t[5]=P=>e.maxBtnSelect("fromCoin")),onOnHalf:t[6]||(t[6]=P=>e.halfBtnSelect("fromCoin")),onOnInput:t[7]||(t[7]=P=>{e.fromCoinAmount=P}),onOnFocus:t[8]||(t[8]=()=>{e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&!e.isOnlyA?(a(),O(g,{key:0})):E("",!0)])):E("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(a(),p("div",vl,[F(k,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[9]||(t[9]=P=>e.toCoinAmount=P),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:t[10]||(t[10]=P=>e.maxBtnSelect("toCoin")),onOnHalf:t[11]||(t[11]=P=>e.halfBtnSelect("toCoin")),onOnInput:t[12]||(t[12]=P=>{e.toCoinAmount=P}),onOnFocus:t[13]||(t[13]=()=>{e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&!e.isOnlyB?(a(),O(g,{key:0})):E("",!0)])):E("",!0)],2)]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(a(),O(A,{key:0})):E("",!0),(se=e.positionInfo)!=null&&se.is_pause?(a(),O(s,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:oe(()=>[ml]),_:1})):e.wallet.connected?(a(),O(s,{key:2,class:"big-btn liquidity-btn",disabled:e.loading||e.addLiquidityBtnDisabled,loading:e.loading,onClick:t[14]||(t[14]=P=>e.isShowAddModal=!0)},{default:oe(()=>[o("span",null,i(e.addLiquidityBtnText),1)]),_:1},8,["disabled","loading"])):(a(),O(s,{key:3,class:"big-btn liquidity-btn",onClick:t[15]||(t[15]=P=>e.wallet.setIsShowWalletModal(!0))},{default:oe(()=>[o("span",null,i(e.$t("button.connectWallet")),1)]),_:1})),(((M=e.positionInfo)==null?void 0:M.quoteUSD)==0||Number((Z=e.positionInfo)==null?void 0:Z.remainingTokenUSD)>Number(e.totalAmountUSD))&&(Number(e.fromCoinAmount)>0||Number(e.toCoinAmount)>0)?(a(),p(Ce,{key:4},[e.positionInfo.supportHaedalStake&&e.isOnlyB||e.onlyTokenUSD<=1e4?(a(),p("div",pl,[e.onlyText&&(e.isOnlyA&&e.fromCoinAmount>0||e.isOnlyB&&e.toCoinAmount>0)?(a(),p("div",cl,i(e.onlyText),1)):E("",!0),o("div",fl,[yl,e.calculateLoading?(a(),O(m,{key:1,paragraph:!1,active:""})):(a(),p("span",gl,i(Number(e.totalAmountUSD)>0&&Number(e.totalAmountUSD)<.01?"<$0.01":`$${("addCommom"in e?e.addCommom:T(R))(e.totalAmountUSD,2)}`),1))]),o("div",bl,[kl,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(a(),p("span",hl,i(e.shareOfPool)+"%",1)):(a(),O(m,{key:1,paragraph:!1,active:""}))]),e.minimumReceivedLP?(a(),p("div",_l,[$l,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(a(),p("span",Il,i(("addCommom"in e?e.addCommom:T(R))(e.minimumReceivedLP))+" "+i(e.needReverse?(ne=e.toCoin)==null?void 0:ne.symbol:(le=e.fromCoin)==null?void 0:le.symbol)+"-"+i(e.needReverse?(ve=e.fromCoin)==null?void 0:ve.symbol:(q=e.toCoin)==null?void 0:q.symbol),1)):(a(),O(m,{key:1,paragraph:!1,active:""}))])):E("",!0)])):e.positionInfo.supportHaedalStake&&!e.isOnlyB&&e.onlyTokenUSD>1e4||!e.positionInfo.supportHaedalStake&&e.onlyTokenUSD>1e4?(a(),p("div",wl,Al)):E("",!0)],64)):E("",!0),e.isShowAddModal?(a(),O(n,{key:5,"pool-info":e.positionInfo,"from-coin":e.needReverse?e.positionInfo.token_b:e.positionInfo.token_a,"to-coin":e.needReverse?e.positionInfo.token_a:e.positionInfo.token_b,"from-coin-amount":e.needReverse?e.toCoinAmount:e.fromCoinAmount,"to-coin-amount":e.needReverse?e.fromCoinAmount:e.toCoinAmount,"total-amount":e.totalAmountUSD,"share-of-pool":e.shareOfPool,"minimum-received-l-p":e.minimumReceivedLP,"is-only-a":e.isOnlyA,"is-only-b":e.isOnlyB,onOnClose:t[16]||(t[16]=P=>e.isShowAddModal=!1),onToAdd:e.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","is-only-a","is-only-b","onToAdd"])):E("",!0)])}const Sl=Ue(el,[["render",Pl],["__scopeId","data-v-14c47ecb"]]),Tl=He({components:{Modal:To},props:{title:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:"1245566.008946"},toCoinAmount:{type:String,default:"11111111111"},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},isIncrease:{type:Boolean,default:!1},fixedFromCoin:{type:Boolean,default:!0},currentPriceTab:{type:String,default:""},currentPrice:{type:String,default:""},currentPriceReverse:{type:String,default:""},showFromCoinLock:{type:Boolean,default:!1},showToCoinLock:{type:Boolean,default:!1},currentDirect:{type:Boolean,default:!0},positionTotalAmount:{type:Number,default:0},tickLower:{type:Number,default:0},tickUpper:{type:Number,default:0},isCreate:{type:Boolean,default:!1}},setup(e,t){const{t:X}=_o(),H=y(()=>{var n,r,d;return((n=e==null?void 0:e.poolInfo)==null?void 0:n.needReverse)||((d=(r=e==null?void 0:e.poolInfo)==null?void 0:r.poolInfo)==null?void 0:d.needReverse)}),N=xe(),$=y(()=>N),u=yo(),k=y(()=>u),g=n=>{var r;return(n==null?void 0:n.logoURI)||(n==null?void 0:n.logo_url)||((r=$.value.tokensObj[n==null?void 0:n.address])==null?void 0:r.logo_url)||(k.value.theme==="default"?Je("/image/coins/unknown.png"):Je("/image/coins/sui-unknown.png"))},A=Qe(),s=C(!1);return{needReverse:H,getCoinIcon:g,addCommom:R,t:X,route:A,checked:s,decimalUi:Re,clickSubmit:()=>{t.emit("toAdd")}}}});const uo=e=>(Ee("data-v-1327bdf7"),e=e(),We(),e),Rl=uo(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),ql={class:"modal-content"},Nl={class:"pool-info"},Ll={class:"left"},Bl={alt:""},Ol={alt:""},Dl={class:"pool-name"},Ul={class:"right"},Ml=uo(()=>o("div",{class:"lp-info"},[o("div",{class:"lp-num"},[o("p",null,"1,126,122.123456"),o("span",null,"USDT-USDC LP")]),o("div",{class:"lp-bg"})],-1)),Fl={class:"est-receive"},Vl=uo(()=>o("div",{class:"est-receive-title"},"Estimated Receive",-1)),jl={class:"token-a"},Hl=uo(()=>o("div",null,"0.941824",-1)),El={alt:""},Wl=uo(()=>o("span",null,"USDT",-1)),Xl={class:"token-a"},Yl=uo(()=>o("div",null,"0.941824",-1)),zl={alt:""},Gl=uo(()=>o("span",null,"USDC",-1));function Zl(e,t,X,H,N,$){const u=go,k=$o,g=to("Modal"),A=Io("image");return a(),O(g,{width:"440px",visible:!0,footer:null,title:"Add Liquidity",onCancel:t[0]||(t[0]=s=>e.$emit("onClose"))},{closeIcon:oe(()=>[Rl]),default:oe(()=>{var s,m,n,r,d,f,b,c,I,L,V,j,G,te,h,_,Y,z,Q,se,M,Z,ne,le;return[o("div",ql,[o("div",Nl,[o("div",Ll,[o("div",null,[Ie(o("img",Bl,null,512),[[A,e.needReverse?(r=(n=e.poolInfo)==null?void 0:n.token_b)==null?void 0:r.logo_url:(m=(s=e.poolInfo)==null?void 0:s.token_a)==null?void 0:m.logo_url]]),F(u,{address:e.needReverse?(c=(b=e.poolInfo)==null?void 0:b.token_b)==null?void 0:c.address:(f=(d=e.poolInfo)==null?void 0:d.token_a)==null?void 0:f.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),o("div",null,[Ie(o("img",Ol,null,512),[[A,e.needReverse?(j=(V=e.poolInfo)==null?void 0:V.token_a)==null?void 0:j.logo_url:(L=(I=e.poolInfo)==null?void 0:I.token_b)==null?void 0:L.logo_url]]),F(u,{address:e.needReverse?(_=(h=e.poolInfo)==null?void 0:h.token_a)==null?void 0:_.address:(te=(G=e.poolInfo)==null?void 0:G.token_b)==null?void 0:te.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),o("div",Dl,[o("span",null,i(e.needReverse?(se=(Q=e.poolInfo)==null?void 0:Q.token_b)==null?void 0:se.symbol:(z=(Y=e.poolInfo)==null?void 0:Y.token_a)==null?void 0:z.symbol),1),fe(" - "),o("span",null,i(e.needReverse?(le=(ne=e.poolInfo)==null?void 0:ne.token_a)==null?void 0:le.symbol:(Z=(M=e.poolInfo)==null?void 0:M.token_b)==null?void 0:Z.symbol),1)])]),o("div",Ul,[fe(" Fee tier "),o("span",null,i(e.poolInfo&&e.poolInfo.fee*100)+"%",1)])]),Ml,o("div",Fl,[Vl,o("div",jl,[Hl,o("div",null,[Ie(o("img",El,null,512),[[A,"1"]]),Wl])]),o("div",Xl,[Yl,o("div",null,[Ie(o("img",zl,null,512),[[A,"1"]]),Gl])])])]),F(k,{class:"big-btn liquidity-btn",onClick:e.clickSubmit},{default:oe(()=>[fe(i(e.isIncrease?"Increase Liquidity":e.title==e.$t("button.addLiquidity")?"Add Liquidity":"Create and Add Liquidity"),1)]),_:1},8,["onClick"])]}),_:1})}const dn=Ue(Tl,[["render",Zl],["__scopeId","data-v-1327bdf7"]]),Jl=He({components:{AutoPoolRemoveModal:dn,AutoPoolV2PoolStatus:rn},setup(){const e=qo(),t=y(()=>e),X=yo(),H=y(()=>X),N=y(()=>m.value.slippage),$=y(()=>H.value.chainName),u=wn();y(()=>u);const k=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],g=C(0),A=Qe(),s=Ke(),m=y(()=>s),n=y(()=>m.value.positionInfoObj[A.params.id]),r=y(()=>{var l;return(l=n.value)==null?void 0:l.needReverse}),d=C(),f=C(),b=C(!1),c=C(),I=y(()=>{var l;return(l=n.value)==null?void 0:l.myLiquidity}),L=C(!0),V=y(()=>$.value?Jo($.value):{}),j=C(),G=C(),te=Zo("Sui"),h=C(""),_=C(""),Y=C("--"),z=C(!1),Q=C(!1),se=C(),M=C(!0),Z=C(),ne=xe(),le=y(()=>ne),ve=y(()=>le.value.RATES),q=C(!1),P=async()=>{if(L.value||!n.value||n.value.positionLiquidity==0)return;G.value=!1,q.value=!0;const l=n.value.autoPoolPositionInfo.tick_lower_index,D=n.value.autoPoolPositionInfo.tick_upper_index,me=Ze.sqrtPriceX64ToTickIndex(new ge(n.value.current_sqrt_price));me<l&&(r.value?z.value=!0:Q.value=!0),me>D&&(r.value?Q.value=!0:z.value=!0);let K;if(h.value||_.value){console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:365 ~ updateAmounts ~ fixedFromCoin.value:",M.value,h.value,_.value),M.value?(K=new v(h.value).mul(Math.pow(10,d.value.decimals)).toString(),console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:368 ~ updateAmounts ~ coinAmount:",K,h.value)):(K=new v(_.value).mul(Math.pow(10,f.value.decimals)).toString(),console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:374 ~ updateAmounts ~ coinAmount:",K));let ue,de=M.value;if(w.value||x.value){w.value?Number(h.value)/Number(ce.value):Number(_.value)/Number(ce.value);const ae=await te.calculateRemoveSwapAmount({lowerTick:l,upperTick:D,curSqrtPrice:new ge(n.value.current_sqrt_price),fix_amount_a:de,receiveAmount:K,coinTypeA:n.value.autoPoolPositionInfo.coinTypeA,coinTypeB:n.value.autoPoolPositionInfo.coinTypeB,clmm_pool:n.value.address,slippage:Number(N.value)/100,decimals:w.value?d.value.decimals:f.value.decimals,liquidity:h.value==ce.value||_.value==ce.value?n.value.positionLiquidity:"",maxLiquidity:n.value.positionLiquidity,request_id:K});if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:362 ~ updateAmounts ~ swapResult:",ae),ae){if(ae.request_id!==K)return;j.value=ae.is_exceed,K=new ge(ae.swapOutAmount),ue=n.value.current_sqrt_price,se.value={swap_amount:ae.swapInAmount,liquidity:ae.liquidity,a2b:!de,route_obj:ae.route_obj},de=!de;const he=n.value.token_a.decimals,be=n.value.token_b.decimals,Te=new v(ae.swapInAmount).div(new v(Math.pow(10,he))).toString(),oo=B(new v(ae.swapOutAmountLimit).div(new v(Math.pow(10,be))).toString(),be),Be=r.value?n.value.token_b.symbol:n.value.token_a.symbol,je=r.value?n.value.token_a.symbol:n.value.token_b.symbol;Z.value=h.value==ce.value||_.value==ce.value?`To withdraw ${R(w.value?h.value:_.value)} ${w.value?Be:je},
                  ${R(w.value?n.value.amountB:n.value.amountA)} ${w.value?je:Be}
                   in the pool will be traded for ${Te} ${w.value?Be:je}`:`To withdraw ${R(w.value?h.value:_.value)} ${w.value?Be:je},
                  ${R(Te)} ${w.value?je:Be}  in the pool will be traded for ${R(oo)} ${w.value?Be:je}`}else{G.value=!0,Z.value="";return}}else j.value=!1,ue=n.value.current_sqrt_price,K=new ge(K);const{liquidityAmount:W,tokenMaxA:re,tokenMaxB:ie}=V.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:d.value,tokenB:f.value,lowerTick:l,upperTick:D,coinAmount:K,iscoinA:de,roundUp:!1,slippage:Number(N.value)/100,curSqrtPrice:new ge(ue)});if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:484 ~ updateAmounts ~ coinAmount:",K.toString()),!w.value&&!x.value&&(M.value?_.value=Number(ie)>0?ie:"":h.value=Number(re)>0?re:""),(w.value||x.value)&&(Number(h.value)>=Number(ce.value)||Number(_.value)>=Number(ce.value))){c.value=n.value.myLiquidity;const ae=new v(100);Y.value=new v(n.value.myLiquidity).mul(new v(Math.pow(10,n.value.lpInfo.decimals))).toString(),U.value=W.toString(),g.value=ae.toNumber()}else{const ae=Fo.get_lp_amount_by_liquidity({liquidity:n.value.liquidity,total_supply:n.value.total_supply},W.toString()),he=new v(ae).div(new v(Math.pow(10,n.value.lpInfo.decimals))).toString();console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:518 ~ updateAmounts ~ result:",he);const be=new v(he).div(new v(I.value)).mul(100);c.value=new v(I.value).mul(B(be.toString(),2)).div(100).toString(),Y.value=ae,U.value=W.toString(),console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:518 ~ updateAmounts ~ ratio:",be.toString()),g.value=be.toNumber()}q.value=!1}},U=C(),ye=y(()=>{var l;return(l=n==null?void 0:n.value)==null?void 0:l.amountA}),pe=y(()=>{var l;return(l=n==null?void 0:n.value)==null?void 0:l.amountB}),w=C(!1),x=C(!1),Pe=y(()=>{var de,W,re,ie;const l=((W=ve.value[(de=d==null?void 0:d.value)==null?void 0:de.address])==null?void 0:W.price)||0,D=((ie=ve.value[(re=f==null?void 0:f.value)==null?void 0:re.address])==null?void 0:ie.price)||0;let me=h.value!=="--"&&h.value!==""?h.value:0,K=_.value!=="--"&&_.value!==""?_.value:0,ue="0";return l&&D&&(w.value||x.value?ue=new v(w.value?me:K).mul(new v(w.value?l:D)).toString():ue=new v(me).mul(new v(l)).add(new v(K).mul(new v(D))).toString()),ue>0&&ue<.01?"<$0.01":`$${R(B(ue,2))}`}),Ae=async l=>{var he,be,Te,oo,Be,je,ko,Ge,Po,no,po;if(!L.value)return;console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:798 ~ setPercent ~ setPercent:",L.value),L.value=!0,G.value=!1,(be=(he=n.value)==null?void 0:he.token_a)==null||be.decimals,(oo=(Te=n.value)==null?void 0:Te.token_b)==null||oo.decimals;const D=(Be=n.value)==null?void 0:Be.tick_lower_index,me=(je=n.value)==null?void 0:je.tick_upper_index;Ze.tickIndexToSqrtPriceX64(D),Ze.tickIndexToSqrtPriceX64(me);const K=(Ge=(ko=n.value)==null?void 0:ko.autoPoolPositionInfo)==null?void 0:Ge.tick_lower_index,ue=(no=(Po=n.value)==null?void 0:Po.autoPoolPositionInfo)==null?void 0:no.tick_upper_index,de=Ze.sqrtPriceX64ToTickIndex(new ge((po=n==null?void 0:n.value)==null?void 0:po.current_sqrt_price));de<K&&(r.value?z.value=!0:Q.value=!0),de>ue&&(r.value?Q.value=!0:z.value=!0);let W="",re,ie;w.value?M.value=!0:x.value&&(M.value=!1);let ae=M.value;if(w.value||x.value&&!z.value&&!Q.value){if(w.value){const io=new v(ce.value).mul(Math.pow(10,d.value.decimals)).mul(l.value).toString();ie=B(io,0),h.value=ce.value>0&&l.value?B(new v(ce.value).mul(l.value).toString(),d.value.decimals):""}if(x.value){const io=new v(ce.value).mul(l.value).mul(Math.pow(10,f.value.decimals)).toString();ie=B(io,0),_.value=ce.value>0&&l.value>0?B(new v(ce.value).mul(l.value).toString(),f.value.decimals):""}const De=await te.calculateRemoveSwapAmount({lowerTick:D,upperTick:me,curSqrtPrice:new ge(n.value.current_sqrt_price),fix_amount_a:ae,receiveAmount:ie,coinTypeA:n.value.autoPoolPositionInfo.coinTypeA,coinTypeB:n.value.autoPoolPositionInfo.coinTypeB,clmm_pool:n.value.address,slippage:Number(N.value)/100,decimals:w.value?d.value.decimals:f.value.decimals,liquidity:l.value==1?n.value.positionLiquidity:"",maxLiquidity:n.value.positionLiquidity,request_id:ie});if(De){if(De.request_id!==ie)return;j.value=De.is_exceed,ie=new ge(De.swapOutAmount),n.value.current_sqrt_price,se.value={swap_amount:De.swapInAmount,liquidity:De.liquidity,route_obj:De.route_obj,a2b:!ae},ae=!ae;const io=n.value.token_a.decimals,Eo=n.value.token_b.decimals,vn=new v(De.swapInAmount).div(new v(Math.pow(10,io))).toString(),Wo=B(new v(De.swapOutAmountLimit).div(new v(Math.pow(10,Eo))).toString(),Eo),co=r.value?n.value.token_b.symbol:n.value.token_a.symbol,fo=r.value?n.value.token_a.symbol:n.value.token_b.symbol;Z.value=l.value==1?`To withdraw ${R(w.value?h.value:_.value)} ${w.value?co:fo},
          ${R(w.value?n.value.amountB:n.value.amountA)} ${w.value?fo:co}  in the pool will be traded for ${R(Wo)} ${w.value?co:fo}`:`To withdraw ${R(w.value?h.value:_.value)} ${w.value?co:fo},
          ${R(vn)} ${w.value?fo:co}  in the pool will be traded for ${R(Wo)} ${w.value?co:fo}`,W=De.liquidity}else n.value.current_sqrt_price,ie=new ge(ie),Z.value="",G.value=!0;Y.value=new v(n.value.myLiquidity).mul(new v(l.value)).toString(),c.value=new v(Y.value),U.value=W}else{j.value=!1;const De=new v(ye.value).mul(Math.pow(10,d.value.decimals)).mul(l.value).toString();ie=B(De,0),h.value=l.value>0?B(new v(ye.value).mul(l.value).toString(),d.value.decimals):"";const io=new v(pe.value).mul(l.value).mul(Math.pow(10,f.value.decimals)).toString();ie=B(io,0),_.value=l.value>0?B(new v(pe.value).mul(l.value).toString(),f.value.decimals):"",n.value.current_sqrt_price,ie=new ge(ie),l.value!==1?re=new v(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).mul(l.value).toString():re=new v(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).toString(),c.value=new v(re).div(Math.pow(10,n.value.lpInfo.decimals)),W=Fo.get_share_liquidity_by_amount({liquidity:n.value.liquidity,total_supply:n.value.total_supply},re),Y.value=B(re,0),U.value=B(W,0)}};_e(g,ho((l,D)=>{l!==D&&L.value&&(Number(l)>100?g.value=100:l&&n.value?(g.value=l,Ae({value:g.value/100})):(h.value="",_.value=""))},300)),_e(()=>h.value,ho((l,D)=>{l?P():!w.value&&!x.value&&(_.value="",g.value=0)},500),{immediate:!0}),_e(()=>_.value,ho((l,D)=>{l?P():!w.value&&!x.value&&(h.value="",g.value=0)},500),{immediate:!0});const qe=jo(),{setIsShowSuccess:Me,setIsShowRejected:Oe,setIsShowWaiting:$e,setTransactionDesc:Fe,setTransactionTxid:Ne,setPositiomNum:ao,setTransactionDescText:ro}=X,eo=C(!1),{t:Le}=_o(),lo=async()=>{var he,be,Te,oo,Be,je,ko;eo.value=!0,Ne("");const l=Number(h.value)>0?`${R(h.value,d.value.decimals)} ${d.value.symbol}`:"",D=Number(_.value)>0?`${R(_.value,f.value.decimals)} ${f.value.symbol}`:"";Fe(Le("tips.removeLiquidiyText",{from:r.value?D:l,and:Number(h.value)>0&&Number(_.value)>0?"and":"",to:r.value?l:D})),$e(!0);const me=Le("modal.removeLiquidityText2");ro(me);const K=n.value.autoPoolPositionInfo.tick_lower_index,ue=n.value.autoPoolPositionInfo.tick_upper_index,de=Ze.tickIndexToSqrtPriceX64(K),W=Ze.tickIndexToSqrtPriceX64(ue),re=(be=(he=n==null?void 0:n.value)==null?void 0:he.rewarderInfo)==null?void 0:be.map(Ge=>Ge.coinAddress);let ie;(h.value||_.value)&&(console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:909 ~ toRemove ~ fixedFromCoin.value:",M.value),M.value?ie=new v(h.value).mul(Math.pow(10,d.value.decimals)).toString():ie=new v(_.value).mul(Math.pow(10,f.value.decimals)).toString());const ae={lowerSqrtPrice:de,upperSqrtPrice:W,lpTokenAmount:Y.value,liquidity:U.value,curSqrtPrice:new ge(((oo=(Te=n==null?void 0:n.value)==null?void 0:Te.object)==null?void 0:oo.current_sqrt_price)||((Be=n==null?void 0:n.value)==null?void 0:Be.current_sqrt_price)),slippage:Number(N.value)/100,id:n.value.id,clmm_pool:n.value.autoPoolPositionInfo.clmm_pool_id,lp_token_type:n.value.lp_token_type,coinTypeA:n.value.autoPoolPositionInfo.coinTypeA,coinTypeB:n.value.autoPoolPositionInfo.coinTypeB,rewarder_coin_types:re,swapParams:se.value,fix_amount_a:M.value,isOnlyA:!z.value&&!Q.value?w.value:!1,isOnlyB:!Q.value&&!z.value?x.value:!1,lowerTick:K,upperTick:ue,receiveAmount:ie,sliderVal:g.value,positionInfo:n.value,maxLiquidity:n.value.positionLiquidity,farming_pool:n.value.autoPoolPositionInfo.pool_id};console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:911 ~ toRemove ~ params:",ae);try{const Ge=await te.remove(ae),Po=await V.value.signAndExecuteTransactionBlock(t.value.currentWallet,Ge);let no=V.value.handleTx(Po);if(console.log("0331###remove###tx####",no),no&&no.hash){Ne(no.hash),$e(!1),Me(!0);const po={title:Le("common.removeLiquidity"),desc:"",hash:no.hash,descTransactions:`Remove ${l} ${Number(h.value)>0&&Number(_.value)>0?"and":""} ${D} from the pool`,sender:t.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${h.value} ${(je=d.value)==null?void 0:je.symbol} and ${_.value} ${(ko=f.value)==null?void 0:ko.symbol}`};po.res=no.res,V.value.showTransitionPending(po),await V.value.watchTransaction(po)&&(h.value="",_.value="",c.value="",g.value=0,setTimeout(()=>{s.updatePositionItem(n.value.id),V.value.getAccount(t.value.address)},1e3),Number(g.value)==100&&A.name=="auto-pool-detail"&&qe.push("/vaults"))}else $e(!1),Oe(!0);eo.value=!1}catch(Ge){console.log("Remove error",Ge),eo.value=!1,$e(!1),Oe(!0)}};_e(()=>n.value,(l,D)=>{l&&!Ye(l)&&(d.value=l==null?void 0:l.token_a,f.value=l==null?void 0:l.token_b,(!D||D&&D.address!==l.address)&&(g.value=g.value>0?g.value:0,Ae({value:g.value/100})),D&&D.current_sqrt_price!==l.current_sqrt_price&&(L.value?Ae({value:g.value/100}):P()))},{immediate:!0});const vo=y(()=>{if(n.value.positionLiquidity==0)return"Insufficient LP Amount";const l=Number(c.value)>Number(I.value);return!h.value&&!_.value||!c.value||c.value<=0||!h.value&&w.value||!_.value&&x.value?Le("button.enterAmount"):l?"Invalid Amount":j.value?Le("button.insufficientLiquidity"):G.value?Le("button.enterAmount"):w.value&&Number(h.value)>Number(ce.value)||x.value&&Number(_.value)>Number(ce.value)?"Invalid Amount":Le("button.remove")}),mo=y(()=>{var D;if(((D=n==null?void 0:n.value)==null?void 0:D.positionLiquidity)==0)return!0;const l=Number(c.value)>Number(I.value);return!h.value&&!_.value||Number(h.value)<=0&&w.value||Number(_.value)<=0&&x.value?!0:!c.value||c.value<=0?(console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:1109 ~ removeLiquidityBtnDisabled ~ lpAmount.value:",c.value),!0):!!(l||j.value||ke.value!=="STATUS_RUNNING"||G.value||w.value&&Number(h.value)>Number(ce.value)||x.value&&Number(_.value)>Number(ce.value))}),ze=l=>(l==null?void 0:l.logoURI)||(l==null?void 0:l.logo_url)||Je("/image/coins/sui-unknown.png"),Ve=l=>{h.value="",_.value="",L.value=!0,g.value=0,Z.value="",l=="only-a-b"?(w.value=!1,x.value=!1,Ae({value:g.value/100})):l=="only-a"?(w.value=!0,x.value=!1):(x.value=!0,w.value=!1)},Bo=l=>{L.value=!0,g.value=100,l==="fromCoin"?M.value=!0:M.value=!1},Oo=l=>{L.value=!0,g.value=50,l==="fromCoin"?M.value=!0:M.value=!1},ce=C(),bo=C(!1),Do=y(()=>An()),S=async()=>{bo.value=!0;const l=n.value.token_a.decimals,D=n.value.token_b.decimals,me=new v(ye.value).mul(new v(Math.pow(10,l))).toNumber(),K=new v(pe.value).mul(new v(Math.pow(10,D))).toNumber(),ue=w.value?K:me;w.value?(f.value.address,n.value.token_a.address):(d.value.address,n.value.token_a.address);try{const de=await Do.value.getFindRouter(w.value?f:d,w.value?d:f,ue,!0,Number(N.value)/100,"",ue,[{poolID:n.value.address,ticklower:n.value.autoPoolPositionInfo.tick_lower_index,tickUpper:n.value.autoPoolPositionInfo.tick_upper_index,deltaLiquidity:Number(n.value.positionLiquidity)}]);console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:1242 ~ convertAssets ~ swapRouter:",de);const W=new v(de.amountOut).div(Math.pow(10,f.value.decimals));ce.value=W.sub(W.mul(Number(N.value)/100)).add(new v(w.value?ye.value:pe.value)).toString()}catch(de){const W=Cn(0);ce.value=W.sub(W.mul(Number(N.value)/100)).add(new v(w.value?ye.value:pe.value)).toString(),console.log("ðŸš€ðŸš€ðŸš€ ~ file: auto-pool-v2-remove.vue:1179 ~ convertAssets ~ e:",de)}bo.value=!1,Ae({value:g.value/100})};_e(()=>[w.value,x.value,ye.value,pe.value],([l,D])=>{(l||D)&&S()},{immediate:!0});const ee=l=>`${l}%`,ke=y(()=>m.value.currentAutoPoolStatus),J=C(),Se=()=>{J.value=window.setInterval(()=>{(h.value||_.value)&&!L.value?P():Ae({value:g.value/100})},2e4)};return Ro(()=>{Se()}),Vo(()=>{window.clearInterval(J.value)}),{removeLiquidityBtnText:vo,removeLiquidityBtnDisabled:mo,wallet:t,ratioArr:k,positionInfo:n,isShowRemoveModal:b,needReverse:r,fromCoin:d,toCoin:f,lpAmount:c,lpBalance:I,sliderVal:g,sFixD:B,isSlider:L,fromCoinAmount:h,toCoinAmount:_,setPercent:Ae,toRemove:lo,addCommom:R,getCoinIcon:ze,isOnlyA:w,isOnlyB:x,onlyToken:Ve,fixedFromCoin:M,maxBtnSelect:Bo,halfBtnSelect:Oo,fromCoinBlance:ye,toCoinBlance:pe,showFromCoinLock:z,showToCoinLock:Q,removeText:Z,onlyTokenBalance:ce,totalWithdraw:Pe,formatter:ee,currentAutoPoolStatus:ke,calculateLoading:q,convertAssetsLoading:bo}}});const Ao=e=>(Ee("data-v-5b24da4c"),e=e(),We(),e),Ql={class:"auto-pool-add"},Kl={class:"auto-pool-add-content"},xl={class:"liquidity-action-tab"},ei=Ao(()=>o("div",{class:"remove tab-active"},"Remove",-1)),oi={key:0,class:"only-token"},ni=Ao(()=>o("div",null,"Remove Amounts",-1)),ti={key:0,class:"card-item"},si={key:1,class:"card-item"},ai={class:"remove-ratio"},li={class:"remove-ratio-select"},ii={key:0,class:"ratio"},ui={key:1,class:"ratio"},ri={class:"ratio-list"},di=["onClick"],vi=Ao(()=>o("span",null,"Pool Closed",-1)),mi={key:4,class:"remove-info"},pi={key:0,class:"remove-text total-amount"},ci={class:"total-amount"},fi=Ao(()=>o("span",null,"Total Withdraw",-1)),yi={key:0},gi={class:"total-amount"},bi=Ao(()=>o("span",null,"LP Burn Amount",-1)),ki={key:0};function hi(e,t,X,H,N,$){var r,d,f,b,c,I,L,V,j,G,te,h,_,Y,z,Q,se,M,Z,ne,le,ve;const u=Ko,k=xo,g=zo,A=to("AutoPoolV2PoolStatus"),s=$o,m=wo,n=dn;return a(),p("div",Ql,[o("div",Kl,[o("div",xl,[o("div",{class:"increase",onClick:t[0]||(t[0]=Go(q=>e.$emit("changeCurrentTab"),["stop"]))},"Add"),ei]),!e.showFromCoinLock&&!e.showToCoinLock?(a(),p("div",oi,[ni,o("div",null,[o("div",{class:we(["only-a-b",!e.isOnlyA&&!e.isOnlyB?"active-only":""]),onClick:t[1]||(t[1]=q=>e.onlyToken("only-a-b"))},[o("span",null,i(e.needReverse?(b=(f=e.positionInfo)==null?void 0:f.token_b)==null?void 0:b.symbol:(d=(r=e.positionInfo)==null?void 0:r.token_a)==null?void 0:d.symbol)+" + "+i(e.needReverse?(V=(L=e.positionInfo)==null?void 0:L.token_a)==null?void 0:V.symbol:(I=(c=e.positionInfo)==null?void 0:c.token_b)==null?void 0:I.symbol),1)],2),o("div",{class:we(["only-a",e.isOnlyA?"active-only":""]),onClick:t[2]||(t[2]=q=>e.onlyToken("only-a"))},[o("span",null,i(e.needReverse?(h=(te=e.positionInfo)==null?void 0:te.token_b)==null?void 0:h.symbol:(G=(j=e.positionInfo)==null?void 0:j.token_a)==null?void 0:G.symbol)+" only",1)],2),o("div",{class:we(["only-b",e.isOnlyB?"active-only":""]),onClick:t[3]||(t[3]=q=>e.onlyToken("only-b"))},[o("span",null,i(e.needReverse?(Q=(z=e.positionInfo)==null?void 0:z.token_a)==null?void 0:Q.symbol:(Y=(_=e.positionInfo)==null?void 0:_.token_b)==null?void 0:Y.symbol)+" only",1)],2)])])):E("",!0),o("div",{class:we(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(a(),p("div",ti,[F(u,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[4]||(t[4]=q=>e.fromCoinAmount=q),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.isOnlyA?e.onlyTokenBalance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","amount-leabl":"Available","convert-assets-loading":e.convertAssetsLoading,"has-arrow":!1,onOnMax:t[5]||(t[5]=q=>e.maxBtnSelect("fromCoin")),onOnHalf:t[6]||(t[6]=q=>e.halfBtnSelect("fromCoin")),onOnInput:t[7]||(t[7]=q=>{e.isSlider=!1,e.fromCoinAmount=q}),onOnFocus:t[8]||(t[8]=()=>{e.isSlider=!1,e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address","convert-assets-loading"]),e.showFromCoinLock?(a(),O(k,{key:0})):E("",!0)])):E("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(a(),p("div",si,[F(u,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[9]||(t[9]=q=>e.toCoinAmount=q),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.isOnlyB?e.onlyTokenBalance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","convert-assets-loading":e.convertAssetsLoading,"import-page":"deposit","amount-leabl":"Available","has-arrow":!1,onOnMax:t[10]||(t[10]=q=>e.maxBtnSelect("toCoin")),onOnHalf:t[11]||(t[11]=q=>e.halfBtnSelect("toCoin")),onOnInput:t[12]||(t[12]=q=>{e.isSlider=!1,e.toCoinAmount=q}),onOnFocus:t[13]||(t[13]=()=>{e.isSlider=!1,e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address","convert-assets-loading"]),e.showToCoinLock?(a(),O(k,{key:0})):E("",!0)])):E("",!0)],2),o("div",ai,[o("div",li,[Number(e.lpBalance)>=Number(e.lpAmount)?(a(),p("div",ii,i(e.sliderVal>0&&Number(("sFixD"in e?e.sFixD:T(B))(e.sliderVal,2))<.01?"<0.01":("sFixD"in e?e.sFixD:T(B))(e.sliderVal,2))+"% ",1)):(a(),p("div",ui,"--")),o("div",ri,[(a(!0),p(Ce,null,So(e.ratioArr,(q,P)=>(a(),p("div",{key:P,class:we(["ratio-item",e.sliderVal==q.value?"ratio-item-active":""]),onClick:()=>{e.isSlider=!0,e.sliderVal=q.value}},i(q.name),11,di))),128))])]),F(g,{value:e.sliderVal,"onUpdate:value":t[14]||(t[14]=q=>e.sliderVal=q),"tip-formatter":e.formatter,onChange:t[15]||(t[15]=q=>e.isSlider=!0)},null,8,["value","tip-formatter"])])]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(a(),O(A,{key:0})):E("",!0),(se=e.positionInfo)!=null&&se.is_pause?(a(),O(s,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:oe(()=>[vi]),_:1})):e.wallet&&e.wallet.address?(a(),O(s,{key:2,class:"big-btn liquidity-btn",disabled:e.removeLiquidityBtnDisabled,onClick:t[16]||(t[16]=q=>e.toRemove())},{default:oe(()=>[o("span",null,i(e.removeLiquidityBtnText),1)]),_:1},8,["disabled"])):(a(),O(s,{key:3,class:"big-btn liquidity-btn",onClick:t[17]||(t[17]=q=>e.wallet.setIsShowWalletModal(!0))},{default:oe(()=>[o("span",null,i(e.$t("button.connectWallet")),1)]),_:1})),e.removeLiquidityBtnDisabled?E("",!0):(a(),p("div",mi,[e.removeText&&(e.isOnlyA&&Number(e.fromCoinAmount)>0||e.isOnlyB&&Number(e.toCoinAmount)>0)?(a(),p("div",pi,i(e.removeText),1)):E("",!0),o("div",ci,[fi,e.calculateLoading?(a(),O(m,{key:1,paragraph:!1,active:""})):(a(),p("span",yi,i(e.totalWithdraw),1))]),o("div",gi,[bi,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(a(),p("span",ki,i(("addCommom"in e?e.addCommom:T(R))(("sFixD"in e?e.sFixD:T(B))(e.lpAmount,(M=e.positionInfo)==null?void 0:M.decimals)))+" "+i(e.needReverse?(Z=e.toCoin)==null?void 0:Z.symbol:(ne=e.fromCoin)==null?void 0:ne.symbol)+"-"+i(e.needReverse?(le=e.fromCoin)==null?void 0:le.symbol:(ve=e.toCoin)==null?void 0:ve.symbol),1)):(a(),O(m,{key:1,paragraph:!1,active:""}))])])),e.isShowRemoveModal?(a(),O(n,{key:5,"pool-info":e.positionInfo,"from-coin":e.positionInfo.token_a,"to-coin":e.positionInfo.token_b,onOnClose:t[18]||(t[18]=q=>e.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):E("",!0)])}const _i=Ue(Jl,[["render",hi],["__scopeId","data-v-5b24da4c"]]),$i=He({components:{AutoPoolV2Info:on,AutoPoolV2PositionRange:nn,AutoPoolV2PoolComposition:sn,AutoPoolV2PoolLiquidity:an,AutoPoolV2PoolAdd:Sl,AutoPoolV2PoolRemove:_i},setup(){const e=Ke(),t=xe(),X=y(()=>t),H=yo(),N=y(()=>H),$=y(()=>e),u=Qe(),k=C();_e(()=>[$.value.positionInfoObj,u.params.id],([r,d])=>{r&&!Ye(r)&&d&&(k.value=r[d],console.log(k.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const g=async()=>{e.getAutoPoolAPY(),e.getVault(u.params.id,"refresh")},A=C();_e(()=>u.query.action,r=>{r&&(A.value=r)},{immediate:!0}),Ro(()=>{e.getAutoPoolAPY()}),_e(()=>[X.value.poolConfigList,$.value.autoPoolList],([r,d])=>{r&&r.length>0&&d&&d.length==0&&e.getAutoPoolList()},{immediate:!0}),_e(()=>[$.value.autoPoolList,X.value.poolConfigObj],([r,d])=>{r&&r.length>0&&d&&!Ye(d)&&e.getMyAutoPoolPosition()},{immediate:!0}),y(()=>N.value.chainName),jo();const s=qo(),m=y(()=>s);_e(()=>m.value.address,r=>{r||e.logout()},{immediate:!0});const n=y(()=>$.value.autoPoolLoading);return{clickRefresh:g,currentTab:A,positionInfo:k,autoPoolLoading:n}}});const Ii={class:"auto-pool-detail-v2"},wi={class:"detail-top"},Ci={class:"detail-bottom pc-detail"},Ai={class:"detail-bottom-left"},Pi={class:"detail-bottom-right"},Si={class:"h5-detail"},Ti={key:0,class:"loading-global"};function Ri(e,t,X,H,N,$){const u=Xn,k=on,g=nn,A=sn,s=an,m=to("AutoPoolV2PoolAdd"),n=to("AutoPoolV2PoolRemove"),r=kn;return a(),p("div",Ii,[o("div",wi,[F(u,{"pool-info":e.positionInfo,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClickRefresh"]),F(k)]),o("div",Ci,[o("div",Ai,[F(g),F(A),F(s)]),o("div",Pi,[e.currentTab=="deposit"?(a(),O(m,{key:0,onChangeCurrentTab:t[0]||(t[0]=d=>e.currentTab="remove")})):(a(),O(n,{key:1,onChangeCurrentTab:t[1]||(t[1]=d=>e.currentTab="deposit")}))])]),o("div",Si,[e.currentTab=="deposit"?(a(),O(m,{key:0,onChangeCurrentTab:t[2]||(t[2]=d=>e.currentTab="remove")})):(a(),O(n,{key:1,onChangeCurrentTab:t[3]||(t[3]=d=>e.currentTab="deposit")})),F(g),F(A),F(s)]),e.autoPoolLoading?(a(),p("div",Ti,[F(r)])):E("",!0)])}const eu=Ue($i,[["render",Ri],["__scopeId","data-v-c68a26ef"]]);export{eu as default};
