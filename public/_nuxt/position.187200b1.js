import{_ as Q}from"./upgrade-loading.223a76e2.js";import{_ as X}from"./upgrade-position-item.159ecd59.js";import{a as Y,r as L,l as Z,b as M,E as x,m as a,y as oo,N as eo,D as C,T as so,e as to,o as r,f as l,i as U,x as B,F as no,s as ao,h as ro,v as D,w as lo,B as io,c as uo,j as co}from"./entry.e26a72a9.js";import{a as mo,u as po}from"./pool.7d99f86d.js";import{u as vo}from"./notifi.b1ff8666.js";import{u as go,c as fo}from"./index.88b8bf28.js";import{i as V}from"./import-icon.de3e6c66.js";import{_ as _o}from"./img-no-Positions_2x.50b42499.js";import{_ as ho}from"./img-no-Positions_2x.1c4afc3e.js";import{_ as yo}from"./img-connect-wallet_2x.8dc17a30.js";import{_ as bo}from"./img-connect-wallet_2x.4578db51.js";/* empty css              */import"./index.fb206cae.js";import"./icon-Amount-for-Sale_2x.b2e65df2.js";import"./status-block.1e84cfa9.js";/* empty css              */import"./index.b055e222.js";import"./decimal.765d8738.js";import"./decimal.a2826370.js";import"./farms-valid-range.9e710c07.js";import"./farms.f5b2d420.js";import"./icon_farms_2x.3d2d56d7.js";import"./icon_rewards_2x.22edae31.js";import"./icon-arrow_2x.948aedb2.js";import"./icon-arrow_2x.4ffddb8e.js";import"./farms.7a03be70.js";import"./useWhale.8c523aca.js";const ko=Y({setup(){const s=L(!1),{t:w}=Z(),R=L(["position"]),G=M(),E=x(),$=L(""),y=mo(),c=a(()=>y),S=a(()=>{const o=E.query.poolAddress,e=n.value.poolConfigObj[o];return console.log(e,"infoinfoinfo"),e}),A=a(()=>c.value.chainName?fo[c.value.chainName]:{});let i=L([]);const _=po(),n=a(()=>_),q=go(),b=a(()=>q),F=()=>{s.value=!0,i.value=[],b.value.address&&_.getMyPositons(b.value.address,n.value.poolsObj,c.value.chainName),setTimeout(()=>{s.value=!1},1e3)};oo(()=>{i.value=[],_.setMyPositionsLoading(!0)}),eo(()=>{b.value.connected||(i.value=[])});const J=()=>{s.value=!0;let o=[];n.value.poolPositions.forEach(e=>{var h,T,N,O;let t,u;const p=e.amountA*((h=n.value.RATES[e.token_a.address])==null?void 0:h.price),d=e.amountB*((T=n.value.RATES[e.token_b.address])==null?void 0:T.price);(N=n.value.RATES[e.token_a.address])!=null&&N.price&&((O=n.value.RATES[e.token_b.address])!=null&&O.price)?(t=p+d,u=p+d):(t=" --",u=0);let P=e.positionSource=="farming";o.push({...e,amountUSD:t,amountUSDOrigin:u,tokenARates:p,tokenBRates:d,isStableFarming:P})}),i.value=o,console.log(i.value,"list.value========>")};C(()=>[n.value.poolPositions,n.value.RATES,S.value],([o,e,t])=>{o&&e&&t&&(console.log("0605==>updateLpList9099999"),J())},{immediate:!0}),C(()=>[b.value.address,S.value,c.value.chainName],([o,e,t])=>{o||_.setPoolPositions([]),o&&e&&t&&_.getMyPositonsByPool(o,e,t)},{immediate:!0,deep:!0});const k=vo(),m=a(()=>k),j=a(()=>_),I=async o=>{await k.getSourceGroups();const e=m.value.sourceGroups&&m.value.sourceGroups.length>0&&m.value.sourceGroups[0]&&m.value.sourceGroups[0].sources||[];for(let t=0;t<e.length;t++){const{pool_address:u,position_index:p}=JSON.parse(e[t].blockchainAddress);let d=!1,P;for(let h=0;h<o.length;h++){const{poolAddress:T,index:N}=o[h];u==T&&Number(N)==Number(p)&&(d=!0),P={pool_address:u,position_index:p}}d||await k.subscribePosition(P,"",!1,!1)}},K=async()=>{await k.getSourceGroups();const o=m.value.sourceGroups&&m.value.sourceGroups.length>0&&m.value.sourceGroups[0]&&m.value.sourceGroups[0].sources||[];for(let e=0;e<o.length;e++){const{pool_address:t,position_index:u}=JSON.parse(o[e].blockchainAddress),{name:p}=o[e],d={pool_address:t,position_index:u};await k.subscribePosition(d,p,!1,!1)}},W=a(()=>j.value.myPositionsLoading);C(()=>j.value.poolPositions,(o,e)=>{A.value.hasNotifi&&(o&&o.length>0&&e&&e.length!==o.length?I(o):o&&o.length==0&&!W.value&&K())},{immediate:!0});const z=o=>{var e;return(o==null?void 0:o.logoURI)||(o==null?void 0:o.logo_url)||((e=n.value.tokensObj[o==null?void 0:o.address])==null?void 0:e.logo_url)||(c.value.theme==="default"?V("/image/coins/unknown.png"):V("/image/coins/sui-unknown.png"))},v=L(null),g=a(()=>v.value&&v.value.firstToken?v.value.firstToken:null),f=a(()=>v.value&&v.value.lastToken?v.value.lastToken:null),H=a(()=>{let o=[];o=i.value;const e=o.filter((t,u)=>g.value&&f.value?t.coinA.symbol==g.value.symbol&&t.coinB.symbol==f.value.symbol||t.coinA.symbol==f.value.symbol&&t.coinB.symbol==g.value.symbol:g.value?t.coinA.symbol.toLowerCase().includes(g.value.symbol.toLowerCase())||t.coinB.symbol.toLowerCase().includes(g.value.symbol.toLowerCase()):f.value?t.coinA.symbol.toLowerCase().includes(f.value.symbol.toLowerCase())||t.coinB.symbol.toLowerCase().includes(f.value.symbol.toLowerCase()):o);return n.value.myPositionsLoading||y.setPositiomAmount(e.length),e});return so(()=>{y.setPositiomAmount("--")}),{showList:H,childTokenSelectRef:v,firstToken:g,lastToken:f,getCoinIcon:z,t:w,pools:n,store:c,wallet:b,list:i,clickRefresh:F,refresh:s,current:R,router:G,searchKey:$}}});const Lo={class:"your-liquidity-container"},wo={key:0,class:"upgrade-loading"},So={key:1,class:"position-list"},Ao={key:2,class:"no-data"},Po={key:0,src:_o,alt:""},To={key:1,src:ho,alt:""},No={key:3,class:"no-data"},Bo={key:0,src:yo,alt:""},Co={key:1,src:bo,alt:""};function Ro(s,w,R,G,E,$){const y=Q,c=X,S=io;return r(),l("div",Lo,[s.pools.myPositionsLoading&&s.wallet.connected?(r(),l("div",wo,[U(y,{loading:s.pools.myPositionsLoading,type:"position"},null,8,["loading"])])):B("",!0),s.showList&&s.showList.length>0&&s.wallet.connected&&!s.pools.myPositionsLoading?(r(),l("div",So,[(r(!0),l(no,null,ao(s.showList,(A,i)=>(r(),uo(c,{key:i,"p-item":A},null,8,["p-item"]))),128))])):B("",!0),s.showList&&s.showList.length<=0&&!s.pools.myPositionsLoading&&s.wallet.connected?(r(),l("div",Ao,[s.store.theme=="default"?(r(),l("img",Po)):(r(),l("img",To)),ro("span",null,D(s.$t("common.noLiquidityPositions")),1)])):B("",!0),s.wallet.connected?B("",!0):(r(),l("div",No,[s.store.theme=="default"?(r(),l("img",Bo)):(r(),l("img",Co)),U(S,{class:"connect-wallet",onClick:w[0]||(w[0]=A=>s.wallet.setIsShowWalletModal(!0))},{default:lo(()=>[co(D(s.$t("button.connectWallet")),1)]),_:1})]))])}const ae=to(ko,[["render",Ro],["__scopeId","data-v-40d22391"]]);export{ae as default};
