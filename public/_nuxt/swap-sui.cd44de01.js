import{_ as ka}from"./refresh-icon.76709f8e.js";import{P as ya,_ as Ia,a as Ta}from"./token-info.4c82f4ba.js";import{_ as Oa}from"./network-tips.2d0f712b.js";import{_ as Na}from"./coin-select.62691c3b.js";import{_ as $a}from"./swap-setting.6989b835.js";import{_ as Ra}from"./token-warning-modal.92e12c6a.js";import{a as $o,Y as Ma,m as A,r as d,D as V,e as Ro,M as ke,q as Pa,o as T,c as oe,w as ce,h as u,v as O,u as Be,t as je,f as U,z as me,j as re,x as E,i as Q,F as no,B as Mo,p as Po,k as Fo,b as Fa,a2 as Ba,a3 as ja,l as Ua,y as La,C as Ea,a7 as To,L as qa,A as Wa,W as Da}from"./entry.2580d766.js";/* empty css              *//* empty css              */import{i as We}from"./import-icon.de3e6c66.js";import{u as Bo,a as jo,e as Ha,b as Ya}from"./pool.37bda3ae.js";import{b as Y,s as Ne,d as Ae,c as Le,g as za,a as Ja,p as Oo,f as Ue,O as No}from"./index.dbdd6761.js";import{u as Ka,c as Se,b as Ge}from"./index.75f6af80.js";import"./decimal.a2826370.js";import{A as Ga,R as Qa,c as qe,u as Xa}from"./confetti.module.fc1e6dd2.js";import{U as Za}from"./underline-tab.9f36d895.js";import{N as Va}from"./new-assets-card.1cc26df8.js";import{I as _a}from"./icon-tooltip.bf685fd5.js";import{D as m}from"./decimal.765d8738.js";/* empty css              */import"./index.48d67763.js";/* empty css              */import"./install.8270ff90.js";import"./token-warning_2x.be0b9191.js";import"./img-no-Positions_2x.348ab173.js";import"./img-no-Positions_2x.ecbddd18.js";/* empty css              */import"./icon-error_2x.ed12eb47.js";import"./icon-selected_3x.873560ed.js";import"./coin-img.0a4a2a3c.js";import"./limit-beta.b94f01ad.js";import"./token-warning.66d1f2c1.js";import"./useDebounceFunction.6286b648.js";const xa=$o({components:{Modal:Ma,PriceImpactTooltip:ya},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},slippage:{type:String,default:""},impact:{type:Number,default:0},fixedFromCoin:{type:Boolean,default:!1},fee:{type:String,required:!1},formatFee:{type:String,default:""},isShowAccept:{type:Boolean,default:!1},swapLoading:{type:Boolean,required:!1},oneFromAmount:{type:String,default:""},oneToAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})}},setup(e,v){const z=Bo(),k=A(()=>z),q=jo(),ae=A(()=>q),l=C=>{var i;return(C==null?void 0:C.logoURI)||(C==null?void 0:C.logo_url)||((i=k.value.tokensObj[C==null?void 0:C.address])==null?void 0:i.logo_url)||(ae.value.theme==="default"?We("/image/coins/unknown.png"):We("/image/coins/sui-unknown.png"))},ne=d(!1),D=A(()=>ae.value.chainName),J=async()=>{v.emit("to-swap")};d([]);const de=d(0),K=d(""),te=d(""),pe=A(()=>ae.value.slippage);V(()=>[e.fromCoinAmount,e.toCoinAmount,e.fromCoin,e.toCoin,e.fixedFromCoin,pe.value],([C,i,r,w,R,H])=>{if(C&&i&&r&&w&&H)if(R){const M=new m(i).mul(new m(H/100));te.value=new m(i).sub(M).toString()}else{const M=new m(C).mul(new m(H/100));K.value=new m(C).add(M).toString()}},{immediate:!0});const se=d(""),ye=A(()=>{var C,i,r,w,R,H,M,_,b,B,W,n;return(r=(i=k==null?void 0:k.value)==null?void 0:i.tokensObj[(C=e==null?void 0:e.fromCoin)==null?void 0:C.address])!=null&&r.pyth_id&&((H=(R=k==null?void 0:k.value)==null?void 0:R.tokensObj[(w=e==null?void 0:e.fromCoin)==null?void 0:w.address])==null?void 0:H.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(b=(_=k==null?void 0:k.value)==null?void 0:_.tokensObj[(M=e==null?void 0:e.fromCoin)==null?void 0:M.address])!=null&&b.coingecko_id?"coingecko":(n=(W=k==null?void 0:k.value)==null?void 0:W.tokensObj[(B=e==null?void 0:e.fromCoin)==null?void 0:B.address])!=null&&n.birdeyeid?"birdeye":null}),$e=A(()=>{var C,i,r,w,R,H,M,_,b,B,W,n;return(r=(i=k==null?void 0:k.value)==null?void 0:i.tokensObj[(C=e==null?void 0:e.toCoin)==null?void 0:C.address])!=null&&r.pyth_id&&((H=(R=k==null?void 0:k.value)==null?void 0:R.tokensObj[(w=e==null?void 0:e.toCoin)==null?void 0:w.address])==null?void 0:H.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(b=(_=k==null?void 0:k.value)==null?void 0:_.tokensObj[(M=e==null?void 0:e.toCoin)==null?void 0:M.address])!=null&&b.coingecko_id?"coingecko":(n=(W=k==null?void 0:k.value)==null?void 0:W.tokensObj[(B=e==null?void 0:e.toCoin)==null?void 0:B.address])!=null&&n.birdeyeid?"birdeye":null}),f=async()=>{const C=k.value.tokenExternalPriceObj[e.fromCoin.address],i=k.value.tokenExternalPriceObj[e.toCoin.address];if(C&&i){const r=new m(C).div(new m(i)),w=new m(e.oneToAmount.replace(new RegExp(/,/g),"")).sub(r).div(r).mul(100);let R=Math.abs(Ne(w,2));r.toNumber()<Number(e.oneToAmount.replace(new RegExp(/,/g),""))?se.value="":se.value=w>0&&w<=.01?"0.01":R}else se.value=""},Re=C=>{if(C<5)return"color-s";if(C>=5&&C<10)return"color-w";if(C>=10)return"color-e"};V(()=>[e.oneToAmount,k.value.tokenExternalPriceObj,D.value],([C,i,r])=>{C&&i&&!Le(i)&&r!=="Aptos"&&f()},{immediate:!0,deep:!0});const $=d(!1);return{getCoinIcon:l,addCommom:Y,sFixD:Ne,rateChange:ne,chainName:D,clickNextBtn:J,pathLength:de,maximumSold:K,minimumReceived:te,decimalUi:Ae,getTextColor:Re,priceExangeRate:se,formCoinMarket:ye,toCoinMarket:$e,readWithin:$}}});const fe=e=>(Po("data-v-30b90b55"),e=e(),Fo(),e),en=fe(()=>u("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[u("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),on={class:"new-swap-contnet"},an={class:"coin-info"},nn={class:"from-coin-info"},tn={class:"left"},sn={class:"coin-amount"},ln={class:"coin-symbol"},un={class:"right"},rn={class:"to-coin-info"},dn={class:"left"},vn={class:"coin-amount"},cn={class:"coin-symbol"},mn={class:"right"},fn=fe(()=>u("div",{class:"to-swap-logo"},null,-1)),pn=fe(()=>u("div",{class:"new-sui-exchange to-swap-logo"},[u("div",{class:"exchange-new"},[u("svg",{class:"icon icon-down","aria-hidden":"true"},[u("use",{"xlink:href":"#icon-icon_swap1"})])])],-1)),gn={class:"coin-rate"},wn={key:0,class:"coin-rate-box"},Cn={class:"left"},bn=fe(()=>u("svg",{class:"icon icon-down","aria-hidden":"true"},[u("use",{"xlink:href":"#icon-icon_swap2"})],-1)),hn=[bn],Sn={key:1,class:"coin-rate-box"},An={class:"left"},kn=fe(()=>u("svg",{class:"icon icon-down","aria-hidden":"true"},[u("use",{"xlink:href":"#icon-icon_swap2"})],-1)),yn=[kn],In={key:2,class:"price-impact"},Tn=fe(()=>u("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),On=[Tn],Nn=fe(()=>u("br",null,null,-1)),$n={class:"bottom"},Rn={class:"induction"},Mn={class:"item"},Pn={class:"induction-text"},Fn={class:"induction-value"},Bn={class:"item"},jn={class:"induction-text"},Un={class:"induction-value"},Ln={class:"item"},En={class:"induction-text"},qn={key:0,class:"item"},Wn={class:"induction-text"},Dn={key:0,class:"induction-value"},Hn={key:1,class:"induction-value"},Yn={key:0,class:"within-desc"},zn=fe(()=>u("div",{class:"within-top"},[u("span",null,"The exchange rate of this order deviates from the market price by a large percentage. Are you sure you want to continue the swap?")],-1)),Jn={class:"within-bottom"},Kn={key:0,class:"price-updated modal-bottom-btn"},Gn=fe(()=>u("span",null,"Price updated",-1));function Qn(e,v,z,k,q,ae){const l=ke("PriceImpactTooltip"),ne=Mo,D=ke("Modal"),J=Pa("image");return T(),oe(D,{width:"440px",visible:!0,footer:null,title:e.$t("button.swap"),class:"add-liquidity-modal new-modal-have-btn",onCancel:v[6]||(v[6]=de=>e.$emit("on-close"))},{closeIcon:ce(()=>[en]),default:ce(()=>{var de;return[u("div",on,[u("div",an,[u("div",nn,[u("div",tn,[u("div",sn,O(e.fromCoinAmount&&("addCommom"in e?e.addCommom:Be(Y))(e.fromCoinAmount)),1),u("div",ln,O(e.fromCoin&&e.fromCoin.symbol),1)]),u("div",un,[je(u("img",null,null,512),[[J,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]])])]),u("div",rn,[u("div",dn,[u("div",vn,O(e.toCoinAmount&&("addCommom"in e?e.addCommom:Be(Y))(e.toCoinAmount)),1),u("div",cn,O(e.toCoin&&e.toCoin.symbol),1)]),u("div",mn,[je(u("img",null,null,512),[[J,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]])]),fn,pn])]),u("div",gn,[e.rateChange?(T(),U("div",Sn,[u("div",An,[je(u("img",null,null,512),[[J,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),u("span",null,"1 "+O(e.toCoin&&e.toCoin.symbol)+" ≈",1),je(u("img",null,null,512),[[J,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),u("span",null,O(e.oneFromAmount)+" "+O(e.fromCoin.symbol),1)]),u("div",{class:"right",onClick:v[1]||(v[1]=K=>e.rateChange=!e.rateChange)},yn)])):(T(),U("div",wn,[u("div",Cn,[je(u("img",null,null,512),[[J,e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)]]),u("span",null,"1 "+O(e.fromCoin&&e.fromCoin.symbol)+" ≈",1),je(u("img",null,null,512),[[J,e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)]]),u("span",null,O(e.oneToAmount)+" "+O(e.toCoin.symbol),1)]),u("div",{class:"right",onClick:v[0]||(v[0]=K=>e.rateChange=!e.rateChange)},hn)])),e.impact>=10&&e.fromCoinAmount&&e.toCoinAmount&&!e.swapLoading?(T(),U("div",In,[(T(),U("svg",{class:me(["icon warning-icon",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""]),"ria-hidden":"true"},On,2)),u("span",{class:me(["pc-impact-tips",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""])},"Price Impact Alert. Be cautious before submitting your order.",2),u("span",{class:me(["h5-impact-tips",e.impact>=10&&e.impact<30?"impact-w":e.impact>=30?"impact-e":""])},[re("Price Impact Alert."),Nn,re(" Be cautious before submitting your order.")],2)])):E("",!0)]),u("div",$n,[u("div",Rn,[u("div",Mn,[u("div",Pn,O(e.$t("modal.slippageTolerance")),1),u("div",Fn,O(e.slippage)+"%",1)]),u("div",Bn,[u("div",jn,O(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),u("div",Un,O(e.fixedFromCoin?("addCommom"in e?e.addCommom:Be(Y))(("sFixD"in e?e.sFixD:Be(Ne))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:Be(Y))(("sFixD"in e?e.sFixD:Be(Ne))(e.maximumSold,e.fromCoin.decimals)))+" "+O(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1)]),u("div",Ln,[u("div",En,[re(" Price Impact "),Q(l,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,to:e.toCoinAmount,impact:e.impact},null,8,["from-coin","to-coin","from-coin-amount","to","impact"])]),u("div",{class:me(["induction-value",String(e.impact)==="Incalculable"?"impact-w":e.impact<10?"impact-s":e.impact<30&&e.impact>=10?"impact-w":"impact-e"])},[e.chainName=="Aptos"?(T(),U(no,{key:0},[re(O(e.impact<.01?"<0.01":e.impact>100?">100":e.impact)+"% ",1)],64)):String(e.impact)=="Incalculable"?(T(),U(no,{key:1},[re(" Incalculable ")],64)):(T(),U(no,{key:2},[re(O(e.impact>0&&e.impact<.01?"<0.01":e.impact>100?">100":e.impact>0?`-${e.impact}`:`+${(de=String(e.impact))==null?void 0:de.replace("-","")}`)+"% ",1)],64))],2)]),e.chainName=="Aptos"?(T(),U("div",qn,[u("div",Wn,O(e.$t("common.fee")),1),e.chainName=="Aptos"?(T(),U("div",Dn,O(e.formatFee)+" "+O(e.fromCoin.symbol)+" ("+O(e.fee*100)+"%) ",1)):(T(),U("div",Hn,O(e.fee)+" "+O(e.fromCoin.symbol),1))])):E("",!0)])]),e.chainName=="Sui"&&e.priceExangeRate&&Number(e.priceExangeRate)>10?(T(),U("div",Yn,[zn,u("div",Jn,[u("div",{class:me(["within-btn cancel-btn",e.readWithin?"within-btn-active":""]),onClick:v[2]||(v[2]=K=>e.readWithin=!0)}," Yes, please continue. ",2),u("div",{class:"within-btn cancel-btn",onClick:v[3]||(v[3]=K=>e.$emit("on-close"))},"No, cancel it.")])])):E("",!0)]),e.isShowAccept?(T(),U("div",Kn,[Gn,Q(ne,{class:"accept-btn",loading:e.swapLoading,onClick:v[4]||(v[4]=K=>e.$emit("accept"))},{default:ce(()=>[re("Accept")]),_:1},8,["loading"])])):(T(),oe(ne,{key:1,class:"big-btn swap-confirm-btn modal-bottom-btn",disabled:Number(e.priceExangeRate)>10&&!e.readWithin,onClick:v[5]||(v[5]=K=>e.clickNextBtn())},{default:ce(()=>[re(O(e.$t("button.confirmSwap")),1)]),_:1},8,["disabled"]))]}),_:1},8,["title"])}const Xn=Ro(xa,[["render",Qn],["__scopeId","data-v-30b90b55"]]),Zn=$o({components:{AggregatorSettingModal:Ga,RouterModal:Qa,UnderlineTab:Za,NewAssetsCard:Va,IconTooltip:_a,SuiSwapConfirm:Xn},setup(){const e=Fa(),v=Ba(ja,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),{t:z,locale:k}=Ua(),q=jo(),ae=Bo(),l=A(()=>ae);let ne=d(!1),D=d(!0),J=d(!1),de=d(!1),K=d(!1),te=d(!1);const pe=d("fromCoin"),se=d(""),ye=d(""),$e=d(!1),f=d(!0),Re=d(!1),$=d(!1),C=d(!1),i=d(""),r=d(""),w=d(20),R=d(0),H=d(null),M=d(!1),_=A(()=>q.slippage),b=A(()=>q.chainName),B=A(()=>b.value?Ya(b.value):{}),W=A(()=>Xa()),n=d(),t=d(),Xe=A(()=>Se&&Se[b.value]&&Se[b.value].hasRouter),to=A(()=>ae.getPoolInfoSuccess),Uo=A(()=>{var o;return h.value&&((o=h.value)!=null&&o.is_pause)?"Pool Closed":!n.value||!t.value?z("modal.selectTokenModalTitle"):!Number(i.value)&&!Number(r.value)?z("button.enterAmount"):!Xe.value&&!h.value&&to.value?"Pool Not Found":Xe.value&&Pe.value?"No Available Route":M.value?z("button.insufficientLiquidity"):Number(i.value)>Number(Z.value)?z("button.insufficientBalance",{name:n.value.symbol}):z("button.swap")}),Lo=o=>{var s,a,g,p;pe.value=o,o==="fromCoin"?(se.value=((s=t.value)==null?void 0:s.address)||"",ye.value=((a=n.value)==null?void 0:a.address)||""):(se.value=((g=n.value)==null?void 0:g.address)||"",ye.value=((p=t.value)==null?void 0:p.address)||""),$e.value=!0},Ze=d({}),Ve=d({}),Eo=o=>{pe.value==="fromCoin"?(Ze.value=o,xe(o)):(Ve.value=o,xe(o))},qo=o=>{o==="fromCoin"?(f.value=!0,b.value==="Aptos"?i.value=Z.value>0?n.value.symbol=="APT"?new m(Number(Z.value)).sub(new m(.1)).lt(new m(0))?"0":new m(Number(Z.value)).sub(new m(.1)).toString():String(Z.value):"":i.value=Z.value>0?n.value.symbol=="SUI"?new m(Number(Z.value)).sub(new m(.05)).lt(new m(0))?"0":new m(Number(Z.value)).sub(new m(.05)).toString():String(Z.value):""):(f.value=!1,b.value==="Aptos"?r.value=x.value>0?t.value.symbol=="APT"?new m(Number(x.value)).sub(new m(.1)).lt(new m(0))?"0":new m(Number(x.value)).sub(new m(.1)).toString():String(x.value):"":r.value=x.value>0?t.value.symbol=="SUI"?new m(Number(x.value)).sub(new m(.05)).lt(new m(0))?"0":new m(Number(x.value)).sub(new m(.05)).toString():String(x.value):"")},Wo=o=>{o==="fromCoin"?(f.value=!0,i.value=Z.value>0?Ne(new m(Number(Z.value)).div(2).toString(),n.value.decimals).toString():""):(f.value=!1,r.value=x.value>0?Ne(new m(Number(x.value)).div(2).toString(),t.value.decimals).toString():"")},_e=d(!1);La(()=>{so(),window.addEventListener("updateSwapParams",o=>{_e.value=!_e.value})}),Ea(()=>{clearInterval(H.value)}),A(()=>q);const De=()=>{var o,s,a,g,p;console.log("🚀 ~ file: swap-sui.vue:785 ~ clickRefresh ~:"),!D.value&&(!h.value&&!Xe.value||(clearInterval(H.value),R.value=0,D.value=!0,le.value||Oe(f.value?i.value:r.value),X.value.address&&B.value.getAccount(X.value.address),setTimeout(()=>{D.value=!1,so()},1e3),console.log("🚀 ~ file: swap-sui.vue:805 ~ clickRefresh ~ pools?.value?.RATES11111:",(o=l==null?void 0:l.value)==null?void 0:o.RATES),(!((s=l==null?void 0:l.value)!=null&&s.RATES)||Le((a=l==null?void 0:l.value)==null?void 0:a.RATES))&&(console.log("🚀 ~ file: swap-sui.vue:805 ~ clickRefresh ~ pools?.value?.RATES2222:",(g=l==null?void 0:l.value)==null?void 0:g.RATES),(p=l==null?void 0:l.value)==null||p.setRates("Sui"))))};console.log("🚀 ~ file: swap-sui.vue:811 ~ clickRefresh ~ clickRefresh:",De);const so=()=>{H.value=setInterval(()=>{D.value=!1,Re.value||R.value<w.value&&(R.value+=1,R.value===w.value&&(b.value=="Aptos"?(h.value&&h.value.poolAddress&&ae.updateCurrentPools(h.value.poolAddress,b.value),De()):te.value||De(),R.value=0,D.value=!0))},1e3)};V(f,To((o,s)=>{f.value=o},500));const ve=d(!1);V(i,(o,s)=>{o&&o!==0&&f.value&&(R.value=0,Ke(Oe(o),800)),o==""&&f.value&&(r.value="")}),V(r,(o,s)=>{o&&o!==0&&!f.value&&(R.value=0,Ke(Oe(o),800)),o==""&&!f.value&&(i.value="")});const He=d(1e-4),Ye=async o=>{let s=o;if(b.value==="Aptos"&&!s.current_sqrt_price&&i.value&&r.value){const a=await B.value.getPools([s.address]);a&&a[0]&&(s={...o,...a[0],fee:Number(a[0].fee_rate)/1e6})}if(s.current_sqrt_price&&i.value&&r.value){const g=(n.value.address===s.coinA.address&&t.value.address===s.coinB.address?0:1)==0,p=new m(i.value),S=new m(r.value),y=p.sub(p.mul(new m(s.fee))),N=S.div(y);return B.value.getPriceImpactPct(s,N.toString(),g)}return"--"},lo=d(0),io=d(0),uo=d(),Me=d({}),Do=async o=>{if(h.value&&(le.value=!0,!(f.value&&Number(i.value)==0)&&!(!f.value&&Number(r.value)==0))){if(n.value&&t.value&&(i.value||r.value)){$.value=!0,C.value=!0,M.value=!1;const s=n.value.address===h.value.coinA.address&&t.value.address===h.value.coinB.address?0:1;try{let a=await B.value.preSwap({pool:h.value,a2b:s==0,byAmountIn:f.value,amount:f.value?i.value:r.value});M.value=a==null?void 0:a.isExceed,uo.value=a==null?void 0:a.estimatedFeeAmount,f.value?(r.value=a.estimatedAmountOut,we.value=(Number(a.estimatedAmountOut)/o).toString(),ge.value=(o/Number(a.estimatedAmountOut)).toString()):(i.value=a.estimatedAmountIn,we.value=(o/Number(a.estimatedAmountIn)).toString(),ge.value=(Number(a.estimatedAmountIn)/o).toString()),lo.value=new m(r.value).div(i.value).toString(),io.value=new m(i.value).div(r.value).toString(),He.value=b.value=="Aptos"?await Ye(h.value):await Ye(Me.value||h.value),$.value=!1,C.value=!1}catch(a){console.log("pre swap error1",a),$.value=!1,C.value=!1}}else f.value?r.value="":i.value="",$.value=!1,C.value=!1;le.value=!1}},Ho=Ka(),X=A(()=>Ho),Yo=d({}),ge=d(""),we=d(""),Z=A(()=>X.value.assets&&n.value&&X.value.assets[n.value.address]?Oo(X.value.assets[n.value.address].balance,n.value.decimals):0),x=A(()=>X.value.assets&&t.value&&X.value.assets[t.value.address]?Oo(X.value.assets[t.value.address].balance,t.value.decimals):0);V(()=>l.value.tokensObj,async o=>{if(o&&!Le(o)){const s=e?e.currentRoute.value.query.to:"",a=e?e.currentRoute.value.query.from:"";a?n.value=o[a]||await B.value.getTokenBySymbol(o,a):!a&&!n.value&&(n.value=o[Se[b.value].swapDefaultPair.fromCoin]),s?t.value=o[s]||await B.value.getTokenBySymbol(o,s):!s&&!t.value&&(t.value=o[Se[b.value].swapDefaultPair.toCoin],console.log("🚀🚀🚀 ~ file: swap.vue:1014 ~ setup ~ newValue:",o),console.log("🚀🚀🚀 ~ file: swap.vue:1014 ~ setup ~ onfig[chainName.value].swapDefaultPair.toCoin:",Se[b.value].swapDefaultPair.toCoin)),!a&&s&&(n.value="")}},{immediate:!0});const h=A(()=>{var o,s,a,g,p;if(n.value&&t.value){let S=null,y={};if(Object.values(l.value.poolConfigList).forEach(c=>{var I,L,j,F;(c.coinA.address.toUpperCase()===((I=n.value.address)==null?void 0:I.toUpperCase())&&c.coinB.address.toUpperCase()===((L=t.value.address)==null?void 0:L.toUpperCase())||c.coinB.address.toUpperCase()===((j=n.value.address)==null?void 0:j.toUpperCase())&&c.coinA.address.toUpperCase()===((F=t.value.address)==null?void 0:F.toUpperCase()))&&(y[c.address]={...c})}),b.value=="Aptos"&&l.value.poolsObj&&!Le(l.value.poolsObj))for(const c in l.value.poolsObj){const I=l.value.poolsObj[c];(I.token_a.address.toUpperCase()===((o=n.value.address)==null?void 0:o.toUpperCase())&&I.token_b.address.toUpperCase()===((s=t.value.address)==null?void 0:s.toUpperCase())||I.token_b.address.toUpperCase()===((a=n.value.address)==null?void 0:a.toUpperCase())&&I.token_a.address.toUpperCase()===((g=t.value.address)==null?void 0:g.toUpperCase()))&&(y[I.address]={...I})}const N=Object.values(y).sort((c,I)=>c.fee-I.fee);for(let c=0;c<N.length;c++)if(!((p=N[c])!=null&&p.is_pause)){S=N[c];break}return S&&!Le(S)?(console.log("🚀🚀🚀 ~ file: swap.vue:1094 ~ poolInfo ~ info:",S),S):null}return null}),ro=d(!0),vo=d(!1),zo=async o=>{o&&b.value=="Aptos"&&(Oe(f.value?i.value:r.value),vo.value=!0,o.coinA.symbol.toLowerCase()===n.value.symbol.toLowerCase()&&o.coinB.symbol.toLowerCase()===t.value.symbol.toLowerCase()?ro.value=!0:ro.value=!1,M.value=!1)};V(()=>h.value,(o,s)=>{o&&(!s||o.address!==s.address||o.current_sqrt_price!==s.current_sqrt_price)&&zo(o)},{immediate:!0,deep:!0});const Jo=A(()=>l.value.tokensObj&&n.value&&n.value.address&&l.value.tokensObj[n.value.address]&&l.value.tokensObj[n.value.address].logoURI),Ko=A(()=>l.value.tokensObj&&t.value&&t.value.address&&l.value.tokensObj[t.value.address]&&l.value.tokensObj[t.value.address].logoURI),Go=A(()=>b.value==="Aptos"?l.value.tokensObj&&n.value&&n.value.address&&l.value.tokensObj[n.value.address]&&l.value.tokensObj[n.value.address].coingecko_id||null:l.value.tokensObj&&n.value&&n.value.address||null),Qo=A(()=>b.value==="Aptos"?l.value.tokensObj&&t.value&&t.value.address&&l.value.tokensObj[t.value.address]&&l.value.tokensObj[t.value.address].coingecko_id||null:l.value.tokensObj&&t.value&&t.value.address||null),Xo=A(()=>{var o,s,a,g,p,S,y,N,c,I,L,j,F;return console.log("🚀🚀🚀 ~ file: swap.vue:1222 ~ formCoinMarket ~ pools?.value?.tokensObj:",(o=l==null?void 0:l.value)==null?void 0:o.tokensObj),(g=(a=l==null?void 0:l.value)==null?void 0:a.tokensObj[(s=n==null?void 0:n.value)==null?void 0:s.address])!=null&&g.pyth_id&&((y=(S=l==null?void 0:l.value)==null?void 0:S.tokensObj[(p=n==null?void 0:n.value)==null?void 0:p.address])==null?void 0:y.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(I=(c=l==null?void 0:l.value)==null?void 0:c.tokensObj[(N=n==null?void 0:n.value)==null?void 0:N.address])!=null&&I.coingecko_id?"coingecko":(F=(j=l==null?void 0:l.value)==null?void 0:j.tokensObj[(L=n==null?void 0:n.value)==null?void 0:L.address])!=null&&F.birdeyeid?"birdeye":null}),Zo=A(()=>{var o,s,a,g,p,S,y,N,c,I,L,j;return(a=(s=l==null?void 0:l.value)==null?void 0:s.tokensObj[(o=t==null?void 0:t.value)==null?void 0:o.address])!=null&&a.pyth_id&&((S=(p=l==null?void 0:l.value)==null?void 0:p.tokensObj[(g=t==null?void 0:t.value)==null?void 0:g.address])==null?void 0:S.pyth_id)!=="0x0000000000000000000000000000000000000000000000000000000000000000"?"pyth":(c=(N=l==null?void 0:l.value)==null?void 0:N.tokensObj[(y=t==null?void 0:t.value)==null?void 0:y.address])!=null&&c.coingecko_id?"coingecko":(j=(L=l==null?void 0:l.value)==null?void 0:L.tokensObj[(I=t==null?void 0:t.value)==null?void 0:I.address])!=null&&j.birdeyeid?"birdeye":null}),Vo=A(()=>{var g,p;const o=new m(i.value),s=new m(b.value=="Aptos"?(g=h==null?void 0:h.value)==null?void 0:g.fee:(p=Me==null?void 0:Me.value)==null?void 0:p.fee),a=o.mul(s).toString();return Number(a)<1/Math.pow(10,n.value.decimals)?`<${new m(1).div(new m(Math.pow(10,n.value.decimals))).toString()}`:Ne(a,n.value.decimals)}),{setIsShowSuccess:_o,setIsShowRejected:co,setIsShowWaiting:ze,setTransactionDesc:xo,setTransactionTxid:mo}=q,ea=async()=>{var s,a,g,p,S,y,N,c,I,L;te.value=!1,$.value=!0,clearInterval(Ee),window.clearInterval(Ee),mo(""),xo(z("tips.swapping",{from:`${Y(i.value)} ${(s=n.value)==null?void 0:s.symbol}`,to:`${Y(r.value)} ${(a=t.value)==null?void 0:a.symbol}`})),ze(!0);let o;b.value=="Aptos"&&(o=n.value.address===h.value.token_a.address&&t.value.address===h.value.token_b.address?0:1);try{let j;if(b.value=="Aptos")j=await B.value.getSwapTransactionPayload({pool:h.value,a2b:o==0,byAmountIn:f.value,amount:f.value?i.value:r.value,slippage:Number(_.value)/100});else{const ee=f.value,be=Number(_.value)/100;j=await((g=W==null?void 0:W.value)==null?void 0:g.getRouterSwapPayload(P.value,ee,be,n,t))}console.log("0221####swap###swapPayload###",j);let F;if(b.value==="Aptos")F=await X.value.currentWallet.signAndSubmitTransaction(j);else{const ee=await B.value.signAndExecuteTransactionBlock(X.value.currentWallet,j,{action:"AggregatorSwap"});console.log("0221###sui swap res###",ee),F=B.value.handleTx(ee),console.log("0221###swap###sui##tx###",F)}if(F&&F.hash){mo(F.hash),ze(!1),_o(!0);const ee={title:z("tips.swap"),desc:z("tips.swapSuccessText",{from:`${Y(i.value)} ${(p=n.value)==null?void 0:p.symbol}`,to:`${Y(r.value)} ${(S=t.value)==null?void 0:S.symbol}`}),hash:F.hash,tit:"Swap",type:"liquidity",action:"swap",isHaveSui:n.value.address==Se[b.value].currentChainTokenAddress||t.value.address==Se[b.value].currentChainTokenAddress,icon:"icon-icon-swap1",tokenInfo:{tokena:`${(y=n.value)==null?void 0:y.address}`,numa:`- ${i.value}`,logoa:l.value.tokensObj&&n.value&&n.value.address&&l.value.tokensObj[n.value.address]&&l.value.tokensObj[n.value.address].logoURI,tokenb:`${(N=t.value)==null?void 0:N.address}`,numb:`+ ${r.value}`,logob:l.value.tokensObj&&t.value&&t.value.address&&l.value.tokensObj[t.value.address]&&l.value.tokensObj[t.value.address].logoURI},text:`Pay ${i.value} ${(c=n.value)==null?void 0:c.symbol} to receive ${r.value} ${(I=t.value)==null?void 0:I.symbol}`,excecuteTime:(L=F==null?void 0:F.res)==null?void 0:L.excecuteTime};b.value!=="Aptos"&&(ee.res=F.res),B.value.showTransitionPending(ee);const be=await B.value.watchTransaction(ee);console.log("0221###swap###transitionStatus####",be),be&&setTimeout(()=>{b.value=="Aptos"&&ae.updateCurrentPools(h.value.poolAddress,b.value),B.value.getAccount(X.value.address)},1e3)}else ze(!1),co(!0);i.value="",r.value="",$.value=!1}catch(j){i.value="",r.value="",console.log("Swap Error###",j),$.value=!1,ze(!1),co(!0)}},oa=o=>{var s;return(o==null?void 0:o.logoURI)||(o==null?void 0:o.logo_url)||((s=l.value.tokensObj[o==null?void 0:o.address])==null?void 0:s.logo_url)||(q.theme==="default"?We("/image/coins/unknown.png"):We("/image/coins/sui-unknown.png"))},fo=d([]);V(()=>[n.value,t.value,l.value.poolConfigList],([o,s,a])=>{if(a&&a.length>0&&o&&s){const g=[];a.forEach(p=>{var S,y,N,c;(p.coinA.address.toUpperCase()===((S=o.address)==null?void 0:S.toUpperCase())&&p.coinB.address.toUpperCase()===((y=s.address)==null?void 0:y.toUpperCase())||p.coinB.address.toUpperCase()===((N=o.address)==null?void 0:N.toUpperCase())&&p.coinA.address.toUpperCase()===((c=s.address)==null?void 0:c.toUpperCase()))&&(p!=null&&p.is_pause||g.push(p.address))}),fo.value=g}},{immediate:!0});const xe=o=>{console.log("🚀 ~ getTokenSource ~ token:",o);const s=q.importTokenListObj;console.log("🚀🚀🚀 ~ file: swap.vue:1499 ~ getTokenSource ~ !importTokenListObj?.hasOwnProperty(token?.address):",!(s!=null&&s.hasOwnProperty(o==null?void 0:o.address))),o!=null&&o.isSelfBuilt&&!(s!=null&&s.hasOwnProperty(o==null?void 0:o.address))?eo.value=!0:(pe.value==="fromCoin"?(t.value&&o.address.toLowerCase()===(t==null?void 0:t.value.address.toLowerCase())&&(t.value=null),n.value=o,i.value=i.value>0?Ae(i.value,o==null?void 0:o.decimals):""):(n.value&&o.address.toLowerCase()===(n==null?void 0:n.value.address.toLowerCase())&&(n.value=null),t.value=o,r.value=r.value>0?Ae(r.value,o==null?void 0:o.decimals):""),po())},eo=d(!1),po=()=>{Ve.value={},Ze.value={},eo.value=!1},aa=A(()=>q.isShowRouterModal),Ie=d([]),go=d(""),na=d(!1),wo=Ha();A(()=>wo);const Pe=d(!1),P=d({}),ta=d(""),sa=d(),le=d(!1),Je=d(0),oo=async o=>{var s,a;if(console.log("🚀🚀🚀 ~ file: swap.vue:1954 ~ getSuiAmount ~ getSuiAmount:"),le.value=!0,M.value=!1,n.value&&t.value&&(Number(i.value)>0&&f.value||Number(r.value)>0&&!f.value)){console.log("🚀🚀🚀 ~ file: swap.vue:1954 ~ getSuiAmount ~ getSuiAmount:1"),(!i.value&&r.value||i.value&&!r.value)&&($.value=!0),ge.value="",we.value="",ve.value=!0,Pe.value=!1;let g;h.value&&(g=n.value.address===h.value.coinA.address&&t.value.address===h.value.coinB.address?0:1);try{let p;if(f.value){const I=new m(i.value).mul(Math.pow(10,n.value.decimals)).toString();p=new Ge(I)}else{const I=new m(r.value).mul(Math.pow(10,t.value.decimals)).toString();p=new Ge(I)}const S=Number(_.value)/100,y=h.value?{poolAddresses:fo.value,coinTypeA:h.value.coin_a_address,coinTypeB:h.value.coin_b_address,decimalsA:h.value.coinA.decimals,decimalsB:h.value.coinB.decimals,a2b:g==0,byAmountIn:f.value,amount:p.toString()}:"";console.log("🚀🚀🚀 ~ file: swap.vue:1827 ~ setup ~ fromCoin:",n),console.log("🚀🚀🚀 ~ file: swap.vue:1827 ~ setup ~ toCoin:",t),console.log("🚀🚀🚀 ~ file: swap.vue:1827 ~ setup ~ coinAmount:",p),console.log("🚀🚀🚀 ~ file: swap.vue:1827 ~ setup ~ fixedFromCoin.value:",f.value);const N=Je.value+1;Je.value=N;const c=await((s=W==null?void 0:W.value)==null?void 0:s.getFindRouter(n,t,p.toString(),f.value,S,h.value?y:"",N));if(console.log("🚀 ~ file: swap-sui.vue:1881 ~ getSuiAmount ~ swapRouter:",c),console.log("🚀 ~ file: swap-sui.vue:1881 ~ getSuiAmount ~ swapRouter JSON:",JSON.stringify(c,null,2)),console.log("🚀 ~ file: swap-sui.vue:1881 ~ getSuiAmount ~ suiAmountId.value:",Je.value),console.log("🚀 ~ file: swap-sui.vue:1881 ~ getSuiAmount ~ swapRouter.id:",c==null?void 0:c.id),Je.value!==(c==null?void 0:c.id)){ve.value=!1,le.value=!1,$.value=!1,P.value={},Ie.value=[],f.value?r.value="":i.value="";return}if(c!=null&&c.insufficientLiquidity){M.value=!0,ve.value=!1,le.value=!1,$.value=!1,P.value={},Ie.value=[],f.value?r.value="":i.value="";return}if(!c||!(c!=null&&c.routes)||((a=c==null?void 0:c.routes)==null?void 0:a.length)==0){$.value=!1,Pe.value=!0,ve.value=!1,le.value=!1,P.value={},Ie.value=[],i.value?r.value="":i.value="";return}if(c.fromCoinAddress!==n.value.address||c.toCoinAddress!==t.value.address){console.log("🚀🚀🚀 ~ file: swap.vue:1861 ~ getSuiAmount ~",c.fromCoinAddress!==n.value.address||c.toCoinAddress!==t.value.address),P.value={},Ie.value=[];return}c?(P.value=c,Ie.value=c.routes,M.value=!1,f.value?i.value&&(r.value=new m(c.amountOut).div(new m(Math.pow(10,t.value.decimals))).toString()):r.value&&(i.value=new m(c.amountIn).div(new m(Math.pow(10,n.value.decimals))).toString()),console.log(r.value,"###toCoinAmount.value"),ge.value=Y(Ae(new m(i.value).div(new m(r.value).toString()),n.value.decimals)),we.value=Y(Ae(new m(r.value).div(i.value).toString(),t.value.decimals)),$.value=!1,Pe.value=!1,ve.value=!1):($.value=!1,Pe.value=!0,ve.value=!1)}catch(p){console.log("pre swap error2",p),$.value=!1,ve.value=!1,le.value=!1}}else f.value?r.value="":i.value="",$.value=!1,ve.value=!1;le.value=!1,console.log("🚀🚀🚀 ~ file: swap.vue:1926 ~ getSuiAmount ~ isRoutrProgress.value:",le.value)},Te=d(!1),Co=async o=>{var s;try{let a;if(f.value){const S=new m(i.value).mul(Math.pow(10,n.value.decimals)).toString();a=new Ge(S)}else{const S=new m(r.value).mul(Math.pow(10,t.value.decimals)).toString();a=new Ge(S)}const g=Number(_.value)/100,p=await((s=W==null?void 0:W.value)==null?void 0:s.getFindRouter(n,t,a.toString(),f.value,g,""));if(p){P.value=p,Ie.value=p.routes,M.value=!1,go.value=p.amountIn,ge.value=Y(Ae(new m(i.value).div(new m(r.value).toString()),n.value.decimals)),we.value=Y(Ae(new m(r.value).div(i.value).toString(),t.value.decimals));const S=new m(p.amountOut).div(new m(Math.pow(10,t.value.decimals))).toString(),y=new m(p.amountIn).div(new m(Math.pow(10,n.value.decimals))).toString();f.value?r.value!==S&&(Te.value=!0,r.value=S):i.value!==y&&(Te.value=!0,i.value=y)}}catch(a){console.log("pre swap error3",a)}},la=async o=>{if(n.value&&t.value&&(i.value||r.value)){const s=n.value.address===h.value.coinA.address&&t.value.address===h.value.coinB.address?0:1;try{let a=await B.value.preSwap({pool:h.value,a2b:s==0,byAmountIn:f.value,amount:f.value?i.value:r.value});M.value=a==null?void 0:a.isExceed,uo.value=a==null?void 0:a.estimatedFeeAmount,f.value?(we.value=(Number(a.estimatedAmountOut)/a.estimatedAmountIn).toString(),ge.value=(a.estimatedAmountIn/Number(a.estimatedAmountOut)).toString()):(we.value=(Number(a.estimatedAmountOut)/Number(a.estimatedAmountIn)).toString(),ge.value=(Number(a.estimatedAmountIn)/Number(a.estimatedAmountOut)).toString()),f.value?r.value!==a.estimatedAmountOut&&(Te.value=!0,r.value=a.estimatedAmountOut):i.value!==a.estimatedAmountIn&&(Te.value=!0,i.value=a.estimatedAmountIn),He.value=b.value=="Aptos"?await Ye(h.value):await Ye(Me.value||h.value),$.value=!1,C.value=!1}catch(a){console.log("pre swap error4",a),$.value=!1,C.value=!1}}else $.value=!1,C.value=!1};let Ee=d(null);V(()=>te.value,o=>{o?Ee.value=setInterval(()=>{b.value=="Aptos"?la(f.value):Co(f.value)},3e3):(clearInterval(Ee.value),window.clearInterval(Ee.value))},{immediate:!0});const Oe=async o=>{b.value=="Aptos"?Do(o):oo()};V(()=>_e.value,o=>{(Number(i.value)>0||Number(r.value)>0)&&Oe(f.value?i.value:r.value)},{immediate:!0});const ia=A(()=>wo),bo=A(()=>ia.value.isInitRouter);V(()=>bo.value,o=>{o||(R.value=0,Oe(f.value?i.value:r.value))},{immediate:!0});function Ke(o,s=500){let a=null;return function(...g){clearTimeout(a),a=setTimeout(()=>{o.call(this,...g)},s)}}V(()=>[n.value,t.value],([o,s])=>{if(console.log("🚀🚀🚀 ~ file: swap.vue:2181 ~ setup ~ fromCoin && toCoin:",o&&s),o&&s&&(R.value=0,Ke(Oe(f.value?i.value:r.value))),o||s){console.log("🚀🚀🚀 ~ file: swap.vue:1965 ~ setup ~ fromCoin:",o);const a=`/swap?from=${o==null?void 0:o.address}&to=${s==null?void 0:s.address}`;e.push(a)}},{immediate:!0,deep:!0});const ua=Ke(ho);function ho(){const o=n.value;n.value=t.value,t.value=o,ne.value=!0,Ce.value=="open"?f.value=!0:f.value=!f.value,f.value?(i.value=r.value,r.value=""):(r.value=i.value,i.value=""),setTimeout(()=>{ne.value=!1},300)}const ra=()=>{Te.value=!1},da=()=>{te.value=!1,Te.value=!1},va=[{label:"Swap",value:"swap",link:"/swap"},{label:"Limit",value:"limit",link:"/limit"},{label:"DCA",value:"dca",link:"/dca",isHaveBeta:!0}],ca=d("Swap"),So=d(!1),ao=A(()=>{var o,s,a,g,p,S,y,N,c,I,L,j,F,ee;try{if((o=n==null?void 0:n.value)!=null&&o.address&&((s=t==null?void 0:t.value)!=null&&s.address)&&(P!=null&&P.value)&&!Le(P==null?void 0:P.value)){const be=Ue((a=P==null?void 0:P.value)==null?void 0:a.amountIn).div(Math.pow(10,(g=n.value)==null?void 0:g.decimals)),Aa=Ue((p=P==null?void 0:P.value)==null?void 0:p.amountOut).div(Math.pow(10,(S=t.value)==null?void 0:S.decimals)),he=Ue(Aa).div(be);console.log("🚀🚀🚀 ~ file: swap.vue:2259 ~ suiPriceImpact ~ currentSwapRate:",he==null?void 0:he.toString());const ie=(c=(y=l==null?void 0:l.value)==null?void 0:y.RATES)==null?void 0:c[(N=n==null?void 0:n.value)==null?void 0:N.address];console.log("🚀🚀🚀 ~ file: swap.vue:2259 ~ suiPriceImpact ~ fromCoinRate:",ie);const ue=(j=(I=l==null?void 0:l.value)==null?void 0:I.RATES)==null?void 0:j[(L=t==null?void 0:t.value)==null?void 0:L.address];if(console.log("🚀🚀🚀 ~ file: swap.vue:2259 ~ suiPriceImpact ~ toCoinRate:",ue),!(ie!=null&&ie.price)||!(ue!=null&&ue.price)||Ue(ie==null?void 0:ie.price).lte(0)||Ue(ue==null?void 0:ue.price).lte(0))throw Error("rate invalid");const Fe=Ue(ie==null?void 0:ie.price).div(ue==null?void 0:ue.price);if(console.log("🚀🚀🚀 ~ file: swap.vue:2259 ~ suiPriceImpact ~ marketRate:",Fe==null?void 0:Fe.toString()),he.gt(Fe)){const G=he.minus(Fe).div(he).mul(100);return console.log("🚀🚀🚀 ~ file: swap.vue:2259 ~ suiPriceImpact ~ result1:",G==null?void 0:G.toString()),No((F=G==null?void 0:G.negated())==null?void 0:F.toString(),2)}else{const G=he.minus(Fe).div(he).mul(100);return console.log("🚀🚀🚀 ~ file: swap.vue:2259 ~ suiPriceImpact ~ result2:",G==null?void 0:G.toString()),No((ee=G==null?void 0:G.abs())==null?void 0:ee.toString(),2)}}return}catch(be){return console.log("🚀🚀🚀 ~ file: swap.vue:2271 ~ suiPriceImpact ~ error:",be),"Incalculable"}}),ma=A(()=>(b==null?void 0:b.value)==="Aptos"?He.value:ao==null?void 0:ao.value),Ce=d(localStorage.getItem("plusChecked1"))||d("close"),fa=A(()=>q.liquiditySourceList),pa=o=>{console.log("🚀 ~ modalConfirm ~ result121:",o),o&&o.length>0?o.every(a=>a.name=="Cetus"?!0:a.status==="close")?Ce.value="close":(Ce.value="open",r.value=""):Ce.value="close",So.value=!1},ga=A(()=>q.includeRoutes),Ao=o=>{Ce.value=Ce.value=="open"?"close":"open",localStorage.setItem("plusChecked1",Ce.value);const s=ga.value,a=fa.value;a.forEach(g=>{o?g.status="open":g.name!=="Cetus"?g.status="close":g.status="open"}),console.log("🚀 ~ //clickCheckedresult ~ arr:",a,s),q.setAggregatorSetting(a,s)},ko=()=>{const o=window.innerWidth,s=window.innerHeight,a=document.getElementById("plusModeSwitch"),g=a==null?void 0:a.getBoundingClientRect(),p=g==null?void 0:g.left,S=g==null?void 0:g.top;console.log("🚀🚀🚀 ~ file: swap.vue:2299 ~ triggerConfettiAnimation ~ x:",p),console.log("🚀🚀🚀 ~ file: swap.vue:2299 ~ triggerConfettiAnimation ~ y:",S),console.log("🚀🚀🚀 ~ file: swap.vue:2299 ~ triggerConfettiAnimation ~ viewportWidth:",o),console.log("🚀🚀🚀 ~ file: swap.vue:2299 ~ triggerConfettiAnimation ~ viewportHeight:",s);const y=2,N=qe.shapeFromText({text:"🟢",scalar:y}),c=qe.shapeFromText({text:"🔵",scalar:y}),I=qe.shapeFromText({text:"💚",scalar:y}),L=qe.shapeFromText({text:"💙",scalar:y});qe({particleCount:40,spread:60,shapes:[N,c,I,L],scalar:y,origin:{x:p/o,y:S*1.2/s}})},wa=o=>{console.log("🚀🚀🚀 ~ file: swap.vue:2264 ~ handleSwitchPlusMode ~ value:",o),i.value="",r.value="",o&&ko(),Ao(o),setTimeout(()=>{oo()},500)},yo=d(!1),Ca=o=>{yo.value=o},Io=d(!1),ba=o=>{console.log("🚀 ~ file: swap-sui.vue:2341 ~ onInputToCoinLoading ~ status:",o),Io.value=o},ha=d(!0),Sa=d(!1);return{isAddCardTopPadding:ha,isAddCardBottomPadding:Sa,modalConfirm:pa,clickChecked:Ao,currentTradeTab:ca,plusChecked:Ce,closeSwapConfirmModal:da,updateAccept:ra,clickExchange:ho,debounceClickExchange:ua,closeTokenWarning:po,isShowTokenWarning:eo,getTokenSource:xe,hasPool:vo,getPoolInfoSuccess:to,halfBtnSelect:Wo,formCoinId:Go,toCoinId:Qo,formCoinMarket:Xo,toCoinMarket:Zo,fromCoinUrl:Jo,toCoinUrl:Ko,t:z,indicator:v,wallet:X,currentLpInfo:Yo,fixD:za,decimalFormat:Ja,impact:He,oneFromAmount:ge,oneToAmount:we,importIcon:We,clickRefresh:De,refresh:D,change:ne,isShowAddress:J,isShowSwapSetting:de,fromCoin:n,toCoin:t,slippage:_,openCoinSelect:Lo,onCoinSelect:Eo,existingCoins:se,lastSelectCoin:ye,currentCoinKey:pe,showCoinSelect:$e,fromCoinAmount:i,toCoinAmount:r,maxBtnSelect:qo,fixedFromCoin:f,swapBtnText:Uo,toSwap:ea,loading:Re,swaping:$,autoRefreshTime:w,countdown:R,marketTimer:H,rateChange:K,isSwapConfirmMpdal:te,fromCoinBlance:Z,toCoinBlance:x,poolInfo:h,chainName:b,swapRouterLoading:ve,formatFee:Vo,calculating:C,currentRate:lo,currentRateReverse:io,getCoinIcon:oa,toAddLiquidiPoolInfo:Me,decimalUi:Ae,warningToCoin:Ve,warningFromCoin:Ze,isShowRouterModal:aa,toSwapLoading:na,insufficientLiquidity:M,routerPool:Ie,routerTotalAmounts:go,store:q,suiPreSwapdata:P,suiSwapFee:sa,suiSwapFeeUi:ta,addCommom:Y,debounce:To,notFoundRouter:Pe,getSuiAmountAccept:Co,isShowAccept:Te,getSuiAmount:oo,tradeTabList:va,isInitSwapRouter:bo,isShowAggregatorModal:So,priceImpact:ma,triggerConfettiAnimation:ko,handleSwitchPlusMode:wa,assetLoading:yo,onInputLoading:Ca,onInputToCoinLoading:ba,assetToCoinLoading:Io}}});const Qe=e=>(Po("data-v-3a7e896c"),e=e(),Fo(),e),Vn={class:"swap-container pageHaveRadiusSkeleton"},_n={class:"sui-title"},xn={class:"right title-right"},et={key:0,class:me("icon-bg plus-switch")},ot=Qe(()=>u("p",null,[u("span",null,"Plus Mode")],-1)),at={class:"setting-right"},nt=Qe(()=>u("svg",{class:"icon","aria-hidden":"true"},[u("use",{"xlink:href":"#icon-icon_verticalslider"})],-1)),tt={class:"swap-card"},st=Wa('<div class="exchange-new" data-v-3a7e896c><svg class="icon icon-down" aria-hidden="true" data-v-3a7e896c><use xlink:href="#icon-icon_swap1" data-v-3a7e896c></use></svg><svg class="icon icon-swap" aria-hidden="true" data-v-3a7e896c><use xlink:href="#icon-tx_swap1" data-v-3a7e896c></use></svg></div>',1),lt=[st],it={class:"btn-info"},ut={key:0,class:"icon","aria-hidden":"true"},rt=Qe(()=>u("use",{"xlink:href":"#icon-icon-swap"},null,-1)),dt=[rt],vt={key:2,class:"token-info-container"},ct={class:"token-info-title"},mt=Qe(()=>u("span",{class:"coingecko"},"Price Reference",-1));function ft(e,v,z,k,q,ae){var r;const l=ke("UnderlineTab"),ne=Da,D=qa,J=ke("IconTooltip"),de=ka,K=ke("NewAssetsCard"),te=Mo,pe=Ia,se=Oa,ye=Na,$e=$a,f=Ta,Re=Ra,$=ke("RouterModal"),C=ke("SuiSwapConfirm"),i=ke("AggregatorSettingModal");return T(),U("div",Vn,[u("div",_n,[Q(l,{"tab-list":e.tradeTabList,"current-tab":"swap",onClickTab:v[0]||(v[0]=w=>e.$router.push(w.link))},null,8,["tab-list"]),u("div",xn,[Q(D,{"overlay-class-name":" new-tooltip-border-radius-color"},{title:ce(()=>[re(" The Plus Mode will aggregate external liquidity sources ")]),default:ce(()=>[e.chainName=="Sui"?(T(),U("div",et,[ot,Q(ne,{id:"plusModeSwitch",class:"liquidity-switch",checked:e.plusChecked=="open",onClick:v[1]||(v[1]=w=>{e.handleSwitchPlusMode(w)})},null,8,["checked"])])):E("",!0)]),_:1}),u("div",at,[e.chainName=="Sui"?(T(),U("div",{key:0,class:"aggregator-setting",onClick:v[2]||(v[2]=w=>e.isShowAggregatorModal=!0)},[Q(J,{type:"setting","xlink-href":"#icon-icon_set","have-bg":!0})])):E("",!0),Q(D,{"overlay-class-name":"new-style-tooltip new-tooltip-border-radius-color"},{title:ce(()=>[re(" Slippage Settings ")]),default:ce(()=>[u("div",{class:"slippage-icon",onClick:v[3]||(v[3]=w=>e.isShowSwapSetting=!0)},[u("div",{class:me(e.chainName=="Sui"?"icon-bg":"")},[nt,u("span",null,O(e.slippage)+"%",1)],2)])]),_:1}),u("div",{class:me(e.chainName=="Sui"?"icon-bg":"")},[Q(de,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])],2)])])]),u("div",tt,[u("div",{class:me(["card-container",[e.plusChecked=="open"?"toInputBlockDisabled input-block-add-top":"",e.isAddCardTopPadding?"input-block-add-top":"",e.isAddCardBottomPadding&&e.plusChecked!=="open"?"input-block-add-bottom":""]])},[Q(K,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":v[4]||(v[4]=w=>e.fromCoinAmount=w),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logo_url:"",address:e.fromCoin?e.fromCoin.address:"","swap-direction":"From","swap-loading":!e.fixedFromCoin&&e.fromCoin&&(e.swapRouterLoading||e.assetToCoinLoading),title:"You pay",onOnInputLoading:e.onInputLoading,onOnMax:v[5]||(v[5]=w=>e.maxBtnSelect("fromCoin")),onOnHalf:v[6]||(v[6]=w=>e.halfBtnSelect("fromCoin")),onOnInput:v[7]||(v[7]=w=>{e.fromCoinAmount=w}),onOnFocus:v[8]||(v[8]=()=>{e.fixedFromCoin=!0,e.isAddCardTopPadding=!0,e.isAddCardBottomPadding=!1}),onOnSelect:v[9]||(v[9]=w=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address","swap-loading","onOnInputLoading"]),Q(K,{modelValue:e.toCoinAmount,"onUpdate:modelValue":v[10]||(v[10]=w=>e.toCoinAmount=w),"input-value":e.toCoinAmount,havemax:!1,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direction":"To","coin-icon":e.toCoin?e.toCoin.logo_url:"",address:e.toCoin?e.toCoin.address:"",havehalf:!1,title:"You receive","input-disabled":e.chainName!=="Aptos"&&e.plusChecked=="open","swap-loading":e.fixedFromCoin&&e.toCoin&&(e.swapRouterLoading||e.assetLoading),onOnInputLoading:e.onInputToCoinLoading,onOnInput:v[11]||(v[11]=w=>{e.toCoinAmount=w}),onOnFocus:v[12]||(v[12]=()=>{e.fixedFromCoin=!1,e.isAddCardTopPadding=!1,e.isAddCardBottomPadding=!0}),onOnSelect:v[13]||(v[13]=w=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address","input-disabled","swap-loading","onOnInputLoading"]),u("div",{class:"new-sui-exchange",onClick:v[14]||(v[14]=(...w)=>e.debounceClickExchange&&e.debounceClickExchange(...w))},lt)],2)]),u("div",it,[Q(te,{disabled:e.wallet.connected?e.swaping||!e.fromCoin||!e.toCoin||!Number(e.fromCoinAmount)||!Number(e.toCoinAmount)||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||e.swapBtnText==e.$t("button.poolNotFound")||e.swapBtnText!==e.$t("button.swap")||((r=e.poolInfo)==null?void 0:r.is_pause)||e.swapRouterLoading:!1,class:"big-btn swap-btn",loading:e.swaping,onClick:v[15]||(v[15]=w=>e.wallet.connected?e.isSwapConfirmMpdal=!0:e.wallet.setIsShowWalletModal(!0))},{default:ce(()=>[e.wallet.connected?(T(),U("svg",ut,dt)):E("",!0),u("span",null,O(e.wallet.connected?e.swapBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled","loading"]),e.chainName=="Sui"&&!e.notFoundRouter&&e.fromCoin&&e.toCoin&&!e.insufficientLiquidity?(T(),oe(pe,{key:0,"swap-loading":e.swaping,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"form-coin-market":e.formCoinMarket,"to-coin-market":e.toCoinMarket,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"router-pool":e.routerPool,impact:e.priceImpact,"insufficient-liquidity":e.insufficientLiquidity,"one-to-amount":e.oneToAmount,"one-from-amount":e.oneFromAmount,"sui-pre-swapdata":e.suiPreSwapdata,"sui-swap-fee":e.suiSwapFeeUi,"swap-router-loading":e.swapRouterLoading},null,8,["swap-loading","from-coin-amount","to-coin-amount","from-coin","form-coin-market","to-coin-market","to-coin","fixed-from-coin","router-pool","impact","insufficient-liquidity","one-to-amount","one-from-amount","sui-pre-swapdata","sui-swap-fee","swap-router-loading"])):E("",!0)]),Q(se),e.showCoinSelect?(T(),oe(ye,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,"have-import-btn":!0,onOnSelect:e.onCoinSelect,onOnClose:v[16]||(v[16]=w=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):E("",!0),e.isShowSwapSetting?(T(),oe($e,{key:1,onOnClose:v[17]||(v[17]=w=>e.isShowSwapSetting=!1)})):E("",!0),e.chainName&&(e.formCoinMarket||e.toCoinMarket)?(T(),U("div",vt,[u("div",ct,[mt,Q(J,{type:"priceReference","xlink-href":"#icon-icon_tips"})]),e.fromCoin&&e.formCoinMarket?(T(),oe(f,{key:0,id:e.formCoinId,coin:e.fromCoin,market:e.formCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):E("",!0),e.toCoin&&e.toCoinMarket?(T(),oe(f,{key:1,id:e.toCoinId,coin:e.toCoin,market:e.toCoinMarket,refresh:e.refresh},null,8,["id","coin","market","refresh"])):E("",!0)])):E("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(T(),oe(Re,{key:3,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,"is-import-modal":!0,onClose:e.closeTokenWarning,onClickContinue:e.getTokenSource},null,8,["from-coin","to-coin","onClose","onClickContinue"])):E("",!0),e.isShowRouterModal?(T(),oe($,{key:4,"sui-pre-swapdata":e.suiPreSwapdata,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,onOnClose:v[18]||(v[18]=w=>e.store.setIsShowRouterModal(!1))},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount"])):E("",!0),e.isSwapConfirmMpdal?(T(),oe(C,{key:5,"sui-pre-swapdata":e.suiPreSwapdata,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,slippage:e.slippage,impact:e.priceImpact,"fixed-from-coin":e.fixedFromCoin,fee:e.chainName=="Sui"?e.suiSwapFeeUi:e.poolInfo.fee,"format-fee":e.chainName=="Sui"?e.suiSwapFeeUi:e.formatFee,"is-show-accept":e.isShowAccept,"swap-loading":e.swapRouterLoading,"one-from-amount":e.oneFromAmount,"one-to-amount":e.oneToAmount,onOnClose:e.closeSwapConfirmModal,onToSwap:e.toSwap,onAccept:e.updateAccept},null,8,["sui-pre-swapdata","from-coin","to-coin","from-coin-amount","to-coin-amount","slippage","impact","fixed-from-coin","fee","format-fee","is-show-accept","swap-loading","one-from-amount","one-to-amount","onOnClose","onToSwap","onAccept"])):E("",!0),e.isShowAggregatorModal?(T(),oe(i,{key:6,onClose:v[19]||(v[19]=w=>e.isShowAggregatorModal=!1),onModalConfirm:v[20]||(v[20]=w=>{e.modalConfirm(w)})})):E("",!0)])}const Qt=Ro(Zn,[["render",ft],["__scopeId","data-v-3a7e896c"]]);export{Qt as default};
