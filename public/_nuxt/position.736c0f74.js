import{_ as _o}from"./pool-position-tab.28558243.js";import{a as q,e as x,o as t,f as a,h as e,F as H,E as K,c as D,G as h,i as c,a4 as fo,S as go,p as X,k as Z,x as y,z as to,m as p,r as R,C as mo,y as lo,I as M,D as Q,b as ho,A as Y,u as z,w as oo,B as ko,j as eo}from"./entry.9ddfbff1.js";import"./index.944397c1.js";import{_ as $o}from"./icon_farms_2x.d817bcc9.js";import{_ as bo}from"./img-no-Positions_2x.6342285e.js";import{_ as To}from"./img-connect-wallet_2x.c8d84e19.js";import{u as So}from"./token.5b32a448.js";import{u as yo,c as wo}from"./index.5794af6a.js";import{u as Co}from"./pool.6f07197c.js";import{a as Lo,c as W,h as Po}from"./common.669f604e.js";import{u as Io}from"./usePositionList.7d180b98.js";import{u as Oo}from"./usePoolList.0e54ee64.js";import{C as so}from"./coin-img-warning.4847c3d6.js";import{P as Bo}from"./pos-current-price.16693a08.js";import{N as No}from"./sui-my-position-item.01aa25b3.js";import{T as jo}from"./total-position.1dd891ea.js";import{u as Ao}from"./usePendingYeild.5142ea85.js";import{u as Go}from"./notifi.1317b29c.js";import{_ as Ro}from"./coin-select.3a099459.js";import{u as Do,a as Fo}from"./index.5370856a.js";import{i as no}from"./import-icon.de3e6c66.js";import"./select-tab.4c909f3a.js";import"./decimal.765d8738.js";import"./decimal.a2826370.js";import"./useRate.51d04a64.js";import"./fetchFun.ff4aae28.js";import"./useSDK.b0c354c3.js";import"./useToken.136f1145.js";import"./coin-img.2ffa972e.js";/* empty css              */import"./icon_rewards_2x.105e77b8.js";import"./sui-position-range.60f137b6.js";import"./formatter.45894253.js";import"./coin-pair-name.154aa8b6.js";import"./token-warning.6c259fca.js";import"./no-data.cee14bca.js";/* empty css              *//* empty css              */import"./useWhale.f08f1270.js";/* empty css              */import"./icon-tooltip.97152a6c.js";import"./token-warning_2x.8c8fc12d.js";import"./img-no-Positions_2x.3a69d882.js";const Yo=q({props:{loading:{type:Boolean,required:!0},source:{type:String,default:""}},setup(o){return{positionList:[{},{},{}]}}});const zo=o=>(X("data-v-ef7f0692"),o=o(),Z(),o),Wo={class:"new-pool-position-list"},qo={class:"position-list"},xo={class:"name-price"},Eo={class:"symbol-name"},Jo={class:"avatar-box"},Vo={class:"name-box"},Uo={class:"price-other-info"},Ho={class:"new-my-position-item"},Ko={class:"card-content"},Qo={class:"pos-name"},Xo={class:"bottom-info"},Zo={class:"pos-valid-range"},Mo={class:"info-block"},oe={class:"info-block"},ee={class:"info-block"},se=zo(()=>e("div",{class:"info-block"},null,-1));function ne(o,v,P,w,C,T){const r=fo,n=go;return t(),a("div",Wo,[e("div",qo,[(t(!0),a(H,null,K(o.positionList,(f,d)=>(t(),a("div",{key:d,class:"item-box"},[e("div",xo,[e("div",Eo,[e("div",Jo,[o.loading?(t(),D(r,{key:0,active:"",size:"large",paragraph:!1,class:"upgrade-avatar-skeleton"})):h("",!0),o.loading?(t(),D(r,{key:1,active:"",size:"large",paragraph:!1,class:"upgrade-avatar-skeleton"})):h("",!0)]),e("div",Vo,[c(n,{class:"upgrade-text-skeleton",loading:o.loading,active:"",paragraph:!1},null,8,["loading"]),c(n,{class:"upgrade-title-skeleton",loading:o.loading,active:"",paragraph:!1},null,8,["loading"])])]),e("div",Uo,[e("span",null,[c(n,{class:"upgrade-long-skeleton",loading:o.loading,active:"",paragraph:!1},null,8,["loading"])])])]),e("div",Ho,[e("div",Ko,[e("div",Qo,[c(n,{class:"upgrade-text-skeleton",loading:o.loading,active:"",paragraph:!1},null,8,["loading"])]),e("div",Xo,[e("div",Zo,[c(n,{class:"upgrade-long-skeleton",loading:o.loading,active:"",paragraph:!1},null,8,["loading"])]),e("div",Mo,[c(n,{class:"upgrade-text-skeleton",loading:o.loading,active:"",paragraph:!1},null,8,["loading"]),c(n,{class:"upgrade-title-skeleton",loading:o.loading,active:"",paragraph:!1},null,8,["loading"])]),e("div",oe,[c(n,{class:"upgrade-text-skeleton",loading:o.loading,active:"",paragraph:!1},null,8,["loading"]),c(n,{class:"upgrade-title-skeleton",loading:o.loading,active:"",paragraph:!1},null,8,["loading"])]),e("div",ee,[c(n,{class:"upgrade-text-skeleton",loading:o.loading,active:"",paragraph:!1},null,8,["loading"]),c(n,{class:"upgrade-title-skeleton",loading:o.loading,active:"",paragraph:!1},null,8,["loading"])]),se])])])]))),128))])])}const te=x(Yo,[["render",ne],["__scopeId","data-v-ef7f0692"]]),le={class:"pool-symbol-name-block"},ie={class:"coin-info-fee"},ae={class:"coin-logo"},re={class:"symbol-label"},ce={class:"pool-name"},ue={class:"pool-fee"},de={class:"name"},pe=q({__name:"pool-symbol-name-block",props:{poolInfo:{type:Object,default:()=>({})}},setup(o){return(v,P)=>{var w,C,T,r,n,f,d,g,S,i;return t(),a("div",le,[e("div",ie,[e("div",ae,[c(so,{"token-info":(w=o.poolInfo)==null?void 0:w.coinA},null,8,["token-info"]),c(so,{"token-info":(C=o.poolInfo)==null?void 0:C.coinB},null,8,["token-info"]),e("div",re,[e("div",ce,[e("span",null,y((r=(T=o.poolInfo)==null?void 0:T.coinA)==null?void 0:r.symbol)+"Â -Â ",1),e("span",null,y((f=(n=o.poolInfo)==null?void 0:n.coinB)==null?void 0:f.symbol),1),e("div",ue,y(o.poolInfo.feeRate),1)]),e("div",de,[e("span",null,y((g=(d=o.poolInfo)==null?void 0:d.coinA)==null?void 0:g.name)+"Â -Â ",1),e("span",null,y((i=(S=o.poolInfo)==null?void 0:S.coinB)==null?void 0:i.name),1)])])])])])}}});const ve=x(pe,[["__scopeId","data-v-c9c97b5d"]]),_e=q({setup(){const{t:o,locale:v}=to(),P=Do(),w=p(()=>P),C=Fo(),T=p(()=>C),r=i=>{var I;return(i==null?void 0:i.logoURI)||(i==null?void 0:i.logo_url)||((I=T.value.tokensObj[i==null?void 0:i.address])==null?void 0:I.logo_url)||(w.value.theme==="default"?no("/image/coins/unknown.png"):no("/image/coins/sui-unknown.png"))},n=R(!1),f=R(null),d=R(null);return{pools:T,getCoinIcon:r,isOpenTokenSelect:n,toDelectToken:i=>{n.value=!1,i=="first"&&(f.value=d.value),d.value=null},toSelectToken:i=>{f.value?d.value=i:f.value=i,n.value=!1},firstToken:f,lastToken:d,t:o,addCommom:Lo}}});const E=o=>(X("data-v-9235e3bc"),o=o(),Z(),o),fe={class:"token-select-input-box"},ge=E(()=>e("div",{class:"icon-box"},[e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_search"})])],-1)),me=E(()=>e("span",null,"Filter by token",-1)),he=[ge,me],ke={key:0,class:"item"},$e={alt:""},be={key:0,class:"pool-warning"},Te=E(()=>e("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),Se=[Te],ye={key:1,class:"item"},we={alt:""},Ce={key:0,class:"pool-warning"},Le=E(()=>e("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),Pe=[Le];function Ie(o,v,P,w,C,T){var f,d,g,S,i,I;const r=Ro,n=mo("image");return t(),a("div",fe,[e("div",{class:"search-input",onClick:v[2]||(v[2]=$=>o.firstToken&&o.lastToken?"":o.isOpenTokenSelect=!o.isOpenTokenSelect)},[e("div",null,[e("div",{class:lo(["placeholder",o.firstCoin&&o.lastCoin?"notAllowed":""])},he,2),o.firstToken?(t(),a("div",ke,[M(e("img",$e,null,512),[[n,o.getCoinIcon(o.firstToken)]]),(d=(f=o.pools)==null?void 0:f.tokensObj[o.firstToken.address])!=null&&d.isSelfBuilt?(t(),a("div",be)):h("",!0),e("span",null,y((g=o.firstToken)==null?void 0:g.symbol),1),(t(),a("svg",{class:"icon modal-icon-close","aria-hidden":"true",onClick:v[0]||(v[0]=Q($=>o.toDelectToken("first"),["stop"]))},Se))])):h("",!0),o.lastToken?(t(),a("div",ye,[M(e("img",we,null,512),[[n,o.getCoinIcon(o.lastToken)]]),(i=(S=o.pools)==null?void 0:S.tokensObj[o.lastToken.address])!=null&&i.isSelfBuilt?(t(),a("div",Ce)):h("",!0),e("span",null,y((I=o.lastToken)==null?void 0:I.symbol),1),(t(),a("svg",{class:"icon modal-icon-close","aria-hidden":"true",onClick:v[1]||(v[1]=Q($=>o.toDelectToken("last"),["stop"]))},Pe))])):h("",!0)])]),o.isOpenTokenSelect?(t(),D(r,{key:0,"existing-coins":"","last-select-coin":o.firstToken&&o.firstToken.address||"","is-allow-ban":!0,onOnSelect:o.toSelectToken,onOnClose:v[3]||(v[3]=$=>o.isOpenTokenSelect=!1)},null,8,["last-select-coin","onOnSelect"])):h("",!0)])}const Oe=x(_e,[["render",Ie],["__scopeId","data-v-9235e3bc"]]),N=o=>(X("data-v-2d7251a1"),o=o(),Z(),o),Be={class:"new-position-list-container"},Ne={class:"filter-refresh"},je={class:"icon-box"},Ae=N(()=>e("use",{"xlink:href":"#icon-icon_refresh"},null,-1)),Ge=[Ae],Re={class:"position-card-top"},De={key:0,class:"upgrade-loading"},Fe={key:1,class:"position-list"},Ye={class:"name-price"},ze={class:"price-other-info"},We={class:"farm-create"},qe=N(()=>e("img",{class:"img-default",src:$o,alt:""},null,-1)),xe=N(()=>e("span",null,"Farm",-1)),Ee=N(()=>e("svg",{class:"arrow-icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon_arrow"})],-1)),Je=[qe,xe,Ee],Ve={key:2,class:"no-data"},Ue=N(()=>e("img",{src:bo,alt:""},null,-1)),He={key:3,class:"no-data"},Ke=N(()=>e("img",{src:To,alt:""},null,-1)),Qe=q({__name:"position",setup(o){const{t:v}=to(),P=ho(),w=So(),C=p(()=>w.allTokensObj),T=yo(),r=p(()=>T),n=Co(),f=p(()=>n),d=p(()=>n.poolsObj),g=p(()=>n.isPositionLoading),{getPositionList:S}=Io();Y(()=>[r.value.address,d.value,C.value],([s,l,k])=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:451 ~ watch ~ allTokensObj:",k),console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:451 ~ watch ~ poolsObj:",l),console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:451 ~ watch ~ walletAddress:",s),s&&l&&!W(l)&&!W(k)&&(console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:453 ~ watch ~ getPositionList:"),S(s))},{immediate:!0});const{getPoolList:i}=Oo();Y(()=>d.value,s=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:462 ~ watch ~ newVal:",s,W(s)),W(s)&&i()},{immediate:!0});const I=p(()=>n.poolPositionsObj),$=R(null),O=p(()=>$.value&&$.value.firstToken?$.value.firstToken:null),B=p(()=>$.value&&$.value.lastToken?$.value.lastToken:null),j=p(()=>{let s=Object.values(I.value);const l=s.filter((u,m)=>O.value&&B.value?u.poolInfo.coinA.address==O.value.address&&u.poolInfo.coinB.address==B.value.address||u.poolInfo.coinA.address==B.value.address&&u.poolInfo.coinB.address==O.value.address:O.value?u.poolInfo.coinA.address.toLowerCase()==O.value.address.toLowerCase()||u.poolInfo.coinB.address.toLowerCase()==O.value.address.toLowerCase():B.value?u.poolInfo.coinA.address.toLowerCase()==B.value.address.toLowerCase()||u.poolInfo.coinB.address.toLowerCase()==B.value.address.toLowerCase():s);if(!g.value){const u=l.map(m=>m==null?void 0:m.positionList).flat();n.setPositionListNum(u.length)}return l.filter((u,m)=>{var _;return((_=u.positionList)==null?void 0:_.length)>0})}),{getPendingYieldList:io}=Ao(),J=p(()=>n.positionTotalPendingFees),V=p(()=>n.positionTotalPendingRewards),ao=p(()=>(console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:64 ~ pendingYield ~ positionTotalPendingFees.value:",J.value),console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:65 ~ pendingYield ~ positionTotalPendingRewards.value:",V.value),J.value==="--"||V.value==="--"?"--":Po(J.value||0).add(V.value||0).toString()));Y(()=>ao.value,s=>{s&&s!=="--"&&io()});const ro=p(()=>f.value.positionList),A=Go(),L=p(()=>A),co=async s=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:569 ~ getNftTransfer ~ getNftTransfer:"),await A.getSourceGroups();const l=L.value.sourceGroups&&L.value.sourceGroups.length>0&&L.value.sourceGroups[0]&&L.value.sourceGroups[0].sources||[];console.log(l,"####source"),console.log(s,"###myPositions");for(let k=0;k<l.length;k++){const{pool_address:u,position_index:m}=JSON.parse(l[k].blockchainAddress);console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:604 ~ getNftTransfer ~ source[j]:",l[k]);let _=!1,G;for(let b=0;b<s.length;b++){const{pool:F,positionIndex:vo}=s[b];u==F&&vo==m&&(_=!0),G={pool_address:u,position_index:m}}_||await A.subscribePosition(G,"",!1,!1)}},uo=async()=>{await A.getSourceGroups();const s=L.value.sourceGroups&&L.value.sourceGroups.length>0&&L.value.sourceGroups[0]&&L.value.sourceGroups[0].sources||[];for(let l=0;l<s.length;l++){const{pool_address:k,position_index:u}=JSON.parse(s[l].blockchainAddress),{name:m}=s[l],_={pool_address:k,position_index:u};await A.subscribePosition(_,m,!1,!1)}};Y(()=>ro.value,(s,l)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ file: position.vue:628 ~ newMyPositions:",s),wo.Sui.hasNotifi&&(s&&s.length>0&&l&&l.length!==s.length?co(s):s&&s.length==0&&!g.value&&uo())},{immediate:!0});const U=R(!1),po=()=>{U.value=!0,r.value.address&&S(r.value.address),setTimeout(()=>{U.value=!1},1e3)};return(s,l)=>{const k=_o,u=te,m=ko;return t(),a("div",Be,[c(k,{"current-tab":"Positions"}),e("div",Ne,[c(Oe,{ref_key:"childTokenSelectRef",ref:$},null,512),e("div",{class:"refresh-icon",onClick:po},[e("div",je,[(t(),a("svg",{class:lo(["icon",{refresh:U.value}]),"aria-hidden":"true"},Ge,2))])])]),e("div",Re,[r.value&&r.value.address?(t(),D(jo,{key:0})):h("",!0)]),g.value&&r.value.connected?(t(),a("div",De,[c(u,{loading:g.value,type:"position"},null,8,["loading"])])):h("",!0),j.value&&j.value.length>0&&r.value.connected&&!g.value?(t(),a("div",Fe,[(t(!0),a(H,null,K(j.value,_=>{var G;return t(),a("div",{key:(G=_.poolInfo)==null?void 0:G.address,class:"item-box"},[e("div",Ye,[c(ve,{"pool-info":_.poolInfo},null,8,["pool-info"]),e("div",ze,[c(Bo,{"pool-info":_.poolInfo},null,8,["pool-info"]),e("div",We,[_.poolInfo.isFarmingPool?(t(),a("div",{key:0,class:"farming-logo",onClick:l[0]||(l[0]=Q(b=>z(P).push("/farms"),["stop"]))},Je)):h("",!0),c(m,{class:"ghost-btn create",onClick:b=>{var F;return z(P).push(`/liquidity/deposit?poolAddress=${(F=_.poolInfo)==null?void 0:F.poolAddress}`)}},{default:oo(()=>[eo("Create new position")]),_:2},1032,["onClick"])])])]),(t(!0),a(H,null,K(_.positionList,b=>(t(),D(No,{key:b==null?void 0:b.name,"p-item":b},null,8,["p-item"]))),128))])}),128))])):h("",!0),j.value&&j.value.length<=0&&!g.value&&r.value.connected?(t(),a("div",Ve,[Ue,e("span",null,y(z(v)("common.noLiquidityPositions")),1)])):h("",!0),r.value.connected?h("",!0):(t(),a("div",He,[Ke,c(m,{class:"connect-wallet",onClick:l[1]||(l[1]=_=>r.value.setIsShowWalletModal(!0))},{default:oo(()=>[eo(y(z(v)("button.connectWallet")),1)]),_:1})]))])}}});const zs=x(Qe,[["__scopeId","data-v-2d7251a1"]]);export{zs as default};
