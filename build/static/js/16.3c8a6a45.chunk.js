/*! For license information please see 16.3c8a6a45.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbrige_typescript=self.webpackChunkbrige_typescript||[]).push([[16],{9135:(e,t,r)=>{r.d(t,{a:()=>o,p:()=>a});var n=r(7718);function i(e,t,r,i){(0,n.bt)(e);const s=(0,n.bu)({dkLen:32,asyncTick:10},i),{c:a,dkLen:o,asyncTick:c}=s;if((0,n.bv)(a),(0,n.bv)(o),(0,n.bv)(c),a<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const u=(0,n.bw)(t),l=(0,n.bw)(r),d=new Uint8Array(o),h=n.U.create(e,u),p=h._cloneInto().update(l);return{c:a,dkLen:o,asyncTick:c,DK:d,PRF:h,PRFSalt:p}}function s(e,t,r,n,i){return e.destroy(),t.destroy(),n&&n.destroy(),i.fill(0),r}function a(e,t,r,a){const{c:o,dkLen:c,DK:u,PRF:l,PRFSalt:d}=i(e,t,r,a);let h;const p=new Uint8Array(4),f=(0,n.br)(p),g=new Uint8Array(l.outputLen);for(let n=1,i=0;i<c;n++,i+=l.outputLen){const e=u.subarray(i,i+l.outputLen);f.setInt32(0,n,!1),(h=d._cloneInto(h)).update(p).digestInto(g),e.set(g.subarray(0,e.length));for(let t=1;t<o;t++){l._cloneInto(h).update(g).digestInto(g);for(let t=0;t<e.length;t++)e[t]^=g[t]}}return s(l,d,u,h,g)}const o=Object.freeze(Object.defineProperty({__proto__:null,pbkdf2:a,pbkdf2Async:async function(e,t,r,a){const{c:o,dkLen:c,asyncTick:u,DK:l,PRF:d,PRFSalt:h}=i(e,t,r,a);let p;const f=new Uint8Array(4),g=(0,n.br)(f),y=new Uint8Array(d.outputLen);for(let i=1,s=0;s<c;i++,s+=d.outputLen){const e=l.subarray(s,s+d.outputLen);g.setInt32(0,i,!1),(p=h._cloneInto(p)).update(f).digestInto(y),e.set(y.subarray(0,e.length)),await(0,n.bs)(o-1,u,(()=>{d._cloneInto(p).update(y).digestInto(y);for(let t=0;t<e.length;t++)e[t]^=y[t]}))}return s(d,h,l,p,y)}},Symbol.toStringTag,{value:"Module"}))},3016:(e,t,r)=>{r.r(t),r.d(t,{S:()=>_n,a:()=>Tn,b:()=>jn,c:()=>xn,d:()=>En,e:()=>kn,f:()=>$n,g:()=>Cn,h:()=>Mn,i:()=>In,j:()=>On,k:()=>Bn,p:()=>zn,s:()=>Si,u:()=>An});var n=r(7718),i=r(9135),s=Object.defineProperty,a=(e,t,r)=>((e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);function o(e){return Uint8Array.from(atob(e),(e=>e.charCodeAt(0)))}const c=8192;function u(e){if(e.length<c)return btoa(String.fromCharCode(...e));let t="";for(var r=0;r<e.length;r+=c){const n=e.slice(r,r+c);t+=String.fromCharCode(...n)}return btoa(t)}function l(e){var t;const r=e.startsWith("0x")?e.slice(2):e,n=(null==(t=(r.length%2===0?r:`0${r}}`).match(/.{2}/g))?void 0:t.map((e=>parseInt(e,16))))??[];return Uint8Array.from(n)}function d(e){return e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),"")}function h(e){let t=[],r=0;if(0===e)return[0];for(;e>0;)t[r]=127&e,(e>>=7)&&(t[r]|=128),r+=1;return t}class p{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),t=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+t).toString(10)}read128(){let e=BigInt(this.read64()),t=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+t).toString(10)}read256(){let e=BigInt(this.read128()),t=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+t).toString(10)}readBytes(e){let t=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,t,e);return this.shift(e),r}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,t=new Uint8Array(this.dataView.buffer,e),{value:r,length:n}=function(e){let t=0,r=0,n=0;for(;;){let i=e[n];if(n+=1,t|=(127&i)<<r,!(128&i))break;r+=7}return{value:t,length:n}}(t);return this.shift(n),r}readVec(e){let t=this.readULEB(),r=[];for(let n=0;n<t;n++)r.push(e(this,n,t));return r}}function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["<",">"];const[r,n]=t,i=[];let s="",a=0;for(let o=0;o<e.length;o++){const t=e[o];(t===r&&a++,t===n&&a--,0!==a||","!==t)?s+=t:(i.push(s.trim()),s="")}return i.push(s.trim()),i}class g{constructor(){let{size:e=1024,maxSize:t,allocateSize:r=1024}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.bytePosition=0,this.size=e,this.maxSize=t||e,this.allocateSize=r,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){const t=this.bytePosition+e;if(t>this.size){const e=Math.min(this.maxSize,this.size+this.allocateSize);if(t>e)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${t}`);this.size=e;const r=new ArrayBuffer(this.size);new Uint8Array(r).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(r)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return y(BigInt(e),8).forEach((e=>this.write8(e))),this}write128(e){return y(BigInt(e),16).forEach((e=>this.write8(e))),this}write256(e){return y(BigInt(e),32).forEach((e=>this.write8(e))),this}writeULEB(e){return h(e).forEach((e=>this.write8(e))),this}writeVec(e,t){return this.writeULEB(e.length),Array.from(e).forEach(((r,n)=>t(this,r,n,e.length))),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return function(e,t){switch(t){case"base58":return(0,n.w)(e);case"base64":return u(e);case"hex":return d(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}(this.toBytes(),e)}}function y(e,t){let r=new Uint8Array(t),n=0;for(;e>0;)r[n]=Number(e%BigInt(256)),e/=BigInt(256),n+=1;return r}var m,w,b,v,S=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},T=(e,t,r)=>(S(e,t,"read from private field"),r?r.call(e):t.get(e)),k=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},E=(e,t,r,n)=>(S(e,t,"write to private field"),t.set(e,r),r);const x=class{constructor(e){k(this,m,void 0),k(this,w,void 0),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),E(this,m,e.write),E(this,w,e.serialize??((e,t)=>{const r=new g({size:this.serializedSize(e)??void 0,...t});return T(this,m).call(this,e,r),r.toBytes()})),this.validate=e.validate??(()=>{})}write(e,t){this.validate(e),T(this,m).call(this,e,t)}serialize(e,t){return this.validate(e),new A(this,T(this,w).call(this,e,t))}parse(e){const t=new p(e);return this.read(t)}transform(e){let{name:t,input:r,output:n}=e;return new x({name:t??this.name,read:e=>n(this.read(e)),write:(e,t)=>T(this,m).call(this,r(e),t),serializedSize:e=>this.serializedSize(r(e)),serialize:(e,t)=>T(this,w).call(this,r(e),t),validate:e=>this.validate(r(e))})}};let j=x;m=new WeakMap,w=new WeakMap;const I=Symbol.for("@mysten/serialized-bcs");function B(e){return!!e&&"object"==typeof e&&!0===e[I]}class A{constructor(e,t){k(this,b,void 0),k(this,v,void 0),E(this,b,e),E(this,v,t)}get[I](){return!0}toBytes(){return T(this,v)}toHex(){return d(T(this,v))}toBase64(){return u(T(this,v))}toBase58(){return(0,n.w)(T(this,v))}parse(){return T(this,b).parse(T(this,v))}}function O(e){let{size:t,...r}=e;return new j({...r,serializedSize:()=>t})}function C(e){let{readMethod:t,writeMethod:r,...n}=e;return O({...n,read:e=>e[t](),write:(e,t)=>t[r](e),validate:e=>{var t;if(e<0||e>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${e}. Expected value in range 0-${n.maxValue}`);null==(t=n.validate)||t.call(n,e)}})}function M(e){let{readMethod:t,writeMethod:r,...n}=e;return O({...n,read:e=>e[t](),write:(e,t)=>t[r](BigInt(e)),validate:e=>{var t;const r=BigInt(e);if(r<0||r>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${r}. Expected value in range 0-${n.maxValue}`);null==(t=n.validate)||t.call(n,r)}})}b=new WeakMap,v=new WeakMap;const $={u8:e=>C({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:255,...e}),u16:e=>C({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:65535,...e}),u32:e=>C({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...e}),u64:e=>M({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...e}),u128:e=>M({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...e}),u256:e=>M({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...e}),bool:e=>O({name:"bool",size:1,read:e=>1===e.read8(),write:(e,t)=>t.write8(e?1:0),...e,validate:t=>{var r;if(null==(r=null==e?void 0:e.validate)||r.call(e,t),"boolean"!=typeof t)throw new TypeError("Expected boolean, found "+typeof t)}}),uleb128:e=>function(e){let{serialize:t,...r}=e;const n=new j({...r,serialize:t,write:(e,t)=>{for(const r of n.serialize(e).toBytes())t.write8(r)}});return n}({name:"uleb128",read:e=>e.readULEB(),serialize:e=>Uint8Array.from(h(e)),...e}),bytes:(e,t)=>O({name:`bytes[${e}]`,size:e,read:t=>t.readBytes(e),write:(t,r)=>{for(let n=0;n<e;n++)r.write8(t[n]??0)},...t,validate:r=>{var n;if(null==(n=null==t?void 0:t.validate)||n.call(t,r),!("length"in r))throw new TypeError("Expected array, found "+typeof r);if(r.length!==e)throw new TypeError(`Expected array of length ${e}, found ${r.length}`)}}),string:e=>function(e){let{toBytes:t,fromBytes:r,...n}=e;return new j({...n,read:e=>{const t=e.readULEB(),n=e.readBytes(t);return r(n)},write:(e,r)=>{const n=t(e);r.writeULEB(n.length);for(let t=0;t<n.length;t++)r.write8(n[t])},serialize:e=>{const r=t(e),n=h(r.length),i=new Uint8Array(n.length+r.length);return i.set(n,0),i.set(r,n.length),i},validate:e=>{var t;if("string"!=typeof e)throw new TypeError(`Invalid ${n.name} value: ${e}. Expected string`);null==(t=n.validate)||t.call(n,e)}})}({name:"string",toBytes:e=>(new TextEncoder).encode(e),fromBytes:e=>(new TextDecoder).decode(e),...e}),fixedArray:(e,t,r)=>new j({name:`${t.name}[${e}]`,read:r=>{const n=new Array(e);for(let i=0;i<e;i++)n[i]=t.read(r);return n},write:(e,r)=>{for(const n of e)t.write(n,r)},...r,validate:t=>{var n;if(null==(n=null==r?void 0:r.validate)||n.call(r,t),!("length"in t))throw new TypeError("Expected array, found "+typeof t);if(t.length!==e)throw new TypeError(`Expected array of length ${e}, found ${t.length}`)}}),option:e=>$.enum(`Option<${e.name}>`,{None:null,Some:e}).transform({input:e=>null==e?{None:!0}:{Some:e},output:e=>"Some"in e?e.Some:null}),vector:(e,t)=>new j({name:`vector<${e.name}>`,read:t=>{const r=t.readULEB(),n=new Array(r);for(let i=0;i<r;i++)n[i]=e.read(t);return n},write:(t,r)=>{r.writeULEB(t.length);for(const n of t)e.write(n,r)},...t,validate:e=>{var r;if(null==(r=null==t?void 0:t.validate)||r.call(t,e),!("length"in e))throw new TypeError("Expected array, found "+typeof e)}}),tuple:(e,t)=>new j({name:`(${e.map((e=>e.name)).join(", ")})`,serializedSize:t=>{let r=0;for(let n=0;n<e.length;n++){const i=e[n].serializedSize(t[n]);if(null==i)return null;r+=i}return r},read:t=>{const r=[];for(const n of e)r.push(n.read(t));return r},write:(t,r)=>{for(let n=0;n<e.length;n++)e[n].write(t[n],r)},...t,validate:r=>{var n;if(null==(n=null==t?void 0:t.validate)||n.call(t,r),!Array.isArray(r))throw new TypeError("Expected array, found "+typeof r);if(r.length!==e.length)throw new TypeError(`Expected array of length ${e.length}, found ${r.length}`)}}),struct(e,t,r){const n=Object.entries(t);return new j({name:e,serializedSize:e=>{let t=0;for(const[r,i]of n){const n=i.serializedSize(e[r]);if(null==n)return null;t+=n}return t},read:e=>{const t={};for(const[r,i]of n)t[r]=i.read(e);return t},write:(e,t)=>{for(const[r,i]of n)i.write(e[r],t)},...r,validate:e=>{var t;if(null==(t=null==r?void 0:r.validate)||t.call(r,e),"object"!=typeof e||null==e)throw new TypeError("Expected object, found "+typeof e)}})},enum(e,t,r){const n=Object.entries(t);return new j({name:e,read:e=>{const t=e.readULEB(),[r,i]=n[t];return{[r]:(null==i?void 0:i.read(e))??!0}},write:(e,t)=>{const[r,i]=Object.entries(e)[0];for(let s=0;s<n.length;s++){const[e,a]=n[s];if(e===r)return t.writeULEB(s),void(null==a||a.write(i,t))}},...r,validate:e=>{var n;if(null==(n=null==r?void 0:r.validate)||n.call(r,e),"object"!=typeof e||null==e)throw new TypeError("Expected object, found "+typeof e);const i=Object.keys(e);if(1!==i.length)throw new TypeError(`Expected object with one key, found ${i.length}`);const[s]=i;if(!Object.hasOwn(t,s))throw new TypeError(`Invalid enum variant ${s}`)}})},map:(e,t)=>$.vector($.tuple([e,t])).transform({name:`Map<${e.name}, ${t.name}>`,input:e=>[...e.entries()],output:e=>{const t=new Map;for(const[r,n]of e)t.set(r,n);return t}}),generic:(e,t)=>function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t(...r).transform({name:`${t.name}<${r.map((e=>e.name)).join(", ")}>`,input:e=>e,output:e=>e})},lazy:e=>function(e){let t=null;function r(){return t||(t=e()),t}return new j({name:"lazy",read:e=>r().read(e),serializedSize:e=>r().serializedSize(e),write:(e,t)=>r().write(e,t),serialize:(e,t)=>r().serialize(e,t).toBytes()})}(e)},z=class{constructor(e){if(this.types=new Map,this.counter=0,e instanceof z)return this.schema=e.schema,void(this.types=new Map(e.types));if(this.schema=e,this.registerAddressType(z.ADDRESS,e.addressLength,e.addressEncoding),this.registerVectorType(e.vectorType),e.types&&e.types.structs)for(let t of Object.keys(e.types.structs))this.registerStructType(t,e.types.structs[t]);if(e.types&&e.types.enums)for(let t of Object.keys(e.types.enums))this.registerEnumType(t,e.types.enums[t]);if(e.types&&e.types.aliases)for(let t of Object.keys(e.types.aliases))this.registerAlias(t,e.types.aliases[t]);!1!==e.withPrimitives&&function(e){e.registerType(P.U8,(function(e,t){return e.write8(t)}),(function(e){return e.read8()}),(e=>e<256)),e.registerType(P.U16,(function(e,t){return e.write16(t)}),(function(e){return e.read16()}),(e=>e<65536)),e.registerType(P.U32,(function(e,t){return e.write32(t)}),(function(e){return e.read32()}),(e=>e<=4294967296n)),e.registerType(P.U64,(function(e,t){return e.write64(t)}),(function(e){return e.read64()})),e.registerType(P.U128,(function(e,t){return e.write128(t)}),(function(e){return e.read128()})),e.registerType(P.U256,(function(e,t){return e.write256(t)}),(function(e){return e.read256()})),e.registerType(P.BOOL,(function(e,t){return e.write8(t)}),(function(e){return"1"===e.read8().toString(10)})),e.registerType(P.STRING,(function(e,t){return e.writeVec(Array.from(t),((e,t)=>e.write8(t.charCodeAt(0))))}),(function(e){return e.readVec((e=>e.read8())).map((e=>String.fromCharCode(Number(e)))).join("")}),(e=>!0)),e.registerType(P.HEX,(function(e,t){return e.writeVec(Array.from(l(t)),((e,t)=>e.write8(t)))}),(function(e){let t=e.readVec((e=>e.read8()));return d(new Uint8Array(t))})),e.registerType(P.BASE58,(function(e,t){return e.writeVec(Array.from((0,n.v)(t)),((e,t)=>e.write8(t)))}),(function(e){let t=e.readVec((e=>e.read8()));return(0,n.w)(new Uint8Array(t))})),e.registerType(P.BASE64,(function(e,t){return e.writeVec(Array.from(o(t)),((e,t)=>e.write8(t)))}),(function(e){let t=e.readVec((e=>e.read8()));return u(new Uint8Array(t))}))}(this)}tempKey(){return"bcs-struct-"+ ++this.counter}ser(e,t,r){if("string"==typeof e||Array.isArray(e)){const{name:n,params:i}=this.parseTypeName(e);return this.getTypeInterface(n).encode(this,t,r,i)}if("object"==typeof e){const n=this.tempKey();return new z(this).registerStructType(n,e).ser(n,t,r)}throw new Error(`Incorrect type passed into the '.ser()' function. \n${JSON.stringify(e)}`)}de(e,t,r){if("string"==typeof t){if(!r)throw new Error("To pass a string to `bcs.de`, specify encoding");t=function(e,t){switch(t){case"base58":return(0,n.v)(e);case"base64":return o(e);case"hex":return l(e);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}(t,r)}if("string"==typeof e||Array.isArray(e)){const{name:r,params:n}=this.parseTypeName(e);return this.getTypeInterface(r).decode(this,t,n)}if("object"==typeof e){const n=new z(this),i=this.tempKey();return n.registerStructType(i,e).de(i,t,r)}throw new Error(`Incorrect type passed into the '.de()' function. \n${JSON.stringify(e)}`)}hasType(e){return this.types.has(e)}registerAlias(e,t){return this.types.set(e,t),this}registerType(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>!0;const{name:i,params:s}=this.parseTypeName(e);return this.types.set(i,{encode(e,t,r,n){const i=s.reduce(((e,t,r)=>Object.assign(e,{[t]:n[r]})),{});return this._encodeRaw.call(e,new g(r),t,n,i)},decode(e,t,r){const n=s.reduce(((e,t,n)=>Object.assign(e,{[t]:r[n]})),{});return this._decodeRaw.call(e,new p(t),r,n)},_encodeRaw(e,r,s,a){if(n(r))return t.call(this,e,r,s,a);throw new Error(`Validation failed for type ${i}, data: ${r}`)},_decodeRaw(e,t,n){return r.call(this,e,t,n)}}),this}registerBcsType(e,t){return this.registerType(e,((e,r,n)=>{const i=n.map((e=>new j({name:String(e),write:(t,r)=>{const{name:i,params:s}=this.parseTypeName(e),a=this.getTypeInterface(i),o=s.reduce(((e,t,r)=>Object.assign(e,{[t]:n[r]})),{});return a._encodeRaw.call(this,r,t,s,o)},read:()=>{throw new Error("Not implemented")}})));return t(...i).write(r,e),e}),((e,r)=>{const n=r.map((e=>new j({name:String(e),write:(e,t)=>{throw new Error("Not implemented")},read:t=>{const{name:n,params:i}=this.parseTypeName(e),s=this.getTypeInterface(n),a=i.reduce(((e,t,n)=>Object.assign(e,{[t]:r[n]})),{});return s._decodeRaw.call(this,t,i,a)}})));return t(...n).read(e)})),this}registerAddressType(e,t){switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"hex"){case"base64":return this.registerType(e,(function(e,t){return o(t).reduce(((e,t)=>e.write8(t)),e)}),(function(e){return u(e.readBytes(t))}));case"hex":return this.registerType(e,(function(e,t){return l(t).reduce(((e,t)=>e.write8(t)),e)}),(function(e){return d(e.readBytes(t))}));default:throw new Error("Unsupported encoding! Use either hex or base64")}}registerVectorType(e){let{name:t,params:r}=this.parseTypeName(e);if(r.length>1)throw new Error("Vector can have only one type parameter; got "+t);return this.registerType(e,(function(t,r,n,i){return t.writeVec(r,((t,r)=>{let s=n[0];if(!s)throw new Error(`Incorrect number of type parameters passed a to vector '${e}'`);let{name:a,params:o}=this.parseTypeName(s);if(this.hasType(a))return this.getTypeInterface(a)._encodeRaw.call(this,t,r,o,i);if(!(a in i))throw new Error(`Unable to find a matching type definition for ${a} in vector; make sure you passed a generic`);let{name:c,params:u}=this.parseTypeName(i[a]);return this.getTypeInterface(c)._encodeRaw.call(this,t,r,u,i)}))}),(function(t,r,n){return t.readVec((t=>{let i=r[0];if(!i)throw new Error(`Incorrect number of type parameters passed to a vector '${e}'`);let{name:s,params:a}=this.parseTypeName(i);if(this.hasType(s))return this.getTypeInterface(s)._decodeRaw.call(this,t,a,n);if(!(s in n))throw new Error(`Unable to find a matching type definition for ${s} in vector; make sure you passed a generic`);let{name:o,params:c}=this.parseTypeName(n[s]);return this.getTypeInterface(o)._decodeRaw.call(this,t,c,n)}))}))}registerStructType(e,t){for(let a in t){let e=this.tempKey(),r=t[a];!Array.isArray(r)&&"string"!=typeof r&&(t[a]=e,this.registerStructType(e,r))}let r=Object.freeze(t),n=Object.keys(r),{name:i,params:s}=this.parseTypeName(e);return this.registerType(e,(function(e,t,a,o){if(!t||t.constructor!==Object)throw new Error(`Expected ${i} to be an Object, got: ${t}`);if(a.length!==s.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${s.length}, got: ${a.length}`);for(let c of n){if(!(c in t))throw new Error(`Struct ${i} requires field ${c}:${r[c]}`);const{name:n,params:u}=this.parseTypeName(r[c]);if(s.includes(n)){const r=s.indexOf(n);let{name:u,params:l}=this.parseTypeName(a[r]);if(this.hasType(u)){this.getTypeInterface(u)._encodeRaw.call(this,e,t[c],l,o);continue}if(!(u in o))throw new Error(`Unable to find a matching type definition for ${u} in ${i}; make sure you passed a generic`);let{name:d,params:h}=this.parseTypeName(o[u]);this.getTypeInterface(d)._encodeRaw.call(this,e,t[c],h,o)}else this.getTypeInterface(n)._encodeRaw.call(this,e,t[c],u,o)}return e}),(function(e,t,a){if(t.length!==s.length)throw new Error(`Incorrect number of generic parameters passed; expected: ${s.length}, got: ${t.length}`);let o={};for(let c of n){const{name:n,params:u}=this.parseTypeName(r[c]);if(s.includes(n)){const r=s.indexOf(n);let{name:u,params:l}=this.parseTypeName(t[r]);if(this.hasType(u)){o[c]=this.getTypeInterface(u)._decodeRaw.call(this,e,l,a);continue}if(!(u in a))throw new Error(`Unable to find a matching type definition for ${u} in ${i}; make sure you passed a generic`);let{name:d,params:h}=this.parseTypeName(a[u]);o[c]=this.getTypeInterface(d)._decodeRaw.call(this,e,h,a)}else o[c]=this.getTypeInterface(n)._decodeRaw.call(this,e,u,a)}return o}))}registerEnumType(e,t){for(let a in t){let e=this.tempKey(),r=t[a];null!==r&&!Array.isArray(r)&&"string"!=typeof r&&(t[a]=e,this.registerStructType(e,r))}let r=Object.freeze(t),n=Object.keys(r),{name:i,params:s}=this.parseTypeName(e);return this.registerType(e,(function(e,t,a,o){if(!t)throw new Error(`Unable to write enum "${i}", missing data.\nReceived: "${t}"`);if("object"!=typeof t)throw new Error(`Incorrect data passed into enum "${i}", expected object with properties: "${n.join(" | ")}".\nReceived: "${JSON.stringify(t)}"`);let c=Object.keys(t)[0];if(void 0===c)throw new Error(`Empty object passed as invariant of the enum "${i}"`);let u=n.indexOf(c);if(-1===u)throw new Error(`Unknown invariant of the enum "${i}", allowed values: "${n.join(" | ")}"; received "${c}"`);let l=n[u],d=r[l];if(e.write8(u),null===d)return e;let h=s.indexOf(d),p=-1===h?d:a[h];{let{name:r,params:n}=this.parseTypeName(p);return this.getTypeInterface(r)._encodeRaw.call(this,e,t[c],n,o)}}),(function(e,t,a){let o=e.readULEB(),c=n[o],u=r[c];if(-1===o)throw new Error(`Decoding type mismatch, expected enum "${i}" invariant index, received "${o}"`);if(null===u)return{[c]:!0};let l=s.indexOf(u),d=-1===l?u:t[l];{let{name:t,params:r}=this.parseTypeName(d);return{[c]:this.getTypeInterface(t)._decodeRaw.call(this,e,r,a)}}}))}getTypeInterface(e){let t=this.types.get(e);if("string"==typeof t){let e=[];for(;"string"==typeof t;){if(e.includes(t))throw new Error(`Recursive definition found: ${e.join(" -> ")} -> ${t}`);e.push(t),t=this.types.get(t)}}if(void 0===t)throw new Error(`Type ${e} is not registered`);return t}parseTypeName(e){if(Array.isArray(e)){let[t,...r]=e;return{name:t,params:r}}if("string"!=typeof e)throw new Error(`Illegal type passed as a name of the type: ${e}`);let[t,r]=this.schema.genericSeparators||["<",">"],n=e.indexOf(t),i=Array.from(e).reverse().indexOf(r);if(-1===n&&-1===i)return{name:e,params:[]};if(-1===n||-1===i)throw new Error(`Unclosed generic in name '${e}'`);return{name:e.slice(0,n),params:f(e.slice(n+1,e.length-i-1),this.schema.genericSeparators)}}};let P=z;P.U8="u8",P.U16="u16",P.U32="u32",P.U64="u64",P.U128="u128",P.U256="u256",P.BOOL="bool",P.VECTOR="vector",P.ADDRESS="address",P.STRING="string",P.HEX="hex-string",P.BASE58="base58-string",P.BASE64="base64-string";class _ extends TypeError{constructor(e,t){let r;const{message:n,explanation:i,...s}=e,{path:a}=e,o=0===a.length?n:`At path: ${a.join(".")} -- ${n}`;super(i??o),null!=i&&(this.cause=o),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}function U(e){return"object"==typeof e&&null!=e}function N(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function R(e,t,r,n){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:i,branch:s}=t,{type:a}=r,{refinement:o,message:c=`Expected a value of type \`${a}\`${o?` with refinement \`${o}\``:""}, but received: \`${N(n)}\``}=e;return{value:n,type:a,refinement:o,key:i[i.length-1],path:i,branch:s,...e,message:c}}function*V(e,t,r,n){(function(e){return U(e)&&"function"==typeof e[Symbol.iterator]})(e)||(e=[e]);for(const i of e){const e=R(i,t,r,n);e&&(yield e)}}function D(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function*(){const{path:n=[],branch:i=[e],coerce:s=!1,mask:a=!1}=r,o={path:n,branch:i};if(s&&(e=t.coercer(e,o),a&&"type"!==t.type&&U(t.schema)&&U(e)&&!Array.isArray(e)))for(const r in e)void 0===t.schema[r]&&delete e[r];let c="valid";for(const u of t.validator(e,o))u.explanation=r.message,c="not_valid",yield[u,void 0];for(let[u,l,d]of t.entries(e,o)){const t=D(l,d,{path:void 0===u?n:[...n,u],branch:void 0===u?i:[...i,l],coerce:s,mask:a,message:r.message});for(const r of t)r[0]?(c=null!=r[0].refinement?"not_refined":"not_valid",yield[r[0],void 0]):s&&(l=r[1],void 0===u?e=l:e instanceof Map?e.set(u,l):e instanceof Set?e.add(l):U(e)&&(void 0!==l||u in e)&&(e[u]=l))}if("not_valid"!==c)for(const u of t.refiner(e,o))u.explanation=r.message,c="not_refined",yield[u,void 0];"valid"===c&&(yield[void 0,e])}()}class q{constructor(e){const{type:t,schema:r,validator:n,refiner:i,coercer:s=(e=>e),entries:a=function*(){}}=e;this.type=t,this.schema=r,this.entries=a,this.coercer=s,this.validator=n?(e,t)=>V(n(e,t),t,this,e):()=>[],this.refiner=i?(e,t)=>V(i(e,t),t,this,e):()=>[]}assert(e,t){return L(e,this,t)}create(e,t){return K(e,this,t)}is(e){return F(e,this)}mask(e,t){return W(e,this,t)}validate(e){return G(e,this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}}function L(e,t,r){const n=G(e,t,{message:r});if(n[0])throw n[0]}function K(e,t,r){const n=G(e,t,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function W(e,t,r){const n=G(e,t,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}function F(e,t){return!G(e,t)[0]}function G(e,t){const r=D(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),n=function(e){const{done:t,value:r}=e.next();return t?void 0:r}(r);return n[0]?[new _(n[0],(function*(){for(const e of r)e[0]&&(yield e[0])})),void 0]:[void 0,n[1]]}function J(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n="type"===t[0].type,i=t.map((e=>e.schema)),s=Object.assign({},...i);return n?function(e){const t=Object.keys(e);return new q({type:"type",schema:e,*entries(r){if(U(r))for(const n of t)yield[n,r[n],e[n]]},validator:e=>U(e)||`Expected an object, but received: ${N(e)}`,coercer:e=>U(e)?{...e}:e})}(s):ie(s)}function Z(e,t){return new q({type:e,schema:null,validator:t})}function H(){return Z("any",(()=>!0))}function Q(e){return new q({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[r,n]of t.entries())yield[r,n,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${N(e)}`})}function X(){return Z("boolean",(e=>"boolean"==typeof e))}function Y(){return Z("integer",(e=>"number"==typeof e&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${N(e)}`))}function ee(e){const t=N(e),r=typeof e;return new q({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?e:null,validator:r=>r===e||`Expected the literal \`${t}\`, but received: ${N(r)}`})}function te(){return Z("never",(()=>!1))}function re(e){return new q({...e,validator:(t,r)=>null===t||e.validator(t,r),refiner:(t,r)=>null===t||e.refiner(t,r)})}function ne(){return Z("number",(e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${N(e)}`))}function ie(e){const t=e?Object.keys(e):[],r=te();return new q({type:"object",schema:e||null,*entries(n){if(e&&U(n)){const i=new Set(Object.keys(n));for(const r of t)i.delete(r),yield[r,n[r],e[r]];for(const e of i)yield[e,n[e],r]}},validator:e=>U(e)||`Expected an object, but received: ${N(e)}`,coercer:e=>U(e)?{...e}:e})}function se(e){return new q({...e,validator:(t,r)=>void 0===t||e.validator(t,r),refiner:(t,r)=>void 0===t||e.refiner(t,r)})}function ae(e,t){return new q({type:"record",schema:null,*entries(r){if(U(r))for(const n in r){const i=r[n];yield[n,n,e],yield[n,i,t]}},validator:e=>U(e)||`Expected an object, but received: ${N(e)}`})}function oe(){return Z("string",(e=>"string"==typeof e||`Expected a string, but received: ${N(e)}`))}function ce(e){const t=te();return new q({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(e.length,r.length);for(let i=0;i<n;i++)yield[i,r[i],e[i]||t]}},validator:e=>Array.isArray(e)||`Expected an array, but received: ${N(e)}`})}function ue(e){const t=e.map((e=>e.type)).join(" | ");return new q({type:"union",schema:null,coercer(t){for(const r of e){const[e,n]=r.validate(t,{coerce:!0});if(!e)return n}return t},validator(r,n){const i=[];for(const t of e){const[...e]=D(r,t,n),[s]=e;if(!s[0])return[];for(const[t]of e)t&&i.push(t)}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${N(r)}`,...i]}})}function le(){return Z("unknown",(()=>!0))}function de(e){if("string"!=typeof e)throw new TypeError("Invalid mnemonic type: "+typeof e);return e.normalize("NFKD")}const he=e=>de(`mnemonic${e}`);function pe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,i.p)(n.x,function(e){const t=de(e),r=t.split(" ");if(![12,15,18,21,24].includes(r.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:r}}(e).nfkd,he(t),{c:2048,dkLen:64})}const fe={"-32700":"ParseError","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError"};class ge extends Error{}class ye extends ge{constructor(e,t){super(e),this.code=t,this.type=fe[t]??"ServerError"}}class me extends ge{constructor(e,t,r){super(e),this.status=t,this.statusText=r}}var we,be,ve,Se,Te,ke,Ee,xe,je,Ie,Be=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},Ae=(e,t,r)=>(Be(e,t,"read from private field"),r?r.call(e):t.get(e)),Oe=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},Ce=(e,t,r,n)=>(Be(e,t,"write to private field"),t.set(e,r),r),Me=(e,t,r)=>(Be(e,t,"access private method"),r);const $e={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};class ze{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Oe(this,Ee),Oe(this,je),Oe(this,we,0),Oe(this,be,0),Oe(this,ve,null),Oe(this,Se,null),Oe(this,Te,new Set),Oe(this,ke,new Map),this.endpoint=e,this.options={...$e,...t},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=function(e){const t=new URL(e);return t.protocol=t.protocol.replace("http","ws"),t.toString()}(this.endpoint))}async makeRequest(e,t){const r=await Me(this,Ee,xe).call(this);return new Promise(((n,i)=>{Ce(this,we,Ae(this,we)+1),Ae(this,ke).set(Ae(this,we),{resolve:n,reject:i,timeout:setTimeout((()=>{Ae(this,ke).delete(Ae(this,we)),i(new Error(`Request timeout: ${e}`))}),this.options.callTimeout)}),r.send(JSON.stringify({jsonrpc:"2.0",id:Ae(this,we),method:e,params:t}))})).then((e=>{let{error:t,result:r}=e;if(t)throw new ye(t.message,t.code);return r}))}async subscribe(e){const t=new Pe(e);return Ae(this,Te).add(t),await t.subscribe(this),()=>t.unsubscribe(this)}}we=new WeakMap,be=new WeakMap,ve=new WeakMap,Se=new WeakMap,Te=new WeakMap,ke=new WeakMap,Ee=new WeakSet,xe=function(){return Ae(this,Se)||Ce(this,Se,new Promise((e=>{var t;null==(t=Ae(this,ve))||t.close(),Ce(this,ve,new this.options.WebSocketConstructor(this.endpoint)),Ae(this,ve).addEventListener("open",(()=>{Ce(this,be,0),e(Ae(this,ve))})),Ae(this,ve).addEventListener("close",(()=>{((e,t,r,n)=>({set _(r){Ce(e,t,r)},get _(){return Ae(e,t,n)}}))(this,be)._++,Ae(this,be)<=this.options.maxReconnects&&setTimeout((()=>{Me(this,je,Ie).call(this)}),this.options.reconnectTimeout)})),Ae(this,ve).addEventListener("message",(e=>{let t,{data:r}=e;try{t=JSON.parse(r)}catch(n){return void console.error(new Error(`Failed to parse RPC message: ${r}`,{cause:n}))}if("id"in t&&null!=t.id&&Ae(this,ke).has(t.id)){const{resolve:e,timeout:r}=Ae(this,ke).get(t.id);clearTimeout(r),e(t)}else if("params"in t){const{params:e}=t;Ae(this,Te).forEach((t=>{t.subscriptionId===e.subscription&&e.subscription===t.subscriptionId&&t.onMessage(e.result)}))}}))}))),Ae(this,Se)},je=new WeakSet,Ie=async function(){var e;return null==(e=Ae(this,ve))||e.close(),Ce(this,Se,null),Promise.allSettled([...Ae(this,Te)].map((e=>e.subscribe(this))))};class Pe{constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){const{subscriptionId:t}=this;return this.subscribed=!1,null!=t&&(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[t]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;const t=await e.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=t)}}var _e,Ue,Ne,Re,Ve,De=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},qe=(e,t,r)=>(De(e,t,"read from private field"),r?r.call(e):t.get(e)),Le=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},Ke=(e,t,r,n)=>(De(e,t,"write to private field"),t.set(e,r),r);class We{constructor(e){Le(this,Re),Le(this,_e,0),Le(this,Ue,void 0),Le(this,Ne,void 0),Ke(this,Ue,e)}fetch(e,t){const r=qe(this,Ue).fetch??globalThis.fetch;if(!this.fetch)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return r(e,t)}async request(e){var t,r;Ke(this,_e,qe(this,_e)+1);const n=await this.fetch((null==(t=qe(this,Ue).rpc)?void 0:t.url)??qe(this,Ue).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":"0.50.1","Client-Target-Api-Version":"1.19.0",...null==(r=qe(this,Ue).rpc)?void 0:r.headers},body:JSON.stringify({jsonrpc:"2.0",id:qe(this,_e),method:e.method,params:e.params})});if(!n.ok)throw new me(`Unexpected status code: ${n.status}`,n.status,n.statusText);const i=await n.json();if("error"in i&&null!=i.error)throw new ye(i.error.message,i.error.code);return i.result}async subscribe(e){const t=await((e,t,r)=>(De(e,t,"access private method"),r))(this,Re,Ve).call(this).subscribe(e);return async()=>!!await t()}}_e=new WeakMap,Ue=new WeakMap,Ne=new WeakMap,Re=new WeakSet,Ve=function(){var e;if(!qe(this,Ne)){const t=qe(this,Ue).WebSocketConstructor??globalThis.WebSocket;if(!t)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");Ke(this,Ne,new ze((null==(e=qe(this,Ue).websocket)?void 0:e.url)??qe(this,Ue).url,{WebSocketConstructor:t,...qe(this,Ue).websocket}))}return qe(this,Ne)};const Fe=/^vector<(.+)>$/,Ge=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class Je{static parseFromStr(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("address"===e)return{address:null};if("bool"===e)return{bool:null};if("u8"===e)return{u8:null};if("u16"===e)return{u16:null};if("u32"===e)return{u32:null};if("u64"===e)return{u64:null};if("u128"===e)return{u128:null};if("u256"===e)return{u256:null};if("signer"===e)return{signer:null};const r=e.match(Fe);if(r)return{vector:Je.parseFromStr(r[1],t)};const i=e.match(Ge);if(i)return{struct:{address:t?(0,n.y)(i[1]):i[1],module:i[2],name:i[3],typeParams:void 0===i[5]?[]:Je.parseStructTypeArgs(i[5],t)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return f(e).map((e=>Je.parseFromStr(e,t)))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${Je.tagToString(e.vector)}>`;if("struct"in e){const t=e.struct,r=t.typeParams.map(Je.tagToString).join(", ");return`${t.address}::${t.module}::${t.name}${r?`<${r}>`:""}`}throw new Error("Invalid TypeTag")}}const Ze=new P({genericSeparators:["<",">"],vectorType:"vector",addressLength:32,addressEncoding:"hex",types:{enums:{"Option<T>":{None:null,Some:"T"}}}});function He(e){return $.u64({name:"unsafe_u64",...e}).transform({input:e=>e,output:e=>Number(e)})}function Qe(e){return e.transform({input:e=>({[e.kind]:e}),output:e=>{const t=Object.keys(e)[0];return{kind:t,...e[t]}}})}const Xe=$.bytes(n.z).transform({input:e=>"string"==typeof e?l((0,n.y)(e)):e,output:e=>(0,n.y)(d(e))}),Ye=$.vector($.u8()).transform({name:"ObjectDigest",input:e=>(0,n.v)(e),output:e=>(0,n.w)(new Uint8Array(e))}),et=$.struct("SuiObjectRef",{objectId:Xe,version:$.u64(),digest:Ye}),tt=$.struct("SharedObjectRef",{objectId:Xe,initialSharedVersion:$.u64(),mutable:$.bool()}),rt=$.enum("ObjectArg",{ImmOrOwned:et,Shared:tt,Receiving:et}),nt=$.enum("CallArg",{Pure:$.vector($.u8()),Object:rt,ObjVec:$.vector(rt)}),it=$.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:$.lazy((()=>it)),struct:$.lazy((()=>dt)),u16:null,u32:null,u256:null}),st=Qe($.enum("Argument",{GasCoin:null,Input:$.struct("Input",{index:$.u16()}),Result:$.struct("Result",{index:$.u16()}),NestedResult:$.struct("NestedResult",{index:$.u16(),resultIndex:$.u16()})})),at=$.struct("ProgrammableMoveCall",{package:Xe,module:$.string(),function:$.string(),type_arguments:$.vector(it),arguments:$.vector(st)}).transform({input:e=>{const[t,r,i]=e.target.split("::"),s=e.typeArguments.map((e=>Je.parseFromStr(e,!0)));return{package:(0,n.y)(t),module:r,function:i,type_arguments:s,arguments:e.arguments}},output:e=>({target:[e.package,e.module,e.function].join("::"),arguments:e.arguments,typeArguments:e.type_arguments.map(Je.tagToString)})}),ot=Qe($.enum("Transaction",{MoveCall:at,TransferObjects:$.struct("TransferObjects",{objects:$.vector(st),address:st}),SplitCoins:$.struct("SplitCoins",{coin:st,amounts:$.vector(st)}),MergeCoins:$.struct("MergeCoins",{destination:st,sources:$.vector(st)}),Publish:$.struct("Publish",{modules:$.vector($.vector($.u8())),dependencies:$.vector(Xe)}),MakeMoveVec:$.struct("MakeMoveVec",{type:(At=it,$.enum("Option",{None:null,Some:At})),objects:$.vector(st)}),Upgrade:$.struct("Upgrade",{modules:$.vector($.vector($.u8())),dependencies:$.vector(Xe),packageId:Xe,ticket:st})})),ct=$.struct("ProgrammableTransaction",{inputs:$.vector(nt),transactions:$.vector(ot)}),ut=$.enum("TransactionKind",{ProgrammableTransaction:ct,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),lt=$.enum("TransactionExpiration",{None:null,Epoch:He()}),dt=$.struct("StructTag",{address:Xe,module:$.string(),name:$.string(),typeParams:$.vector(it)}),ht=$.struct("GasData",{payment:$.vector(et),owner:Xe,price:$.u64(),budget:$.u64()}),pt=$.struct("TransactionDataV1",{kind:ut,sender:Xe,gasData:ht,expiration:lt}),ft=$.enum("TransactionData",{V1:pt}),gt=$.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),yt=$.enum("IntentVersion",{V0:null}),mt=$.enum("AppId",{Sui:null}),wt=$.struct("Intent",{scope:gt,version:yt,appId:mt}),bt=$.generic(["T"],(e=>$.struct("IntentMessage<T>",{intent:wt,value:e}))),vt=$.enum("CompressedSignature",{ED25519:$.fixedArray(64,$.u8()),Secp256k1:$.fixedArray(64,$.u8()),Secp256r1:$.fixedArray(64,$.u8()),ZkLogin:$.vector($.u8())}),St=$.enum("PublicKey",{ED25519:$.fixedArray(32,$.u8()),Secp256k1:$.fixedArray(33,$.u8()),Secp256r1:$.fixedArray(33,$.u8()),ZkLogin:$.vector($.u8())}),Tt=$.struct("MultiSigPkMap",{pubKey:St,weight:$.u8()}),kt=$.struct("MultiSigPublicKey",{pk_map:$.vector(Tt),threshold:$.u16()}),Et=$.struct("MultiSig",{sigs:$.vector(vt),bitmap:$.u16(),multisig_pk:kt}),xt=$.vector($.u8()).transform({input:e=>"string"==typeof e?o(e):e,output:e=>u(new Uint8Array(e))}),jt=$.struct("SenderSignedTransaction",{intentMessage:bt(ft),txSignatures:$.vector(xt)}),It=$.vector(jt,{name:"SenderSignedData"}),Bt={...$,U8:$.u8(),U16:$.u16(),U32:$.u32(),U64:$.u64(),U128:$.u128(),U256:$.u256(),ULEB128:$.uleb128(),Bool:$.bool(),String:$.string(),Address:Xe,Argument:st,CallArg:nt,CompressedSignature:vt,GasData:ht,MultiSig:Et,MultiSigPkMap:Tt,MultiSigPublicKey:kt,ObjectArg:rt,ObjectDigest:Ye,ProgrammableMoveCall:at,ProgrammableTransaction:ct,PublicKey:St,SenderSignedData:It,SenderSignedTransaction:jt,SharedObjectRef:tt,StructTag:dt,SuiObjectRef:et,Transaction:ot,TransactionData:ft,TransactionDataV1:pt,TransactionExpiration:lt,TransactionKind:ut,TypeTag:it,ser:Ze.ser.bind(Ze),de:Ze.de.bind(Ze),getTypeInterface:Ze.getTypeInterface.bind(Ze),hasType:Ze.hasType.bind(Ze),parseTypeName:Ze.parseTypeName.bind(Ze),registerAddressType:Ze.registerAddressType.bind(Ze),registerAlias:Ze.registerAlias.bind(Ze),registerBcsType:Ze.registerBcsType.bind(Ze),registerEnumType:Ze.registerEnumType.bind(Ze),registerStructType:Ze.registerStructType.bind(Ze),registerType:Ze.registerType.bind(Ze),types:Ze.types};var At;Ze.registerBcsType("utf8string",(()=>$.string({name:"utf8string"}))),Ze.registerBcsType("unsafe_u64",(()=>He())),Ze.registerBcsType("enumKind",(e=>Qe(e))),[Xe,st,nt,vt,ht,Et,Tt,kt,rt,Ye,at,ct,St,It,tt,dt,et,ot,ft,pt,lt,ut,it].forEach((e=>{Ze.registerBcsType(e.name,(()=>e))}));const Ot=ue([ie({AddressOwner:oe()}),ie({ObjectOwner:oe()}),ie({Shared:ie({initial_shared_version:re(oe())})}),ee("Immutable")]);Z("SuiJsonValue",(()=>!0));const Ct=ue([ie({u32:oe()}),ie({u64:oe()}),ie({f64:oe()})]);ie({attributes:ae(oe(),re(Ct)),featureFlags:ae(oe(),X()),maxSupportedProtocolVersion:oe(),minSupportedProtocolVersion:oe(),protocolVersion:oe()}),ue([oe(),ee("package")]);const Mt=ie({digest:oe(),objectId:oe(),version:ue([ne(),oe(),Z("bigint",(e=>"bigint"==typeof e))])});ie({owner:Ot,reference:Mt}),ie({objectId:oe(),sequenceNumber:oe()}),ie({payment:Q(Mt),owner:oe(),price:oe(),budget:oe()});const $t=J(Mt,ie({type:oe(),owner:Ot,previousTransaction:oe()})),zt=ae(oe(),H()),Pt=ae(oe(),le()),_t=ie({type:oe(),fields:zt,hasPublicTransfer:X()}),Ut=ie({disassembled:Pt}),Nt=ue([J(_t,ie({dataType:ee("moveObject")})),J(Ut,ie({dataType:ee("package")}))]),Rt=ie({type:oe(),hasPublicTransfer:X(),version:oe(),bcsBytes:oe()}),Vt=ie({id:oe(),moduleMap:ae(oe(),oe())}),Dt=ue([J(Rt,ie({dataType:ee("moveObject")})),J(Vt,ie({dataType:ee("package")}))]);BigInt(1e9);const qt=ie({code:oe(),error:se(oe()),object_id:se(oe()),parent_object_id:se(oe()),version:se(oe()),digest:se(oe())}),Lt=ue([ie({data:re(se(ae(oe(),oe()))),error:re(se(qt))}),se(ae(oe(),oe()))]),Kt=ie({objectId:oe(),version:oe(),digest:oe(),type:re(se(oe())),content:re(se(Nt)),bcs:re(se(Dt)),owner:re(se(Ot)),previousTransaction:re(se(oe())),storageRebate:re(se(oe())),display:re(se(Lt))});ie({showType:re(se(X())),showContent:re(se(X())),showBcs:re(se(X())),showOwner:re(se(X())),showPreviousTransaction:re(se(X())),showStorageRebate:re(se(X())),showDisplay:re(se(X()))}),ue([ee("Exists"),ee("notExists"),ee("Deleted")]),Q($t);const Wt=ie({data:re(se(Kt)),error:re(se(qt))});function Ft(e){if("reference"in e)return e.reference;const t=function(e){return e.data}(e);return t?{objectId:t.objectId,version:t.version,digest:t.digest}:function(e){if(e.error&&"object_id"in e.error&&"version"in e.error&&"digest"in e.error){const t=e.error;return{objectId:t.object_id,version:t.version,digest:t.digest}}}(e)}ie({objectId:oe(),atCheckpoint:se(ne())}),ie({data:Q(Wt),nextCursor:se(re(oe())),hasNextPage:X()}),ue([ie({details:Kt,status:ee("VersionFound")}),ie({details:oe(),status:ee("ObjectNotExists")}),ie({details:Mt,status:ee("ObjectDeleted")}),ie({details:ce([oe(),ne()]),status:ee("VersionNotFound")}),ie({details:ie({asked_version:ne(),latest_version:ne(),object_id:oe()}),status:ee("VersionTooHigh")})]);Q(ue([oe(),ie({Object:oe()})]));const Gt=ie({address:oe(),name:oe()}),Jt=ue([ee("Private"),ee("Public"),ee("Friend")]),Zt=ie({abilities:Q(oe())}),Ht=ie({constraints:Zt,isPhantom:X()}),Qt=ie({TypeParameter:ne()}),Xt=ce([ie({module:oe(),package:oe(),function:oe()}),oe()]);function Yt(e){if(!e)return!1;if("string"==typeof e||F(e,Qt)||tr(e))return!0;if("object"!=typeof e)return!1;const t=e;return!!(F(t.Reference,er)||F(t.MutableReference,er)||F(t.Vector,er))}ie({rank3Days:Q(Xt),rank7Days:Q(Xt),rank30Days:Q(Xt)});const er=Z("SuiMoveNormalizedType",Yt);function tr(e){if(!e||"object"!=typeof e)return!1;const t=e;if(!t.Struct||"object"!=typeof t.Struct)return!1;const r=t.Struct;return!("string"!=typeof r.address||"string"!=typeof r.module||"string"!=typeof r.name||!Array.isArray(r.typeArguments)||!r.typeArguments.every((e=>Yt(e))))}Z("SuiMoveNormalizedStructType",tr);const rr=ie({visibility:Jt,isEntry:X(),typeParameters:Q(Zt),parameters:Q(er),return:Q(er)}),nr=ie({name:oe(),type:er}),ir=ie({abilities:Zt,typeParameters:Q(Ht),fields:Q(nr)}),sr=ie({fileFormatVersion:ne(),address:oe(),name:oe(),friends:Q(Gt),structs:ae(oe(),ir),exposedFunctions:ae(oe(),rr)});function ar(e){return"object"==typeof e&&"MutableReference"in e?e.MutableReference:void 0}function or(e){return"object"==typeof e&&"Reference"in e?e.Reference:void 0}function cr(e){if("object"==typeof e&&"Struct"in e)return e;const t=or(e),r=ar(e);return"object"==typeof t&&"Struct"in t?t:"object"==typeof r&&"Struct"in r?r:void 0}ae(oe(),sr);const ur=ue([ie({ImmOrOwned:Mt}),ie({Shared:ie({objectId:oe(),initialSharedVersion:ue([Y(),oe()]),mutable:X()})}),ie({Receiving:Mt})]),lr=ie({Pure:Q(Y())}),dr=ie({Object:ur}),hr=ue([lr,dr]);const pr={Pure:function(e,t){return{Pure:Array.from(e instanceof Uint8Array?e:B(e)?e.toBytes():Bt.ser(t,e,{maxSize:1/0}).toBytes())}},ObjectRef(e){let{objectId:t,digest:r,version:i}=e;return{Object:{ImmOrOwned:{digest:r,version:i,objectId:(0,n.y)(t)}}}},SharedObjectRef(e){let{objectId:t,mutable:r,initialSharedVersion:i}=e;return{Object:{Shared:{mutable:r,initialSharedVersion:i,objectId:(0,n.y)(t)}}}},ReceivingRef(e){let{objectId:t,digest:r,version:i}=e;return{Object:{Receiving:{digest:r,version:i,objectId:(0,n.y)(t)}}}}};function fr(e){return"string"==typeof e?(0,n.y)(e):"ImmOrOwned"in e.Object?(0,n.y)(e.Object.ImmOrOwned.objectId):"Receiving"in e.Object?(0,n.y)(e.Object.Receiving.objectId):(0,n.y)(e.Object.Shared.objectId)}function gr(e){function t(t,r){return e(t,r)}return t.u8=t=>e(Bt.U8.serialize(t)),t.u16=t=>e(Bt.U16.serialize(t)),t.u32=t=>e(Bt.U32.serialize(t)),t.u64=t=>e(Bt.U64.serialize(t)),t.u128=t=>e(Bt.U128.serialize(t)),t.u256=t=>e(Bt.U256.serialize(t)),t.bool=t=>e(Bt.Bool.serialize(t)),t.string=t=>e(Bt.String.serialize(t)),t.address=t=>e(Bt.Address.serialize(t)),t.id=t.address,t}const yr={address:n.D,module:"object",name:"ID"},mr={address:n.M,module:"ascii",name:"String"},wr={address:n.M,module:"string",name:"String"},br={address:n.M,module:"option",name:"Option"},vr=(e,t)=>e.address===t.address&&e.module===t.module&&e.name===t.name;function Sr(e,t){if(!(typeof t>"u")&&typeof t!==e)throw new Error(`Expect ${t} to be ${e}, received ${typeof t}`)}const Tr=["Address","Bool","U8","U16","U32","U64","U128","U256"];function kr(e,t){if("string"==typeof e&&Tr.includes(e)){if(e in["U8","U16","U32","U64","U128","U256"])Sr("number",t);else if("Bool"===e)Sr("boolean",t);else if("Address"===e&&(Sr("string",t),t&&!(0,n.B)(t)))throw new Error("Invalid Sui Address");return e.toLowerCase()}if("string"==typeof e)throw new Error(`Unknown pure normalized type ${JSON.stringify(e,null,2)}`);if("Vector"in e){if((void 0===t||"string"==typeof t)&&"U8"===e.Vector)return"string";if(void 0!==t&&!Array.isArray(t))throw new Error(`Expect ${t} to be a array, received ${typeof t}`);const r=kr(e.Vector,t?t[0]:void 0);return void 0===r?void 0:`vector<${r}>`}if("Struct"in e){if(vr(e.Struct,mr))return"string";if(vr(e.Struct,wr))return"utf8string";if(vr(e.Struct,yr))return"address";if(vr(e.Struct,br)){return kr({Vector:e.Struct.typeArguments[0]},t)}}}function Er(e,t){return K(e,t)}const xr=ue([ie({kind:ee("Input"),index:Y(),value:se(H()),type:se(ee("object"))}),ie({kind:ee("Input"),index:Y(),value:se(H()),type:ee("pure")})]),jr=ue([...[xr,ie({kind:ee("GasCoin")}),ie({kind:ee("Result"),index:Y()}),ie({kind:ee("NestedResult"),index:Y(),resultIndex:Y()})]]),Ir=ie({kind:ee("MoveCall"),target:Z("target",oe().validator),typeArguments:Q(oe()),arguments:Q(jr)}),Br=ie({kind:ee("TransferObjects"),objects:Q(jr),address:jr}),Ar=ie({kind:ee("SplitCoins"),coin:jr,amounts:Q(jr)}),Or=ie({kind:ee("MergeCoins"),destination:jr,sources:Q(jr)}),Cr=ie({kind:ee("MakeMoveVec"),type:se((e=>ue([ie({None:ue([ee(!0),ee(null)])}),ie({Some:e})]))(ae(oe(),le()))),objects:Q(jr)}),Mr=ie({kind:ee("Publish"),modules:Q(Q(Y())),dependencies:Q(oe())}),$r=ie({kind:ee("Upgrade"),modules:Q(Q(Y())),dependencies:Q(oe()),packageId:oe(),ticket:jr}),zr=ue([...[Ir,Br,Ar,Or,Mr,$r,Cr]]),Pr={MoveCall:e=>Er({kind:"MoveCall",target:e.target,arguments:e.arguments??[],typeArguments:e.typeArguments??[]},Ir),TransferObjects:(e,t)=>("Input"===t.kind&&"pure"===t.type&&"object"!=typeof t.value&&(t.value=pr.Pure(Bt.Address.serialize(t.value))),Er({kind:"TransferObjects",objects:e,address:t},Br)),SplitCoins:(e,t)=>(t.forEach((e=>{"Input"===e.kind&&"pure"===e.type&&"object"!=typeof e.value&&(e.value=pr.Pure(Bt.U64.serialize(e.value)))})),Er({kind:"SplitCoins",coin:e,amounts:t},Ar)),MergeCoins:(e,t)=>Er({kind:"MergeCoins",destination:e,sources:t},Or),Publish(e){let{modules:t,dependencies:r}=e;return Er({kind:"Publish",modules:t.map((e=>"string"==typeof e?Array.from(o(e)):e)),dependencies:r.map((e=>(0,n.G)(e)))},Mr)},Upgrade(e){let{modules:t,dependencies:r,packageId:i,ticket:s}=e;return Er({kind:"Upgrade",modules:t.map((e=>"string"==typeof e?Array.from(o(e)):e)),dependencies:r.map((e=>(0,n.G)(e))),packageId:i,ticket:s},$r)},MakeMoveVec(e){let{type:t,objects:r}=e;return Er({kind:"MakeMoveVec",type:t?{Some:Je.parseFromStr(t)}:{None:null},objects:r},Cr)}},_r=se(re(ue([ie({Epoch:Y()}),ie({None:ue([ee(!0),ee(null)])})]))),Ur=Z("StringEncodedBigint",(e=>{if(!["string","number","bigint"].includes(typeof e))return!1;try{return BigInt(e),!0}catch{return!1}})),Nr=ie({budget:se(Ur),price:se(Ur),payment:se(Q(Mt)),owner:se(oe())}),Rr=ie({version:ee(1),sender:se(oe()),expiration:_r,gasConfig:Nr,inputs:Q(xr),transactions:Q(zr)});function Vr(e){return(0,n.y)(e).replace("0x","")}class Dr{constructor(e){this.version=1,this.sender=null==e?void 0:e.sender,this.expiration=null==e?void 0:e.expiration,this.gasConfig=(null==e?void 0:e.gasConfig)??{},this.inputs=(null==e?void 0:e.inputs)??[],this.transactions=(null==e?void 0:e.transactions)??[]}static fromKindBytes(e){const t=Bt.TransactionKind.parse(e),r="ProgrammableTransaction"in t?t.ProgrammableTransaction:null;if(!r)throw new Error("Unable to deserialize from bytes.");const n=Er({version:1,gasConfig:{},inputs:r.inputs.map(((e,t)=>Er({kind:"Input",value:e,index:t,type:F(e,lr)?"pure":"object"},xr))),transactions:r.transactions},Rr);return Dr.restore(n)}static fromBytes(e){var t;const r=Bt.TransactionData.parse(e),n=null==r?void 0:r.V1,i="ProgrammableTransaction"in n.kind?null==(t=null==n?void 0:n.kind)?void 0:t.ProgrammableTransaction:null;if(!n||!i)throw new Error("Unable to deserialize from bytes.");const s=Er({version:1,sender:n.sender,expiration:n.expiration,gasConfig:n.gasData,inputs:i.inputs.map(((e,t)=>Er({kind:"Input",value:e,index:t,type:F(e,lr)?"pure":"object"},xr))),transactions:i.transactions},Rr);return Dr.restore(s)}static restore(e){L(e,Rr);const t=new Dr;return Object.assign(t,e),t}static getDigestFromBytes(e){const t=function(e,t){const r=Array.from(`${e}::`).map((e=>e.charCodeAt(0))),i=new Uint8Array(r.length+t.length);return i.set(r),i.set(t,r.length),(0,n.F)(i,{dkLen:32})}("TransactionData",e);return(0,n.w)(t)}build(){let{maxSizeBytes:e=1/0,overrides:t,onlyTransactionKind:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this.inputs.map((e=>(L(e.value,hr),e.value))),i={ProgrammableTransaction:{inputs:n,transactions:this.transactions}};if(r)return Bt.TransactionKind.serialize(i,{maxSize:e}).toBytes();const s=(null==t?void 0:t.expiration)??this.expiration,a=(null==t?void 0:t.sender)??this.sender,o={...this.gasConfig,...null==t?void 0:t.gasConfig};if(!a)throw new Error("Missing transaction sender");if(!o.budget)throw new Error("Missing gas budget");if(!o.payment)throw new Error("Missing gas payment");if(!o.price)throw new Error("Missing gas price");const c={sender:Vr(a),expiration:s||{None:!0},gasData:{payment:o.payment,owner:Vr(this.gasConfig.owner??a),price:BigInt(o.price),budget:BigInt(o.budget)},kind:{ProgrammableTransaction:{inputs:n,transactions:this.transactions}}};return Bt.TransactionData.serialize({V1:c},{maxSize:e}).toBytes()}getDigest(){const e=this.build({onlyTransactionKind:!1});return Dr.getDigestFromBytes(e)}snapshot(){return Er(this,Rr)}}var qr,Lr,Kr,Wr,Fr,Gr,Jr,Zr,Hr,Qr,Xr,Yr,en,tn,rn,nn,sn,an=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},on=(e,t,r)=>(an(e,t,"read from private field"),r?r.call(e):t.get(e)),cn=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},un=(e,t,r,n)=>(an(e,t,"write to private field"),t.set(e,r),r),ln=(e,t,r)=>(an(e,t,"access private method"),r);const dn={maxPureArgumentSize:16384,maxTxGas:5e10,maxGasObjects:256,maxTxSizeBytes:131072};function hn(e){if(!e.client)throw new Error("No provider passed to Transaction#build, but transaction data was not sufficient to build offline.");return e.client}const pn=Symbol.for("@mysten/transaction"),fn={maxTxGas:"max_tx_gas",maxGasObjects:"max_gas_payment_objects",maxTxSizeBytes:"max_tx_size_bytes",maxPureArgumentSize:"max_pure_argument_size"},gn=1000n;const yn=class{constructor(e){cn(this,Lr),cn(this,Wr),cn(this,Gr),cn(this,Zr),cn(this,Qr),cn(this,Yr),cn(this,tn),cn(this,nn),cn(this,qr,void 0),un(this,qr,new Dr(e?e.blockData:void 0))}static fromKind(e){const t=new yn;return un(t,qr,Dr.fromKindBytes("string"==typeof e?o(e):e)),t}static from(e){const t=new yn;return"string"==typeof e&&e.startsWith("{")?un(t,qr,Dr.restore(JSON.parse(e))):un(t,qr,Dr.fromBytes("string"==typeof e?o(e):e)),t}setSender(e){on(this,qr).sender=e}setSenderIfNotSet(e){on(this,qr).sender||(on(this,qr).sender=e)}setExpiration(e){on(this,qr).expiration=e}setGasPrice(e){on(this,qr).gasConfig.price=String(e)}setGasBudget(e){on(this,qr).gasConfig.budget=String(e)}setGasOwner(e){on(this,qr).gasConfig.owner=e}setGasPayment(e){on(this,qr).gasConfig.payment=e.map((e=>W(e,Mt)))}get blockData(){return on(this,qr).snapshot()}get[pn](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:gr(((e,t)=>B(e)?ln(this,Lr,Kr).call(this,"pure",{Pure:Array.from(e.toBytes())}):ln(this,Lr,Kr).call(this,"pure",e instanceof Uint8Array?pr.Pure(e):t?pr.Pure(e,t):e)))}),this.pure}get gas(){return{kind:"GasCoin"}}object(e){if("object"==typeof e&&"kind"in e)return e;const t=fr(e),r=on(this,qr).inputs.find((e=>"object"===e.type&&t===fr(e.value)));return r&&F(r.value,dr)&&"Shared"in r.value.Object&&F(e,dr)&&"Shared"in e.Object&&(r.value.Object.Shared.mutable=r.value.Object.Shared.mutable||e.Object.Shared.mutable),r??ln(this,Lr,Kr).call(this,"object","string"==typeof e?(0,n.y)(e):e)}objectRef(){return this.object(pr.ObjectRef(...arguments))}receivingRef(){return this.object(pr.ReceivingRef(...arguments))}sharedObjectRef(){return this.object(pr.SharedObjectRef(...arguments))}add(e){return function(e){const t=[],r=r=>t[r]??(t[r]={kind:"NestedResult",index:e,resultIndex:r});return new Proxy({kind:"Result",index:e},{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(e,t){if(t in e)return Reflect.get(e,t);if(t===Symbol.iterator)return function*(){let e=0;for(;;)yield r(e),e++};if("symbol"==typeof t)return;const n=parseInt(t,10);return Number.isNaN(n)||n<0?void 0:r(n)}})}(on(this,qr).transactions.push(e)-1)}splitCoins(e,t){return this.add(Pr.SplitCoins("string"==typeof e?this.object(e):e,t.map((e=>"number"==typeof e||"bigint"==typeof e||"string"==typeof e?this.pure.u64(e):ln(this,Wr,Fr).call(this,e)))))}mergeCoins(e,t){return this.add(Pr.MergeCoins("string"==typeof e?this.object(e):e,t.map((e=>"string"==typeof e?this.object(e):e))))}publish(e){let{modules:t,dependencies:r}=e;return this.add(Pr.Publish({modules:t,dependencies:r}))}upgrade(e){let{modules:t,dependencies:r,packageId:n,ticket:i}=e;return this.add(Pr.Upgrade({modules:t,dependencies:r,packageId:n,ticket:"string"==typeof i?this.object(i):i}))}moveCall(e){let{arguments:t,typeArguments:r,target:n}=e;return this.add(Pr.MoveCall({arguments:null==t?void 0:t.map((e=>ln(this,Wr,Fr).call(this,e))),typeArguments:r,target:n}))}transferObjects(e,t){return this.add(Pr.TransferObjects(e.map((e=>"string"==typeof e?this.object(e):e)),"string"==typeof t?this.pure.address(t):ln(this,Wr,Fr).call(this,t)))}makeMoveVec(e){let{type:t,objects:r}=e;return this.add(Pr.MakeMoveVec({type:t,objects:r.map((e=>"string"==typeof e?this.object(e):e))}))}serialize(){return JSON.stringify(on(this,qr).snapshot())}async sign(e){const{signer:t,...r}=e,n=await this.build(r);return t.signTransactionBlock(n)}async build(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await ln(this,nn,sn).call(this,e),on(this,qr).build({maxSizeBytes:ln(this,Gr,Jr).call(this,"maxTxSizeBytes",e),onlyTransactionKind:e.onlyTransactionKind})}async getDigest(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await ln(this,nn,sn).call(this,e),on(this,qr).getDigest()}};let mn=yn;qr=new WeakMap,Lr=new WeakSet,Kr=function(e,t){const r=on(this,qr).inputs.length,n=Er({kind:"Input",value:"bigint"==typeof t?String(t):t,index:r,type:e},xr);return on(this,qr).inputs.push(n),n},Wr=new WeakSet,Fr=function(e){return B(e)?this.pure(e):e},Gr=new WeakSet,Jr=function(e,t){let{protocolConfig:r,limits:n}=t;if(n&&"number"==typeof n[e])return n[e];if(!r)return dn[e];const i=null==r?void 0:r.attributes[fn[e]];if(!i)throw new Error(`Missing expected protocol config: "${fn[e]}"`);const s="u64"in i?i.u64:"u32"in i?i.u32:i.f64;if(!s)throw new Error(`Unexpected protocol config value found for: "${fn[e]}"`);return Number(s)},Zr=new WeakSet,Hr=function(e){const t=ln(this,Gr,Jr).call(this,"maxPureArgumentSize",e);on(this,qr).inputs.forEach(((e,r)=>{if(F(e.value,lr)&&e.value.Pure.length>t)throw new Error(`Input at index ${r} is too large, max pure input size is ${t} bytes, got ${e.value.Pure.length} bytes`)}))},Qr=new WeakSet,Xr=async function(e){if(on(this,qr).gasConfig.payment){const t=ln(this,Gr,Jr).call(this,"maxGasObjects",e);if(on(this,qr).gasConfig.payment.length>t)throw new Error(`Payment objects exceed maximum amount: ${t}`)}if(e.onlyTransactionKind||on(this,qr).gasConfig.payment)return;const t=on(this,qr).gasConfig.owner??on(this,qr).sender,r=(await hn(e).getCoins({owner:t,coinType:n.H})).data.filter((e=>!on(this,qr).inputs.find((t=>!!(F(t.value,hr)&&"Object"in t.value&&"ImmOrOwned"in t.value.Object)&&e.coinObjectId===t.value.Object.ImmOrOwned.objectId)))).slice(0,ln(this,Gr,Jr).call(this,"maxGasObjects",e)-1).map((e=>({objectId:e.coinObjectId,digest:e.digest,version:e.version})));if(!r.length)throw new Error("No valid gas coins found for the transaction.");this.setGasPayment(r)},Yr=new WeakSet,en=async function(e){e.onlyTransactionKind||on(this,qr).gasConfig.price||this.setGasPrice(await hn(e).getReferenceGasPrice())},tn=new WeakSet,rn=async function(e){const{inputs:t,transactions:r}=on(this,qr),i=[],s=[];if(t.forEach((e=>{"object"!==e.type||"string"!=typeof e.value||s.push({id:(0,n.y)(e.value),input:e})})),r.forEach((e=>{if("MoveCall"===e.kind&&e.arguments.some((e=>"Input"===e.kind&&!F(t[e.index].value,hr)))&&i.push(e),"SplitCoins"===e.kind&&e.amounts.forEach((e=>{if("Input"===e.kind){const r=t[e.index];"object"!=typeof r.value&&(r.value=pr.Pure(Bt.U64.serialize(r.value)))}})),"TransferObjects"===e.kind&&"Input"===e.address.kind){const r=t[e.address.index];"object"!=typeof r.value&&(r.value=pr.Pure(Bt.Address.serialize(r.value)))}})),i.length&&await Promise.all(i.map((async r=>{const[i,a,o]=r.target.split("::"),c=await hn(e).getNormalizedMoveFunction({package:(0,n.G)(i),module:a,function:o}),u=c.parameters.length>0&&function(e){var t;const r=null==(t=cr(e))?void 0:t.Struct;return"0x2"===(null==r?void 0:r.address)&&"tx_context"===(null==r?void 0:r.module)&&"TxContext"===(null==r?void 0:r.name)}(c.parameters.at(-1))?c.parameters.slice(0,c.parameters.length-1):c.parameters;if(u.length!==r.arguments.length)throw new Error("Incorrect number of arguments.");u.forEach(((e,n)=>{const i=r.arguments[n];if("Input"!==i.kind)return;const a=t[i.index];if(F(a.value,hr))return;const o=a.value,c=kr(e,o);if(c)a.value=pr.Pure(o,c);else{if(!(null!=cr(e)||"object"==typeof e&&"TypeParameter"in e))throw new Error(`Unknown call arg type ${JSON.stringify(e,null,2)} for value ${JSON.stringify(o,null,2)}`);if("string"!=typeof o)throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(o,null,2)}`);s.push({id:o,input:a,normalizedType:e})}}))}))),s.length){const t=[...new Set(s.map((e=>{let{id:t}=e;return t})))],r=((e,t)=>Array.from({length:Math.ceil(e.length/t)},((r,n)=>e.slice(n*t,n*t+t))))(t,50),n=(await Promise.all(r.map((t=>hn(e).multiGetObjects({ids:t,options:{showOwner:!0}}))))).flat();let i=new Map(t.map(((e,t)=>[e,n[t]])));const a=Array.from(i).filter((e=>{let[t,r]=e;return r.error})).map((e=>{let[t,r]=e;return t}));if(a.length)throw new Error(`The following input objects are invalid: ${a.join(", ")}`);s.forEach((e=>{let{id:t,input:r,normalizedType:n}=e;var s;const a=i.get(t),o=null==(s=a.data)?void 0:s.owner,c=o&&"object"==typeof o&&"Shared"in o?o.Shared.initial_shared_version:void 0;if(c){const e=null!=n&&null==ar(n)&&null==or(n),i=function(e){var t;return(null==(t=function(e){return"object"==typeof e&&"Object"in e&&"Shared"in e.Object?e.Object.Shared:void 0}(e))?void 0:t.mutable)??!1}(r.value)||e||null!=n&&null!=ar(n);r.value=pr.SharedObjectRef({objectId:t,initialSharedVersion:c,mutable:i})}else n&&function(e){const t=cr(e);return!!t&&"0x2"===t.Struct.address&&"transfer"===t.Struct.module&&"Receiving"===t.Struct.name}(n)?r.value=pr.ReceivingRef(Ft(a)):r.value=pr.ObjectRef(Ft(a))}))}},nn=new WeakSet,sn=async function(e){if(!e.onlyTransactionKind&&!on(this,qr).sender)throw new Error("Missing transaction sender");if(!e.protocolConfig&&!e.limits&&e.client&&(e.protocolConfig=await e.client.getProtocolConfig()),await Promise.all([ln(this,Yr,en).call(this,e),ln(this,tn,rn).call(this,e)]),!e.onlyTransactionKind&&(await ln(this,Qr,Xr).call(this,e),!on(this,qr).gasConfig.budget)){const t=await hn(e).dryRunTransactionBlock({transactionBlock:on(this,qr).build({maxSizeBytes:ln(this,Gr,Jr).call(this,"maxTxSizeBytes",e),overrides:{gasConfig:{budget:String(ln(this,Gr,Jr).call(this,"maxTxGas",e)),payment:[]}}})});if("success"!==t.effects.status.status)throw new Error(`Dry run failed, could not automatically determine a budget: ${t.effects.status.error}`,{cause:t});const r=gn*BigInt(this.blockData.gasConfig.price||1n),n=BigInt(t.effects.gasUsed.computationCost)+r,i=n+BigInt(t.effects.gasUsed.storageCost)-BigInt(t.effects.gasUsed.storageRebate);this.setGasBudget(i>n?i:n)}ln(this,Zr,Hr).call(this,e)};const wn=Symbol.for("@mysten/SuiClient");class bn{get[wn](){return!0}constructor(e){this.transport=e.transport??new We({url:e.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(e){if(!e.owner||!(0,n.B)((0,n.y)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[e.owner,e.coinType,e.cursor,e.limit]})}async getAllCoins(e){if(!e.owner||!(0,n.B)((0,n.y)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit]})}async getBalance(e){if(!e.owner||!(0,n.B)((0,n.y)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[e.owner,e.coinType]})}async getAllBalances(e){if(!e.owner||!(0,n.B)((0,n.y)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner]})}async getCoinMetadata(e){return await this.transport.request({method:"suix_getCoinMetadata",params:[e.coinType]})}async getTotalSupply(e){return await this.transport.request({method:"suix_getTotalSupply",params:[e.coinType]})}async call(e,t){return await this.transport.request({method:e,params:t})}async getMoveFunctionArgTypes(e){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e.package,e.module,e.function]})}async getNormalizedMoveModulesByPackage(e){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e.package]})}async getNormalizedMoveModule(e){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e.package,e.module]})}async getNormalizedMoveFunction(e){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e.package,e.module,e.function]})}async getNormalizedMoveStruct(e){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e.package,e.module,e.struct]})}async getOwnedObjects(e){if(!e.owner||!(0,n.B)((0,n.y)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit]})}async getObject(e){if(!e.id||!(0,n.I)((0,n.G)(e.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options]})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options]})}async multiGetObjects(e){if(e.ids.forEach((e=>{if(!e||!(0,n.I)((0,n.G)(e)))throw new Error(`Invalid Sui Object id ${e}`)})),e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options]})}async queryTransactionBlocks(e){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e.filter,options:e.options},e.cursor,e.limit,"descending"===(e.order||"descending")]})}async getTransactionBlock(e){if(!(0,n.J)(e.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options]})}async multiGetTransactionBlocks(e){if(e.digests.forEach((e=>{if(!(0,n.J)(e))throw new Error(`Invalid Transaction digest ${e}`)})),e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options]})}async executeTransactionBlock(e){return await this.transport.request({method:"sui_executeTransactionBlock",params:["string"==typeof e.transactionBlock?e.transactionBlock:u(e.transactionBlock),Array.isArray(e.signature)?e.signature:[e.signature],e.options,e.requestType]})}async signAndExecuteTransactionBlock(e){let t,{transactionBlock:r,signer:n,...i}=e;r instanceof Uint8Array?t=r:(r.setSenderIfNotSet(n.toSuiAddress()),t=await r.build({client:this}));const{signature:s,bytes:a}=await n.signTransactionBlock(t);return this.executeTransactionBlock({transactionBlock:a,signature:s,...i})}async getTotalTransactionBlocks(){const e=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(e)}async getReferenceGasPrice(){const e=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(e)}async getStakes(e){if(!e.owner||!(0,n.B)((0,n.y)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner]})}async getStakesByIds(e){return e.stakedSuiIds.forEach((e=>{if(!e||!(0,n.I)((0,n.G)(e)))throw new Error(`Invalid Sui Stake id ${e}`)})),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(e){return await this.transport.request({method:"suix_queryEvents",params:[e.query,e.cursor,e.limit,"descending"===(e.order||"descending")]})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage})}async devInspectTransactionBlock(e){var t;let r;if(function(e){return!!e&&"object"==typeof e&&!0===e[pn]}(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),r=u(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if("string"==typeof e.transactionBlock)r=e.transactionBlock;else{if(!(e.transactionBlock instanceof Uint8Array))throw new Error("Unknown transaction block format.");r=u(e.transactionBlock)}return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,r,null==(t=e.gasPrice)?void 0:t.toString(),e.epoch]})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:["string"==typeof e.transactionBlock?e.transactionBlock:u(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!(0,n.I)((0,n.G)(e.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit]})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name]})}async getLatestCheckpointSequenceNumber(){const e=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(e)}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id]})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,null==e?void 0:e.limit,e.descendingOrder]})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[null==e?void 0:e.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[null==e?void 0:e.cursor,null==e?void 0:e.limit,null==e?void 0:e.descendingOrder]})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[null==e?void 0:e.descendingOrder]})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[null==e?void 0:e.cursor,null==e?void 0:e.limit,null==e?void 0:e.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){const e=await this.getCheckpoint({id:"0"});return d((0,n.v)(e.digest).slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name]})}async resolveNameServiceNames(e){return await this.transport.request({method:"suix_resolveNameServiceNames",params:[e.address,e.cursor,e.limit]})}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[null==e?void 0:e.version]})}async waitForTransactionBlock(e){let{signal:t,timeout:r=6e4,pollInterval:n=2e3,...i}=e;const s=AbortSignal.timeout(r),a=new Promise(((e,t)=>{s.addEventListener("abort",(()=>t(s.reason)))}));for(a.catch((()=>{}));!s.aborted;){null==t||t.throwIfAborted();try{return await this.getTransactionBlock(i)}catch{await Promise.race([new Promise((e=>setTimeout(e,n))),a])}}throw s.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}}class vn extends n.C{}const Sn="Sui",Tn=e=>{var t;const r=null==(t=e.data)?void 0:t.content;return r&&"moveObject"===r.dataType?r.fields:null},kn=(e,t)=>{try{return(0,n.K)(e)===(0,n.K)(t)}catch{return!1}},En=e=>"created"===(null==e?void 0:e.type),xn=e=>"published"===(null==e?void 0:e.type);function jn(e){return!Array.isArray(e)&&"object"==typeof e&&"fields"in e&&"type"in e}function In(e){return"object"==typeof e&&!function(e){return Array.isArray(e)}(e)&&!jn(e)}function Bn(e){return"object"==typeof e&&"id"in e}const An=e=>Bt.ser("vector<u8>",e,{maxSize:16384}).toBytes(),On=async(e,t)=>{const{data:r,error:i}=await e.getObject({id:t,options:{showContent:!0}});if(i)throw new Error("Error getting object: "+i);if(!r||!jn(r.content))throw new Error(`Cannot get oject for state id ${t}: `+r);return(0,n.L)(r.content.type)},Cn=async(e,t)=>{if(!(0,n.B)(t))throw new Error(`Invalid object ID: ${t}`);const r=await e.getObject({id:t,options:{showContent:!0}});return Tn(r)},Mn=async(e,t)=>{let r,n;do{const i=await e.getDynamicFields({parentId:t,cursor:n});r=i.data.find((e=>e.name.type.endsWith("CurrentPackage"))),n=i.hasNextPage?i.nextCursor:null}while(n&&!r);if(!r)throw new Error("CurrentPackage not found");const i=await e.getObject({id:r.objectId,options:{showContent:!0}}),s=Tn(i);if(!s||!In(s))throw new Error("Unable to get fields from object response");if(!("value"in s)||!jn(s.value))throw new Error("Unable to get package id");return s.value.fields.package},$n=async(e,t,r)=>{let n,i=null,s=null,a=null;do{if(a=await e.getOwnedObjects({owner:r,filter:{StructType:`${t}::emitter::EmitterCap`},options:{showContent:!0},cursor:n}),!a||!a.data)throw Error("Failed to get owned objects");for(const e of a.data){if(!e.data)continue;const{version:t,objectId:r}=e.data;(null===i||t<i)&&(i=t,s=r)}n=a.hasNextPage?a.nextCursor:void 0}while(n);return s},zn=async(e,t)=>{const r=new mn,[i]=r.publish({modules:e.modules.map((e=>Array.from(n.N.decode(e)))),dependencies:e.dependencies.map((e=>(0,n.G)(e)))});return r.transferObjects([i],r.pure(t)),r},Pn=class e extends n.i{constructor(t,r){super(t,r??(0,n.k)(t,e._platform))}getRpc(e){if(e in this.config)return new bn({url:this.config[e].rpc});throw new Error("No configuration available for chain: "+e)}getChain(e){if(e in this.config)return new vn(e,this);throw new Error("No configuration available for chain: "+e)}static nativeTokenId(t,r){if(!e.isSupportedChain(r))throw new Error(`invalid chain for ${Sn}: ${r}`);return n.l.tokenId(r,n.O)}static isNativeTokenId(t,r,n){return!(!e.isSupportedChain(r)||n.chain!==r)&&this.nativeTokenId(t,r)===n}static isSupportedChain(t){return(0,n.o)(t)===e._platform}static async getDecimals(t,r,i){if((0,n.p)(i))return(0,n.q)(e._platform);const s=new n.Q(i);try{const e=await Cn(r,s.toString());if(e&&"decimals"in e)return e.decimals}catch{}const a=await r.getCoinMetadata({coinType:s.getCoinType()});if(null===a)throw new Error(`Can't fetch decimals for token ${s.toString()}`);return a.decimals}static async getCoins(e,t,r){let i=[],s=null;const a=new n.Q(t).toString();do{const t=await e.getCoins({owner:a,coinType:r,cursor:s});i=[...i,...t.data],s=t.hasNextPage?t.nextCursor:null}while(s);return i}static async getBalance(e,t,r,i){if((0,n.p)(i)){const{totalBalance:e}=await t.getBalance({owner:r});return BigInt(e)}const{totalBalance:s}=await t.getBalance({owner:r,coinType:i.toString()});return BigInt(s)}static async getBalances(e,t,r,i){return(await Promise.all(i.map((async i=>{const s=await this.getBalance(e,t,r,i);return{[(0,n.p)(i)?"native":new n.Q(i).toString()]:s}})))).reduce(((e,t)=>Object.assign(e,t)),{})}static async sendWait(e,t,r){const n=[];for(const i of r){const e=await t.executeTransactionBlock(i);await t.waitForTransactionBlock({digest:e.digest}),n.push(e.digest)}return n}static async getLatestBlock(e){return Number(await e.getLatestCheckpointSequenceNumber())}static async getLatestFinalizedBlock(e){return this.getLatestBlock(e)}static chainFromChainId(t){const r=(0,n.t)(e._platform,t);if(void 0===r)throw new Error(`Unknown native chain id ${t}`);const[i,s]=r;return[i,s]}static async chainFromRpc(e){const t=await e.call("sui_getChainIdentifier",[]);return this.chainFromChainId(t)}};a(Pn,"_platform",Sn);let _n=Pn;var Un={};Object.defineProperty(Un,"__esModule",{value:!0}),Un.bech32m=Gn=Un.bech32=void 0;const Nn="qpzry9x8gf2tvdw0s3jn54khce6mua7l",Rn={};for(let Ti=0;Ti<32;Ti++){const e=Nn.charAt(Ti);Rn[e]=Ti}function Vn(e){const t=e>>25;return(33554431&e)<<5^996825010&-(t>>0&1)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function Dn(e){let t=1;for(let r=0;r<e.length;++r){const n=e.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+e+")";t=Vn(t)^n>>5}t=Vn(t);for(let r=0;r<e.length;++r){const n=e.charCodeAt(r);t=Vn(t)^31&n}return t}function qn(e,t,r,n){let i=0,s=0;const a=(1<<r)-1,o=[];for(let c=0;c<e.length;++c)for(i=i<<t|e[c],s+=t;s>=r;)s-=r,o.push(i>>s&a);if(n)s>0&&o.push(i<<r-s&a);else{if(s>=t)return"Excess padding";if(i<<r-s&a)return"Non-zero padding"}return o}function Ln(e){return qn(e,8,5,!0)}function Kn(e){const t=qn(e,5,8,!1);if(Array.isArray(t))return t}function Wn(e){const t=qn(e,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)}function Fn(e){let t;function r(e,r){if(r=r||90,e.length<8)return e+" too short";if(e.length>r)return"Exceeds length limit";const n=e.toLowerCase(),i=e.toUpperCase();if(e!==n&&e!==i)return"Mixed-case string "+e;const s=(e=n).lastIndexOf("1");if(-1===s)return"No separator character for "+e;if(0===s)return"Missing prefix for "+e;const a=e.slice(0,s),o=e.slice(s+1);if(o.length<6)return"Data too short";let c=Dn(a);if("string"==typeof c)return c;const u=[];for(let t=0;t<o.length;++t){const e=o.charAt(t),r=Rn[e];if(void 0===r)return"Unknown character "+e;c=Vn(c)^r,!(t+6>=o.length)&&u.push(r)}return c!==t?"Invalid checksum for "+e:{prefix:a,words:u}}return t="bech32"===e?1:734539939,{decodeUnsafe:function(e,t){const n=r(e,t);if("object"==typeof n)return n},decode:function(e,t){const n=r(e,t);if("object"==typeof n)return n;throw new Error(n)},encode:function(e,r,n){if(n=n||90,e.length+7+r.length>n)throw new TypeError("Exceeds length limit");let i=Dn(e=e.toLowerCase());if("string"==typeof i)throw new Error(i);let s=e+"1";for(let t=0;t<r.length;++t){const e=r[t];if(e>>5)throw new Error("Non 5-bit word");i=Vn(i)^e,s+=Nn.charAt(e)}for(let t=0;t<6;++t)i=Vn(i);i^=t;for(let t=0;t<6;++t){s+=Nn.charAt(i>>5*(5-t)&31)}return s},toWords:Ln,fromWordsUnsafe:Kn,fromWords:Wn}}var Gn=Un.bech32=Fn("bech32");Un.bech32m=Fn("bech32m");var Jn=(e=>(e[e.TransactionData=0]="TransactionData",e[e.TransactionEffects=1]="TransactionEffects",e[e.CheckpointSummary=2]="CheckpointSummary",e[e.PersonalMessage=3]="PersonalMessage",e))(Jn||{});function Zn(e,t){const r=function(e){return[e,0,0]}(e),n=new Uint8Array(r.length+t.length);return n.set(r),n.set(t,r.length),n}const Hn={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5},Qn={ED25519:32,Secp256k1:33,Secp256r1:33},Xn={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin"};function Yn(e,t){const r=function(e,t){const r=e.toString(16);return(0,n.R)(r.padStart(2*t,"0").slice(2*-t))}(e,t),i=function(e){for(let t=0;t<e.length;t++)if(0!==e[t])return t;return-1}(r);return-1===i?new Uint8Array([0]):r.slice(i)}function ei(e){if(1!==e.length)throw new Error("Invalid base64Url character: "+e);const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".indexOf(e);if(-1===t)throw new Error("Invalid base64Url character: "+e);const r=t.toString(2).padStart(6,"0");return Array.from(r).map(Number)}function ti(e,t){if(e.length<2)throw new Error(`Input (s = ${e}) is not tightly packed because s.length < 2`);let r=function(e){let t=[];for(let r=0;r<e.length;r++){const n=ei(e.charAt(r));t=t.concat(n)}return t}(e);const n=t%4;if(0!==n)if(1===n)r=r.slice(2);else{if(2!==n)throw new Error(`Input (s = ${e}) is not tightly packed because i%4 = 3 (i = ${t}))`);r=r.slice(4)}const i=(t+e.length-1)%4;if(3!==i)if(2===i)r=r.slice(0,r.length-2);else{if(1!==i)throw new Error(`Input (s = ${e}) is not tightly packed because (i + s.length - 1)%4 = 0 (i = ${t}))`);r=r.slice(0,r.length-4)}if(r.length%8!==0)throw new Error("We should never reach here...");const s=new Uint8Array(Math.floor(r.length/8));let a=0;for(let o=0;o<r.length;o+=8){const e=r.slice(o,o+8),t=parseInt(e.join(""),2);s[a++]=t}return(new TextDecoder).decode(s)}function ri(e,t){const r=ti(e.value,e.indexMod4),[n,i]=function(e){if("}"!==e.slice(-1)&&","!==e.slice(-1))throw new Error("Invalid claim");const t=JSON.parse("{"+e.slice(0,-1)+"}");if(1!==Object.keys(t).length)throw new Error("Invalid claim");const r=Object.keys(t)[0];return[r,t[r]]}(r);if(n!==t)throw new Error(`Invalid field name: found ${n} expected ${t}`);return i}const ni=$.struct("ZkLoginSignature",{inputs:$.struct("ZkLoginSignatureInputs",{proofPoints:$.struct("ZkLoginSignatureInputsProofPoints",{a:$.vector($.string()),b:$.vector($.vector($.string())),c:$.vector($.string())}),issBase64Details:$.struct("ZkLoginSignatureInputsClaim",{value:$.string(),indexMod4:$.u8()}),headerBase64:$.string(),addressSeed:$.string()}),maxEpoch:$.u64(),userSignature:$.vector($.u8())});function ii(e){let{signature:t,signatureScheme:r,publicKey:n}=e;if(!n)throw new Error("`publicKey` is required");const i=n.toRawBytes(),s=new Uint8Array(1+t.length+i.length);return s.set([Hn[r]]),s.set(t,1),s.set(i,1+t.length),u(s)}function si(e){const t=o(e),r=Xn[t[0]];switch(r){case"MultiSig":return{serializedSignature:e,signatureScheme:r,multisig:Bt.MultiSig.parse(t.slice(1)),bytes:t};case"ZkLogin":const i=t.slice(1),{inputs:s,maxEpoch:a,userSignature:c}=function(e){return ni.parse("string"==typeof e?o(e):e)}(i),{issBase64Details:u,addressSeed:l}=s,d=ri(u,"iss"),h=function(e,t){const r=Yn(e,32);"accounts.google.com"===t&&(t="https://accounts.google.com");const i=(new TextEncoder).encode(t),s=new Uint8Array(2+r.length+i.length);return s.set([Hn.ZkLogin]),s.set([i.length],1),s.set(i,2),s.set(r,2+i.length),(0,n.y)((0,n.T)((0,n.F)(s,{dkLen:32})).slice(0,2*n.z))}(BigInt(l),d);return{serializedSignature:e,signatureScheme:r,zkLogin:{inputs:s,maxEpoch:a,userSignature:c,iss:d,address:h,addressSeed:BigInt(l)},signature:t};case"ED25519":case"Secp256k1":case"Secp256r1":const p=Qn[r],f=t.slice(1,t.length-p);return{serializedSignature:e,signatureScheme:r,signature:f,publicKey:t.slice(1+f.length),bytes:t};default:throw new Error("Unsupported signature scheme")}}const ai=32;class oi{async signWithIntent(e,t){const r=Zn(t,e),i=(0,n.F)(r,{dkLen:32});return{signature:ii({signature:await this.sign(i),signatureScheme:this.getKeyScheme(),publicKey:this.getPublicKey()}),bytes:u(e)}}async signTransactionBlock(e){return this.signWithIntent(e,Jn.TransactionData)}async signPersonalMessage(e){return this.signWithIntent($.vector($.u8()).serialize(e).toBytes(),Jn.PersonalMessage)}toSuiAddress(){return this.getPublicKey().toSuiAddress()}}class ci extends oi{export(){return{schema:this.getKeyScheme(),privateKey:this.getSecretKey()}}}function ui(e){return!!new RegExp("^m\\/44'\\/784'\\/[0-9]+'\\/[0-9]+'\\/[0-9]+'+$").test(e)}function li(e){return d(function(e){return pe(e,"")}(e))}const di=new RegExp("^m(\\/[0-9]+')+$"),hi=e=>e.replace("'",""),pi=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2147483648;if(!(e=>!!di.test(e)&&!e.split("/").slice(1).map(hi).some(isNaN))(e))throw new Error("Invalid derivation path");const{key:i,chainCode:s}=(e=>{const t=n.U.create(n.x,"ed25519 seed").update(l(e)).digest();return{key:t.slice(0,32),chainCode:t.slice(32)}})(t);return e.split("/").slice(1).map(hi).map((e=>parseInt(e,10))).reduce(((e,t)=>((e,t)=>{let{key:r,chainCode:i}=e;const s=new ArrayBuffer(4);new DataView(s).setUint32(0,t);const a=new Uint8Array(1+r.length+s.byteLength);a.set(new Uint8Array(1).fill(0)),a.set(r,1),a.set(new Uint8Array(s,0,s.byteLength),r.length+1);const o=n.U.create(n.x,i).update(a).digest();return{key:o.slice(0,32),chainCode:o.slice(32)}})(e,t+r)),{key:i,chainCode:s})};function fi(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}class gi{equals(e){return fi(this.toRawBytes(),e.toRawBytes())}toBase64(){return u(this.toRawBytes())}toString(){throw new Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toSuiPublicKey(){return u(this.toSuiBytes())}verifyWithIntent(e,t,r){const i=Zn(r,e),s=(0,n.F)(i,{dkLen:32});return this.verify(s,t)}verifyPersonalMessage(e,t){return this.verifyWithIntent(Bt.vector(Bt.u8()).serialize(e).toBytes(),t,Jn.PersonalMessage)}verifyTransactionBlock(e,t){return this.verifyWithIntent(e,t,Jn.TransactionData)}toSuiBytes(){const e=this.toRawBytes(),t=new Uint8Array(e.length+1);return t.set([this.flag()]),t.set(e,1),t}toSuiAddress(){return(0,n.y)((0,n.T)((0,n.F)(this.toSuiBytes(),{dkLen:32})).slice(0,2*n.z))}}class yi extends gi{constructor(e){if(super(),"string"==typeof e?this.data=o(e):e instanceof Uint8Array?this.data=e:this.data=Uint8Array.from(e),32!==this.data.length)throw new Error(`Invalid public key input. Expected 32 bytes, got ${this.data.length}`)}equals(e){return super.equals(e)}toRawBytes(){return this.data}flag(){return Hn.ED25519}async verify(e,t){let r;if("string"==typeof t){const e=si(t);if("ED25519"!==e.signatureScheme)throw new Error("Invalid signature scheme");if(!fi(this.toRawBytes(),e.publicKey))throw new Error("Signature does not match public key");r=e.signature}else r=t;return n.n.sign.detached.verify(e,r,this.toRawBytes())}}yi.SIZE=32;const mi="m/44'/784'/0'/0'/0'";class wi extends ci{constructor(e){super(),this.keypair=e||n.n.sign.keyPair()}getKeyScheme(){return"ED25519"}static generate(){return new wi(n.n.sign.keyPair())}static fromSecretKey(e,t){const r=e.length;if(r!==ai)throw new Error(`Wrong secretKey size. Expected ${ai} bytes, got ${r}.`);const i=n.n.sign.keyPair.fromSeed(e);if(!t||!t.skipValidation){const e=(new TextEncoder).encode("sui validation"),t=n.n.sign.detached(e,i.secretKey);if(!n.n.sign.detached.verify(e,t,i.publicKey))throw new Error("provided secretKey is invalid")}return new wi(i)}getPublicKey(){return new yi(this.keypair.publicKey)}getSecretKey(){return function(e,t){if(e.length!==ai)throw new Error("Invalid bytes length");const r=Hn[t],n=new Uint8Array(e.length+1);return n.set([r]),n.set(e,1),Gn.encode("suiprivkey",Gn.toWords(n))}(this.keypair.secretKey.slice(0,ai),this.getKeyScheme())}async sign(e){return this.signData(e)}signData(e){return n.n.sign.detached(e,this.keypair.secretKey)}static deriveKeypair(e,t){if(null==t&&(t=mi),!ui(t))throw new Error("Invalid derivation path");const{key:r}=pi(t,li(e));return wi.fromSecretKey(r)}static deriveKeypairFromSeed(e,t){if(null==t&&(t=mi),!ui(t))throw new Error("Invalid derivation path");const{key:r}=pi(t,e);return wi.fromSecretKey(r)}}class bi{constructor(e,t,r,n){a(this,"_chain"),a(this,"_client"),a(this,"_signer"),a(this,"_debug"),this._chain=e,this._client=t,this._signer=r,this._debug=n}chain(){return this._chain}address(){return this._signer.toSuiAddress()}async signAndSend(e){const t=[];for(const n of e){const{description:e,transaction:i}=n;this._debug&&console.log(`Signing ${e} for ${this.address()}`);try{const e=await this._client.signAndExecuteTransactionBlock({transactionBlock:i,signer:this._signer});t.push(e.digest)}catch(r){throw r}}return t}}const vi={Address:n.Q,Platform:_n,getSigner:async function(e,t){const[,r]=await _n.chainFromRpc(e);return new bi(r,e,wi.deriveKeypair(t,"m/44'/784'/0'/0'/0'"))},protocols:{WormholeCore:()=>r.e(364).then(r.bind(r,1364)),TokenBridge:()=>r.e(590).then(r.bind(r,1590))},getChain:(e,t,r)=>new vn(t,new _n(e,(0,n.c)(e,Sn,{[t]:r})))},Si=Object.freeze(Object.defineProperty({__proto__:null,default:vi},Symbol.toStringTag,{value:"Module"}))}}]);
//# sourceMappingURL=16.3c8a6a45.chunk.js.map