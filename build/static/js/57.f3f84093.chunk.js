/*! For license information please see 57.f3f84093.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbrige_typescript=self.webpackChunkbrige_typescript||[]).push([[57],{3057:(e,t,n)=>{n.r(t),n.d(t,{A:()=>vr,a:()=>xr});var r=n(7718),s=Object.defineProperty,i=(e,t,n)=>((e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);function a(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function o(e){if(!function(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}(e))throw new Error("Expected Uint8Array");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new Error(`Expected Uint8Array of length ${n}, not of length=${e.length}`)}function c(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");a(e.outputLen),a(e.blockLen)}function l(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function d(e,t){o(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}function u(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}const h=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),f=(e,t)=>e<<32-t|e>>>t;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");const _=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function g(e){if(!u(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=_[e[n]];return t}const p={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function y(e){return e>=p._0&&e<=p._9?e-p._0:e>=p._A&&e<=p._F?e-(p._A-10):e>=p._a&&e<=p._f?e-(p._a-10):void 0}function w(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const t=y(e.charCodeAt(i)),n=y(e.charCodeAt(i+1));if(void 0===t||void 0===n){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}r[s]=16*t+n}return r}function b(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),!u(e))throw new Error("expected Uint8Array, got "+typeof e);return e}class m{clone(){return this._cloneInto()}}const v={}.toString;function A(e){const t=t=>e().update(b(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}class U extends m{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,c(e);const n=b(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,s=new Uint8Array(r);s.set(n.length>r?e.create().update(n).digest():n);for(let i=0;i<s.length;i++)s[i]^=54;this.iHash.update(s),this.oHash=e.create();for(let i=0;i<s.length;i++)s[i]^=106;this.oHash.update(s),s.fill(0)}update(e){return l(this),this.iHash.update(e),this}digestInto(e){l(this),o(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:s,blockLen:i,outputLen:a}=this;return e.finished=r,e.destroyed=s,e.blockLen=i,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const x=(e,t,n)=>new U(e,t).update(n).digest();function z(e,t,n,r){c(e);const s=function(e,t){if(void 0!==t&&"[object Object]"!==v.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)}({dkLen:32,asyncTick:10},r),{c:i,dkLen:o,asyncTick:l}=s;if(a(i),a(o),a(l),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const d=b(t),u=b(n),h=new Uint8Array(o),f=x.create(e,d),_=f._cloneInto().update(u);return{c:i,dkLen:o,asyncTick:l,DK:h,PRF:f,PRFSalt:_}}x.create=(e,t)=>new U(e,t);class T extends m{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=h(this.buffer)}update(e){l(this);const{view:t,buffer:n,blockLen:r}=this,s=(e=b(e)).length;for(let i=0;i<s;){const a=Math.min(r-this.pos,s-i);if(a!==r)n.set(e.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=h(e);for(;r<=s-i;i+=r)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){l(this),d(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:s}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(n,0),i=0);for(let l=i;l<r;l++)t[l]=0;(function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(n>>s&i),o=Number(n&i),c=r?4:0,l=r?0:4;e.setUint32(t+c,a,r),e.setUint32(t+l,o,r)})(n,r-8,BigInt(8*this.length),s),this.process(n,0);const a=h(e),o=this.outputLen;if(o%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=o/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<c;l++)a.setUint32(4*l,u[l],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:s,destroyed:i,pos:a}=this;return e.length=r,e.pos=a,e.finished=s,e.destroyed=i,r%t&&e.buffer.set(n),e}}const S=(e,t,n)=>e&t^~e&n,E=(e,t,n)=>e&t^e&n^t&n,B=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),k=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),I=new Uint32Array(64);class $ extends T{constructor(){super(64,32,8,!1),this.A=0|k[0],this.B=0|k[1],this.C=0|k[2],this.D=0|k[3],this.E=0|k[4],this.F=0|k[5],this.G=0|k[6],this.H=0|k[7]}get(){const{A:e,B:t,C:n,D:r,E:s,F:i,G:a,H:o}=this;return[e,t,n,r,s,i,a,o]}set(e,t,n,r,s,i,a,o){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|s,this.F=0|i,this.G=0|a,this.H=0|o}process(e,t){for(let d=0;d<16;d++,t+=4)I[d]=e.getUint32(t,!1);for(let d=16;d<64;d++){const e=I[d-15],t=I[d-2],n=f(e,7)^f(e,18)^e>>>3,r=f(t,17)^f(t,19)^t>>>10;I[d]=r+I[d-7]+n+I[d-16]|0}let{A:n,B:r,C:s,D:i,E:a,F:o,G:c,H:l}=this;for(let d=0;d<64;d++){const e=l+(f(a,6)^f(a,11)^f(a,25))+S(a,o,c)+B[d]+I[d]|0,t=(f(n,2)^f(n,13)^f(n,22))+E(n,r,s)|0;l=c,c=o,o=a,a=i+e|0,i=s,s=r,r=n,n=e+t|0}n=n+this.A|0,r=r+this.B|0,s=s+this.C|0,i=i+this.D|0,a=a+this.E|0,o=o+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(n,r,s,i,a,o,c,l)}roundClean(){I.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const C=A((()=>new $)),O=BigInt(2**32-1),L=BigInt(32);function N(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?{h:Number(e&O),l:Number(e>>L&O)}:{h:0|Number(e>>L&O),l:0|Number(e&O)}}function H(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:i,l:a}=N(e[s],t);[n[s],r[s]]=[i,a]}return[n,r]}const q=(e,t,n)=>e<<n|t>>>32-n,P=(e,t,n)=>t<<n|e>>>32-n,D=(e,t,n)=>t<<n-32|e>>>64-n,F=(e,t,n)=>e<<n-32|t>>>64-n;const M={fromBig:N,split:H,toBig:(e,t)=>BigInt(e>>>0)<<L|BigInt(t>>>0),shrSH:(e,t,n)=>e>>>n,shrSL:(e,t,n)=>e<<32-n|t>>>n,rotrSH:(e,t,n)=>e>>>n|t<<32-n,rotrSL:(e,t,n)=>e<<32-n|t>>>n,rotrBH:(e,t,n)=>e<<64-n|t>>>n-32,rotrBL:(e,t,n)=>e>>>n-32|t<<64-n,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:q,rotlSL:P,rotlBH:D,rotlBL:F,add:function(e,t,n,r){const s=(t>>>0)+(r>>>0);return{h:e+n+(s/2**32|0)|0,l:0|s}},add3L:(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),add3H:(e,t,n,r)=>t+n+r+(e/2**32|0)|0,add4L:(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),add4H:(e,t,n,r,s)=>t+n+r+s+(e/2**32|0)|0,add5H:(e,t,n,r,s,i)=>t+n+r+s+i+(e/2**32|0)|0,add5L:(e,t,n,r,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(s>>>0)},[R,G]=M.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))),K=new Uint32Array(80),j=new Uint32Array(80);class V extends T{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:r,Ch:s,Cl:i,Dh:a,Dl:o,Eh:c,El:l,Fh:d,Fl:u,Gh:h,Gl:f,Hh:_,Hl:g}=this;return[e,t,n,r,s,i,a,o,c,l,d,u,h,f,_,g]}set(e,t,n,r,s,i,a,o,c,l,d,u,h,f,_,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|s,this.Cl=0|i,this.Dh=0|a,this.Dl=0|o,this.Eh=0|c,this.El=0|l,this.Fh=0|d,this.Fl=0|u,this.Gh=0|h,this.Gl=0|f,this.Hh=0|_,this.Hl=0|g}process(e,t){for(let w=0;w<16;w++,t+=4)K[w]=e.getUint32(t),j[w]=e.getUint32(t+=4);for(let w=16;w<80;w++){const e=0|K[w-15],t=0|j[w-15],n=M.rotrSH(e,t,1)^M.rotrSH(e,t,8)^M.shrSH(e,t,7),r=M.rotrSL(e,t,1)^M.rotrSL(e,t,8)^M.shrSL(e,t,7),s=0|K[w-2],i=0|j[w-2],a=M.rotrSH(s,i,19)^M.rotrBH(s,i,61)^M.shrSH(s,i,6),o=M.rotrSL(s,i,19)^M.rotrBL(s,i,61)^M.shrSL(s,i,6),c=M.add4L(r,o,j[w-7],j[w-16]),l=M.add4H(c,n,a,K[w-7],K[w-16]);K[w]=0|l,j[w]=0|c}let{Ah:n,Al:r,Bh:s,Bl:i,Ch:a,Cl:o,Dh:c,Dl:l,Eh:d,El:u,Fh:h,Fl:f,Gh:_,Gl:g,Hh:p,Hl:y}=this;for(let w=0;w<80;w++){const e=M.rotrSH(d,u,14)^M.rotrSH(d,u,18)^M.rotrBH(d,u,41),t=M.rotrSL(d,u,14)^M.rotrSL(d,u,18)^M.rotrBL(d,u,41),b=d&h^~d&_,m=u&f^~u&g,v=M.add5L(y,t,m,G[w],j[w]),A=M.add5H(v,p,e,b,R[w],K[w]),U=0|v,x=M.rotrSH(n,r,28)^M.rotrBH(n,r,34)^M.rotrBH(n,r,39),z=M.rotrSL(n,r,28)^M.rotrBL(n,r,34)^M.rotrBL(n,r,39),T=n&s^n&a^s&a,S=r&i^r&o^i&o;p=0|_,y=0|g,_=0|h,g=0|f,h=0|d,f=0|u,({h:d,l:u}=M.add(0|c,0|l,0|A,0|U)),c=0|a,l=0|o,a=0|s,o=0|i,s=0|n,i=0|r;const E=M.add3L(U,z,S);n=M.add3H(E,A,x,T),r=0|E}({h:n,l:r}=M.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:s,l:i}=M.add(0|this.Bh,0|this.Bl,0|s,0|i)),({h:a,l:o}=M.add(0|this.Ch,0|this.Cl,0|a,0|o)),({h:c,l:l}=M.add(0|this.Dh,0|this.Dl,0|c,0|l)),({h:d,l:u}=M.add(0|this.Eh,0|this.El,0|d,0|u)),({h:h,l:f}=M.add(0|this.Fh,0|this.Fl,0|h,0|f)),({h:_,l:g}=M.add(0|this.Gh,0|this.Gl,0|_,0|g)),({h:p,l:y}=M.add(0|this.Hh,0|this.Hl,0|p,0|y)),this.set(n,r,s,i,a,o,c,l,d,u,h,f,_,g,p,y)}roundClean(){K.fill(0),j.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const W=A((()=>new V));function X(e){if("string"!=typeof e)throw new TypeError("Invalid mnemonic type: "+typeof e);return e.normalize("NFKD")}function J(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(e,t,n,r){const{c:s,dkLen:i,DK:a,PRF:o,PRFSalt:c}=z(e,t,n,r);let l;const d=new Uint8Array(4),u=h(d),f=new Uint8Array(o.outputLen);for(let h=1,_=0;_<i;h++,_+=o.outputLen){const e=a.subarray(_,_+o.outputLen);u.setInt32(0,h,!1),(l=c._cloneInto(l)).update(d).digestInto(f),e.set(f.subarray(0,e.length));for(let t=1;t<s;t++){o._cloneInto(l).update(f).digestInto(f);for(let t=0;t<e.length;t++)e[t]^=f[t]}}return function(e,t,n,r,s){return e.destroy(),t.destroy(),r&&r.destroy(),s.fill(0),n}(o,c,a,l,f)}(W,function(e){const t=X(e),n=t.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:n}}(e).nfkd,(e=>X(`mnemonic${e}`))(t),{c:2048,dkLen:64})}const[Q,Z,Y]=[[],[],[]],ee=BigInt(0),te=BigInt(1),ne=BigInt(2),re=BigInt(7),se=BigInt(256),ie=BigInt(113);for(let zr=0,Tr=te,Sr=1,Er=0;zr<24;zr++){[Sr,Er]=[Er,(2*Sr+3*Er)%5],Q.push(2*(5*Er+Sr)),Z.push((zr+1)*(zr+2)/2%64);let e=ee;for(let t=0;t<7;t++)Tr=(Tr<<te^(Tr>>re)*ie)%se,Tr&ne&&(e^=te<<(te<<BigInt(t))-te);Y.push(e)}const[ae,oe]=H(Y,!0),ce=(e,t,n)=>n>32?D(e,t,n):q(e,t,n),le=(e,t,n)=>n>32?F(e,t,n):P(e,t,n);class de extends m{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:24;if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=r,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,a(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var i;this.state=new Uint8Array(200),this.state32=(i=this.state,new Uint32Array(i.buffer,i.byteOffset,Math.floor(i.byteLength/4)))}keccak(){(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24;const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let r=0;r<10;r++)n[r]=e[r]^e[r+10]^e[r+20]^e[r+30]^e[r+40];for(let r=0;r<10;r+=2){const t=(r+8)%10,s=(r+2)%10,i=n[s],a=n[s+1],o=ce(i,a,1)^n[t],c=le(i,a,1)^n[t+1];for(let n=0;n<50;n+=10)e[r+n]^=o,e[r+n+1]^=c}let t=e[2],s=e[3];for(let n=0;n<24;n++){const r=Z[n],i=ce(t,s,r),a=le(t,s,r),o=Q[n];t=e[o],s=e[o+1],e[o]=i,e[o+1]=a}for(let r=0;r<50;r+=10){for(let t=0;t<10;t++)n[t]=e[r+t];for(let t=0;t<10;t++)e[r+t]^=~n[(t+2)%10]&n[(t+4)%10]}e[0]^=ae[r],e[1]^=oe[r]}n.fill(0)})(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){l(this);const{blockLen:t,state:n}=this,r=(e=b(e)).length;for(let s=0;s<r;){const i=Math.min(t-this.pos,r-s);for(let t=0;t<i;t++)n[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:r}=this;e[n]^=t,128&t&&n===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){l(this,!1),o(e),this.finish();const t=this.state,{blockLen:n}=this;for(let r=0,s=e.length;r<s;){this.posOut>=n&&this.keccak();const i=Math.min(n-this.posOut,s-r);e.set(t.subarray(this.posOut,this.posOut+i),r),this.posOut+=i,r+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return a(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(d(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:r,rounds:s,enableXOF:i}=this;return e||(e=new de(t,n,r,i,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=r,e.enableXOF=i,e.destroyed=this.destroyed,e}}const ue=((e,t,n)=>A((()=>new de(t,e,n))))(6,136,32);!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function s(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new s(r,i||e,a),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],o]:e._events[c].push(o):(e._events[c]=o,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,r,s=[];if(0===this._eventsCount)return s;for(r in e=this._events)t.call(e,r)&&s.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(e)):s},o.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var s=0,i=r.length,a=new Array(i);s<i;s++)a[s]=r[s].fn;return a},o.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},o.prototype.emit=function(e,t,r,s,i,a){var o=n?n+e:e;if(!this._events[o])return!1;var c,l,d=this._events[o],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,r),!0;case 4:return d.fn.call(d.context,t,r,s),!0;case 5:return d.fn.call(d.context,t,r,s,i),!0;case 6:return d.fn.call(d.context,t,r,s,i,a),!0}for(l=1,c=new Array(u-1);l<u;l++)c[l-1]=arguments[l];d.fn.apply(d.context,c)}else{var h,f=d.length;for(l=0;l<f;l++)switch(d[l].once&&this.removeListener(e,d[l].fn,void 0,!0),u){case 1:d[l].fn.call(d[l].context);break;case 2:d[l].fn.call(d[l].context,t);break;case 3:d[l].fn.call(d[l].context,t,r);break;case 4:d[l].fn.call(d[l].context,t,r,s);break;default:if(!c)for(h=1,c=new Array(u-1);h<u;h++)c[h-1]=arguments[h];d[l].fn.apply(d[l].context,c)}}return!0},o.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,r,s){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return a(this,i),this;var o=this._events[i];if(o.fn)o.fn===t&&(!s||o.once)&&(!r||o.context===r)&&a(this,i);else{for(var c=0,l=[],d=o.length;c<d;c++)(o[c].fn!==t||s&&!o[c].once||r&&o[c].context!==r)&&l.push(o[c]);l.length?this._events[i]=1===l.length?l[0]:l:a(this,i)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o}({exports:{}});var he=Object.defineProperty,fe=Object.getOwnPropertyDescriptor,_e=(e,t)=>{for(var n in t)he(e,n,{get:t[n],enumerable:!0})},ge=(e,t,n,r)=>{for(var s,i=fe(t,n),a=e.length-1;a>=0;a--)(s=e[a])&&(i=s(t,n,i)||i);return i&&he(t,n,i),i},pe=/^m(\/[0-9]+')+$/,ye=e=>e.replace("'",""),we=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2147483648;if(!(e=>!!pe.test(e)&&!e.split("/").slice(1).map(ye).some(Number.isNaN))(e))throw new Error("Invalid derivation path");const{key:r,chainCode:s}=(e=>{const t=x.create(W,"ed25519 seed").update(w(e)).digest();return{key:t.slice(0,32),chainCode:t.slice(32)}})(t);return e.split("/").slice(1).map(ye).map((e=>parseInt(e,10))).reduce(((e,t)=>((e,t)=>{let{key:n,chainCode:r}=e;const s=new ArrayBuffer(4);new DataView(s).setUint32(0,t);const i=new Uint8Array(s),a=new Uint8Array([0]),o=new Uint8Array([...a,...n,...i]),c=x.create(W,r).update(o).digest();return{key:c.slice(0,32),chainCode:c.slice(32)}})(e,t+n)),{key:r,chainCode:s})},be="1.21.0";async function me(e){return new Promise((t=>{setTimeout(t,e)}))}var ve=2e5,Ae="0x1::aptos_coin::AptosCoin";function Ue(e){let t,n,r;return"object"==typeof e?(t=e.hashFunction,n=e.ttlMs,r=e.tags):t=e,(e,s,i)=>{if(null!=i.value)i.value=Te(i.value,t,n,r);else{if(null==i.get)throw new Error("Only put a Memoize() decorator on a method or get accessor.");i.get=Te(i.get,t,n,r)}}}function xe(e,t){return Ue({ttlMs:e,hashFunction:t})}var ze=new Map;function Te(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;const s=Symbol("__memoized_map__");return function(){let i;const a=this;a.hasOwnProperty(s)||Object.defineProperty(a,s,{configurable:!1,enumerable:!1,writable:!1,value:new Map});const o=a[s];if(Array.isArray(r))for(const e of r)ze.has(e)?ze.get(e).push(o):ze.set(e,[o]);for(var c=arguments.length,l=new Array(c),d=0;d<c;d++)l[d]=arguments[d];if(t||l.length>0||n>0){let r;r=!0===t?l.map((e=>e.toString())).join("!"):t?t.apply(a,l):l[0];const s=`${r}__timestamp`;let c=!1;if(n>0)if(o.has(s)){const e=o.get(s);c=Date.now()-e>n}else c=!0;o.has(r)&&!c?i=o.get(r):(i=e.apply(a,l),o.set(r,i),n>0&&o.set(s,Date.now()))}else{const t=a;o.has(t)?i=o.get(t):(i=e.apply(a,l),o.set(t,i))}return i}}var Se=class extends Error{constructor(e,t,n){super(n),this.name="AptosApiError",this.url=t.url,this.status=t.status,this.statusText=t.statusText,this.data=t.data,this.request=e}},Ee={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",429:"Too Many Requests",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable"};async function Be(e,t,n,s,i,a){const o={...null==a?void 0:a.HEADERS,"x-aptos-client":`aptos-ts-sdk/${be}`,"content-type":s??"application/json"};return null!=a&&a.TOKEN&&(o.Authorization=`Bearer ${null==a?void 0:a.TOKEN}`),await async function(e){var t;const{params:n,method:s,url:i,headers:a,body:o,overrides:c}=e,l={headers:a,method:s,url:i,params:n,data:o,withCredentials:null==(t=null==c?void 0:c.WITH_CREDENTIALS)||t};try{const e=await(0,r.h)(l);return{status:e.status,statusText:e.statusText,data:e.data,headers:e.headers,config:e.config}}catch(d){const e=d;if(e.response)return e.response;throw d}}({url:e,method:t,body:n,params:i,headers:o,overrides:a})}async function ke(e){const{url:t,endpoint:n,method:r,body:s,contentType:i,params:a,overrides:o}=e,c=`${t}/${n??""}`,l=await Be(c,r,s,i,a,o),d={status:l.status,statusText:l.statusText,data:l.data,headers:l.headers,config:l.config,url:c};if(d.status>=200&&d.status<300)return d;const u=Ee[d.status];throw new Se(e,d,u??"Generic Error")}async function Ie(e){return await ke({...e,method:"GET"})}async function $e(e){return await ke({...e,method:"POST"})}async function Ce(e){const t=[];let n;const r=e.params;for(;;){r.start=n;const s=await Ie({url:e.url,endpoint:e.endpoint,params:r,originMethod:e.originMethod,overrides:e.overrides});if(n=s.headers["x-aptos-cursor"],delete s.headers,t.push(...s.data),null==n)break}return t}var Oe={mainnet:"https://indexer.mainnet.aptoslabs.com/v1/graphql",testnet:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",devnet:"https://indexer-devnet.staging.gcp.aptosdev.com/v1/graphql",local:"http://127.0.0.1:8090/v1/graphql"},Le={mainnet:"https://fullnode.mainnet.aptoslabs.com/v1",testnet:"https://fullnode.testnet.aptoslabs.com/v1",devnet:"https://fullnode.devnet.aptoslabs.com/v1",local:"http://127.0.0.1:8080/v1"},Ne={"https://fullnode.mainnet.aptoslabs.com/v1":"mainnet","https://fullnode.testnet.aptoslabs.com/v1":"testnet","https://fullnode.devnet.aptoslabs.com/v1":"devnet","http://127.0.0.1:8080/v1":"local"},He=class e{static fromBuffer(t){return e.fromUint8Array(t)}static fromUint8Array(t){return new e(g(t))}static ensure(t){return"string"==typeof t?new e(t):t}constructor(e){e.startsWith("0x")?this.hexString=e:this.hexString=`0x${e}`}hex(){return this.hexString}noPrefix(){return this.hexString.slice(2)}toString(){return this.hex()}toShortString(){return`0x${this.hexString.replace(/^0x0*/,"")}`}toUint8Array(){return Uint8Array.from(w(this.noPrefix()))}},qe={};_e(qe,{AccountAddress:()=>ot,AccountAuthenticator:()=>mt,AccountAuthenticatorEd25519:()=>vt,AccountAuthenticatorMultiEd25519:()=>At,ArgumentABI:()=>xn,AuthenticationKey:()=>Bn,ChainId:()=>dn,ChangeSet:()=>Yt,Ed25519PublicKey:()=>lt,Ed25519Signature:()=>ut,EntryFunction:()=>Wt,EntryFunctionABI:()=>Sn,FeePayerRawTransaction:()=>sn,Identifier:()=>Ut,Module:()=>Qt,ModuleId:()=>Zt,MultiAgentRawTransaction:()=>rn,MultiEd25519PublicKey:()=>ht,MultiEd25519Signature:()=>_t,MultiSig:()=>Jt,MultiSigTransactionPayload:()=>Xt,RawTransaction:()=>jt,RawTransactionWithData:()=>nn,RotationProofChallenge:()=>kn,Script:()=>Vt,ScriptABI:()=>zn,SignedTransaction:()=>tn,StructTag:()=>Nt,Transaction:()=>vn,TransactionArgument:()=>un,TransactionArgumentAddress:()=>wn,TransactionArgumentBool:()=>mn,TransactionArgumentU128:()=>pn,TransactionArgumentU16:()=>fn,TransactionArgumentU256:()=>yn,TransactionArgumentU32:()=>_n,TransactionArgumentU64:()=>gn,TransactionArgumentU8:()=>hn,TransactionArgumentU8Vector:()=>bn,TransactionAuthenticator:()=>gt,TransactionAuthenticatorEd25519:()=>pt,TransactionAuthenticatorFeePayer:()=>bt,TransactionAuthenticatorMultiAgent:()=>wt,TransactionAuthenticatorMultiEd25519:()=>yt,TransactionPayload:()=>an,TransactionPayloadEntryFunction:()=>cn,TransactionPayloadMultisig:()=>ln,TransactionPayloadScript:()=>on,TransactionScriptABI:()=>Tn,TypeArgumentABI:()=>Un,TypeTag:()=>xt,TypeTagAddress:()=>$t,TypeTagBool:()=>zt,TypeTagParser:()=>Gt,TypeTagParserError:()=>Kt,TypeTagSigner:()=>Ct,TypeTagStruct:()=>Lt,TypeTagU128:()=>kt,TypeTagU16:()=>St,TypeTagU256:()=>It,TypeTagU32:()=>Et,TypeTagU64:()=>Bt,TypeTagU8:()=>Tt,TypeTagVector:()=>Ot,UserTransaction:()=>An,WriteSet:()=>en,objectStructTag:()=>Pt,optionStructTag:()=>qt,stringStructTag:()=>Ht});_e({},{Deserializer:()=>Ke,Serializer:()=>Re,bcsSerializeBool:()=>nt,bcsSerializeBytes:()=>st,bcsSerializeFixedBytes:()=>it,bcsSerializeStr:()=>rt,bcsSerializeU128:()=>et,bcsSerializeU16:()=>Ze,bcsSerializeU256:()=>tt,bcsSerializeU32:()=>Ye,bcsSerializeU8:()=>Qe,bcsSerializeUint64:()=>Je,bcsToBytes:()=>Xe,deserializeVector:()=>We,serializeVector:()=>je,serializeVectorWithFunc:()=>Ve});var Pe=2**32-1,De=BigInt(2**64)-BigInt(1),Fe=BigInt(2**128)-BigInt(1),Me=BigInt(2**256)-BigInt(1),Re=class{constructor(){this.buffer=new ArrayBuffer(64),this.offset=0}ensureBufferWillHandleSize(e){for(;this.buffer.byteLength<this.offset+e;){const e=new ArrayBuffer(2*this.buffer.byteLength);new Uint8Array(e).set(new Uint8Array(this.buffer)),this.buffer=e}}serialize(e){this.ensureBufferWillHandleSize(e.length),new Uint8Array(this.buffer,this.offset).set(e),this.offset+=e.length}serializeWithFunction(e,t,n){this.ensureBufferWillHandleSize(t);const r=new DataView(this.buffer,this.offset);e.apply(r,[0,n,!0]),this.offset+=t}serializeStr(e){const t=new TextEncoder;this.serializeBytes(t.encode(e))}serializeBytes(e){this.serializeU32AsUleb128(e.length),this.serialize(e)}serializeFixedBytes(e){this.serialize(e)}serializeBool(e){if("boolean"!=typeof e)throw new Error("Value needs to be a boolean");const t=e?1:0;this.serialize(new Uint8Array([t]))}serializeU8(e){this.serialize(new Uint8Array([e]))}serializeU16(e){this.serializeWithFunction(DataView.prototype.setUint16,2,e)}serializeU32(e){this.serializeWithFunction(DataView.prototype.setUint32,4,e)}serializeU64(e){const t=BigInt(e.toString())&BigInt(Pe),n=BigInt(e.toString())>>BigInt(32);this.serializeU32(Number(t)),this.serializeU32(Number(n))}serializeU128(e){const t=BigInt(e.toString())&De,n=BigInt(e.toString())>>BigInt(64);this.serializeU64(t),this.serializeU64(n)}serializeU256(e){const t=BigInt(e.toString())&Fe,n=BigInt(e.toString())>>BigInt(128);this.serializeU128(t),this.serializeU128(n)}serializeU32AsUleb128(e){let t=e;const n=[];for(;t>>>7;)n.push(127&t|128),t>>>=7;n.push(t),this.serialize(new Uint8Array(n))}getBytes(){return new Uint8Array(this.buffer).slice(0,this.offset)}};function Ge(e,t,n){return(n,r,s)=>{const i=s.value;return s.value=function(n){const r=BigInt(n.toString());if(r>BigInt(t.toString())||r<BigInt(e.toString()))throw new Error("Value is out of range");i.apply(this,[n])},s}}ge([Ge(0,255)],Re.prototype,"serializeU8"),ge([Ge(0,65535)],Re.prototype,"serializeU16"),ge([Ge(0,Pe)],Re.prototype,"serializeU32"),ge([Ge(BigInt(0),De)],Re.prototype,"serializeU64"),ge([Ge(BigInt(0),Fe)],Re.prototype,"serializeU128"),ge([Ge(BigInt(0),Me)],Re.prototype,"serializeU256"),ge([Ge(0,Pe)],Re.prototype,"serializeU32AsUleb128");var Ke=class{constructor(e){this.buffer=new ArrayBuffer(e.length),new Uint8Array(this.buffer).set(e,0),this.offset=0}read(e){if(this.offset+e>this.buffer.byteLength)throw new Error("Reached to the end of buffer");const t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}deserializeStr(){const e=this.deserializeBytes();return(new TextDecoder).decode(e)}deserializeBytes(){const e=this.deserializeUleb128AsU32();return new Uint8Array(this.read(e))}deserializeFixedBytes(e){return new Uint8Array(this.read(e))}deserializeBool(){const e=new Uint8Array(this.read(1))[0];if(1!==e&&0!==e)throw new Error("Invalid boolean value");return 1===e}deserializeU8(){return new DataView(this.read(1)).getUint8(0)}deserializeU16(){return new DataView(this.read(2)).getUint16(0,!0)}deserializeU32(){return new DataView(this.read(4)).getUint32(0,!0)}deserializeU64(){const e=this.deserializeU32(),t=this.deserializeU32();return BigInt(BigInt(t)<<BigInt(32)|BigInt(e))}deserializeU128(){const e=this.deserializeU64(),t=this.deserializeU64();return BigInt(t<<BigInt(64)|e)}deserializeU256(){const e=this.deserializeU128(),t=this.deserializeU128();return BigInt(t<<BigInt(128)|e)}deserializeUleb128AsU32(){let e=BigInt(0),t=0;for(;e<Pe;){const n=this.deserializeU8();if(e|=BigInt(127&n)<<BigInt(t),!(128&n))break;t+=7}if(e>Pe)throw new Error("Overflow while parsing uleb128-encoded uint32 value");return Number(e)}};function je(e,t){t.serializeU32AsUleb128(e.length),e.forEach((e=>{e.serialize(t)}))}function Ve(e,t){const n=new Re;n.serializeU32AsUleb128(e.length);const r=n[t];return e.forEach((e=>{r.call(n,e)})),n.getBytes()}function We(e,t){const n=e.deserializeUleb128AsU32(),r=[];for(let s=0;s<n;s+=1)r.push(t.deserialize(e));return r}function Xe(e){const t=new Re;return e.serialize(t),t.getBytes()}function Je(e){const t=new Re;return t.serializeU64(e),t.getBytes()}function Qe(e){const t=new Re;return t.serializeU8(e),t.getBytes()}function Ze(e){const t=new Re;return t.serializeU16(e),t.getBytes()}function Ye(e){const t=new Re;return t.serializeU32(e),t.getBytes()}function et(e){const t=new Re;return t.serializeU128(e),t.getBytes()}function tt(e){const t=new Re;return t.serializeU256(e),t.getBytes()}function nt(e){const t=new Re;return t.serializeBool(e),t.getBytes()}function rt(e){const t=new Re;return t.serializeStr(e),t.getBytes()}function st(e){const t=new Re;return t.serializeBytes(e),t.getBytes()}function it(e){const t=new Re;return t.serializeFixedBytes(e),t.getBytes()}var at=class e{constructor(t){if(t.length!==e.LENGTH)throw new Error("Expected address of length 32");this.address=t}static fromHex(t){let n=He.ensure(t);n.noPrefix().length%2!==0&&(n=new He(`0${n.noPrefix()}`));const r=n.toUint8Array();if(r.length>e.LENGTH)throw new Error("Hex string is too long. Address's length is 32 bytes.");if(r.length===e.LENGTH)return new e(r);const s=new Uint8Array(e.LENGTH);return s.set(r,e.LENGTH-r.length),new e(s)}static isValid(t){if(""===t)return!1;let n=He.ensure(t);return n.noPrefix().length%2!==0&&(n=new He(`0${n.noPrefix()}`)),n.toUint8Array().length<=e.LENGTH}toHexString(){return He.fromUint8Array(this.address).hex()}serialize(e){e.serializeFixedBytes(this.address)}static deserialize(t){return new e(t.deserializeFixedBytes(e.LENGTH))}static standardizeAddress(e){const t=e.toLowerCase();return`0x${(t.startsWith("0x")?t.slice(2):t).padStart(64,"0")}`}};at.LENGTH=32,at.CORE_CODE_ADDRESS=at.fromHex("0x1");var ot=at,ct=class e{constructor(t){if(t.length!==e.LENGTH)throw new Error(`Ed25519PublicKey length should be ${e.LENGTH}`);this.value=t}toBytes(){return this.value}serialize(e){e.serializeBytes(this.value)}static deserialize(t){const n=t.deserializeBytes();return new e(n)}};ct.LENGTH=32;var lt=ct,dt=class e{constructor(t){if(this.value=t,t.length!==e.LENGTH)throw new Error(`Ed25519Signature length should be ${e.LENGTH}`)}serialize(e){e.serializeBytes(this.value)}static deserialize(t){const n=t.deserializeBytes();return new e(n)}};dt.LENGTH=64;var ut=dt,ht=class e{constructor(e,t){if(this.public_keys=e,this.threshold=t,t>32)throw new Error('"threshold" cannot be larger than 32')}toBytes(){const e=new Uint8Array(this.public_keys.length*lt.LENGTH+1);return this.public_keys.forEach(((t,n)=>{e.set(t.value,n*lt.LENGTH)})),e[this.public_keys.length*lt.LENGTH]=this.threshold,e}serialize(e){e.serializeBytes(this.toBytes())}static deserialize(t){const n=t.deserializeBytes(),r=n[n.length-1],s=[];for(let e=0;e<n.length-1;e+=lt.LENGTH){const t=e;s.push(new lt(n.subarray(t,t+lt.LENGTH)))}return new e(s,r)}},ft=class e{constructor(t,n){if(this.signatures=t,this.bitmap=n,n.length!==e.BITMAP_LEN)throw new Error(`"bitmap" length should be ${e.BITMAP_LEN}`)}toBytes(){const t=new Uint8Array(this.signatures.length*ut.LENGTH+e.BITMAP_LEN);return this.signatures.forEach(((e,n)=>{t.set(e.value,n*ut.LENGTH)})),t.set(this.bitmap,this.signatures.length*ut.LENGTH),t}static createBitmap(e){const t=new Uint8Array([0,0,0,0]),n=new Set;return e.forEach((e=>{if(e>=32)throw new Error(`Invalid bit value ${e}.`);if(n.has(e))throw new Error("Duplicated bits detected.");n.add(e);const r=Math.floor(e/8);let s=t[r];s|=128>>e%8,t[r]=s})),t}serialize(e){e.serializeBytes(this.toBytes())}static deserialize(t){const n=t.deserializeBytes(),r=n.subarray(n.length-4),s=[];for(let e=0;e<n.length-r.length;e+=ut.LENGTH){const t=e;s.push(new ut(n.subarray(t,t+ut.LENGTH)))}return new e(s,r)}};ft.BITMAP_LEN=4;var _t=ft,gt=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return pt.load(e);case 1:return yt.load(e);case 2:return wt.load(e);case 3:return bt.load(e);default:throw new Error(`Unknown variant index for TransactionAuthenticator: ${t}`)}}},pt=class e extends gt{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(0),this.public_key.serialize(e),this.signature.serialize(e)}static load(t){const n=lt.deserialize(t),r=ut.deserialize(t);return new e(n,r)}},yt=class e extends gt{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(1),this.public_key.serialize(e),this.signature.serialize(e)}static load(t){const n=ht.deserialize(t),r=_t.deserialize(t);return new e(n,r)}},wt=class e extends gt{constructor(e,t,n){super(),this.sender=e,this.secondary_signer_addresses=t,this.secondary_signers=n}serialize(e){e.serializeU32AsUleb128(2),this.sender.serialize(e),je(this.secondary_signer_addresses,e),je(this.secondary_signers,e)}static load(t){const n=mt.deserialize(t),r=We(t,ot),s=We(t,mt);return new e(n,r,s)}},bt=class e extends gt{constructor(e,t,n,r){super(),this.sender=e,this.secondary_signer_addresses=t,this.secondary_signers=n,this.fee_payer=r}serialize(e){e.serializeU32AsUleb128(3),this.sender.serialize(e),je(this.secondary_signer_addresses,e),je(this.secondary_signers,e),this.fee_payer.address.serialize(e),this.fee_payer.authenticator.serialize(e)}static load(t){const n=mt.deserialize(t),r=We(t,ot),s=We(t,mt),i=ot.deserialize(t),a=mt.deserialize(t);return new e(n,r,s,{address:i,authenticator:a})}},mt=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return vt.load(e);case 1:return At.load(e);default:throw new Error(`Unknown variant index for AccountAuthenticator: ${t}`)}}},vt=class e extends mt{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(0),this.public_key.serialize(e),this.signature.serialize(e)}static load(t){const n=lt.deserialize(t),r=ut.deserialize(t);return new e(n,r)}},At=class e extends mt{constructor(e,t){super(),this.public_key=e,this.signature=t}serialize(e){e.serializeU32AsUleb128(1),this.public_key.serialize(e),this.signature.serialize(e)}static load(t){const n=ht.deserialize(t),r=_t.deserialize(t);return new e(n,r)}},Ut=class e{constructor(e){this.value=e}serialize(e){e.serializeStr(this.value)}static deserialize(t){const n=t.deserializeStr();return new e(n)}},xt=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return zt.load(e);case 1:return Tt.load(e);case 2:return Bt.load(e);case 3:return kt.load(e);case 4:return $t.load(e);case 5:return Ct.load(e);case 6:return Ot.load(e);case 7:return Lt.load(e);case 8:return St.load(e);case 9:return Et.load(e);case 10:return It.load(e);default:throw new Error(`Unknown variant index for TypeTag: ${t}`)}}},zt=class e extends xt{serialize(e){e.serializeU32AsUleb128(0)}static load(t){return new e}},Tt=class e extends xt{serialize(e){e.serializeU32AsUleb128(1)}static load(t){return new e}},St=class e extends xt{serialize(e){e.serializeU32AsUleb128(8)}static load(t){return new e}},Et=class e extends xt{serialize(e){e.serializeU32AsUleb128(9)}static load(t){return new e}},Bt=class e extends xt{serialize(e){e.serializeU32AsUleb128(2)}static load(t){return new e}},kt=class e extends xt{serialize(e){e.serializeU32AsUleb128(3)}static load(t){return new e}},It=class e extends xt{serialize(e){e.serializeU32AsUleb128(10)}static load(t){return new e}},$t=class e extends xt{serialize(e){e.serializeU32AsUleb128(4)}static load(t){return new e}},Ct=class e extends xt{serialize(e){e.serializeU32AsUleb128(5)}static load(t){return new e}},Ot=class e extends xt{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(6),this.value.serialize(e)}static load(t){const n=xt.deserialize(t);return new e(n)}},Lt=class e extends xt{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(7),this.value.serialize(e)}static load(t){const n=Nt.deserialize(t);return new e(n)}isStringTypeTag(){return"string"===this.value.module_name.value&&"String"===this.value.name.value&&this.value.address.toHexString()===ot.CORE_CODE_ADDRESS.toHexString()}},Nt=class e{constructor(e,t,n,r){this.address=e,this.module_name=t,this.name=n,this.type_args=r}static fromString(t){const n=new Gt(t).parseTypeTag();return new e(n.value.address,n.value.module_name,n.value.name,n.value.type_args)}serialize(e){this.address.serialize(e),this.module_name.serialize(e),this.name.serialize(e),je(this.type_args,e)}static deserialize(t){const n=ot.deserialize(t),r=Ut.deserialize(t),s=Ut.deserialize(t),i=We(t,xt);return new e(n,r,s,i)}},Ht=new Nt(ot.fromHex("0x1"),new Ut("string"),new Ut("String"),[]);function qt(e){return new Nt(ot.fromHex("0x1"),new Ut("option"),new Ut("Option"),[e])}function Pt(e){return new Nt(ot.fromHex("0x1"),new Ut("object"),new Ut("Object"),[e])}function Dt(e){throw new Kt(e)}function Ft(e){return!!e.match(/\s/)}function Mt(e){return!!e.match(/[_A-Za-z0-9]/g)}function Rt(e,t){const n=e[t];if(":"===n){if("::"===e.slice(t,t+2))return[["COLON","::"],2];Dt("Unrecognized token.")}else{if("<"===n)return[["LT","<"],1];if(">"===n)return[["GT",">"],1];if(","===n)return[["COMMA",","],1];if(Ft(n)){let n="";for(let r=t;r<e.length;r+=1){const t=e[r];if(!Ft(t))break;n=`${n}${t}`}return[["SPACE",n],n.length]}if(Mt(n)){let n="";for(let r=t;r<e.length;r+=1){const t=e[r];if(!Mt(t))break;n=`${n}${t}`}return function(e){return!!e.match(/T\d+/g)}(n)?[["GENERIC",n],n.length]:[["IDENT",n],n.length]}}throw new Error("Unrecognized token.")}var Gt=class e{constructor(e,t){this.typeTags=[],this.tokens=function(e){let t=0;const n=[];for(;t<e.length;){const[r,s]=Rt(e,t);"SPACE"!==r[0]&&n.push(r),t+=s}return n}(e),this.typeTags=t||[]}consume(e){const t=this.tokens.shift();(!t||t[1]!==e)&&Dt("Invalid type tag.")}consumeWholeGeneric(){for(this.consume("<");">"!==this.tokens[0][1];)"<"===this.tokens[0][1]?this.consumeWholeGeneric():this.tokens.shift();this.consume(">")}parseCommaList(e,t){const n=[];for(this.tokens.length<=0&&Dt("Invalid type tag.");this.tokens[0][1]!==e&&(n.push(this.parseTypeTag()),!(this.tokens.length>0&&this.tokens[0][1]===e||(this.consume(","),this.tokens.length>0&&this.tokens[0][1]===e&&t)));)this.tokens.length<=0&&Dt("Invalid type tag.");return n}parseTypeTag(){0===this.tokens.length&&Dt("Invalid type tag.");const[t,n]=this.tokens.shift();if("u8"===n)return new Tt;if("u16"===n)return new St;if("u32"===n)return new Et;if("u64"===n)return new Bt;if("u128"===n)return new kt;if("u256"===n)return new It;if("bool"===n)return new zt;if("address"===n)return new $t;if("vector"===n){this.consume("<");const e=this.parseTypeTag();return this.consume(">"),new Ot(e)}if("string"===n)return new Lt(Ht);if("IDENT"===t&&(n.startsWith("0x")||n.startsWith("0X"))){const e=ot.fromHex(n);this.consume("::");const[t,r]=this.tokens.shift();"IDENT"!==t&&Dt("Invalid type tag."),this.consume("::");const[s,i]=this.tokens.shift();if("IDENT"!==s&&Dt("Invalid type tag."),ot.CORE_CODE_ADDRESS.toHexString()===e.toHexString()&&"object"===r&&"Object"===i)return this.consumeWholeGeneric(),new $t;let a=[];this.tokens.length>0&&"<"===this.tokens[0][1]&&(this.consume("<"),a=this.parseCommaList(">",!0),this.consume(">"));const o=new Nt(e,new Ut(r),new Ut(i),a);return new Lt(o)}if("GENERIC"===t){0===this.typeTags.length&&Dt("Can't convert generic type since no typeTags were specified.");const t=parseInt(n.substring(1),10);return new e(this.typeTags[t]).parseTypeTag()}throw new Error("Invalid type tag.")}},Kt=class extends Error{constructor(e){super(e),this.name="TypeTagParserError"}},jt=class e{constructor(e,t,n,r,s,i,a){this.sender=e,this.sequence_number=t,this.payload=n,this.max_gas_amount=r,this.gas_unit_price=s,this.expiration_timestamp_secs=i,this.chain_id=a}serialize(e){this.sender.serialize(e),e.serializeU64(this.sequence_number),this.payload.serialize(e),e.serializeU64(this.max_gas_amount),e.serializeU64(this.gas_unit_price),e.serializeU64(this.expiration_timestamp_secs),this.chain_id.serialize(e)}static deserialize(t){const n=ot.deserialize(t),r=t.deserializeU64(),s=an.deserialize(t),i=t.deserializeU64(),a=t.deserializeU64(),o=t.deserializeU64(),c=dn.deserialize(t);return new e(n,r,s,i,a,o,c)}},Vt=class e{constructor(e,t,n){this.code=e,this.ty_args=t,this.args=n}serialize(e){e.serializeBytes(this.code),je(this.ty_args,e),je(this.args,e)}static deserialize(t){const n=t.deserializeBytes(),r=We(t,xt),s=We(t,un);return new e(n,r,s)}},Wt=class e{constructor(e,t,n,r){this.module_name=e,this.function_name=t,this.ty_args=n,this.args=r}static natural(t,n,r,s){return new e(Zt.fromStr(t),new Ut(n),r,s)}static natual(t,n,r,s){return e.natural(t,n,r,s)}serialize(e){this.module_name.serialize(e),this.function_name.serialize(e),je(this.ty_args,e),e.serializeU32AsUleb128(this.args.length),this.args.forEach((t=>{e.serializeBytes(t)}))}static deserialize(t){const n=Zt.deserialize(t),r=Ut.deserialize(t),s=We(t,xt),i=t.deserializeUleb128AsU32(),a=[];for(let e=0;e<i;e+=1)a.push(t.deserializeBytes());return new e(n,r,s,a)}},Xt=class e{constructor(e){this.transaction_payload=e}serialize(e){e.serializeU32AsUleb128(0),this.transaction_payload.serialize(e)}static deserialize(t){return t.deserializeUleb128AsU32(),new e(Wt.deserialize(t))}},Jt=class e{constructor(e,t){this.multisig_address=e,this.transaction_payload=t}serialize(e){this.multisig_address.serialize(e),void 0===this.transaction_payload?e.serializeBool(!1):(e.serializeBool(!0),this.transaction_payload.serialize(e))}static deserialize(t){const n=ot.deserialize(t);let r;return t.deserializeBool()&&(r=Xt.deserialize(t)),new e(n,r)}},Qt=class e{constructor(e){this.code=e}serialize(e){e.serializeBytes(this.code)}static deserialize(t){const n=t.deserializeBytes();return new e(n)}},Zt=class e{constructor(e,t){this.address=e,this.name=t}static fromStr(t){const n=t.split("::");if(2!==n.length)throw new Error("Invalid module id.");return new e(ot.fromHex(new He(n[0])),new Ut(n[1]))}serialize(e){this.address.serialize(e),this.name.serialize(e)}static deserialize(t){const n=ot.deserialize(t),r=Ut.deserialize(t);return new e(n,r)}},Yt=class{serialize(e){throw new Error("Not implemented.")}static deserialize(e){throw new Error("Not implemented.")}},en=class{serialize(e){throw new Error("Not implmented.")}static deserialize(e){throw new Error("Not implmented.")}},tn=class e{constructor(e,t){this.raw_txn=e,this.authenticator=t}serialize(e){this.raw_txn.serialize(e),this.authenticator.serialize(e)}static deserialize(t){const n=jt.deserialize(t),r=gt.deserialize(t);return new e(n,r)}},nn=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return rn.load(e);case 1:return sn.load(e);default:throw new Error(`Unknown variant index for RawTransactionWithData: ${t}`)}}},rn=class e extends nn{constructor(e,t){super(),this.raw_txn=e,this.secondary_signer_addresses=t}serialize(e){e.serializeU32AsUleb128(0),this.raw_txn.serialize(e),je(this.secondary_signer_addresses,e)}static load(t){const n=jt.deserialize(t),r=We(t,ot);return new e(n,r)}},sn=class e extends nn{constructor(e,t,n){super(),this.raw_txn=e,this.secondary_signer_addresses=t,this.fee_payer_address=n}serialize(e){e.serializeU32AsUleb128(1),this.raw_txn.serialize(e),je(this.secondary_signer_addresses,e),this.fee_payer_address.serialize(e)}static load(t){const n=jt.deserialize(t),r=We(t,ot),s=ot.deserialize(t);return new e(n,r,s)}},an=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return on.load(e);case 2:return cn.load(e);case 3:return ln.load(e);default:throw new Error(`Unknown variant index for TransactionPayload: ${t}`)}}},on=class e extends an{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(0),this.value.serialize(e)}static load(t){const n=Vt.deserialize(t);return new e(n)}},cn=class e extends an{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(2),this.value.serialize(e)}static load(t){const n=Wt.deserialize(t);return new e(n)}},ln=class e extends an{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(3),this.value.serialize(e)}static load(t){const n=Jt.deserialize(t);return new e(n)}},dn=class e{constructor(e){this.value=e}serialize(e){e.serializeU8(this.value)}static deserialize(t){const n=t.deserializeU8();return new e(n)}},un=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return hn.load(e);case 1:return gn.load(e);case 2:return pn.load(e);case 3:return wn.load(e);case 4:return bn.load(e);case 5:return mn.load(e);case 6:return fn.load(e);case 7:return _n.load(e);case 8:return yn.load(e);default:throw new Error(`Unknown variant index for TransactionArgument: ${t}`)}}},hn=class e extends un{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(0),e.serializeU8(this.value)}static load(t){const n=t.deserializeU8();return new e(n)}},fn=class e extends un{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(6),e.serializeU16(this.value)}static load(t){const n=t.deserializeU16();return new e(n)}},_n=class e extends un{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(7),e.serializeU32(this.value)}static load(t){const n=t.deserializeU32();return new e(n)}},gn=class e extends un{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(1),e.serializeU64(this.value)}static load(t){const n=t.deserializeU64();return new e(n)}},pn=class e extends un{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(2),e.serializeU128(this.value)}static load(t){const n=t.deserializeU128();return new e(n)}},yn=class e extends un{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(8),e.serializeU256(this.value)}static load(t){const n=t.deserializeU256();return new e(n)}},wn=class e extends un{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(3),this.value.serialize(e)}static load(t){const n=ot.deserialize(t);return new e(n)}},bn=class e extends un{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(4),e.serializeBytes(this.value)}static load(t){const n=t.deserializeBytes();return new e(n)}},mn=class e extends un{constructor(e){super(),this.value=e}serialize(e){e.serializeU32AsUleb128(5),e.serializeBool(this.value)}static load(t){const n=t.deserializeBool();return new e(n)}},vn=class{getHashSalt(){const e=ue.create();return e.update("APTOS::Transaction"),e.digest()}static deserialize(e){const t=e.deserializeUleb128AsU32();if(0===t)return An.load(e);throw new Error(`Unknown variant index for Transaction: ${t}`)}},An=class e extends vn{constructor(e){super(),this.value=e}hash(){const e=ue.create();return e.update(this.getHashSalt()),e.update(Xe(this)),e.digest()}serialize(e){e.serializeU32AsUleb128(0),this.value.serialize(e)}static load(t){return new e(tn.deserialize(t))}},Un=class e{constructor(e){this.name=e}serialize(e){e.serializeStr(this.name)}static deserialize(t){const n=t.deserializeStr();return new e(n)}},xn=class e{constructor(e,t){this.name=e,this.type_tag=t}serialize(e){e.serializeStr(this.name),this.type_tag.serialize(e)}static deserialize(t){const n=t.deserializeStr(),r=xt.deserialize(t);return new e(n,r)}},zn=class{static deserialize(e){const t=e.deserializeUleb128AsU32();switch(t){case 0:return Tn.load(e);case 1:return Sn.load(e);default:throw new Error(`Unknown variant index for TransactionPayload: ${t}`)}}},Tn=class e extends zn{constructor(e,t,n,r,s){super(),this.name=e,this.doc=t,this.code=n,this.ty_args=r,this.args=s}serialize(e){e.serializeU32AsUleb128(0),e.serializeStr(this.name),e.serializeStr(this.doc),e.serializeBytes(this.code),je(this.ty_args,e),je(this.args,e)}static load(t){const n=t.deserializeStr(),r=t.deserializeStr(),s=t.deserializeBytes(),i=We(t,Un),a=We(t,xn);return new e(n,r,s,i,a)}},Sn=class e extends zn{constructor(e,t,n,r,s){super(),this.name=e,this.module_name=t,this.doc=n,this.ty_args=r,this.args=s}serialize(e){e.serializeU32AsUleb128(1),e.serializeStr(this.name),this.module_name.serialize(e),e.serializeStr(this.doc),je(this.ty_args,e),je(this.args,e)}static load(t){const n=t.deserializeStr(),r=Zt.deserialize(t),s=t.deserializeStr(),i=We(t,Un),a=We(t,xn);return new e(n,r,s,i,a)}},En=class e{constructor(t){if(t.length!==e.LENGTH)throw new Error("Expected a byte array of length 32");this.bytes=t}static fromMultiEd25519PublicKey(t){const n=t.toBytes(),r=new Uint8Array(n.length+1);r.set(n),r.set([e.MULTI_ED25519_SCHEME],n.length);const s=ue.create();return s.update(r),new e(s.digest())}static fromEd25519PublicKey(t){const n=t.value,r=new Uint8Array(n.length+1);r.set(n),r.set([e.ED25519_SCHEME],n.length);const s=ue.create();return s.update(r),new e(s.digest())}derivedAddress(){return He.fromUint8Array(this.bytes)}};En.LENGTH=32,En.MULTI_ED25519_SCHEME=1,En.ED25519_SCHEME=0,En.DERIVE_RESOURCE_ACCOUNT_SCHEME=255;var Bn=En,kn=class{constructor(e,t,n,r,s,i,a){this.accountAddress=e,this.moduleName=t,this.structName=n,this.sequenceNumber=r,this.originator=s,this.currentAuthKey=i,this.newPublicKey=a}serialize(e){this.accountAddress.serialize(e),e.serializeStr(this.moduleName),e.serializeStr(this.structName),e.serializeU64(this.sequenceNumber),this.originator.serialize(e),this.currentAuthKey.serialize(e),e.serializeBytes(this.newPublicKey)}},In=class e{static fromAptosAccountObject(t){return new e(He.ensure(t.privateKeyHex).toUint8Array(),t.address)}static isValidPath(e){return/^m\/44'\/637'\/[0-9]+'\/[0-9]+'\/[0-9]+'+$/.test(e)}static fromDerivePath(t,n){if(!e.isValidPath(t))throw new Error("Invalid derivation path");const r=n.trim().split(/\s+/).map((e=>e.toLowerCase())).join(" "),{key:s}=we(t,g(J(r)));return new e(s)}constructor(e,t){this.signingKey=e?r.n.sign.keyPair.fromSeed(e.slice(0,32)):r.n.sign.keyPair(),this.accountAddress=He.ensure(t||this.authKey().hex())}address(){return this.accountAddress}authKey(){const e=new lt(this.signingKey.publicKey);return Bn.fromEd25519PublicKey(e).derivedAddress()}static getResourceAccountAddress(e,t){const n=Xe(ot.fromHex(e)),r=new Uint8Array([...n,...t,Bn.DERIVE_RESOURCE_ACCOUNT_SCHEME]),s=ue.create();return s.update(r),He.fromUint8Array(s.digest())}static getCollectionID(e,t){const n=(new TextEncoder).encode(`${e}::${t}`),r=C.create();return r.update(n),He.fromUint8Array(r.digest())}pubKey(){return He.fromUint8Array(this.signingKey.publicKey)}signBuffer(e){const t=r.n.sign.detached(e,this.signingKey.secretKey);return He.fromUint8Array(t)}signHexString(e){const t=He.ensure(e).toUint8Array();return this.signBuffer(t)}verifySignature(e,t){const n=He.ensure(e).toUint8Array(),s=He.ensure(t).toUint8Array();return r.n.sign.detached.verify(n,s,this.signingKey.publicKey)}toPrivateKeyObject(){return{address:this.address().hex(),publicKeyHex:this.pubKey().hex(),privateKeyHex:He.fromUint8Array(this.signingKey.secretKey.slice(0,32)).hex()}}};ge([Ue()],In.prototype,"authKey");var $n=In;function Cn(e){return e instanceof $n?e.address():He.ensure(e)}var On="\n    fragment CurrentTokenOwnershipFields on current_token_ownerships_v2 {\n  token_standard\n  token_properties_mutated_v1\n  token_data_id\n  table_type_v1\n  storage_id\n  property_version_v1\n  owner_address\n  last_transaction_version\n  last_transaction_timestamp\n  is_soulbound_v2\n  is_fungible_v2\n  amount\n  current_token_data {\n    collection_id\n    description\n    is_fungible_v2\n    largest_property_version_v1\n    last_transaction_timestamp\n    last_transaction_version\n    maximum\n    supply\n    token_data_id\n    token_name\n    token_properties\n    token_standard\n    token_uri\n    current_collection {\n      collection_id\n      collection_name\n      creator_address\n      current_supply\n      description\n      last_transaction_timestamp\n      last_transaction_version\n      max_supply\n      mutable_description\n      mutable_uri\n      table_handle_v1\n      token_standard\n      total_minted_v2\n      uri\n    }\n  }\n}\n    ",Ln="\n    fragment TokenActivitiesFields on token_activities_v2 {\n  after_value\n  before_value\n  entry_function_id_str\n  event_account_address\n  event_index\n  from_address\n  is_fungible_v2\n  property_version_v1\n  to_address\n  token_amount\n  token_data_id\n  token_standard\n  transaction_timestamp\n  transaction_version\n  type\n}\n    ",Nn=`\n    query getAccountTransactionsData($where_condition: account_transactions_bool_exp!, $offset: Int, $limit: Int, $order_by: [account_transactions_order_by!]) {\n  account_transactions(\n    where: $where_condition\n    order_by: $order_by\n    limit: $limit\n    offset: $offset\n  ) {\n    token_activities_v2 {\n      ...TokenActivitiesFields\n    }\n    transaction_version\n    account_address\n  }\n}\n    ${Ln}`,Hn=`\n    query getOwnedTokens($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {\n  current_token_ownerships_v2(\n    where: $where_condition\n    offset: $offset\n    limit: $limit\n    order_by: $order_by\n  ) {\n    ...CurrentTokenOwnershipFields\n  }\n}\n    ${On}`,qn=`\n    query getOwnedTokensByTokenData($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {\n  current_token_ownerships_v2(\n    where: $where_condition\n    offset: $offset\n    limit: $limit\n    order_by: $order_by\n  ) {\n    ...CurrentTokenOwnershipFields\n  }\n}\n    ${On}`,Pn=`\n    query getTokenActivities($where_condition: token_activities_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [token_activities_v2_order_by!]) {\n  token_activities_v2(\n    where: $where_condition\n    order_by: $order_by\n    offset: $offset\n    limit: $limit\n  ) {\n    ...TokenActivitiesFields\n  }\n}\n    ${Ln}`,Dn=`\n    query getTokenCurrentOwnerData($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {\n  current_token_ownerships_v2(\n    where: $where_condition\n    offset: $offset\n    limit: $limit\n    order_by: $order_by\n  ) {\n    ...CurrentTokenOwnershipFields\n  }\n}\n    ${On}`,Fn=`\n    query getTokenOwnedFromCollection($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {\n  current_token_ownerships_v2(\n    where: $where_condition\n    offset: $offset\n    limit: $limit\n    order_by: $order_by\n  ) {\n    ...CurrentTokenOwnershipFields\n  }\n}\n    ${On}`,Mn=`\n    query getTokenOwnersData($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {\n  current_token_ownerships_v2(\n    where: $where_condition\n    offset: $offset\n    limit: $limit\n    order_by: $order_by\n  ) {\n    ...CurrentTokenOwnershipFields\n  }\n}\n    ${On}`;function Rn(e,t,n){if(null==t||!t.includes(typeof e))throw new Error(`Invalid arg: ${e} type should be ${t instanceof Array?t.join(" or "):t}`)}function Gn(e){if(Rn(e,["boolean","string"]),"boolean"==typeof e)return e;if("true"===e)return!0;if("false"===e)return!1;throw new Error("Invalid boolean string.")}function Kn(e){if(Rn(e,["number","string"]),"number"==typeof e)return e;const t=Number.parseInt(e,10);if(Number.isNaN(t))throw new Error("Invalid number string.");return t}function jn(e){return Rn(e,["number","bigint","string"]),BigInt(e)}function Vn(e,t,n,r){if(t instanceof zt)n.serializeBool(Gn(e));else if(t instanceof Tt)n.serializeU8(Kn(e));else if(t instanceof St)n.serializeU16(Kn(e));else if(t instanceof Et)n.serializeU32(Kn(e));else if(t instanceof Bt)n.serializeU64(jn(e));else if(t instanceof kt)n.serializeU128(jn(e));else if(t instanceof It)n.serializeU256(jn(e));else if(t instanceof $t)Wn(e,n);else if(t instanceof Ot)!function(e,t,n,r){if(t.value instanceof Tt){if(e instanceof Uint8Array)return void n.serializeBytes(e);if(e instanceof He)return void n.serializeBytes(e.toUint8Array());if("string"==typeof e)return void n.serializeStr(e)}if(!Array.isArray(e))throw new Error("Invalid vector args.");n.serializeU32AsUleb128(e.length),e.forEach((e=>Vn(e,t.value,n)))}(e,t,n);else{if(!(t instanceof Lt))throw new Error("Unsupported arg type.");!function(e,t,n,r){const{address:s,module_name:i,name:a,type_args:o}=t.value,c=`${He.fromUint8Array(s.address).toShortString()}::${i.value}::${a.value}`;if("0x1::string::String"===c)Rn(e,["string"]),n.serializeStr(e);else if("0x1::object::Object"===c)Wn(e,n);else{if("0x1::option::Option"!==c)throw new Error("Unsupported struct type in function argument");if(1!==o.length)throw new Error(`Option has the wrong number of type arguments ${o.length}`);!function(e,t,n,r){null==e?n.serializeU32AsUleb128(0):(n.serializeU32AsUleb128(1),Vn(e,t,n))}(e,o[0],n)}}(e,t,n)}}function Wn(e,t){let n;if("string"==typeof e||e instanceof He)n=ot.fromHex(e);else{if(!(e instanceof ot))throw new Error("Invalid account address.");n=e}n.serialize(t)}var Xn="APTOS::RawTransactionWithData",Jn=class{constructor(e,t){this.rawTxnBuilder=t,this.signingFunction=e}build(e,t,n){if(!this.rawTxnBuilder)throw new Error("this.rawTxnBuilder doesn't exist.");return this.rawTxnBuilder.build(e,t,n)}static getSigningMessage(e){const t=ue.create();if(e instanceof jt)t.update("APTOS::RawTransaction");else if(e instanceof rn)t.update(Xn);else{if(!(e instanceof sn))throw new Error("Unknown transaction type.");t.update(Xn)}const n=t.digest(),r=Xe(e),s=new Uint8Array(n.length+r.length);return s.set(n),s.set(r,n.length),s}},Qn=class extends Jn{constructor(e,t,n){super(e,n),this.publicKey=t}rawToSigned(e){const t=Jn.getSigningMessage(e),n=this.signingFunction(t),r=new pt(new lt(this.publicKey),n);return new tn(e,r)}sign(e){return Xe(this.rawToSigned(e))}},Zn=class extends Jn{constructor(e,t){super(e),this.publicKey=t}rawToSigned(e){const t=Jn.getSigningMessage(e),n=this.signingFunction(t),r=new yt(this.publicKey,n);return new tn(e,r)}sign(e){return Xe(this.rawToSigned(e))}},Yn=class{constructor(e,t){this.aptosClient=e,this.builderConfig=t}async fetchABI(e){const t=(await this.aptosClient.getAccountModules(e)).map((e=>e.abi)).flatMap((e=>e.exposed_functions.filter((e=>e.is_entry)).map((t=>({fullName:`${e.address}::${e.name}::${t.name}`,...t}))))),n=new Map;return t.forEach((e=>{n.set(e.fullName,e)})),n}async build(e,t,n){if(3!==(e=e.replace(/^0[xX]0*/g,"0x")).split("::").length)throw new Error("'func' needs to be a fully qualified function name in format <address>::<module>::<function>, e.g. 0x1::coin::transfer");const[r,s]=e.split("::"),i=await this.fetchABI(r);if(!i.has(e))throw new Error(`${e} doesn't exist.`);const a=i.get(e),o=a.params.filter((e=>"signer"!==e&&"&signer"!==e)).map(((e,n)=>new xn(`var${n}`,new Gt(e,t).parseTypeTag()))),c=new Sn(a.name,Zt.fromStr(`${r}::${s}`),"",a.generic_type_params.map(((e,t)=>new Un(`${t}`))),o),{sender:l,...d}=this.builderConfig,u=l instanceof ot?He.fromUint8Array(l.address):l,[{sequence_number:h},f,{gas_estimate:_}]=await Promise.all([null!=d&&d.sequenceNumber?Promise.resolve({sequence_number:null==d?void 0:d.sequenceNumber}):this.aptosClient.getAccount(u),null!=d&&d.chainId?Promise.resolve(null==d?void 0:d.chainId):this.aptosClient.getChainId(),null!=d&&d.gasUnitPrice?Promise.resolve({gas_estimate:null==d?void 0:d.gasUnitPrice}):this.aptosClient.estimateGasPrice()]);return new class e{constructor(e,t){this.abiMap=new Map,e.forEach((e=>{const t=new Ke(e),n=zn.deserialize(t);let r;if(n instanceof Sn){const e=n,{address:t,name:s}=e.module_name;r=`${He.fromUint8Array(t.address).toShortString()}::${s.value}::${e.name}`}else r=n.name;if(this.abiMap.has(r))throw new Error("Found conflicting ABI interfaces");this.abiMap.set(r,n)})),this.builderConfig={maxGasAmount:BigInt(ve),expSecFromNow:20,...t}}static toBCSArgs(e,t){if(e.length!==t.length)throw new Error("Wrong number of args provided.");return t.map(((t,n)=>{const r=new Re;return function(e,t,n){Vn(e,t,n)}(t,e[n].type_tag,r),r.getBytes()}))}static toTransactionArguments(e,t){if(e.length!==t.length)throw new Error("Wrong number of args provided.");return t.map(((t,n)=>function(e,t){if(t instanceof zt)return new mn(Gn(e));if(t instanceof Tt)return new hn(Kn(e));if(t instanceof St)return new fn(Kn(e));if(t instanceof Et)return new _n(Kn(e));if(t instanceof Bt)return new gn(jn(e));if(t instanceof kt)return new pn(jn(e));if(t instanceof It)return new yn(jn(e));if(t instanceof $t){let t;if("string"==typeof e||e instanceof He)t=ot.fromHex(e);else{if(!(e instanceof ot))throw new Error("Invalid account address.");t=e}return new wn(t)}if(t instanceof Ot&&t.value instanceof Tt){if(!(e instanceof Uint8Array))throw new Error(`${e} should be an instance of Uint8Array`);return new bn(e)}throw new Error("Unknown type for TransactionArgument.")}(t,e[n].type_tag)))}setSequenceNumber(e){this.builderConfig.sequenceNumber=BigInt(e)}buildTransactionPayload(t,n,r){const s=n.map((e=>new Gt(e).parseTypeTag()));let i;if(!this.abiMap.has(t))throw new Error(`Cannot find function: ${t}`);const a=this.abiMap.get(t);if(a instanceof Sn){const t=a,n=e.toBCSArgs(t.args,r);i=new cn(new Wt(t.module_name,new Ut(t.name),s,n))}else{if(!(a instanceof Tn))throw new Error("Unknown ABI format.");{const t=a,n=e.toTransactionArguments(t.args,r);i=new on(new Vt(t.code,s,n))}}return i}build(e,t,n){const{sender:r,sequenceNumber:s,gasUnitPrice:i,maxGasAmount:a,expSecFromNow:o,chainId:c}=this.builderConfig;if(!i)throw new Error("No gasUnitPrice provided.");const l=r instanceof ot?r:ot.fromHex(r),d=BigInt(Math.floor(Date.now()/1e3)+Number(o)),u=this.buildTransactionPayload(e,t,n);if(u)return new jt(l,BigInt(s),u,BigInt(a),BigInt(i),d,new dn(Number(c)));throw new Error("Invalid ABI.")}}([Xe(c)],{sender:l,sequenceNumber:h,chainId:f,gasUnitPrice:BigInt(_),...d}).build(e,t,n)}};ge([xe(6e5)],Yn.prototype,"fetchABI");var er=class e{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)throw new Error("Node URL cannot be empty.");this.nodeUrl=n?e:function(e){let t=`${e}`;return t.endsWith("/")&&(t=t.substring(0,t.length-1)),t.endsWith("/v1")||(t=`${t}/v1`),t}(e),this.config=null==t?{}:{...t}}async getAccount(e){const{data:t}=await Ie({url:this.nodeUrl,endpoint:`accounts/${He.ensure(e).hex()}`,originMethod:"getAccount",overrides:{...this.config}});return t}async getAccountTransactions(e,t){const{data:n}=await Ie({url:this.nodeUrl,endpoint:`accounts/${He.ensure(e).hex()}/transactions`,originMethod:"getAccountTransactions",params:{start:null==t?void 0:t.start,limit:null==t?void 0:t.limit},overrides:{...this.config}});return n}async getAccountModules(e,t){return await Ce({url:this.nodeUrl,endpoint:`accounts/${e}/modules`,params:{ledger_version:null==t?void 0:t.ledgerVersion,limit:1e3},originMethod:"getAccountModules",overrides:{...this.config}})}async getAccountModule(e,t,n){const{data:r}=await Ie({url:this.nodeUrl,endpoint:`accounts/${He.ensure(e).hex()}/module/${t}`,originMethod:"getAccountModule",params:{ledger_version:null==n?void 0:n.ledgerVersion},overrides:{...this.config}});return r}async getAccountResources(e,t){return await Ce({url:this.nodeUrl,endpoint:`accounts/${e}/resources`,params:{ledger_version:null==t?void 0:t.ledgerVersion,limit:9999},originMethod:"getAccountResources",overrides:{...this.config}})}async getAccountResource(e,t,n){const{data:r}=await Ie({url:this.nodeUrl,endpoint:`accounts/${He.ensure(e).hex()}/resource/${t}`,originMethod:"getAccountResource",params:{ledger_version:null==n?void 0:n.ledgerVersion},overrides:{...this.config}});return r}static generateBCSTransaction(e,t){return new Qn((t=>{const n=e.signBuffer(t);return new qe.Ed25519Signature(n.toUint8Array())}),e.pubKey().toUint8Array()).sign(t)}static generateBCSSimulation(e,t){return new Qn((e=>{const t=new Uint8Array(64);return new qe.Ed25519Signature(t)}),e.pubKey().toUint8Array()).sign(t)}async generateTransaction(e,t,n){const r={sender:e};if(null!=n&&n.sequence_number&&(r.sequenceNumber=n.sequence_number),null!=n&&n.gas_unit_price&&(r.gasUnitPrice=n.gas_unit_price),null!=n&&n.max_gas_amount&&(r.maxGasAmount=n.max_gas_amount),null!=n&&n.expiration_timestamp_secs){const e=Number.parseInt(n.expiration_timestamp_secs,10);r.expSecFromNow=e-Math.floor(Date.now()/1e3)}return new Yn(this,r).build(t.function,t.type_arguments,t.arguments)}async generateFeePayerTransaction(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4?arguments[4]:void 0;const i=await this.generateTransaction(e,t,s),a=r.map((e=>ot.fromHex(e)));return new qe.FeePayerRawTransaction(i,a,ot.fromHex(n))}async submitFeePayerTransaction(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const s=new qe.TransactionAuthenticatorFeePayer(t,e.secondary_signer_addresses,r,{address:e.fee_payer_address,authenticator:n}),i=Xe(new qe.SignedTransaction(e.raw_txn,s));return await this.submitSignedBCSTransaction(i)}async signMultiTransaction(e,t){const n=new qe.Ed25519Signature(e.signBuffer(Jn.getSigningMessage(t)).toUint8Array()),r=new qe.AccountAuthenticatorEd25519(new qe.Ed25519PublicKey(e.signingKey.publicKey),n);return Promise.resolve(r)}async signTransaction(t,n){return Promise.resolve(e.generateBCSTransaction(t,n))}async getEventsByCreationNumber(e,t,n){const{data:r}=await Ie({url:this.nodeUrl,endpoint:`accounts/${He.ensure(e).hex()}/events/${t}`,originMethod:"getEventsByCreationNumber",params:{start:null==n?void 0:n.start,limit:null==n?void 0:n.limit},overrides:{...this.config}});return r}async getEventsByEventHandle(e,t,n,r){const{data:s}=await Ie({url:this.nodeUrl,endpoint:`accounts/${He.ensure(e).hex()}/events/${t}/${n}`,originMethod:"getEventsByEventHandle",params:{start:null==r?void 0:r.start,limit:null==r?void 0:r.limit},overrides:{...this.config}});return s}async submitTransaction(e){return this.submitSignedBCSTransaction(e)}async simulateTransaction(t,n,r){let s;return s=t instanceof $n?e.generateBCSSimulation(t,n):t instanceof ht?new Zn((()=>{const{threshold:e}=t,n=[],r=[];for(let t=0;t<e;t+=1)n.push(t),r.push(new qe.Ed25519Signature(new Uint8Array(64)));const s=qe.MultiEd25519Signature.createBitmap(n);return new qe.MultiEd25519Signature(r,s)}),t).sign(n):new Qn((()=>{const e=new Uint8Array(64);return new qe.Ed25519Signature(e)}),t.toBytes()).sign(n),this.submitBCSSimulation(s,r)}async submitSignedBCSTransaction(e){const{data:t}=await $e({url:this.nodeUrl,body:e,endpoint:"transactions",originMethod:"submitSignedBCSTransaction",contentType:"application/x.aptos.signed_transaction+bcs",overrides:{...this.config}});return t}async submitBCSSimulation(e,t){var n,r,s;const i={estimate_gas_unit_price:null!=(n=null==t?void 0:t.estimateGasUnitPrice)&&n,estimate_max_gas_amount:null!=(r=null==t?void 0:t.estimateMaxGasAmount)&&r,estimate_prioritized_gas_unit_price:null!=(s=null==t?void 0:t.estimatePrioritizedGasUnitPrice)&&s},{data:a}=await $e({url:this.nodeUrl,body:e,endpoint:"transactions/simulate",params:i,originMethod:"submitBCSSimulation",contentType:"application/x.aptos.signed_transaction+bcs",overrides:{...this.config}});return a}async getTransactions(e){var t;const{data:n}=await Ie({url:this.nodeUrl,endpoint:"transactions",originMethod:"getTransactions",params:{start:null==(t=null==e?void 0:e.start)?void 0:t.toString(),limit:null==e?void 0:e.limit},overrides:{...this.config}});return n}async getTransactionByHash(e){const{data:t}=await Ie({url:this.nodeUrl,endpoint:`transactions/by_hash/${e}`,originMethod:"getTransactionByHash",overrides:{...this.config}});return t}async getTransactionByVersion(e){const{data:t}=await Ie({url:this.nodeUrl,endpoint:`transactions/by_version/${e}`,originMethod:"getTransactionByVersion",overrides:{...this.config}});return t}async transactionPending(e){try{return"pending_transaction"===(await this.getTransactionByHash(e)).type}catch(t){if(404===(null==t?void 0:t.status))return!0;throw t}}async waitForTransactionWithResult(e,t){var n,r;const s=null!=(n=null==t?void 0:t.timeoutSecs)?n:20,i=null!=(r=null==t?void 0:t.checkSuccess)&&r;let a,o=!0,c=0;for(;o&&!(c>=s);){try{if(a=await this.getTransactionByHash(e),o="pending_transaction"===a.type,!o)break}catch(l){const e=l instanceof sr,t=e&&404!==l.status&&l.status>=400&&l.status<500;if(!e||t)throw l}await me(1e3),c+=1}if(void 0===a)throw new Error(`Waiting for transaction ${e} failed`);if(o)throw new nr(`Waiting for transaction ${e} timed out after ${s} seconds`,a);if(!i)return a;if(null==a||!a.success)throw new rr(`Transaction ${e} failed with an error: ${a.vm_status}`,a);return a}async waitForTransaction(e,t){await this.waitForTransactionWithResult(e,t)}async getLedgerInfo(){const{data:e}=await Ie({url:this.nodeUrl,originMethod:"getLedgerInfo",overrides:{...this.config}});return e}async getChainId(){return(await this.getLedgerInfo()).chain_id}async getTableItem(e,t,n){var r;return(await $e({url:this.nodeUrl,body:t,endpoint:`tables/${e}/item`,originMethod:"getTableItem",params:{ledger_version:null==(r=null==n?void 0:n.ledgerVersion)?void 0:r.toString()},overrides:{...this.config}})).data}async generateRawTransaction(e,t,n){const[{sequence_number:r},s,{gas_estimate:i}]=await Promise.all([null!=n&&n.providedSequenceNumber?Promise.resolve({sequence_number:n.providedSequenceNumber}):this.getAccount(e),this.getChainId(),null!=n&&n.gasUnitPrice?Promise.resolve({gas_estimate:n.gasUnitPrice}):this.estimateGasPrice()]),{maxGasAmount:a,gasUnitPrice:o,expireTimestamp:c}={maxGasAmount:BigInt(ve),gasUnitPrice:BigInt(i),expireTimestamp:BigInt(Math.floor(Date.now()/1e3)+20),...n};return new qe.RawTransaction(qe.AccountAddress.fromHex(e),BigInt(r),t,a,o,c,new qe.ChainId(s))}async generateSignSubmitTransaction(t,n,r){const s=await this.generateRawTransaction(t.address(),n,r),i=e.generateBCSTransaction(t,s);return(await this.submitSignedBCSTransaction(i)).hash}async signAndSubmitTransaction(t,n){const r=e.generateBCSTransaction(t,n);return(await this.submitSignedBCSTransaction(r)).hash}async publishPackage(e,t,n,r){const s=new Re;je(n,s);const i=new qe.TransactionPayloadEntryFunction(qe.EntryFunction.natural("0x1::code","publish_package_txn",[],[st(t),s.getBytes()]));return this.generateSignSubmitTransaction(e,i,r)}async createResourceAccountAndPublishPackage(e,t,n,r,s){const i=new Re;je(r,i);const a=new qe.TransactionPayloadEntryFunction(qe.EntryFunction.natural("0x1::resource_account","create_resource_account_and_publish_package",[],[st(t),st(n),i.getBytes()]));return this.generateSignSubmitTransaction(e,a,s)}async generateSignSubmitWaitForTransaction(e,t,n){const r=await this.generateSignSubmitTransaction(e,t,n);return this.waitForTransactionWithResult(r,n)}async estimateGasPrice(){const{data:e}=await Ie({url:this.nodeUrl,endpoint:"estimate_gas_price",originMethod:"estimateGasPrice",overrides:{...this.config}});return e}async estimateMaxGasAmount(e){const t=`0x1::coin::CoinStore<${Ae}>`,[{gas_estimate:n},r]=await Promise.all([this.estimateGasPrice(),this.getAccountResources(e)]),s=r.find((e=>e.type===t));return BigInt(s.data.coin.value)/BigInt(n)}async rotateAuthKeyEd25519(t,n,r){const{sequence_number:s,authentication_key:i}=await this.getAccount(t.address()),a=new $n(n),o=new qe.RotationProofChallenge(qe.AccountAddress.CORE_CODE_ADDRESS,"account","RotationProofChallenge",BigInt(s),qe.AccountAddress.fromHex(t.address()),new qe.AccountAddress(new He(i).toUint8Array()),a.pubKey().toUint8Array()),c=He.fromUint8Array(Xe(o)),l=t.signHexString(c),d=a.signHexString(c),u=new qe.TransactionPayloadEntryFunction(qe.EntryFunction.natural("0x1::account","rotate_authentication_key",[],[Qe(0),st(t.pubKey().toUint8Array()),Qe(0),st(a.pubKey().toUint8Array()),st(l.toUint8Array()),st(d.toUint8Array())])),h=await this.generateRawTransaction(t.address(),u,r),f=e.generateBCSTransaction(t,h);return this.submitSignedBCSTransaction(f)}async lookupOriginalAddress(e){const t=await this.getAccountResource("0x1","0x1::account::OriginatingAddress"),{address_map:{handle:n}}=t.data,r=await this.getTableItem(n,{key_type:"address",value_type:"address",key:He.ensure(e).hex()});return new He(r)}async getBlockByHeight(e,t){const{data:n}=await Ie({url:this.nodeUrl,endpoint:`blocks/by_height/${e}`,originMethod:"getBlockByHeight",params:{with_transactions:t},overrides:{...this.config}});return n}async getBlockByVersion(e,t){const{data:n}=await Ie({url:this.nodeUrl,endpoint:`blocks/by_version/${e}`,originMethod:"getBlockByVersion",params:{with_transactions:t},overrides:{...this.config}});return n}async view(e,t){const{data:n}=await $e({url:this.nodeUrl,body:e,endpoint:"view",originMethod:"getTableItem",params:{ledger_version:t},overrides:{...this.config}});return n}clearCache(e){!function(e){const t=new Set;for(const n of e){const e=ze.get(n);if(e)for(const n of e)t.has(n)||(n.clear(),t.add(n))}t.size}(e)}};ge([ir],er.prototype,"getAccount"),ge([ir],er.prototype,"getAccountTransactions"),ge([ir,xe(6e5)],er.prototype,"getAccountModules"),ge([ir],er.prototype,"getAccountModule"),ge([ir],er.prototype,"getAccountResources"),ge([ir],er.prototype,"getAccountResource"),ge([ir],er.prototype,"getEventsByCreationNumber"),ge([ir],er.prototype,"getEventsByEventHandle"),ge([ir],er.prototype,"submitSignedBCSTransaction"),ge([ir],er.prototype,"submitBCSSimulation"),ge([ir],er.prototype,"getTransactions"),ge([ir],er.prototype,"getTransactionByHash"),ge([ir],er.prototype,"getTransactionByVersion"),ge([ir],er.prototype,"getLedgerInfo"),ge([Ue()],er.prototype,"getChainId"),ge([ir],er.prototype,"getTableItem"),ge([ir,Ue({ttlMs:3e5,tags:["gas_estimates"]})],er.prototype,"estimateGasPrice"),ge([ir],er.prototype,"estimateMaxGasAmount"),ge([ir],er.prototype,"getBlockByHeight"),ge([ir],er.prototype,"getBlockByVersion"),ge([ir],er.prototype,"view");var tr=er,nr=class extends Error{constructor(e,t){super(e),this.lastSubmittedTransaction=t}},rr=class extends Error{constructor(e,t){super(e),this.transaction=t}},sr=class extends Error{constructor(e,t,n,r){super(t),this.status=e,this.message=t,this.errorCode=n,this.vmErrorCode=r}};function ir(e,t,n){const r=n.value;return n.value=async function(){var e,t;try{for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return await r.apply(this,[...s])}catch(a){throw a instanceof Se?new sr(a.status,JSON.stringify({message:a.message,...a.data}),null==(e=a.data)?void 0:e.error_code,null==(t=a.data)?void 0:t.vm_error_code):a}},n}var ar=class e{constructor(e,t){this.endpoint=e,this.config=t}static validateAddress(e){if(e.length<66)throw new Error(`${e} is less than 66 chars long.`)}async queryIndexer(e){const t=await $e({url:this.endpoint,body:e,overrides:{WITH_CREDENTIALS:!1,...this.config}});if(t.data.errors)throw new sr(t.data.errors[0].extensions.code,JSON.stringify({message:t.data.errors[0].message,error_code:t.data.errors[0].extensions.code}));return t.data.data}async getIndexerLedgerInfo(){const e={query:"\n    query getIndexerLedgerInfo {\n  ledger_infos {\n    chain_id\n  }\n}\n    "};return this.queryIndexer(e)}async getAccountNFTs(t,n){const r=He.ensure(t).hex();e.validateAddress(r);const s={query:"\n    query getAccountCurrentTokens($address: String!, $offset: Int, $limit: Int) {\n  current_token_ownerships(\n    where: {owner_address: {_eq: $address}, amount: {_gt: 0}}\n    order_by: [{last_transaction_version: desc}, {creator_address: asc}, {collection_name: asc}, {name: asc}]\n    offset: $offset\n    limit: $limit\n  ) {\n    amount\n    current_token_data {\n      ...TokenDataFields\n    }\n    current_collection_data {\n      ...CollectionDataFields\n    }\n    last_transaction_version\n    property_version\n  }\n}\n    \n    fragment TokenDataFields on current_token_datas {\n  creator_address\n  collection_name\n  description\n  metadata_uri\n  name\n  token_data_id_hash\n  collection_data_id_hash\n}\n    \n\n    fragment CollectionDataFields on current_collection_datas {\n  metadata_uri\n  supply\n  description\n  collection_name\n  collection_data_id_hash\n  table_handle\n  creator_address\n}\n    ",variables:{address:r,offset:null==n?void 0:n.offset,limit:null==n?void 0:n.limit}};return this.queryIndexer(s)}async getTokenActivities(t,n){var r,s;const i=He.ensure(t).hex();e.validateAddress(i);const a={token_data_id:{_eq:i}};null!=n&&n.tokenStandard&&(a.token_standard={_eq:null==n?void 0:n.tokenStandard});const o={query:Pn,variables:{where_condition:a,offset:null==(r=null==n?void 0:n.options)?void 0:r.offset,limit:null==(s=null==n?void 0:n.options)?void 0:s.limit,order_by:null==n?void 0:n.orderBy}};return this.queryIndexer(o)}async getTokenActivitiesCount(e){const t={query:"\n    query getTokenActivitiesCount($token_id: String) {\n  token_activities_v2_aggregate(where: {token_data_id: {_eq: $token_id}}) {\n    aggregate {\n      count\n    }\n  }\n}\n    ",variables:{token_id:e}};return this.queryIndexer(t)}async getAccountTokensCount(t,n){var r,s;const i={owner_address:{_eq:t},amount:{_gt:"0"}};null!=n&&n.tokenStandard&&(i.token_standard={_eq:null==n?void 0:n.tokenStandard});const a=He.ensure(t).hex();e.validateAddress(a);const o={query:"\n    query getAccountTokensCount($where_condition: current_token_ownerships_v2_bool_exp, $offset: Int, $limit: Int) {\n  current_token_ownerships_v2_aggregate(\n    where: $where_condition\n    offset: $offset\n    limit: $limit\n  ) {\n    aggregate {\n      count\n    }\n  }\n}\n    ",variables:{where_condition:i,offset:null==(r=null==n?void 0:n.options)?void 0:r.offset,limit:null==(s=null==n?void 0:n.options)?void 0:s.limit}};return this.queryIndexer(o)}async getTokenData(t,n){var r,s;const i=He.ensure(t).hex();e.validateAddress(i);const a={token_data_id:{_eq:i}};null!=n&&n.tokenStandard&&(a.token_standard={_eq:null==n?void 0:n.tokenStandard});const o={query:"\n    query getTokenData($where_condition: current_token_datas_v2_bool_exp, $offset: Int, $limit: Int, $order_by: [current_token_datas_v2_order_by!]) {\n  current_token_datas_v2(\n    where: $where_condition\n    offset: $offset\n    limit: $limit\n    order_by: $order_by\n  ) {\n    collection_id\n    description\n    is_fungible_v2\n    largest_property_version_v1\n    last_transaction_timestamp\n    last_transaction_version\n    maximum\n    supply\n    token_data_id\n    token_name\n    token_properties\n    token_standard\n    token_uri\n    current_collection {\n      collection_id\n      collection_name\n      creator_address\n      current_supply\n      description\n      last_transaction_timestamp\n      last_transaction_version\n      max_supply\n      mutable_description\n      mutable_uri\n      table_handle_v1\n      token_standard\n      total_minted_v2\n      uri\n    }\n  }\n}\n    ",variables:{where_condition:a,offset:null==(r=null==n?void 0:n.options)?void 0:r.offset,limit:null==(s=null==n?void 0:n.options)?void 0:s.limit,order_by:null==n?void 0:n.orderBy}};return this.queryIndexer(o)}async getTokenOwnersData(t,n,r){var s,i;const a=He.ensure(t).hex();e.validateAddress(a);const o={token_data_id:{_eq:a},amount:{_gt:"0"}};n&&(o.property_version_v1={_eq:n}),null!=r&&r.tokenStandard&&(o.token_standard={_eq:null==r?void 0:r.tokenStandard});const c={query:Mn,variables:{where_condition:o,offset:null==(s=null==r?void 0:r.options)?void 0:s.offset,limit:null==(i=null==r?void 0:r.options)?void 0:i.limit,order_by:null==r?void 0:r.orderBy}};return this.queryIndexer(c)}async getTokenCurrentOwnerData(t,n,r){var s,i;const a=He.ensure(t).hex();e.validateAddress(a);const o={token_data_id:{_eq:a},amount:{_gt:"0"}};n&&(o.property_version_v1={_eq:n}),null!=r&&r.tokenStandard&&(o.token_standard={_eq:null==r?void 0:r.tokenStandard});const c={query:Dn,variables:{where_condition:o,offset:null==(s=null==r?void 0:r.options)?void 0:s.offset,limit:null==(i=null==r?void 0:r.options)?void 0:i.limit,order_by:null==r?void 0:r.orderBy}};return this.queryIndexer(c)}async getOwnedTokens(t,n){var r,s;const i=He.ensure(t).hex();e.validateAddress(i);const a={owner_address:{_eq:i},amount:{_gt:0}};null!=n&&n.tokenStandard&&(a.token_standard={_eq:null==n?void 0:n.tokenStandard});const o={query:Hn,variables:{where_condition:a,offset:null==(r=null==n?void 0:n.options)?void 0:r.offset,limit:null==(s=null==n?void 0:n.options)?void 0:s.limit,order_by:null==n?void 0:n.orderBy}};return this.queryIndexer(o)}async getOwnedTokensByTokenData(t,n){var r,s;const i=He.ensure(t).hex();e.validateAddress(i);const a={token_data_id:{_eq:i},amount:{_gt:0}};null!=n&&n.tokenStandard&&(a.token_standard={_eq:null==n?void 0:n.tokenStandard});const o={query:qn,variables:{where_condition:a,offset:null==(r=null==n?void 0:n.options)?void 0:r.offset,limit:null==(s=null==n?void 0:n.options)?void 0:s.limit,order_by:null==n?void 0:n.orderBy}};return this.queryIndexer(o)}async getTokenOwnedFromCollectionAddress(t,n,r){var s,i;const a=He.ensure(t).hex();e.validateAddress(a);const o=He.ensure(n).hex();e.validateAddress(o);const c={owner_address:{_eq:a},current_token_data:{collection_id:{_eq:o}},amount:{_gt:0}};null!=r&&r.tokenStandard&&(c.token_standard={_eq:null==r?void 0:r.tokenStandard});const l={query:Fn,variables:{where_condition:c,offset:null==(s=null==r?void 0:r.options)?void 0:s.offset,limit:null==(i=null==r?void 0:r.options)?void 0:i.limit,order_by:null==r?void 0:r.orderBy}};return this.queryIndexer(l)}async getTokenOwnedFromCollectionNameAndCreatorAddress(e,t,n,r){const s=await this.getCollectionAddress(n,t,r);return await this.getTokenOwnedFromCollectionAddress(e,s,r)}async getCollectionData(t,n,r){var s,i;const a=He.ensure(t).hex();e.validateAddress(a);const o={collection_name:{_eq:n},creator_address:{_eq:a}};null!=r&&r.tokenStandard&&(o.token_standard={_eq:null==r?void 0:r.tokenStandard});const c={query:"\n    query getCollectionData($where_condition: current_collections_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_collections_v2_order_by!]) {\n  current_collections_v2(\n    where: $where_condition\n    offset: $offset\n    limit: $limit\n    order_by: $order_by\n  ) {\n    collection_id\n    collection_name\n    creator_address\n    current_supply\n    description\n    last_transaction_timestamp\n    last_transaction_version\n    max_supply\n    mutable_description\n    mutable_uri\n    table_handle_v1\n    token_standard\n    total_minted_v2\n    uri\n  }\n}\n    ",variables:{where_condition:o,offset:null==(s=null==r?void 0:r.options)?void 0:s.offset,limit:null==(i=null==r?void 0:r.options)?void 0:i.limit,order_by:null==r?void 0:r.orderBy}};return this.queryIndexer(c)}async getCollectionAddress(e,t,n){return(await this.getCollectionData(e,t,n)).current_collections_v2[0].collection_id}async getCollectionsWithOwnedTokens(t,n){var r,s;const i=He.ensure(t).hex();e.validateAddress(i);const a={owner_address:{_eq:i}};null!=n&&n.tokenStandard&&(a.current_collection={token_standard:{_eq:null==n?void 0:n.tokenStandard}});const o={query:"\n    query getCollectionsWithOwnedTokens($where_condition: current_collection_ownership_v2_view_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_collection_ownership_v2_view_order_by!]) {\n  current_collection_ownership_v2_view(\n    where: $where_condition\n    offset: $offset\n    limit: $limit\n    order_by: $order_by\n  ) {\n    current_collection {\n      collection_id\n      collection_name\n      creator_address\n      current_supply\n      description\n      last_transaction_timestamp\n      last_transaction_version\n      mutable_description\n      max_supply\n      mutable_uri\n      table_handle_v1\n      token_standard\n      total_minted_v2\n      uri\n    }\n    collection_id\n    collection_name\n    collection_uri\n    creator_address\n    distinct_tokens\n    last_transaction_version\n    owner_address\n    single_token_uri\n  }\n}\n    ",variables:{where_condition:a,offset:null==(r=null==n?void 0:n.options)?void 0:r.offset,limit:null==(s=null==n?void 0:n.options)?void 0:s.limit,order_by:null==n?void 0:n.orderBy}};return this.queryIndexer(o)}async getAccountTransactionsCount(t){const n=He.ensure(t).hex();e.validateAddress(n);const r={query:"\n    query getAccountTransactionsCount($address: String) {\n  account_transactions_aggregate(where: {account_address: {_eq: $address}}) {\n    aggregate {\n      count\n    }\n  }\n}\n    ",variables:{address:n}};return this.queryIndexer(r)}async getAccountTransactionsData(t,n){var r,s;const i=He.ensure(t).hex();e.validateAddress(i);const a={query:Nn,variables:{where_condition:{account_address:{_eq:i}},offset:null==(r=null==n?void 0:n.options)?void 0:r.offset,limit:null==(s=null==n?void 0:n.options)?void 0:s.limit,order_by:null==n?void 0:n.orderBy}};return this.queryIndexer(a)}async getTopUserTransactions(e){const t={query:"\n    query getTopUserTransactions($limit: Int) {\n  user_transactions(limit: $limit, order_by: {version: desc}) {\n    version\n  }\n}\n    ",variables:{limit:e}};return this.queryIndexer(t)}async getUserTransactions(e){var t,n;const r={query:"\n    query getUserTransactions($where_condition: user_transactions_bool_exp!, $offset: Int, $limit: Int, $order_by: [user_transactions_order_by!]) {\n  user_transactions(\n    order_by: $order_by\n    where: $where_condition\n    limit: $limit\n    offset: $offset\n  ) {\n    version\n  }\n}\n    ",variables:{where_condition:{version:{_lte:null==e?void 0:e.startVersion}},offset:null==(t=null==e?void 0:e.options)?void 0:t.offset,limit:null==(n=null==e?void 0:e.options)?void 0:n.limit,order_by:null==e?void 0:e.orderBy}};return this.queryIndexer(r)}async getDelegatedStakingActivities(t,n){const r=He.ensure(t).hex(),s=He.ensure(n).hex();e.validateAddress(r),e.validateAddress(s);const i={query:"\n    query getDelegatedStakingActivities($delegatorAddress: String, $poolAddress: String) {\n  delegated_staking_activities(\n    where: {delegator_address: {_eq: $delegatorAddress}, pool_address: {_eq: $poolAddress}}\n  ) {\n    amount\n    delegator_address\n    event_index\n    event_type\n    pool_address\n    transaction_version\n  }\n}\n    ",variables:{delegatorAddress:r,poolAddress:s}};return this.queryIndexer(i)}async getNumberOfDelegators(t){const n=He.ensure(t).hex();e.validateAddress(n);const r={query:'\n    query getNumberOfDelegators($poolAddress: String) {\n  num_active_delegator_per_pool(\n    where: {pool_address: {_eq: $poolAddress}, num_active_delegator: {_gt: "0"}}\n    distinct_on: pool_address\n  ) {\n    num_active_delegator\n    pool_address\n  }\n}\n    ',variables:{poolAddress:n}};return this.queryIndexer(r)}async getAccountCoinsData(t,n){var r,s;const i=He.ensure(t).hex();e.validateAddress(i);const a={query:"\n    query getAccountCoinsData($where_condition: current_fungible_asset_balances_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_fungible_asset_balances_order_by!]) {\n  current_fungible_asset_balances(\n    where: $where_condition\n    offset: $offset\n    limit: $limit\n    order_by: $order_by\n  ) {\n    amount\n    asset_type\n    is_frozen\n    is_primary\n    last_transaction_timestamp\n    last_transaction_version\n    owner_address\n    storage_id\n    token_standard\n    metadata {\n      token_standard\n      symbol\n      supply_aggregator_table_key_v1\n      supply_aggregator_table_handle_v1\n      project_uri\n      name\n      last_transaction_version\n      last_transaction_timestamp\n      icon_uri\n      decimals\n      creator_address\n      asset_type\n    }\n  }\n}\n    ",variables:{where_condition:{owner_address:{_eq:i}},offset:null==(r=null==n?void 0:n.options)?void 0:r.offset,limit:null==(s=null==n?void 0:n.options)?void 0:s.limit,order_by:null==n?void 0:n.orderBy}};return this.queryIndexer(a)}async getAccountCoinsDataCount(t){const n=He.ensure(t).hex();e.validateAddress(n);const r={query:"\n    query getAccountCoinsDataCount($address: String) {\n  current_fungible_asset_balances_aggregate(\n    where: {owner_address: {_eq: $address}}\n  ) {\n    aggregate {\n      count\n    }\n  }\n}\n    ",variables:{address:n}};return this.queryIndexer(r)}async getAccountOwnedObjects(t,n){var r,s;const i=He.ensure(t).hex();e.validateAddress(i);const a={query:"\n    query getCurrentObjects($where_condition: current_objects_bool_exp, $offset: Int, $limit: Int, $order_by: [current_objects_order_by!]) {\n  current_objects(\n    where: $where_condition\n    offset: $offset\n    limit: $limit\n    order_by: $order_by\n  ) {\n    allow_ungated_transfer\n    state_key_hash\n    owner_address\n    object_address\n    last_transaction_version\n    last_guid_creation_num\n    is_deleted\n  }\n}\n    ",variables:{where_condition:{owner_address:{_eq:i}},offset:null==(r=null==n?void 0:n.options)?void 0:r.offset,limit:null==(s=null==n?void 0:n.options)?void 0:s.limit,order_by:null==n?void 0:n.orderBy}};return this.queryIndexer(a)}},or=class{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=null,s=null;if("object"==typeof e&&function(e){return void 0!==e.fullnodeUrl&&"string"==typeof e.fullnodeUrl}(e)?(r=e.fullnodeUrl,s=e.indexerUrl,this.network="CUSTOM"):(r=Le[e],s=Oe[e],this.network=e),"CUSTOM"===this.network&&!r)throw new Error("fullnode url is not provided");s&&(this.indexerClient=new ar(s,t)),this.aptosClient=new tr(r,t,n)}};function cr(e,t,n){Object.getOwnPropertyNames(t.prototype).forEach((r=>{const s=Object.getOwnPropertyDescriptor(t.prototype,r);s&&(s.value=function(){return this[n][r](...arguments)},Object.defineProperty(e.prototype,r,s))})),Object.getOwnPropertyNames(t).forEach((r=>{const s=Object.getOwnPropertyDescriptor(t,r);s&&(s.value=function(){return this[n][r](...arguments)},!e.hasOwnProperty.call(e,r)&&Object.defineProperty(e,r,s))}))}cr(or,tr,"aptosClient"),cr(or,ar,"indexerClient");var lr=class{constructor(e,t){this.type=e,this.value=t}},dr=class{constructor(){this.data={}}setProperty(e,t){this.data[e]=t}};function ur(e){const t=e.map.data,n=new dr;return t.forEach((e=>{const{key:t}=e,r=e.value.value,s=e.value.type,i=function(e){let t;return t="string"===e||"String"===e?new Lt(Ht):new Gt(e).parseTypeTag(),t}(s),a=function(e,t){const n=new Ke(new He(t).toUint8Array());let r="";return r=e instanceof Tt?n.deserializeU8().toString():e instanceof Bt?n.deserializeU64().toString():e instanceof kt?n.deserializeU128().toString():e instanceof zt?n.deserializeBool()?"true":"false":e instanceof $t?He.fromUint8Array(n.deserializeFixedBytes(32)).hex():e instanceof Lt&&e.isStringTypeTag()?n.deserializeStr():t,r}(i,r),o=new lr(s,a);n.setProperty(t,o)})),n}_e({},{PropertyMap:()=>dr,PropertyValue:()=>lr,Token:()=>fr,TokenData:()=>hr});var hr=class{constructor(e,t,n,r,s,i,a,o){this.collection=e,this.description=t,this.name=n,this.maximum=r,this.supply=s,this.uri=i,this.default_properties=ur(a),this.mutability_config=o}},fr=class{constructor(e,t,n){this.id=e,this.amount=t,this.token_properties=ur(n)}},_r=class{constructor(e){this.assetType="0x1::fungible_asset::Metadata",this.provider=e}async transfer(e,t,n,r,s){const i=await this.generateTransfer(e,t,n,r,s);return await this.provider.signAndSubmitTransaction(e,i)}async getPrimaryBalance(e,t){const n={function:"0x1::primary_fungible_store::balance",type_arguments:[this.assetType],arguments:[He.ensure(e).hex(),He.ensure(t).hex()]},r=await this.provider.view(n);return BigInt(r[0])}async generateTransfer(e,t,n,r,s){return await new Yn(this.provider,{sender:e.address(),...s}).build("0x1::primary_fungible_store::transfer",[this.assetType],[He.ensure(t).hex(),He.ensure(n).hex(),r])}},gr="0x1::aptos_account::transfer_coins";_e({},{AptosErrorCode:()=>pr,MoveFunctionVisibility:()=>yr,RoleType:()=>wr});var pr=(e=>(e.ACCOUNT_NOT_FOUND="account_not_found",e.RESOURCE_NOT_FOUND="resource_not_found",e.MODULE_NOT_FOUND="module_not_found",e.STRUCT_FIELD_NOT_FOUND="struct_field_not_found",e.VERSION_NOT_FOUND="version_not_found",e.TRANSACTION_NOT_FOUND="transaction_not_found",e.TABLE_ITEM_NOT_FOUND="table_item_not_found",e.BLOCK_NOT_FOUND="block_not_found",e.STATE_VALUE_NOT_FOUND="state_value_not_found",e.VERSION_PRUNED="version_pruned",e.BLOCK_PRUNED="block_pruned",e.INVALID_INPUT="invalid_input",e.INVALID_TRANSACTION_UPDATE="invalid_transaction_update",e.SEQUENCE_NUMBER_TOO_OLD="sequence_number_too_old",e.VM_ERROR="vm_error",e.HEALTH_CHECK_FAILED="health_check_failed",e.MEMPOOL_IS_FULL="mempool_is_full",e.INTERNAL_ERROR="internal_error",e.WEB_FRAMEWORK_ERROR="web_framework_error",e.BCS_NOT_SUPPORTED="bcs_not_supported",e.API_DISABLED="api_disabled",e))(pr||{}),yr=(e=>(e.PRIVATE="private",e.PUBLIC="public",e.FRIEND="friend",e))(yr||{}),wr=(e=>(e.VALIDATOR="validator",e.FULL_NODE="full_node",e))(wr||{});class br extends r.C{}const mr=class e extends r.i{constructor(t,n){super(t,n??(0,r.k)(t,e._platform))}getRpc(e){if(e in this.config)return new tr(this.config[e].rpc);throw new Error("No configuration available for chain: "+e)}getChain(e,t){if(e in this.config)return new br(e,this);throw new Error("No configuration available for chain: "+e)}static nativeTokenId(e,t){if(!this.isSupportedChain(t))throw new Error(`invalid chain: ${t}`);return r.l.tokenId(t,r.m)}static isNativeTokenId(e,t,n){return!(!this.isSupportedChain(t)||n.chain!==t)&&this.nativeTokenId(e,t)==n}static isSupportedChain(t){return(0,r.o)(t)===e._platform}static async getDecimals(t,n,s){if((0,r.p)(s))return(0,r.q)(e._platform);const i=s.toString(),a=`0x1::coin::CoinInfo<${i}>`;return(await n.getAccountResource(i.split(r.r)[0],a)).data.decimals}static async getBalance(e,t,n,s){const i=(0,r.p)(s)?r.m:s.toString(),a=new class{constructor(e){this.aptosClient=e}async transfer(e,t,n,r){var s,i,a;const o=(null!=(s=null==r?void 0:r.coinType)?s:"").toString().includes("::");if(null!=r&&r.coinType&&!o&&ot.isValid(r.coinType)){console.warn("to transfer a fungible asset, use `FungibleAssetClient()` class for better support");const s=new or({fullnodeUrl:this.aptosClient.nodeUrl,indexerUrl:null!=(i=Oe[Ne[this.aptosClient.nodeUrl]])?i:this.aptosClient.nodeUrl});return await new _r(s).transfer(e,null==r?void 0:r.coinType,Cn(t),n)}const c=null!=(a=null==r?void 0:r.coinType)?a:Ae;let l;l=void 0===(null==r?void 0:r.createReceiverIfMissing)||null!=r&&r.createReceiverIfMissing?gr:"0x1::coin::transfer";const d=Cn(t),u=await new Yn(this.aptosClient,{sender:e.address(),...r}).build(l,[c],[d,n]),h=tr.generateBCSTransaction(e,u);return(await this.aptosClient.submitSignedBCSTransaction(h)).hash}async checkBalance(e,t){var n,r,s;const i=(null!=(n=null==t?void 0:t.coinType)?n:"").toString().includes("::");if(null!=t&&t.coinType&&!i&&ot.isValid(t.coinType)){console.warn("to check balance of a fungible asset, use `FungibleAssetClient()` class for better support");const n=new or({fullnodeUrl:this.aptosClient.nodeUrl,indexerUrl:null!=(r=Oe[Ne[this.aptosClient.nodeUrl]])?r:this.aptosClient.nodeUrl});return await new _r(n).getPrimaryBalance(Cn(e),null==t?void 0:t.coinType)}const a=`0x1::coin::CoinStore<${null!=(s=null==t?void 0:t.coinType)?s:Ae}>`,o=Cn(e),c=await this.aptosClient.getAccountResource(o,a);return BigInt(c.data.coin.value)}}(t);try{return await a.checkBalance(n,{coinType:i})}catch(o){if("resource_not_found"===o.errorCode&&404===o.status)return null;throw o}}static async getBalances(e,t,n,s){return(await Promise.all(s.map((async s=>{const i=await this.getBalance(e,t,n,s);return{[(0,r.p)(s)?"native":new r.s(s).toString()]:i}})))).reduce(((e,t)=>Object.assign(e,t)),{})}static async sendWait(e,t,n){const r=[];for(const s of n){const e=await t.submitTransaction(s),n=await t.waitForTransactionWithResult(e.hash);r.push(n.hash)}return r}static async getLatestBlock(e){const t=await e.getLedgerInfo();return Number(t.block_height)}static async getLatestFinalizedBlock(e){const t=await e.getLedgerInfo();return Number(t.block_height)}static chainFromChainId(t){const n=(0,r.t)(e._platform,BigInt(t));if(!n)throw new Error(`No matching chainId to determine network and chain: ${t}`);const[s,i]=n;return[s,i]}static async chainFromRpc(e){const t=await e.getChainId();return this.chainFromChainId(t.toString())}};i(mr,"_platform",r.j);let vr=mr;class Ar{constructor(e,t,n,r){i(this,"_chain"),i(this,"_account"),i(this,"_rpc"),i(this,"_debug"),this._chain=e,this._account=t,this._rpc=n,this._debug=r}chain(){return this._chain}address(){return this._account.address().hex()}async signAndSend(e){const t=[];for(const n of e){const{description:e,transaction:r}=n;this._debug&&console.log(`Signing: ${e} for ${this.address()}`);const s={gas_unit_price:"100",max_gas_amount:"30000",expiration_timestamp_secs:(BigInt(Date.now()+288e5)/1000n).toString()},i=await this._rpc.generateTransaction(this._account.address(),r,s),{hash:a}=await this._simSignSend(i);t.push(a)}return t}async _simSignSend(e){return await this._rpc.simulateTransaction(this._account,e).then((e=>e.forEach((e=>{if(!e.success)throw new Error(`Transaction failed: ${e.vm_status}\n${JSON.stringify(e,null,2)}`)})))),this._rpc.signTransaction(this._account,e).then((e=>this._rpc.submitTransaction(e))).then((e=>this._rpc.waitForTransactionWithResult(e.hash)))}}const Ur={Address:r.s,Platform:vr,getSigner:async function(e,t){const[n,s]=await vr.chainFromRpc(e);return new Ar(s,new $n(r.u.decode(t)),e)},protocols:{WormholeCore:()=>n.e(606).then(n.bind(n,1606)),TokenBridge:()=>n.e(921).then(n.bind(n,2921))},getChain:(e,t,n)=>new br(t,new vr(e,(0,r.c)(e,r.j,{[t]:n})))},xr=Object.freeze(Object.defineProperty({__proto__:null,default:Ur},Symbol.toStringTag,{value:"Module"}))}}]);
//# sourceMappingURL=57.f3f84093.chunk.js.map